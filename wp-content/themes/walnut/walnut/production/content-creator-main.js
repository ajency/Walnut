/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */

/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

/*
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

//  Underscore.string
//  (c) 2010 Esa-Matti Suuronen <esa-matti aet suuronen dot org>
//  Underscore.string is freely distributable under the terms of the MIT license.
//  Documentation: https://github.com/epeli/underscore.string
//  Some code is borrowed from MooTools and Alexandru Marasteanu.
//  Version '2.3.2'

// Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>

/*! KineticJS v5.0.1 2014-01-21 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/

/**
 * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill
 * v1.0.0
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2013-09-23
 */

/**
 * Plupload - multi-runtime File Uploader
 * v2.0.0beta
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2012-11-30
 */

//     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.
//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// Backbone.BabySitter
// -------------------
// v0.1.4
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.babysitter

//@ sourceMappingURL=backbone.babysitter.map;
// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v1.8.5
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

// Backbone.Syphon, v0.4.1
// Copyright (c)2012 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
// http://github.com/derickbailey/backbone.syphon

/**
* @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/requirejs/text for details
*/

/*! jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 JÃ¶rn Zaefferer; Licensed MIT */

/*! Sidr - v1.1.1 - 2013-03-14
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */

/**
* Bootstrap v3.0.0 by @fat and @mdo
* Copyright 2013 Twitter Inc.
* Licensed under http://www.apache.org/licenses/LICENSE-2.0.
*
* Designed and built with all the love in the world by @mdo and @fat.
*/

/**
	 * Needed only for IE9
	 *
	 * Based on jquery.base64.js 0.0.3 - https://github.com/yckart/jquery.base64.js
	 *
	 * Based on: https://gist.github.com/Yaffle/1284012
	 *
	 * Copyright (c) 2012 Yannick Albert (http://yckart.com)
	 * Licensed under the MIT license
	 * http://www.opensource.org/licenses/mit-license.php
	 */

/* =========================================================
 * bootstrap-slider.js v2.0.0
 * http://www.eyecon.ro/bootstrap-slider
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */

/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 *
 * Copyright Cory LaViska for A Beautiful Site, LLC. (http://www.abeautifulsite.net/)
 *
 * Licensed under the MIT license: http://opensource.org/licenses/MIT
 *
 */

/*!jQuery Knob*/

/**
 * Downward compatible, touchable dial
 *
 * Version: 1.2.8
 * Requires: jQuery v1.7+
 *
 * Copyright (c) 2012 Anthony Terrien
 * Under MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Thanks to vor, eskimoblood, spiffistan, FabrizioC
 */

/*
Copyright 2012 Igor Vaynberg

Version: 3.5.1 Timestamp: Tue Jul 22 18:58:56 EDT 2014

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/*!
 * ScrewDefaultButtons v2.0.6
 * http://screwdefaultbuttons.com/
 *
 * Licensed under the MIT license.
 * Copyright 2013 Matt Solano http://mattsolano.com
 *
 * Date: Mon February 25 2013
 */

/**
 * bootbox.js v4.3.0
 *
 * http://bootboxjs.com/license.txt
 */

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*

Holder - 2.1 - client side image placeholders
(c) 2012-2013 Ivan Malopinsky / http://imsky.co

Provided under the MIT License.
Commercial use requires attribution.

*/

var requirejs,require,define;!function(t){function e(t,e){return v.call(t,e)}function n(t,e){var n,i,o,r,s,a,l,c,u,h,d,p=e&&e.split("/"),f=g.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=t.split("/"),s=t.length-1,g.nodeIdCompat&&b.test(t[s])&&(t[s]=t[s].replace(b,"")),t=p.concat(t),u=0;u<t.length;u+=1)if(d=t[u],"."===d)t.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||m)&&f){for(n=t.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),p)for(h=p.length;h>0;h-=1)if(o=f[p.slice(0,h).join("/")],o&&(o=o[i])){r=o,a=u;break}if(r)break;!l&&m&&m[i]&&(l=m[i],c=u)}!r&&l&&(r=l,a=c),r&&(n.splice(0,a,r),t=n.join("/"))}return t}function i(e,n){return function(){return u.apply(t,y.call(arguments,0).concat([e,n]))}}function o(t){return function(e){return n(e,t)}}function r(t){return function(e){p[t]=e}}function s(n){if(e(f,n)){var i=f[n];delete f[n],m[n]=!0,c.apply(t,i)}if(!e(p,n)&&!e(m,n))throw new Error("No "+n);return p[n]}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return g&&g.config&&g.config[t]||{}}}var c,u,h,d,p={},f={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice,b=/\.js$/;h=function(t,e){var i,r=a(t),l=r[0];return t=r[1],l&&(l=n(l,e),i=s(l)),l?t=i&&i.normalize?i.normalize(t,o(e)):n(t,e):(t=n(t,e),r=a(t),l=r[0],t=r[1],l&&(i=s(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:i}},d={require:function(t){return i(t)},exports:function(t){var e=p[t];return"undefined"!=typeof e?e:p[t]={}},module:function(t){return{id:t,uri:"",exports:p[t],config:l(t)}}},c=function(n,o,a,l){var c,u,g,v,y,b,_=[],w=typeof a;if(l=l||n,"undefined"===w||"function"===w){for(o=!o.length&&a.length?["require","exports","module"]:o,y=0;y<o.length;y+=1)if(v=h(o[y],l),u=v.f,"require"===u)_[y]=d.require(n);else if("exports"===u)_[y]=d.exports(n),b=!0;else if("module"===u)c=_[y]=d.module(n);else if(e(p,u)||e(f,u)||e(m,u))_[y]=s(u);else{if(!v.p)throw new Error(n+" missing "+u);v.p.load(v.n,i(l,!0),r(u),{}),_[y]=p[u]}g=a?a.apply(p[n],_):void 0,n&&(c&&c.exports!==t&&c.exports!==p[n]?p[n]=c.exports:g===t&&b||(p[n]=g))}else n&&(p[n]=a)},requirejs=require=u=function(e,n,i,o,r){if("string"==typeof e)return d[e]?d[e](n):s(h(e,n).f);if(!e.splice){if(g=e,g.deps&&u(g.deps,g.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=o,o=r),o?c(t,e,n,i):setTimeout(function(){c(t,e,n,i)},4),u},u.config=function(t){return u(t)},requirejs._defined=p,define=function(t,n,i){n.splice||(i=n,n=[]),e(p,t)||e(f,t)||(f[t]=[t,n,i])},define.amd={jQuery:!0}}(),define("plugins/almond",function(){}),function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,r=Function.prototype,s=i.push,a=i.slice,l=i.concat,c=o.toString,u=o.hasOwnProperty,h=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,_=Array.isArray,w=Object.keys,x=r.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.5.2";var k=C.each=C.forEach=function(t,e,i){if(null!=t)if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,r=t.length;r>o;o++)if(e.call(i,t[o],o,t)===n)return}else for(var s=C.keys(t),o=0,r=s.length;r>o;o++)if(e.call(i,t[s[o]],s[o],t)===n)return};C.map=C.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(k(t,function(t,o,r){i.push(e.call(n,t,o,r))}),i)};var S="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=C.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(k(t,function(t,r,s){o?n=e.call(i,n,t,r,s):(n=t,o=!0)}),!o)throw new TypeError(S);return n},C.reduceRight=C.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=C.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var s=C.keys(t);r=s.length}if(k(t,function(a,l,c){l=s?s[--r]:--r,o?n=e.call(i,n,t[l],l,c):(n=t[l],o=!0)}),!o)throw new TypeError(S);return n},C.find=C.detect=function(t,e,n){var i;return T(t,function(t,o,r){return e.call(n,t,o,r)?(i=t,!0):void 0}),i},C.filter=C.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(k(t,function(t,o,r){e.call(n,t,o,r)&&i.push(t)}),i)},C.reject=function(t,e,n){return C.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},C.every=C.all=function(t,e,i){e||(e=C.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,i):(k(t,function(t,r,s){return(o=o&&e.call(i,t,r,s))?void 0:n}),!!o)};var T=C.some=C.any=function(t,e,i){e||(e=C.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(k(t,function(t,r,s){return o||(o=e.call(i,t,r,s))?n:void 0}),!!o)};C.contains=C.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):T(t,function(t){return t===e})},C.invoke=function(t,e){var n=a.call(arguments,2),i=C.isFunction(e);return C.map(t,function(t){return(i?e:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,function(t){return t[e]})},C.where=function(t,e,n){return C.isEmpty(e)?n?void 0:[]:C[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},C.findWhere=function(t,e){return C.where(t,e,!0)},C.max=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&C.isEmpty(t))return-(1/0);var i={computed:-(1/0),value:-(1/0)};return k(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;s>i.computed&&(i={value:t,computed:s})}),i.value},C.min=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&C.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return k(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;s<i.computed&&(i={value:t,computed:s})}),i.value},C.shuffle=function(t){var e,n=0,i=[];return k(t,function(t){e=C.random(n++),i[n-1]=i[e],i[e]=t}),i},C.sample=function(t,e,n){return arguments.length<2||n?t[C.random(t.length-1)]:C.shuffle(t).slice(0,Math.max(0,e))};var E=function(t){return C.isFunction(t)?t:function(e){return e[t]}};C.sortBy=function(t,e,n){var i=E(e);return C.pluck(C.map(t,function(t,e,o){return{value:t,index:e,criteria:i.call(n,t,e,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var M=function(t){return function(e,n,i){var o={},r=null==n?C.identity:E(n);return k(e,function(n,s){var a=r.call(i,n,s,e);t(o,a,n)}),o}};C.groupBy=M(function(t,e,n){(C.has(t,e)?t[e]:t[e]=[]).push(n)}),C.indexBy=M(function(t,e,n){t[e]=n}),C.countBy=M(function(t,e){C.has(t,e)?t[e]++:t[e]=1}),C.sortedIndex=function(t,e,n,i){n=null==n?C.identity:E(n);for(var o=n.call(i,e),r=0,s=t.length;s>r;){var a=r+s>>>1;n.call(i,t[a])<o?r=a+1:s=a}return r},C.toArray=function(t){return t?C.isArray(t)?a.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null!=t?null==e||n?t[0]:a.call(t,0,e):void 0},C.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0)):void 0},C.rest=C.tail=C.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var D=function(t,e,n){return e&&C.every(t,C.isArray)?l.apply(n,t):(k(t,function(t){C.isArray(t)||C.isArguments(t)?e?s.apply(n,t):D(t,e,n):n.push(t)}),n)};C.flatten=function(t,e){return D(t,e,[])},C.without=function(t){return C.difference(t,a.call(arguments,1))},C.uniq=C.unique=function(t,e,n,i){C.isFunction(e)&&(i=n,n=e,e=!1);var o=n?C.map(t,n,i):t,r=[],s=[];return k(o,function(n,i){(e?i&&s[s.length-1]===n:C.contains(s,n))||(s.push(n),r.push(t[i]))}),r},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var e=a.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.indexOf(e,t)>=0})})},C.difference=function(t){var e=l.apply(i,a.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=C.pluck(arguments,""+n);return e},C.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;o>i;i++)if(t[i]===e)return i;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,r=new Array(i);i>o;)r[o++]=t,t+=n;return r};var P=function(){};C.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));P.prototype=t.prototype;var o=new P;P.prototype=null;var r=t.apply(o,n.concat(a.call(arguments)));return Object(r)===r?r:o}},C.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},C.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var n={};return e||(e=C.identity),function(){var i=e.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},C.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(a.call(arguments,1)))},C.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:new Date,s=null,r=t.apply(i,o)};return function(){var c=new Date;a||n.leading!==!1||(a=c);var u=e-(c-a);return i=this,o=arguments,0>=u?(clearTimeout(s),s=null,a=c,r=t.apply(i,o)):s||n.trailing===!1||(s=setTimeout(l,u)),r}},C.debounce=function(t,e,n){var i,o,r,s,a;return function(){r=this,o=arguments,s=new Date;var l=function(){var c=new Date-s;e>c?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(r,o)))},c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(r,o)),a}},C.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},C.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)C.has(t,n)&&e.push(n);return e},C.values=function(t){for(var e=C.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},C.pairs=function(t){for(var e=C.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},C.invert=function(t){for(var e={},n=C.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(t){return k(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},C.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},C.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var o in t)C.contains(n,o)||(e[o]=t[o]);return e},C.defaults=function(t){return k(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var o=c.call(t);if(o!=c.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(C.isFunction(s)&&s instanceof s&&C.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var l=0,u=!0;if("[object Array]"==o){if(l=t.length,u=l==e.length)for(;l--&&(u=A(t[l],e[l],n,i)););}else{for(var h in t)if(C.has(t,h)&&(l++,!(u=C.has(e,h)&&A(t[h],e[h],n,i))))break;if(u){for(h in e)if(C.has(e,h)&&!l--)break;u=!l}}return n.pop(),i.pop(),u};C.isEqual=function(t,e){return A(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=_||function(t){return"[object Array]"==c.call(t)},C.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return u.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.times=function(t,e,n){for(var i=Array(Math.max(0,t)),o=0;t>o;o++)i[o]=e.call(n,o);return i},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=C.invert(I.escape);var R={escape:new RegExp("["+C.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(I.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(R[t],function(e){return I[t][e]})}}),C.result=function(t,e){if(null!=t){var n=t[e];return C.isFunction(n)?n.call(t):n}},C.mixin=function(t){k(C.functions(t),function(e){var n=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),L.call(this,n.apply(C,t))}})};var O=0;C.uniqueId=function(t){var e=++O+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,n){var i;n=C.defaults({},n,C.templateSettings);var o=new RegExp([(n.escape||F).source,(n.interpolate||F).source,(n.evaluate||F).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(o,function(e,n,i,o,a){return s+=t.slice(r,a).replace(z,function(t){return"\\"+N[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,C);var l=function(t){return i.call(this,t,C)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},C.chain=function(t){return C(t).chain()};var L=function(t){return this._chain?C(t).chain():t};C.mixin(C),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];C.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),k(["concat","join","slice"],function(t){var e=i[t];C.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(t){return function(){var e;return e||t._}}(this)),function(t,e){function n(t){var e=t.length,n=ut.type(t);return ut.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=St[t]={};return ut.each(t.match(dt)||[],function(t,n){e[n]=!0}),e}function o(t,n,i,o){if(ut.acceptData(t)){var r,s,a=ut.expando,l=t.nodeType,c=l?ut.cache:t,u=l?t[a]:t[a]&&a;if(u&&c[u]&&(o||c[u].data)||i!==e||"string"!=typeof n)return u||(u=l?t[a]=et.pop()||ut.guid++:a),c[u]||(c[u]=l?{}:{toJSON:ut.noop}),("object"==typeof n||"function"==typeof n)&&(o?c[u]=ut.extend(c[u],n):c[u].data=ut.extend(c[u].data,n)),s=c[u],o||(s.data||(s.data={}),s=s.data),i!==e&&(s[ut.camelCase(n)]=i),"string"==typeof n?(r=s[n],null==r&&(r=s[ut.camelCase(n)])):r=s,r}}function r(t,e,n){if(ut.acceptData(t)){var i,o,r=t.nodeType,s=r?ut.cache:t,l=r?t[ut.expando]:ut.expando;if(s[l]){if(e&&(i=n?s[l]:s[l].data)){ut.isArray(e)?e=e.concat(ut.map(e,ut.camelCase)):e in i?e=[e]:(e=ut.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!a(i):!ut.isEmptyObject(i))return}(n||(delete s[l].data,a(s[l])))&&(r?ut.cleanData([t],!0):ut.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}}function s(t,n,i){if(i===e&&1===t.nodeType){var o="data-"+n.replace(Et,"-$1").toLowerCase();if(i=t.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Tt.test(i)?ut.parseJSON(i):i}catch(r){}ut.data(t,n,i)}else i=e}return i}function a(t){var e;for(e in t)if(("data"!==e||!ut.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function l(){return!0}function c(){return!1}function u(){try{return X.activeElement}catch(t){}}function h(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function d(t,e,n){if(ut.isFunction(e))return ut.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return ut.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(Bt.test(e))return ut.filter(e,t,n);e=ut.filter(e,t)}return ut.grep(t,function(t){return ut.inArray(t,e)>=0!==n})}function p(t){var e=Wt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function f(t,e){return ut.nodeName(t,"table")&&ut.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function g(t){return t.type=(null!==ut.find.attr(t,"type"))+"/"+t.type,t}function m(t){var e=oe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function v(t,e){for(var n,i=0;null!=(n=t[i]);i++)ut._data(n,"globalEval",!e||ut._data(e[i],"globalEval"))}function y(t,e){if(1===e.nodeType&&ut.hasData(t)){var n,i,o,r=ut._data(t),s=ut._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)ut.event.add(e,n,a[n][i])}s.data&&(s.data=ut.extend({},s.data))}}function b(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ut.support.noCloneEvent&&e[ut.expando]){o=ut._data(e);for(i in o.events)ut.removeEvent(e,i,o.handle);e.removeAttribute(ut.expando)}"script"===n&&e.text!==t.text?(g(e).text=t.text,m(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ut.support.html5Clone&&t.innerHTML&&!ut.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&ee.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function _(t,n){var i,o,r=0,s=typeof t.getElementsByTagName!==G?t.getElementsByTagName(n||"*"):typeof t.querySelectorAll!==G?t.querySelectorAll(n||"*"):e;if(!s)for(s=[],i=t.childNodes||t;null!=(o=i[r]);r++)!n||ut.nodeName(o,n)?s.push(o):ut.merge(s,_(o,n));return n===e||n&&ut.nodeName(t,n)?ut.merge([t],s):s}function w(t){ee.test(t.type)&&(t.defaultChecked=t.checked)}function x(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=ke.length;o--;)if(e=ke[o]+n,e in t)return e;return i}function C(t,e){return t=e||t,"none"===ut.css(t,"display")||!ut.contains(t.ownerDocument,t)}function k(t,e){for(var n,i,o,r=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(r[s]=ut._data(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&C(i)&&(r[s]=ut._data(i,"olddisplay",M(i.nodeName)))):r[s]||(o=C(i),(n&&"none"!==n||!o)&&ut._data(i,"olddisplay",o?n:ut.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function S(t,e,n){var i=ve.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function T(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=ut.css(t,n+Ce[r],!0,o)),i?("content"===n&&(s-=ut.css(t,"padding"+Ce[r],!0,o)),"margin"!==n&&(s-=ut.css(t,"border"+Ce[r]+"Width",!0,o))):(s+=ut.css(t,"padding"+Ce[r],!0,o),"padding"!==n&&(s+=ut.css(t,"border"+Ce[r]+"Width",!0,o)));return s}function E(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=ue(t),s=ut.support.boxSizing&&"border-box"===ut.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=he(t,e,r),(0>o||null==o)&&(o=t.style[e]),ye.test(o))return o;i=s&&(ut.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+T(t,e,n||(s?"border":"content"),i,r)+"px"}function M(t){var e=X,n=_e[t];return n||(n=D(t,e),"none"!==n&&n||(ce=(ce||ut("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(ce[0].contentWindow||ce[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=D(t,e),ce.detach()),_e[t]=n),n}function D(t,e){var n=ut(e.createElement(t)).appendTo(e.body),i=ut.css(n[0],"display");return n.remove(),i}function P(t,e,n,i){var o;if(ut.isArray(e))ut.each(e,function(e,o){n||Te.test(t)?i(t,o):P(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==ut.type(e))i(t,e);else for(o in e)P(t+"["+o+"]",e[o],n,i)}function A(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(dt)||[];if(ut.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function I(t,e,n,i){function o(a){var l;return r[a]=!0,ut.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=t===qe;return o(e.dataTypes[0])||!r["*"]&&o("*")}function R(t,n){var i,o,r=ut.ajaxSettings.flatOptions||{};for(o in n)n[o]!==e&&((r[o]?t:i||(i={}))[o]=n[o]);return i&&ut.extend(!0,t,i),t}function O(t,n,i){for(var o,r,s,a,l=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("Content-Type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){c.unshift(a);break}if(c[0]in i)s=c[0];else{for(a in i){if(!c[0]||t.converters[a+" "+c[0]]){s=a;break}o||(o=a)}s=s||o}return s?(s!==c[0]&&c.unshift(s),i[s]):void 0}function F(t,e,n,i){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=c[l+" "+r]||c["* "+r],!s)for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[o]:c[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function N(){try{return new t.XMLHttpRequest}catch(e){}}function z(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function L(){return setTimeout(function(){Je=e}),Je=ut.now()}function H(t,e,n){for(var i,o=(rn[e]||[]).concat(rn["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,e,t))return i}function $(t,e,n){var i,o,r=0,s=on.length,a=ut.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Je||L(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(r);return a.notifyWith(t,[c,r,n]),1>r&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:ut.extend({},e),opts:ut.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Je||L(),duration:n.duration,tweens:[],createTween:function(e,n){var i=ut.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(K(u,c.opts.specialEasing);s>r;r++)if(i=on[r].call(c,t,u,c.opts))return i;return ut.map(u,H,c),ut.isFunction(c.opts.start)&&c.opts.start.call(t,c),ut.fx.timer(ut.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function K(t,e){var n,i,o,r,s;for(n in t)if(i=ut.camelCase(n),o=e[i],r=t[n],ut.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),s=ut.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function B(t,e,n){var i,o,r,s,a,l,c=this,u={},h=t.style,d=t.nodeType&&C(t),p=ut._data(t,"fxshow");n.queue||(a=ut._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ut.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===ut.css(t,"display")&&"none"===ut.css(t,"float")&&(ut.support.inlineBlockNeedsLayout&&"inline"!==M(t.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",ut.support.shrinkWrapBlocks||c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],tn.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(d?"hide":"show"))continue;u[i]=p&&p[i]||ut.style(t,i)}if(!ut.isEmptyObject(u)){p?"hidden"in p&&(d=p.hidden):p=ut._data(t,"fxshow",{}),r&&(p.hidden=!d),d?ut(t).show():c.done(function(){ut(t).hide()}),c.done(function(){var e;ut._removeData(t,"fxshow");for(e in u)ut.style(t,e,u[e])});for(i in u)s=H(d?p[i]:0,i,c),i in p||(p[i]=s.start,d&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function q(t,e,n,i,o){return new q.prototype.init(t,e,n,i,o)}function j(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=Ce[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function V(t){return ut.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var W,U,G=typeof e,Y=t.location,X=t.document,Q=X.documentElement,J=t.jQuery,Z=t.$,tt={},et=[],nt="1.10.2",it=et.concat,ot=et.push,rt=et.slice,st=et.indexOf,at=tt.toString,lt=tt.hasOwnProperty,ct=nt.trim,ut=function(t,e){return new ut.fn.init(t,e,U)},ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=/\S+/g,pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,_t=/^-ms-/,wt=/-([\da-z])/gi,xt=function(t,e){return e.toUpperCase()},Ct=function(t){(X.addEventListener||"load"===t.type||"complete"===X.readyState)&&(kt(),ut.ready())},kt=function(){X.addEventListener?(X.removeEventListener("DOMContentLoaded",Ct,!1),t.removeEventListener("load",Ct,!1)):(X.detachEvent("onreadystatechange",Ct),t.detachEvent("onload",Ct))};ut.fn=ut.prototype={jquery:nt,constructor:ut,init:function(t,n,i){var o,r;if(!t)return this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ft.exec(t),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(o[1]){if(n=n instanceof ut?n[0]:n,ut.merge(this,ut.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:X,!0)),gt.test(o[1])&&ut.isPlainObject(n))for(o in n)ut.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o]);return this}if(r=X.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return i.find(t);this.length=1,this[0]=r}return this.context=X,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ut.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),ut.makeArray(t,this))},selector:"",length:0,toArray:function(){return rt.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=ut.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ut.each(this,t,e)},ready:function(t){return ut.ready.promise().done(t),this},slice:function(){return this.pushStack(rt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(ut.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ot,sort:[].sort,splice:[].splice},ut.fn.init.prototype=ut.fn,ut.extend=ut.fn.extend=function(){var t,n,i,o,r,s,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||ut.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(r=arguments[l]))for(o in r)t=a[o],i=r[o],a!==i&&(u&&i&&(ut.isPlainObject(i)||(n=ut.isArray(i)))?(n?(n=!1,s=t&&ut.isArray(t)?t:[]):s=t&&ut.isPlainObject(t)?t:{},a[o]=ut.extend(u,s,i)):i!==e&&(a[o]=i));return a},ut.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===ut&&(t.$=Z),e&&t.jQuery===ut&&(t.jQuery=J),ut},isReady:!1,readyWait:1,holdReady:function(t){t?ut.readyWait++:ut.ready(!0)},ready:function(t){if(t===!0?!--ut.readyWait:!ut.isReady){if(!X.body)return setTimeout(ut.ready);ut.isReady=!0,t!==!0&&--ut.readyWait>0||(W.resolveWith(X,[ut]),ut.fn.trigger&&ut(X).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===ut.type(t)},isArray:Array.isArray||function(t){return"array"===ut.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?tt[at.call(t)]||"object":typeof t},isPlainObject:function(t){var n;if(!t||"object"!==ut.type(t)||t.nodeType||ut.isWindow(t))return!1;try{if(t.constructor&&!lt.call(t,"constructor")&&!lt.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ut.support.ownLast)for(n in t)return lt.call(t,n);for(n in t);return n===e||lt.call(t,n)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||X;var i=gt.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=ut.buildFragment([t],e,o),
o&&ut(o).remove(),ut.merge([],i.childNodes))},parseJSON:function(e){return t.JSON&&t.JSON.parse?t.JSON.parse(e):null===e?e:"string"==typeof e&&(e=ut.trim(e),e&&mt.test(e.replace(yt,"@").replace(bt,"]").replace(vt,"")))?new Function("return "+e)():void ut.error("Invalid JSON: "+e)},parseXML:function(n){var i,o;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(o=new DOMParser,i=o.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(r){i=e}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ut.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&ut.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(_t,"ms-").replace(wt,xt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,s=t.length,a=n(t);if(i){if(a)for(;s>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:ct&&!ct.call("\ufeffÂ ")?function(t){return null==t?"":ct.call(t)}:function(t){return null==t?"":(t+"").replace(pt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?ut.merge(i,"string"==typeof t?[t]:t):ot.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(st)return st.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,o=t.length,r=0;if("number"==typeof i)for(;i>r;r++)t[o++]=n[r];else for(;n[r]!==e;)t[o++]=n[r++];return t.length=o,t},grep:function(t,e,n){var i,o=[],r=0,s=t.length;for(n=!!n;s>r;r++)i=!!e(t[r],r),n!==i&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,s=t.length,a=n(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,i),null!=o&&(l[l.length]=o);else for(r in t)o=e(t[r],r,i),null!=o&&(l[l.length]=o);return it.apply([],l)},guid:1,proxy:function(t,n){var i,o,r;return"string"==typeof n&&(r=t[n],n=t,t=r),ut.isFunction(t)?(i=rt.call(arguments,2),o=function(){return t.apply(n||this,i.concat(rt.call(arguments)))},o.guid=t.guid=t.guid||ut.guid++,o):e},access:function(t,n,i,o,r,s,a){var l=0,c=t.length,u=null==i;if("object"===ut.type(i)){r=!0;for(l in i)ut.access(t,n,l,i[l],!0,s,a)}else if(o!==e&&(r=!0,ut.isFunction(o)||(a=!0),u&&(a?(n.call(t,o),n=null):(u=n,n=function(t,e,n){return u.call(ut(t),n)})),n))for(;c>l;l++)n(t[l],i,a?o:o.call(t[l],l,n(t[l],i)));return r?t:u?n.call(t):c?n(t[0],i):s},now:function(){return(new Date).getTime()},swap:function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o}}),ut.ready.promise=function(e){if(!W)if(W=ut.Deferred(),"complete"===X.readyState)setTimeout(ut.ready);else if(X.addEventListener)X.addEventListener("DOMContentLoaded",Ct,!1),t.addEventListener("load",Ct,!1);else{X.attachEvent("onreadystatechange",Ct),t.attachEvent("onload",Ct);var n=!1;try{n=null==t.frameElement&&X.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!ut.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}kt(),ut.ready()}}()}return W.promise(e)},ut.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()}),U=ut(X),function(t,e){function n(t,e,n,i){var o,r,s,a,l,c,u,h,f,g;if((e?e.ownerDocument||e:$)!==I&&A(e),e=e||I,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(O&&!i){if(o=bt.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&L(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return tt.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&C.getElementsByClassName&&e.getElementsByClassName)return tt.apply(n,e.getElementsByClassName(s)),n}if(C.qsa&&(!F||!F.test(t))){if(h=u=H,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=d(t),(u=e.getAttribute("id"))?h=u.replace(xt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+p(c[l]);f=pt.test(t)&&e.parentNode||e,g=c.join(",")}if(g)try{return tt.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{u||e.removeAttribute("id")}}}return w(t.replace(ct,"$1"),e,n,i)}function i(){function t(n,i){return e.push(n+=" ")>S.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function o(t){return t[H]=!0,t}function r(t){var e=I.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=t.length;i--;)S.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function c(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return o(function(e){return e=+e,o(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function h(){}function d(t,e){var i,o,r,s,a,l,c,u=j[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=S.preFilter;a;){(!i||(o=ht.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=dt.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(ct," ")}),a=a.slice(i.length));for(s in S.filter)!(o=vt[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return e?a.length:a?n.error(t):j(t,l).slice(0)}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=B++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,c,u=K+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(c=e[H]||(e[H]={}),(l=c[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=c[i]=[u],l[1]=t(e,n,s)||k,l[1]===!0)return!0}}function g(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),c&&e.push(a));return s}function v(t,e,n,i,r,s){return i&&!i[H]&&(i=v(i)),r&&!r[H]&&(r=v(r,s)),o(function(o,s,a,l){var c,u,h,d=[],p=[],f=s.length,g=o||_(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?g:m(g,d,t,a,l),y=n?r||(o?t:f||i)?[]:s:v;if(n&&n(v,y,a,l),i)for(c=m(y,p),i(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(v[p[u]]=h));if(o){if(r||t){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(v[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?nt.call(o,h):d[u])>-1&&(o[c]=!(s[c]=h))}}else y=m(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):tt.apply(s,y)})}function y(t){for(var e,n,i,o=t.length,r=S.relative[t[0].type],s=r||S.relative[" "],a=r?1:0,l=f(function(t){return t===e},s,!0),c=f(function(t){return nt.call(e,t)>-1},s,!0),u=[function(t,n,i){return!r&&(i||n!==D)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];o>a;a++)if(n=S.relative[t[a].type])u=[f(g(u),n)];else{if(n=S.filter[t[a].type].apply(null,t[a].matches),n[H]){for(i=++a;o>i&&!S.relative[t[i].type];i++);return v(a>1&&g(u),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ct,"$1"),n,i>a&&y(t.slice(a,i)),o>i&&y(t=t.slice(i)),o>i&&p(t))}u.push(n)}return g(u)}function b(t,e){var i=0,r=e.length>0,s=t.length>0,a=function(o,a,l,c,u){var h,d,p,f=[],g=0,v="0",y=o&&[],b=null!=u,_=D,w=o||s&&S.find.TAG("*",u&&a.parentNode||a),x=K+=null==_?1:Math.random()||.1;for(b&&(D=a!==I&&a,k=i);null!=(h=w[v]);v++){if(s&&h){for(d=0;p=t[d++];)if(p(h,a,l)){c.push(h);break}b&&(K=x,k=++i)}r&&((h=!p&&h)&&g--,o&&y.push(h))}if(g+=v,r&&v!==g){for(d=0;p=e[d++];)p(y,f,a,l);if(o){if(g>0)for(;v--;)y[v]||f[v]||(f[v]=J.call(c));f=m(f)}tt.apply(c,f),b&&!o&&f.length>0&&g+e.length>1&&n.uniqueSort(c)}return b&&(K=x,D=_),y};return r?o(a):a}function _(t,e,i){for(var o=0,r=e.length;r>o;o++)n(t,e[o],i);return i}function w(t,e,n,i){var o,r,s,a,l,c=d(t);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&C.getById&&9===e.nodeType&&O&&S.relative[r[1].type]){if(e=(S.find.ID(s.matches[0].replace(Ct,kt),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=vt.needsContext.test(t)?0:r.length;o--&&(s=r[o],!S.relative[a=s.type]);)if((l=S.find[a])&&(i=l(s.matches[0].replace(Ct,kt),pt.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&p(r),!t)return tt.apply(n,i),n;break}}return M(t,c)(i,e,!O,n,pt.test(t)),n}var x,C,k,S,T,E,M,D,P,A,I,R,O,F,N,z,L,H="sizzle"+-new Date,$=t.document,K=0,B=0,q=i(),j=i(),V=i(),W=!1,U=function(t,e){return t===e?(W=!0,0):0},G=typeof e,Y=1<<31,X={}.hasOwnProperty,Q=[],J=Q.pop,Z=Q.push,tt=Q.push,et=Q.slice,nt=Q.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ot="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=rt.replace("w","w#"),at="\\["+ot+"*("+rt+")"+ot+"*(?:([*^$|!~]?=)"+ot+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+ot+"*\\]",lt=":("+rt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+at.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+ot+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ot+"+$","g"),ht=new RegExp("^"+ot+"*,"+ot+"*"),dt=new RegExp("^"+ot+"*([>+~]|"+ot+")"+ot+"*"),pt=new RegExp(ot+"*[+~]"),ft=new RegExp("="+ot+"*([^\\]'\"]*)"+ot+"*\\]","g"),gt=new RegExp(lt),mt=new RegExp("^"+st+"$"),vt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+lt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ot+"*(even|odd|(([+-]|)(\\d*)n|)"+ot+"*(?:([+-]|)"+ot+"*(\\d+)|))"+ot+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+ot+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ot+"*((?:-\\d)?\\d*)"+ot+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/^(?:input|select|textarea|button)$/i,wt=/^h\d$/i,xt=/'|\\/g,Ct=new RegExp("\\\\([\\da-f]{1,6}"+ot+"?|("+ot+")|.)","ig"),kt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{tt.apply(Q=et.call($.childNodes),$.childNodes),Q[$.childNodes.length].nodeType}catch(St){tt={apply:Q.length?function(t,e){Z.apply(t,et.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}E=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},C=n.support={},A=n.setDocument=function(t){var e=t?t.ownerDocument||t:$,n=e.defaultView;return e!==I&&9===e.nodeType&&e.documentElement?(I=e,R=e.documentElement,O=!E(e),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){A()}),C.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=r(function(t){return t.appendChild(e.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),C.getById=r(function(t){return R.appendChild(t).id=H,!e.getElementsByName||!e.getElementsByName(H).length}),C.getById?(S.find.ID=function(t,e){if(typeof e.getElementById!==G&&O){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(t){var e=t.replace(Ct,kt);return function(t){return t.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(t){var e=t.replace(Ct,kt);return function(t){var n=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return n&&n.value===e}}),S.find.TAG=C.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==G?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},S.find.CLASS=C.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==G&&O?e.getElementsByClassName(t):void 0},N=[],F=[],(C.qsa=yt.test(e.querySelectorAll))&&(r(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||F.push("\\["+ot+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||F.push(":checked")}),r(function(t){var n=e.createElement("input");n.setAttribute("type","hidden"),t.appendChild(n).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&F.push("[*^$]="+ot+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),F.push(",.*:")})),(C.matchesSelector=yt.test(z=R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&r(function(t){C.disconnectedMatch=z.call(t,"div"),z.call(t,"[s!='']:x"),N.push("!=",lt)}),F=F.length&&new RegExp(F.join("|")),N=N.length&&new RegExp(N.join("|")),L=yt.test(R.contains)||R.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=R.compareDocumentPosition?function(t,n){if(t===n)return W=!0,0;var i=n.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(n);return i?1&i||!C.sortDetached&&n.compareDocumentPosition(t)===i?t===e||L($,t)?-1:n===e||L($,n)?1:P?nt.call(P,t)-nt.call(P,n):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,n){var i,o=0,r=t.parentNode,s=n.parentNode,l=[t],c=[n];if(t===n)return W=!0,0;if(!r||!s)return t===e?-1:n===e?1:r?-1:s?1:P?nt.call(P,t)-nt.call(P,n):0;if(r===s)return a(t,n);for(i=t;i=i.parentNode;)l.unshift(i);for(i=n;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===$?-1:c[o]===$?1:0},e):I},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==I&&A(t),e=e.replace(ft,"='$1']"),C.matchesSelector&&O&&(!N||!N.test(e))&&(!F||!F.test(e)))try{var i=z.call(t,e);if(i||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return n(e,I,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==I&&A(t),L(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==I&&A(t);var i=S.attrHandle[n.toLowerCase()],o=i&&X.call(S.attrHandle,n.toLowerCase())?i(t,n,!O):e;return o===e?C.attributes||!O?t.getAttribute(n):(o=t.getAttributeNode(n))&&o.specified?o.value:null:o},n.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,o=0;if(W=!C.detectDuplicates,P=!C.sortStable&&t.slice(0),t.sort(U),W){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},T=n.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=T(e);return n},S=n.selectors={cacheLength:50,createPseudo:o,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ct,kt),t[3]=(t[4]||t[5]||"").replace(Ct,kt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return vt.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&gt.test(i)&&(n=d(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ct,kt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+ot+")"+t+"("+ot+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(o){var r=n.attr(o,t);return null==r?"!="===e:e?(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r+" ").indexOf(i)>-1:"|="===e?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,p,f,g=r!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(r){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(u=m[H]||(m[H]={}),c=u[t]||[],p=c[0]===K&&c[1],d=c[0]===K&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[K,p,d];break}}else if(y&&(c=(e[H]||(e[H]={}))[t])&&c[0]===K)d=c[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[H]||(h[H]={}))[t]=[K,d]),h!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,e){var i,r=S.pseudos[t]||S.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return r[H]?r(e):r.length>1?(i=[t,t,"",e],S.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=nt.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:o(function(t){var e=[],n=[],i=M(t.replace(ct,"$1"));return i[H]?o(function(t,e,n,o){for(var r,s=i(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,o,r){return e[0]=t,i(e,null,r,n),!n.pop()}}),has:o(function(t){return function(e){return n(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:o(function(t){return mt.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(Ct,kt).toLowerCase(),function(e){var n;do if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return wt.test(t.nodeName)},input:function(t){return _t.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},S.pseudos.nth=S.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})S.pseudos[x]=c(x);h.prototype=S.filters=S.pseudos,S.setFilters=new h,M=n.compile=function(t,e){var n,i=[],o=[],r=V[t+" "];if(!r){for(e||(e=d(t)),n=e.length;n--;)r=y(e[n]),r[H]?i.push(r):o.push(r);r=V(t,b(o,i))}return r},C.sortStable=H.split("").sort(U).join("")===H,C.detectDuplicates=W,A(),C.sortDetached=r(function(t){return 1&t.compareDocumentPosition(I.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(it,function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&i.specified?i.value:t[e]===!0?e.toLowerCase():null}),ut.find=n,ut.expr=n.selectors,ut.expr[":"]=ut.expr.pseudos,ut.unique=n.uniqueSort,ut.text=n.getText,ut.isXMLDoc=n.isXML,ut.contains=n.contains}(t);var St={};ut.Callbacks=function(t){t="string"==typeof t?St[t]||i(t):ut.extend({},t);var n,o,r,s,a,l,c=[],u=!t.once&&[],h=function(e){for(o=t.memory&&e,r=!0,a=l||0,l=0,s=c.length,n=!0;c&&s>a;a++)if(c[a].apply(e[0],e[1])===!1&&t.stopOnFalse){o=!1;break}n=!1,c&&(u?u.length&&h(u.shift()):o?c=[]:d.disable())},d={add:function(){if(c){var e=c.length;!function i(e){ut.each(e,function(e,n){var o=ut.type(n);"function"===o?t.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),n?s=c.length:o&&(l=e,h(o))}return this},remove:function(){return c&&ut.each(arguments,function(t,e){for(var i;(i=ut.inArray(e,c,i))>-1;)c.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(t){return t?ut.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=u=o=e,this},disabled:function(){return!c},lock:function(){return u=e,o||d.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||r&&!u||(e=e||[],e=[t,e.slice?e.slice():e],n?u.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ut.extend({Deferred:function(t){var e=[["resolve","done",ut.Callbacks("once memory"),"resolved"],["reject","fail",ut.Callbacks("once memory"),"rejected"],["notify","progress",ut.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ut.Deferred(function(n){ut.each(e,function(e,r){var s=r[0],a=ut.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&ut.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ut.extend(t,i):i}},o={};return i.pipe=i.then,ut.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=rt.call(arguments),s=r.length,a=1!==s||t&&ut.isFunction(t.promise)?s:0,l=1===a?t:ut.Deferred(),c=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?rt.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&ut.isFunction(r[o].promise)?r[o].promise().done(c(o,i,r)).fail(l.reject).progress(c(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}}),ut.support=function(e){var n,i,o,r,s,a,l,c,u,h=X.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*")||[],i=h.getElementsByTagName("a")[0],!i||!i.style||!n.length)return e;r=X.createElement("select"),a=r.appendChild(X.createElement("option")),o=h.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e.getSetAttribute="t"!==h.className,e.leadingWhitespace=3===h.firstChild.nodeType,e.tbody=!h.getElementsByTagName("tbody").length,e.htmlSerialize=!!h.getElementsByTagName("link").length,e.style=/top/.test(i.getAttribute("style")),e.hrefNormalized="/a"===i.getAttribute("href"),e.opacity=/^0.5/.test(i.style.opacity),e.cssFloat=!!i.style.cssFloat,e.checkOn=!!o.value,e.optSelected=a.selected,e.enctype=!!X.createElement("form").enctype,e.html5Clone="<:nav></:nav>"!==X.createElement("nav").cloneNode(!0).outerHTML,e.inlineBlockNeedsLayout=!1,e.shrinkWrapBlocks=!1,e.pixelPosition=!1,e.deleteExpando=!0,e.noCloneEvent=!0,e.reliableMarginRight=!0,e.boxSizingReliable=!0,o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!a.disabled;try{delete h.test}catch(d){e.deleteExpando=!1}o=X.createElement("input"),o.setAttribute("value",""),e.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),s=X.createDocumentFragment(),s.appendChild(o),e.appendChecked=o.checked,e.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){e.noCloneEvent=!1}),h.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})h.setAttribute(l="on"+u,"t"),e[u+"Bubbles"]=l in t||h.attributes[l].expando===!1;h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===h.style.backgroundClip;for(u in ut(e))break;return e.ownLast="0"!==u,ut(function(){var n,i,o,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=X.getElementsByTagName("body")[0];s&&(n=X.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=h.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",e.reliableHiddenOffsets=c&&0===o[0].offsetHeight,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ut.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===h.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(h,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(h,null)||{width:"4px"}).width,i=h.appendChild(X.createElement("div")),i.style.cssText=h.style.cssText=r,i.style.marginRight=i.style.width="0",h.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),typeof h.style.zoom!==G&&(h.innerHTML="",h.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==h.offsetWidth,e.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(n),n=h=o=i=null)}),n=r=s=a=i=o=null,e}({});var Tt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Et=/([A-Z])/g;ut.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ut.cache[t[ut.expando]]:t[ut.expando],!!t&&!a(t)},data:function(t,e,n){return o(t,e,n)},removeData:function(t,e){return r(t,e)},_data:function(t,e,n){return o(t,e,n,!0)},_removeData:function(t,e){return r(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&ut.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),ut.fn.extend({data:function(t,n){var i,o,r=null,a=0,l=this[0];if(t===e){if(this.length&&(r=ut.data(l),1===l.nodeType&&!ut._data(l,"parsedAttrs"))){for(i=l.attributes;a<i.length;a++)o=i[a].name,0===o.indexOf("data-")&&(o=ut.camelCase(o.slice(5)),s(l,o,r[o]));ut._data(l,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){ut.data(this,t)}):arguments.length>1?this.each(function(){ut.data(this,t,n)}):l?s(l,t,ut.data(l,t)):null},removeData:function(t){return this.each(function(){ut.removeData(this,t)})}}),ut.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=ut._data(t,e),n&&(!i||ut.isArray(n)?i=ut._data(t,e,ut.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=ut.queue(t,e),i=n.length,o=n.shift(),r=ut._queueHooks(t,e),s=function(){ut.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ut._data(t,n)||ut._data(t,n,{empty:ut.Callbacks("once memory").add(function(){ut._removeData(t,e+"queue"),ut._removeData(t,n)})})}}),ut.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),arguments.length<i?ut.queue(this[0],t):n===e?this:this.each(function(){var e=ut.queue(this,t,n);ut._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ut.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ut.dequeue(this,t)})},delay:function(t,e){return t=ut.fx?ut.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,o=1,r=ut.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=ut._data(s[a],t+"queueHooks"),i&&i.empty&&(o++,i.empty.add(l));return l(),r.promise(n)}});var Mt,Dt,Pt=/[\t\r\n\f]/g,At=/\r/g,It=/^(?:input|select|textarea|button|object)$/i,Rt=/^(?:a|area)$/i,Ot=/^(?:checked|selected)$/i,Ft=ut.support.getSetAttribute,Nt=ut.support.input;ut.fn.extend({attr:function(t,e){return ut.access(this,ut.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ut.removeAttr(this,t)})},prop:function(t,e){return ut.access(this,ut.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ut.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,o,r,s=0,a=this.length,l="string"==typeof t&&t;if(ut.isFunction(t))return this.each(function(e){ut(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(dt)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pt," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");n.className=ut.trim(i)}return this},removeClass:function(t){var e,n,i,o,r,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(ut.isFunction(t))return this.each(function(e){ut(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(dt)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pt," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");n.className=t?ut.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):ut.isFunction(t)?this.each(function(n){ut(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,o=ut(this),r=t.match(dt)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===G||"boolean"===n)&&(this.className&&ut._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ut._data(this,"__className__")||"")})},hasClass:function(t){
for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Pt," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,o,r=this[0];{if(arguments.length)return o=ut.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=o?t.call(this,n,ut(this).val()):t,null==r?r="":"number"==typeof r?r+="":ut.isArray(r)&&(r=ut.map(r,function(t){return null==t?"":t+""})),i=ut.valHooks[this.type]||ut.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==e||(this.value=r))});if(r)return i=ut.valHooks[r.type]||ut.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==e?n:(n=r.value,"string"==typeof n?n.replace(At,""):null==n?"":n)}}}),ut.extend({valHooks:{option:{get:function(t){var e=ut.find.attr(t,"value");return null!=e?e:t.text}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],(n.selected||l===o)&&(ut.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ut.nodeName(n.parentNode,"optgroup"))){if(e=ut(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=ut.makeArray(e),s=o.length;s--;)i=o[s],(i.selected=ut.inArray(ut(i).val(),r)>=0)&&(n=!0);return n||(t.selectedIndex=-1),r}}},attr:function(t,n,i){var o,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===G?ut.prop(t,n,i):(1===s&&ut.isXMLDoc(t)||(n=n.toLowerCase(),o=ut.attrHooks[n]||(ut.expr.match.bool.test(n)?Dt:Mt)),i===e?o&&"get"in o&&null!==(r=o.get(t,n))?r:(r=ut.find.attr(t,n),null==r?e:r):null!==i?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:(t.setAttribute(n,i+""),i):void ut.removeAttr(t,n))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(dt);if(r&&1===t.nodeType)for(;n=r[o++];)i=ut.propFix[n]||n,ut.expr.match.bool.test(n)?Nt&&Ft||!Ot.test(n)?t[i]=!1:t[ut.camelCase("default-"+n)]=t[i]=!1:ut.attr(t,n,""),t.removeAttribute(Ft?n:i)},attrHooks:{type:{set:function(t,e){if(!ut.support.radioValue&&"radio"===e&&ut.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var o,r,s,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return s=1!==a||!ut.isXMLDoc(t),s&&(n=ut.propFix[n]||n,r=ut.propHooks[n]),i!==e?r&&"set"in r&&(o=r.set(t,i,n))!==e?o:t[n]=i:r&&"get"in r&&null!==(o=r.get(t,n))?o:t[n]},propHooks:{tabIndex:{get:function(t){var e=ut.find.attr(t,"tabindex");return e?parseInt(e,10):It.test(t.nodeName)||Rt.test(t.nodeName)&&t.href?0:-1}}}}),Dt={set:function(t,e,n){return e===!1?ut.removeAttr(t,n):Nt&&Ft||!Ot.test(n)?t.setAttribute(!Ft&&ut.propFix[n]||n,n):t[ut.camelCase("default-"+n)]=t[n]=!0,n}},ut.each(ut.expr.match.bool.source.match(/\w+/g),function(t,n){var i=ut.expr.attrHandle[n]||ut.find.attr;ut.expr.attrHandle[n]=Nt&&Ft||!Ot.test(n)?function(t,n,o){var r=ut.expr.attrHandle[n],s=o?e:(ut.expr.attrHandle[n]=e)!=i(t,n,o)?n.toLowerCase():null;return ut.expr.attrHandle[n]=r,s}:function(t,n,i){return i?e:t[ut.camelCase("default-"+n)]?n.toLowerCase():null}}),Nt&&Ft||(ut.attrHooks.value={set:function(t,e,n){return ut.nodeName(t,"input")?void(t.defaultValue=e):Mt&&Mt.set(t,e,n)}}),Ft||(Mt={set:function(t,n,i){var o=t.getAttributeNode(i);return o||t.setAttributeNode(o=t.ownerDocument.createAttribute(i)),o.value=n+="","value"===i||n===t.getAttribute(i)?n:e}},ut.expr.attrHandle.id=ut.expr.attrHandle.name=ut.expr.attrHandle.coords=function(t,n,i){var o;return i?e:(o=t.getAttributeNode(n))&&""!==o.value?o.value:null},ut.valHooks.button={get:function(t,n){var i=t.getAttributeNode(n);return i&&i.specified?i.value:e},set:Mt.set},ut.attrHooks.contenteditable={set:function(t,e,n){Mt.set(t,""===e?!1:e,n)}},ut.each(["width","height"],function(t,e){ut.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ut.support.hrefNormalized||ut.each(["href","src"],function(t,e){ut.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ut.support.style||(ut.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),ut.support.optSelected||(ut.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ut.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ut.propFix[this.toLowerCase()]=this}),ut.support.enctype||(ut.propFix.enctype="encoding"),ut.each(["radio","checkbox"],function(){ut.valHooks[this]={set:function(t,e){return ut.isArray(e)?t.checked=ut.inArray(ut(t).val(),e)>=0:void 0}},ut.support.checkOn||(ut.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var zt=/^(?:input|select|textarea)$/i,Lt=/^key/,Ht=/^(?:mouse|contextmenu)|click/,$t=/^(?:focusinfocus|focusoutblur)$/,Kt=/^([^.]*)(?:\.(.+)|)$/;ut.event={global:{},add:function(t,n,i,o,r){var s,a,l,c,u,h,d,p,f,g,m,v=ut._data(t);if(v){for(i.handler&&(c=i,i=c.handler,r=c.selector),i.guid||(i.guid=ut.guid++),(a=v.events)||(a=v.events={}),(h=v.handle)||(h=v.handle=function(t){return typeof ut===G||t&&ut.event.triggered===t.type?e:ut.event.dispatch.apply(h.elem,arguments)},h.elem=t),n=(n||"").match(dt)||[""],l=n.length;l--;)s=Kt.exec(n[l])||[],f=m=s[1],g=(s[2]||"").split(".").sort(),f&&(u=ut.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=ut.event.special[f]||{},d=ut.extend({type:f,origType:m,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&ut.expr.match.needsContext.test(r),namespace:g.join(".")},c),(p=a[f])||(p=a[f]=[],p.delegateCount=0,u.setup&&u.setup.call(t,o,g,h)!==!1||(t.addEventListener?t.addEventListener(f,h,!1):t.attachEvent&&t.attachEvent("on"+f,h))),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),ut.event.global[f]=!0);t=null}},remove:function(t,e,n,i,o){var r,s,a,l,c,u,h,d,p,f,g,m=ut.hasData(t)&&ut._data(t);if(m&&(u=m.events)){for(e=(e||"").match(dt)||[""],c=e.length;c--;)if(a=Kt.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=ut.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!o&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,h.remove&&h.remove.call(t,s));l&&!d.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||ut.removeEvent(t,p,m.handle),delete u[p])}else for(p in u)ut.event.remove(t,p+e[c],n,i,!0);ut.isEmptyObject(u)&&(delete m.handle,ut._removeData(t,"events"))}},trigger:function(n,i,o,r){var s,a,l,c,u,h,d,p=[o||X],f=lt.call(n,"type")?n.type:n,g=lt.call(n,"namespace")?n.namespace.split("."):[];if(l=h=o=o||X,3!==o.nodeType&&8!==o.nodeType&&!$t.test(f+ut.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),a=f.indexOf(":")<0&&"on"+f,n=n[ut.expando]?n:new ut.Event(f,"object"==typeof n&&n),n.isTrigger=r?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=o),i=null==i?[n]:ut.makeArray(i,[n]),u=ut.event.special[f]||{},r||!u.trigger||u.trigger.apply(o,i)!==!1)){if(!r&&!u.noBubble&&!ut.isWindow(o)){for(c=u.delegateType||f,$t.test(c+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),h=l;h===(o.ownerDocument||X)&&p.push(h.defaultView||h.parentWindow||t)}for(d=0;(l=p[d++])&&!n.isPropagationStopped();)n.type=d>1?c:u.bindType||f,s=(ut._data(l,"events")||{})[n.type]&&ut._data(l,"handle"),s&&s.apply(l,i),s=a&&l[a],s&&ut.acceptData(l)&&s.apply&&s.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!r&&!n.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),i)===!1)&&ut.acceptData(o)&&a&&o[f]&&!ut.isWindow(o)){h=o[a],h&&(o[a]=null),ut.event.triggered=f;try{o[f]()}catch(m){}ut.event.triggered=e,h&&(o[a]=h)}return n.result}},dispatch:function(t){t=ut.event.fix(t);var n,i,o,r,s,a=[],l=rt.call(arguments),c=(ut._data(this,"events")||{})[t.type]||[],u=ut.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=ut.event.handlers.call(this,t,c),n=0;(r=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,s=0;(o=r.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,i=((ut.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,o,r,s,a=[],l=n.delegateCount,c=t.target;if(l&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==t.type)){for(r=[],s=0;l>s;s++)o=n[s],i=o.selector+" ",r[i]===e&&(r[i]=o.needsContext?ut(i,this).index(c)>=0:ut.find(i,this,null,[c]).length),r[i]&&r.push(o);r.length&&a.push({elem:c,handlers:r})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(t){if(t[ut.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Ht.test(o)?this.mouseHooks:Lt.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new ut.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||X),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,o,r,s=n.button,a=n.fromElement;return null==t.pageX&&null!=n.clientX&&(o=t.target.ownerDocument||X,r=o.documentElement,i=o.body,t.pageX=n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?n.toElement:a),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ut.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return ut.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=ut.extend(new ut.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?ut.event.trigger(o,null,e):ut.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},ut.removeEvent=X.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===G&&(t[i]=null),t.detachEvent(i,n))},ut.Event=function(t,e){return this instanceof ut.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?l:c):this.type=t,e&&ut.extend(this,e),this.timeStamp=t&&t.timeStamp||ut.now(),void(this[ut.expando]=!0)):new ut.Event(t,e)},ut.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ut.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ut.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!ut.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),ut.support.submitBubbles||(ut.event.special.submit={setup:function(){return ut.nodeName(this,"form")?!1:void ut.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=ut.nodeName(n,"input")||ut.nodeName(n,"button")?n.form:e;i&&!ut._data(i,"submitBubbles")&&(ut.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),ut._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ut.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ut.nodeName(this,"form")?!1:void ut.event.remove(this,"._submit")}}),ut.support.changeBubbles||(ut.event.special.change={setup:function(){return zt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ut.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ut.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ut.event.simulate("change",this,t,!0)})),!1):void ut.event.add(this,"beforeactivate._change",function(t){var e=t.target;zt.test(e.nodeName)&&!ut._data(e,"changeBubbles")&&(ut.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ut.event.simulate("change",this.parentNode,t,!0)}),ut._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ut.event.remove(this,"._change"),!zt.test(this.nodeName)}}),ut.support.focusinBubbles||ut.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){ut.event.simulate(e,t.target,ut.event.fix(t),!0)};ut.event.special[e]={setup:function(){0===n++&&X.addEventListener(t,i,!0)},teardown:function(){0===--n&&X.removeEventListener(t,i,!0)}}}),ut.fn.extend({on:function(t,n,i,o,r){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(s in t)this.on(s,n,i,t[s],r);return this}if(null==i&&null==o?(o=n,i=n=e):null==o&&("string"==typeof n?(o=i,i=e):(o=i,i=n,n=e)),o===!1)o=c;else if(!o)return this;return 1===r&&(a=o,o=function(t){return ut().off(t),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ut.guid++)),this.each(function(){ut.event.add(this,t,o,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,ut(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,n,t[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=c),this.each(function(){ut.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){ut.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?ut.event.trigger(t,e,n,!0):void 0}});var Bt=/^.[^:#\[\.,]*$/,qt=/^(?:parents|prev(?:Until|All))/,jt=ut.expr.match.needsContext,Vt={children:!0,contents:!0,next:!0,prev:!0};ut.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(ut(t).filter(function(){for(e=0;o>e;e++)if(ut.contains(i[e],this))return!0}));for(e=0;o>e;e++)ut.find(t,i[e],n);return n=this.pushStack(o>1?ut.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e,n=ut(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(ut.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(d(this,t||[],!0))},filter:function(t){return this.pushStack(d(this,t||[],!1))},is:function(t){return!!d(this,"string"==typeof t&&jt.test(t)?ut(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=jt.test(t)||"string"!=typeof t?ut(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ut.find.matchesSelector(n,t))){n=r.push(n);break}return this.pushStack(r.length>1?ut.unique(r):r)},index:function(t){return t?"string"==typeof t?ut.inArray(this[0],ut(t)):ut.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?ut(t,e):ut.makeArray(t&&t.nodeType?[t]:t),i=ut.merge(this.get(),n);return this.pushStack(ut.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ut.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ut.dir(t,"parentNode")},parentsUntil:function(t,e,n){return ut.dir(t,"parentNode",n)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return ut.dir(t,"nextSibling")},prevAll:function(t){return ut.dir(t,"previousSibling")},nextUntil:function(t,e,n){return ut.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return ut.dir(t,"previousSibling",n)},siblings:function(t){return ut.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ut.sibling(t.firstChild)},contents:function(t){return ut.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ut.merge([],t.childNodes)}},function(t,e){ut.fn[t]=function(n,i){var o=ut.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=ut.filter(i,o)),this.length>1&&(Vt[t]||(o=ut.unique(o)),qt.test(t)&&(o=o.reverse())),this.pushStack(o)}}),ut.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?ut.find.matchesSelector(i,t)?[i]:[]:ut.find.matches(t,ut.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var o=[],r=t[n];r&&9!==r.nodeType&&(i===e||1!==r.nodeType||!ut(r).is(i));)1===r.nodeType&&o.push(r),r=r[n];return o},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Wt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ut=/ jQuery\d+="(?:null|\d+)"/g,Gt=new RegExp("<(?:"+Wt+")[\\s/>]","i"),Yt=/^\s+/,Xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qt=/<([\w:]+)/,Jt=/<tbody/i,Zt=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ee=/^(?:checkbox|radio)$/i,ne=/checked\s*(?:[^=]|=\s*.checked.)/i,ie=/^$|\/(?:java|ecma)script/i,oe=/^true\/(.*)/,re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,se={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ut.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ae=p(X),le=ae.appendChild(X.createElement("div"));se.optgroup=se.option,se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td,ut.fn.extend({text:function(t){return ut.access(this,function(t){return t===e?ut.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?ut.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||ut.cleanData(_(n)),n.parentNode&&(e&&ut.contains(n.ownerDocument,n)&&v(_(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ut.cleanData(_(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ut.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ut.clone(this,t,e)})},html:function(t){return ut.access(this,function(t){var n=this[0]||{},i=0,o=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(Ut,""):e;if("string"==typeof t&&!te.test(t)&&(ut.support.htmlSerialize||!Gt.test(t))&&(ut.support.leadingWhitespace||!Yt.test(t))&&!se[(Qt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Xt,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(ut.cleanData(_(n,!1)),n.innerHTML=t);n=0}catch(r){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=ut.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],o=t[e++];o&&(i&&i.parentNode!==o&&(i=this.nextSibling),ut(this).remove(),o.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=it.apply([],t);var i,o,r,s,a,l,c=0,u=this.length,h=this,d=u-1,p=t[0],f=ut.isFunction(p);if(f||!(1>=u||"string"!=typeof p||ut.support.checkClone)&&ne.test(p))return this.each(function(i){var o=h.eq(i);f&&(t[0]=p.call(this,i,o.html())),o.domManip(t,e,n)});if(u&&(l=ut.buildFragment(t,this[0].ownerDocument,!1,!n&&this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(s=ut.map(_(l,"script"),g),r=s.length;u>c;c++)o=l,c!==d&&(o=ut.clone(o,!0,!0),r&&ut.merge(s,_(o,"script"))),e.call(this[c],o,c);if(r)for(a=s[s.length-1].ownerDocument,ut.map(s,m),c=0;r>c;c++)o=s[c],ie.test(o.type||"")&&!ut._data(o,"globalEval")&&ut.contains(a,o)&&(o.src?ut._evalUrl(o.src):ut.globalEval((o.text||o.textContent||o.innerHTML||"").replace(re,"")));l=i=null}return this}}),ut.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ut.fn[t]=function(t){for(var n,i=0,o=[],r=ut(t),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),ut(r[i])[e](n),ot.apply(o,n.get());return this.pushStack(o)}}),ut.extend({clone:function(t,e,n){var i,o,r,s,a,l=ut.contains(t.ownerDocument,t);if(ut.support.html5Clone||ut.isXMLDoc(t)||!Gt.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(le.innerHTML=t.outerHTML,le.removeChild(r=le.firstChild)),!(ut.support.noCloneEvent&&ut.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ut.isXMLDoc(t)))for(i=_(r),a=_(t),s=0;null!=(o=a[s]);++s)i[s]&&b(o,i[s]);if(e)if(n)for(a=a||_(t),i=i||_(r),s=0;null!=(o=a[s]);s++)y(o,i[s]);else y(t,r);return i=_(r,"script"),i.length>0&&v(i,!l&&_(t,"script")),i=a=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,c,u,h=t.length,d=p(e),f=[],g=0;h>g;g++)if(r=t[g],r||0===r)if("object"===ut.type(r))ut.merge(f,r.nodeType?[r]:r);else if(Zt.test(r)){for(a=a||d.appendChild(e.createElement("div")),l=(Qt.exec(r)||["",""])[1].toLowerCase(),u=se[l]||se._default,a.innerHTML=u[1]+r.replace(Xt,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!ut.support.leadingWhitespace&&Yt.test(r)&&f.push(e.createTextNode(Yt.exec(r)[0])),!ut.support.tbody)for(r="table"!==l||Jt.test(r)?"<table>"!==u[1]||Jt.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)ut.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(ut.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else f.push(e.createTextNode(r));for(a&&d.removeChild(a),ut.support.appendChecked||ut.grep(_(f,"input"),w),g=0;r=f[g++];)if((!i||-1===ut.inArray(r,i))&&(s=ut.contains(r.ownerDocument,r),a=_(d.appendChild(r),"script"),s&&v(a),n))for(o=0;r=a[o++];)ie.test(r.type||"")&&n.push(r);return a=null,d},cleanData:function(t,e){for(var n,i,o,r,s=0,a=ut.expando,l=ut.cache,c=ut.support.deleteExpando,u=ut.event.special;null!=(n=t[s]);s++)if((e||ut.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)u[i]?ut.event.remove(n,i):ut.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c?delete n[a]:typeof n.removeAttribute!==G?n.removeAttribute(a):n[a]=null,et.push(o))}},_evalUrl:function(t){return ut.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ut.fn.extend({wrapAll:function(t){if(ut.isFunction(t))return this.each(function(e){ut(this).wrapAll(t.call(this,e))});if(this[0]){var e=ut(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ut.isFunction(t)?this.each(function(e){ut(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ut(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=ut.isFunction(t);return this.each(function(n){ut(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){ut.nodeName(this,"body")||ut(this).replaceWith(this.childNodes)}).end()}});var ce,ue,he,de=/alpha\([^)]*\)/i,pe=/opacity\s*=\s*([^)]*)/,fe=/^(top|right|bottom|left)$/,ge=/^(none|table(?!-c[ea]).+)/,me=/^margin/,ve=new RegExp("^("+ht+")(.*)$","i"),ye=new RegExp("^("+ht+")(?!px)[a-z%]+$","i"),be=new RegExp("^([+-])=("+ht+")","i"),_e={BODY:"block"},we={position:"absolute",visibility:"hidden",display:"block"},xe={letterSpacing:0,fontWeight:400},Ce=["Top","Right","Bottom","Left"],ke=["Webkit","O","Moz","ms"];ut.fn.extend({css:function(t,n){return ut.access(this,function(t,n,i){var o,r,s={},a=0;if(ut.isArray(n)){for(r=ue(t),o=n.length;o>a;a++)s[n[a]]=ut.css(t,n[a],!1,r);return s}return i!==e?ut.style(t,n,i):ut.css(t,n)},t,n,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){C(this)?ut(this).show():ut(this).hide()})}}),ut.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=he(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ut.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,l=ut.camelCase(n),c=t.style;if(n=ut.cssProps[l]||(ut.cssProps[l]=x(c,l)),a=ut.cssHooks[n]||ut.cssHooks[l],i===e)return a&&"get"in a&&(r=a.get(t,!1,o))!==e?r:c[n];if(s=typeof i,"string"===s&&(r=be.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(ut.css(t,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||ut.cssNumber[l]||(i+="px"),ut.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,o))===e)))try{c[n]=i}catch(u){}}},css:function(t,n,i,o){var r,s,a,l=ut.camelCase(n);return n=ut.cssProps[l]||(ut.cssProps[l]=x(t.style,l)),a=ut.cssHooks[n]||ut.cssHooks[l],a&&"get"in a&&(s=a.get(t,!0,i)),s===e&&(s=he(t,n,o)),"normal"===s&&n in xe&&(s=xe[n]),""===i||i?(r=parseFloat(s),i===!0||ut.isNumeric(r)?r||0:s):s}}),t.getComputedStyle?(ue=function(e){return t.getComputedStyle(e,null)},he=function(t,n,i){var o,r,s,a=i||ue(t),l=a?a.getPropertyValue(n)||a[n]:e,c=t.style;return a&&(""!==l||ut.contains(t.ownerDocument,t)||(l=ut.style(t,n)),ye.test(l)&&me.test(n)&&(o=c.width,r=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=o,c.minWidth=r,c.maxWidth=s)),l}):X.documentElement.currentStyle&&(ue=function(t){return t.currentStyle},he=function(t,n,i){var o,r,s,a=i||ue(t),l=a?a[n]:e,c=t.style;return null==l&&c&&c[n]&&(l=c[n]),ye.test(l)&&!fe.test(n)&&(o=c.left,r=t.runtimeStyle,s=r&&r.left,s&&(r.left=t.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=o,s&&(r.left=s)),""===l?"auto":l}),ut.each(["height","width"],function(t,e){ut.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&ge.test(ut.css(t,"display"))?ut.swap(t,we,function(){return E(t,e,i)}):E(t,e,i):void 0},set:function(t,n,i){var o=i&&ue(t);return S(t,n,i?T(t,e,i,ut.support.boxSizing&&"border-box"===ut.css(t,"boxSizing",!1,o),o):0)}}}),ut.support.opacity||(ut.cssHooks.opacity={get:function(t,e){return pe.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=ut.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===ut.trim(r.replace(de,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=de.test(r)?r.replace(de,o):r+" "+o)}}),ut(function(){ut.support.reliableMarginRight||(ut.cssHooks.marginRight={get:function(t,e){return e?ut.swap(t,{display:"inline-block"},he,[t,"marginRight"]):void 0}}),!ut.support.pixelPosition&&ut.fn.position&&ut.each(["top","left"],function(t,e){ut.cssHooks[e]={get:function(t,n){return n?(n=he(t,e),ye.test(n)?ut(t).position()[e]+"px":n):void 0}}})}),ut.expr&&ut.expr.filters&&(ut.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ut.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ut.css(t,"display"))},ut.expr.filters.visible=function(t){return!ut.expr.filters.hidden(t)}),ut.each({margin:"",padding:"",border:"Width"},function(t,e){ut.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+Ce[i]+e]=r[i]||r[i-2]||r[0];return o}},me.test(t)||(ut.cssHooks[t+e].set=S)});var Se=/%20/g,Te=/\[\]$/,Ee=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;ut.fn.extend({serialize:function(){return ut.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ut.prop(this,"elements");return t?ut.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ut(this).is(":disabled")&&De.test(this.nodeName)&&!Me.test(t)&&(this.checked||!ee.test(t))}).map(function(t,e){var n=ut(this).val();return null==n?null:ut.isArray(n)?ut.map(n,function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}}):{name:e.name,value:n.replace(Ee,"\r\n")}}).get()}}),ut.param=function(t,n){var i,o=[],r=function(t,e){e=ut.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=ut.ajaxSettings&&ut.ajaxSettings.traditional),ut.isArray(t)||t.jquery&&!ut.isPlainObject(t))ut.each(t,function(){r(this.name,this.value)});else for(i in t)P(i,t[i],n,r);return o.join("&").replace(Se,"+")},ut.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ut.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),ut.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Pe,Ae,Ie=ut.now(),Re=/\?/,Oe=/#.*$/,Fe=/([?&])_=[^&]*/,Ne=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ze=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Le=/^(?:GET|HEAD)$/,He=/^\/\//,$e=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ke=ut.fn.load,Be={},qe={},je="*/".concat("*");try{Ae=Y.href}catch(Ve){Ae=X.createElement("a"),Ae.href="",Ae=Ae.href}Pe=$e.exec(Ae.toLowerCase())||[],ut.fn.load=function(t,n,i){if("string"!=typeof t&&Ke)return Ke.apply(this,arguments);var o,r,s,a=this,l=t.indexOf(" ");
return l>=0&&(o=t.slice(l,t.length),t=t.slice(0,l)),ut.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(s="POST"),a.length>0&&ut.ajax({url:t,type:s,dataType:"html",data:n}).done(function(t){r=arguments,a.html(o?ut("<div>").append(ut.parseHTML(t)).find(o):t)}).complete(i&&function(t,e){a.each(i,r||[t.responseText,e,t])}),this},ut.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ut.fn[e]=function(t){return this.on(e,t)}}),ut.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae,type:"GET",isLocal:ze.test(Pe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ut.parseJSON,"text xml":ut.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?R(R(t,ut.ajaxSettings),e):R(ut.ajaxSettings,t)},ajaxPrefilter:A(Be),ajaxTransport:A(qe),ajax:function(t,n){function i(t,n,i,o){var r,h,y,b,w,C=n;2!==_&&(_=2,l&&clearTimeout(l),u=e,a=o||"",x.readyState=t>0?4:0,r=t>=200&&300>t||304===t,i&&(b=O(d,x,i)),b=F(d,b,x,r),r?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ut.lastModified[s]=w),w=x.getResponseHeader("etag"),w&&(ut.etag[s]=w)),204===t||"HEAD"===d.type?C="nocontent":304===t?C="notmodified":(C=b.state,h=b.data,y=b.error,r=!y)):(y=C,(t||!C)&&(C="error",0>t&&(t=0))),x.status=t,x.statusText=(n||C)+"",r?g.resolveWith(p,[h,C,x]):g.rejectWith(p,[x,C,y]),x.statusCode(v),v=e,c&&f.trigger(r?"ajaxSuccess":"ajaxError",[x,d,r?h:y]),m.fireWith(p,[x,C]),c&&(f.trigger("ajaxComplete",[x,d]),--ut.active||ut.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var o,r,s,a,l,c,u,h,d=ut.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?ut(p):ut.event,g=ut.Deferred(),m=ut.Callbacks("once memory"),v=d.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!h)for(h={};e=Ne.exec(a);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return _||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return u&&u.abort(e),i(0,e),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,d.url=((t||d.url||Ae)+"").replace(Oe,"").replace(He,Pe[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=ut.trim(d.dataType||"*").toLowerCase().match(dt)||[""],null==d.crossDomain&&(o=$e.exec(d.url.toLowerCase()),d.crossDomain=!(!o||o[1]===Pe[1]&&o[2]===Pe[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(Pe[3]||("http:"===Pe[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ut.param(d.data,d.traditional)),I(Be,d,n,x),2===_)return x;c=d.global,c&&0===ut.active++&&ut.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Le.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(Re.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Fe.test(s)?s.replace(Fe,"$1_="+Ie++):s+(Re.test(s)?"&":"?")+"_="+Ie++)),d.ifModified&&(ut.lastModified[s]&&x.setRequestHeader("If-Modified-Since",ut.lastModified[s]),ut.etag[s]&&x.setRequestHeader("If-None-Match",ut.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+je+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)x.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(p,x,d)===!1||2===_))return x.abort();w="abort";for(r in{success:1,error:1,complete:1})x[r](d[r]);if(u=I(qe,d,n,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{_=1,u.send(y,i)}catch(C){if(!(2>_))throw C;i(-1,C)}}else i(-1,"No Transport");return x},getJSON:function(t,e,n){return ut.get(t,e,n,"json")},getScript:function(t,n){return ut.get(t,e,n,"script")}}),ut.each(["get","post"],function(t,n){ut[n]=function(t,i,o,r){return ut.isFunction(i)&&(r=r||o,o=i,i=e),ut.ajax({url:t,type:n,dataType:r,data:i,success:o})}}),ut.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ut.globalEval(t),t}}}),ut.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ut.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=X.head||ut("head")[0]||X.documentElement;return{send:function(e,o){n=X.createElement("script"),n.async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(e,!0)}}}});var We=[],Ue=/(=)\?(?=&|$)|\?\?/;ut.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||ut.expando+"_"+Ie++;return this[t]=!0,t}}),ut.ajaxPrefilter("json jsonp",function(n,i,o){var r,s,a,l=n.jsonp!==!1&&(Ue.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ue.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=ut.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Ue,"$1"+r):n.jsonp!==!1&&(n.url+=(Re.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return a||ut.error(r+" was not called"),a[0]},n.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},o.always(function(){t[r]=s,n[r]&&(n.jsonpCallback=i.jsonpCallback,We.push(r)),a&&ut.isFunction(s)&&s(a[0]),a=s=e}),"script"):void 0});var Ge,Ye,Xe=0,Qe=t.ActiveXObject&&function(){var t;for(t in Ge)Ge[t](e,!0)};ut.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&N()||z()}:N,Ye=ut.ajaxSettings.xhr(),ut.support.cors=!!Ye&&"withCredentials"in Ye,Ye=ut.support.ajax=!!Ye,Ye&&ut.ajaxTransport(function(n){if(!n.crossDomain||ut.support.cors){var i;return{send:function(o,r){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(t,o){var a,c,u,h;try{if(i&&(o||4===l.readyState))if(i=e,s&&(l.onreadystatechange=ut.noop,Qe&&delete Ge[s]),o)4!==l.readyState&&l.abort();else{h={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(h.text=l.responseText);try{u=l.statusText}catch(d){u=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=h.text?200:404}}catch(p){o||r(-1,p)}h&&r(a,u,h,c)},n.async?4===l.readyState?setTimeout(i):(s=++Xe,Qe&&(Ge||(Ge={},ut(t).unload(Qe)),Ge[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(e,!0)}}}});var Je,Ze,tn=/^(?:toggle|show|hide)$/,en=new RegExp("^(?:([+-])=|)("+ht+")([a-z%]*)$","i"),nn=/queueHooks$/,on=[B],rn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=en.exec(e),r=o&&o[3]||(ut.cssNumber[t]?"":"px"),s=(ut.cssNumber[t]||"px"!==r&&+i)&&en.exec(ut.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,ut.style(n.elem,t,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};ut.Animation=ut.extend($,{tweener:function(t,e){ut.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],rn[n]=rn[n]||[],rn[n].unshift(e)},prefilter:function(t,e){e?on.unshift(t):on.push(t)}}),ut.Tween=q,q.prototype={constructor:q,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(ut.cssNumber[n]?"":"px")},cur:function(){var t=q.propHooks[this.prop];return t&&t.get?t.get(this):q.propHooks._default.get(this)},run:function(t){var e,n=q.propHooks[this.prop];return this.options.duration?this.pos=e=ut.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):q.propHooks._default.set(this),this}},q.prototype.init.prototype=q.prototype,q.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ut.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ut.fx.step[t.prop]?ut.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ut.cssProps[t.prop]]||ut.cssHooks[t.prop])?ut.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},q.propHooks.scrollTop=q.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ut.each(["toggle","show","hide"],function(t,e){var n=ut.fn[e];ut.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(j(e,!0),t,i,o)}}),ut.fn.extend({fadeTo:function(t,e,n,i){return this.filter(C).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=ut.isEmptyObject(t),r=ut.speed(e,n,i),s=function(){var e=$(this,ut.extend({},t),r);(o||ut._data(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,n,i){var o=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",r=ut.timers,s=ut._data(this);if(n)s[n]&&s[n].stop&&o(s[n]);else for(n in s)s[n]&&s[n].stop&&nn.test(n)&&o(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=t&&r[n].queue!==t||(r[n].anim.stop(i),e=!1,r.splice(n,1));(e||!i)&&ut.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ut._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=ut.timers,s=i?i.length:0;for(n.finish=!0,ut.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),ut.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ut.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),ut.speed=function(t,e,n){var i=t&&"object"==typeof t?ut.extend({},t):{complete:n||!n&&e||ut.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ut.isFunction(e)&&e};return i.duration=ut.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ut.fx.speeds?ut.fx.speeds[i.duration]:ut.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ut.isFunction(i.old)&&i.old.call(this),i.queue&&ut.dequeue(this,i.queue)},i},ut.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ut.timers=[],ut.fx=q.prototype.init,ut.fx.tick=function(){var t,n=ut.timers,i=0;for(Je=ut.now();i<n.length;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||ut.fx.stop(),Je=e},ut.fx.timer=function(t){t()&&ut.timers.push(t)&&ut.fx.start()},ut.fx.interval=13,ut.fx.start=function(){Ze||(Ze=setInterval(ut.fx.tick,ut.fx.interval))},ut.fx.stop=function(){clearInterval(Ze),Ze=null},ut.fx.speeds={slow:600,fast:200,_default:400},ut.fx.step={},ut.expr&&ut.expr.filters&&(ut.expr.filters.animated=function(t){return ut.grep(ut.timers,function(e){return t===e.elem}).length}),ut.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){ut.offset.setOffset(this,t,e)});var n,i,o={top:0,left:0},r=this[0],s=r&&r.ownerDocument;if(s)return n=s.documentElement,ut.contains(n,r)?(typeof r.getBoundingClientRect!==G&&(o=r.getBoundingClientRect()),i=V(s),{top:o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},ut.offset={setOffset:function(t,e,n){var i=ut.css(t,"position");"static"===i&&(t.style.position="relative");var o,r,s=ut(t),a=s.offset(),l=ut.css(t,"top"),c=ut.css(t,"left"),u=("absolute"===i||"fixed"===i)&&ut.inArray("auto",[l,c])>-1,h={},d={};u?(d=s.position(),o=d.top,r=d.left):(o=parseFloat(l)||0,r=parseFloat(c)||0),ut.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):s.css(h)}},ut.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===ut.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ut.nodeName(t[0],"html")||(n=t.offset()),n.top+=ut.css(t[0],"borderTopWidth",!0),n.left+=ut.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ut.css(i,"marginTop",!0),left:e.left-n.left-ut.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Q;t&&!ut.nodeName(t,"html")&&"static"===ut.css(t,"position");)t=t.offsetParent;return t||Q})}}),ut.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);ut.fn[t]=function(o){return ut.access(this,function(t,o,r){var s=V(t);return r===e?s?n in s?s[n]:s.document.documentElement[o]:t[o]:void(s?s.scrollTo(i?ut(s).scrollLeft():r,i?r:ut(s).scrollTop()):t[o]=r)},t,o,arguments.length,null)}}),ut.each({Height:"height",Width:"width"},function(t,n){ut.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,o){ut.fn[o]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(o===!0||r===!0?"margin":"border");return ut.access(this,function(n,i,o){var r;return ut.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+t],r["scroll"+t],n.body["offset"+t],r["offset"+t],r["client"+t])):o===e?ut.css(n,i,a):ut.style(n,i,o,a)},n,s?o:e,s,null)}})}),ut.fn.size=function(){return this.length},ut.fn.andSelf=ut.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ut:(t.jQuery=t.$=ut,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ut}))}(window),function(t,e){function n(e,n){var o,r,s,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,r=o.name,e.href&&r&&"map"===o.nodeName.toLowerCase()?(s=t("img[usemap=#"+r+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,o,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(e,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function o(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?a["inner"+i].call(this):this.each(function(){t(this).css(s,o(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(s,o(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var o,r=t.ui[e].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(t,e,n){var i,o=t.plugins[e];if(o&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<o.length;i++)t.options[o[i][0]]&&o[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return e[i]>0?!0:(e[i]=1,o=e[i]>0,e[i]=0,o)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}o(e)},t.widget=function(e,n,i){var o,r,s,a,l={},c=e.split(".")[0];e=e.split(".")[1],o=c+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},r=t[c][e],s=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(l[e]=i)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var o,r,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==e&&(t.isPlainObject(r)?n[o]=t.isPlainObject(n[o])?t.widget.extend({},n[o],r):t.widget.extend({},r):n[o]=r);return n},t.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,o=t.data(this,r);return o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,l),i!==o&&i!==e?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var e=t.data(this,r);e?e.option(s||{})._init():t.data(this,r,new o(s,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var o,r,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},o=n.split("."),n=o.shift(),o.length){for(r=a[n]=t.widget.extend({},this.options[n]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(n=o.pop(),i===e)return r[n]===e?null:r[n];r[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,s){function a(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):n.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var o,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&t.effects&&t.effects.effect[a]?i[e](o):a!==e&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(jQuery),function(t,e){var n=!1;t(document).mouseup(function(){n=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,o=1===e.which,r="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function n(t,e,n){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function o(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(r!==e)return r;var n,i,o=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return t("body").append(o),n=s.offsetWidth,o.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=o[0].clientWidth),o.remove(),r=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),o="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,r="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var r,p,g,m,v,y,b=t(e.of),_=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(_),x=(e.collision||"flip").split(" "),C={};return y=o(b),b[0].preventDefault&&(e.at="left top"),p=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",t=h.exec(i[0]),n=h.exec(i[1]),C[this]=[t?t[0]:0,n?n[0]:0],e[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),r=n(C.at,p,g),v.left+=r[0],v.top+=r[1],this.each(function(){var o,c,u=t(this),h=u.outerWidth(),d=u.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),k=h+f+i(this,"marginRight")+w.width,S=d+y+i(this,"marginBottom")+w.height,T=t.extend({},v),E=n(C.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?T.left-=h:"center"===e.my[0]&&(T.left-=h/2),"bottom"===e.my[1]?T.top-=d:"center"===e.my[1]&&(T.top-=d/2),T.left+=E[0],T.top+=E[1],t.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),o={marginLeft:f,marginTop:y},t.each(["left","top"],function(n,i){t.ui.position[x[n]]&&t.ui.position[x[n]][i](T,{targetWidth:p,targetHeight:g,elemWidth:h,elemHeight:d,collisionPosition:o,collisionWidth:k,collisionHeight:S,offset:[r[0]+E[0],r[1]+E[1]],my:e.my,at:e.at,within:_,elem:u})}),e.using&&(c=function(t){var n=m.left-T.left,i=n+p-h,o=m.top-T.top,r=o+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:u,left:T.left,top:T.top,width:h,height:d},horizontal:0>i?"left":n>0?"right":"center",vertical:0>r?"top":o>0?"bottom":"middle"};h>p&&a(n+i)<p&&(l.horizontal="center"),d>g&&a(o+r)<g&&(l.vertical="middle"),s(a(n),a(i))>s(a(o),a(r))?l.important="horizontal":l.important="vertical",e.using.call(this,t,l)}),u.offset(t.extend(T,{using:c}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,c=a+e.collisionWidth-r-o;e.collisionWidth>r?l>0&&0>=c?(n=t.left+l+e.collisionWidth-r-o,t.left+=l-n):c>0&&0>=l?t.left=o:l>c?t.left=o+r-e.collisionWidth:t.left=o:l>0?t.left+=l:c>0?t.left-=c:t.left=s(t.left-a,t.left)},top:function(t,e){
var n,i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,c=a+e.collisionHeight-r-o;e.collisionHeight>r?l>0&&0>=c?(n=t.top+l+e.collisionHeight-r-o,t.top+=l-n):c>0&&0>=l?t.top=o:l>c?t.top=o+r-e.collisionHeight:t.top=o:l>0?t.top+=l:c>0?t.top-=c:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>u?(n=t.left+d+p+f+e.collisionWidth-s-r,(0>n||n<a(u))&&(t.left+=d+p+f)):h>0&&(i=t.left-e.collisionPosition.marginLeft+d+p+f-l,(i>0||a(i)<h)&&(t.left+=d+p+f))},top:function(t,e){var n,i,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-s-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>u?(i=t.top+p+f+g+e.collisionHeight-s-r,t.top+p+f+g>u&&(0>i||i<a(u))&&(t.top+=p+f+g)):h>0&&(n=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>h&&(n>0||a(n)<h)&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,o,r,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in i)e.style[r]=i[r];e.appendChild(a),n=s||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=t(a).offset().left,t.support.offsetFractions=o>10&&11>o,e.innerHTML="",n.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=t(o.containment),i=n[0],void(i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,o,r,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,c=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),o=i.options,r=t.extend({},n,{item:i.element});i.sortables=[],t(o.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n){var i=t(this).data("ui-draggable"),o=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,n){var i=t(this).data("ui-draggable"),o=this;t.each(i.sortables,function(){var r=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),o=t(this).data("ui-draggable").options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,o=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?o=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(o=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?o=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(o=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,o,r,s,a,l,c,u,h,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)a=p.snapElements[h].left,l=a+p.snapElements[h].width,c=p.snapElements[h].top,u=c+p.snapElements[h].height,a-g>v||m>l+g||c-g>b||y>u+g||!t.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(c-b)<=g,o=Math.abs(u-y)<=g,r=Math.abs(a-v)<=g,s=Math.abs(l-m)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=i||o||r||s,"outer"!==f.snapMode&&(i=Math.abs(c-y)<=g,o=Math.abs(u-b)<=g,r=Math.abs(a-m)<=g,s=Math.abs(l-v)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(i||o||r||s||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=i||o||r||s||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),o=t(this).data("ui-draggable").options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(t,e){function n(t,e,n){return t>e&&e+n>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,n=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,n=t.ui.ddmanager.droppables[this.options.scope];e<n.length;e++)n[e]===this&&n.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){"accept"===e&&(this.accept=t.isFunction(n)?n:function(t){return t.is(n)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,o=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&t.ui.intersect(i,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,e,i){if(!e.offset)return!1;var o,r,s=(t.positionAbs||t.position.absolute).left,a=s+t.helperProportions.width,l=(t.positionAbs||t.position.absolute).top,c=l+t.helperProportions.height,u=e.offset.left,h=u+e.proportions.width,d=e.offset.top,p=d+e.proportions.height;switch(i){case"fit":return s>=u&&h>=a&&l>=d&&p>=c;case"intersect":return u<s+t.helperProportions.width/2&&a-t.helperProportions.width/2<h&&d<l+t.helperProportions.height/2&&c-t.helperProportions.height/2<p;case"pointer":return o=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,r=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,n(r,d,e.proportions.height)&&n(o,u,e.proportions.width);case"touch":return(l>=d&&p>=l||c>=d&&p>=c||d>l&&c>p)&&(s>=u&&h>=s||a>=u&&h>=a||u>s&&a>h);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var i,o,r=t.ui.ddmanager.droppables[e.options.scope]||[],s=n?n.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<r.length;i++)if(!(r[i].options.disabled||e&&!r[i].accept.call(r[i].element[0],e.currentItem||e.element))){for(o=0;o<a.length;o++)if(a[o]===r[i].element[0]){r[i].proportions.height=0;continue t}r[i].visible="none"!==r[i].element.css("display"),r[i].visible&&("mousedown"===s&&r[i]._activate.call(r[i],n),r[i].offset=r[i].element.offset(),r[i].proportions={width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight})}},drop:function(e,n){var i=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,o,r,s=t.ui.intersect(e,this,this.options.tolerance),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===o}),r.length&&(i=t.data(r[0],"ui-droppable"),i.greedyChild="isover"===a)),i&&"isover"===a&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),i&&"isout"===a&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}}}(jQuery),function(t,e){function n(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,n,i,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},n=0;n<e.length;n++)i=t.trim(e[n]),r="ui-resizable-"+i,o=t("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===i&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(o);this._renderAxis=function(e){var n,i,o,r;e=e||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=t(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=t(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),t(this.handles[n]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(t(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(e){var n,i,o=!1;for(n in this.handles)i=t(this.handles[n])[0],(i===e.target||t.contains(i,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,o,r,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=n(this.helper.css("left")),o=n(this.helper.css("top")),s.containment&&(i+=t(s.containment).scrollLeft()||0,o+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:o},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var n,i=this.helper,o={},r=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,h=e.pageX-r.left||0,d=e.pageY-r.top||0,p=this._change[s];return p?(n=p.apply(this,[e,h,d]),
this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==c&&(o.width=this.size.width+"px"),this.size.height!==u&&(o.height=this.size.height+"px"),i.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(o)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var n,i,o,r,s,a,l,c=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&t.ui.hasScroll(n[0],"left")?0:u.sizeDiff.height,r=i?0:u.sizeDiff.width,s={width:u.helper.width()-r,height:u.helper.height()-o},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,n,o,r,s,a=this.options;s={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,o=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),o>s.minHeight&&(s.minHeight=o),n<s.maxWidth&&(s.maxWidth=n),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,o=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===o&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===o&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,o=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=i(t.width)&&e.minWidth&&e.minWidth>t.width,a=i(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),h=/nw|ne|n/.test(n);return s&&(t.width=e.minWidth),a&&(t.height=e.minHeight),o&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),s&&u&&(t.left=l-e.minWidth),o&&u&&(t.left=l-e.maxWidth),a&&h&&(t.top=c-e.minHeight),r&&h&&(t.top=c-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,n,i,o,r=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(o=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],n=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],i=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],e=0;e<n.length;e++)this.borderDif[e]=(parseInt(n[e],10)||0)+(parseInt(i[e],10)||0);o.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).data("ui-resizable"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&t.ui.hasScroll(o[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,o,r,s,a,l,c=t(this).data("ui-resizable"),u=c.options,h=c.element,d=u.containment,p=d instanceof t?d.get(0):/parent/.test(d)?h.parent().get(0):d;p&&(c.containerElement=t(p),/document/.test(d)||d===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(p),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,o){i[t]=n(e.css("padding"+o))}),c.containerOffset=e.offset(),c.containerPosition=e.position(),c.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},o=c.containerOffset,r=c.containerSize.height,s=c.containerSize.width,a=t.ui.hasScroll(p,"left")?p.scrollWidth:s,l=t.ui.hasScroll(p)?p.scrollHeight:r,c.parentData={element:p,left:o.left,top:o.top,width:a,height:l}))},resize:function(e){var n,i,o,r,s=t(this).data("ui-resizable"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||e.shiftKey,h={top:0,left:0},d=s.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),u&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,n=Math.abs((s._helper?s.offset.left-h.left:s.offset.left-h.left)+s.sizeDiff.width),i=Math.abs((s._helper?s.offset.top-h.top:s.offset.top-l.top)+s.sizeDiff.height),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r&&(n-=s.parentData.left),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,u&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.containerOffset,o=e.containerPosition,r=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,c=s.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-o.left-i.left,width:l,height:c}),e._helper&&!n.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-o.left-i.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):t.each(n.alsoResize,function(t){i(t)})},resize:function(e,n){var i=t(this).data("ui-resizable"),o=i.options,r=i.originalSize,s=i.originalPosition,a={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(e,i){t(e).each(function(){var e=t(this),o=t(this).data("ui-resizable-alsoresize"),r={},s=i&&i.length?i:e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var n=(o[e]||0)+(a[e]||0);n&&n>=0&&(r[e]=n||null)}),e.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):t.each(o.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size,o=e.originalSize,r=e.originalPosition,s=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,c=a[1]||1,u=Math.round((i.width-o.width)/l)*l,h=Math.round((i.height-o.height)/c)*c,d=o.width+u,p=o.height+h,f=n.maxWidth&&n.maxWidth<d,g=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>d,v=n.minHeight&&n.minHeight>p;n.grid=a,m&&(d+=l),v&&(p+=c),f&&(d-=l),g&&(p-=c),/^(se|s|e)$/.test(s)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.top=r.top-h):/^(sw)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.left=r.left-u):(e.size.width=d,e.size.height=p,e.position.top=r.top-h,e.position.left=r.left-u)}})}(jQuery),function(t,e){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(n.options.filter,n.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),n=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:n.left,top:n.top,right:n.left+e.outerWidth(),bottom:n.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var n=this,i=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(i.filter,this.element[0]),this._trigger("start",e),t(i.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=t.data(this,"selectable-item");i.startselected=!0,e.metaKey||e.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element}))}),t(e.target).parents().addBack().each(function(){var i,o=t.data(this,"selectable-item");return o?(i=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),o.unselecting=!i,o.selecting=i,o.selected=i,i?n._trigger("selecting",e,{selecting:o.element}):n._trigger("unselecting",e,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var n,i=this,o=this.options,r=this.opos[0],s=this.opos[1],a=e.pageX,l=e.pageY;return r>a&&(n=a,a=r,r=n),s>l&&(n=l,l=s,s=n),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var n=t.data(this,"selectable-item"),c=!1;n&&n.element!==i.element[0]&&("touch"===o.tolerance?c=!(n.left>a||n.right<r||n.top>l||n.bottom<s):"fit"===o.tolerance&&(c=n.left>r&&n.right<a&&n.top>s&&n.bottom<l),c?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",e,{selecting:n.element}))):(n.selecting&&((e.metaKey||e.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",e,{unselecting:n.element}))),n.selected&&(e.metaKey||e.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",e,{unselected:i.element})}),t(".ui-selecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",e,{selected:i.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t,e){function n(t,e,n){return t>e&&e+n>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,n){"disabled"===e?(this.options[e]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,n){var i=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,r.widgetName+"-item")===r?(i=t(this),!1):void 0}),t.data(e.target,r.widgetName+"-item")===r&&(i=t(e.target)),i&&(!this.options.handle||n||(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(o=!0)}),o))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,n,i){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed)),e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],r=this._intersectsWithPointer(i),r&&i.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>a&&l>i+c,d="y"===this.options.axis||e+u>r&&s>e+u,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=e&&i,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return o?this.floating?s&&"right"===s||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(t){var e=n(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=n(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:o&&("down"===o&&e||"up"===o&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,i,o,r,s=[],a=[],l=this._connectWith();if(l&&e)for(n=l.length-1;n>=0;n--)for(o=t(l[n]),i=o.length-1;i>=0;i--)r=t.data(o[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&a.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".sortable-box-placeholder"),r]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".sortable-box-placeholder"),this]),n=a.length-1;n>=0;n--)a[n][0].each(function(){s.push(this)});return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,o,r,s,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(o=t(d[n]),i=o.length-1;i>=0;i--)r=t.data(o[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(h.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(s=h[n][1],a=h[n][0],i=0,c=a.length;c>i;i++)l=t(a[i]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+i+">",e.document[0]).addClass(n||e.currentItem[0].className+" sortable-box-placeholder").removeClass("ui-sortable-helper");return"tr"===i?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(o)}):"img"===i&&o.attr("src",e.currentItem.attr("src")),o},update:function(t,o){(!n||i.forcePlaceholderSize)&&(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var o,r,s,a,l,c,u,h,d,p,f=null,g=null;for(o=this.containers.length-1;o>=0;o--)if(!t.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(f&&t.contains(this.containers[o].element[0],f.element[0]))continue;f=this.containers[o],g=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",e,this._uiHash(this)),this.containers[o].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",e,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(s=1e4,a=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],r=this.items.length-1;r>=0;r--)t.contains(this.containers[g].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(!p||n(this.positionAbs.top+this.offset.click.top,this.items[r].top,this.items[r].height))&&(h=this.items[r].item.offset()[l],d=!1,Math.abs(h-u)>Math.abs(h+this.items[r][c]-u)&&(d=!0,h+=this.items[r][c]),Math.abs(h-u)<s&&(s=Math.abs(h-u),a=this.items[r],this.direction=d?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;a?this._rearrange(e,a,null,!0):this._rearrange(e,null,this.containers[g].element,!0),this._trigger("change",e,this._uiHash()),this.containers[g]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",e,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),
(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],n=t(o.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(e){var n,i,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||i.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var n=0,i={},o={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",o.height=o.paddingTop=o.paddingBottom=o.borderTopWidth=o.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var n=t.ui.keyCode,i=this.headers.length,o=this.headers.index(e.target),r=!1;switch(e.keyCode){case n.RIGHT:case n.DOWN:r=this.headers[(o+1)%i];break;case n.LEFT:case n.UP:r=this.headers[(o-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(e);break;case n.HOME:r=this.headers[0];break;case n.END:r=this.headers[i-1]}r&&(t(e.target).attr("tabIndex",-1),t(r).attr("tabIndex",0),r.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var e,i=this.options,o=i.heightStyle,r=this.element.parent(),s=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var n=t(this),i=n.attr("id"),o=n.next(),r=o.attr("id");i||(i=s+"-header-"+e,n.attr("id",i)),r||(r=s+"-panel-"+e,o.attr("id",r)),n.attr("aria-controls",r),o.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===o?(e=r.height(),this.element.siblings(":visible").each(function(){var n=t(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(e-=n.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===o&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var n=this._findActive(e)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var n={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var n=this.options,i=this.active,o=t(e.currentTarget),r=o[0]===i[0],s=r&&n.collapsible,a=s?t():o.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:s?t():o,newPanel:a};e.preventDefault(),r&&!n.collapsible||this._trigger("beforeActivate",e,c)===!1||(n.active=s?!1:this.headers.index(o),this.active=r?t():o,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),r||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&o.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var n=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,e):(i.hide(),n.show(),this._toggleComplete(e)),i.attr({"aria-expanded":"false","aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var r,s,a,l=this,c=0,u=t.length&&(!e.length||t.index()<e.index()),h=this.options.animate||{},d=u&&h.down||h,p=function(){l._toggleComplete(n)};return"number"==typeof d&&(a=d),"string"==typeof d&&(s=d),s=s||d.easing||h.easing,a=a||d.duration||h.duration,e.length?t.length?(r=t.show().outerHeight(),e.animate(i,{duration:a,easing:s,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(o,{duration:a,easing:s,complete:p,step:function(t,n){n.now=Math.round(t),"height"!==n.prop?c+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(r-e.outerHeight()-c),c=0)}})):e.animate(i,a,s,p):t.animate(o,a,s,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t,e){var n=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r?!0:s?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var r=t.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",o);break;case r.UP:e=!0,this._keyEvent("previous",o);break;case r.DOWN:e=!0,this._keyEvent("next",o);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(e=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault());if(!n){var o=t.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(t){return i?(i=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(i){i.target===e.element[0]||i.target===n||t.contains(n,i.target)||e.close()})})},menufocus:function(e,n){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var i=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:i})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,o){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,e=++n;return function(i){e===n&&t.__response(i),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,function(t,n){i._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<a>").text(n.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return i.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t,e){var n,i,o,r,s="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},u=function(e){var n=e.name,i=e.form,o=t([]);return n&&(n=n.replace(/'/g,"\\'"),o=i?t(i).find("[name='"+n+"']"):t("[name='"+n+"']",e.ownerDocument).filter(function(){return!this.form})),o};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,a=this.options,l="checkbox"===this.type||"radio"===this.type,h=l?"":"ui-state-active",d="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===n&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(h)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){e.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){e.buttonElement.removeClass(d)}),l&&(this.element.bind("change"+this.eventNamespace,function(){r||e.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(r=!1,i=t.pageX,o=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||(i!==t.pageX||o!==t.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||r?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||r)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var n=e.element[0];u(n).not(n).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),n=this,void e.document.one("mouseup",function(){n=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+a+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?u(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(l),n=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,o=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":i.primary?"-primary":"-secondary")),i.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(n)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){t.datepicker._isDisabledDatepicker(r.inline?e.parent()[0]:r.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function o(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var r,s="datepicker";t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return o(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,o,r;i=e.nodeName.toLowerCase(),o="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),o),r.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,r):o&&this._inlineDatepicker(e,r)},_newInst:function(e,n){var o=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:o,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,s,n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,o,r,s=this._get(n,"appendText"),a=this._get(n,"isRTL");n.append&&n.append.remove(),s&&(n.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[a?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&e.focus(this._showDatepicker),("button"===i||"both"===i)&&(o=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:o,title:o}):o)),e[a?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,o,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(n=0,i=0,o=0;o<t.length;o++)t[o].length>n&&(n=t[o].length,i=o);return i},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,s,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,r,a){var l,c,u,h,d,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],s,p)),o(p.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+h,u/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],s,p),this},_destroyDatepicker:function(e){var n,i=t(e),o=t.data(e,s);i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,s),"input"===n?(o.append.remove(),o.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var n,i,o=t(e),r=t.data(e,s);o.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=o.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,i,o=t(e),r=t.data(e,s);o.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=o.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,s)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,r){var s,a,l,c,u=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):u?"all"===i?t.extend({},u.settings):this._get(u,i):null:(s=i||{},"string"==typeof i&&(s={},s[i]=r),void(u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),o(u.settings,s),null!==l&&s.dateFormat!==e&&s.minDate===e&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&s.dateFormat!==e&&s.maxDate===e&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(t(n),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,o,r=t.datepicker._getInst(e.target),s=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return o=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),o[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,o[0]),n=t.datepicker._get(r,"onSelect"),n?(i=t.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,o=t.datepicker._getInst(e.target);return t.datepicker._get(o,"constrainInput")?(n=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(o){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var n,i,r,s,a,l,c;n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),i=t.datepicker._get(n,"beforeShow"),r=i?i.apply(e,[e,n]):{},r!==!1&&(o(n.settings,r),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),s=!1,t(e).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),a={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),a=t.datepicker._checkOffset(n,a,s),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(l=t.datepicker._get(n,"showAnim"),c=t.datepicker._get(n,"duration"),n.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?n.dpDiv.show(l,t.datepicker._get(n,"showOptions"),c):n.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,r=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(e),o=i[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",s*o+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var o=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?o-s:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+a?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+o>l&&l>o?Math.abs(n.left+o-l):0),n.top-=Math.min(n.top,n.top+r>c&&c>r?Math.abs(r+a):0),n},_findPos:function(e){for(var n,i=this._getInst(e),o=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[o?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,o,r,a=this._curInst;!a||e&&a!==t.data(e,s)||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),o=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[n]||t.effects[n])?a.dpDiv.hide(n,t.datepicker._get(a,"showOptions"),i,o):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,o),n||o(),this._datepickerShowing=!1,r=this._get(a,"onClose"),r&&r.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id!==t.datepicker._mainDivId&&0===n.parents("#"+t.datepicker._mainDivId).length&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==i)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var o=t(e),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var n,i=t(e),o=this._getInst(i[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(n=new Date,o.selectedDay=n.getDate(),o.drawMonth=o.selectedMonth=n.getMonth(),o.drawYear=o.selectedYear=n.getFullYear()),this._notifyChange(o),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var o=t(e),r=this._getInst(o[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(e,n,i,o){var r,s=t(e);t(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(r=this._getInst(s[0]),r.selectedDay=r.currentDay=t("a",o).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,o=t(e),r=this._getInst(o[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),i=this._get(r,"onSelect"),i?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,i,o,r=this._get(e,"altField");r&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),o=this.formatDate(n,i,this._getFormatConfig(e)),t(r).each(function(){t(this).val(o)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var o,r,s,a,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,d=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,_=function(t){var n=o+1<e.length&&e.charAt(o+1)===t;return n&&o++,n},w=function(t){var e=_(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,o=new RegExp("^\\d{1,"+i+"}"),r=n.substring(l).match(o);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},x=function(e,i,o){var r=-1,s=t.map(_(e)?o:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(s,function(t,e){var i=e[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(r=e[0],l+=i.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},C=function(){if(n.charAt(l)!==e.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<e.length;o++)if(b)"'"!==e.charAt(o)||_("'")?C():b=!1;else switch(e.charAt(o)){case"d":v=w("d");break;case"D":x("D",h,d);break;case"o":y=w("o");break;case"m":m=w("m");break;case"M":m=x("M",p,f);break;case"y":g=w("y");break;case"@":a=new Date(w("@")),g=a.getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),g=a.getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"'":_("'")?C():b=!0;break;default:C()}if(l<n.length&&(s=n.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=g?0:-100)),y>-1)for(m=1,v=y;;){if(r=this._getDaysInMonth(g,m-1),r>=v)break;m++,v-=r}if(a=this._daylightSavingAdjust(new Date(g,m-1,v)),a.getFullYear()!==g||a.getMonth()+1!==m||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},c=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},u=function(t,e,n,i){return l(t)?i[e]:n[e]},h="",d=!1;if(e)for(i=0;i<t.length;i++)if(d)"'"!==t.charAt(i)||l("'")?h+=t.charAt(i):d=!1;else switch(t.charAt(i)){case"d":h+=c("d",e.getDate(),2);break;case"D":h+=u("D",e.getDay(),o,r);break;case"o":h+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",e.getMonth()+1,2);break;case"M":h+=u("M",e.getMonth(),s,a);break;case"y":h+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=t.charAt(i)}return h},_possibleChars:function(t){var e,n="",i=!1,o=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||o("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":o("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,n){return t.settings[n]!==e?t.settings[n]:this._defaults[n]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),r=o,s=this._getFormatConfig(t);try{r=this.parseDate(n,i,s)||o}catch(a){i=e?"":i}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=i?r.getDate():0,t.currentMonth=i?r.getMonth():0,t.currentYear=i?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var o=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(i){}for(var o=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=o.getFullYear(),s=o.getMonth(),a=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(n);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":s+=parseInt(c[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(c[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(r,s))}c=l.exec(n)}return new Date(r,s,a)},s=null==n||""===n?i:"string"==typeof n?r(n):"number"==typeof n?isNaN(n)?i:o(n):new Date(n.getTime());return s=s&&"Invalid Date"===s.toString()?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,o=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),o===t.selectedMonth&&r===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,o,r,s,a,l,c,u,h,d,p,f,g,m,v,y,b,_,w,x,C,k,S,T,E,M,D,P,A,I,R,O,F,N,z,L,H,$=new Date,K=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth(),$.getDate())),B=this._get(t,"isRTL"),q=this._get(t,"showButtonPanel"),j=this._get(t,"hideIfNoPrevNext"),V=this._get(t,"navigationAsDateFormat"),W=this._getNumberOfMonths(t),U=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),Y=1!==W[0]||1!==W[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-U,tt=t.drawYear;if(0>Z&&(Z+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-W[0]*W[1]+1,J.getDate())),e=Q&&Q>e?Q:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)Z--,0>Z&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,n=this._get(t,"prevText"),n=V?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Z-G,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>":j?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>",o=this._get(t,"nextText"),o=V?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,Z+G,1)),this._getFormatConfig(t)):o,r=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+o+"</span></a>":j?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+o+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?X:K,s=V?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(B?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),_="",x=0;x<W[0];x++){for(C="",this.maxRows=4,k=0;k<W[1];k++){if(S=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),T=" ui-corner-all",E="",Y){if(E+="<div class='ui-datepicker-group",W[1]>1)switch(k){case 0:E+=" ui-datepicker-group-first",T=" ui-corner-"+(B?"right":"left");break;case W[1]-1:E+=" ui-datepicker-group-last",T=" ui-corner-"+(B?"left":"right");break;default:E+=" ui-datepicker-group-middle",T=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?B?r:i:"")+(/all|right/.test(T)&&0===x?B?i:r:"")+this._generateMonthYearHeader(t,Z,tt,Q,J,x>0||k>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)D=(w+u)%7,M+="<th"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[D]+"'>"+p[D]+"</span></th>";for(E+=M+"</tr></thead><tbody>",P=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),A=(this._getFirstDayOfMonth(tt,Z)-u+7)%7,I=Math.ceil((A+P)/7),R=Y&&this.maxRows>I?this.maxRows:I,this.maxRows=R,O=this._daylightSavingAdjust(new Date(tt,Z,1-A)),F=0;R>F;F++){for(E+="<tr>",N=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",w=0;7>w;w++)z=m?m.apply(t.input?t.input[0]:null,[O]):[!0,""],L=O.getMonth()!==Z,H=L&&!y||!z[0]||Q&&Q>O||J&&O>J,N+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(O.getTime()===S.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===O.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+z[1]+(O.getTime()===X.getTime()?" "+this._currentClass:"")+(O.getTime()===K.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!z[2]?"":" title='"+z[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===K.getTime()?" ui-state-highlight":"")+(O.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);E+=N+"</tr>"}Z++,Z>11&&(Z=0,tt++),E+="</tbody></table>"+(Y?"</div>"+(W[0]>0&&k===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=E}_+=C}return _+=c,t._keyEvent=!1,_},_generateMonthYearHeader:function(t,e,n,i,o,r,s,a){var l,c,u,h,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(r||!m)_+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=i&&i.getFullYear()===n,c=o&&o.getFullYear()===n,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=i.getMonth())&&(!c||u<=o.getMonth())&&(_+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");_+="</select>"}if(y||(b+=_+(!r&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(h[0]),g=Math.max(f,p(h[1]||"")),f=i?Math.max(f,i.getFullYear()):f,g=o?Math.min(g,o.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&m&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),o=t.drawMonth+("M"===n?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(i,o))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,o,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),o=n&&n>e?n:e;return i&&o>i?i:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var o=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(n,i+(0>e?e:o[0]*o[1]),1));return 0>e&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var n,i,o=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),
a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!o||e.getTime()>=o.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t,e){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;0>n&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!e&&this._trigger("focus",t),n},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function n(){var e=this.document[0].activeElement,n=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);n||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),o=n.filter(":last");e.target!==o[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(o.focus(1),e.preventDefault()):(i.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(n,function(n,i){var o,r;i=t.isFunction(i)?{click:i,text:n}:i,i=t.extend({type:"button"},i),o=i.click,i.click=function(){o.apply(e.element[0],arguments)},r={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,t("<button></button>",i).button(r).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){t(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,e(o))},drag:function(t,i){n._trigger("drag",t,e(i))},stop:function(o,r){i.position=[r.position.left-n.document.scrollLeft(),r.position.top-n.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",o,e(r))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var n=this,i=this.options,o=i.resizable,r=this.uiDialog.css("position"),s="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,o){t(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,e(o))},resize:function(t,i){n._trigger("resize",t,e(i))},stop:function(o,r){i.height=t(this).height(),i.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",o,e(r))}}).css("position",r)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var o=this,r=!1,s={};t.each(e,function(t,e){o._setOption(t,e),t in n&&(r=!0),t in i&&(s[t]=e)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var n,i,o=this.uiDialog;"dialogClass"===t&&o.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(n=o.is(":data(ui-draggable)"),n&&!e&&o.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(i=o.is(":data(ui-resizable)"),i&&!e&&o.resizable("destroy"),i&&"string"==typeof e&&o.resizable("option","handles",e),i||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,n=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){e._allowInteraction(i)||(i.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,n=this.options.position,i=[],o=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(i=n.split?n.split(" "):[n[0],n[1]],1===i.length&&(i[1]=i[0]),t.each(["left","top"],function(t,e){+i[t]===i[t]&&(o[t]=i[t],i[t]=e)}),n={my:i[0]+(o[0]<0?o[0]:"+"+o[0])+" "+i[1]+(o[1]<0?o[1]:"+"+o[1]),at:i.join(" ")}),n=t.extend({},t.ui.dialog.prototype.options.position,n)):n=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(n),e||this.uiDialog.hide()}})}(jQuery),function(t,e){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var n=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),n.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var n=t(e.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,r,s,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,o=this.previousFilter||"",r=String.fromCharCode(e.keyCode),s=!1,clearTimeout(this.filterTimer),r===o?s=!0:r=o+r,a=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(r=String.fromCharCode(e.keyCode),a=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev("a"),o=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),e.attr("aria-labelledby",i.attr("id"))}),e=i.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,o,r,s,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.height(),0>o?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(e){var n,i,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i-o<0}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var n,i,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+o>0}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)}})}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t,e){var n=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=[];for(n=i.values&&i.values.length||1,o.length>n&&(o.slice(n).remove(),o=o.slice(0,n)),e=o.length;n>e;e++)s.push(r);this.handles=o.add(t(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,o,r,s,a,l,c,u=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-u.values(e));(o>n||o===n&&(e===u._lastChangedValue||u.values(e)===h.min))&&(o=n,r=t(this),s=e)}),a=this._start(e,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,r.addClass("ui-state-active").focus(),l=r.offset(),c=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:e.pageX-l.left-r.width()/2,top:e.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),r=this._valueMin()+i*o,this._trimAlignValue(r)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,o,r;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>i||1===e&&i>n)&&(n=i),n!==this.values(e)&&(o=this.values(),o[e]=n,r=this._trigger("slide",t,{handle:this.handles[e],value:n,values:o}),i=this.values(e?0:1),r!==!1&&this.values(e,n,!0))):n!==this.value()&&(r=this._trigger("slide",t,{handle:this.handles[e],value:n}),r!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,o,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,o=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,n){var i,o=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;o>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,o,r,s=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({
bottom:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:a.animate}))),e=n}):(i=this.value(),o=this._valueMin(),r=this._valueMax(),n=r!==o?(i-o)/(r-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(e){var i,o,r,s,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),i=this._start(e,a),i===!1))return}switch(s=this.options.step,o=r=this.options.values&&this.options.values.length?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/n);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/n);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(o===this._valueMax())return;r=this._trimAlignValue(o+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(o===this._valueMin())return;r=this._trimAlignValue(o-s)}this._slide(e,a,r)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},n=this.element;return t.each(["min","max","step"],function(t,i){var o=n.attr(i);void 0!==o&&o.length&&(e[i]=o)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function n(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var n=this.options,i=t.ui.keyCode;switch(e.keyCode){case i.UP:return this._repeat(null,1,e),!0;case i.DOWN:return this._repeat(null,-1,e),!0;case i.PAGE_UP:return this._repeat(null,n.page,e),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(e){var n=this.options.incremental;return n?t.isFunction(n)?n(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return e=null!==i.min?i.min:0,n=t-e,n=Math.round(n/i.step)*i.step,t=e+n,t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var n=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(n))}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var n;""!==t&&(n=this._parse(t),null!==n&&(e||(n=this._adjustValue(n)),t=this._format(n))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function n(){return++o}function i(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var o=0,r=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),t.isArray(n.disabled)&&(n.disabled=t.unique(n.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=t(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var e=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===e&&(i&&this.tabs.each(function(n,o){return t(o).attr("aria-controls")===i?(e=n,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=this.tabs.length?0:!1)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=n?!1:0)),!n&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var n=t(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),o=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:i++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,i--;break;case t.ui.keyCode.END:i=this.anchors.length-1;break;case t.ui.keyCode.HOME:i=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i===this.options.active?!1:i);default:return}e.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,o),e.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,n){function i(){return e>o&&(e=0),0>e&&(e=o),e}for(var o=this.tabs.length-1;-1!==t.inArray(i(),this.options.disabled);)e=n?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){return"active"===t?void this._activate(e):"disabled"===t?void this._setupDisabled(e):(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+n()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,n=this.tablist.children(":has(a[href])");e.disabled=t.map(n.filter(".ui-state-disabled"),function(t){return n.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(n,o){var r,s,a,l=t(o).uniqueId().attr("id"),c=t(o).closest("li"),u=c.attr("aria-controls");i(o)?(r=o.hash,s=e.element.find(e._sanitizeSelector(r))):(a=e._tabId(c),r="#"+a,s=e.element.find(r),s.length||(s=e._createPanel(a),s.insertAfter(e.panels[n-1]||e.tablist)),s.attr("aria-live","polite")),s.length&&(e.panels=e.panels.add(s)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":r.substring(1),"aria-labelledby":l}),s.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var n,i=0;n=this.tabs[i];i++)e===!0||-1!==t.inArray(i,e)?t(n).addClass("ui-state-disabled").attr("aria-disabled","true"):t(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var n={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var n,i=this.element.parent();"fill"===e?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),i=e.css("position");"absolute"!==i&&"fixed"!==i&&(n-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,n-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.panels.each(function(){n=Math.max(n,t(this).height("").height())}).height(n))},_eventHandler:function(e){var n=this.options,i=this.active,o=t(e.currentTarget),r=o.closest("li"),s=r[0]===i[0],a=s&&n.collapsible,l=a?t():this._getPanelForTab(r),c=i.length?this._getPanelForTab(i):t(),u={oldTab:i,oldPanel:c,newTab:a?t():r,newPanel:l};e.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||s&&!n.collapsible||this._trigger("beforeActivate",e,u)===!1||(n.active=a?!1:this.tabs.index(r),this.active=s?t():r,this.xhr&&this.xhr.abort(),c.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),e),this._toggle(e,u))},_toggle:function(e,n){function i(){r.running=!1,r._trigger("activate",e,n)}function o(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&r.options.show?r._show(s,r.options.show,i):(s.show(),i())}var r=this,s=n.newPanel,a=n.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),s.length&&a.length?n.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var n,i=this._findActive(e);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),n=e.data("ui-tabs-aria-controls");n?e.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var i=this.options.disabled;i!==!1&&(n===e?i=!1:(n=this._getIndex(n),i=t.isArray(i)?t.map(i,function(t){return t!==n?t:null}):t.map(this.tabs,function(t,e){return e!==n?e:null})),this._setupDisabled(i))},disable:function(n){var i=this.options.disabled;if(i!==!0){if(n===e)i=!0;else{if(n=this._getIndex(n),-1!==t.inArray(n,i))return;i=t.isArray(i)?t.merge([n],i).sort():[n]}this._setupDisabled(i)}},load:function(e,n){e=this._getIndex(e);var o=this,r=this.tabs.eq(e),s=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),l={tab:r,panel:a};i(s[0])||(this.xhr=t.ajax(this._ajaxSettings(s,n,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){a.html(t),o._trigger("load",n,l)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&o.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===o.xhr&&delete o.xhr},1)})))},_ajaxSettings:function(e,n,i){var o=this;return{url:e.attr("href"),beforeSend:function(e,r){return o._trigger("beforeLoad",n,t.extend({jqXHR:e,ajaxSettings:r},i))}}},_getPanelForTab:function(e){var n=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(jQuery),function(t){function e(e,n){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(n),e.data("ui-tooltip-id",n).attr("aria-describedby",t.trim(i.join(" ")))}function n(e){var n=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),o=t.inArray(n,i);-1!==o&&i.splice(o,1),e.removeData("ui-tooltip-id"),i=t.trim(i.join(" ")),i?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")}var i=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,n){var i=this;return"disabled"===e?(this[n?"_disable":"_enable"](),void(this.options[e]=n)):(this._super(e,n),void("content"===e&&t.each(this.tooltips,function(t,e){i._updateContent(e)})))},_disable:function(){var e=this;t.each(this.tooltips,function(n,i){var o=t.Event("blur");o.target=o.currentTarget=i[0],e.close(o,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var n=this,i=t(e?e.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&i.parents().each(function(){var e,i=t(this);i.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,n.close(e,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._updateContent(i,e))},_updateContent:function(t,e){var n,i=this.options.content,o=this,r=e?e.type:null;return"string"==typeof i?this._open(e,t,i):(n=i.call(t[0],function(n){t.data("ui-tooltip-open")&&o._delay(function(){e&&(e.type=r),this._open(e,t,n)})}),void(n&&this._open(e,t,n)))},_open:function(n,i,o){function r(t){c.of=t,s.is(":hidden")||s.position(c)}var s,a,l,c=t.extend({},this.options.position);if(o){if(s=this._find(i),s.length)return void s.find(".ui-tooltip-content").html(o);i.is("[title]")&&(n&&"mouseover"===n.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),e(i,s.attr("id")),s.find(".ui-tooltip-content").html(o),this.options.track&&n&&/^mouse/.test(n.type)?(this._on(this.document,{mousemove:r}),r(n)):s.position(t.extend({of:i},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){s.is(":visible")&&(r(c.of),clearInterval(l))},t.fx.interval)),this._trigger("open",n,{tooltip:s}),a={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var n=t.Event(e);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}},n&&"mouseover"!==n.type||(a.mouseleave="close"),n&&"focusin"!==n.type||(a.focusout="close"),this._on(!0,i,a)}},close:function(e){var i=this,o=t(e?e.currentTarget:this.element),r=this._find(o);this.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title")),n(o),r.stop(!0),this._hide(r,this.options.hide,function(){i._removeTooltip(t(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,n){t(n.element).attr("title",n.title),delete i.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:r}),this.closing=!1)},_tooltip:function(e){var n="ui-tooltip-"+i++,o=t("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(o),o.appendTo(this.document[0].body),this.tooltips[n]=e,o},_find:function(e){var n=e.data("ui-tooltip-id");return n?t("#"+n):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(n,i){var o=t.Event("blur");o.target=o.currentTarget=i[0],e.close(o,!0),t("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))})}})}(jQuery),function(t,e){var n="ui-effects-";t.effects={effect:{}},function(t,e){function n(t,e,n){var i=h[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=c(),i=n._rgba=[];return e=e.toLowerCase(),f(l,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";return a?(r=n[l](a),n[u[l].cache]=r[u[l].cache],i=n._rgba=r._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&t.extend(i,r.transparent),n):r[e]}function o(t,e,n){return n=(n+1)%1,1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=t.Color=function(e,n,i,o){return new t.Color.fn.parse(e,n,i,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=c.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(o,s,a,l){if(o===e)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(s),s=e);var h=this,d=t.type(o),p=this._rgba=[];return s!==e&&(o=[o,s,a,l],d="array"),"string"===d?this.parse(i(o)||r._default):"array"===d?(f(u.rgba.props,function(t,e){p[e.idx]=n(o[e.idx],e)}),this):"object"===d?(o instanceof c?f(u,function(t,e){o[e.cache]&&(h[e.cache]=o[e.cache].slice())}):f(u,function(e,i){var r=i.cache;f(i.props,function(t,e){if(!h[r]&&i.to){if("alpha"===t||null==o[t])return;h[r]=i.to(h._rgba)}h[r][e.idx]=n(o[t],e,!0)}),h[r]&&t.inArray(null,h[r].slice(0,3))<0&&(h[r][3]=1,i.from&&(h._rgba=i.from(h[r])))}),this):void 0},is:function(t){var e=c(t),n=!0,i=this;return f(u,function(t,o){var r,s=e[o.cache];return s&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],f(o.props,function(t,e){return null!=s[e.idx]?n=s[e.idx]===r[e.idx]:void 0})),n}),n},_space:function(){var t=[],e=this;return f(u,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=c(t),o=i._space(),r=u[o],s=0===this.alpha()?c("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return i=i[r.cache],f(r.props,function(t,o){var r=o.idx,s=a[r],c=i[r],u=h[o.type]||{};null!==c&&(null===s?l[r]=c:(u.mod&&(c-s>u.mod/2?s+=u.mod:s-c>u.mod/2&&(s-=u.mod)),l[r]=n((c-s)*e+s,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=c(e)._rgba;return c(t.map(n,function(t,e){return(1-i)*o[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(i,o,r),l=Math.min(i,o,r),c=a-l,u=a+l,h=.5*u;return e=l===a?0:i===a?60*(o-r)/c+360:o===a?60*(r-i)/c+120:60*(i-o)/c+240,n=0===c?0:.5>=h?c/u:c/(2-u),[Math.round(e)%360,n,h,null==s?1:s]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],s=.5>=i?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},f(u,function(i,o){var r=o.props,s=o.cache,l=o.to,u=o.from;c.fn[i]=function(i){if(l&&!this[s]&&(this[s]=l(this._rgba)),i===e)return this[s].slice();var o,a=t.type(i),h="array"===a||"object"===a?i:arguments,d=this[s].slice();return f(r,function(t,e){var i=h["object"===a?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),u?(o=c(u(d)),o[s]=d,o):c(d)},f(r,function(e,n){c.fn[e]||(c.fn[e]=function(o){var r,s=t.type(o),l="alpha"===e?this._hsla?"hsla":"rgba":i,c=this[l](),u=c[n.idx];return"undefined"===s?u:("function"===s&&(o=o.call(this,u),s=t.type(o)),null==o&&n.empty?this:("string"===s&&(r=a.exec(o),r&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1))),c[n.idx]=o,this[l](c)))})})}),c.hook=function(e){var n=e.split(" ");f(n,function(e,n){t.cssHooks[n]={set:function(e,o){var r,s,a="";if("transparent"!==o&&("string"!==t.type(o)||(r=i(o)))){if(o=c(r||o),!d.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[n]=o}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=c(e.elem,n),e.end=c(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},c.hook(s),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(e){var n,i,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)n=o[i],"string"==typeof o[n]&&(r[t.camelCase(n)]=o[n]);else for(n in o)"string"==typeof o[n]&&(r[n]=o[n]);return r}function i(e,n){var i,o,s={};for(i in n)o=n[i],e[i]!==o&&(r[i]||(t.fx.step[i]||!isNaN(parseFloat(o)))&&(s[i]=o));return s}var o=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,
borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,r,s,a){var l=t.speed(r,s,a);return this.queue(function(){var r,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){var e=t(this);return{el:e,start:n(this)}}),r=function(){t.each(o,function(t,n){e[n]&&s[n+"Class"](e[n])})},r(),c=c.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var e=this,n=t.Deferred(),i=t.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,c.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(n,i,o,r){return i?t.effects.animateClass.call(this,{add:n},i,o,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(n){return function(i,o,r,s,a){return"boolean"==typeof o||o===e?r?t.effects.animateClass.call(this,o?{add:i}:{remove:i},r,s,a):n.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},o,r,s)}}(t.fn.toggleClass),switchClass:function(e,n,i,o,r){return t.effects.animateClass.call(this,{add:n,remove:e},i,o,r)}})}(),function(){function i(e,n,i,o){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(o=i,i=n,n={}),t.isFunction(i)&&(o=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=o||n.complete,e}function o(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data(n+e[i],t[0].style[e[i]])},restore:function(t,i){var o,r;for(r=0;r<i.length;r++)null!==i[r]&&(o=t.data(n+i[r]),o===e&&(o=""),t.css(i[r],o))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(s){r=document.body}return e.wrap(i),(e[0]===r||t.contains(e[0],r))&&t(r).focus(),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).focus()),e},setTransition:function(e,n,i,o){return o=o||{},t.each(n,function(t,n){var r=e.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])}),o}}),t.fn.extend({effect:function(){function e(e){function i(){t.isFunction(r)&&r.call(o[0]),t.isFunction(e)&&e()}var o=t(this),r=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):s.call(o[0],n,i)}var n=i.apply(this,arguments),o=n.mode,r=n.queue,s=t.effects.effect[n.effect];return t.fx.off||!s?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):r===!1?this.each(e):this.queue(r||"fx",e)},show:function(t){return function(e){if(o(e))return t.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(t.fn.show),hide:function(t){return function(e){if(o(e))return t.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(t.fn.hide),toggle:function(t){return function(e){if(o(e)||"boolean"==typeof e)return t.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?n(2*t)/2:1-n(-2*t+2)/2}})}()}(jQuery),function(t,e){var n=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(e,o){var r,s,a,l=t(this),c=["position","top","bottom","left","right","height","width"],u=t.effects.setMode(l,e.mode||"hide"),h=e.direction||"up",d=n.test(h),p=d?"height":"width",f=d?"top":"left",g=i.test(h),m={},v="show"===u;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),c):t.effects.save(l,c),l.show(),r=t.effects.createWrapper(l).css({overflow:"hidden"}),s=r[p](),a=parseFloat(r.css(f))||0,m[p]=v?s:0,g||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?a:s+a),v&&(r.css(p,0),g||r.css(f,a+s)),r.animate(m,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),t.effects.restore(l,c),t.effects.removeWrapper(l),o()}})}}(jQuery),function(t,e){t.effects.effect.bounce=function(e,n){var i,o,r,s=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(s,e.mode||"effect"),c="hide"===l,u="show"===l,h=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(u||c?1:0),g=e.duration/f,m=e.easing,v="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,b=s.queue(),_=b.length;for((u||c)&&a.push("opacity"),t.effects.save(s,a),s.show(),t.effects.createWrapper(s),d||(d=s["top"===v?"outerHeight":"outerWidth"]()/3),u&&(r={opacity:1},r[v]=0,s.css("opacity",0).css(v,y?2*-d:2*d).animate(r,g,m)),c&&(d/=Math.pow(2,p-1)),r={},r[v]=0,i=0;p>i;i++)o={},o[v]=(y?"-=":"+=")+d,s.animate(o,g,m).animate(r,g,m),d=c?2*d:d/2;c&&(o={opacity:0},o[v]=(y?"-=":"+=")+d,s.animate(o,g,m)),s.queue(function(){c&&s.hide(),t.effects.restore(s,a),t.effects.removeWrapper(s),n()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),s.dequeue()}}(jQuery),function(t,e){t.effects.effect.clip=function(e,n){var i,o,r,s=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(s,e.mode||"hide"),c="show"===l,u=e.direction||"vertical",h="vertical"===u,d=h?"height":"width",p=h?"top":"left",f={};t.effects.save(s,a),s.show(),i=t.effects.createWrapper(s).css({overflow:"hidden"}),o="IMG"===s[0].tagName?i:s,r=o[d](),c&&(o.css(d,0),o.css(p,r/2)),f[d]=c?r:0,f[p]=c?0:r/2,o.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){c||s.hide(),t.effects.restore(s,a),t.effects.removeWrapper(s),n()}})}}(jQuery),function(t,e){t.effects.effect.drop=function(e,n){var i,o=t(this),r=["position","top","bottom","left","right","opacity","height","width"],s=t.effects.setMode(o,e.mode||"hide"),a="show"===s,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",h={opacity:a?1:0};t.effects.save(o,r),o.show(),t.effects.createWrapper(o),i=e.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-i:i),h[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+i,o.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),n()}})}}(jQuery),function(t,e){t.effects.effect.explode=function(e,n){function i(){b.push(this),b.length===h*d&&o()}function o(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),n()}var r,s,a,l,c,u,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=h,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),y=Math.ceil(p.outerHeight()/h),b=[];for(r=0;h>r;r++)for(l=m.top+r*y,u=r-(h-1)/2,s=0;d>s;s++)a=m.left+s*v,c=s-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*v,top:-r*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(g?c*v:0),top:l+(g?u*y:0),opacity:g?0:1}).animate({left:a+(g?0:c*v),top:l+(g?0:u*y),opacity:g?1:0},e.duration||500,e.easing,i)}}(jQuery),function(t,e){t.effects.effect.fade=function(e,n){var i=t(this),o=t.effects.setMode(i,e.mode||"toggle");i.animate({opacity:o},{queue:!1,duration:e.duration,easing:e.easing,complete:n})}}(jQuery),function(t,e){t.effects.effect.fold=function(e,n){var i,o,r=t(this),s=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(r,e.mode||"hide"),l="show"===a,c="hide"===a,u=e.size||15,h=/([0-9]+)%/.exec(u),d=!!e.horizFirst,p=l!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(r,s),r.show(),i=t.effects.createWrapper(r).css({overflow:"hidden"}),o=p?[i.width(),i.height()]:[i.height(),i.width()],h&&(u=parseInt(h[1],10)/100*o[c?0:1]),l&&i.css(d?{height:0,width:u}:{height:u,width:0}),m[f[0]]=l?o[0]:u,v[f[1]]=l?o[1]:0,i.animate(m,g,e.easing).animate(v,g,e.easing,function(){c&&r.hide(),t.effects.restore(r,s),t.effects.removeWrapper(r),n()})}}(jQuery),function(t,e){t.effects.effect.highlight=function(e,n){var i=t(this),o=["backgroundImage","backgroundColor","opacity"],r=t.effects.setMode(i,e.mode||"show"),s={backgroundColor:i.css("backgroundColor")};"hide"===r&&(s.opacity=0),t.effects.save(i,o),i.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&i.hide(),t.effects.restore(i,o),n()}})}}(jQuery),function(t,e){t.effects.effect.pulsate=function(e,n){var i,o=t(this),r=t.effects.setMode(o,e.mode||"show"),s="show"===r,a="hide"===r,l=s||"hide"===r,c=2*(e.times||5)+(l?1:0),u=e.duration/c,h=0,d=o.queue(),p=d.length;for((s||!o.is(":visible"))&&(o.css("opacity",0).show(),h=1),i=1;c>i;i++)o.animate({opacity:h},u,e.easing),h=1-h;o.animate({opacity:h},u,e.easing),o.queue(function(){a&&o.hide(),n()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,c+1))),o.dequeue()}}(jQuery),function(t,e){t.effects.effect.puff=function(e,n){var i=t(this),o=t.effects.setMode(i,e.mode||"hide"),r="hide"===o,s=parseInt(e.percent,10)||150,a=s/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:o,complete:n,percent:r?s:100,from:r?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),i.effect(e)},t.effects.effect.scale=function(e,n){var i=t(this),o=t.extend(!0,{},e),r=t.effects.setMode(i,e.mode||"effect"),s=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===r?0:100),a=e.direction||"both",l=e.origin,c={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},u={y:"horizontal"!==a?s/100:1,x:"vertical"!==a?s/100:1};o.effect="size",o.queue=!1,o.complete=n,"effect"!==r&&(o.origin=l||["middle","center"],o.restore=!0),o.from=e.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===r&&(o.from.opacity=0,o.to.opacity=1),"hide"===r&&(o.from.opacity=1,o.to.opacity=0)),i.effect(o)},t.effects.effect.size=function(e,n){var i,o,r,s=t(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(s,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=s.css("position"),y=f?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&s.show(),i={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===e.mode&&"show"===p?(s.from=e.to||b,s.to=e.from||i):(s.from=e.from||("show"===p?b:i),s.to=e.to||("hide"===p?b:i)),r={from:{y:s.from.height/i.height,x:s.from.width/i.width},to:{y:s.to.height/i.height,x:s.to.width/i.width}},("box"===g||"both"===g)&&(r.from.y!==r.to.y&&(y=y.concat(h),s.from=t.effects.setTransition(s,h,r.from.y,s.from),s.to=t.effects.setTransition(s,h,r.to.y,s.to)),r.from.x!==r.to.x&&(y=y.concat(d),s.from=t.effects.setTransition(s,d,r.from.x,s.from),s.to=t.effects.setTransition(s,d,r.to.x,s.to))),("content"===g||"both"===g)&&r.from.y!==r.to.y&&(y=y.concat(u).concat(c),s.from=t.effects.setTransition(s,u,r.from.y,s.from),s.to=t.effects.setTransition(s,u,r.to.y,s.to)),t.effects.save(s,y),s.show(),t.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),m&&(o=t.effects.getBaseline(m,i),s.from.top=(i.outerHeight-s.outerHeight())*o.y,s.from.left=(i.outerWidth-s.outerWidth())*o.x,s.to.top=(i.outerHeight-s.to.outerHeight)*o.y,s.to.left=(i.outerWidth-s.to.outerWidth)*o.x),s.css(s.from),("content"===g||"both"===g)&&(h=h.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),c=a.concat(h).concat(d),s.find("*[width]").each(function(){var n=t(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};f&&t.effects.save(n,c),n.from={height:i.height*r.from.y,width:i.width*r.from.x,outerHeight:i.outerHeight*r.from.y,outerWidth:i.outerWidth*r.from.x},n.to={height:i.height*r.to.y,width:i.width*r.to.x,outerHeight:i.height*r.to.y,outerWidth:i.width*r.to.x},r.from.y!==r.to.y&&(n.from=t.effects.setTransition(n,h,r.from.y,n.from),n.to=t.effects.setTransition(n,h,r.to.y,n.to)),r.from.x!==r.to.x&&(n.from=t.effects.setTransition(n,d,r.from.x,n.from),n.to=t.effects.setTransition(n,d,r.to.x,n.to)),n.css(n.from),n.animate(n.to,e.duration,e.easing,function(){f&&t.effects.restore(n,c)})})),s.animate(s.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===p&&s.hide(),t.effects.restore(s,y),f||("static"===v?s.css({position:"relative",top:s.to.top,left:s.to.left}):t.each(["top","left"],function(t,e){s.css(e,function(e,n){var i=parseInt(n,10),o=t?s.to.left:s.to.top;return"auto"===n?o+"px":i+o+"px"})})),t.effects.removeWrapper(s),n()}})}}(jQuery),function(t,e){t.effects.effect.shake=function(e,n){var i,o=t(this),r=["position","top","bottom","left","right","height","width"],s=t.effects.setMode(o,e.mode||"effect"),a=e.direction||"left",l=e.distance||20,c=e.times||3,u=2*c+1,h=Math.round(e.duration/u),d="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,f={},g={},m={},v=o.queue(),y=v.length;for(t.effects.save(o,r),o.show(),t.effects.createWrapper(o),f[d]=(p?"-=":"+=")+l,g[d]=(p?"+=":"-=")+2*l,m[d]=(p?"-=":"+=")+2*l,o.animate(f,h,e.easing),i=1;c>i;i++)o.animate(g,h,e.easing).animate(m,h,e.easing);o.animate(g,h,e.easing).animate(f,h/2,e.easing).queue(function(){"hide"===s&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),n()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),o.dequeue()}}(jQuery),function(t,e){t.effects.effect.slide=function(e,n){var i,o=t(this),r=["position","top","bottom","left","right","width","height"],s=t.effects.setMode(o,e.mode||"show"),a="show"===s,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h={};t.effects.save(o,r),o.show(),i=e.distance||o["top"===c?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(i)?"-"+i:-i:i),h[c]=(a?u?"+=":"-=":u?"-=":"+=")+i,o.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),n()}})}}(jQuery),function(t,e){t.effects.effect.transfer=function(e,n){var i=t(this),o=t(e.to),r="fixed"===o.css("position"),s=t("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},h=i.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:h.top-a,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),n()})}}(jQuery),define("jqueryui",["jquery"],function(){}),function(t,e,n){function i(){o=e[a](function(){r.each(function(){var e=t(this),n=e.width(),i=e.height(),o=t.data(this,c);(n!==o.w||i!==o.h)&&e.trigger(l,[o.w=n,o.h=i])}),i()},s[u])}var o,r=t([]),s=t.resize=t.extend(t.resize,{}),a="setTimeout",l="resize",c=l+"-special-event",u="delay",h="throttleWindow";s[u]=250,s[h]=!0,t.event.special[l]={setup:function(){if(!s[h]&&this[a])return!1;var e=t(this);r=r.add(e),t.data(this,c,{w:e.width(),h:e.height()}),1===r.length&&i()},teardown:function(){if(!s[h]&&this[a])return!1;var e=t(this);r=r.not(e),e.removeData(c),r.length||clearTimeout(o)},add:function(e){function i(e,i,r){var s=t(this),a=t.data(this,c);a.w=i!==n?i:s.width(),a.h=r!==n?r:s.height(),o.apply(this,arguments)}if(!s[h]&&this[a])return!1;var o;return t.isFunction(e)?(o=e,i):(o=e.handler,void(e.handler=i))}}}(jQuery,this),define("jqueryresize",["jquery","jqueryui"],function(){}),!function(t,e){"use strict";function n(t,e){var n,i,o=t.toLowerCase();for(e=[].concat(e),n=0;n<e.length;n+=1)if(i=e[n]){if(i.test&&i.test(t))return!0;if(i.toLowerCase()===o)return!0}}var i=e.prototype.trim,o=e.prototype.trimRight,r=e.prototype.trimLeft,s=function(t){return 1*t||0},a=function(t,e){if(1>e)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n},l=[].slice,c=function(t){return null==t?"\\s":t.source?t.source:"["+f.escapeRegExp(t)+"]"},u={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},h={};for(var d in u)h[u[d]]=d;h["'"]="#39";var p=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var n=a,i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};return i.format=function(i,o){var r,s,a,l,c,u,h,d=1,f=i.length,g="",m=[];for(s=0;f>s;s++)if(g=t(i[s]),"string"===g)m.push(i[s]);else if("array"===g){if(l=i[s],l[2])for(r=o[d],a=0;a<l[2].length;a++){if(!r.hasOwnProperty(l[2][a]))throw new Error(p('[_.sprintf] property "%s" does not exist',l[2][a]));r=r[l[2][a]]}else r=l[1]?o[l[1]]:o[d++];if(/[^s]/.test(l[8])&&"number"!=t(r))throw new Error(p("[_.sprintf] expecting number but found %s",t(r)));switch(l[8]){case"b":r=r.toString(2);break;case"c":r=e.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=l[7]?r.toExponential(l[7]):r.toExponential();break;case"f":r=l[7]?parseFloat(r).toFixed(l[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=e(r))&&l[7]?r.substring(0,l[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(l[8])&&l[3]&&r>=0?"+"+r:r,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",h=l[6]-e(r).length,c=l[6]?n(u,h):"",m.push(l[5]?r+c:c+r)}return m.join("")},i.cache={},i.parse=function(t){for(var e=t,n=[],i=[],o=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){o|=1;var r=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(r.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))r.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");r.push(a[1])}n[2]=r}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");i.push(n)}e=e.substring(n[0].length)}return i},i}(),f={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":e(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":e(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,n){return null==t?[]:(t=e(t),n=~~n,n>0?t.match(new RegExp(".{1,"+n+"}","g")):[t])},clean:function(t){return f.strip(t).replace(/\s+/g," ")},count:function(t,n){if(null==t||null==n)return 0;t=e(t),n=e(n);for(var i=0,o=0,r=n.length;;){if(o=t.indexOf(n,o),-1===o)break;i++,o+=r}return i},chars:function(t){return null==t?[]:e(t).split("")},swapCase:function(t){return null==t?"":e(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":e(t).replace(/[&<>"']/g,function(t){return"&"+h[t]+";"})},unescapeHTML:function(t){return null==t?"":e(t).replace(/\&([^;]+);/g,function(t,n){var i;return n in u?u[n]:(i=n.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(i[1],16)):(i=n.match(/^#(\d+)$/))?e.fromCharCode(~~i[1]):t})},escapeRegExp:function(t){return null==t?"":e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,n,i){var o=f.chars(t);return o.splice(~~e,~~n,i),o.join("")},insert:function(t,e,n){return f.splice(t,e,0,n)},include:function(t,n){return""===n?!0:null==t?!1:-1!==e(t).indexOf(n)},join:function(){var t=l.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:e(t).split("\n")},reverse:function(t){return f.chars(t).reverse().join("")},startsWith:function(t,n){return""===n?!0:null==t||null==n?!1:(t=e(t),n=e(n),t.length>=n.length&&t.slice(0,n.length)===n)},endsWith:function(t,n){return""===n?!0:null==t||null==n?!1:(t=e(t),n=e(n),t.length>=n.length&&t.slice(t.length-n.length)===n)},succ:function(t){return null==t?"":(t=e(t),t.slice(0,-1)+e.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":(t=e(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},camelize:function(t){return f.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return f.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return f.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return f.titleize(e(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return f.capitalize(f.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,n){return null==t?"":!n&&i?i.call(t):(n=c(n),e(t).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(t,n){return null==t?"":!n&&r?r.call(t):(n=c(n),e(t).replace(new RegExp("^"+n+"+"),""))},rtrim:function(t,n){return null==t?"":!n&&o?o.call(t):(n=c(n),e(t).replace(new RegExp(n+"+$"),""))},truncate:function(t,n,i){return null==t?"":(t=e(t),i=i||"...",n=~~n,t.length>n?t.slice(0,n)+i:t)},prune:function(t,n,i){if(null==t)return"";if(t=e(t),n=~~n,i=null!=i?e(i):"...",t.length<=n)return t;var o=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},r=t.slice(0,n+1).replace(/.(?=\W*\w*$)/g,o);return r=r.slice(r.length-2).match(/\w\w/)?r.replace(/\s*\S+$/,""):f.rtrim(r.slice(0,r.length-1)),(r+i).length>t.length?t:t.slice(0,r.length)+i},words:function(t,e){return f.isBlank(t)?[]:f.trim(t,e).split(e||/\s+/)},pad:function(t,n,i,o){t=null==t?"":e(t),n=~~n;var r=0;switch(i?i.length>1&&(i=i.charAt(0)):i=" ",o){case"right":return r=n-t.length,t+a(i,r);case"both":return r=n-t.length,a(i,Math.ceil(r/2))+t+a(i,Math.floor(r/2));default:return r=n-t.length,a(i,r)+t}},lpad:function(t,e,n){return f.pad(t,e,n)},rpad:function(t,e,n){return f.pad(t,e,n,"right")},lrpad:function(t,e,n){return f.pad(t,e,n,"both")},sprintf:p,vsprintf:function(t,e){return e.unshift(t),p.apply(null,e)},toNumber:function(t,e){return t?(t=f.trim(t),t.match(/^-?\d+(?:\.\d+)?$/)?s(s(t).toFixed(~~e)):NaN):0},numberFormat:function(t,e,n,i){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),i="string"==typeof i?i:",";var o=t.split("."),r=o[0],s=o[1]?(n||".")+o[1]:"";return r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+i)+s},strRight:function(t,n){if(null==t)return"";t=e(t),n=null!=n?e(n):n;var i=n?t.indexOf(n):-1;return~i?t.slice(i+n.length,t.length):t},strRightBack:function(t,n){if(null==t)return"";t=e(t),n=null!=n?e(n):n;var i=n?t.lastIndexOf(n):-1;return~i?t.slice(i+n.length,t.length):t},strLeft:function(t,n){if(null==t)return"";t=e(t),n=null!=n?e(n):n;var i=n?t.indexOf(n):-1;return~i?t.slice(0,i):t},strLeftBack:function(t,e){if(null==t)return"";t+="",e=null!=e?""+e:e;var n=t.lastIndexOf(e);return~n?t.slice(0,n):t},toSentence:function(t,e,n,i){e=e||", ",n=n||" and ";var o=t.slice(),r=o.pop();return t.length>2&&i&&(n=f.rtrim(e)+n),o.length?o.join(e)+n+r:r},toSentenceSerial:function(){var t=l.call(arguments);return t[3]=!0,f.toSentence.apply(f,t)},slugify:function(t){if(null==t)return"";var n="ÄÃ Ã¡Ã¤Ã¢Ã£Ã¥Ã¦ÄÄÄÃ¨Ã©Ã«ÃªÃ¬Ã­Ã¯Ã®ÅÅÃ²Ã³Ã¶Ã´ÃµÃ¸ÅÈÈÃ¹ÃºÃ¼Ã»Ã±Ã§Å¼Åº",i="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",o=new RegExp(c(n),"g");return t=e(t).toLowerCase().replace(o,function(t){var e=n.indexOf(t);return i.charAt(e)||"-"}),f.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return f.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,n,i){if(null==t)return"";if(n=~~n,null==i)return a(e(t),n);for(var o=[];n>0;o[--n]=t);return o.join(i)},naturalCmp:function(t,n){if(t==n)return 0;if(!t)return-1;if(!n)return 1;for(var i=/(\.\d+)|(\d+)|(\D+)/g,o=e(t).toLowerCase().match(i),r=e(n).toLowerCase().match(i),s=Math.min(o.length,r.length),a=0;s>a;a++){var l=o[a],c=r[a];if(l!==c){var u=parseInt(l,10);if(!isNaN(u)){var h=parseInt(c,10);if(!isNaN(h)&&u-h)return u-h}return c>l?-1:1}}return o.length===r.length?o.length-r.length:n>t?-1:1},levenshtein:function(t,n){if(null==t&&null==n)return 0;if(null==t)return e(n).length;if(null==n)return e(t).length;t=e(t),n=e(n);for(var i,o,r=[],s=0;s<=n.length;s++)for(var a=0;a<=t.length;a++)o=s&&a?t.charAt(a-1)===n.charAt(s-1)?i:Math.min(r[a],r[a-1],i)+1:s+a,i=r[a],r[a]=o;return r.pop()},toBoolean:function(t,e,i){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=f.trim(t),n(t,e||["true","1"])?!0:n(t,i||["false","0"])?!1:void 0)}};f.strip=f.trim,f.lstrip=f.ltrim,f.rstrip=f.rtrim,f.center=f.lrpad,f.rjust=f.lpad,f.ljust=f.rpad,f.contains=f.include,f.q=f.quote,f.toBool=f.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=f),exports._s=f),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return f}),t._=t._||{},t._.string=t._.str=f}(this,String),define("underscorestring",["underscore"],function(){});var Kinetic={};!function(){Kinetic={version:"5.0.1",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,UA:function(){var t=navigator.userAgent.toLowerCase(),e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(),Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},Layer:function(t){this.___init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var n=this.names[t];if(void 0!==n){for(var i=0;i<n.length;i++){var o=n[i];o._id===e&&n.splice(i,1)}0===n.length&&delete this.names[t]}}}}}(),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("kinetic",e):t.returnExports=e()}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,n=0;for(this.length=e;e>n;n++)this[n]=t[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;n>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,n=new Kinetic.Collection,i=t.length;for(e=0;i>e;e++)n.push(t[e]);return n},Kinetic.Collection.mapMethods=function(t){var e,n=t.prototype;for(e in n)!function(t){Kinetic.Collection.prototype[t]=function(){var e,n=this.length;for(args=[].slice.call(arguments),e=0;n>e;e++)this[e][t].apply(this[e],args);return this}}(e)},Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},scale:function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,o=this.m[1]*e+this.m[3]*n,r=this.m[0]*-n+this.m[2]*e,s=this.m[1]*-n+this.m[3]*e;this.m[0]=i,this.m[1]=o,this.m[2]=r,this.m[3]=s},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=r},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=s},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,o=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=s},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var n=this.m[0],i=this.m[1],o=this.m[2],r=this.m[3],s=this.m[4],a=this.m[5],l=(n*(e-a)-i*(t-s))/(n*r-i*o),c=(t-s-o*l)/n;this.translate(c,l)}};var t="canvas",e="2d",n="[object Array]",i="[object Number]",o="[object String]",r=Math.PI/180,s=180/Math.PI,a="#",l="",c="0",u="Kinetic warning: ",h="Kinetic error: ",d="rgb(",p={aqua:[0,255,255],lime:[0,255,0],
silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},f=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==n},_isNumber:function(t){return Object.prototype.toString.call(t)==i},_isString:function(t){return Object.prototype.toString.call(t)==o},_hasMethods:function(t){var e,n=[];for(e in t)this._isFunction(t[e])&&n.push(e);return n.length>0},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var e,n,i=[],o=t.length,r=Kinetic.Util;for(e=0;o>e;e++)n=t[e],r._isNumber(n)?n=Math.round(1e3*n)/1e3:r._isString(n)||(n=n.toString()),i.push(n);return i},_getImage:function(n,i){var o,r;n?this._isElement(n)?i(n):this._isString(n)?(o=new Image,o.onload=function(){i(o)},o.src=n):n.data?(r=document.createElement(t),r.width=n.width,r.height=n.height,_context=r.getContext(e),_context.putImageData(n,0,0),this._getImage(r.toDataURL(),i)):i(null):i(null)},_getRGBAString:function(t){var e=t.red||0,n=t.green||0,i=t.blue||0,o=t.alpha||1;return["rgba(",e,",",n,",",i,",",o,")"].join(l)},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(a,l);var e=parseInt(t,16);return{r:255&e>>16,g:255&e>>8,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=c+t;return a+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in p?(e=p[t],{r:e[0],g:e[1],b:e[2]}):t[0]===a?this._hexToRgb(t.substring(1)):t.substr(0,4)===d?(e=f.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var n=this._clone(e);for(var i in t)n[i]=this._isObject(t[i])?this._merge(t[i],n[i]):t[i];return n},cloneObject:function(t){var e={};for(var n in t)e[n]=this._isObject(t[n])?this._clone(t[n]):t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*r},_radToDeg:function(t){return t*s},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error(h+t)},warn:function(t){window.console&&console.warn&&console.warn(u+t)},extend:function(t,e){for(var n in e.prototype)n in t.prototype||(t.prototype[n]=e.prototype[n])},addMethods:function(t,e){var n;for(n in e)t.prototype[n]=e[n]},_getControlPoints:function(t,e,n,i,o,r,s){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-i,2)),c=s*a/(a+l),u=s*l/(a+l),h=n-c*(o-t),d=i-c*(r-e),p=n+u*(o-t),f=i+u*(r-e);return[h,d,p,f]},_expandPoints:function(t,e){var n,i,o=t.length,r=[];for(n=2;o-2>n;n+=2)i=Kinetic.Util._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),r.push(i[0]),r.push(i[1]),r.push(t[n]),r.push(t[n+1]),r.push(i[2]),r.push(i[3]);return r},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,o=n/i;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.pixelRatio||Kinetic.pixelRatio||o;this.pixelRatio=e,this._canvas=document.createElement("canvas"),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(i){return Kinetic.Util.warn("Unable to get data URL. "+i.message),""}}}},Kinetic.SceneCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.SceneContext(this),this.setSize(e,n)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),n.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),n.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.HitContext(this),this.setSize(e,n)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t=",",e="(",n=")",i="([",o="])",r=";",s="()",a="=",l=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(l){var c,u,h,d,p=this.traceArr,f=p.length,g="";for(c=0;f>c;c++)u=p[c],h=u.method,h?(d=u.args,g+=h,g+=l?s:Kinetic.Util._isArray(d[0])?i+d.join(t)+o:e+d.join(t)+n):(g+=u.property,l||(g+=a+u.val)),g+=r;return g},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,n=this.traceArr;n.push(t),e=n.length,e>=Kinetic.traceArrMax&&n.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},_applyTransform:function(t){var e,n=t.getTransformsEnabled();"all"===n?(e=t.getAbsoluteTransform().getMatrix(),this.transform(e[0],e[1],e[2],e[3],e[4],e[5])):"position"===n&&this.translate(t.getX(),t.getY())},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,n=this,i=l.length,o=Kinetic.Util._simplifyArray,r=this.setAttr;for(t=0;i>t;t++)!function(t){var i,r=n[t];n[t]=function(){return e=o(Array.prototype.slice.call(arguments,0)),i=r.apply(n,arguments),n._trace({method:t,args:e}),i}}(l[t]);n.setAttr=function(){r.apply(n,arguments),n._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),n=t.getFillPatternX(),i=t.getFillPatternY(),o=t.getFillPatternScale(),r=t.getFillPatternRotation(),s=t.getFillPatternOffset(),a=t.getFillPatternRepeat();(n||i)&&this.translate(n||0,i||0),r&&this.rotate(r),o&&this.scale(o.x,o.y),s&&this.translate(-1*s.x,-1*s.y),this.setAttr("fillStyle",this.createPattern(e,a||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),n=t.getFillLinearGradientEndPoint(),i=t.getFillLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var r=0;r<i.length;r+=2)o.addColorStop(i[r],i[r+1]);this.setAttr("fillStyle",o),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),n=t.getFillRadialGradientEndPoint(),i=t.getFillRadialGradientStartRadius(),o=t.getFillRadialGradientEndRadius(),r=t.getFillRadialGradientColorStops(),s=this.createRadialGradient(e.x,e.y,i,n.x,n.y,o),a=0;a<r.length;a+=2)s.addColorStop(r[a],r[a+1]);this.setAttr("fillStyle",s),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),n=t.getFillPatternImage(),i=t.getFillLinearGradientColorStops(),o=t.getFillRadialGradientColorStops(),r=t.getFillPriority();e&&"color"===r?this._fillColor(t):n&&"pattern"===r?this._fillPattern(t):i&&"linear-gradient"===r?this._fillLinearGradient(t):o&&"radial-gradient"===r?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();t.hasStroke()&&(n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),n||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,n=t.getAbsoluteOpacity(),i=e.get(t.getShadowColor(),"black"),o=e.get(t.getShadowBlur(),5),r=e.get(t.getShadowOpacity(),0),s=e.get(t.getShadowOffset(),{x:0,y:0});r&&this.setAttr("globalAlpha",r*n),this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o),this.setAttr("shadowOffsetX",s.x),this.setAttr("shadowOffsetY",s.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var t="get",e="set";Kinetic.Factory={addGetterSetter:function(t,e,n,i,o){this.addGetter(t,e,n),this.addSetter(t,e,i,o),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,n,i){var o=t+Kinetic.Util._capitalize(n);e.prototype[o]=function(){var t=this.attrs[n];return void 0===t?i:t}},addSetter:function(t,n,i,o){var r=e+Kinetic.Util._capitalize(n);t.prototype[r]=function(t){return i&&(t=i.call(this,t)),this._setAttr(n,t),o&&o.call(this),this}},addComponentsGetterSetter:function(n,i,o,r,s){var a,l,c=o.length,u=Kinetic.Util._capitalize,h=t+u(i),d=e+u(i);n.prototype[h]=function(){var t={};for(a=0;c>a;a++)l=o[a],t[l]=this.getAttr(i+u(l));return t},n.prototype[d]=function(t){var e,n=this.attrs[i];r&&(t=r.call(this,t));for(e in t)this._setAttr(i+u(e),t[e]);return this._fireChangeEvent(i,n,t),s&&s.call(this),this},this.addOverloadedGetterSetter(n,i)},addOverloadedGetterSetter:function(n,i){var o=Kinetic.Util._capitalize(i),r=e+o,s=t+o;n.prototype[i]=function(){return arguments.length?(this[r](arguments[0]),this):this[s]()}},backCompat:function(t,e){var n;for(n in e)t.prototype[n]=t.prototype[e[n]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return t>255?255:0>t?0:Math.round(t)},alphaComponent:function(t){return t>1?1:1e-4>t?1e-4:t}}}(),function(){var t="absoluteOpacity",e="absoluteTransform",n="before",i="Change",o="children",r=".",s="",a="get",l="id",c="kinetic",u="listening",h="mouseenter",d="mouseleave",p="name",f="set",g="Shape",m=" ",v="stage",y="transform",b="Stage",_="visible",w=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(m);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(n){var i=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(n),this.on(w,function(){this._clearCache(y),i._clearSelfAndDescendantCache(e)}),this.on("visibleChange.kinetic",function(){i._clearSelfAndDescendantCache(_)}),this.on("listeningChange.kinetic",function(){i._clearSelfAndDescendantCache(u)}),this.on("opacityChange.kinetic",function(){i._clearSelfAndDescendantCache(t)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var n=this._cache[t];return void 0===n&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e,n=t||{},i=n.x||0,o=n.y||0,r=n.width||this.width(),s=n.height||this.height(),a=n.drawBorder||!1,l=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:s}),c=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:s}),u=new Kinetic.HitCanvas({width:r,height:s}),h=this.transformsEnabled(),d=this.x(),p=this.y();return this.clearCache(),this.transformsEnabled("position"),this.x(-1*i),this.y(-1*o),this.drawScene(l),this.drawHit(u),a&&(e=l.getContext(),e.save(),e.beginPath(),e.rect(0,0,r,s),e.closePath(),e.setAttr("strokeStyle","red"),e.setAttr("lineWidth",5),e.stroke(),e.restore()),this.x(d),this.y(p),this.transformsEnabled(h),this._cache.canvas={scene:l,filter:c,hit:u},this},_drawCachedSceneCanvas:function(t){t.save(),t._applyTransform(this),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,n,i,o=this.filters(),r=this._cache.canvas,s=r.scene,a=r.filter,l=a.getContext();if(o){if(!this._filterUpToDate){try{for(t=o.length,l.clear(),l.drawImage(s._canvas,0,0),e=l.getImageData(0,0,a.getWidth(),a.getHeight()),n=0;t>n;n++)i=o[n],i.call(this,e),l.putImageData(e,0,0)}catch(c){Kinetic.Util.warn("Unable to apply filter. "+c.message)}this._filterUpToDate=!0}return a}return s},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,n=e.hit;t.save(),t._applyTransform(this),t.drawImage(n._canvas,0,0),t.restore()},on:function(t,e){var n,i,o,a,l,c=t.split(m),u=c.length;for(n=0;u>n;n++)i=c[n],o=i.split(r),a=o[0],l=o[1]||s,this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:e});return this},off:function(t){var e,n,i,o,s,a,l=t.split(m),c=l.length;for(e=0;c>e;e++)if(i=l[e],o=i.split(r),s=o[0],a=o[1],s)this.eventListeners[s]&&this._off(s,a);else for(n in this.eventListeners)this._off(n,a);return this},remove:function(){var n=this.getParent();return n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(t),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=a+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,n;if(t)for(e in t)e===o||(n=f+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(u,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?e?e.isListening():!0:t},isVisible:function(){return this._getCache(_,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?e?e.isVisible():!0:t},shouldDrawHit:function(){var t=this.getLayer();return t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(l){for(e=[],n=l.length,i=0;n>i;i++)o=l[i],a++,o.nodeType!==g&&(e=e.concat(o.getChildren().toArray())),o._id===s._id&&(i=n);e.length>0&&e[0].getDepth()<=r&&t(e)}var e,n,i,o,r=this.getDepth(),s=this,a=0;return s.nodeType!==b&&t(s.getStage().getChildren()),a},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,n=this.offset();return e.m=t.slice(),e.translate(n.x,n.y),e.getTranslation()},setAbsolutePosition:function(t){var e,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(n),this},_setTransform:function(t){var n;for(n in t)this.attrs[n]=t[n];this._clearCache(y),this._clearSelfAndDescendantCache(e)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(y),this._clearSelfAndDescendantCache(e),t},move:function(t){var e=t.x,n=t.y,i=this.getX(),o=this.getY();return void 0!==e&&(i+=e),void 0!==n&&(o+=n),this.setPosition({x:i,y:o}),this},_eachAncestorReverse:function(t,e){var n,i,o=[],r=this.getParent();for(e&&o.unshift(this);r;)o.unshift(r),r=r.parent;for(n=o.length,i=0;n>i;i++)t(o[i])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(t,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,n,i,o=Kinetic.Util,r={},s=this.getAttrs();r.attrs={};for(t in s)e=s[t],o._isFunction(e)||o._isElement(e)||o._isObject(e)&&o._hasMethods(e)||(n=this[t],delete s[t],i=n?n.call(this):null,s[t]=e,i!==e&&(r.attrs[t]=e));return r.className=this.getClassName(),r},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(v,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,n){return n?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(){return this._getCache(e,this._getAbsoluteTransform)},_getAbsoluteTransform:function(){var t,e,n=new Kinetic.Transform;return this._eachAncestorReverse(function(i){t=i.transformsEnabled(),e=i.getTransform(),"all"===t?n.multiply(e):"position"===t&&n.translate(i.x(),i.y())},!0),n},getTransform:function(){return this._getCache(y,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),n=this.getY(),i=this.getRotation()*Math.PI/180,o=this.getScaleX(),r=this.getScaleY(),s=this.getSkewX(),a=this.getSkewY(),l=this.getOffsetX(),c=this.getOffsetY();return(0!==e||0!==n)&&t.translate(e,n),0!==i&&t.rotate(i),(0!==s||0!==a)&&t.skew(s,a),(1!==o||1!==r)&&t.scale(o,r),(0!==l||0!==c)&&t.translate(-1*l,-1*c),t},clone:function(t){var e,n,i,o,r,s=this.getClassName(),a=new Kinetic[s](this.attrs);for(e in this.eventListeners)for(n=this.eventListeners[e],i=n.length,o=0;i>o;o++)r=n[o],r.name.indexOf(c)<0&&(a.eventListeners[e]||(a.eventListeners[e]=[]),a.eventListeners[e].push(r));return a.setAttrs(t),a},toDataURL:function(t){t=t||{};var e=t.mimeType||null,n=t.quality||null,i=this.getStage(),o=t.x||0,r=t.y||0,s=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(i?i.getWidth():0),height:t.height||this.getHeight()||(i?i.getHeight():0),pixelRatio:1}),a=s.getContext();return a.save(),(o||r)&&a.translate(-1*o,-1*r),this.drawScene(s),a.restore(),s.toDataURL(e,n)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var n,i,o=this.eventListeners[t];for(n=0;n<o.length;n++)if(i=o[n].name,!("kinetic"===i&&"kinetic"!==e||e&&i!==e)){if(o.splice(n,1),0===o.length){delete this.eventListeners[t];break}n--}},_fireBeforeChangeEvent:function(t,e,o){this._fire([n,Kinetic.Util._capitalize(t),i].join(s),{oldVal:e,newVal:o})},_fireChangeEvent:function(t,e,n){this._fire(t+i,{oldVal:e,newVal:n})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr(l,t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr(p,t),this},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=t[1],i=f+Kinetic.Util._capitalize(e),o=this[i];return Kinetic.Util._isFunction(o)?o.call(this,n):this._setAttr(e,n),this},_setAttr:function(t,e){var n;void 0!==e&&(n=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,n,e))},_setComponentAttr:function(t,e,n){var i;void 0!==n&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))},_fireAndBubble:function(t,e,n){var i=!0;e&&this.nodeType===g&&(e.targetNode=this),t===h&&n&&this._id===n._id?i=!1:t===d&&n&&this._id===n._id&&(i=!1),i&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var n,i=this.eventListeners[t];if(i)for(n=0;n<i.length;n++)i[n].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var n,i,o,r=Kinetic.Node.prototype.getClassName.call(t),s=t.children;if(e&&(t.attrs.container=e),n=new Kinetic[r](t.attrs),s)for(i=s.length,o=0;i>o;o++)n.add(this._createNode(s[o]));return n},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(t){var e,n,i=t.data,o=i.length;for(e=0;o>e;e+=4)n=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e]=n,i[e+1]=n,i[e+2]=n}}(),function(){Kinetic.Filters.Brighten=function(t){var e,n=255*this.brightness(),i=t.data,o=i.length;for(e=0;o>e;e+=4)i[e]+=n,i[e+1]+=n,i[e+2]+=n},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(t){var e,n=t.data,i=n.length;for(e=0;i>e;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,o){var r,s,a,l,c,u,h,d,p,f,g,m,v,y,b,_,w,x,C,k,S,T,E,M,D=e.data,P=e.width,A=e.height,I=o+o+1,R=P-1,O=A-1,F=o+1,N=F*(F+1)/2,z=new t,L=null,H=z,$=null,K=null,B=n[o],q=i[o];for(a=1;I>a;a++)H=H.next=new t,a==F&&(L=H);for(H.next=z,h=u=0,s=0;A>s;s++){for(_=w=x=C=d=p=f=g=0,m=F*(k=D[u]),v=F*(S=D[u+1]),y=F*(T=D[u+2]),b=F*(E=D[u+3]),d+=N*k,p+=N*S,f+=N*T,g+=N*E,H=z,a=0;F>a;a++)H.r=k,H.g=S,H.b=T,H.a=E,H=H.next;for(a=1;F>a;a++)l=u+((a>R?R:a)<<2),d+=(H.r=k=D[l])*(M=F-a),p+=(H.g=S=D[l+1])*M,f+=(H.b=T=D[l+2])*M,g+=(H.a=E=D[l+3])*M,_+=k,w+=S,x+=T,C+=E,H=H.next;for($=z,K=L,r=0;P>r;r++)D[u+3]=E=g*B>>q,0!==E?(E=255/E,D[u]=(d*B>>q)*E,D[u+1]=(p*B>>q)*E,D[u+2]=(f*B>>q)*E):D[u]=D[u+1]=D[u+2]=0,d-=m,p-=v,f-=y,g-=b,m-=$.r,v-=$.g,y-=$.b,b-=$.a,l=h+((l=r+o+1)<R?l:R)<<2,_+=$.r=D[l],w+=$.g=D[l+1],x+=$.b=D[l+2],C+=$.a=D[l+3],d+=_,p+=w,f+=x,g+=C,$=$.next,m+=k=K.r,v+=S=K.g,y+=T=K.b,b+=E=K.a,_-=k,w-=S,x-=T,C-=E,K=K.next,u+=4;h+=P}for(r=0;P>r;r++){for(w=x=C=_=p=f=g=d=0,u=r<<2,m=F*(k=D[u]),v=F*(S=D[u+1]),y=F*(T=D[u+2]),b=F*(E=D[u+3]),d+=N*k,p+=N*S,f+=N*T,g+=N*E,H=z,a=0;F>a;a++)H.r=k,H.g=S,H.b=T,H.a=E,H=H.next;for(c=P,a=1;o>=a;a++)u=c+r<<2,d+=(H.r=k=D[u])*(M=F-a),p+=(H.g=S=D[u+1])*M,f+=(H.b=T=D[u+2])*M,g+=(H.a=E=D[u+3])*M,_+=k,w+=S,x+=T,C+=E,H=H.next,O>a&&(c+=P);for(u=r,$=z,K=L,s=0;A>s;s++)l=u<<2,D[l+3]=E=g*B>>q,E>0?(E=255/E,D[l]=(d*B>>q)*E,D[l+1]=(p*B>>q)*E,D[l+2]=(f*B>>q)*E):D[l]=D[l+1]=D[l+2]=0,d-=m,p-=v,f-=y,g-=b,m-=$.r,v-=$.g,y-=$.b,b-=$.a,l=r+((l=s+F)<O?l:O)*P<<2,d+=_+=$.r=D[l],p+=w+=$.g=D[l+1],f+=x+=$.b=D[l+2],g+=C+=$.a=D[l+3],$=$.next,m+=k=K.r,v+=S=K.g,y+=T=K.b,b+=E=K.a,_-=k,w-=S,x-=T,C-=E,K=K.next,u+=P}}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];
Kinetic.Filters.Blur=function(t){var n=0|this.blurRadius();n>0&&e(t,n)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,n){var i=4*(n*t.width+e),o=[];return o.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),o}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function n(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function i(i,o){var r=t(i,0,0),s=t(i,i.width-1,0),a=t(i,0,i.height-1),l=t(i,i.width-1,i.height-1),c=o||10;if(e(r,s)<c&&e(s,l)<c&&e(l,a)<c&&e(a,r)<c){for(var u=n([s,r,l,a]),h=[],d=0;d<i.width*i.height;d++){var p=e(u,[i.data[4*d],i.data[4*d+1],i.data[4*d+2]]);h[d]=c>p?0:255}return h}}function o(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function r(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),s=[],a=0;n>a;a++)for(var l=0;e>l;l++){for(var c=a*e+l,u=0,h=0;o>h;h++)for(var d=0;o>d;d++){var p=a+h-r,f=l+d-r;if(p>=0&&n>p&&f>=0&&e>f){var g=p*e+f,m=i[h*o+d];u+=t[g]*m}}s[c]=2040===u?255:0}return s}function s(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),s=[],a=0;n>a;a++)for(var l=0;e>l;l++){for(var c=a*e+l,u=0,h=0;o>h;h++)for(var d=0;o>d;d++){var p=a+h-r,f=l+d-r;if(p>=0&&n>p&&f>=0&&e>f){var g=p*e+f,m=i[h*o+d];u+=t[g]*m}}s[c]=u>=1020?255:0}return s}function a(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),s=[],a=0;n>a;a++)for(var l=0;e>l;l++){for(var c=a*e+l,u=0,h=0;o>h;h++)for(var d=0;o>d;d++){var p=a+h-r,f=l+d-r;if(p>=0&&n>p&&f>=0&&e>f){var g=p*e+f,m=i[h*o+d];u+=t[g]*m}}s[c]=u}return s}Kinetic.Filters.Mask=function(t){var e=this.threshold(),n=i(t,e);return n&&(n=r(n,t.width,t.height),n=s(n,t.width,t.height),n=a(n,t.width,t.height),o(t,n)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(t){var e,n,i=t.data,o=i.length,r=this.red(),s=this.green(),a=this.blue();for(e=0;o>e;e+=4)n=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255,i[e]=n*r,i[e+1]=n*s,i[e+2]=n*a,i[e+3]=i[e+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(t){var e,n,i,o,r,s=t.data,a=s.length,l=this.value(),c=this.saturation(),u=Math.abs(this.hue()+360)%360,h=l*c*Math.cos(u*Math.PI/180),d=l*c*Math.sin(u*Math.PI/180),p=.299*l+.701*h+.167*d,f=.587*l-.587*h+.33*d,g=.114*l-.114*h-.497*d,m=.299*l-.299*h-.328*d,v=.587*l+.413*h+.035*d,y=.114*l-.114*h+.293*d,b=.299*l-.3*h+1.25*d,_=.587*l-.586*h-1.05*d,w=.114*l+.886*h-.2*d;for(e=0;a>e;e+=4)n=s[e+0],i=s[e+1],o=s[e+2],r=s[e+3],s[e+0]=p*n+f*i+g*o,s[e+1]=m*n+v*i+y*o,s[e+2]=b*n+_*i+w*o,s[e+3]=r},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",1,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",1,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),o=this.embossBlend(),r=0,s=0,a=t.data,l=t.width,c=t.height,u=4*l,h=c;switch(i){case"top-left":r=-1,s=-1;break;case"top":r=-1,s=0;break;case"top-right":r=-1,s=1;break;case"right":r=0,s=1;break;case"bottom-right":r=1,s=1;break;case"bottom":r=1,s=0;break;case"bottom-left":r=1,s=-1;break;case"left":r=0,s=-1}do{var d=(h-1)*u,p=r;1>h+p&&(p=0),h+p>c&&(p=0);var f=4*(h-1+p)*l,g=l;do{var m=d+4*(g-1),v=s;1>g+v&&(v=0),g+v>l&&(v=0);var y=f+4*(g-1+v),b=a[m]-a[y],_=a[m+1]-a[y+1],w=a[m+2]-a[y+2],x=b,C=x>0?x:-x,k=_>0?_:-_,S=w>0?w:-w;if(k>C&&(x=_),S>C&&(x=w),x*=e,o){var T=a[m]+x,E=a[m+1]+x,M=a[m+2]+x;a[m]=T>255?255:0>T?0:T,a[m+1]=E>255?255:0>E?0:E,a[m+2]=M>255?255:0>M?0:M}else{var D=n-x;0>D?D=0:D>255&&(D=255),a[m]=a[m+1]=a[m+2]=D}}while(--g)}while(--h)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,n,i,o){var r,s=n-e,a=o-i;return 0===s?i+a/2:0===a?i:(r=(t-e)/s,r=a*r+i)}Kinetic.Filters.Enhance=function(e){var n,i,o,r,s=e.data,a=s.length,l=s[0],c=l,u=s[1],h=u,d=s[2],p=d,f=s[3],g=f,m=this.enhance();if(0!==m){for(r=0;a>r;r+=4)n=s[r+0],l>n?l=n:n>c&&(c=n),i=s[r+1],u>i?u=i:i>h&&(h=i),o=s[r+2],d>o?d=o:o>p&&(p=o);c===l&&(c=255,l=0),h===u&&(h=255,u=0),p===d&&(p=255,d=0),g===f&&(g=255,f=0);var v,y,b,_,w,x,C,k,S,T,E,M;for(m>0?(y=c+m*(255-c),b=l-m*(l-0),w=h+m*(255-h),x=u-m*(u-0),k=p+m*(255-p),M=d-m*(d-0),E=g+m*(255-g),S=f-m*(f-0)):(v=.5*(c+l),y=c+m*(c-v),b=l+m*(l-v),_=.5*(h+u),w=h+m*(h-_),x=u+m*(u-_),C=.5*(p+d),k=p+m*(p-C),M=d+m*(d-C),T=.5*(g+f),E=g+m*(g-T),S=f+m*(f-T)),r=0;a>r;r+=4)s[r+0]=t(s[r+0],l,c,b,y),s[r+1]=t(s[r+1],u,h,x,w),s[r+2]=t(s[r+2],d,p,M,k)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,i=t.data,o=i.length,r=255/n;for(e=0;o>e;e+=1)i[e]=Math.floor(i[e]/r)*r},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(t){var e,n=255*this.noise(),i=t.data,o=i.length,r=n/2;for(e=0;o>e;e+=4)i[e+0]+=r-2*r*Math.random(),i[e+1]+=r-2*r*Math.random(),i[e+2]+=r-2*r*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(t){var e,n,i,o,r,s,a,l,c,u,h,d,p,f,g=Math.ceil(this.pixelSize()),m=t.width,v=t.height,t=t.data,y=Math.ceil(m/g),b=Math.ceil(v/g);for(d=0;y>d;d+=1)for(p=0;b>p;p+=1){for(o=0,r=0,s=0,a=0,l=d*g,c=l+g,u=p*g,h=u+g,f=0,e=l;c>e;e+=1)if(!(e>=m))for(n=u;h>n;n+=1)n>=v||(i=4*(m*n+e),o+=t[i+0],r+=t[i+1],s+=t[i+2],a+=t[i+3],f+=1);for(o/=f,r/=f,s/=f,alphas=a/f,e=l;c>e;e+=1)if(!(e>=m))for(n=u;h>n;n+=1)n>=v||(i=4*(m*n+e),t[i+0]=o,t[i+1]=r,t[i+2]=s,t[i+3]=a)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(t){var e,n=255*this.threshold(),i=t.data,o=i.length;for(e=0;o>e;e+=1)i[e]=i[e]<n?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(t){var e,n,i,o,r,s,a,l,c,u=t.data,h=t.width,d=t.height,p=4*h;do{e=(d-1)*p,n=h;do i=e+4*(n-1),o=u[i],r=u[i+1],s=u[i+2],a=.393*o+.769*r+.189*s,l=.349*o+.686*r+.168*s,c=.272*o+.534*r+.131*s,u[i]=a>255?255:a,u[i+1]=l>255?255:l,u[i+2]=c>255?255:c,u[i+3]=u[i+3];while(--n)}while(--d)}}(),function(){Kinetic.Filters.Solarize=function(t){var e=t.data,n=t.width,i=t.height,o=4*n,r=i;do{var s=(r-1)*o,a=n;do{var l=s+4*(a-1),c=e[l],u=e[l+1],h=e[l+2];c>127&&(c=255-c),u>127&&(u=255-u),h>127&&(h=255-h),e[l]=c,e[l+1]=u,e[l+2]=h}while(--a)}while(--r)}}(),function(){var t=function(t,e,n){var i,o,r,s,a=t.data,l=e.data,c=t.width,u=t.height,h=n.polarCenterX||c/2,d=n.polarCenterY||u/2,p=0,f=0,g=0,m=0,v=Math.sqrt(h*h+d*d);o=c-h,r=u-d,s=Math.sqrt(o*o+r*r),v=s>v?s:v;var y,b,_,w,x,C,k,S,T,E,M,D,P,A=u,I=c,R=360/I*Math.PI/180;for(b=0;I>b;b+=1)for(_=Math.sin(b*R),w=Math.cos(b*R),y=0;A>y;y+=1)o=h+v*y/A*w,r=d+v*y/A*_,1>=o&&(o=1),o>=c-.5&&(o=c-1),1>=r&&(r=1),r>=u-.5&&(r=u-1),x=o-.5,C=o+.5,k=Math.floor(x),S=Math.floor(C),T=r-.5,E=r+.5,M=Math.floor(T),D=Math.floor(E),P=(1-(x-k))*(1-(T-M)),i=4*(M*c+k),p=a[i+0]*P,f=a[i+1]*P,g=a[i+2]*P,m=a[i+3]*P,P=(1-(x-k))*(E-D),i=4*(D*c+k),p+=a[i+0]*P,f+=a[i+1]*P,g+=a[i+2]*P,m+=a[i+3]*P,P=(C-S)*(E-D),i=4*(D*c+S),p+=a[i+0]*P,f+=a[i+1]*P,g+=a[i+2]*P,m+=a[i+3]*P,P=(C-S)*(1-(T-M)),i=4*(M*c+S),p+=a[i+0]*P,f+=a[i+1]*P,g+=a[i+2]*P,m+=a[i+3]*P,i=4*(b+y*c),l[i+0]=p,l[i+1]=f,l[i+2]=g,l[i+3]=m},e=function(t,e,n){var i,o,r,s,a,l,c=t.data,u=e.data,h=t.width,d=t.height,p=n.polarCenterX||h/2,f=n.polarCenterY||d/2,g=0,m=0,v=0,y=0,b=Math.sqrt(p*p+f*f);o=h-p,r=d-f,l=Math.sqrt(o*o+r*r),b=l>b?l:b;var _,w,x=d,C=h,k=n.polarRotation||0;180*(C/360)/Math.PI;var S,T,E,M,D,P,A,I,R;for(o=0;h>o;o+=1)for(r=0;d>r;r+=1)s=o-p,a=r-f,_=Math.sqrt(s*s+a*a)*x/b,w=(180*Math.atan2(a,s)/Math.PI+360+k)%360,w=w*C/360,S=w-.5,T=w+.5,E=Math.floor(S),M=Math.floor(T),D=_-.5,P=_+.5,A=Math.floor(D),I=Math.floor(P),R=(1-(S-E))*(1-(D-A)),i=4*(A*h+E),g=c[i+0]*R,m=c[i+1]*R,v=c[i+2]*R,y=c[i+3]*R,R=(1-(S-E))*(P-I),i=4*(I*h+E),g+=c[i+0]*R,m+=c[i+1]*R,v+=c[i+2]*R,y+=c[i+3]*R,R=(T-M)*(P-I),i=4*(I*h+M),g+=c[i+0]*R,m+=c[i+1]*R,v+=c[i+2]*R,y+=c[i+3]*R,R=(T-M)*(1-(D-A)),i=4*(A*h+M),g+=c[i+0]*R,m+=c[i+1]*R,v+=c[i+2]*R,y+=c[i+3]*R,i=4*(r*h+o),u[i+0]=g,u[i+1]=m,u[i+2]=v,u[i+3]=y},n=document.createElement("canvas");Kinetic.Filters.Kaleidoscope=function(i){var o=i.width,r=i.height,s=Math.round(this.kaleidoscopePower()),a=Math.round(this.kaleidoscopeAngle()),l=Math.floor(o*(a%360)/360);if(!(1>s)){n.width=o,n.height=r;var c=n.getContext("2d").getImageData(0,0,o,r);t(i,c,{polarCenterX:o/2,polarCenterY:r/2});for(var u=o/Math.pow(2,s);8>=u;)u=2*u,s-=1;u=Math.ceil(u);var h=u,d=0,p=h,f=1;for(l+u>o&&(d=h,p=0,f=-1),m=0;r>m;m+=1)for(g=d;g!==p;g+=f)v=Math.round(g+l)%o,C=4*(o*m+v),b=c.data[C+0],_=c.data[C+1],w=c.data[C+2],x=c.data[C+3],k=4*(o*m+g),c.data[k+0]=b,c.data[k+1]=_,c.data[k+2]=w,c.data[k+3]=x;var g,m,v,y,b,_,w,x,C,k;for(m=0;r>m;m+=1)for(h=Math.floor(u),y=0;s>y;y+=1){for(g=0;h+1>g;g+=1)C=4*(o*m+g),b=c.data[C+0],_=c.data[C+1],w=c.data[C+2],x=c.data[C+3],k=4*(o*m+2*h-g-1),c.data[k+0]=b,c.data[k+1]=_,c.data[k+2]=w,c.data[k+3]=x;h*=2}e(c,i,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){window.setTimeout(t,1e3/60)}var e=500;Kinetic.Animation=function(t,e){this.func=t,this.setLayers(e),this.id=Kinetic.Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,n,i=this.layers;if(i){for(e=i.length,n=0;e>n;n++)if(i[n]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){for(var t=Kinetic.Animation,e=t.animations,n=0;n<e.length;n++)if(e[n].id===this.id)return!0;return!1},start:function(){this.stop(),this.frame.timeDiff=0,this.frame.lastTime=(new Date).getTime(),Kinetic.Animation._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){for(var e=t.id,n=this.animations,i=n.length,o=0;i>o;o++)if(n[o].id===e){this.animations.splice(o,1);break}},Kinetic.Animation._runFrames=function(){var t,e,n,i,o,r,s,a,l={},c=this.animations;for(i=0;i<c.length;i++){for(t=c[i],e=t.layers,n=t.func,t._updateFrameObject((new Date).getTime()),r=e.length,o=0;r>o;o++)s=e[o],void 0!==s._id&&(l[s._id]=s);n&&n.call(t,t.frame)}for(a in l)l[a].draw()},Kinetic.Animation._animationLoop=function(){var t=this;this.animations.length>0?(this._runFrames(),Kinetic.Animation.requestAnimFrame(function(){t._animationLoop()})):this.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t}();Kinetic.Animation.requestAnimFrame=function(e){var i=Kinetic.isDragging?t:n;i(e)};var i=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){i.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this;this.batchAnim||(this.batchAnim=new Kinetic.Animation(function(){t.lastBatchDrawTime&&(new Date).getTime()-t.lastBatchDrawTime>e&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=(new Date).getTime(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}(),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,n=2,i=3,o=0;Kinetic.Tween=function(e){var n,i=this,s=e.node,a=s._id,l=e.duration||1,c=e.easing||Kinetic.Easings.Linear,u=!!e.yoyo;this.node=s,this._id=o++,this.anim=new Kinetic.Animation(function(){i.tween.onEnterFrame()},s.getLayer()||s.getLayers()),this.tween=new r(n,function(t){i._tweenFunc(t)},c,0,1,1e3*l,u),this._addListeners(),Kinetic.Tween.attrs[a]||(Kinetic.Tween.attrs[a]={}),Kinetic.Tween.attrs[a][this._id]||(Kinetic.Tween.attrs[a][this._id]={}),Kinetic.Tween.tweens[a]||(Kinetic.Tween.tweens[a]={});for(n in e)void 0===t[n]&&this._addAttr(n,e[n]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var n,i,o,r,s,a=this.node,l=a._id;if(o=Kinetic.Tween.tweens[l][t],o&&delete Kinetic.Tween.attrs[l][o][t],n=a.getAttr(t),Kinetic.Util._isArray(e))for(i=[],s=e.length,r=0;s>r;r++)i.push(e[r]-n[r]);else i=e-n;Kinetic.Tween.attrs[l][this._id][t]={start:n,diff:i},Kinetic.Tween.tweens[l][t]=this._id},_tweenFunc:function(t){var e,n,i,o,r,s,a,l=this.node,c=Kinetic.Tween.attrs[l._id][this._id];for(e in c){if(n=c[e],i=n.start,o=n.diff,Kinetic.Util._isArray(i))for(r=[],a=i.length,s=0;a>s;s++)r.push(i[s]+o[s]*t);else r=i+o*t;l.setAttr(e,r)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){var t=this.node;return this.tween.reset(),(t.getLayer()||t.getLayers()).draw(),this},seek:function(t){var e=this.node;return this.tween.seek(1e3*t),(e.getLayer()||e.getLayers()).draw(),this},pause:function(){return this.tween.pause(),this},finish:function(){var t=this.node;return this.tween.finish(),(t.getLayer()||t.getLayers()).draw(),this},destroy:function(){var t,e=this.node._id,n=this._id,i=Kinetic.Tween.tweens[e];this.pause();for(t in i)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][n]}};var r=function(t,e,n,i,o,r,s){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=o-this.begin,this.pause()};r.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=i,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===n?this.setTime(t):this.state===i&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,n,i){var o=1.70158;return n*(t/=i)*t*((o+1)*t-o)+e},BackEaseOut:function(t,e,n,i){var o=1.70158;return n*((t=t/i-1)*t*((o+1)*t+o)+1)+e},BackEaseInOut:function(t,e,n,i){var o=1.70158;return(t/=i/2)<1?n/2*t*t*(((o*=1.525)+1)*t-o)+e:n/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e},ElasticEaseIn:function(t,e,n,i,o,r){var s=0;return 0===t?e:1==(t/=i)?e+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r))+e)},ElasticEaseOut:function(t,e,n,i,o,r){var s=0;return 0===t?e:1==(t/=i)?e+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*i-s)*Math.PI/r)+n+e)},ElasticEaseInOut:function(t,e,n,i,o,r){var s=0;return 0===t?e:2==(t/=i/2)?e+n:(r||(r=.3*i*1.5),!o||o<Math.abs(n)?(o=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r)+e:.5*o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r)+n+e)},BounceEaseOut:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,i){return n-Kinetic.Easings.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut:function(t,e,n,i){return i/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,n,i)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+e},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,n=e.node;n&&(n._setDragPosition(t),e.isDragging||(e.isDragging=!0,n.fire("dragstart",t,!0)),n.fire("dragmove",t,!0))},_endDragBefore:function(t){var e,n,i=Kinetic.DD,o=i.node;o&&(e=o.nodeType,n=o.getLayer(),i.anim.stop(),i.isDragging&&(i.isDragging=!1,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=o)),delete i.node,(n||o).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",t,!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),n=this.getLayer(),i=e.getPointerPosition(),o=this.getAbsolutePosition();i&&(t.node&&t.node.stopDrag(),t.node=this,t.offset.x=i.x-o.x,t.offset.y=i.y-o.y,t.anim.setLayers(n||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,n=this.getStage().getPointerPosition(),i=this.getDragBoundFunc(),o={x:n.x-e.offset.x,y:n.y-e.offset.y};void 0!==i&&(o=i.call(this,o,t)),this.setAbsolutePosition(o)},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)}):this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(){return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=this.children;e.length>0;)t=e[0],t.hasChildren()&&t.removeChildren(),t.remove();return this},destroyChildren:function(){for(var t=this.children;t.length>0;)t[0].destroy();return this},add:function(t){var e=this.children;return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,n,i,o,r,s,a,l=[],c=t.replace(/ /g,"").split(","),u=c.length;for(e=0;u>e;e++)if(i=c[e],"#"===i.charAt(0))r=this._getNodeById(i.slice(1)),r&&l.push(r);else if("."===i.charAt(0))o=this._getNodesByName(i.slice(1)),l=l.concat(o);else for(s=this.getChildren(),a=s.length,n=0;a>n;n++)l=l.concat(s[n]._get(i));return Kinetic.Collection.toCollection(l)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),n=this.getChildren(),i=n.length,o=0;i>o;o++)e=e.concat(n[o]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;n>i;i++){var o=e[i];t.children.push(o.toObject())}return t},_getDescendants:function(t){for(var e=[],n=t.length,i=0;n>i;i++){var o=t[i];this.isAncestorOf(o)&&e.push(o)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t){var e=this.getLayer(),n=t||e&&e.getCanvas(),i=n&&n.getContext(),o=this._cache.canvas,r=o&&o.scene;return this.isVisible()&&(r?this._drawCachedSceneCanvas(i):this._drawChildren(n,"drawScene")),this},drawHit:function(t){var e=this.getLayer(),n=t||e&&e.hitCanvas,i=n&&n.getContext(),o=this._cache.canvas,r=o&&o.hit;return this.shouldDrawHit()&&(r?this._drawCachedHitCanvas(i):this._drawChildren(n,"drawHit")),this},_drawChildren:function(t,e){var n,i,o=t&&t.getContext(),r=this.getClipWidth(),s=this.getClipHeight(),a=r&&s;a&&(n=this.getClipX(),i=this.getClipY(),o.save(),o._applyTransform(this),o.beginPath(),o.rect(n,i,r,s),o.clip(),o.reset()),this.children.each(function(n){n[e](t)}),a&&o.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function n(t){t.fill()}function i(t){t.stroke()}function o(){this._clearCache(r)}var r="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(r){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=n,this._strokeFuncHit=i;for(var s,a=Kinetic.shapes;s=Kinetic.Util.getRandomColor(),!s||s in a;);this.colorKey=s,a[s]=this,Kinetic.Node.call(this,r),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChanged.kinetic",o)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(r,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(t){var e,n=this.getStage(),i=n.bufferHitCanvas;return i.getContext().clear(),this.drawScene(i),e=i.context.getImageData(0|t.x,0|t.y,1,1).data,e[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()},drawScene:function(t){var e,n,i,o=t||this.getLayer().getCanvas(),r=o.getContext(),s=this._cache.canvas,a=this.sceneFunc(),l=this.hasShadow();return this.isVisible()&&(s?this._drawCachedSceneCanvas(r):a&&(r.save(),this._useBufferCanvas()?(e=this.getStage(),n=e.bufferCanvas,i=n.getContext(),i.clear(),i.save(),i._applyLineJoin(this),i._applyTransform(this),a.call(this,i),i.restore(),l&&(r.save(),r._applyShadow(this),r.drawImage(n._canvas,0,0),r.restore()),r._applyOpacity(this),r.drawImage(n._canvas,0,0)):(r._applyLineJoin(this),r._applyTransform(this),l&&(r.save(),r._applyShadow(this),a.call(this,r),r.restore()),r._applyOpacity(this),a.call(this,r)),r.restore())),this},drawHit:function(t){var e=t||this.getLayer().hitCanvas,n=e.getContext(),i=this.hitFunc()||this.sceneFunc(),o=this._cache.canvas,r=o&&o.hit;return this.shouldDrawHit()&&(r?this._drawCachedHitCanvas(n):i&&(n.save(),n._applyLineJoin(this),n._applyTransform(this),i.call(this,n),n.restore())),this},drawHitFromCache:function(t){var e,n,i,o,r,s,a,l,c=t||0,u=this._cache.canvas,h=this._getCachedSceneCanvas(),d=h.getContext(),p=u.hit,f=p.getContext(),g=h.getWidth(),m=h.getHeight();f.clear();try{for(e=d.getImageData(0,0,g,m),n=e.data,i=f.getImageData(0,0,g,m),o=i.data,r=n.length,s=Kinetic.Util._hexToRgb(this.colorKey),a=0;r>a;a+=4)l=n[a+3],l>c&&(o[a]=s.r,o[a+1]=s.g,o[a+2]=s.b,o[a+3]=255);f.putImageData(i,0,0)}catch(v){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),
Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function t(t,e){t.content.addEventListener(e,function(n){t[O+e](n)},!1)}var e="Stage",n="string",i="px",o="mouseout",r="mouseleave",s="mouseover",a="mouseenter",l="mousemove",c="mousedown",u="mouseup",h="click",d="dblclick",p="touchstart",f="touchend",g="tap",m="dbltap",v="touchmove",y="contentMouseout",b="contentMouseover",_="contentMousemove",w="contentMousedown",x="contentMouseup",C="contentClick",k="contentDblclick",S="contentTouchstart",T="contentTouchend",E="contentDbltap",M="contentTouchmove",D="div",P="relative",A="inline-block",I="kineticjs-content",R=" ",O="_",F="container",N="",z=[c,l,u,o,p,v,f,s],L=z.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){return typeof t===n&&(t=document.getElementById(t)),this._setAttr(F,t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,n=e.length;for(t=0;n>t;t++)e[t].clear();return this},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(o){var r=l[o],c=r.toDataURL(),u=new Image;u.onload=function(){a.drawImage(u,0,0),o<l.length-1?e(o+1):t.callback(s.toDataURL(n,i))},u.src=c}t=t||{};var n=t.mimeType||null,i=t.quality||null,o=t.x||0,r=t.y||0,s=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),a=s.getContext()._context,l=this.children;(o||r)&&a.translate(-1*o,-1*r),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,n,i=this.getChildren(),o=i.length,r=o-1;for(e=r;e>=0;e--)if(n=i[e].getIntersection(t))return n;return null},_resizeDOM:function(){if(this.content){var t,e,n=this.getWidth(),o=this.getHeight(),r=this.getChildren(),s=r.length;for(this.content.style.width=n+i,this.content.style.height=o+i,this.bufferCanvas.setSize(n,o),this.bufferHitCanvas.setSize(n,o),t=0;s>t;t++)e=r[t],e.getCanvas().setSize(n,o),e.hitCanvas.setSize(n,o),e.draw()}},add:function(t){return Kinetic.Container.prototype.add.call(this,t),t.canvas.setSize(this.attrs.width,this.attrs.height),t.hitCanvas.setSize(this.attrs.width,this.attrs.height),t.draw(),this.content.appendChild(t.canvas._canvas),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){var e;for(e=0;L>e;e++)t(this,z[e])},_mouseover:function(t){this._fire(b,t)},_mouseout:function(t){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(o,t),e._fireAndBubble(r,t),this.targetShape=null),this.pointerPos=void 0,this._fire(y,t)},_mousemove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===n._id?n._fireAndBubble(l,t):(this.targetShape&&(this.targetShape._fireAndBubble(o,t,n),this.targetShape._fireAndBubble(r,t,n)),n._fireAndBubble(s,t,this.targetShape),n._fireAndBubble(a,t,this.targetShape),this.targetShape=n):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(o,t),this.targetShape._fireAndBubble(r,t),this.targetShape=null),this._fire(_,t),e&&e._drag(t),t.preventDefault&&t.preventDefault()},_mousedown:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e,e._fireAndBubble(c,t)),this._fire(w,t),t.preventDefault&&t.preventDefault()},_mouseup:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(u,t),Kinetic.listenClickTap&&n&&n._id===e._id&&(e._fireAndBubble(h,t),i&&e._fireAndBubble(d,t))),this._fire(x,t),Kinetic.listenClickTap&&(this._fire(C,t),i&&this._fire(k,t)),Kinetic.listenClickTap=!1,t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.tapStartShape=e,e._fireAndBubble(p,t),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(S,t)},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());fireDblClick=!1,Kinetic.inDblClickWindow?(fireDblClick=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(f,t),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble(g,t),fireDblClick&&e._fireAndBubble(m,t)),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire(T,t),fireDblClick&&this._fire(E,t)),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()&&(n._fireAndBubble(v,t),n.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(M,t),e&&e._drag(t)},_setPointerPosition:function(t){var e,t=t?t:window.event,n=this._getContentPosition(),i=t.offsetX,o=t.clientX,r=null,s=null;void 0!==t.touches?1===t.touches.length&&(e=t.touches[0],r=e.clientX-n.left,s=e.clientY-n.top):void 0!==i?(r=i,s=t.offsetY):"mozilla"===Kinetic.UA.browser?(r=t.layerX,s=t.layerY):void 0!==o&&n&&(r=o-n.left,s=t.clientY-n.top),null!==r&&null!==s&&(this.pointerPos={x:r,y:s})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();t.innerHTML=N,this.content=document.createElement(D),this.content.style.position=P,this.content.style.display=A,this.content.className=I,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var n,i,o=t.split(R),r=o.length;for(n=0;r>n;n++)i=o[n],this.content.addEventListener(i,e,!1)}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){var t="#",e="beforeDraw",n="draw",i=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],o=i.length;Kinetic.Util.addMethods(Kinetic.Layer,{___init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,n,r,s;if(!this.isVisible())return null;for(n=0;o>n;n++){if(r=i[n],e=this._getIntersection({x:t.x+r.x,y:t.y+r.y}),s=e.shape)return s;if(!e.antialiased)return null}},_getIntersection:function(e){var n,i,o=this.hitCanvas.context._context.getImageData(e.x,e.y,1,1).data,r=o[3];return 255===r?(n=Kinetic.Util._rgbToHex(o[0],o[1],o[2]),i=Kinetic.shapes[t+n],{shape:i}):r>0?{antialiased:!0}:{}},drawScene:function(t){var i=this.getLayer(),o=t||i&&i.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&o.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,o),this._fire(n,{node:this}),this},drawHit:function(t){var e=this.getLayer(),n=t||e&&e.hitCanvas;return e&&e.getClearBeforeDraw()&&e.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,n),this},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){var e=this.getContext(),n=this.getHitCanvas().getContext();return e.clear(t),n.clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getStage(),e=this.getCanvas(),n=e._canvas;return Kinetic.Node.prototype.remove.call(this),t&&n&&Kinetic.Util._isInDocument(n)&&t.content.removeChild(n),this},getStage:function(){return this.parent},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"clearBeforeDraw",!0),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),n=this.getWidth(),i=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(n-e,0),t.arc(n-e,e,e,3*Math.PI/2,0,!1),t.lineTo(n,i-e),t.arc(n-e,i-e,e,0,Math.PI/2,!1),t.lineTo(e,i),t.arc(e,i-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,t,!1),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var n=this.getRadius(),i=n.x,o=n.y;e.beginPath(),e.save(),i!==o&&e.scale(1,o/i),e.arc(0,0,i,0,t,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var t=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getInnerRadius(),0,t,!1),e.moveTo(this.getOuterRadius(),0),e.arc(0,0,this.getOuterRadius(),t,0,!0),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setOuterRadius(t/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,this.getAngle()*Math.PI/180,this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.angle()*Math.PI/180,n=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,n),t.arc(0,0,this.getInnerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var t="Image";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(t){var e,n,i,o,r=this.getWidth(),s=this.getHeight(),a=this.getImage();a&&(e=this.getCrop(),n=e.width,i=e.height,o=n&&i?[a,e.x,e.y,n,i,0,0,r,s]:[a,0,0,r,s]),t.beginPath(),t.rect(0,0,r,s),t.closePath(),t.fillStrokeShape(this),a&&t.drawImage.apply(t,o)},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="auto",i="canvas",o="center",r="Change.kinetic",s="2d",a="-",l="",c="left",u="text",h="Text",d="middle",p="normal",f="px ",g=" ",m="right",v="word",y="char",b="none",_=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height","wrap"],w=_.length,x=document.createElement(i).getContext(s);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(i){var o=this;void 0===i.width&&(i.width=n),void 0===i.height&&(i.height=n),Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this.className=h;for(var s=0;w>s;s++)this.on(_[s]+r,o._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,n=this.getPadding(),i=this.getTextHeight(),r=this.getLineHeight()*i,s=this.textArr,a=s.length,l=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",d),t.setAttr("textAlign",c),t.save(),t.translate(n,0),t.translate(0,n+i/2),e=0;a>e;e++){var u=s[e],h=u.text,p=u.width;t.save(),this.getAlign()===m?t.translate(l-p-2*n,0):this.getAlign()===o&&t.translate((l-p-2*n)/2,0),this.partialText=h,t.fillStrokeShape(this),t.restore(),t.translate(0,r)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr(u,e),this},getWidth:function(){return this.attrs.width===n?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===n?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,n=x,i=this.getFontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:parseInt(i,10)}},_getContextFont:function(){return this.getFontStyle()+g+this.getFontSize()+f+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return x.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),i=0,o=this.getLineHeight()*e,r=this.attrs.width,s=this.attrs.height,l=r!==n,c=s!==n,u=this.getPadding(),h=r-2*u,d=s-2*u,p=0,m=this.getWrap(),v=m!==b,_=m!==y&&v;this.textArr=[],x.save(),x.font=this.getFontStyle()+g+e+f+this.getFontFamily();for(var w=0,C=t.length;C>w;++w){var k=t[w],S=this._getTextWidth(k);if(l&&S>h)for(;k.length>0;){for(var T=0,E=k.length,M="",D=0;E>T;){var P=T+E>>>1,A=k.slice(0,P+1),I=this._getTextWidth(A);h>=I?(T=P+1,M=A,D=I):E=P}if(!M)break;if(_){var R=Math.max(M.lastIndexOf(g),M.lastIndexOf(a))+1;R>0&&(T=R,M=M.slice(0,T),D=this._getTextWidth(M))}if(this._addTextLine(M,D),p+=o,!v||c&&p+o>d)break;if(k=k.slice(T),k.length>0&&(S=this._getTextWidth(k),h>=S)){this._addTextLine(k,S),p+=o;break}}else this._addTextLine(k,S),p+=o,i=Math.max(i,S);if(c&&p+o>d)break}x.restore(),this.textHeight=e,this.textWidth=i}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",p),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",c),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",v),Kinetic.Factory.addGetter(Kinetic.Text,"text",l),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,i,o=this.getPoints(),r=o.length,s=this.getTension(),a=this.getClosed();if(t.beginPath(),t.moveTo(o[0],o[1]),0!==s&&r>4){for(e=this.getTensionPoints(),n=e.length,i=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n-2>i;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);a||t.quadraticCurveTo(e[n-2],e[n-1],o[r-2],o[r-1])}else for(i=2;r>i;i+=2)t.lineTo(o[i],o[i+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,n=this.getTension(),i=Kinetic.Util,o=i._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),r=i._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),s=Kinetic.Util._expandPoints(t,n),a=[o[2],o[3]].concat(s).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],o[0],o[1],t[0],t[1]]);return a}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),i=4*n,o=this.getAnimations()[e],r=o[i+0],s=o[i+1],a=o[i+2],l=o[i+3],c=this.getImage();c&&t.drawImage(c,r,s,a,l,0,0,a,l)},_hitFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),i=4*n,o=this.getAnimations()[e],r=o[i+2],s=o[i+3];t.beginPath(),t.rect(0,0,r,s),t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},start:function(){var t=this,e=this.getLayer();this.anim.setLayers(e),this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate()),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),n=this.getAnimations(),i=n[e],o=i.length/4;o-1>t?this.frameIndex(t+1):this.frameIndex(0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,n=!1;t.beginPath();for(var i=0;i<e.length;i++){var o=e[i].command,r=e[i].points;switch(o){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var s=r[0],a=r[1],l=r[2],c=r[3],u=r[4],h=r[5],d=r[6],p=r[7],f=l>c?l:c,g=l>c?1:l/c,m=l>c?c/l:1;t.translate(s,a),t.rotate(d),t.scale(g,m),t.arc(0,0,f,u,u+h,1-p),t.scale(1/g,1/m),t.rotate(-d),t.translate(-s,-a);break;case"z":t.closePath(),n=!0}}n?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},Kinetic.Path.getPointOnLine=function(t,e,n,i,o,r,s){void 0===r&&(r=e),void 0===s&&(s=n);var a=(o-n)/(i-e+1e-8),l=Math.sqrt(t*t/(1+a*a));e>i&&(l*=-1);var c,u=a*l;if(i===e)c={x:r,y:s+u};else if((s-n)/(r-e+1e-8)===a)c={x:r+l,y:s+u};else{var h,d,p=this.getLineLength(e,n,i,o);if(1e-8>p)return;var f=(r-e)*(i-e)+(s-n)*(o-n);f/=p*p,h=e+f*(i-e),d=n+f*(o-n);var g=this.getLineLength(r,s,h,d),m=Math.sqrt(t*t-g*g);l=Math.sqrt(m*m/(1+a*a)),e>i&&(l*=-1),u=a*l,c={x:h+l,y:d+u}}return c},Kinetic.Path.getPointOnCubicBezier=function(t,e,n,i,o,r,s,a,l){function c(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}var p=a*c(t)+r*u(t)+i*h(t)+e*d(t),f=l*c(t)+s*u(t)+o*h(t)+n*d(t);return{x:p,y:f}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,n,i,o,r,s){function a(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}var u=r*a(t)+i*l(t)+e*c(t),h=s*a(t)+o*l(t)+n*c(t);return{x:u,y:h}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,n,i,o,r){var s=Math.cos(r),a=Math.sin(r),l={x:n*Math.cos(o),y:i*Math.sin(o)};return{x:t+(l.x*s-l.y*a),y:e+(l.x*a+l.y*s)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var o=e.split("|"),r=[],s=0,a=0;for(i=1;i<o.length;i++){var l=o[i],c=l.charAt(0);l=l.slice(1),l=l.replace(new RegExp(",-","g"),"-"),l=l.replace(new RegExp("-","g"),",-"),l=l.replace(new RegExp("e,-","g"),"e-");var u=l.split(",");u.length>0&&""===u[0]&&u.shift();for(var h=0;h<u.length;h++)u[h]=parseFloat(u[h]);for(;u.length>0&&!isNaN(u[0]);){var d,p,f,g,m,v,y,b,_,w,x=null,C=[],k=s,S=a;switch(c){case"l":s+=u.shift(),a+=u.shift(),x="L",C.push(s,a);break;case"L":s=u.shift(),a=u.shift(),C.push(s,a);break;case"m":var T=u.shift(),E=u.shift();if(s+=T,a+=E,x="M",r.length>2&&"z"===r[r.length-1].command)for(var M=r.length-2;M>=0;M--)if("M"===r[M].command){s=r[M].points[0]+T,a=r[M].points[1]+E;break}C.push(s,a),c="l";break;case"M":s=u.shift(),a=u.shift(),x="M",C.push(s,a),c="L";break;case"h":s+=u.shift(),x="L",C.push(s,a);break;case"H":s=u.shift(),x="L",C.push(s,a);break;case"v":a+=u.shift(),x="L",C.push(s,a);break;case"V":a=u.shift(),x="L",C.push(s,a);break;case"C":C.push(u.shift(),u.shift(),u.shift(),u.shift()),s=u.shift(),a=u.shift(),C.push(s,a);break;case"c":C.push(s+u.shift(),a+u.shift(),s+u.shift(),a+u.shift()),s+=u.shift(),a+=u.shift(),x="C",C.push(s,a);break;case"S":p=s,f=a,d=r[r.length-1],"C"===d.command&&(p=s+(s-d.points[2]),f=a+(a-d.points[3])),C.push(p,f,u.shift(),u.shift()),s=u.shift(),a=u.shift(),x="C",C.push(s,a);break;case"s":p=s,f=a,d=r[r.length-1],"C"===d.command&&(p=s+(s-d.points[2]),f=a+(a-d.points[3])),C.push(p,f,s+u.shift(),a+u.shift()),s+=u.shift(),a+=u.shift(),x="C",C.push(s,a);break;case"Q":C.push(u.shift(),u.shift()),s=u.shift(),a=u.shift(),C.push(s,a);break;case"q":C.push(s+u.shift(),a+u.shift()),s+=u.shift(),a+=u.shift(),x="Q",C.push(s,a);break;case"T":p=s,f=a,d=r[r.length-1],"Q"===d.command&&(p=s+(s-d.points[0]),f=a+(a-d.points[1])),s=u.shift(),a=u.shift(),x="Q",C.push(p,f,s,a);break;case"t":p=s,f=a,d=r[r.length-1],"Q"===d.command&&(p=s+(s-d.points[0]),f=a+(a-d.points[1])),s+=u.shift(),a+=u.shift(),x="Q",C.push(p,f,s,a);break;case"A":g=u.shift(),m=u.shift(),v=u.shift(),y=u.shift(),b=u.shift(),_=s,w=a,s=u.shift(),a=u.shift(),x="A",C=this.convertEndpointToCenterParameterization(_,w,s,a,y,b,g,m,v);break;case"a":g=u.shift(),m=u.shift(),v=u.shift(),y=u.shift(),b=u.shift(),_=s,w=a,s+=u.shift(),a+=u.shift(),x="A",C=this.convertEndpointToCenterParameterization(_,w,s,a,y,b,g,m,v)}r.push({command:x||c,points:C,start:{x:k,y:S},pathLength:this.calcLength(k,S,x||c,C)})}("z"===c||"Z"===c)&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r},Kinetic.Path.calcLength=function(e,n,i,o){var r,s,a,l=Kinetic.Path;switch(i){case"L":return l.getLineLength(e,n,o[0],o[1]);case"C":for(r=0,s=l.getPointOnCubicBezier(0,e,n,o[0],o[1],o[2],o[3],o[4],o[5]),t=.01;1>=t;t+=.01)a=l.getPointOnCubicBezier(t,e,n,o[0],o[1],o[2],o[3],o[4],o[5]),r+=l.getLineLength(s.x,s.y,a.x,a.y),s=a;return r;case"Q":for(r=0,s=l.getPointOnQuadraticBezier(0,e,n,o[0],o[1],o[2],o[3]),t=.01;1>=t;t+=.01)a=l.getPointOnQuadraticBezier(t,e,n,o[0],o[1],o[2],o[3]),r+=l.getLineLength(s.x,s.y,a.x,a.y),s=a;return r;case"A":r=0;var c=o[4],u=o[5],h=o[4]+u,d=Math.PI/180;if(Math.abs(c-h)<d&&(d=Math.abs(c-h)),s=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],c,0),0>u)for(t=c-d;t>h;t-=d)a=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],t,0),r+=l.getLineLength(s.x,s.y,a.x,a.y),s=a;else for(t=c+d;h>t;t+=d)a=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],t,0),r+=l.getLineLength(s.x,s.y,a.x,a.y),s=a;return a=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],h,0),r+=l.getLineLength(s.x,s.y,a.x,a.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,n,i,o,r,s,a,l){var c=l*(Math.PI/180),u=Math.cos(c)*(t-n)/2+Math.sin(c)*(e-i)/2,h=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(e-i)/2,d=u*u/(s*s)+h*h/(a*a);d>1&&(s*=Math.sqrt(d),a*=Math.sqrt(d));var p=Math.sqrt((s*s*a*a-s*s*h*h-a*a*u*u)/(s*s*h*h+a*a*u*u));
o==r&&(p*=-1),isNaN(p)&&(p=0);var f=p*s*h/a,g=p*-a*u/s,m=(t+n)/2+Math.cos(c)*f-Math.sin(c)*g,v=(e+i)/2+Math.sin(c)*f+Math.cos(c)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=_([1,0],[(u-f)/s,(h-g)/a]),x=[(u-f)/s,(h-g)/a],C=[(-1*u-f)/s,(-1*h-g)/a],k=_(x,C);return b(x,C)<=-1&&(k=Math.PI),b(x,C)>=1&&(k=0),0===r&&k>0&&(k-=2*Math.PI),1==r&&0>k&&(k+=2*Math.PI),[m,v,s,a,w,k,c,r]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="",i="normal";Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(n){var i=this;this.dummyCanvas=document.createElement("canvas"),this.dataArray=[],Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=t,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){i.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",i._setTextData),i._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,n=0;n<e.length;n++){t.save();var i=e[n].p0;t.translate(i.x,i.y),t.rotate(e[n].rotation),this.partialText=e[n].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,n=e.getContext("2d");n.save(),n.font=this._getContextFont();var i=n.measureText(t);return n.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var n,i,o,r=this.attrs.text.split(""),s=-1,a=0,l=function(){a=0;for(var e=t.dataArray,i=s+1;i<e.length;i++){if(e[i].pathLength>0)return s=i,e[i];"M"==e[i].command&&(n={x:e[i].points[0],y:e[i].points[1]})}return{}},c=function(e){var r=t._getTextSize(e).width,s=0,c=0;for(i=void 0;Math.abs(r-s)/r>.01&&25>c;){c++;for(var u=s;void 0===o;)o=l(),o&&u+o.pathLength<r&&(u+=o.pathLength,o=void 0);if(o==={}||void 0===n)return;var h=!1;switch(o.command){case"L":Kinetic.Path.getLineLength(n.x,n.y,o.points[0],o.points[1])>r?i=Kinetic.Path.getPointOnLine(r,n.x,n.y,o.points[0],o.points[1],n.x,n.y):o=void 0;break;case"A":var d=o.points[4],p=o.points[5],f=o.points[4]+p;0===a?a=d+1e-8:r>s?a+=Math.PI/180*p/Math.abs(p):a-=Math.PI/360*p/Math.abs(p),(0>p&&f>a||p>=0&&a>f)&&(a=f,h=!0),i=Kinetic.Path.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],a,o.points[6]);break;case"C":0===a?a=r>o.pathLength?1e-8:r/o.pathLength:r>s?a+=(r-s)/o.pathLength:a-=(s-r)/o.pathLength,a>1&&(a=1,h=!0),i=Kinetic.Path.getPointOnCubicBezier(a,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case"Q":0===a?a=r/o.pathLength:r>s?a+=(r-s)/o.pathLength:a-=(s-r)/o.pathLength,a>1&&(a=1,h=!0),i=Kinetic.Path.getPointOnQuadraticBezier(a,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3])}void 0!==i&&(s=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y)),h&&(h=!1,o=void 0)}},u=0;u<r.length&&(c(r[u]),void 0!==n&&void 0!==i);u++){var h=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y),d=0,p=Kinetic.Path.getPointOnLine(d+h/2,n.x,n.y,i.x,i.y),f=Math.atan2(i.y-n.y,i.x-n.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:r[u],rotation:f,p0:n,p1:i}),n=i}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",i),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",n),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,i,o=this.attrs.sides,r=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-r),e=1;o>e;e++)n=r*Math.sin(2*e*Math.PI/o),i=-1*r*Math.cos(2*e*Math.PI/o),t.lineTo(n,i);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var o=1;2*i>o;o++){var r=0===o%2?n:e,s=r*Math.sin(o*Math.PI/i),a=-1*r*Math.cos(o*Math.PI/i);t.lineTo(s,a)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",n="none",i="up",o="right",r="down",s="left",a="Label",l=t.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;this.className=a,Kinetic.Group.call(this,t),this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(n){var i,o=this,r=function(){o._sync()};for(i=0;l>i;i++)n.on(t[i]+e,r)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,n,a,l,c,u=this.getText(),h=this.getTag();if(u&&h){switch(t=u.getWidth(),e=u.getHeight(),n=h.getPointerDirection(),a=h.getPointerWidth(),pointerHeight=h.getPointerHeight(),l=0,c=0,n){case i:l=t/2,c=-1*pointerHeight;break;case o:l=t+a,c=e/2;break;case r:l=t/2,c=e+pointerHeight;break;case s:l=-1*a,c=e/2}h.setAttrs({x:-1*l,y:-1*c,width:t,height:e}),u.setAttrs({x:-1*l,y:-1*c})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),n=this.getHeight(),a=this.getPointerDirection(),l=this.getPointerWidth(),c=this.getPointerHeight();this.getCornerRadius(),t.beginPath(),t.moveTo(0,0),a===i&&(t.lineTo((e-l)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+l)/2,0)),t.lineTo(e,0),a===o&&(t.lineTo(e,(n-c)/2),t.lineTo(e+l,n/2),t.lineTo(e,(n+c)/2)),t.lineTo(e,n),a===r&&(t.lineTo((e+l)/2,n),t.lineTo(e/2,n+c),t.lineTo((e-l)/2,n)),t.lineTo(0,n),a===s&&(t.lineTo(0,(n+c)/2),t.lineTo(-1*l,n/2),t.lineTo(0,(n-c)/2)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",n),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),!function(t,e){"use strict";function n(t,e){for(var n,i=[],r=0;r<t.length;++r){if(n=s[t[r]]||o(t[r]),!n)throw"module definition dependecy not found: "+t[r];i.push(n)}e.apply(null,i)}function i(t,i,o){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(i===e)throw"invalid module definition, dependencies must be specified";if(o===e)throw"invalid module definition, definition function must be specified";n(i,function(){s[t]=o.apply(null,arguments)})}function o(e){for(var n=t,i=e.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}function r(n){for(var i=0;i<n.length;i++){for(var o=t,r=n[i],a=r.split(/[.\/]/),l=0;l<a.length-1;++l)o[a[l]]===e&&(o[a[l]]={}),o=o[a[l]];o[a[a.length-1]]=s[r]}}var s={},a="moxie/core/utils/Basic",l="moxie/core/I18n",c="moxie/core/utils/Mime",u="moxie/core/utils/Env",h="moxie/core/utils/Dom",d="moxie/core/Exceptions",p="moxie/core/EventTarget",f="moxie/core/utils/Encode",g="moxie/runtime/Runtime",m="moxie/runtime/RuntimeClient",v="moxie/file/Blob",y="moxie/file/File",b="moxie/file/FileInput",_="moxie/file/FileDrop",w="moxie/runtime/RuntimeTarget",x="moxie/file/FileReader",C="moxie/core/utils/Url",k="moxie/file/FileReaderSync",S="moxie/xhr/FormData",T="moxie/xhr/XMLHttpRequest",E="moxie/runtime/Transporter",M="moxie/core/JSON",D="moxie/image/Image",P="moxie/runtime/html5/Runtime",A="moxie/runtime/html5/file/Blob",I="moxie/core/utils/Events",R="moxie/runtime/html5/file/FileInput",O="moxie/runtime/html5/file/FileDrop",F="moxie/runtime/html5/file/FileReader",N="moxie/runtime/html5/xhr/XMLHttpRequest",z="moxie/runtime/html5/utils/BinaryReader",L="moxie/runtime/html5/image/JPEGHeaders",H="moxie/runtime/html5/image/ExifParser",$="moxie/runtime/html5/image/JPEG",K="moxie/runtime/html5/image/PNG",B="moxie/runtime/html5/image/ImageInfo",q="moxie/runtime/html5/image/MegaPixel",j="moxie/runtime/html5/image/Image",V="moxie/runtime/flash/Runtime",W="moxie/runtime/flash/file/Blob",U="moxie/runtime/flash/file/FileInput",G="moxie/runtime/flash/file/FileReader",Y="moxie/runtime/flash/file/FileReaderSync",X="moxie/runtime/flash/xhr/XMLHttpRequest",Q="moxie/runtime/flash/runtime/Transporter",J="moxie/runtime/flash/image/Image",Z="moxie/runtime/silverlight/Runtime",tt="moxie/runtime/silverlight/file/Blob",et="moxie/runtime/silverlight/file/FileInput",nt="moxie/runtime/silverlight/file/FileDrop",it="moxie/runtime/silverlight/file/FileReader",ot="moxie/runtime/silverlight/file/FileReaderSync",rt="moxie/runtime/silverlight/xhr/XMLHttpRequest",st="moxie/runtime/silverlight/runtime/Transporter",at="moxie/runtime/silverlight/image/Image",lt="moxie/runtime/html4/Runtime",ct="moxie/runtime/html4/file/FileInput",ut="moxie/runtime/html4/file/FileReader",ht="moxie/runtime/html4/xhr/XMLHttpRequest",dt="moxie/runtime/html4/image/Image";i(a,[],function(){var t=function(t){var e;return t===e?"undefined":null===t?"null":t.nodeType?"node":{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},e=function(i){var o;return n(arguments,function(s,a){a>0&&n(s,function(n,s){n!==o&&(t(i[s])===t(n)&&~r(t(n),["array","object"])?e(i[s],n):i[s]=n)})}),i},n=function(t,e){var n,i,o,r;if(t){try{n=t.length}catch(s){n=r}if(n===r){for(i in t)if(t.hasOwnProperty(i)&&e(t[i],i)===!1)return}else for(o=0;n>o;o++)if(e(t[o],o)===!1)return}},i=function(e){var n;if(!e||"object"!==t(e))return!0;for(n in e)return!1;return!0},o=function(e,n){function i(o){"function"===t(e[o])&&e[o](function(t){++o<r&&!t?i(o):n(t)})}var o=0,r=e.length;"function"!==t(n)&&(n=function(){}),e&&e.length||n(),i(o)},r=function(t,e){if(e){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n}return-1},s=function(e,n){var i=[];"array"!==t(e)&&(e=[e]),"array"!==t(n)&&(n=[n]);for(var o in e)-1===r(e[o],n)&&i.push(e[o]);return i.length?i:!1},a=function(t,e){var i=[];return n(t,function(t){-1!==r(t,e)&&i.push(t)}),i.length?i:null},l=function(t){var e,n=[];for(e=0;e<t.length;e++)n[e]=t[e];return n},c=function(){var t=0;return function(e){var n,i=(new Date).getTime().toString(32);for(n=0;5>n;n++)i+=Math.floor(65535*Math.random()).toString(32);return(e||"o_")+i+(t++).toString(32)}}(),u=function(t){return t?String.prototype.trim?String.prototype.trim.call(t):t.toString().replace(/^\s*/,"").replace(/\s*$/,""):t},h=function(t){if("string"!=typeof t)return t;var e,n={t:1099511627776,g:1073741824,m:1048576,k:1024};return t=/^([0-9]+)([mgk]?)$/.exec(t.toLowerCase().replace(/[^0-9mkg]/g,"")),e=t[2],t=+t[1],n.hasOwnProperty(e)&&(t*=n[e]),t};return{guid:c,typeOf:t,extend:e,each:n,isEmptyObj:i,inSeries:o,inArray:r,arrayDiff:s,arrayIntersect:a,toArray:l,trim:u,parseSizeStr:h}}),i(l,[a],function(t){var e={};return{addI18n:function(n){return t.extend(e,n)},translate:function(t){return e[t]||t},_:function(t){return this.translate(t)},sprintf:function(e){var n=[].slice.call(arguments,1),i="";return t.each(e.split(/%[a-z]/),function(t){i+=t,n.length&&(i+=n.shift())}),i}}}),i(c,[a,l],function(t,e){var n="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/mp4,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",i={mimes:{},extensions:{},addMimeType:function(t){var e,n,i,o=t.split(/,/);for(e=0;e<o.length;e+=2){for(i=o[e+1].split(/ /),n=0;n<i.length;n++)this.mimes[i[n]]=o[e];this.extensions[o[e]]=i}},extList2mimes:function(e,n){var i,o,r,s,a=this,l=[];for(o=0;o<e.length;o++)for(i=e[o].extensions.split(/\s*,\s*/),r=0;r<i.length;r++){if("*"===i[r])return[];if(s=a.mimes[i[r]])-1===t.inArray(s,l)&&l.push(s);else{if(!n||!/^\w+$/.test(i[r]))return[];l.push("."+i[r])}}return l},mimes2exts:function(e){var n=this,i=[];return t.each(e,function(e){if("*"===e)return i=[],!1;var o=e.match(/^(\w+)\/(\*|\w+)$/);o&&("*"===o[2]?t.each(n.extensions,function(t,e){new RegExp("^"+o[1]+"/").test(e)&&[].push.apply(i,n.extensions[e])}):n.extensions[e]&&[].push.apply(i,n.extensions[e]))}),i},mimes2extList:function(n){var i=[],o=[];return"string"===t.typeOf(n)&&(n=t.trim(n).split(/\s*,\s*/)),o=this.mimes2exts(n),i.push({title:e.translate("Files"),extensions:o.length?o.join(","):"*"}),i.mimes=n,i},getFileExtension:function(t){var e=t&&t.match(/\.([^.]+)$/);return e?e[1].toLowerCase():""},getFileMime:function(t){return this.mimes[this.getFileExtension(t)]||""}};return i.addMimeType(n),i}),i(u,[a],function(t){function e(t){for(var e,n,o=0;o<t.length;o++)if(e=t[o].s1,n=t[o].prop,i=t[o].sv||t[o].id,e){if(-1!=e.indexOf(t[o].s2))return t[o].id}else if(n)return t[o].id}function n(t){var e=t.indexOf(i);return-1!=e?parseFloat(t.substring(e+i.length+1)):void 0}var i,o=[{s1:navigator.userAgent,s2:"Android",id:"Android Browser",sv:"Version"},{s1:navigator.userAgent,s2:"Chrome",id:"Chrome"},{s1:navigator.vendor,s2:"Apple",id:"Safari",sv:"Version"},{prop:window.opera&&window.opera.buildNumber,id:"Opera",sv:"Version"},{s1:navigator.vendor,s2:"KDE",id:"Konqueror"},{s1:navigator.userAgent,s2:"Firefox",id:"Firefox"},{s1:navigator.vendor,s2:"Camino",id:"Camino"},{s1:navigator.userAgent,s2:"Netscape",id:"Netscape"},{s1:navigator.userAgent,s2:"MSIE",id:"IE",sv:"MSIE"},{s1:navigator.userAgent,s2:"Gecko",id:"Mozilla",sv:"rv"}],r=[{s1:navigator.platform,s2:"Win",id:"Windows"},{s1:navigator.platform,s2:"Mac",id:"Mac"},{s1:navigator.userAgent,s2:"iPhone",id:"iOS"},{s1:navigator.userAgent,s2:"iPad",id:"iOS"},{s1:navigator.userAgent,s2:"Android",id:"Android"},{s1:navigator.platform,s2:"Linux",id:"Linux"}],s=function(){var e={define_property:function(){return!1}(),create_canvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}(),return_response_type:function(e){try{if(-1!==t.inArray(e,["","text","document"]))return!0;if(window.XMLHttpRequest){var n=new XMLHttpRequest;if(n.open("get","/"),"responseType"in n)return n.responseType=e,n.responseType!==e?!1:!0}}catch(i){}return!1},use_data_uri:function(){var t=new Image;return t.onload=function(){e.use_data_uri=1===t.width&&1===t.height},setTimeout(function(){t.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return e.use_data_uri&&("IE"!==a.browser||a.version>=9)},use_data_uri_of:function(t){return e.use_data_uri&&33e3>t||e.use_data_uri_over32kb()},use_fileinput:function(){var t=document.createElement("input");return t.setAttribute("type","file"),!t.disabled}};return function(n){var i=[].slice.call(arguments);return i.shift(),"function"===t.typeOf(e[n])?e[n].apply(this,i):!!e[n]}}(),a={can:s,browser:e(o),version:n(navigator.userAgent)||n(navigator.appVersion),OS:e(r),swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return a}),i(h,[u],function(t){var e=function(t){return"string"!=typeof t?t:document.getElementById(t)},n=function(t,e){var n;return""===t.className?!1:(n=new RegExp("(^|\\s+)"+e+"(\\s+|$)"),n.test(t.className))},i=function(t,e){n(t,e)||(t.className=""===t.className?e:t.className.replace(/\s+$/,"")+" "+e)},o=function(t,e){var n=new RegExp("(^|\\s+)"+e+"(\\s+|$)");t.className=t.className.replace(n,function(t,e,n){return" "===e&&" "===n?" ":""})},r=function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null)[e]:void 0},s=function(e,n){function i(t){var e,n,i=0,o=0;return t&&(n=t.getBoundingClientRect(),e="CSS1Compat"===c.compatMode?c.documentElement:c.body,i=n.left+e.scrollLeft,o=n.top+e.scrollTop),{x:i,y:o}}var o,r,s,a=0,l=0,c=document;if(e=e,n=n||c.body,e&&e.getBoundingClientRect&&"IE"===t.browser&&(!c.documentMode||c.documentMode<8))return r=i(e),s=i(n),{x:r.x-s.x,y:r.y-s.y};for(o=e;o&&o!=n&&o.nodeType;)a+=o.offsetLeft||0,l+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!=n&&o.nodeType;)a-=o.scrollLeft||0,l-=o.scrollTop||0,o=o.parentNode;return{x:a,y:l}},a=function(t){return{w:t.offsetWidth||t.clientWidth,h:t.offsetHeight||t.clientHeight}};return{get:e,hasClass:n,addClass:i,removeClass:o,getStyle:r,getPos:s,getSize:a}}),i(d,[a],function(t){function e(t,e){var n;for(n in t)if(t[n]===e)return n;return null}return{RuntimeError:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": RuntimeError "+this.code}var i={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return t.extend(n,i),n.prototype=Error.prototype,n}(),OperationNotAllowedException:function(){function e(t){this.code=t,this.name="OperationNotAllowedException"}return t.extend(e,{NOT_ALLOWED_ERR:1}),e.prototype=Error.prototype,e}(),ImageError:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": ImageError "+this.code}var i={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return t.extend(n,i),n.prototype=Error.prototype,n}(),FileException:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": FileException "+this.code}var i={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return t.extend(n,i),n.prototype=Error.prototype,n}(),DOMException:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": DOMException "+this.code}var i={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return t.extend(n,i),n.prototype=Error.prototype,n}(),EventException:function(){function e(t){this.code=t,this.name="EventException"}return t.extend(e,{UNSPECIFIED_EVENT_TYPE_ERR:0}),e.prototype=Error.prototype,e}()}}),i(p,[d,a],function(t,e){function n(){var n={};e.extend(this,{uid:null,init:function(){this.uid||(this.uid=e.guid("uid_"))},addEventListener:function(t,i,o,r){var s,a=this;return t=e.trim(t),/\s/.test(t)?void e.each(t.split(/\s+/),function(t){a.addEventListener(t,i,o,r)}):(t=t.toLowerCase(),o=parseInt(o,10)||0,s=n[this.uid]&&n[this.uid][t]||[],s.push({fn:i,priority:o,scope:r||this}),n[this.uid]||(n[this.uid]={}),void(n[this.uid][t]=s))},hasEventListener:function(t){return t?!(!n[this.uid]||!n[this.uid][t]):!!n[this.uid]},removeEventListener:function(t,i){t=t.toLowerCase();var o,r=n[this.uid]&&n[this.uid][t];if(r){if(i){for(o=r.length-1;o>=0;o--)if(r[o].fn===i){r.splice(o,1);break}}else r=[];r.length||(delete n[this.uid][t],e.isEmptyObj(n[this.uid])&&delete n[this.uid])}},removeAllEventListeners:function(){n[this.uid]&&delete n[this.uid]},dispatchEvent:function(i){var o,r,s,a,l={};if("string"!==e.typeOf(i)){if(a=i,"string"!==e.typeOf(a.type))throw new t.EventException(t.EventException.UNSPECIFIED_EVENT_TYPE_ERR);i=a.type,a.total&&a.loaded&&(l.total=a.total,l.loaded=a.loaded),l.async=a.async||!1}if(-1!==i.indexOf("::")?function(t){o=t[0],i=t[1]}(i.split("::")):o=this.uid,i=i.toLowerCase(),r=n[o]&&n[o][i]){r.sort(function(t,e){return e.priority-t.priority}),s=[].slice.call(arguments),s.shift(),l.type=i,s.unshift(l);var c=[];e.each(r,function(t){s[0].target=t.scope,l.async?c.push(function(e){setTimeout(function(){e(t.fn.apply(t.scope,s)===!1)},1)}):c.push(function(e){e(t.fn.apply(t.scope,s)===!1)})}),c.length&&e.inSeries(c)}return!0},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(t){var n;"array"!==e.typeOf(t)&&(t=[t]);for(var i=0;i<t.length;i++)n="on"+t[i],"function"===e.typeOf(this[n])?this.addEventListener(t[i],this[n]):"undefined"===e.typeOf(this[n])&&(this[n]=null)}})}return n.instance=new n,n}),i(f,[],function(){var t=function(t){return unescape(encodeURIComponent(t))},e=function(t){return decodeURIComponent(escape(t))},n=function(t,n){if("function"==typeof window.atob)return n?e(window.atob(t)):window.atob(t);var i,o,r,s,a,l,c,u,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,p=0,f="",g=[];if(!t)return t;t+="";do s=h.indexOf(t.charAt(d++)),a=h.indexOf(t.charAt(d++)),l=h.indexOf(t.charAt(d++)),c=h.indexOf(t.charAt(d++)),u=s<<18|a<<12|l<<6|c,i=255&u>>16,o=255&u>>8,r=255&u,g[p++]=64==l?String.fromCharCode(i):64==c?String.fromCharCode(i,o):String.fromCharCode(i,o,r);while(d<t.length);return f=g.join(""),n?e(f):f},i=function(e,n){if(n&&t(e),"function"==typeof window.btoa)return window.btoa(e);var i,o,r,s,a,l,c,u,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,p=0,f="",g=[];if(!e)return e;do i=e.charCodeAt(d++),o=e.charCodeAt(d++),r=e.charCodeAt(d++),u=i<<16|o<<8|r,s=63&u>>18,a=63&u>>12,l=63&u>>6,c=63&u,g[p++]=h.charAt(s)+h.charAt(a)+h.charAt(l)+h.charAt(c);while(d<e.length);f=g.join("");var m=e.length%3;return(m?f.slice(0,m-3):f)+"===".slice(m||3)};return{utf8_encode:t,utf8_decode:e,atob:n,btoa:i}}),i(g,[a,h,p],function(t,e,n){function i(n,o,s,a,l){function c(e,i){var o=null,r=n&&n.required_caps;return i=i||"browser",null!==this.mode?this.mode:(r&&!t.isEmptyObj(e)&&(t.each(r,function(n,i){if(e.hasOwnProperty(i)){var r=e[i](n);if("string"==typeof r&&(r=[r]),o){if(!(o=t.arrayIntersect(o,r)))return o=!1}else o=r}}),o?this.mode=-1!==t.inArray(i,o)?i:o[0]:o===!1&&(this.mode=!1)),null===this.mode&&(this.mode=i),void(this.mode&&r&&!this.can(r)&&(this.mode=!1)))}var u,h=this,d=t.guid(o+"_");r[d]=this,s=t.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},s),u=function(){var e={};return{exec:function(t,n,i,o){return u[n]&&(e[t]||(e[t]={context:this,instance:new u[n]}),e[t].instance[i])?e[t].instance[i].apply(this,o):void 0},removeInstance:function(t){delete e[t]},removeAllInstances:function(){var n=this;t.each(e,function(e,i){"function"===t.typeOf(e.instance.destroy)&&e.instance.destroy.call(e.context),n.removeInstance(i)})}}}(),t.extend(this,{initialized:!1,uid:d,type:o,mode:null,shimid:d+"_container",clients:0,options:n,can:function(e,n){var o=arguments[2]||s;if("string"===t.typeOf(e)&&"undefined"===t.typeOf(n)&&(e=i.parseCaps(e)),"object"===t.typeOf(e)){for(var r in e)if(!this.can(r,e[r],o))return!1;return!0}return"function"===t.typeOf(o[e])?o[e].call(this,n):n===o[e]},getShimContainer:function(){var n,i=e.get(this.shimid);return i||(n=this.options.container?e.get(this.options.container):document.body,i=document.createElement("div"),i.id=this.shimid,i.className="moxie-shim moxie-shim-"+this.type,t.extend(i.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),n.appendChild(i),n=null),i},getShim:function(){return u},shimExec:function(t,e){var n=[].slice.call(arguments,2);return h.getShim().exec.call(this,this.uid,t,e,n)},exec:function(t,e){var n=[].slice.call(arguments,2);return h[t]&&h[t][e]?h[t][e].apply(this,n):h.shimExec.apply(this,arguments)},destroy:function(){if(h){var t=e.get(this.shimid);t&&t.parentNode.removeChild(t),u&&u.removeAllInstances(),this.unbindAll(),delete r[this.uid],this.uid=null,d=h=u=t=null}}}),c.call(this,a,l)}var o={},r={};return i.order="html5,flash,silverlight,html4",i.getRuntime=function(t){return r[t]?r[t]:!1},i.addConstructor=function(t,e){e.prototype=n.instance,o[t]=e},i.getConstructor=function(t){return o[t]||null},i.getInfo=function(t){var e=i.getRuntime(t);return e?{uid:e.uid,type:e.type,can:function(){return e.can.apply(e,arguments)}}:null},i.parseCaps=function(e){var n={};return"string"!==t.typeOf(e)?e||{}:(t.each(e.split(","),function(t){n[t]=!0}),n)},i.can=function(t,e){var n,o,r=i.getConstructor(t);return r?(n=new r({required_caps:e}),o=n.mode,n.destroy(),!!o):!1},i.thatCan=function(t,e){var n=(e||i.order).split(/\s*,\s*/);for(var o in n)if(i.can(n[o],t))return n[o];return null},i.capTrue=function(){return!0},i.capFalse=function(){return!1},i.capTest=function(t){return function(){return!!t}},i}),i(m,[d,a,g],function(t,e,n){return function i(){var i;e.extend(this,{connectRuntime:function(o){function r(e){var s,l;return e.length?(s=e.shift(),(l=n.getConstructor(s))?(i=new l(o),i.bind("Init",function(){i.initialized=!0,setTimeout(function(){i.clients++,a.trigger("RuntimeInit",i)},1)}),i.bind("Error",function(){i.destroy(),r(e)}),i.mode?void i.init():void i.trigger("Error")):void r(e)):(a.trigger("RuntimeError",new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)),void(i=null))}var s,a=this;if("string"===e.typeOf(o)?s=o:"string"===e.typeOf(o.ruid)&&(s=o.ruid),s){if(i=n.getRuntime(s))return i.clients++,i;throw new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)}r((o.runtime_order||n.order).split(/\s*,\s*/))},getRuntime:function(){return i&&i.uid?i:(i=null,null)},disconnectRuntime:function(){i&&--i.clients<=0&&(i.destroy(),i=null)}})}}),i(v,[a,f,m],function(t,e,n){function i(r,s){function a(e,n,r){var s,a=o[this.uid];return"string"===t.typeOf(a)&&a.length?(s=new i(null,{type:r,size:n-e}),s.detach(a.substr(e,s.size)),s):null}n.call(this),r&&this.connectRuntime(r),s?"string"===t.typeOf(s)&&(s={data:s}):s={},t.extend(this,{uid:s.uid||t.guid("uid_"),ruid:r,size:s.size||0,type:s.type||"",slice:function(t,e,n){return this.isDetached()?a.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),t,e,n)},getSource:function(){return o[this.uid]?o[this.uid]:null},detach:function(t){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy",o[this.uid]),this.disconnectRuntime(),this.ruid=null),t=t||"";var n=t.match(/^data:([^;]*);base64,/);n&&(this.type=n[1],t=e.atob(t.substring(t.indexOf("base64,")+7))),this.size=t.length,o[this.uid]=t},isDetached:function(){return!this.ruid&&"string"===t.typeOf(o[this.uid])},destroy:function(){this.detach(),delete o[this.uid]}}),s.data?this.detach(s.data):o[this.uid]=s}var o={};return i}),i(y,[a,c,v],function(t,e,n){function i(i,o){var r,s;if(o||(o={}),s=o.type&&""!==o.type?o.type:e.getFileMime(o.name),o.name)r=o.name.replace(/\\/g,"/"),r=r.substr(r.lastIndexOf("/")+1);else{var a=s.split("/")[0];r=t.guid((""!==a?a:"file")+"_"),e.extensions[s]&&(r+="."+e.extensions[s][0])}n.apply(this,arguments),t.extend(this,{type:s||"",name:r||t.guid("file_"),lastModifiedDate:o.lastModifiedDate||(new Date).toLocaleString()})}return i.prototype=n.prototype,i}),i(b,[a,c,h,d,p,l,y,g,m],function(t,e,n,i,o,r,s,a,l){function c(o){var c,h,d,p=this;if(-1!==t.inArray(t.typeOf(o),["string","node"])&&(o={browse_button:o}),h=n.get(o.browse_button),!h)throw new i.DOMException(i.DOMException.NOT_FOUND_ERR);d={accept:[{title:r.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:h.parentNode||document.body},o=t.extend({},d,o),"string"==typeof o.required_caps&&(o.required_caps=a.parseCaps(o.required_caps)),"string"==typeof o.accept&&(o.accept=e.mimes2extList(o.accept)),c=n.get(o.container),c||(c=document.body),"static"===n.getStyle(c,"position")&&(c.style.position="relative"),c=h=null,l.call(p),t.extend(p,{uid:t.guid("uid_"),ruid:null,files:null,init:function(){p.convertEventPropsToHandlers(u),p.bind("RuntimeInit",function(e,i){p.ruid=i.uid,p.bind("Ready",function(){p.trigger("Refresh")},999),p.bind("Change",function(){var e=i.exec.call(p,"FileInput","getFiles");p.files=[],t.each(e,function(t){return 0===t.size?!0:void p.files.push(new s(p.ruid,t))})},999),p.bind("Refresh",function(){var e,r,s,a;s=n.get(o.browse_button),a=n.get(i.shimid),s&&(e=n.getPos(s,n.get(o.container)),r=n.getSize(s),a&&t.extend(a.style,{top:e.y+"px",left:e.x+"px",width:r.w+"px",height:r.h+"px"})),a=s=null}),i.exec.call(p,"FileInput","init",o)}),p.connectRuntime(t.extend({},o,{required_caps:{select_file:!0}}))},disable:function(e){var n=this.getRuntime();n&&n.exec.call(this,"FileInput","disable","undefined"===t.typeOf(e)?!0:e)},refresh:function(){p.trigger("Refresh")},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===t.typeOf(this.files)&&t.each(this.files,function(t){t.destroy()}),this.files=null}})}var u=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return c.prototype=o.instance,
c}),i(_,[l,h,d,a,y,m,p,c],function(t,e,n,i,o,r,s,a){function l(n){var s,l=this;"string"==typeof n&&(n={drop_zone:n}),s={accept:[{title:t.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},n="object"==typeof n?i.extend({},s,n):s,n.container=e.get(n.drop_zone)||document.body,"static"===e.getStyle(n.container,"position")&&(n.container.style.position="relative"),"string"==typeof n.accept&&(n.accept=a.mimes2extList(n.accept)),r.call(l),i.extend(l,{uid:i.guid("uid_"),ruid:null,files:null,init:function(){l.convertEventPropsToHandlers(c),l.bind("RuntimeInit",function(t,e){l.ruid=e.uid,l.bind("Drop",function(){var t=e.exec.call(l,"FileDrop","getFiles");l.files=[],i.each(t,function(t){l.files.push(new o(l.ruid,t))})},999),e.exec.call(l,"FileDrop","init",n),l.dispatchEvent("ready")}),l.connectRuntime(n)},destroy:function(){var t=this.getRuntime();t&&(t.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var c=["ready","dragenter","dragleave","drop","error"];return l.prototype=s.instance,l}),i(w,[a,m,p],function(t,e,n){function i(){this.uid=t.guid("uid_"),e.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return i.prototype=n.instance,i}),i(x,[a,f,d,p,v,y,w],function(t,e,n,i,o,r,s){function a(){function i(t,i){function u(t){c.readyState=a.DONE,c.error=t,c.trigger("error"),h()}function h(){r.destroy(),r=null,c.trigger("loadend")}function d(e){r.bind("Error",function(t,e){u(e)}),r.bind("Progress",function(t){c.result=e.exec.call(r,"FileReader","getResult"),c.trigger(t)}),r.bind("Load",function(t){c.readyState=a.DONE,c.result=e.exec.call(r,"FileReader","getResult"),c.trigger(t),h()}),e.exec.call(r,"FileReader","read",t,i)}if(r=new s,this.convertEventPropsToHandlers(l),this.readyState===a.LOADING)return u(new n.DOMException(n.DOMException.INVALID_STATE_ERR));if(this.readyState=a.LOADING,this.trigger("loadstart"),i instanceof o)if(i.isDetached()){var p=i.getSource();switch(t){case"readAsText":case"readAsBinaryString":this.result=p;break;case"readAsDataURL":this.result="data:"+i.type+";base64,"+e.btoa(p)}this.readyState=a.DONE,this.trigger("load"),h()}else d(r.connectRuntime(i.ruid));else u(new n.DOMException(n.DOMException.NOT_FOUND_ERR))}var r,c=this;t.extend(this,{uid:t.guid("uid_"),readyState:a.EMPTY,result:null,error:null,readAsBinaryString:function(t){i.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){i.call(this,"readAsDataURL",t)},readAsText:function(t){i.call(this,"readAsText",t)},abort:function(){this.result=null,-1===t.inArray(this.readyState,[a.EMPTY,a.DONE])&&(this.readyState===a.LOADING&&(this.readyState=a.DONE),r&&r.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),r&&(r.getRuntime().exec.call(this,"FileReader","destroy"),r.disconnectRuntime()),c=r=null}})}var l=["loadstart","progress","load","abort","error","loadend"];return a.EMPTY=0,a.LOADING=1,a.DONE=2,a.prototype=i.instance,a}),i(C,[],function(){var t=function(t){for(var e=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],n=e.length,i={http:80,https:443},o={},r=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,s=r.exec(t||"");n--;)s[n]&&(o[e[n]]=s[n]);if(/^[^\/]/.test(o.path)&&!o.scheme){var a=document.location.pathname;/(\/|\/[^\.]+)$/.test(a)||(a=a.replace(/[^\/]+$/,"")),o.host=document.location.hostname,o.path=a+(o.path||"")}return o.scheme||(o.scheme=document.location.protocol.replace(/:$/,"")),o.host||(o.host=document.location.hostname),o.port||(o.port=document.location.port||i[o.scheme]||80),o.port=parseInt(o.port,10),o.path||(o.path="/"),delete o.source,o},e=function(e){var n={http:80,https:443},i=t(e);return i.scheme+"://"+i.host+(i.port!==n[i.scheme]?":"+i.port:"")+i.path+(i.query?i.query:"")},n=function(e){function n(t){return[t.scheme,t.host,t.port].join("/")}return"string"==typeof e&&(e=t(e)),n(t())===n(e)};return{parseUrl:t,resolveUrl:e,hasSameOrigin:n}}),i(k,[a,m,f],function(t,e,n){return function(){function i(t,e){if(!e.isDetached()){var i=this.connectRuntime(e.ruid).exec.call(this,"FileReaderSync","read",t,e);return this.disconnectRuntime(),i}var o=e.getSource();switch(t){case"readAsBinaryString":return o;case"readAsDataURL":return"data:"+e.type+";base64,"+n.btoa(o);case"readAsText":for(var r="",s=0,a=o.length;a>s;s++)r+=String.fromCharCode(o[s]);return r}}e.call(this),t.extend(this,{uid:t.guid("uid_"),readAsBinaryString:function(t){return i.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){return i.call(this,"readAsDataURL",t)},readAsText:function(t){return i.call(this,"readAsText",t)}})}}),i(S,[d,a,v],function(t,e,n){function i(){var t,i={},o="";e.extend(this,{append:function(o,r){var s=this,a=e.typeOf(r);r instanceof n?(t&&delete i[t],t=o,i[o]=[r]):"array"===a?(o+="[]",e.each(r,function(t){s.append.call(s,o,t)})):"object"===a?e.each(r,function(t,e){s.append.call(s,o+"["+e+"]",t)}):(r=r.toString(),i[o]||(i[o]=[]),i[o].push(r))},hasBlob:function(){return!!t},getBlob:function(){return i[t]&&i[t][0]||null},getBlobName:function(){return t||null},each:function(t){e.each(i,function(n,i){e.each(n,function(e){t(e,i)})})},destroy:function(){t=null,o="",i={}}})}return i}),i(T,[a,d,p,f,C,g,w,v,k,S,u,c],function(t,e,n,i,o,r,s,a,l,c,u,h){function d(){this.uid=t.guid("uid_")}function p(){function n(t,e){return T.hasOwnProperty(t)?1===arguments.length?u.can("define_property")?T[t]:S[t]:void(u.can("define_property")?T[t]=e:S[t]=e):void 0}function l(e){function i(){C.destroy(),C=null,a.dispatchEvent("loadend"),a=null}function o(o){C.bind("LoadStart",function(t){n("readyState",p.LOADING),a.dispatchEvent("readystatechange"),a.dispatchEvent(t),R&&a.upload.dispatchEvent(t)}),C.bind("Progress",function(t){n("readyState")!==p.LOADING&&(n("readyState",p.LOADING),a.dispatchEvent("readystatechange")),a.dispatchEvent(t)}),C.bind("UploadProgress",function(t){R&&a.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:t.total,loaded:t.loaded})}),C.bind("Load",function(e){n("readyState",p.DONE),n("status",Number(o.exec.call(C,"XMLHttpRequest","getStatus")||0)),n("statusText",f[n("status")]||""),n("response",o.exec.call(C,"XMLHttpRequest","getResponse",n("responseType"))),~t.inArray(n("responseType"),["text",""])?n("responseText",n("response")):"document"===n("responseType")&&n("responseXML",n("response")),$=o.exec.call(C,"XMLHttpRequest","getAllResponseHeaders"),a.dispatchEvent("readystatechange"),n("status")>0?(R&&a.upload.dispatchEvent(e),a.dispatchEvent(e)):(F=!0,a.dispatchEvent("error")),i()}),C.bind("Abort",function(t){a.dispatchEvent(t),i()}),C.bind("Error",function(t){F=!0,n("readyState",p.DONE),a.dispatchEvent("readystatechange"),O=!0,a.dispatchEvent(t),i()}),o.exec.call(C,"XMLHttpRequest","send",{url:v,method:y,async:E,user:b,password:_,headers:M,mimeType:P,encoding:D,responseType:a.responseType,withCredentials:a.withCredentials,options:H},e)}var a=this;w=(new Date).getTime(),C=new s,"string"==typeof H.required_caps&&(H.required_caps=r.parseCaps(H.required_caps)),H.required_caps=t.extend({},H.required_caps,{return_response_type:a.responseType}),e instanceof c&&(H.required_caps.send_multipart=!0),N||(H.required_caps.do_cors=!0),H.ruid?o(C.connectRuntime(H)):(C.bind("RuntimeInit",function(t,e){o(e)}),C.bind("RuntimeError",function(t,e){a.dispatchEvent("RuntimeError",e)}),C.connectRuntime(H))}function m(){n("responseText",""),n("responseXML",null),n("response",null),n("status",0),n("statusText",""),w=x=null}var v,y,b,_,w,x,C,k,S=this,T={timeout:0,readyState:p.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},E=!0,M={},D=null,P=null,A=!1,I=!1,R=!1,O=!1,F=!1,N=!1,z=null,L=null,H={},$="";t.extend(this,T,{uid:t.guid("uid_"),upload:new d,open:function(r,s,a,l,c){var u;if(!r||!s)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(r)||i.utf8_encode(r)!==r)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(~t.inArray(r.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(y=r.toUpperCase()),~t.inArray(y,["CONNECT","TRACE","TRACK"]))throw new e.DOMException(e.DOMException.SECURITY_ERR);if(s=i.utf8_encode(s),u=o.parseUrl(s),N=o.hasSameOrigin(u),v=o.resolveUrl(s),(l||c)&&!N)throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);if(b=l||u.user,_=c||u.pass,E=a||!0,E===!1&&(n("timeout")||n("withCredentials")||""!==n("responseType")))throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);A=!E,I=!1,M={},m.call(this),n("readyState",p.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(o,r){var s=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(n("readyState")!==p.OPENED||I)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(o)||i.utf8_encode(o)!==o)throw new e.DOMException(e.DOMException.SYNTAX_ERR);return o=t.trim(o).toLowerCase(),~t.inArray(o,s)||/^(proxy\-|sec\-)/.test(o)?!1:(M[o]?M[o]+=", "+r:M[o]=r,!0)},getAllResponseHeaders:function(){return $||""},getResponseHeader:function(e){return e=e.toLowerCase(),F||~t.inArray(e,["set-cookie","set-cookie2"])?null:$&&""!==$&&(k||(k={},t.each($.split(/\r\n/),function(e){var n=e.split(/:\s+/);2===n.length&&(n[0]=t.trim(n[0]),k[n[0].toLowerCase()]={header:n[0],value:t.trim(n[1])})})),k.hasOwnProperty(e))?k[e].header+": "+k[e].value:null},overrideMimeType:function(i){var o,r;if(~t.inArray(n("readyState"),[p.LOADING,p.DONE]))throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(i=t.trim(i.toLowerCase()),/;/.test(i)&&(o=i.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(i=o[1],o[2]&&(r=o[2])),!h.mimes[i])throw new e.DOMException(e.DOMException.SYNTAX_ERR);z=i,L=r},send:function(n,o){if(H="string"===t.typeOf(o)?{ruid:o}:o?o:{},this.convertEventPropsToHandlers(g),this.upload.convertEventPropsToHandlers(g),this.readyState!==p.OPENED||I)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(n instanceof a)H.ruid=n.ruid,P=n.type||"application/octet-stream";else if(n instanceof c){if(n.hasBlob()){var r=n.getBlob();H.ruid=r.ruid,P=r.type||"application/octet-stream"}}else"string"==typeof n&&(D="UTF-8",P="text/plain;charset=UTF-8",n=i.utf8_encode(n));this.withCredentials||(this.withCredentials=H.required_caps&&H.required_caps.send_browser_cookies&&!N),R=!A&&this.upload.hasEventListener(),F=!1,O=!n,A||(I=!0),l.call(this,n)},abort:function(){if(F=!0,A=!1,~t.inArray(n("readyState"),[p.UNSENT,p.OPENED,p.DONE]))n("readyState",p.UNSENT);else{if(n("readyState",p.DONE),I=!1,!C)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);C.getRuntime().exec.call(C,"XMLHttpRequest","abort",O),O=!0}},destroy:function(){C&&("function"===t.typeOf(C.destroy)&&C.destroy(),C=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var f={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};d.prototype=n.instance;var g=["loadstart","progress","abort","error","load","timeout","loadend"];return p.UNSENT=0,p.OPENED=1,p.HEADERS_RECEIVED=2,p.LOADING=3,p.DONE=4,p.prototype=n.instance,p}),i(E,[a,f,m,p],function(t,e,n,i){function o(){function i(){u=h=0,c=this.result=null}function r(e,n){var i=this;l=n,i.bind("TransportingProgress",function(e){h=e.loaded,u>h&&-1===t.inArray(i.state,[o.IDLE,o.DONE])&&s.call(i)},999),i.bind("TransportingComplete",function(){h=u,i.state=o.DONE,c=null,i.result=l.exec.call(i,"Transporter","getAsBlob",e||"")},999),i.state=o.BUSY,i.trigger("TransportingStarted"),s.call(i)}function s(){var t,n=this,i=u-h;d>i&&(d=i),t=e.btoa(c.substr(h,d)),l.exec.call(n,"Transporter","receive",t,u)}var a,l,c,u,h,d;n.call(this),t.extend(this,{uid:t.guid("uid_"),state:o.IDLE,result:null,transport:function(e,n,o){var s=this;if(o=t.extend({chunk_size:204798},o),(a=o.chunk_size%3)&&(o.chunk_size+=3-a),d=o.chunk_size,i.call(this),c=e,u=e.length,"string"===t.typeOf(o)||o.ruid)r.call(s,n,this.connectRuntime(o));else{var l=function(t,e){s.unbind("RuntimeInit",l),r.call(s,n,e)};this.bind("RuntimeInit",l),this.connectRuntime(o)}},abort:function(){var t=this;t.state=o.IDLE,l&&(l.exec.call(t,"Transporter","clear"),t.trigger("TransportingAborted")),i.call(t)},destroy:function(){this.unbindAll(),l=null,this.disconnectRuntime(),i.call(this)}})}return o.IDLE=0,o.BUSY=1,o.DONE=2,o.prototype=i.instance,o}),i(M,[],function(){return!!window.JSON&&JSON.parse||function(){var t,n,i,o,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},s=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},a=function(e){return e&&e!==n&&s("Expected '"+e+"' instead of '"+n+"'"),n=i.charAt(t),t+=1,n},l=function(){var t,e="";for("-"===n&&(e="-",a("-"));n>="0"&&"9">=n;)e+=n,a();if("."===n)for(e+=".";a()&&n>="0"&&"9">=n;)e+=n;if("e"===n||"E"===n)for(e+=n,a(),("-"===n||"+"===n)&&(e+=n,a());n>="0"&&"9">=n;)e+=n,a();return t=+e,isFinite(t)?t:void s("Bad number")},c=function(){var t,e,i,o="";if('"'===n)for(;a();){if('"'===n)return a(),o;if("\\"===n)if(a(),"u"===n){for(i=0,e=0;4>e&&(t=parseInt(a(),16),isFinite(t));e+=1)i=16*i+t;o+=String.fromCharCode(i)}else{if("string"!=typeof r[n])break;o+=r[n]}else o+=n}s("Bad string")},u=function(){for(;n&&" ">=n;)a()},h=function(){switch(n){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}s("Unexpected '"+n+"'")},d=function(){var t=[];if("["===n){if(a("["),u(),"]"===n)return a("]"),t;for(;n;){if(t.push(o()),u(),"]"===n)return a("]"),t;a(","),u()}}s("Bad array")},p=function(){var t,e={};if("{"===n){if(a("{"),u(),"}"===n)return a("}"),e;for(;n;){if(t=c(),u(),a(":"),Object.hasOwnProperty.call(e,t)&&s('Duplicate key "'+t+'"'),e[t]=o(),u(),"}"===n)return a("}"),e;a(","),u()}}s("Bad object")};return o=function(){switch(u(),n){case"{":return p();case"[":return d();case'"':return c();case"-":return l();default:return n>="0"&&"9">=n?l():h()}},function(r,a){var l;return i=r,t=0,n=" ",l=o(),u(),n&&s("Syntax error"),"function"==typeof a?function c(t,n){var i,o,r=t[n];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o=c(r,i),o!==e?r[i]=o:delete r[i]);return a.call(t,n,r)}({"":l},""):l}}()}),i(D,[a,h,d,k,T,g,m,E,u,p,v,y,f,M],function(t,e,n,i,o,r,s,a,l,c,u,h,d,p){function f(){function i(e){if(e||(e=this.getRuntime().exec.call(this,"Image","getInfo")),e)if("string"===t.typeOf(e.meta))try{this.meta=p(e.meta)}catch(n){}else this.meta=e.meta;t.extend(this,{size:parseInt(e.size,10),width:parseInt(e.width,10),height:parseInt(e.height,10),type:e.type}),""===this.name&&(this.name=e.name)}function c(e){var i=t.typeOf(e);try{if(e instanceof f){if(!e.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);m.apply(this,arguments)}else if(e instanceof u){if(!~t.inArray(e.type,["image/jpeg","image/png"]))throw new n.ImageError(n.ImageError.WRONG_FORMAT);v.apply(this,arguments)}else if(-1!==t.inArray(i,["blob","file"]))c.call(this,new h(null,e),arguments[1]);else if("string"===i)/^data:[^;]*;base64,/.test(e)?c.call(this,new u(null,{data:e}),arguments[1]):y.apply(this,arguments);else{if("node"!==i||"img"!==e.nodeName.toLowerCase())throw new n.DOMException(n.DOMException.TYPE_MISMATCH_ERR);c.call(this,e.src,arguments[1])}}catch(o){this.trigger("error",o)}}function m(e,n){var i=this.connectRuntime(e.ruid);this.ruid=i.uid,i.exec.call(this,"Image","loadFromImage",e,"undefined"===t.typeOf(n)?!0:n)}function v(e,n){function i(t){o.ruid=t.uid,t.exec.call(o,"Image","loadFromBlob",e)}var o=this;o.name=e.name||"",e.isDetached()?(this.bind("RuntimeInit",function(t,e){i(e)}),n&&"string"==typeof n.required_caps&&(n.required_caps=r.parseCaps(n.required_caps)),this.connectRuntime(t.extend({required_caps:{access_image_binary:!0,resize_image:!0}},n))):i(this.connectRuntime(e.ruid))}function y(t,e){var n,i=this;n=new o,n.open("get",t),n.responseType="blob",n.onprogress=function(t){i.trigger(t)},n.onload=function(){v.call(i,n.response,!0)},n.onerror=function(t){i.trigger(t)},n.onloadend=function(){n.destroy()},n.bind("RuntimeError",function(t,e){i.trigger("RuntimeError",e)}),n.send(null,e)}s.call(this),t.extend(this,{uid:t.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){i.call(this)},999),this.convertEventPropsToHandlers(g),c.apply(this,arguments)},downsize:function(e,i,o,r){try{if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(this.width>f.MAX_RESIZE_WIDTH||this.height>f.MAX_RESIZE_HEIGHT)throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);(!e&&!i||"undefined"===t.typeOf(o))&&(o=!1),e=e||this.width,i=i||this.height,r="undefined"===t.typeOf(r)?!0:!!r,this.getRuntime().exec.call(this,"Image","downsize",e,i,o,r)}catch(s){this.trigger("error",s)}},crop:function(t,e,n){this.downsize(t,e,!0,n)},getAsCanvas:function(){if(!l.can("create_canvas"))throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);var t=this.connectRuntime(this.ruid);return t.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(t,e){if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);return t||(t="image/jpeg"),"image/jpeg"!==t||e||(e=90),this.getRuntime().exec.call(this,"Image","getAsBlob",t,e)},getAsDataURL:function(t,e){if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);return this.getRuntime().exec.call(this,"Image","getAsDataURL",t,e)},getAsBinaryString:function(t,e){var n=this.getAsDataURL(t,e);return d.atob(n.substring(n.indexOf("base64,")+7))},embed:function(i){function o(){if(l.can("create_canvas")){var e=r.getAsCanvas();if(e)return i.appendChild(e),e=null,r.destroy(),void p.trigger("embedded")}var o=r.getAsDataURL(s,c);if(!o)throw new n.ImageError(n.ImageError.WRONG_FORMAT);if(l.can("use_data_uri_of",o.length))i.innerHTML='<img src="'+o+'" width="'+r.width+'" height="'+r.height+'" />',r.destroy(),p.trigger("embedded");else{var u=new a;u.bind("TransportingComplete",function(){h=p.connectRuntime(this.result.ruid),p.bind("Embedded",function(){t.extend(h.getShimContainer().style,{top:"0px",left:"0px",width:r.width+"px",height:r.height+"px"}),h=null},999),h.exec.call(p,"ImageView","display",this.result.uid,m,v),r.destroy()}),u.transport(d.atob(o.substring(o.indexOf("base64,")+7)),s,t.extend({},g,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:i}))}}var r,s,c,u,h,p=this,g=arguments[1]||{},m=this.width,v=this.height;try{if(!(i=e.get(i)))throw new n.DOMException(n.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(this.width>f.MAX_RESIZE_WIDTH||this.height>f.MAX_RESIZE_HEIGHT)throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);if(s=g.type||this.type||"image/jpeg",c=g.quality||90,u="undefined"!==t.typeOf(g.crop)?g.crop:!1,g.width)m=g.width,v=g.height||m;else{var y=e.getSize(i);y.w&&y.h&&(m=y.w,v=y.h)}return r=new f,r.bind("Resize",function(){o.call(p)}),r.bind("Load",function(){r.downsize(m,v,u,!1)}),r.clone(this,!1),r}catch(b){this.trigger("error",b)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var g=["progress","load","error","resize","embedded"];return f.MAX_RESIZE_WIDTH=6500,f.MAX_RESIZE_HEIGHT=6500,f.prototype=c.instance,f}),i(P,[a,d,g,u],function(t,e,n,i){function o(e){var o=this,a=n.capTest,l=n.capTrue,c=t.extend({access_binary:a(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return o.can("access_binary")&&!!s.Image},display_media:a(i.can("create_canvas")||i.can("use_data_uri_over32kb")),do_cors:a(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:a(function(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&("IE"!==i.browser||i.version>9)}()),filter_by_extension:a(function(){return"Chrome"===i.browser&&i.version>=28||"IE"===i.browser&&i.version>=10}()),return_response_headers:l,return_response_type:function(t){return"json"===t?!0:i.can("return_response_type",t)},return_status_code:l,report_upload_progress:a(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return o.can("access_binary")&&i.can("create_canvas")},select_file:function(){return i.can("use_fileinput")&&window.File},select_folder:function(){return o.can("select_file")&&"Chrome"===i.browser&&i.version>=21},select_multiple:function(){return o.can("select_file")&&!("Safari"===i.browser&&"Windows"===i.OS)},send_binary_string:a(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:a(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||o.can("send_binary_string")},slice_blob:a(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return o.can("slice_blob")&&o.can("send_multipart")},summon_file_dialog:a(function(){return"Firefox"===i.browser&&i.version>=4||"Opera"===i.browser&&i.version>=12||"IE"===i.browser&&i.version>=10||!!~t.inArray(i.browser,["Chrome","Safari"])}()),upload_filesize:l},arguments[2]);n.call(this,e,arguments[1]||r,c),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(o),t=o=null}}(this.destroy)}),t.extend(this.getShim(),s)}var r="html5",s={};return n.addConstructor(r,o),s}),i(A,[P,v],function(t,e){function n(){function t(t,e,n){var i;if(!window.File.prototype.slice)return(i=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?i.call(t,e,n):null;try{return t.slice(),t.slice(e,n)}catch(o){return t.slice(e,n-e)}}this.slice=function(){return new e(this.getRuntime().uid,t.apply(this,arguments))}}return t.Blob=n}),i(I,[a],function(t){function e(){this.returnValue=!1}function n(){this.cancelBubble=!0}var i={},o="moxie_"+t.guid(),r=function(r,s,a,l){var c,u;s=s.toLowerCase(),r.addEventListener?(c=a,r.addEventListener(s,c,!1)):r.attachEvent&&(c=function(){var t=window.event;t.target||(t.target=t.srcElement),t.preventDefault=e,t.stopPropagation=n,a(t)},r.attachEvent("on"+s,c)),r[o]||(r[o]=t.guid()),i.hasOwnProperty(r[o])||(i[r[o]]={}),u=i[r[o]],u.hasOwnProperty(s)||(u[s]=[]),u[s].push({func:c,orig:a,key:l})},s=function(e,n,r){var s,a;if(n=n.toLowerCase(),e[o]&&i[e[o]]&&i[e[o]][n]){s=i[e[o]][n];for(var l=s.length-1;l>=0&&(s[l].orig!==r&&s[l].key!==r||(e.removeEventListener?e.removeEventListener(n,s[l].func,!1):e.detachEvent&&e.detachEvent("on"+n,s[l].func),s[l].orig=null,s[l].func=null,s.splice(l,1),r===a));l--);if(s.length||delete i[e[o]][n],t.isEmptyObj(i[e[o]])){delete i[e[o]];try{delete e[o]}catch(c){e[o]=a}}}},a=function(e,n){e&&e[o]&&t.each(i[e[o]],function(t,i){s(e,i,n)})};return{addEvent:r,removeEvent:s,removeAllEvents:a}}),i(R,[P,a,h,I,c,u],function(t,e,n,i,o,r){function s(){var t,s=[];e.extend(this,{init:function(a){var l,c,u,h,d,p,f=this,g=f.getRuntime();t=a,s=[],u=t.accept.mimes||o.extList2mimes(t.accept,g.can("filter_by_extension")),c=g.getShimContainer(),c.innerHTML='<input id="'+g.uid+'" type="file" style="font-size:999px;opacity:0;"'+(t.multiple&&g.can("select_multiple")?"multiple":"")+(t.directory&&g.can("select_folder")?"webkitdirectory directory":"")+(u?' accept="'+u.join(",")+'"':"")+" />",l=n.get(g.uid),e.extend(l.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),h=n.get(t.browse_button),g.can("summon_file_dialog")&&("static"===n.getStyle(h,"position")&&(h.style.position="relative"),d=parseInt(n.getStyle(h,"z-index"),10)||1,h.style.zIndex=d,c.style.zIndex=d-1,i.addEvent(h,"click",function(t){var e=n.get(g.uid);e&&!e.disabled&&e.click(),t.preventDefault()},f.uid)),p=g.can("summon_file_dialog")?h:c,i.addEvent(p,"mouseover",function(){f.trigger("mouseenter")},f.uid),i.addEvent(p,"mouseout",function(){f.trigger("mouseleave")},f.uid),i.addEvent(p,"mousedown",function(){f.trigger("mousedown")},f.uid),i.addEvent(n.get(t.container),"mouseup",function(){f.trigger("mouseup")},f.uid),l.onchange=function m(){if(s=[],t.directory?e.each(this.files,function(t){"."!==t.name&&s.push(t)}):s=[].slice.call(this.files),"IE"!==r.browser)this.value="";else{var n=this.cloneNode(!0);this.parentNode.replaceChild(n,this),n.onchange=m}f.trigger("change")},f.trigger({type:"ready",async:!0}),c=null},getFiles:function(){return s},disable:function(t){var e,i=this.getRuntime();(e=n.get(i.uid))&&(e.disabled=!!t)},destroy:function(){var e=this.getRuntime(),o=e.getShimContainer();i.removeAllEvents(o,this.uid),i.removeAllEvents(t&&n.get(t.container),this.uid),i.removeAllEvents(t&&n.get(t.browse_button),this.uid),o&&(o.innerHTML=""),s=t=null}})}return t.FileInput=s}),i(O,[P,a,h,I,c],function(t,e,n,i,o){function r(){function t(t){for(var n=[],i=0;i<t.length;i++)[].push.apply(n,t[i].extensions.split(/\s*,\s*/));return-1===e.inArray("*",n)?n:[]}function r(t){var n=o.getFileExtension(t.name);return!n||!h.length||-1!==e.inArray(n,h)}function s(t,n){var i=[];e.each(t,function(t){i.push(function(e){a(t,e)})}),e.inSeries(i,function(){n()})}function a(t,e){t.isFile?t.file(function(t){r(t)&&u.push(t),e()},function(){e()}):t.isDirectory?l(t,e):e()}function l(t,e){function n(t){o.readEntries(function(e){e.length?([].push.apply(i,e),n(t)):t()},t)}var i=[],o=t.createReader();n(function(){s(i,e)})}var c,u=[],h=[];e.extend(this,{init:function(n){var o,a=this;c=n,h=t(c.accept),o=c.container,i.addEvent(o,"dragover",function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="copy"},a.uid),i.addEvent(o,"drop",function(t){if(t.preventDefault(),t.stopPropagation(),u=[],t.dataTransfer.items&&t.dataTransfer.items[0].webkitGetAsEntry){var n=[];e.each(t.dataTransfer.items,function(t){n.push(t.webkitGetAsEntry())}),s(n,function(){a.trigger("drop")})}else e.each(t.dataTransfer.files,function(t){r(t)&&u.push(t)}),a.trigger("drop")},a.uid),i.addEvent(o,"dragenter",function(t){t.preventDefault(),t.stopPropagation(),a.trigger("dragenter")},a.uid),i.addEvent(o,"dragleave",function(t){t.preventDefault(),t.stopPropagation(),a.trigger("dragleave")},a.uid)},getFiles:function(){return u},destroy:function(){i.removeAllEvents(c&&n.get(c.container),this.uid),u=h=c=null}})}return t.FileDrop=r}),i(F,[P,f,a],function(t,e,n){function i(){function t(t){return e.atob(t.substring(t.indexOf("base64,")+7))}var i,o=!1;n.extend(this,{read:function(t,e){var r=this;i=new window.FileReader,i.addEventListener("progress",function(t){r.trigger(t)}),i.addEventListener("load",function(t){r.trigger(t)}),i.addEventListener("error",function(t){r.trigger(t,i.error)}),i.addEventListener("loadend",function(){i=null}),"function"===n.typeOf(i[t])?(o=!1,i[t](e.getSource())):"readAsBinaryString"===t&&(o=!0,i.readAsDataURL(e.getSource()))},getResult:function(){return i&&i.result?o?t(i.result):i.result:null},abort:function(){i&&i.abort()},destroy:function(){i=null}})}return t.FileReader=i}),i(N,[P,a,c,C,y,v,S,d,u,M],function(t,e,n,i,o,r,s,a,l,c){function u(){function t(t,e){var n,i,o=this;n=e.getBlob().getSource(),i=new window.FileReader,i.onload=function(){e.append(e.getBlobName(),new r(null,{type:n.type,data:i.result})),self.send.call(o,t,e)},i.readAsBinaryString(n)}function u(){return!window.XMLHttpRequest||"IE"===l.browser&&l.version<8?function(){for(var t=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e])}catch(n){}}():new window.XMLHttpRequest}function h(t){var e=t.responseXML,n=t.responseText;return"IE"===l.browser&&n&&e&&!e.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(t.getResponseHeader("Content-Type"))&&(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.validateOnParse=!1,e.loadXML(n)),e&&("IE"===l.browser&&0!==e.parseError||!e.documentElement||"parsererror"===e.documentElement.tagName)?null:e}function d(t){var e="----moxieboundary"+(new Date).getTime(),n="--",i="\r\n",o="",s=this.getRuntime();if(!s.can("send_binary_string"))throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);return p.setRequestHeader("Content-Type","multipart/form-data; boundary="+e),t.each(function(t,s){o+=t instanceof r?n+e+i+'Content-Disposition: form-data; name="'+s+'"; filename="'+unescape(encodeURIComponent(t.name||"blob"))+'"'+i+"Content-Type: "+t.type+i+i+t.getSource()+i:n+e+i+'Content-Disposition: form-data; name="'+s+'"'+i+i+unescape(encodeURIComponent(t))+i}),o+=n+e+n+i}var p,f;e.extend(this,{send:function(n,o){var a=this,c="Mozilla"===l.browser&&l.version>=4&&l.version<7,h="Android Browser"===l.browser,g=!1;if(f=n.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),p=u(),p.open(n.method,n.url,n.async,n.user,n.password),o instanceof r)o.isDetached()&&(g=!0),o=o.getSource();else if(o instanceof s){if(o.hasBlob())if(o.getBlob().isDetached())o=d.call(a,o),g=!0;else if((c||h)&&"blob"===e.typeOf(o.getBlob().getSource())&&window.FileReader)return void t.call(a,n,o);if(o instanceof s){var m=new window.FormData;o.each(function(t,e){t instanceof r?m.append(e,t.getSource()):m.append(e,t)}),o=m}}p.upload?(n.withCredentials&&(p.withCredentials=!0),p.addEventListener("load",function(t){a.trigger(t)}),p.addEventListener("error",function(t){a.trigger(t)}),p.addEventListener("progress",function(t){a.trigger(t)}),p.upload.addEventListener("progress",function(t){a.trigger({type:"UploadProgress",loaded:t.loaded,total:t.total})})):p.onreadystatechange=function(){switch(p.readyState){case 1:break;case 2:break;case 3:var t,e;try{i.hasSameOrigin(n.url)&&(t=p.getResponseHeader("Content-Length")||0),p.responseText&&(e=p.responseText.length)}catch(o){t=e=0}a.trigger({type:"progress",lengthComputable:!!t,total:parseInt(t,10),loaded:e});break;case 4:p.onreadystatechange=function(){},0===p.status?a.trigger("error"):a.trigger("load")}},e.isEmptyObj(n.headers)||e.each(n.headers,function(t,e){p.setRequestHeader(e,t)}),""!==n.responseType&&"responseType"in p&&(p.responseType="json"!==n.responseType||l.can("return_response_type","json")?n.responseType:"text"),g?p.sendAsBinary?p.sendAsBinary(o):function(){for(var t=new Uint8Array(o.length),e=0;e<o.length;e++)t[e]=255&o.charCodeAt(e);p.send(t.buffer)}():p.send(o),a.trigger("loadstart")},getStatus:function(){try{if(p)return p.status}catch(t){}return 0},getResponse:function(t){var e=this.getRuntime();try{switch(t){case"blob":var i=new o(e.uid,p.response),r=p.getResponseHeader("Content-Disposition");if(r){var s=r.match(/filename=([\'\"'])([^\1]+)\1/);s&&(f=s[2])}return i.name=f,i.type||(i.type=n.getFileMime(f)),
i;case"json":return l.can("return_response_type","json")?p.response:200===p.status?c(p.responseText):null;case"document":return h(p);default:return""!==p.responseText?p.responseText:null}}catch(a){return null}},getAllResponseHeaders:function(){try{return p.getAllResponseHeaders()}catch(t){}return""},abort:function(){p&&p.abort()},destroy:function(){self=f=null}})}return t.XMLHttpRequest=u}),i(z,[],function(){return function(){function t(t,e){var n,i=r?0:-8*(e-1),s=0;for(n=0;e>n;n++)s|=o.charCodeAt(t+n)<<Math.abs(i+8*n);return s}function n(t,e,n){n=3===arguments.length?n:o.length-e-1,o=o.substr(0,e)+t+o.substr(n+e)}function i(t,e,i){var o,s="",a=r?0:-8*(i-1);for(o=0;i>o;o++)s+=String.fromCharCode(255&e>>Math.abs(a+8*o));n(s,t,i)}var o,r=!1;return{II:function(t){return t===e?r:void(r=t)},init:function(t){r=!1,o=t},SEGMENT:function(t,e,i){switch(arguments.length){case 1:return o.substr(t,o.length-t-1);case 2:return o.substr(t,e);case 3:n(i,t,e);break;default:return o}},BYTE:function(e){return t(e,1)},SHORT:function(e){return t(e,2)},LONG:function(n,o){return o===e?t(n,4):void i(n,o,4)},SLONG:function(e){var n=t(e,4);return n>2147483647?n-4294967296:n},STRING:function(e,n){var i="";for(n+=e;n>e;e++)i+=String.fromCharCode(t(e,1));return i}}}}),i(L,[z],function(t){return function e(n){var i,o,r,s=[],a=0;if(i=new t,i.init(n),65496===i.SHORT(0)){for(o=2;o<=n.length;)if(r=i.SHORT(o),r>=65488&&65495>=r)o+=2;else{if(65498===r||65497===r)break;a=i.SHORT(o+2)+2,r>=65505&&65519>=r&&s.push({hex:r,name:"APP"+(15&r),start:o,length:a,segment:i.SEGMENT(o,a)}),o+=a}return i.init(null),{headers:s,restore:function(t){var e,n;for(i.init(t),o=65504==i.SHORT(2)?4+i.SHORT(4):2,n=0,e=s.length;e>n;n++)i.SEGMENT(o,0,s[n].segment),o+=s[n].length;return t=i.SEGMENT(),i.init(null),t},strip:function(t){var n,o,r;for(o=new e(t),n=o.headers,o.purge(),i.init(t),r=n.length;r--;)i.SEGMENT(n[r].start,n[r].length,"");return t=i.SEGMENT(),i.init(null),t},get:function(t){for(var e=[],n=0,i=s.length;i>n;n++)s[n].name===t.toUpperCase()&&e.push(s[n].segment);return e},set:function(t,e){var n,i,o,r=[];for("string"==typeof e?r.push(e):r=e,n=i=0,o=s.length;o>n&&(s[n].name===t.toUpperCase()&&(s[n].segment=r[i],s[n].length=r[i].length,i++),!(i>=r.length));n++);},purge:function(){s=[],i.init(null),i=null}}}}}),i(H,[a,z],function(t,n){return function i(){function i(t,n){var i,o,r,a,l,h,d,p,f=s.SHORT(t),g=[],m={};for(i=0;f>i;i++)if(d=h=t+12*i+2,r=n[s.SHORT(d)],r!==e){switch(a=s.SHORT(d+=2),l=s.LONG(d+=2),d+=4,g=[],a){case 1:case 7:for(l>4&&(d=s.LONG(d)+u.tiffHeader),o=0;l>o;o++)g[o]=s.BYTE(d+o);break;case 2:l>4&&(d=s.LONG(d)+u.tiffHeader),m[r]=s.STRING(d,l-1);continue;case 3:for(l>2&&(d=s.LONG(d)+u.tiffHeader),o=0;l>o;o++)g[o]=s.SHORT(d+2*o);break;case 4:for(l>1&&(d=s.LONG(d)+u.tiffHeader),o=0;l>o;o++)g[o]=s.LONG(d+4*o);break;case 5:for(d=s.LONG(d)+u.tiffHeader,o=0;l>o;o++)g[o]=s.LONG(d+4*o)/s.LONG(d+4*o+4);break;case 9:for(d=s.LONG(d)+u.tiffHeader,o=0;l>o;o++)g[o]=s.SLONG(d+4*o);break;case 10:for(d=s.LONG(d)+u.tiffHeader,o=0;l>o;o++)g[o]=s.SLONG(d+4*o)/s.SLONG(d+4*o+4);break;default:continue}p=1==l?g[0]:g,m[r]=c.hasOwnProperty(r)&&"object"!=typeof p?c[r][p]:p}return m}function o(){var t=u.tiffHeader;return s.II(18761==s.SHORT(t)),42!==s.SHORT(t+=2)?!1:(u.IFD0=u.tiffHeader+s.LONG(t+=2),l=i(u.IFD0,a.tiff),"ExifIFDPointer"in l&&(u.exifIFD=u.tiffHeader+l.ExifIFDPointer,delete l.ExifIFDPointer),"GPSInfoIFDPointer"in l&&(u.gpsIFD=u.tiffHeader+l.GPSInfoIFDPointer,delete l.GPSInfoIFDPointer),!0)}function r(t,e,n){var i,o,r,l=0;if("string"==typeof e){var c=a[t.toLowerCase()];for(var h in c)if(c[h]===e){e=h;break}}i=u[t.toLowerCase()+"IFD"],o=s.SHORT(i);for(var d=0;o>d;d++)if(r=i+12*d+2,s.SHORT(r)==e){l=r+8;break}return l?(s.LONG(l,n),!0):!1}var s,a,l,c,u={};return s=new n,a={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},c={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(t){return u={tiffHeader:10},t!==e&&t.length?(s.init(t),65505===s.SHORT(0)&&"EXIF\x00"===s.STRING(4,5).toUpperCase()?o():!1):!1},TIFF:function(){return l},EXIF:function(){var e;if(e=i(u.exifIFD,a.exif),e.ExifVersion&&"array"===t.typeOf(e.ExifVersion)){for(var n=0,o="";n<e.ExifVersion.length;n++)o+=String.fromCharCode(e.ExifVersion[n]);e.ExifVersion=o}return e},GPS:function(){var e;return e=i(u.gpsIFD,a.gps),e.GPSVersionID&&"array"===t.typeOf(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(t,e){return"PixelXDimension"!==t&&"PixelYDimension"!==t?!1:r("exif",t,e)},getBinary:function(){return s.SEGMENT()},purge:function(){s.init(null),s=l=null,u={}}}}}),i($,[a,d,L,z,H],function(t,e,n,i,o){function r(r){function s(){for(var t,e,n=0;n<=l.length;){if(t=c.SHORT(n+=2),t>=65472&&65475>=t)return n+=5,{height:c.SHORT(n),width:c.SHORT(n+=2)};e=c.SHORT(n+=2),n+=e-2}return null}function a(){h&&u&&c&&(h.purge(),u.purge(),c.init(null),l=d=u=h=c=null)}var l,c,u,h,d,p;if(l=r,c=new i,c.init(l),65496!==c.SHORT(0))throw new e.ImageError(e.ImageError.WRONG_FORMAT);u=new n(r),h=new o,p=!!h.init(u.get("app1")[0]),d=s.call(this),t.extend(this,{type:"image/jpeg",size:l.length,width:d&&d.width||0,height:d&&d.height||0,setExif:function(e,n){return p?("object"===t.typeOf(e)?t.each(e,function(t,e){h.setExif(e,t)}):h.setExif(e,n),void u.set("app1",h.getBinary())):!1},writeHeaders:function(){return arguments.length?u.restore(arguments[0]):l=u.restore(l)},stripHeaders:function(t){return u.strip(t)},purge:function(){a.call(this)}}),p&&(this.meta={tiff:h.TIFF(),exif:h.EXIF(),gps:h.GPS()})}return r}),i(K,[d,a,z],function(t,e,n){function i(i){function o(){var t,e;return t=s.call(this,8),"IHDR"==t.type?(e=t.start,{width:l.LONG(e),height:l.LONG(e+=4)}):null}function r(){l&&(l.init(null),a=h=c=u=l=null)}function s(t){var e,n,i,o;return e=l.LONG(t),n=l.STRING(t+=4,4),i=t+=4,o=l.LONG(t+e),{length:e,type:n,start:i,CRC:o}}var a,l,c,u,h;a=i,l=new n,l.init(a),function(){var e=0,n=0,i=[35152,20039,3338,6666];for(n=0;n<i.length;n++,e+=2)if(i[n]!=l.SHORT(e))throw new t.ImageError(t.ImageError.WRONG_FORMAT)}(),h=o.call(this),e.extend(this,{type:"image/png",size:a.length,width:h.width,height:h.height,purge:function(){r.call(this)}}),r.call(this)}return i}),i(B,[a,d,$,K],function(t,e,n,i){return function(o){var r,s=[n,i];r=function(){for(var t=0;t<s.length;t++)try{return new s[t](o)}catch(n){}throw new e.ImageError(e.ImageError.WRONG_FORMAT)}(),t.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(t){return t},stripHeaders:function(t){return t},purge:function(){}}),t.extend(this,r),this.purge=function(){r.purge(),r=null}}}),i(q,[],function(){function t(t,i,o){var r=t.naturalWidth,s=t.naturalHeight,a=o.width,l=o.height,c=o.x||0,u=o.y||0,h=i.getContext("2d");e(t)&&(r/=2,s/=2);var d=1024,p=document.createElement("canvas");p.width=p.height=d;for(var f=p.getContext("2d"),g=n(t,r,s),m=0;s>m;){for(var v=m+d>s?s-m:d,y=0;r>y;){var b=y+d>r?r-y:d;f.clearRect(0,0,d,d),f.drawImage(t,-y,-m);var _=y*a/r+c<<0,w=Math.ceil(b*a/r),x=m*l/s/g+u<<0,C=Math.ceil(v*l/s/g);h.drawImage(p,0,0,b,v,_,x,w,C),y+=d}m+=d}p=f=null}function e(t){var e=t.naturalWidth,n=t.naturalHeight;if(e*n>1048576){var i=document.createElement("canvas");i.width=i.height=1;var o=i.getContext("2d");return o.drawImage(t,-e+1,0),0===o.getImageData(0,0,1,1).data[3]}return!1}function n(t,e,n){var i=document.createElement("canvas");i.width=1,i.height=n;var o=i.getContext("2d");o.drawImage(t,0,0);for(var r=o.getImageData(0,0,1,n).data,s=0,a=n,l=n;l>s;){var c=r[4*(l-1)+3];0===c?a=l:s=l,l=a+s>>1}i=null;var u=l/n;return 0===u?1:u}return{isSubsampled:e,renderTo:t}}),i(j,[P,a,d,f,v,B,q,c,u],function(t,e,n,i,o,r,s,a,l){function c(){function t(){if(!b&&!v)throw new n.ImageError(n.DOMException.INVALID_STATE_ERR);return b||v}function c(t){return i.atob(t.substring(t.indexOf("base64,")+7))}function u(t,e){return"data:"+(e||"")+";base64,"+i.btoa(t)}function h(t){var e=this;v=new Image,v.onerror=function(){m.call(this),e.trigger("error",new n.ImageError(n.ImageError.WRONG_FORMAT))},v.onload=function(){e.trigger("load")},v.src=/^data:[^;]*;base64,/.test(t)?t:u(t,w.type)}function d(t,e){var i,o=this;return window.FileReader?(i=new FileReader,i.onload=function(){e(this.result)},i.onerror=function(){o.trigger("error",new n.FileException(n.FileException.NOT_READABLE_ERR))},void i.readAsDataURL(t)):e(t.getAsDataURL())}function p(n,i,o,r){var s,a,l,c,u,h,d,p,m,v=this;if(k=r,m=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==e.inArray(m,[5,6,7,8])){var y=n;n=i,i=y}return h=t(),l=o?Math.max:Math.min,a=l(n/h.width,i/h.height),a>1&&(!o||r)?void this.trigger("Resize"):(d=Math.round(h.width*a),p=Math.round(h.height*a),b||(b=document.createElement("canvas")),s=b.getContext("2d"),o?(b.width=n,b.height=i):(b.width=d,b.height=p),c=d>b.width?Math.round((d-b.width)/2):0,u=p>b.height?Math.round((p-b.height)/2):0,k||g(b.width,b.height,m),f.call(this,h,b,-c,-u,d,p),this.width=b.width,this.height=b.height,C=!0,void v.trigger("Resize"))}function f(t,e,n,i,o,r){if("iOS"===l.OS)s.renderTo(t,e,{width:o,height:r,x:n,y:i});else{var a=e.getContext("2d");a.drawImage(t,n,i,o,r)}}function g(t,e,n){switch(n){case 5:case 6:case 7:case 8:b.width=e,b.height=t;break;default:b.width=t,b.height=e}var i=b.getContext("2d");switch(n){case 2:i.translate(t,0),i.scale(-1,1);break;case 3:i.translate(t,e),i.rotate(Math.PI);break;case 4:i.translate(0,e),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-e);break;case 7:i.rotate(.5*Math.PI),i.translate(t,-e),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-t,0)}}function m(){y&&(y.purge(),y=null),_=v=b=w=null,C=!1}var v,y,b,_,w,x=this,C=!1,k=!0;e.extend(this,{loadFromBlob:function(t){var e=this,i=e.getRuntime(),o=arguments.length>1?arguments[1]:!0;if(!i.can("access_binary"))throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);return w=t,t.isDetached()?(_=t.getSource(),void h.call(this,_)):void d.call(this,t.getSource(),function(t){o&&(_=c(t)),h.call(e,t)})},loadFromImage:function(t,e){this.meta=t.meta,w=new o(null,{name:t.name,size:t.size,type:t.type}),h.call(this,e?_=t.getAsBinaryString():t.getAsDataURL())},getInfo:function(){var e,n=this.getRuntime();return!y&&_&&n.can("access_image_binary")&&(y=new r(_)),e={width:t().width||0,height:t().height||0,type:w.type||a.getFileMime(w.name),size:_&&_.length||w.size||0,name:w.name||"",meta:y&&y.meta||this.meta||{}}},downsize:function(){p.apply(this,arguments)},getAsCanvas:function(){return b&&(b.id=this.uid+"_canvas"),b},getAsBlob:function(t,e){return t!==this.type&&p.call(this,this.width,this.height,!1),new o(null,{type:t,data:x.getAsBinaryString.call(this,t,e)})},getAsDataURL:function(t){var e=arguments[1]||90;if(!C)return v.src;if("image/jpeg"!==t)return b.toDataURL("image/png");try{return b.toDataURL("image/jpeg",e/100)}catch(n){return b.toDataURL("image/jpeg")}},getAsBinaryString:function(t,e){if(!C)return _||(_=c(x.getAsDataURL(t,e))),_;if("image/jpeg"!==t)_=c(x.getAsDataURL(t,e));else{var n;e||(e=90);try{n=b.toDataURL("image/jpeg",e/100)}catch(i){n=b.toDataURL("image/jpeg")}_=c(n),y&&(_=y.stripHeaders(_),k&&(y.meta&&y.meta.exif&&y.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),_=y.writeHeaders(_)),y.purge(),y=null)}return C=!1,_},destroy:function(){x=null,m.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return t.Image=c}),i(V,[a,u,h,d,g],function(t,e,n,i,o){function r(){var t;try{t=navigator.plugins["Shockwave Flash"],t=t.description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1])}function s(s){var c,u=this;s=t.extend({swf_url:e.swf_url},s),o.call(this,s,a,{access_binary:function(t){return t&&"browser"===u.mode},access_image_binary:function(t){return t&&"browser"===u.mode},display_media:o.capTrue,do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===u.mode},resize_image:o.capTrue,return_response_headers:!1,return_response_type:function(e){return!t.arrayDiff(e,["","text","json","document"])||"browser"===u.mode},return_status_code:function(e){return"browser"===u.mode||!t.arrayDiff(e,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:function(t){return t&&"browser"===u.mode},send_browser_cookies:function(t){return t&&"browser"===u.mode},send_custom_headers:function(t){return t&&"browser"===u.mode},send_multipart:o.capTrue,slice_blob:o.capTrue,stream_upload:function(t){return t&&"browser"===u.mode},summon_file_dialog:!1,upload_filesize:function(e){return t.parseSizeStr(e)<=2097152||"client"===u.mode},use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}},{access_binary:function(t){return t?"browser":"client"},access_image_binary:function(t){return t?"browser":"client"},report_upload_progress:function(t){return t?"browser":"client"},return_response_type:function(e){return t.arrayDiff(e,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"browser":["client","browser"]},send_binary_string:function(t){return t?"browser":"client"},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"browser":"client"},stream_upload:function(t){return t?"client":"browser"},upload_filesize:function(e){return t.parseSizeStr(e)>=2097152?"client":"browser"}},"client"),r()<10&&(this.mode=!1),t.extend(this,{getShim:function(){return n.get(this.uid)},shimExec:function(t,e){var n=[].slice.call(arguments,2);return u.getShim().exec(this.uid,t,e,n)},init:function(){var n,o,r;r=this.getShimContainer(),t.extend(r.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),n='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+s.swf_url+'" ',"IE"===e.browser&&(n+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),n+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+s.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+e.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===e.browser?(o=document.createElement("div"),r.appendChild(o),o.outerHTML=n,o=r=null):r.innerHTML=n,c=setTimeout(function(){u&&!u.initialized&&u.trigger("Error",new i.RuntimeError(i.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(t){return function(){t.call(u),clearTimeout(c),s=c=t=u=null}}(this.destroy)},l)}var a="flash",l={};return o.addConstructor(a,s),l}),i(W,[V,v],function(t,e){var n={slice:function(t,n,i,o){var r=this.getRuntime();return 0>n?n=Math.max(t.size+n,0):n>0&&(n=Math.min(n,t.size)),0>i?i=Math.max(t.size+i,0):i>0&&(i=Math.min(i,t.size)),t=r.shimExec.call(this,"Blob","slice",n,i,o||""),t&&(t=new e(r.uid,t)),t}};return t.Blob=n}),i(U,[V],function(t){var e={init:function(t){this.getRuntime().shimExec.call(this,"FileInput","init",{name:t.name,accept:t.accept,multiple:t.multiple}),this.trigger("ready")}};return t.FileInput=e}),i(G,[V,f],function(t,e){function n(t,n){switch(n){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var i="",o={read:function(t,e){var o=this,r=o.getRuntime();return"readAsDataURL"===t&&(i="data:"+(e.type||"")+";base64,"),o.bind("Progress",function(e,o){o&&(i+=n(o,t))}),r.shimExec.call(this,"FileReader","readAsBase64",e.uid)},getResult:function(){return i},destroy:function(){i=null}};return t.FileReader=o}),i(Y,[V,f],function(t,e){function n(t,n){switch(n){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var i={read:function(t,e){var i,o=this.getRuntime();return(i=o.shimExec.call(this,"FileReaderSync","readAsBase64",e.uid))?("readAsDataURL"===t&&(i="data:"+(e.type||"")+";base64,"+i),n(i,t,e.type)):null}};return t.FileReaderSync=i}),i(X,[V,a,v,y,k,S,E,M],function(t,e,n,i,o,r,s,a){var l={send:function(t,i){function o(){t.transport=u.mode,u.shimExec.call(c,"XMLHttpRequest","send",t,i)}function a(t,e){u.shimExec.call(c,"XMLHttpRequest","appendBlob",t,e.uid),i=null,o()}function l(t,e){var n=new s;n.bind("TransportingComplete",function(){e(this.result)}),n.transport(t.getSource(),t.type,{ruid:u.uid})}var c=this,u=c.getRuntime();if(e.isEmptyObj(t.headers)||e.each(t.headers,function(t,e){u.shimExec.call(c,"XMLHttpRequest","setRequestHeader",e,t.toString())}),i instanceof r){var h;if(i.each(function(t,e){t instanceof n?h=e:u.shimExec.call(c,"XMLHttpRequest","append",e,t)}),i.hasBlob()){var d=i.getBlob();d.isDetached()?l(d,function(t){d.destroy(),a(h,t)}):a(h,d)}else i=null,o()}else i instanceof n?i.isDetached()?l(i,function(t){i.destroy(),i=t.uid,o()}):(i=i.uid,o()):o()},getResponse:function(t){var n,r,s=this.getRuntime();if(r=s.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(r=new i(s.uid,r),"blob"===t)return r;if(~e.inArray(t,["","text"]))return n=new o,n.readAsText(r);if("arraybuffer"===t);else if("json"===t){n=new o;try{return a(n.readAsText(r))}catch(l){return null}}}return null},abort:function(t){var e=this.getRuntime();e.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return t.XMLHttpRequest=l}),i(Q,[V,v],function(t,e){var n={getAsBlob:function(t){var n=this.getRuntime(),i=n.shimExec.call(this,"Transporter","getAsBlob",t);return i?new e(n.uid,i):null}};return t.Transporter=n}),i(J,[V,a,E,v,k],function(t,e,n,i,o){var r={loadFromBlob:function(t){function e(t){o.shimExec.call(i,"Image","loadFromBlob",t.uid),i=o=null}var i=this,o=i.getRuntime();if(t.isDetached()){var r=new n;r.bind("TransportingComplete",function(){e(r.result.getSource())}),r.transport(t.getSource(),t.type,{ruid:o.uid})}else e(t.getSource())},loadFromImage:function(t){var e=this.getRuntime();return e.shimExec.call(this,"Image","loadFromImage",t.uid)},getAsBlob:function(t,e){var n=this.getRuntime(),o=n.shimExec.call(this,"Image","getAsBlob",t,e);return o?new i(n.uid,o):null},getAsDataURL:function(){var t,e=this.getRuntime(),n=e.Image.getAsBlob.apply(this,arguments);return n?(t=new o,t.readAsDataURL(n)):null}};return t.Image=r}),i(Z,[a,u,h,d,g],function(t,e,n,i,o){function r(t){var e,n,i,o,r,s=!1,a=null,l=0;try{try{a=new ActiveXObject("AgControl.AgControl"),a.IsVersionSupported(t)&&(s=!0),a=null}catch(c){var u=navigator.plugins["Silverlight Plug-In"];if(u){for(e=u.description,"1.0.30226.2"===e&&(e="2.0.30226.2"),n=e.split(".");n.length>3;)n.pop();for(;n.length<4;)n.push(0);for(i=t.split(".");i.length>4;)i.pop();do o=parseInt(i[l],10),r=parseInt(n[l],10),l++;while(l<i.length&&o===r);r>=o&&!isNaN(o)&&(s=!0)}}}catch(h){s=!1}return s}function s(s){var c,u=this;s=t.extend({xap_url:e.xap_url},s),o.call(this,s,a,{access_binary:o.capTrue,access_image_binary:o.capTrue,display_media:o.capTrue,do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:o.capTrue,resize_image:o.capTrue,return_response_headers:function(t){return t&&"client"===u.mode},return_response_type:o.capTrue,return_status_code:function(e){return"client"===u.mode||!t.arrayDiff(e,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:o.capTrue,send_browser_cookies:function(t){return t&&"browser"===u.mode},send_custom_headers:function(t){return t&&"client"===u.mode},send_multipart:o.capTrue,slice_blob:o.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:o.capTrue,use_http_method:function(e){return"client"===u.mode||!t.arrayDiff(e,["GET","POST"])}},{return_response_headers:function(t){return t?"client":"browser"},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"client":["client","browser"]},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"client":"browser"},use_http_method:function(e){return t.arrayDiff(e,["GET","POST"])?"client":["client","browser"]}}),r("2.0.31005.0")&&"Opera"!==e.browser||(this.mode=!1),t.extend(this,{getShim:function(){return n.get(this.uid).content.Moxie},shimExec:function(t,e){var n=[].slice.call(arguments,2);return u.getShim().exec(this.uid,t,e,n)},init:function(){var t;t=this.getShimContainer(),t.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+s.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+e.global_event_dispatcher+'"/></object>',c=setTimeout(function(){u&&!u.initialized&&u.trigger("Error",new i.RuntimeError(i.RuntimeError.NOT_INIT_ERR))},"Windows"!==e.OS?1e4:5e3)},destroy:function(t){return function(){t.call(u),clearTimeout(c),s=c=t=u=null}}(this.destroy)},l)}var a="silverlight",l={};return o.addConstructor(a,s),l}),i(tt,[Z,a,W],function(t,e,n){return t.Blob=e.extend({},n)}),i(et,[Z],function(t){var e={init:function(t){function e(t){for(var e="",n=0;n<t.length;n++)e+=(""!==e?"|":"")+t[n].title+" | *."+t[n].extensions.replace(/,/g,";*.");return e}this.getRuntime().shimExec.call(this,"FileInput","init",e(t.accept),t.name,t.multiple),this.trigger("ready")}};return t.FileInput=e}),i(nt,[Z,h,I],function(t,e,n){var i={init:function(){var t,i=this,o=i.getRuntime();return t=o.getShimContainer(),n.addEvent(t,"dragover",function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="copy"},i.uid),n.addEvent(t,"dragenter",function(t){t.preventDefault();var n=e.get(o.uid).dragEnter(t);n&&t.stopPropagation()},i.uid),n.addEvent(t,"drop",function(t){t.preventDefault();var n=e.get(o.uid).dragDrop(t);n&&t.stopPropagation()},i.uid),o.shimExec.call(this,"FileDrop","init")}};return t.FileDrop=i}),i(it,[Z,a,G],function(t,e,n){return t.FileReader=e.extend({},n)}),i(ot,[Z,a,Y],function(t,e,n){return t.FileReaderSync=e.extend({},n)}),i(rt,[Z,a,X],function(t,e,n){return t.XMLHttpRequest=e.extend({},n)}),i(st,[Z,a,Q],function(t,e,n){return t.Transporter=e.extend({},n)}),i(at,[Z,a,J],function(t,e,n){return t.Image=e.extend({},n)}),i(lt,[a,d,g,u],function(t,e,n,i){function o(e){var o=this,a=n.capTest,l=n.capTrue;n.call(this,e,r,{access_binary:a(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:a(s.Image&&(i.can("create_canvas")||i.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:a(function(){return"Chrome"===i.browser&&i.version>=28||"IE"===i.browser&&i.version>=10}()),resize_image:function(){return s.Image&&o.can("access_binary")&&i.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(e){return!!~t.inArray(e,["json","text","document",""])},return_status_code:function(e){return!t.arrayDiff(e,[200,404])},select_file:function(){return i.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return o.can("select_file")},summon_file_dialog:a(function(){return"Firefox"===i.browser&&i.version>=4||"Opera"===i.browser&&i.version>=12||"IE"===i.browser&&i.version>=10||!!~t.inArray(i.browser,["Chrome","Safari"])}()),upload_filesize:l,use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}}),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(o),t=o=null}}(this.destroy)}),t.extend(this.getShim(),s)}var r="html4",s={};return n.addConstructor(r,o),s}),i(ct,[lt,a,h,I,c,u],function(t,e,n,i,o,r){function s(){function t(){var o,u,h,d,p,f,g=this,m=g.getRuntime();f=e.guid("uid_"),o=m.getShimContainer(),s&&(h=n.get(s+"_form"),h&&e.extend(h.style,{top:"100%"})),d=document.createElement("form"),d.setAttribute("id",f+"_form"),d.setAttribute("method","post"),d.setAttribute("enctype","multipart/form-data"),d.setAttribute("encoding","multipart/form-data"),e.extend(d.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),p=document.createElement("input"),p.setAttribute("id",f),p.setAttribute("type","file"),p.setAttribute("name","Filedata"),p.setAttribute("accept",c.join(",")),e.extend(p.style,{fontSize:"999px",opacity:0}),d.appendChild(p),o.appendChild(d),e.extend(p.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===r.browser&&r.version<10&&e.extend(p.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),p.onchange=function(){var e;this.value&&(e=this.files?this.files[0]:{name:this.value},l=[e],this.onchange=function(){},t.call(g),g.bind("change",function(){var t,e=n.get(f),i=n.get(f+"_form");g.files.length&&e&&i&&(t=g.files[0],e.setAttribute("id",t.uid),i.setAttribute("id",t.uid+"_form"),i.setAttribute("target",t.uid+"_iframe")),e=i=null},998),p=d=null,g.trigger("change"))},m.can("summon_file_dialog")&&(u=n.get(a.browse_button),i.removeEvent(u,"click",g.uid),i.addEvent(u,"click",function(t){p&&!p.disabled&&p.click(),t.preventDefault()},g.uid)),s=f,o=h=u=null,g.trigger({type:"ready",async:!0})}var s,a,l=[],c=[];e.extend(this,{init:function(e){var r,s=this,l=s.getRuntime();a=e,c=e.accept.mimes||o.extList2mimes(e.accept,l.can("filter_by_extension")),r=l.getShimContainer(),function(){var t,o,a;t=n.get(e.browse_button),l.can("summon_file_dialog")&&("static"===n.getStyle(t,"position")&&(t.style.position="relative"),o=parseInt(n.getStyle(t,"z-index"),10)||1,t.style.zIndex=o,r.style.zIndex=o-1),a=l.can("summon_file_dialog")?t:r,i.addEvent(a,"mouseover",function(){s.trigger("mouseenter")},s.uid),i.addEvent(a,"mouseout",function(){s.trigger("mouseleave")},s.uid),i.addEvent(a,"mousedown",function(){s.trigger("mousedown")},s.uid),i.addEvent(n.get(e.container),"mouseup",function(){s.trigger("mouseup")},s.uid),t=null}(),t.call(this),r=null},getFiles:function(){return l},disable:function(t){var e;(e=n.get(s))&&(e.disabled=!!t)},destroy:function(){var t=this.getRuntime(),e=t.getShimContainer();i.removeAllEvents(e,this.uid),i.removeAllEvents(a&&n.get(a.container),this.uid),i.removeAllEvents(a&&n.get(a.browse_button),this.uid),e&&(e.innerHTML=""),s=l=c=a=null}})}return t.FileInput=s}),i(ut,[lt,F],function(t,e){return t.FileReader=e}),i(ht,[lt,a,h,C,d,I,v,S,M],function(t,e,n,i,o,r,s,a,l){function c(){function t(t){var e,i,o,s,a=this,l=!1;if(h){if(e=h.id.replace(/_iframe$/,""),i=n.get(e+"_form")){for(o=i.getElementsByTagName("input"),s=o.length;s--;)switch(o[s].getAttribute("type")){case"hidden":o[s].parentNode.removeChild(o[s]);break;case"file":l=!0}o=[],l||i.parentNode.removeChild(i),i=null}setTimeout(function(){r.removeEvent(h,"load",a.uid),h.parentNode&&h.parentNode.removeChild(h);var e=a.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=h=null,t()},1)}}var c,u,h;e.extend(this,{send:function(l,d){function p(){var n=b.getShimContainer()||document.body,o=document.createElement("div");o.innerHTML='<iframe id="'+f+'_iframe" name="'+f+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',h=o.firstChild,n.appendChild(h),r.addEvent(h,"load",function(){var n;try{n=h.contentWindow.document||h.contentDocument||window.frames[h.id].document,/^4\d{2}\s/.test(n.title)&&n.getElementsByTagName("address").length?c=n.title.replace(/^(\d+).*$/,"$1"):(c=200,u=e.trim(n.body.innerHTML),y.trigger({type:"progress",loaded:u.length,total:u.length}),v&&y.trigger({type:"uploadprogress",loaded:v.size||1025,total:v.size||1025}))}catch(o){if(!i.hasSameOrigin(l.url))return void t.call(y,function(){y.trigger("error")});c=404}t.call(y,function(){y.trigger("load")})},y.uid)}var f,g,m,v,y=this,b=y.getRuntime();if(c=u=null,d instanceof a&&d.hasBlob()){if(v=d.getBlob(),f=v.uid,m=n.get(f),g=n.get(f+"_form"),!g)throw new o.DOMException(o.DOMException.NOT_FOUND_ERR)}else f=e.guid("uid_"),g=document.createElement("form"),g.setAttribute("id",f+"_form"),g.setAttribute("method",l.method),g.setAttribute("enctype","multipart/form-data"),g.setAttribute("encoding","multipart/form-data"),g.setAttribute("target",f+"_iframe"),b.getShimContainer().appendChild(g);d instanceof a&&d.each(function(t,n){if(t instanceof s)m&&m.setAttribute("name",n);else{var i=document.createElement("input");e.extend(i,{type:"hidden",name:n,value:t}),g.appendChild(i)}}),g.setAttribute("action",l.url),p(),g.submit(),y.trigger("loadstart")},getStatus:function(){return c},getResponse:function(t){if("json"===t&&"string"===e.typeOf(u))try{return l(u.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(n){return null}return u},abort:function(){var e=this;h&&h.contentWindow&&(h.contentWindow.stop?h.contentWindow.stop():h.contentWindow.document.execCommand?h.contentWindow.document.execCommand("Stop"):h.src="about:blank"),t.call(this,function(){e.dispatchEvent("abort")})}})}return t.XMLHttpRequest=c}),i(dt,[lt,j],function(t,e){return t.Image=e}),r([a,l,c,u,h,d,p,f,g,m,v,y,b,_,w,x,C,k,S,T,E,M,D,I])}(this),function(){"use strict";var t={},e=moxie.core.utils.Basic.inArray;return function n(i){var o,r;for(o in i)r=typeof i[o],"object"!==r||~e(o,["Exceptions","Env","Mime"])?"function"===r&&(t[o]=i[o]):n(i[o])}(window.moxie),t.Env=window.moxie.core.utils.Env,
t.Mime=window.moxie.core.utils.Mime,t.Exceptions=window.moxie.core.Exceptions,window.mOxie=t,window.o||(window.o=t),t}(),function(t,e,n){function i(t){function e(t,e,n){var o={chunks:"slice_blob",resize:"send_binary_string",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",max_file_size:"access_binary",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};o[t]?i[o[t]]=e:n||(i[t]=e)}var n=t.required_features,i={};return"string"==typeof n?s.each(n.split(/\s*,\s*/),function(t){e(t,!0)}):"object"==typeof n?s.each(n,function(t,n){e(n,t)}):n===!0&&(t.multipart||(i.send_binary_string=!0),t.chunk_size>0&&(i.slice_blob=!0),s.each(t,function(t,n){e(n,!!t,!0)})),i}var o=t.setTimeout,r={},s={VERSION:"2.0.0beta",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:e.mimes,ua:e.ua,typeOf:e.typeOf,extend:e.extend,guid:e.guid,each:e.each,getPos:e.getPos,getSize:e.getSize,xmlEncode:function(t){var e={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},n=/[<>&\"\']/g;return t?(""+t).replace(n,function(t){return e[t]?"&"+e[t]+";":t}):t},toArray:e.toArray,inArray:e.inArray,addI18n:e.addI18n,translate:e.translate,isEmptyObj:e.isEmptyObj,hasClass:e.hasClass,addClass:e.addClass,removeClass:e.removeClass,getStyle:e.getStyle,addEvent:e.addEvent,removeEvent:e.removeEvent,removeAllEvents:e.removeAllEvents,cleanName:function(t){var e,n;for(n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],e=0;e<n.length;e+=2)t=t.replace(n[e],n[e+1]);return t=t.replace(/\s+/g,"_"),t=t.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(t,e){var n="";return s.each(e,function(t,e){n+=(n?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),n&&(t+=(t.indexOf("?")>0?"&":"?")+n),t},formatSize:function(t){return t===n||/\D/.test(t)?s.translate("N/A"):t>1099511627776?Math.round(t/1099511627776,1)+" "+s.translate("tb"):t>1073741824?Math.round(t/1073741824,1)+" "+s.translate("gb"):t>1048576?Math.round(t/1048576,1)+" "+s.translate("mb"):t>1024?Math.round(t/1024,1)+" "+s.translate("kb"):t+" "+s.translate("b")},parseSize:e.parseSizeStr,predictRuntime:function(t,e){var n,i;return e&&(t.runtimes=e),n=new s.Uploader(t),i=n.runtime,n.destroy(),i},addFileFilter:function(t,e){r[t]=e}};s.addFileFilter("mime_types",function(){function t(t){var e=[];return s.each(t,function(t){s.each(t.extensions.split(/,/),function(t){/^\s*\*\s*$/.test(t)?e.push("\\.*"):e.push("\\."+t.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+e.join("|")+")$","i")}var e,n;return function(i,o,r){n&&i==e||(n=t(i),e=[].slice.call(i)),n.test(o.name)?r(!0):(this.trigger("Error",{code:s.FILE_EXTENSION_ERROR,message:s.translate("File extension error."),file:o}),r(!1))}}()),s.addFileFilter("max_file_size",function(t,e,n){var i;e.size!==i&&t&&e.size>t?(this.trigger("Error",{code:s.FILE_SIZE_ERROR,message:s.translate("File size error."),file:e}),n(!1)):n(!0)}),s.addFileFilter("prevent_duplicates",function(t,e,n){if(t)for(var i=this.files.length;i--;)if(e.name===this.files[i].name&&e.size===this.files[i].size)return this.trigger("Error",{code:s.FILE_DUPLICATE_ERROR,message:s.translate("Duplicate file error."),file:e}),void n(!1);n(!0)}),s.Uploader=function(t){function a(){var t,e,n=0;if(this.state==s.STARTED){for(e=0;e<y.length;e++)t||y[e].status!=s.QUEUED?n++:(t=y[e],this.trigger("BeforeUpload",t)&&(t.status=s.UPLOADING,this.trigger("UploadFile",t)));n==y.length&&(this.state!==s.STOPPED&&(this.state=s.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",y))}}function l(t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,c()}function c(){var t,e;for(f.reset(),t=0;t<y.length;t++)e=y[t],e.size!==n?(f.size+=e.origSize,f.loaded+=e.loaded*e.origSize/e.size):f.size=n,e.status==s.DONE?f.uploaded++:e.status==s.FAILED?f.failed++:f.queued++;f.size===n?f.percent=y.length>0?Math.ceil(f.uploaded/y.length*100):0:(f.bytesPerSec=Math.ceil(f.loaded/((+new Date-p||1)/1e3)),f.percent=f.size>0?Math.ceil(f.loaded/f.size*100):0)}function u(){var n=this,i=0,o={accept:t.filters.mime_types,runtime_order:t.runtimes,required_caps:_,swf_url:t.flash_swf_url,xap_url:t.silverlight_xap_url};s.each(t.runtimes.split(/\s*,\s*/),function(e){t[e]&&(o[e]=t[e])}),e.inSeries([function(r){t.browse_button?(g=new e.FileInput(s.extend({},o,{name:t.file_data_name,multiple:t.multi_selection,container:t.container,browse_button:t.browse_button})),g.onready=function(){var t=e.Runtime.getInfo(this.ruid);e.extend(n.features,{chunks:t.can("slice_blob"),multipart:t.can("send_multipart"),multi_selection:t.can("select_multiple")}),i++,r()},g.onchange=function(){n.addFile(this.files)},g.bind("mouseenter mouseleave mousedown mouseup",function(n){if(!w){var i=e.get(t.browse_button);i&&(t.browse_button_hover&&("mouseenter"===n.type?e.addClass(i,t.browse_button_hover):"mouseleave"===n.type&&e.removeClass(i,t.browse_button_hover)),t.browse_button_active&&("mousedown"===n.type?e.addClass(i,t.browse_button_active):"mouseup"===n.type&&e.removeClass(i,t.browse_button_active)),i=null)}}),g.bind("error runtimeerror",function(){g=null,r()}),g.init()):r()},function(r){t.drop_element?(m=new e.FileDrop(s.extend({},o,{drop_zone:t.drop_element})),m.onready=function(){var t=e.Runtime.getInfo(this.ruid);n.features.dragdrop=t.can("drag_and_drop"),i++,r()},m.ondrop=function(){n.addFile(this.files)},m.bind("error runtimeerror",function(){m=null,r()}),m.init()):r()}],function(){"function"==typeof t.init?t.init(n):s.each(t.init,function(t,e){n.bind(e,t)}),i?n.trigger("PostInit"):n.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")})})}function h(t,n){if(t.ruid){var i=e.Runtime.getInfo(t.ruid);if(i)return i.can(n)}return!1}function d(t,n,i){var o=new e.Image;try{o.onload=function(){o.downsize(n.width,n.height,n.crop,n.preserve_headers)},o.onresize=function(){i(this.getAsBlob(t.type,n.quality)),this.destroy()},o.onerror=function(){i(t)},o.load(t)}catch(r){i(t)}}var p,f,g,m,v,y=[],b={},_={},w=!1;f=new s.QueueProgress,t=s.extend({runtimes:e.Runtime.order,max_retries:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",send_chunk_number:!0},t),t.resize&&(t.resize=s.extend({preserve_headers:!0,crop:!1},t.resize)),"array"===s.typeOf(t.filters)&&(t.filters={mime_types:t.filters}),t.filters=s.extend({mime_types:[],prevent_duplicates:!!t.prevent_duplicates,max_file_size:t.max_file_size},t.filters),t.filters.max_file_size=s.parseSize(t.filters.max_file_size)||0,t.chunk_size=s.parseSize(t.chunk_size)||0,t.required_features=_=i(s.extend({},t)),s.extend(this,{id:s.guid(),state:s.STOPPED,features:{},runtime:e.Runtime.thatCan(_,t.runtimes),files:y,settings:t,total:f,init:function(){var n=this;return t.browse_button=e.get(t.browse_button),t.drop_element=e.get(t.drop_element),"function"==typeof t.preinit?t.preinit(n):s.each(t.preinit,function(t,e){n.bind(e,t)}),t.browse_button&&t.url?(n.bind("FilesAdded",function(t,e){[].push.apply(y,e),o(function(){n.trigger("QueueChanged"),n.refresh()},1)}),n.bind("CancelUpload",function(){v&&v.abort()}),t.unique_names&&n.bind("BeforeUpload",function(t,e){var n=e.name.match(/\.([^.]+)$/),i="part";n&&(i=n[1]),e.target_name=e.id+"."+i}),n.bind("UploadFile",function(n,i){function r(){f-- >0?o(a,1):(i.loaded=g,n.trigger("Error",{code:s.HTTP_ERROR,message:s.translate("HTTP Error."),file:i,response:v.responseText,status:v.status,responseHeaders:v.getAllResponseHeaders()}))}function a(){var h,d,f,m;i.status!=s.DONE&&i.status!=s.FAILED&&n.state!=s.STOPPED&&(f={name:i.target_name||i.name},p&&u.chunks&&l.size>p?(m=Math.min(p,l.size-g),h=l.slice(g,g+m)):(m=l.size,h=l),p&&u.chunks&&(t.send_chunk_number?(f.chunk=Math.ceil(g/p),f.chunks=Math.ceil(l.size/p)):(f.offset=g,f.total=l.size)),v=new e.XMLHttpRequest,v.upload&&(v.upload.onprogress=function(t){i.loaded=Math.min(i.size,g+t.loaded),n.trigger("UploadProgress",i)}),v.onload=function(){return v.status>=400?void r():(m<l.size?(h.destroy(),g+=m,i.loaded=Math.min(g,l.size),n.trigger("ChunkUploaded",i,{offset:i.loaded,total:l.size,response:v.responseText,status:v.status,responseHeaders:v.getAllResponseHeaders()}),"Android Browser"===e.Env.browser&&n.trigger("UploadProgress",i)):i.loaded=i.size,h=d=null,!g||g>=l.size?(i.size!=i.origSize&&(l.destroy(),l=null),n.trigger("UploadProgress",i),i.status=s.DONE,n.trigger("FileUploaded",i,{response:v.responseText,status:v.status,responseHeaders:v.getAllResponseHeaders()})):o(a,1),void 0)},v.onerror=function(){r()},v.onloadend=function(){this.destroy(),v=null},n.settings.multipart&&u.multipart?(f.name=i.target_name||i.name,v.open("post",c,!0),s.each(n.settings.headers,function(t,e){v.setRequestHeader(e,t)}),d=new e.FormData,s.each(s.extend(f,n.settings.multipart_params),function(t,e){d.append(e,t)}),d.append(n.settings.file_data_name,h),v.send(d,{runtime_order:n.settings.runtimes,required_caps:_,swf_url:n.settings.flash_swf_url,xap_url:n.settings.silverlight_xap_url})):(c=s.buildUrl(n.settings.url,s.extend(f,n.settings.multipart_params)),v.open("post",c,!0),v.setRequestHeader("Content-Type","application/octet-stream"),s.each(n.settings.headers,function(t,e){v.setRequestHeader(e,t)}),v.send(h,{runtime_order:n.settings.runtimes,required_caps:_,swf_url:n.settings.flash_swf_url,xap_url:n.settings.silverlight_xap_url})))}var l,c=n.settings.url,u=n.features,p=t.chunk_size,f=t.max_retries,g=0;i.loaded&&(g=i.loaded=p*Math.floor(i.loaded/p)),l=i.getSource(),!e.isEmptyObj(n.settings.resize)&&h(l,"send_binary_string")&&~e.inArray(l.type,["image/jpeg","image/png"])?d.call(this,l,n.settings.resize,function(t){l=t,i.size=t.size,a()}):a()}),n.bind("UploadProgress",function(t,e){l(e)}),n.bind("StateChanged",function(t){if(t.state==s.STARTED)p=+new Date;else if(t.state==s.STOPPED)for(var e=t.files.length-1;e>=0;e--)t.files[e].status==s.UPLOADING&&(t.files[e].status=s.QUEUED,c())}),n.bind("QueueChanged",c),n.bind("Error",function(t,e){e.file&&(e.file.status=s.FAILED,l(e.file),t.state==s.STARTED&&o(function(){a.call(n)},1))}),n.bind("FileUploaded",function(){c(),o(function(){a.call(n)},1)}),n.trigger("Init",{runtime:this.runtime}),u.call(this),void 0):void this.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")})},refresh:function(){g&&g.trigger("Refresh"),this.trigger("Refresh")},start:function(){this.state!=s.STARTED&&(this.state=s.STARTED,this.trigger("StateChanged"),a.call(this))},stop:function(){this.state!=s.STOPPED&&(this.state=s.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){w=arguments[0]!==n?arguments[0]:!0,g&&g.disable(w),this.trigger("DisableBrowse",w)},getFile:function(t){var e;for(e=y.length-1;e>=0;e--)if(y[e].id===t)return y[e]},addFile:function(t,n){function i(){var t=m||g;return t?t.getRuntime().uid:!1}function o(t,n){var i=[];e.each(c.settings.filters,function(e,n){r[n]&&i.push(function(i){r[n].call(c,e,t,function(t){i(!t)})})}),e.inSeries(i,n)}function a(t){var i=e.typeOf(t);if(t instanceof e.File){if(!t.ruid&&!t.isDetached()){if(!l)return!1;t.ruid=l,t.connectRuntime(l)}a(new s.File(t))}else t instanceof e.Blob?(a(t.getSource()),t.destroy()):t instanceof s.File?(n&&(t.name=n),u.push(function(e){o(t,function(n){n||h.push(t),e()})})):-1!==e.inArray(i,["file","blob"])?a(new e.File(null,t)):"node"===i&&"filelist"===e.typeOf(t.files)?e.each(t.files,a):"array"===i&&(n=null,e.each(t,a))}var l,c=this,u=[],h=[];l=i(),a(t),u.length&&e.inSeries(u,function(){h.length&&c.trigger("FilesAdded",h)})},removeFile:function(t){for(var e="string"==typeof t?t:t.id,n=y.length-1;n>=0;n--)if(y[n].id===e)return this.splice(n,1)[0]},splice:function(t,e){var i=y.splice(t===n?0:t,e===n?y.length:e);return this.trigger("FilesRemoved",i),this.trigger("QueueChanged"),s.each(i,function(t){t.destroy()}),i},trigger:function(t){var e,n,i=b[t.toLowerCase()];if(i)for(n=Array.prototype.slice.call(arguments),n[0]=this,e=0;e<i.length;e++)if(i[e].func.apply(i[e].scope,n)===!1)return!1;return!0},hasEventListener:function(t){return!!b[t.toLowerCase()]},bind:function(t,e,n){var i;t=t.toLowerCase(),i=b[t]||[],i.push({func:e,scope:n||this}),b[t]=i},unbind:function(t){t=t.toLowerCase();var e,i=b[t],o=arguments[1];if(i){if(o!==n){for(e=i.length-1;e>=0;e--)if(i[e].func===o){i.splice(e,1);break}}else i=[];i.length||delete b[t]}},unbindAll:function(){var t=this;s.each(b,function(e,n){t.unbind(n)})},destroy:function(){this.stop(),s.each(y,function(t){t.destroy()}),y=[],g&&(g.destroy(),g=null),m&&(m.destroy(),m=null),_={},p=f=w=v=null,this.trigger("Destroy"),this.unbindAll(),b={}}})},s.File=function(){function t(t){s.extend(this,{id:s.guid(),name:t.name||t.fileName,type:t.type||"",size:t.size||t.fileSize,origSize:t.size||t.fileSize,loaded:0,percent:0,status:s.QUEUED,lastModifiedDate:t.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var t=this.getSource().getSource();return-1!==e.inArray(e.typeOf(t),["blob","file"])?t:null},getSource:function(){return n[this.id]?n[this.id]:null},destroy:function(){var t=this.getSource();t&&(t.destroy(),delete n[this.id])}}),n[this.id]=t}var n={};return t}(),s.QueueProgress=function(){var t=this;t.size=0,t.loaded=0,t.uploaded=0,t.failed=0,t.queued=0,t.percent=0,t.bytesPerSec=0,t.reset=function(){t.size=t.loaded=t.uploaded=t.failed=t.queued=t.percent=t.bytesPerSec=0}},t.plupload=s}(window,mOxie),define("plupload",["jquery"],function(t){return function(){var e;return e||t.plupload}}(this)),dragBoundRect=function(t,e,n){var i=n.getX(),o=n.getX()+n.getWidth()-e.getWidth(),r=n.getY(),s=n.getY()+n.getHeight()-e.getHeight(),a=t.x,l=t.y;return a<i-e.getX()&&(a=i-e.getX()),a>o-e.getX()&&(a=o-e.getX()),l<r-e.getY()&&(l=r-e.getY()),l>s-e.getY()&&(l=s-e.getY()),{x:a,y:l}},resizeCircle=function(t,e){var n=0,i=5,o=t.radius(),r=t.getAbsolutePosition().x,s=t.getAbsolutePosition().y,a=new Kinetic.Group({draggable:!0}),l=new Kinetic.Circle({x:r+o+n,y:s,radius:i,stroke:"#666",fill:"#ddd",strokeWidth:2,draggable:!0,dragBoundFunc:function(t){return{x:t.x,y:this.getAbsolutePosition().y}}});return l.on("dragmove",function(){var e=this.getAbsolutePosition().x,i=this.getAbsolutePosition().y,o=t.getAbsolutePosition().x,r=t.getAbsolutePosition().y,s=e-o,a=i-r,l=Math.sqrt(s*s+a*a)-n;l=Math.max(5,l),t.resize(l)}),l.on("mouseover",function(){var t=this.getLayer();document.body.style.cursor="pointer",this.strokeWidth(4),t.draw()}),l.on("mouseout",function(){var t=this.getLayer();document.body.style.cursor="default",this.strokeWidth(2),t.draw()}),t.resize=function(t){this.radius(t)},a.add(t),a.add(l),e.add(a),a},resizeRect=function(t,e){var n=t.getAbsolutePosition().x,i=t.getAbsolutePosition().y,o=(t.getAbsolutePosition(),t.width()),r=t.height(),s=e.getStage(),a=new Kinetic.Group({x:n,y:i,draggable:!0,dragBoundFunc:function(t){return dragBoundRect(t,this.getChildren()[0],s)}});e.add(a),a.add(t);var l=addAnchor(a,0,0,"topLeft");return addAnchor(a,o,0,"topRight"),addAnchor(a,o,r,"bottomRight"),addAnchor(a,0,r,"bottomLeft"),t.setPosition(l.getPosition()),a},addAnchor=function(t,e,n,i){var o=t.getLayer(),r=new Kinetic.Circle({x:e,y:n,stroke:"#666",fill:"#ddd",strokeWidth:2,radius:5,name:i,draggable:!0,dragOnTop:!1});return r.on("dragmove",function(){update(this),o.draw()}),r.on("mousedown touchstart",function(){t.draggable(!1),this.moveToTop()}),r.on("dragend",function(){t.draggable(!0),o.draw(),update(this)}),r.on("mouseover",function(){var t=this.getLayer();document.body.style.cursor="pointer",this.strokeWidth(4),t.draw()}),r.on("mouseout",function(){var t=this.getLayer();document.body.style.cursor="default",this.strokeWidth(2),t.draw()}),t.add(r),"topLeft"==i?r:void 0},update=function(t){var e=t.getParent(),n=e.get(".topLeft")[0],i=e.get(".topRight")[0],o=e.get(".bottomRight")[0],r=e.get(".bottomLeft")[0],s=e.getChildren()[0],a=t.getX(),l=t.getY();switch(t.getName()){case"topLeft":i.setY(l),r.setX(a);break;case"topRight":n.setY(l),o.setX(a);break;case"bottomRight":r.setY(l),i.setX(a);break;case"bottomLeft":o.setY(l),n.setX(a)}s.setPosition(n.getPosition());var c=i.getX()-n.getX(),u=r.getY()-n.getY();c&&u&&s.setSize({width:c,height:u})},define("kineticresize",["kinetic"],function(){}),function(){var t,e=this,n=e.Backbone,i=[],o=(i.push,i.slice);i.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.1.0";var r=e._;r||"undefined"==typeof require||(r=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!l(this,"once",t,[e,n])||!e)return this;var i=this,o=r.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,s,a,c,u,h,d;if(!this._events||!l(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:r.keys(this._events),c=0,u=a.length;u>c;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=i=[],e||n)for(h=0,d=s.length;d>h;h++)o=s[h],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&c(n,e),i&&c(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(e,n,this),(o||r.isEmpty(t._events))&&delete this._listeningTo[s];return this}},a=/\s+/,l=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(a.test(n)){for(var r=n.split(a),s=0,l=r.length;l>s;s++)t[e].apply(t,[r[s]].concat(i));return!1}return!0},c=function(t,e){var n,i=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e)}},u={listenTo:"on",listenToOnce:"once"};r.each(u,function(t,e){s[e]=function(e,n,i){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=r.uniqueId("l"));return o[s]=e,i||"object"!=typeof n||(i=this),e[t](n,i,this),this}}),s.bind=s.on,s.unbind=s.off,r.extend(t,s);var h=t.Model=function(t,e){var n=t||{};e||(e={}),this.cid=r.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=r.defaults({},n,r.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};r.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return r.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return r.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,s,a,l,c,u,h;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;s=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=r.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],r.isEqual(h[i],e)||a.push(i),r.isEqual(u[i],e)?delete this.changed[i]:this.changed[i]=e,s?delete h[i]:h[i]=e;if(!l){a.length&&(this._pending=!0);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,h[a[d]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,r.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,r.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!r.isEmpty(this.changed):r.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?r.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)r.isEqual(i[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(t){t=t?r.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},N(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,o,s,a=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,n=r.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=r.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=r.extend(i||{},e)),r.isObject(e)&&!l.set(e,n)?!1:(c&&c(l,t,n),void l.trigger("sync",l,t,n))},N(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=i),s=this.sync(o,this,n),i&&n.wait&&(this.attributes=a),s},destroy:function(t){t=t?r.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(o){(t.wait||e.isNew())&&i(),n&&n(e,o,t),e.isNew()||e.trigger("sync",e,o,t)},this.isNew())return t.success(),!1;N(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=r.result(this,"urlRoot")||r.result(this.collection,"url")||F();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},r.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,r.extend(e,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];r.each(d,function(t){h.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),r[t].apply(r,e)}});var p=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,r.extend({silent:!0},e))},f={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};r.extend(p.prototype,s,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,r.extend({merge:!1},e,g))},remove:function(t,e){var n=!r.isArray(t);t=n?[t]:r.clone(t),e||(e={});var i,o,s,a;for(i=0,o=t.length;o>i;i++)a=t[i]=this.get(t[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a));return n?t[0]:t},set:function(t,e){e=r.defaults({},e,f),e.parse&&(t=this.parse(t,e));var n=!r.isArray(t);t=n?t?[t]:[]:r.clone(t);var i,o,s,a,l,c,u,d=e.at,p=this.model,g=this.comparator&&null==d&&e.sort!==!1,m=r.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},_=e.add,w=e.merge,x=e.remove,C=!g&&_&&x?[]:!1;for(i=0,o=t.length;o>i;i++){if(l=t[i],s=l instanceof h?a=l:l[p.prototype.idAttribute],c=this.get(s))x&&(b[c.cid]=!0),w&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),g&&!u&&c.hasChanged(m)&&(u=!0)),t[i]=c;else if(_){if(a=t[i]=this._prepareModel(l,e),!a)continue;v.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}C&&C.push(c||a)}if(x){for(i=0,o=this.length;o>i;++i)b[(a=this.models[i]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||C&&C.length)if(g&&(u=!0),this.length+=v.length,null!=d)for(i=0,o=v.length;o>i;i++)this.models.splice(d+i,0,v[i]);else{C&&(this.models.length=0);var k=C||v;for(i=0,o=k.length;o>i;i++)this.models.push(k[i])}if(u&&this.sort({silent:!0}),!e.silent){for(i=0,o=v.length;o>i;i++)(a=v[i]).trigger("add",a,this,e);(u||C&&C.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,r.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,r.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,r.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null!=t?this._byId[t.id]||this._byId[t.cid]||this._byId[t]:void 0},at:function(t){return this.models[t]},where:function(t,e){return r.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),r.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(r.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return r.invoke(this.models,"get",t)},fetch:function(t){t=t?r.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},N(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?r.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(t,e,o){o.wait&&n.add(t,o),i&&i(t,e,o)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e=e?r.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];r.each(m,function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),r[t].apply(r,e)}});var v=["groupBy","countBy","sortBy"];r.each(v,function(t){p.prototype[t]=function(e,n){var i=r.isFunction(e)?e:function(t){return t.get(e)};return r[t](this.models,i,n)}});var y=t.View=function(t){this.cid=r.uniqueId("view"),t||(t={}),r.extend(this,r.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];r.extend(y.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=r.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(r.isFunction(n)||(n=this[t[e]]),n){var i=e.match(b),o=i[1],s=i[2];n=r.bind(n,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,n):this.$el.on(o,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"),!1);else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e["class"]=r.result(this,"className"));var n=t.$("<"+r.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var o=x[e];r.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=r.result(n,"url")||F()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&w&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(r.extend(s,i));return n.trigger("request",n,l,i),l};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,T=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(C.prototype,s,{initialize:function(){},route:function(e,n,i){r.isRegExp(e)||(e=this._routeToRegExp(e)),r.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return t.history.route(e,function(r){var s=o._extractParameters(e,r);i&&i.apply(o,s),o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),t.history.trigger("route",o,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var t,e=r.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(E,"\\$&").replace(k,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return r.map(n,function(t){return t?decodeURIComponent(t):null})}});var M=t.History=function(){this.handlers=[],r.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,A=/msie [\w.]+/,I=/\/$/,R=/[?#].*$/;M.started=!1,r.extend(M.prototype,s,{interval:50,getHash:function(t){
var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(I,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(D,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=r.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,o=A.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(P,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var s=this.location,a=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&s.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),r.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!M.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(R,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new M;var O=function(t,e){var n,i=this;n=t&&r.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},r.extend(n,i,e);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,t&&r.extend(n.prototype,t),n.__super__=i.prototype,n};h.extend=p.extend=C.extend=y.extend=M.extend=O;var F=function(){throw new Error('A "url" property or function must be specified')},N=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this),define("backbone",["jquery","underscore"],function(t){return function(){var e;return e||t.Backbone}}(this)),function(t,e){if("function"==typeof define&&define.amd)define("babysitter",["backbone","underscore"],function(t,n){return e(t,n)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=e(n,i)}else e(t.Backbone,t._)}(this,function(t,e){"use strict";var n=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var n=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(n.prototype,{add:function(t,e){var n=t.cid;return this._views[n]=t,t.model&&(this._indexByModel[t.model.cid]=n),e&&(this._indexByCustom[e]=n),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var n=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===n?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,n){e.each(this._views,function(i){e.isFunction(i[t])&&i[t].apply(i,n||[])})},_updateLength:function(){this.length=e.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(i,function(t){n.prototype[t]=function(){var n=e.values(this._views),i=[n].concat(e.toArray(arguments));return e[t].apply(e,i)}}),n}(t,e),t.ChildViewContainer.VERSION="0.1.4",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=n,this},t.ChildViewContainer});var Marionette=function(t,e,n){"use strict";function i(t,e){var n=new Error(t);throw n.name=e||"Error",n}!function(t,e){var n=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var n=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(n.prototype,{add:function(t,e){var n=t.cid;return this._views[n]=t,t.model&&(this._indexByModel[t.model.cid]=n),e&&(this._indexByCustom[e]=n),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var n=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===n?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,n){e.each(this._views,function(i){e.isFunction(i[t])&&i[t].apply(i,n||[])})},_updateLength:function(){this.length=e.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(i,function(t){n.prototype[t]=function(){var n=e.values(this._views),i=[n].concat(e.toArray(arguments));return e[t].apply(e,i)}}),n}(t,e),t.ChildViewContainer.VERSION="0.1.4",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=n,this},t.ChildViewContainer}(e,n),function(t,e){var n=t.Wreqr,i=t.Wreqr={};return t.Wreqr.VERSION="1.3.1",t.Wreqr.noConflict=function(){return t.Wreqr=n,this},i.Handlers=function(t,e){var n=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,n){var i=null;e.isObject(t)&&!e.isFunction(t)&&(i=t.context,t=t.callback),this.setHandler(n,t,i)},this)},setHandler:function(t,e,n){var i={callback:e,context:n};this._wreqrHandlers[t]=i,this.trigger("handler:add",t,e,n)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(t,e),i.CommandStorage=function(){var n=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(n.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var n=this.getCommands(t);n.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),n}(),i.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,n)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,n,i){var o=this.storage.getCommands(t);e.each(o.instances,function(t){n.apply(i,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var n,i=t.storageType||this.storageType;n=e.isFunction(i)?new i:i,this.storage=n}})}(i),i.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.hasHandler(t)?this.getHandler(t).apply(this,e):void 0}})}(i),i.EventAggregator=function(t,e){var n=function(){};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events),n}(t,e),i.Channel=function(n){var i=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,n,i){if(n){i=i||this;var o="vent"===t?"on":"setHandler";e.each(n,function(n,r){this[t][o](r,e.bind(n,i))},this)}}}),i}(i),i.radio=function(t){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(n.prototype,{channel:function(t){if(!t)throw new Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var n=this._channels[e];return n||(n=new t.Channel(e),this._channels[e]=n),n},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(i[t],function(e){this[t][e]=o(this,t,e)},this)},this)}});var i={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(t,e,n){return function(i){var o=t._getChannel(i)[e],r=Array.prototype.slice.call(arguments,1);return o[n].apply(o,r)}};return new n}(i),t.Wreqr}(e,n);var o={};e.Marionette=o,o.$=e.$;var r=Array.prototype.slice;return o.extend=e.Model.extend,o.getOption=function(t,e){if(t&&e){var n;return n=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},o.normalizeMethods=function(t){var e,i={};return n.each(t,function(t,o){e=t,n.isFunction(e)||(e=this[e]),e&&(i[o]=e)},this),i},o.normalizeUIKeys=function(t,e){return"undefined"!=typeof t?(n.each(n.keys(t),function(n){var i=/@ui.[a-zA-Z_$0-9]*/g;n.match(i)&&(t[n.replace(i,function(t){return e[t.slice(4)]})]=t[n],delete t[n])}),t):void 0},o.actAsCollection=function(t,e){var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(i,function(i){t[i]=function(){var t=n.values(n.result(this,e)),o=[t].concat(n.toArray(arguments));return n[i].apply(n,o)}})},o.triggerMethod=function(){function t(t,e,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi,i=function(i){var o="on"+i.replace(e,t),r=this[o];return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(r)?r.apply(this,n.tail(arguments)):void 0};return i}(),o.MonitorDOMRefresh=function(t){function e(t){t._isShown=!0,o(t)}function i(t){t._isRendered=!0,o(t)}function o(t){t._isShown&&t._isRendered&&r(t)&&n.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function r(e){return t.contains(e.el)}return function(t){t.listenTo(t,"show",function(){e(t)}),t.listenTo(t,"render",function(){i(t)})}}(document.documentElement),function(t){function e(t,e,o,r){var s=r.split(/\s+/);n.each(s,function(n){var r=t[n];r||i("Method '"+n+"' was configured as an event handler, but does not exist."),t.listenTo(e,o,r)})}function o(t,e,n,i){t.listenTo(e,n,i)}function r(t,e,i,o){var r=o.split(/\s+/);n.each(r,function(n){var o=t[n];t.stopListening(e,i,o)})}function s(t,e,n,i){t.stopListening(e,n,i)}function a(t,e,i,o,r){e&&i&&(n.isFunction(i)&&(i=i.call(t)),n.each(i,function(i,s){n.isFunction(i)?o(t,e,s,i):r(t,e,s,i)}))}t.bindEntityEvents=function(t,n,i){a(t,n,i,o,e)},t.unbindEntityEvents=function(t,e,n){a(t,e,n,s,r)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},n.extend(o.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(n,i){e&&(n=e),t.call(n,i)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],n.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),o.Controller=function(t){this.triggerMethod=o.triggerMethod,this.options=t||{},n.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,n.extend(o.Controller.prototype,e.Events,{close:function(){this.stopListening();var t=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(t)),this.off()}}),o.Region=function(t){if(this.options=t||{},this.el=o.getOption(this,"el"),this.el||i("An 'el' must be specified for a region.","NoElError"),this.initialize){var e=Array.prototype.slice.apply(arguments);this.initialize.apply(this,e)}},n.extend(o.Region,{buildRegion:function(t,e){var o=n.isString(t),r=n.isString(t.selector),s=n.isUndefined(t.regionType),a=n.isFunction(t);a||o||r||i("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;o&&(l=t),t.selector&&(l=t.selector,delete t.selector),a&&(c=t),!a&&s&&(c=e),t.regionType&&(c=t.regionType,delete t.regionType),(o||a)&&(t={}),t.el=l;var u=new c(t);return t.parentEl&&(u.getEl=function(e){var i=t.parentEl;return n.isFunction(i)&&(i=i()),i.find(e)}),u}}),n.extend(o.Region.prototype,e.Events,{show:function(t,e){this.ensureEl();var i=e||{},r=t.isClosed||n.isUndefined(t.$el),s=t!==this.currentView,a=!!i.preventClose,l=!a&&s;l&&this.close(),t.render(),o.triggerMethod.call(this,"before:show",t),o.triggerMethod.call(t,"before:show"),(s||r)&&this.open(t),this.currentView=t,o.triggerMethod.call(this,"show",t),o.triggerMethod.call(t,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return o.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),o.triggerMethod.call(this,"close",t),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,e){var i={};return n.each(t,function(t,o){n.isString(t)&&(t={selector:t}),t.selector&&(t=n.defaults({},t,e));var r=this.addRegion(o,t);i[o]=r},this),i},addRegion:function(e,i){var o,r=n.isObject(i),s=n.isString(i),a=!!i.selector;return o=s||r&&a?t.Region.buildRegion(i,t.Region):n.isFunction(i)?t.Region.buildRegion(i,t.Region):i,this._store(e,o),this.triggerMethod("region:add",e,o),o},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){n.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){n.each(this._regions,function(t,e){t.close()},this)},close:function(){this.removeRegions(),t.Controller.prototype.close.apply(this,arguments)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),e.stopListening(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=n.size(this._regions)}});return t.actAsCollection(e.prototype,"_regions"),e}(o),o.TemplateCache=function(t){this.templateId=t},n.extend(o.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new o.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=r.call(arguments),n=e.length;if(n>0)for(t=0;n>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),n.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=o.$(t).html();return e&&0!==e.length||i("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return n.template(t)}}),o.Renderer={render:function(t,e){t||i("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var n;return(n="function"==typeof t?t:o.TemplateCache.get(t))(e)}},o.View=e.View.extend({constructor:function(t){n.bindAll(this,"render"),this.options=n.extend({},n.result(this,"options"),n.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(n.result(this,"events")),n.isObject(this.behaviors)&&new o.Behaviors(this),e.View.prototype.constructor.apply(this,arguments),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:o.triggerMethod,normalizeMethods:o.normalizeMethods,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var e=o.getOption(this,"templateHelpers");return n.isFunction(e)&&(e=e.call(this)),n.extend(t,e)},normalizeUIKeys:function(t){var e=n.result(this,"ui");return o.normalizeUIKeys(t,e)},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(e,function(e,i){var o=n.isObject(e),r=o?e.event:e;t[i]=function(t){if(t){var n=t.preventDefault,i=t.stopPropagation,s=o?e.preventDefault:n,a=o?e.stopPropagation:i;s&&n&&n.apply(t),a&&i&&i.apply(t)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,l)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,n.isFunction(t)&&(t=t.call(this));var i={},o=n.result(this,"behaviorEvents")||{},r=this.configureTriggers();n.extend(i,o,t,r),e.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=Array.prototype.slice.call(arguments),e=this.triggerMethod.apply(this,["before:close"].concat(t));e!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(t)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(t),function(e){var n=t[e];this.ui[e]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),n=o.Renderer.render(e,t);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(t){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,function(t){o.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(t,e,n){this.closeEmptyView();var i=this.getItemView(t),o=this.collection.indexOf(t);this.addItemView(t,i,o)},onShowCalled:function(){this.children.each(function(t){o.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var t;this.collection.each(function(e,n){t=this.getItemView(e),this.addItemView(e,t,n)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new e.Model;this.addItemView(n,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return o.getOption(this,"emptyView")},getItemView:function(t){var e=o.getOption(this,"itemView");return e||i("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(t,e,i){var r=o.getOption(this,"itemViewOptions");n.isFunction(r)&&(r=r.call(this,t,i));var s=this.buildItemView(t,e,r);return this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,i),this._isShown&&!this.isBuffering&&o.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s),s},addChildViewEventForwarding:function(t){var e=o.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var i=r.call(arguments),s=i[0],a=this.normalizeMethods(this.getItemEvents());i[0]=e+":"+s,i.splice(1,0,t),"undefined"!=typeof a&&n.isFunction(a[s])&&a[s].apply(this,i),o.triggerMethod.apply(this,i)},this)},getItemEvents:function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,e,i){var o=n.extend({model:t},i);return new e(o)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(t.close?t.close():t.remove&&t.remove(),this.stopListening(t),this.children.remove(t)),this.triggerMethod("item:removed",t)},isEmpty:function(t){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(t,e){t.$el.append(e)},appendHtml:function(t,e,n){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(t){var e=o.getOption(this,"itemView")||this.constructor;return e||i("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return o.Renderer.render(e,t)},appendBuffer:function(t,e){var n=this.getItemViewContainer(t);n.append(e)},appendHtml:function(t,e,n){if(t.isBuffering)t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e);else{var i=this.getItemViewContainer(t);i.append(e.el)}},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var e,r=o.getOption(t,"itemViewContainer");if(r){var s=n.isFunction(r)?r.call(t):r;e="@"===s.charAt(0)&&t.ui?t.ui[s.substr(4)]:t.$(s),e.length<=0&&i("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else e=t.$el;return t.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),o.ItemView.prototype.constructor.call(this,t)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),o.ItemView.prototype.close.apply(this,arguments))},addRegion:function(t,e){var n={};return n[t]=e,this._buildRegions(n)[t]},addRegions:function(t){return this.regions=n.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},_buildRegions:function(t){var e=this,n={regionType:o.getOption(this,"regionType"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,n)},_initializeRegions:function(t){var e;this._initRegionManager(),e=n.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),o.Behavior=function(t,e){function n(e,n){this.view=n,this.defaults=t.result(this,"defaults")||{},this.options=t.extend({},this.defaults,e),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return t.extend(n.prototype,e.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:o.triggerMethod}),n.extend=o.extend,n}(n,e),o.Behaviors=function(t,e){function n(t){this.behaviors=n.parseBehaviors(t,e.result(t,"behaviors")),n.wrap(t,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement","close"])}var i={setElement:function(t,n){t.apply(this,e.tail(arguments,2)),e.each(n,function(t){t.$el=this.$el},this)},close:function(t,n){var i=e.tail(arguments,2);t.apply(this,i),e.invoke(n,"close",i)},onShow:function(n,i){var o=e.tail(arguments,2);e.each(i,function(e){t.triggerMethod.apply(e,["show"].concat(o))}),e.isFunction(n)&&n.apply(this,o)},onClose:function(n,i){var o=e.tail(arguments,2);e.each(i,function(e){t.triggerMethod.apply(e,["close"].concat(o))}),e.isFunction(n)&&n.apply(this,o)},bindUIElements:function(t,n){t.apply(this),e.invoke(n,t)},unbindUIElements:function(t,n){t.apply(this),e.invoke(n,t)},triggerMethod:function(t,n){var i=e.tail(arguments,2);t.apply(this,i),e.each(n,function(e){t.apply(e,i)})},delegateEvents:function(n,i){var o=e.tail(arguments,2);n.apply(this,o),e.each(i,function(e){t.bindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.bindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},undelegateEvents:function(n,i){var o=e.tail(arguments,2);n.apply(this,o),e.each(i,function(e){t.unbindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.unbindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},behaviorEvents:function(n,i){var o={},r=e.result(this,"ui");return e.each(i,function(n,i){var s={},a=e.result(n,"events")||{},l=e.result(n,"ui"),c=e.extend({},r,l);a=t.normalizeUIKeys(a,c),e.each(e.keys(a),function(t){var o=new Array(i+2).join(" "),r=t+o,l=e.isFunction(a[t])?a[t]:n[a[t]];s[r]=e.bind(l,n)}),o=e.extend(o,s)}),o}};return e.extend(n,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(t,i){return t.behaviorClass?t.behaviorClass:e.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[i]:n.behaviorsLookup[i]},parseBehaviors:function(t,i){return e.map(i,function(e,i){var o=n.getBehaviorClass(e,i);return new o(e,t)})},wrap:function(t,n,o){e.each(o,function(o){t[o]=e.partial(i[o],t[o],n)})}}),n}(o,n),o.AppRouter=e.Router.extend({constructor:function(t){e.Router.prototype.constructor.apply(this,arguments),this.options=t||{};var n=o.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,n),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var n=this._getController();this._addAppRoute(n,t,e)},_processOnRoute:function(t,e){var i=n.invert(this.appRoutes)[t];n.isFunction(this.onRoute)&&this.onRoute(t,i,e);
},processAppRoutes:function(t,e){if(e){var i=n.keys(e).reverse();n.each(i,function(n){this._addAppRoute(t,n,e[n])},this)}},_getController:function(){return o.getOption(this,"controller")},_addAppRoute:function(t,e,o){var r=t[o];r||i("Method '"+o+"' was not found on the controller"),this.route(e,o,n.bind(r,t))}}),o.Application=function(t){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new e.Wreqr.EventAggregator,this.commands=new e.Wreqr.Commands,this.reqres=new e.Wreqr.RequestResponse,this.submodules={},n.extend(this,t),this.triggerMethod=o.triggerMethod},n.extend(o.Application.prototype,e.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},module:function(t,e){var n=o.Module.getClass(e),i=r.call(arguments);return i.unshift(this),n.create.apply(n,i)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t,e){delete this[t]})}}),o.Application.extend=o.extend,o.Module=function(t,e,i){this.moduleName=t,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=o.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,t,e)},o.Module.extend=o.extend,n.extend(o.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(n.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,i){if(t){var r=n.flatten([this,this.app,e,o,o.$,n,i]);t.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),n.extend(o.Module,{create:function(t,e,i){var o=t,s=r.call(arguments);s.splice(0,3),e=e.split(".");var a=e.length,l=[];return l[a-1]=i,n.each(e,function(e,n){var r=o;o=this._getModule(r,e,t,i),this._addModuleDefinition(r,o,l[n],s)},this),o},_getModule:function(t,e,i,o,r){var s=n.extend({},o),a=this.getClass(o),l=t[e];return l||(l=new a(e,i,s),t[e]=l,t.submodules[e]=l),l},getClass:function(t){var e=o.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,n,i){var o=this._getDefine(n),r=this._getStartWithParent(n,e);o&&e.addDefinition(o,i),this._addStartWithParent(t,e,r)},_getStartWithParent:function(t,e){var i;return n.isFunction(t)&&t.prototype instanceof o.Module?(i=e.constructor.prototype.startWithParent,n.isUndefined(i)?!0:i):n.isObject(t)?(i=t.startWithParent,n.isUndefined(i)?!0:i):!0},_getDefine:function(t){return!n.isFunction(t)||t.prototype instanceof o.Module?n.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,n){e.startWithParent=e.startWithParent&&n,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),o}(this,Backbone,_);if(define("marionette",["backbone"],function(t){return function(){var e;return e||t.Marionette}}(this)),function(t,e){if("object"==typeof exports&&exports)e(exports);else{var n={};e(n),"function"==typeof define&&define.amd?define("mustache",n):t.Mustache=n}}(this,function(t){function e(t,e){return p.call(t,e)}function n(t){return!e(f,t)}function i(t){return"function"==typeof t}function o(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t){return String(t).replace(/[&<>"'\/]/g,function(t){return v[t]})}function s(t){if(!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);return[new RegExp(o(t[0])+"\\s*"),new RegExp("\\s*"+o(t[1]))]}function a(e,i){function r(){if(T&&!E)for(;S.length;)delete k[S.pop()];else S=[];T=!1,E=!1}i=i||t.tags,e=e||"","string"==typeof i&&(i=i.split(b));for(var a,h,d,p,f,g,m=s(i),v=new u(e),C=[],k=[],S=[],T=!1,E=!1;!v.eos();){if(a=v.pos,d=v.scanUntil(m[0]))for(var M=0,D=d.length;D>M;++M)p=d.charAt(M),n(p)?S.push(k.length):E=!0,k.push(["text",p,a,a+1]),a+=1,"\n"===p&&r();if(!v.scan(m[0]))break;if(T=!0,h=v.scan(x)||"name",v.scan(y),"="===h?(d=v.scanUntil(_),v.scan(_),v.scanUntil(m[1])):"{"===h?(d=v.scanUntil(new RegExp("\\s*"+o("}"+i[1]))),v.scan(w),v.scanUntil(m[1]),h="&"):d=v.scanUntil(m[1]),!v.scan(m[1]))throw new Error("Unclosed tag at "+v.pos);if(f=[h,d,a,v.pos],k.push(f),"#"===h||"^"===h)C.push(f);else if("/"===h){if(g=C.pop(),!g)throw new Error('Unopened section "'+d+'" at '+a);if(g[1]!==d)throw new Error('Unclosed section "'+g[1]+'" at '+a)}else"name"===h||"{"===h||"&"===h?E=!0:"="===h&&(m=s(i=d.split(b)))}if(g=C.pop())throw new Error('Unclosed section "'+g[1]+'" at '+v.pos);return c(l(k))}function l(t){for(var e,n,i=[],o=0,r=t.length;r>o;++o)e=t[o],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}function c(t){for(var e,n,i=[],o=i,r=[],s=0,a=t.length;a>s;++s)switch(e=t[s],e[0]){case"#":case"^":o.push(e),r.push(e),o=e[4]=[];break;case"/":n=r.pop(),n[5]=e[2],o=r.length>0?r[r.length-1][4]:i;break;default:o.push(e)}return i}function u(t){this.string=t,this.tail=t,this.pos=0}function h(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function d(){this.cache={}}var p=RegExp.prototype.test,f=/\S/,g=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===g.call(t)},v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},y=/\s*/,b=/\s+/,_=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(t){var e=this.tail.match(t);if(e&&0===e.index){var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},u.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},h.prototype.push=function(t){return new h(t,this)},h.prototype.lookup=function(t){var e;if(t in this.cache)e=this.cache[t];else{for(var n=this;n;){if(t.indexOf(".")>0){e=n.view;for(var o=t.split("."),r=0;null!=e&&r<o.length;)e=e[o[r++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this.cache[t]=e}return i(e)&&(e=e.call(this.view)),e},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(t,e){var n=this.cache,i=n[t];return null==i&&(i=n[t]=a(t,e)),i},d.prototype.render=function(t,e,n){var i=this.parse(t),o=e instanceof h?e:new h(e);return this.renderTokens(i,o,n,t)},d.prototype.renderTokens=function(e,n,o,r){function s(t){return u.render(t,n,o)}for(var a,l,c="",u=this,h=0,d=e.length;d>h;++h)switch(a=e[h],a[0]){case"#":if(l=n.lookup(a[1]),!l)continue;if(m(l))for(var p=0,f=l.length;f>p;++p)c+=this.renderTokens(a[4],n.push(l[p]),o,r);else if("object"==typeof l||"string"==typeof l)c+=this.renderTokens(a[4],n.push(l),o,r);else if(i(l)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,r.slice(a[3],a[5]),s),null!=l&&(c+=l)}else c+=this.renderTokens(a[4],n,o,r);break;case"^":l=n.lookup(a[1]),(!l||m(l)&&0===l.length)&&(c+=this.renderTokens(a[4],n,o,r));break;case">":if(!o)continue;l=i(o)?o(a[1]):o[a[1]],null!=l&&(c+=this.renderTokens(this.parse(l),n,o,l));break;case"&":l=n.lookup(a[1]),null!=l&&(c+=l);break;case"name":l=n.lookup(a[1]),null!=l&&(c+=t.escape(l));break;case"text":c+=a[1]}return c},t.name="mustache.js",t.version="0.8.1",t.tags=["{{","}}"];var C=new d;t.clearCache=function(){return C.clearCache()},t.parse=function(t,e){return C.parse(t,e)},t.render=function(t,e,n){return C.render(t,e,n)},t.to_html=function(e,n,o,r){var s=t.render(e,n,o);return i(r)?void r(s):s},t.escape=r,t.Scanner=u,t.Context=h,t.Writer=d}),Backbone.Syphon=function(t,e,n){var i={};i.ignoredTypes=["button","submit","reset","fieldset"],i.serialize=function(t,i){var s={},c=a(i),u=o(t,c);return n.each(u,function(t){var n=e(t),i=r(n),o=c.keyExtractors.get(i),a=o(n),u=c.inputReaders.get(i),h=u(n),d=c.keyAssignmentValidators.get(i);if(d(n,a,h)){var p=c.keySplitter(a);s=l(s,p,h)}}),s},i.deserialize=function(t,i,s){var l=a(s),u=o(t,l),h=c(l,i);n.each(u,function(t){var n=e(t),i=r(n),o=l.keyExtractors.get(i),s=o(n),a=l.inputWriters.get(i),c=h[s];a(n,c)})};var o=function(t,i){var o=s(t),a=o.elements;return a=n.reject(a,function(t){var o,s=r(t),a=i.keyExtractors.get(s),l=a(e(t)),c=n.include(i.ignoredTypes,s),u=n.include(i.include,l),h=n.include(i.exclude,l);return o=u?!1:i.include?!0:h||c})},r=function(t){var n,i=e(t),o=i[0].tagName,r=o;return"input"===o.toLowerCase()&&(n=i.attr("type"),r=n?n:"text"),r.toLowerCase()},s=function(t){return n.isUndefined(t.$el)&&"form"===t.tagName.toLowerCase()?t:t.$el.is("form")?t.el:t.$("form")[0]},a=function(t){var e=n.clone(t)||{};return e.ignoredTypes=n.clone(i.ignoredTypes),e.inputReaders=e.inputReaders||i.InputReaders,e.inputWriters=e.inputWriters||i.InputWriters,e.keyExtractors=e.keyExtractors||i.KeyExtractors,e.keySplitter=e.keySplitter||i.KeySplitter,e.keyJoiner=e.keyJoiner||i.KeyJoiner,e.keyAssignmentValidators=e.keyAssignmentValidators||i.KeyAssignmentValidators,e},l=function(t,e,i){if(!e)return t;var o=e.shift();return t[o]||(t[o]=n.isArray(o)?[]:{}),0===e.length&&(n.isArray(t[o])?t[o].push(i):t[o]=i),e.length>0&&l(t[o],e,i),t},c=function(t,e,i){var o={};return n.each(e,function(e,r){var s={};i&&(r=t.keyJoiner(i,r)),n.isArray(e)?(r+="[]",s[r]=e):n.isObject(e)?s=c(t,e,r):s[r]=e,n.extend(o,s)}),o};return i}(Backbone,jQuery,_),Backbone.Syphon.TypeRegistry=function(){this.registeredTypes={}},Backbone.Syphon.TypeRegistry.extend=Backbone.Model.extend,_.extend(Backbone.Syphon.TypeRegistry.prototype,{get:function(t){var e=this.registeredTypes[t];return e||(e=this.registeredTypes["default"]),e},register:function(t,e){this.registeredTypes[t]=e},registerDefault:function(t){this.registeredTypes["default"]=t},unregister:function(t){this.registeredTypes[t]&&delete this.registeredTypes[t]}}),Backbone.Syphon.KeyExtractorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyExtractors=new Backbone.Syphon.KeyExtractorSet,Backbone.Syphon.KeyExtractors.registerDefault(function(t){return t.prop("name")}),Backbone.Syphon.InputReaderSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputReaders=new Backbone.Syphon.InputReaderSet,Backbone.Syphon.InputReaders.registerDefault(function(t){return t.val()}),Backbone.Syphon.InputReaders.register("checkbox",function(t){var e=t.prop("checked");return e}),Backbone.Syphon.InputWriterSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputWriters=new Backbone.Syphon.InputWriterSet,Backbone.Syphon.InputWriters.registerDefault(function(t,e){t.val(e)}),Backbone.Syphon.InputWriters.register("checkbox",function(t,e){t.prop("checked",e)}),Backbone.Syphon.InputWriters.register("radio",function(t,e){t.prop("checked",t.val()===e)}),Backbone.Syphon.KeyAssignmentValidatorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyAssignmentValidators=new Backbone.Syphon.KeyAssignmentValidatorSet,Backbone.Syphon.KeyAssignmentValidators.registerDefault(function(){return!0}),Backbone.Syphon.KeyAssignmentValidators.register("radio",function(t,e,n){return t.prop("checked")}),Backbone.Syphon.KeySplitter=function(t){var e=t.match(/[^\[\]]+/g);return t.indexOf("[]")===t.length-2&&(lastKey=e.pop(),e.push([lastKey])),e},Backbone.Syphon.KeyJoiner=function(t,e){return t+"["+e+"]"},define("syphon",["backbone"],function(){}),define("text",["module"],function(t){"use strict";var e,n,i,o,r,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,d=c&&(location.port||void 0),p={},f=t.config&&t.config()||{};return e={version:"2.0.10",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=s[e];try{t=new ActiveXObject(n)}catch(i){}if(t){s=[n];break}}return t},parseName:function(t){var e,n,i,o=!1,r=t.indexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==r&&(!s||r>1)?(e=t.substring(0,r),n=t.substring(r+1,t.length)):e=t,i=n||e,r=i.indexOf("!"),-1!==r&&(o="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:e=i),{moduleName:e,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,i,o){var r,s,a,l=e.xdRegExp.exec(t);return l?(r=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(r&&r!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==o)):!0},finishLoad:function(t,n,i,o){i=n?e.strip(i):i,f.isBuild&&(p[t]=i),o(i)},load:function(t,n,i,o){if(o.isBuild&&!o.inlineText)return void i();f.isBuild=o.isBuild;var r=e.parseName(t),s=r.moduleName+(r.ext?"."+r.ext:""),a=n.toUrl(s),l=f.useXhr||e.useXhr;return 0===a.indexOf("empty:")?void i():void(!c||l(a,u,h,d)?e.get(a,function(n){e.finishLoad(t,r.strip,n,i)},function(t){i.error&&i.error(t)}):n([s],function(t){e.finishLoad(r.moduleName+"."+r.ext,r.strip,t,i)}))},write:function(t,n,i,o){if(p.hasOwnProperty(n)){var r=e.jsEscape(p[n]);i.asModule(t+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,n,i,o,r){var s=e.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=i.toUrl(s.moduleName+a)+".js";e.load(l,i,function(n){var i=function(t){return o(c,t)};i.asModule=function(t,e){return o.asModule(t,c,e)},e.write(t,l,i,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),e.get=function(t,e,i){try{var o=n.readFileSync(t,"utf8");0===o.indexOf("\ufeff")&&(o=o.substring(1)),e(o)}catch(r){i(r)}}):"xhr"===f.env||!f.env&&e.createXhr()?e.get=function(t,n,i,o){var r,s=e.createXhr();if(s.open("GET",t,!0),o)for(r in o)o.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),o[r]);f.onXhr&&f.onXhr(s,t),s.onreadystatechange=function(e){var o,r;4===s.readyState&&(o=s.status,o>399&&600>o?(r=new Error(t+" HTTP status: "+o),r.xhr=s,i(r)):n(s.responseText),f.onXhrComplete&&f.onXhrComplete(s,t))},s.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,i,o="utf-8",r=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{a.close()}e(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,e.get=function(t,e){var n,s,a,l={};r&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),s.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),e(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),e}),function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function i(){var i;return n.settings.submitHandler?(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),!1):!0}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,n=t(this[0].form).validate();return this.each(function(){e=e&&n.element(this)}),e},removeAttrs:function(e){var n={},i=this;return t.each(e.split(/\s/),function(t,e){n[e]=i.attr(e),i.removeAttr(e)}),n},rules:function(e,n){var i=this[0];if(e){var o=t.data(i.form,"validator").settings,r=o.rules,s=t.validator.staticRules(i);switch(e){case"add":t.extend(s,t.validator.normalizeRule(n)),delete s.messages,r[i.name]=s,n.messages&&(o.messages[i.name]=t.extend(o.messages[i.name],n.messages));break;case"remove":if(!n)return delete r[i.name],s;var a={};return t.each(n.split(/\s/),function(t,e){a[e]=s[e],delete s[e]}),a}}var l=t.validator.normalizeRules(t.extend({},t.validator.classRules(i),t.validator.attributeRules(i),t.validator.dataRules(i),t.validator.staticRules(i)),i);if(l.required){var c=l.required;delete l.required,l=t.extend({required:c},l)}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),i="on"+e.type.replace(/^validate/,"");n.settings[i]&&n.settings[i].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})});var i=this.settings.rules;t.each(i,function(e,n){i[e]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var n=this.check(e)!==!1;return n?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var n in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!e.objectLength(t(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n=t(e).attr("type"),i=t(e).val();return"radio"===n||"checkbox"===n?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i=t(e).rules(),o=!1,r=this.elementValue(e);for(var s in i){var a={method:s,parameters:i[s]};try{if(n=t.validator.methods[s].call(this,r,e,a.parameters),"dependency-mismatch"===n){o=!0;continue}if(o=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,a),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+a.method+"' method.",l),l}}return o?void 0:(this.objectLength(i)&&this.successList.push(e),!0)},customDataMessage:function(e,n){return t(e).data("msg-"+n.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+n.toLowerCase())},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var i=this.defaultMessage(e,n.method),o=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,e):o.test(i)&&(i=t.validator.format(i.replace(o,"{$1}"),n.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var n=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i=this.errorsFor(e);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.html(n)):(i=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,t(e)):i.insertAfter(e))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,e)),this.toShow=this.toShow.add(i)},errorsFor:function(e){var n=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===n})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,n){return!!t(e,n.form).length},"function":function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n={},i=t(e),o=i[0].getAttribute("type");for(var r in t.validator.methods){var s;"required"===r?(s=i.get(0).getAttribute(r),""===s&&(s=!0),s=!!s):s=i.attr(r),/min|max/.test(r)&&(null===o||/number|range|text/.test(o))&&(s=Number(s)),s?n[r]=s:o===r&&"range"!==o&&(n[r]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(e){var n,i,o={},r=t(e);for(n in t.validator.methods)i=r.data("rule-"+n.toLowerCase()),void 0!==i&&(o[n]=i);return o},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,o){if(o===!1)return void delete e[i];if(o.param||o.depends){var r=!0;switch(typeof o.depends){case"string":r=!!t(o.depends,n.form).length;break;case"function":r=o.depends.call(n,n)}r?e[i]=void 0!==o.param?o.param:!0:delete e[i]}}),t.each(e,function(i,o){e[i]=t.isFunction(o)?o(n):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].split(/[\s,]+/),
e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],3>n.length&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var o=t(n).val();return o&&o.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(""+new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n=0,i=0,o=!1;t=t.replace(/\D/g,"");for(var r=t.length-1;r>=0;r--){var s=t.charAt(r);i=parseInt(s,10),o&&(i*=2)>9&&(i-=9),n+=i,o=!o}return 0===n%10},minlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o>=i},maxlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||i>=o},rangelength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o>=i[0]&&i[1]>=o},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||n>=t},range:function(t,e,n){return this.optional(e)||t>=n[0]&&n[1]>=t},equalTo:function(e,n,i){var o=t(i);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===o.val()},remote:function(e,n,i){if(this.optional(n))return"dependency-mismatch";var o=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,o.old===e)return o.valid;o.old=e;var r=this;this.startRequest(n);var s={};return s[n.name]=e,t.ajax(t.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:s,success:function(i){r.settings.messages[n.name].remote=o.originalMessage;var s=i===!0||"true"===i;if(s){var a=r.formSubmitted;r.prepareElement(n),r.formSubmitted=a,r.successList.push(n),delete r.invalid[n.name],r.showErrors()}else{var l={},c=i||r.defaultMessage(n,"remote");l[n.name]=o.message=t.isFunction(c)?c(e):c,r.invalid[n.name]=!0,r.showErrors(l)}o.valid=s,r.stopRequest(n,s)}},i)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,n,i){var o=t.port;"abort"===t.mode&&(e[o]&&e[o].abort(),e[o]=i)});else{var n=t.ajax;t.ajax=function(i){var o=("mode"in i?i:t.ajaxSettings).mode,r=("port"in i?i:t.ajaxSettings).port;return"abort"===o?(e[r]&&e[r].abort(),e[r]=n.apply(this,arguments),e[r]):n.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,n,i){return this.bind(n,function(n){var o=t(n.target);return o.is(e)?i.apply(o,arguments):void 0})}})}(jQuery),define("jqueryvalidate",["jquery"],function(){}),function(t){var e=!1,n=!1,i={isUrl:function(t){var e=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)?!0:!1},loadContent:function(t,e){t.html(e)},addPrefix:function(t){var e=t.attr("id"),n=t.attr("class");"string"==typeof e&&""!==e&&t.attr("id",e.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof n&&""!==n&&"sidr-inner"!==n&&t.attr("class",n.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),t.removeAttr("style")},execute:function(i,r,s){"function"==typeof r?(s=r,r="sidr"):r||(r="sidr");var a,l,c,u=t("#"+r),h=t(u.data("body")),d=t("html"),p=u.outerWidth(!0),f=u.data("speed"),g=u.data("side");if("open"===i||"toogle"===i&&!u.is(":visible")){if(u.is(":visible")||e)return;if(n!==!1)return void o.close(n,function(){o.open(r)});e=!0,"left"===g?(a={left:p+"px"},l={left:"0px"}):(a={right:p+"px"},l={right:"0px"}),c=d.scrollTop(),d.css("overflow-x","hidden").scrollTop(c),h.css({width:h.width(),position:"absolute"}).animate(a,f),u.css("display","block").animate(l,f,function(){e=!1,n=r,"function"==typeof s&&s(r)})}else{if(!u.is(":visible")||e)return;e=!0,"left"===g?(a={left:0},l={left:"-"+p+"px"}):(a={right:0},l={right:"-"+p+"px"}),c=d.scrollTop(),d.removeAttr("style").scrollTop(c),h.animate(a,f),u.animate(l,f,function(){u.removeAttr("style"),h.removeAttr("style"),t("html").removeAttr("style"),e=!1,n=!1,"function"==typeof s&&s(r)})}}},o={open:function(t,e){i.execute("open",t,e)},close:function(t,e){i.execute("close",t,e)},toogle:function(t,e){i.execute("toogle",t,e)}};t.sidr=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof e&&"string"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sidr"):o.toogle.apply(this,arguments)},t.fn.sidr=function(e){var n=t.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body"},e),r=n.name,s=t("#"+r);if(0===s.length&&(s=t("<div />").attr("id",r).appendTo(t("body"))),s.addClass("sidr").addClass(n.side).data({speed:n.speed,side:n.side,body:n.body}),"function"==typeof n.source){var a=n.source(r);i.loadContent(s,a)}else if("string"==typeof n.source&&i.isUrl(n.source))t.get(n.source,function(t){i.loadContent(s,t)});else if("string"==typeof n.source){var l="",c=n.source.split(",");if(t.each(c,function(e,n){l+='<div class="sidr-inner">'+t(n).html()+"</div>"}),n.renaming){var u=t("<div />").html(l);u.find("*").each(function(e,n){var o=t(n);i.addPrefix(o)}),l=u.html()}i.loadContent(s,l)}else null!==n.source&&t.error("Invalid Sidr Source");return this.each(function(){var e=t(this),n=e.data("sidr");n||(e.data("sidr",r),e.click(function(t){t.preventDefault(),o.toogle(r)}))})}}(jQuery),define("sidr",["jquery"],function(){}),!jQuery)throw new Error("Bootstrap requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]}}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one(t.support.transition.end,function(){n=!0});var o=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e()})}(window.jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){r.trigger("closed.bs.alert").remove()}var i=t(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var r=t(o);e&&e.preventDefault(),r.length||(r=i.hasClass("alert")?i:i.parent()),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i)};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",o=n.data();t+="Text",o.resetText||n.data("resetText",n[i]()),n[i](o[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var e=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===e.prop("type")&&t.find(".active").removeClass("active")}this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),o=i.data("bs.button"),r="object"==typeof n&&n;o||i.data("bs.button",o=new e(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),e.preventDefault()})}(window.jQuery),+function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var n=this,i=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid",function(){n.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,n){var i=this.$element.find(".item.active"),o=n||i[e](),r=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[a]()}this.sliding=!0,r&&this.pause();var c=t.Event("slide.bs.carousel",{relatedTarget:o[0],direction:s});if(!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(c),c.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one(t.support.transition.end,function(){o.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(c),c.isDefaultPrevented())return;i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),r=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n),s="string"==typeof n?n:r.slide;o||i.data("bs.carousel",o=new e(this,r)),"number"==typeof n?o.to(n):s?o[s]():r.interval&&o.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i=t(this),o=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),r=t.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(r.interval=!1),o.carousel(r),(s=i.attr("data-slide-to"))&&o.data("bs.carousel").to(s),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var s=t.camelCase(["scroll",o].join("-"));this.$element.one(t.support.transition.end,t.proxy(r,this)).emulateTransitionEnd(350)[o](this.$element[0][s])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one(t.support.transition.end,t.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),r=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.collapse",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),o=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=t(o),s=r.data("bs.collapse"),a=s?"toggle":i.data(),l=i.attr("data-parent"),c=l&&t(l);s&&s.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),r.collapse(a)})}(window.jQuery),+function(t){"use strict";function e(){t(i).remove(),t(o).each(function(e){var i=n(t(this));i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown")),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}var i=".dropdown-backdrop",o="[data-toggle=dropdown]",r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var r=n(o),s=r.hasClass("open");if(e(),!s){if("ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),r.trigger(i=t.Event("show.bs.dropdown")),i.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown"),o.focus()}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),s=r.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&r.find(o).focus(),i.click();var a=t("[role=menu] li:not(.divider):visible a",r);if(a.length){var l=a.index(a.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus()}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu]",r.prototype.keydown)}(window.jQuery),+function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one(t.support.transition.end,function(){n.$element.focus().trigger(o)}).emulateTransitionEnd(300):n.$element.focus().trigger(o)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var n=t.fn.modal;t.fn.modal=function(n,i){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},e.DEFAULTS,o.data(),"object"==typeof n&&n);r||o.data("bs.modal",r=new e(this,s)),"string"==typeof n?r[n](i):s.show&&r.show(i)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),o=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),n.data());e.preventDefault(),o.modal(r,this).one("hide",function(){n.is(":visible")&&n.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i);for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focus",l="hover"==s?"mouseleave":"blur";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,r=o.test(i);r&&(i=i.replace(o,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var s=this.getPosition(),a=n[0].offsetWidth,l=n[0].offsetHeight;if(r){var c=this.$element.parent(),u=i,h=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:c.outerWidth(),p="body"==this.options.container?window.innerHeight:c.outerHeight(),f="body"==this.options.container?0:c.offset().left;i="bottom"==i&&s.top+s.height+l-h>p?"top":"top"==i&&s.top-h-l<0?"bottom":"right"==i&&s.right+a>d?"left":"left"==i&&s.left-a<f?"right":i,n.removeClass(u).addClass(i)}var g=this.getCalculatedOffset(i,s,a,l);this.applyPlacement(g,i),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var n,i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top=t.top+s,t.left=t.left+a,i.offset(t).addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;if("top"==e&&c!=r&&(n=!0,t.top=t.top+r-c),/bottom|top/.test(e)){var u=0;t.left<0&&(u=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,c=i[0].offsetHeight),this.replaceArrow(u-o+l,l,"left")}else this.replaceArrow(c-r,c,"top");n&&i.offset(t)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),r="object"==typeof n&&n;o||i.data("bs.tooltip",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),o=i.data("bs.popover"),r="object"==typeof n&&n;o||i.data("bs.popover",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),+function(t){"use strict";function e(n,i){var o,r=t.proxy(this.process,this);this.$element=t(t(n).is("body")?window:n),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",r),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||(o=t(n).attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);var n=this;this.$body.find(this.selector).map(function(){var i=t(this),o=i.data("target")||i.attr("href"),r=/^#\w/.test(o)&&t(o);return r&&r.length&&[[r[e]().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){
var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=r.last()[0])&&this.activate(t);for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(!o[t+1]||e<=o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parents(".active").removeClass("active");var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.attr("data-target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a")[0],r=t.Event("show.bs.tab",{relatedTarget:o});if(e.trigger(r),!r.isDefaultPrevented()){var s=t(i);this.activate(e.parent("li"),n),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:o})})}}},e.prototype.activate=function(e,n,i){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),s=i&&t.support.transition&&r.hasClass("fade");s?r.one(t.support.transition.end,o).emulateTransitionEnd(150):o(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new e(this)),"string"==typeof n&&o[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=this.unpin=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=t(document).height(),i=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,s=r.top,a=r.bottom;"object"!=typeof r&&(a=s=r),"function"==typeof s&&(s=r.top()),"function"==typeof a&&(a=r.bottom());var l=null!=this.unpin&&i+this.unpin<=o.top?!1:null!=a&&o.top+this.$element.height()>=n-a?"bottom":null!=s&&s>=i?"top":!1;this.affixed!==l&&(this.unpin&&this.$element.css("top",""),this.affixed=l,this.unpin="bottom"==l?o.top-i:null,this.$element.removeClass(e.RESET).addClass("affix"+(l?"-"+l:"")),"bottom"==l&&this.$element.offset({top:document.body.offsetHeight-a-this.$element.height()}))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),o=i.data("bs.affix"),r="object"==typeof n&&n;o||i.data("bs.affix",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),!function(t){var e=function(t,e){this.init(t,e)};e.prototype={constructor:e,init:function(e,n){var i=this.$element=t(e);this.options=t.extend({},t.fn.checkbox.defaults,n),i.before(this.options.template),this.setState()},setState:function(){var t=this.$element,e=t.closest(".checkbox");t.prop("disabled")&&e.addClass("disabled"),t.prop("checked")&&e.addClass("checked")},toggle:function(){var e="checked",n=this.$element,i=n.closest(".checkbox"),o=n.prop(e),r=t.Event("toggle");0==n.prop("disabled")&&(i.toggleClass(e)&&o?n.removeAttr(e):n.prop(e,e),n.trigger(r).trigger("change"))},setCheck:function(e){var n="checked",i=this.$element,o=i.closest(".checkbox"),r="check"==e?!0:!1,s=t.Event(e);o[r?"addClass":"removeClass"](n)&&r?i.prop(n,n):i.removeAttr(n),i.trigger(s).trigger("change")}};var n=t.fn.checkbox;t.fn.checkbox=function(n){return this.each(function(){var i=t(this),o=i.data("checkbox"),r=t.extend({},t.fn.checkbox.defaults,i.data(),"object"==typeof n&&n);o||i.data("checkbox",o=new e(this,r)),"toggle"==n&&o.toggle(),"check"==n||"uncheck"==n?o.setCheck(n):n&&o.setState()})},t.fn.checkbox.defaults={},t.fn.checkbox.noConflict=function(){return t.fn.checkbox=n,this},t(document).on("click.checkbox.data-api","[data-toggle^=checkbox], .checkbox",function(e){var n=t(e.target);"A"!=e.target.tagName&&(e&&e.preventDefault()&&e.stopPropagation(),n.hasClass("checkbox")||(n=n.closest(".checkbox")),n.find(":checkbox").checkbox("toggle"))}),t(function(){t('[data-toggle="checkbox"]').each(function(){var e=t(this);e.checkbox()})})}(window.jQuery),define("checkbox",["bootstrap"],function(){});var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),function(t){function e(){return t("<div/>")}var n=Math.abs,i=Math.max,o=Math.min,r=Math.round;t.imgAreaSelect=function(s,a){function l(t){return t+mt.left-vt.left}function c(t){return t+mt.top-vt.top}function u(t){return t-mt.left+vt.left}function h(t){return t-mt.top+vt.top}function d(t){return t.pageX-vt.left}function p(t){return t.pageY-vt.top}function f(t){var e=t||j,n=t||V;return{x1:r(_t.x1*e),y1:r(_t.y1*n),x2:r(_t.x2*e),y2:r(_t.y2*n),width:r(_t.x2*e)-r(_t.x1*e),height:r(_t.y2*n)-r(_t.y1*n)}}function g(t,e,n,i,o){var s=o||j,a=o||V;_t={x1:r(t/s||0),y1:r(e/a||0),x2:r(n/s||0),y2:r(i/a||0)},_t.width=_t.x2-_t.x1,_t.height=_t.y2-_t.y1}function m(){F&&ut.width()&&(mt={left:r(ut.offset().left),top:r(ut.offset().top)},H=ut.innerWidth(),$=ut.innerHeight(),mt.top+=ut.outerHeight()-$>>1,mt.left+=ut.outerWidth()-H>>1,U=r(a.minWidth/j)||0,G=r(a.minHeight/V)||0,Y=r(o(a.maxWidth/j||1<<24,H)),X=r(o(a.maxHeight/V||1<<24,$)),"1.3.2"!=t().jquery||"fixed"!=bt||wt.getBoundingClientRect||(mt.top+=i(document.body.scrollTop,wt.scrollTop),mt.left+=i(document.body.scrollLeft,wt.scrollLeft)),vt=/absolute|relative/.test(K.css("position"))?{left:r(K.offset().left)-K.scrollLeft(),top:r(K.offset().top)-K.scrollTop()}:"fixed"==bt?{left:t(document).scrollLeft(),top:t(document).scrollTop()}:{left:0,top:0},z=l(0),L=c(0),(_t.x2>H||_t.y2>$)&&k())}function v(e){if(J){switch(ht.css({left:l(_t.x1),top:c(_t.y1)}).add(dt).width(at=_t.width).height(lt=_t.height),dt.add(pt).add(gt).css({left:0,top:0}),pt.width(i(at-pt.outerWidth()+pt.innerWidth(),0)).height(i(lt-pt.outerHeight()+pt.innerHeight(),0)),t(ft[0]).css({left:z,top:L,width:_t.x1,height:$}),t(ft[1]).css({left:z+_t.x1,top:L,width:at,height:_t.y1}),t(ft[2]).css({left:z+_t.x2,top:L,width:H-_t.x2,height:$}),t(ft[3]).css({left:z+_t.x1,top:L+_t.y2,width:at,height:$-_t.y2}),at-=gt.outerWidth(),lt-=gt.outerHeight(),gt.length){case 8:t(gt[4]).css({left:at>>1}),t(gt[5]).css({left:at,top:lt>>1}),t(gt[6]).css({left:at>>1,top:lt}),t(gt[7]).css({top:lt>>1});case 4:gt.slice(1,3).css({left:at}),gt.slice(2,4).css({top:lt})}e!==!1&&(t.imgAreaSelect.onKeyPress!=Ct&&t(document).unbind(t.imgAreaSelect.keyPress,t.imgAreaSelect.onKeyPress),a.keys&&t(document)[t.imgAreaSelect.keyPress](t.imgAreaSelect.onKeyPress=Ct)),kt&&pt.outerWidth()-pt.innerWidth()==2&&(pt.css("margin",0),setTimeout(function(){pt.css("margin","auto")},0))}}function y(t){m(),v(t),Z=l(_t.x1),tt=c(_t.y1),et=l(_t.x2),nt=c(_t.y2)}function b(t,e){a.fadeSpeed?t.fadeOut(a.fadeSpeed,e):t.hide()}function _(t){var e=u(d(t))-_t.x1,n=h(p(t))-_t.y1;ct||(m(),ct=!0,ht.one("mouseout",function(){ct=!1})),W="",a.resizable&&(n<=a.resizeMargin?W="n":n>=_t.height-a.resizeMargin&&(W="s"),e<=a.resizeMargin?W+="w":e>=_t.width-a.resizeMargin&&(W+="e")),ht.css("cursor",W?W+"-resize":a.movable?"move":""),N&&N.toggle()}function w(e){t("body").css("cursor",""),(a.autoHide||_t.width*_t.height==0)&&b(ht.add(ft),function(){t(this).hide()}),t(document).unbind("mousemove",S),ht.mousemove(_),a.onSelectEnd(s,f())}function x(e){return 1!=e.which?!1:(m(),W?(t("body").css("cursor",W+"-resize"),Z=l(_t[/w/.test(W)?"x2":"x1"]),tt=c(_t[/n/.test(W)?"y2":"y1"]),t(document).mousemove(S).one("mouseup",w),ht.unbind("mousemove",_)):a.movable?(B=z+_t.x1-d(e),q=L+_t.y1-p(e),ht.unbind("mousemove",_),t(document).mousemove(E).one("mouseup",function(){a.onSelectEnd(s,f()),t(document).unbind("mousemove",E),ht.mousemove(_)})):ut.mousedown(e),!1)}function C(t){Q&&(t?(et=i(z,o(z+H,Z+n(nt-tt)*Q*(et>Z||-1))),nt=r(i(L,o(L+$,tt+n(et-Z)/Q*(nt>tt||-1)))),et=r(et)):(nt=i(L,o(L+$,tt+n(et-Z)/Q*(nt>tt||-1))),et=r(i(z,o(z+H,Z+n(nt-tt)*Q*(et>Z||-1)))),nt=r(nt)))}function k(){Z=o(Z,z+H),tt=o(tt,L+$),n(et-Z)<U&&(et=Z-U*(Z>et||-1),z>et?Z=z+U:et>z+H&&(Z=z+H-U)),n(nt-tt)<G&&(nt=tt-G*(tt>nt||-1),L>nt?tt=L+G:nt>L+$&&(tt=L+$-G)),et=i(z,o(et,z+H)),nt=i(L,o(nt,L+$)),C(n(et-Z)<n(nt-tt)*Q),n(et-Z)>Y&&(et=Z-Y*(Z>et||-1),C()),n(nt-tt)>X&&(nt=tt-X*(tt>nt||-1),C(!0)),_t={x1:u(o(Z,et)),x2:u(i(Z,et)),y1:h(o(tt,nt)),y2:h(i(tt,nt)),width:n(et-Z),height:n(nt-tt)},v(),a.onSelectChange(s,f())}function S(t){return et=/w|e|^$/.test(W)||Q?d(t):l(_t.x2),nt=/n|s|^$/.test(W)||Q?p(t):c(_t.y2),k(),!1}function T(e,n){et=(Z=e)+_t.width,nt=(tt=n)+_t.height,t.extend(_t,{x1:u(Z),y1:h(tt),x2:u(et),y2:h(nt)}),v(),a.onSelectChange(s,f())}function E(t){return Z=i(z,o(B+d(t),z+H-_t.width)),tt=i(L,o(q+p(t),L+$-_t.height)),T(Z,tt),t.preventDefault(),!1}function M(){t(document).unbind("mousemove",M),m(),et=Z,nt=tt,k(),W="",ft.is(":visible")||ht.add(ft).hide().fadeIn(a.fadeSpeed||0),J=!0,t(document).unbind("mouseup",D).mousemove(S).one("mouseup",w),ht.unbind("mousemove",_),a.onSelectStart(s,f())}function D(){t(document).unbind("mousemove",M).unbind("mouseup",D),b(ht.add(ft)),g(u(Z),h(tt),u(Z),h(tt)),this instanceof t.imgAreaSelect||(a.onSelectChange(s,f()),a.onSelectEnd(s,f()))}function P(e){return 1!=e.which||ft.is(":animated")?!1:(m(),B=Z=d(e),q=tt=p(e),t(document).mousemove(M).mouseup(D),!1)}function A(){y(!1)}function I(){F=!0,O(a=t.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},a)),ht.add(ft).css({visibility:""}),a.show&&(J=!0,m(),v(),ht.add(ft).hide().fadeIn(a.fadeSpeed||0)),setTimeout(function(){a.onInit(s,f())},0)}function R(t,e){for(var n in e)void 0!==a[n]&&t.css(e[n],a[n])}function O(n){if(n.parent&&(K=t(n.parent)).append(ht.add(ft)),t.extend(a,n),m(),null!=n.handles){for(gt.remove(),gt=t([]),rt=n.handles?"corners"==n.handles?4:8:0;rt--;)gt=gt.add(e());gt.addClass(a.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:yt+1||1}),!parseInt(gt.css("width"))>=0&&gt.width(5).height(5),(st=a.borderWidth)&&gt.css({borderWidth:st,borderStyle:"solid"}),R(gt,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}for(j=a.imageWidth/H||1,V=a.imageHeight/$||1,null!=n.x1&&(g(n.x1,n.y1,n.x2,n.y2),n.show=!n.hide),n.keys&&(a.keys=t.extend({shift:1,ctrl:"resize"},n.keys)),ft.addClass(a.classPrefix+"-outer"),dt.addClass(a.classPrefix+"-selection"),rt=0;rt++<4;)t(pt[rt-1]).addClass(a.classPrefix+"-border"+rt);R(dt,{selectionColor:"background-color",selectionOpacity:"opacity"}),R(pt,{borderOpacity:"opacity",borderWidth:"border-width"}),R(ft,{outerColor:"background-color",outerOpacity:"opacity"}),(st=a.borderColor1)&&t(pt[0]).css({borderStyle:"solid",borderColor:st}),(st=a.borderColor2)&&t(pt[1]).css({borderStyle:"dashed",borderColor:st}),ht.append(dt.add(pt).add(N)).append(gt),kt&&((st=(ft.css("filter")||"").match(/opacity=(\d+)/))&&ft.css("opacity",st[1]/100),(st=(pt.css("filter")||"").match(/opacity=(\d+)/))&&pt.css("opacity",st[1]/100)),n.hide?b(ht.add(ft)):n.show&&F&&(J=!0,ht.add(ft).fadeIn(a.fadeSpeed||0),y()),Q=(ot=(a.aspectRatio||"").split(/:/))[0]/ot[1],ut.add(ft).unbind("mousedown",P),a.disable||a.enable===!1?(ht.unbind("mousemove",_).unbind("mousedown",x),t(window).unbind("resize",A)):((a.enable||a.disable===!1)&&((a.resizable||a.movable)&&ht.mousemove(_).mousedown(x),t(window).resize(A)),a.persistent||ut.add(ft).mousedown(P)),a.enable=a.disable=void 0}var F,N,z,L,H,$,K,B,q,j,V,W,U,G,Y,X,Q,J,Z,tt,et,nt,it,ot,rt,st,at,lt,ct,ut=t(s),ht=e(),dt=e(),pt=e().add(e()).add(e()).add(e()),ft=e().add(e()).add(e()).add(e()),gt=t([]),mt={left:0,top:0},vt={left:0,top:0},yt=0,bt="absolute",_t={x1:0,y1:0,x2:0,y2:0,width:0,height:0},wt=document.documentElement,xt=navigator.userAgent,Ct=function(t){var e,n,r=a.keys,s=t.keyCode;if(e=isNaN(r.alt)||!t.altKey&&!t.originalEvent.altKey?!isNaN(r.ctrl)&&t.ctrlKey?r.ctrl:!isNaN(r.shift)&&t.shiftKey?r.shift:isNaN(r.arrows)?10:r.arrows:r.alt,"resize"==r.arrows||"resize"==r.shift&&t.shiftKey||"resize"==r.ctrl&&t.ctrlKey||"resize"==r.alt&&(t.altKey||t.originalEvent.altKey)){switch(s){case 37:e=-e;case 39:n=i(Z,et),Z=o(Z,et),et=i(n+e,Z),C();break;case 38:e=-e;case 40:n=i(tt,nt),tt=o(tt,nt),nt=i(n+e,tt),C(!0);break;default:return}k()}else switch(Z=o(Z,et),tt=o(tt,nt),s){case 37:T(i(Z-e,z),tt);break;case 38:T(Z,i(tt-e,L));break;case 39:T(Z+o(e,H-u(et)),tt);break;case 40:T(Z,tt+o(e,$-h(nt)));break;default:return}return!1};this.remove=function(){O({disable:!0}),ht.add(ft).remove()},this.getOptions=function(){return a},this.setOptions=O,this.getSelection=f,this.setSelection=g,this.cancelSelection=D,this.update=y;var kt=(/msie ([\w.]+)/i.exec(xt)||[])[1],St=/opera/i.test(xt),Tt=/webkit/i.test(xt)&&!/chrome/i.test(xt);for(it=ut;it.length;)yt=i(yt,isNaN(it.css("z-index"))?yt:it.css("z-index")),"fixed"==it.css("position")&&(bt="fixed"),it=it.parent(":not(body)");yt=a.zIndex||yt,kt&&ut.attr("unselectable","on"),t.imgAreaSelect.keyPress=kt||Tt?"keydown":"keypress",St&&(N=e().css({width:"100%",height:"100%",position:"absolute",zIndex:yt+2||2})),ht.add(ft).css({visibility:"hidden",position:bt,overflow:"hidden",zIndex:yt||"0"}),ht.css({zIndex:yt+2||2}),dt.add(pt).css({position:"absolute",fontSize:0}),s.complete||"complete"==s.readyState||!ut.is("img")?I():ut.one("load",I),!F&&kt&&kt>=7&&(s.src=s.src)},t.fn.imgAreaSelect=function(e){return e=e||{},this.each(function(){t(this).data("imgAreaSelect")?e.remove?(t(this).data("imgAreaSelect").remove(),t(this).removeData("imgAreaSelect")):t(this).data("imgAreaSelect").setOptions(e):e.remove||(void 0===e.enable&&void 0===e.disable&&(e.enable=!0),t(this).data("imgAreaSelect",new t.imgAreaSelect(this,e)))}),e.instance?t(this).data("imgAreaSelect"):this}}(jQuery),define("imageareaselect",function(){}),function(t){var e=window.imageEdit={iasapi:{},hold:{},postid:"",_view:!1,intval:function(t){return 0|t},setDisabled:function(e,n){n?(e.removeClass("disabled"),t("input",e).removeAttr("disabled")):(e.addClass("disabled"),t("input",e).prop("disabled",!0))},init:function(e){var n=this,i=t("#image-editor-"+n.postid),o=n.intval(t("#imgedit-x-"+e).val()),r=n.intval(t("#imgedit-y-"+e).val());n.postid!==e&&i.length&&n.close(n.postid),n.hold.w=n.hold.ow=o,n.hold.h=n.hold.oh=r,n.hold.xy_ratio=o/r,n.hold.sizer=parseFloat(t("#imgedit-sizer-"+e).val()),n.postid=e,t("#imgedit-response-"+e).empty(),t('input[type="text"]',"#imgedit-panel-"+e).keypress(function(e){var n=e.keyCode;return n>36&&41>n&&t(this).blur(),13===n?(e.preventDefault(),e.stopPropagation(),!1):void 0})},toggleEditor:function(e,n){var i=t("#imgedit-wait-"+e);n?i.height(t("#imgedit-panel-"+e).height()).fadeIn("fast"):i.fadeOut("fast")},toggleHelp:function(e){return t(e).parents(".imgedit-group-top").toggleClass("imgedit-help-toggled").find(".imgedit-help").slideToggle("fast"),!1},getTarget:function(e){return t('input[name="imgedit-target-'+e+'"]:checked',"#imgedit-save-target-"+e).val()||"full"},scaleChanged:function(e,n){var i=t("#imgedit-scale-width-"+e),o=t("#imgedit-scale-height-"+e),r=t("#imgedit-scale-warn-"+e),s="",a="";n?(a=""!==i.val()?Math.round(i.val()/this.hold.xy_ratio):"",o.val(a)):(s=""!==o.val()?Math.round(o.val()*this.hold.xy_ratio):"",i.val(s)),a&&a>this.hold.oh||s&&s>this.hold.ow?r.css("visibility","visible"):r.css("visibility","hidden")},getSelRatio:function(e){var n=this.hold.w,i=this.hold.h,o=this.intval(t("#imgedit-crop-width-"+e).val()),r=this.intval(t("#imgedit-crop-height-"+e).val());return o&&r?o+":"+r:n&&i?n+":"+i:"1:1"},filterHistory:function(e,n){var i,o,r,s,a=t("#imgedit-history-"+e).val(),l=[];if(""!==a){if(a=JSON.parse(a),i=this.intval(t("#imgedit-undone-"+e).val()),i>0)for(;i>0;)a.pop(),i--;if(n){if(!a.length)return this.hold.w=this.hold.ow,this.hold.h=this.hold.oh,"";r=a[a.length-1],r=r.c||r.r||r.f||!1,r&&(this.hold.w=r.fw,this.hold.h=r.fh)}for(o in a)s=a[o],s.hasOwnProperty("c")?l[o]={c:{x:s.c.x,y:s.c.y,w:s.c.w,h:s.c.h}}:s.hasOwnProperty("r")?l[o]={r:s.r.r}:s.hasOwnProperty("f")&&(l[o]={f:s.f.f});return JSON.stringify(l)}return""},refreshEditor:function(n,i,o){var r,s,a=this;a.toggleEditor(n,1),r={action:"imgedit-preview",_ajax_nonce:i,postid:n,history:a.filterHistory(n,1),rand:a.intval(1e6*Math.random())},s=t('<img id="image-preview-'+n+'" />').on("load",function(){var i,r,a=t("#imgedit-crop-"+n),l=e;a.empty().append(s),i=Math.max(l.hold.w,l.hold.h),r=Math.max(t(s).width(),t(s).height()),l.hold.sizer=i>r?r/i:1,l.initCrop(n,s,a),l.setCropSelection(n,0),"undefined"!=typeof o&&null!==o&&o(),t("#imgedit-history-"+n).val()&&"0"===t("#imgedit-undone-"+n).val()?t("input.imgedit-submit-btn","#imgedit-panel-"+n).removeAttr("disabled"):t("input.imgedit-submit-btn","#imgedit-panel-"+n).prop("disabled",!0),l.toggleEditor(n,0)}).on("error",function(){t("#imgedit-crop-"+n).empty().append('<div class="error"><p>'+imageEditL10n.error+"</p></div>"),a.toggleEditor(n,0)}).attr("src",ajaxurl+"?"+t.param(r))},action:function(e,n,i){var o,r,s,a,l,c=this;if(c.notsaved(e))return!1;if(o={action:"image-editor",_ajax_nonce:n,postid:e},"scale"===i){if(r=t("#imgedit-scale-width-"+e),s=t("#imgedit-scale-height-"+e),a=c.intval(r.val()),l=c.intval(s.val()),1>a)return r.focus(),!1;if(1>l)return s.focus(),!1;if(a===c.hold.ow||l===c.hold.oh)return!1;o["do"]="scale",o.fwidth=a,o.fheight=l}else{if("restore"!==i)return!1;o["do"]="restore"}c.toggleEditor(e,1),t.post(ajaxurl,o,function(n){t("#image-editor-"+e).empty().append(n),c.toggleEditor(e,0),c._view&&c._view.refresh()})},save:function(n,i){var o,r=this.getTarget(n),s=this.filterHistory(n,0),a=this;return""===s?!1:(this.toggleEditor(n,1),o={action:"image-editor",_ajax_nonce:i,postid:n,history:s,target:r,context:t("#image-edit-context").length?t("#image-edit-context").val():null,"do":"save"},void t.post(ajaxurl,o,function(i){var o=JSON.parse(i);return o.error?(t("#imgedit-response-"+n).html('<div class="error"><p>'+o.error+"</p></div>"),void e.close(n)):(o.fw&&o.fh&&t("#media-dims-"+n).html(o.fw+" &times; "+o.fh),o.thumbnail&&t(".thumbnail","#thumbnail-head-"+n).attr("src",""+o.thumbnail),o.msg&&t("#imgedit-response-"+n).html('<div class="updated"><p>'+o.msg+"</p></div>"),void(a._view?a._view.save():e.close(n)))}))},open:function(e,n,i){this._view=i;var o,r,s=t("#image-editor-"+e),a=t("#media-head-"+e),l=t("#imgedit-open-btn-"+e),c=l.siblings(".spinner");return l.prop("disabled",!0),c.addClass("is-active"),r={action:"image-editor",_ajax_nonce:n,postid:e,"do":"open"},o=t.ajax({url:ajaxurl,type:"post",data:r}).done(function(t){s.html(t),a.fadeOut("fast",function(){s.fadeIn("fast"),l.removeAttr("disabled"),c.removeClass("is-active")})})},imgLoaded:function(e){var n=t("#image-preview-"+e),i=t("#imgedit-crop-"+e);this.initCrop(e,n,i),this.setCropSelection(e,0),this.toggleEditor(e,0)},initCrop:function(n,i,o){var r,s=this,a=t("#imgedit-sel-width-"+n),l=t("#imgedit-sel-height-"+n);s.iasapi=t(i).imgAreaSelect({parent:o,instance:!0,handles:!0,keys:!0,minWidth:3,minHeight:3,onInit:function(e){r=t(e),r.next().css("position","absolute").nextAll(".imgareaselect-outer").css("position","absolute"),o.children().mousedown(function(t){var e,i,o=!1;t.shiftKey&&(e=s.iasapi.getSelection(),i=s.getSelRatio(n),o=e&&e.width&&e.height?e.width+":"+e.height:i),s.iasapi.setOptions({aspectRatio:o})})},onSelectStart:function(){e.setDisabled(t("#imgedit-crop-sel-"+n),1)},onSelectEnd:function(t,i){e.setCropSelection(n,i)},onSelectChange:function(t,n){var i=e.hold.sizer;a.val(e.round(n.width/i)),l.val(e.round(n.height/i))}})},setCropSelection:function(e,n){var i;return n=n||0,!n||n.width<3&&n.height<3?(this.setDisabled(t(".imgedit-crop","#imgedit-panel-"+e),0),this.setDisabled(t("#imgedit-crop-sel-"+e),0),t("#imgedit-sel-width-"+e).val(""),t("#imgedit-sel-height-"+e).val(""),t("#imgedit-selection-"+e).val(""),!1):(i={x:n.x1,y:n.y1,w:n.width,h:n.height},this.setDisabled(t(".imgedit-crop","#imgedit-panel-"+e),1),void t("#imgedit-selection-"+e).val(JSON.stringify(i)))},close:function(e,n){return n=n||!1,n&&this.notsaved(e)?!1:(this.iasapi={},this.hold={},void(this._view?this._view.back():t("#image-editor-"+e).fadeOut("fast",function(){t("#media-head-"+e).fadeIn("fast"),t(this).empty()})))},notsaved:function(e){var n=t("#imgedit-history-"+e).val(),i=""!==n?JSON.parse(n):[],o=this.intval(t("#imgedit-undone-"+e).val());return o<i.length?confirm(t("#imgedit-leaving-"+e).html())?!1:!0:!1},addStep:function(e,n,i){for(var o=this,r=t("#imgedit-history-"+n),s=""!==r.val()?JSON.parse(r.val()):[],a=t("#imgedit-undone-"+n),l=o.intval(a.val());l>0;)s.pop(),l--;a.val(0),s.push(e),r.val(JSON.stringify(s)),o.refreshEditor(n,i,function(){o.setDisabled(t("#image-undo-"+n),!0),o.setDisabled(t("#image-redo-"+n),!1)})},rotate:function(e,n,i,o){return t(o).hasClass("disabled")?!1:void this.addStep({r:{r:e,fw:this.hold.h,fh:this.hold.w}},n,i)},flip:function(e,n,i,o){return t(o).hasClass("disabled")?!1:void this.addStep({f:{f:e,fw:this.hold.w,fh:this.hold.h}},n,i)},crop:function(e,n,i){var o=t("#imgedit-selection-"+e).val(),r=this.intval(t("#imgedit-sel-width-"+e).val()),s=this.intval(t("#imgedit-sel-height-"+e).val());return t(i).hasClass("disabled")||""===o?!1:(o=JSON.parse(o),void(o.w>0&&o.h>0&&r>0&&s>0&&(o.fw=r,o.fh=s,this.addStep({c:o},e,n))))},undo:function(e,n){var i=this,o=t("#image-undo-"+e),r=t("#imgedit-undone-"+e),s=i.intval(r.val())+1;o.hasClass("disabled")||(r.val(s),i.refreshEditor(e,n,function(){var n=t("#imgedit-history-"+e),r=""!==n.val()?JSON.parse(n.val()):[];i.setDisabled(t("#image-redo-"+e),!0),i.setDisabled(o,s<r.length)}))},redo:function(e,n){var i=this,o=t("#image-redo-"+e),r=t("#imgedit-undone-"+e),s=i.intval(r.val())-1;o.hasClass("disabled")||(r.val(s),i.refreshEditor(e,n,function(){i.setDisabled(t("#image-undo-"+e),!0),i.setDisabled(o,s>0)}))},setNumSelection:function(e){var n,i,o,r,s,a=t("#imgedit-sel-width-"+e),l=t("#imgedit-sel-height-"+e),c=this.intval(a.val()),u=this.intval(l.val()),h=t("#image-preview-"+e),d=h.height(),p=h.width(),f=this.hold.sizer,g=this.iasapi;return 1>c?(a.val(""),!1):1>u?(l.val(""),!1):void(c&&u&&(n=g.getSelection())&&(r=n.x1+Math.round(c*f),s=n.y1+Math.round(u*f),i=n.x1,o=n.y1,r>p&&(i=0,r=p,a.val(Math.round(r/f))),s>d&&(o=0,s=d,l.val(Math.round(s/f))),g.setSelection(i,o,r,s),g.update(),this.setCropSelection(e,g.getSelection())))},round:function(t){var e;return t=Math.round(t),this.hold.sizer>.6?t:(e=t.toString().slice(-1),"1"===e?t-1:"9"===e?t+1:t)},setRatioSelection:function(e,n,i){var o,r,s=this.intval(t("#imgedit-crop-width-"+e).val()),a=this.intval(t("#imgedit-crop-height-"+e).val()),l=t("#image-preview-"+e).height();return this.intval(t(i).val())?void(s&&a&&(this.iasapi.setOptions({aspectRatio:s+":"+a}),(o=this.iasapi.getSelection(!0))&&(r=Math.ceil(o.y1+(o.x2-o.x1)/(s/a)),r>l&&(r=l,n?t("#imgedit-crop-height-"+e).val(""):t("#imgedit-crop-width-"+e).val("")),this.iasapi.setSelection(o.x1,o.y1,o.x2,r),this.iasapi.update()))):void t(i).val("")}}}(jQuery),define("imageedit",function(){}),window.wp=window.wp||{},wp.svgPainter=function(t,e,n,i){"use strict";var o,r,s,a={},l=[];return t(n).ready(function(){n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")&&(t(n.body).removeClass("no-svg").addClass("svg"),wp.svgPainter.init())}),r=function(){function t(){for(;256>c;)o=String.fromCharCode(c),s+=o,l[c]=c,a[c]=r.indexOf(o),++c}function e(t,e,n,i,r,s){var a,l,c=0,u=0,h="",d=0;for(t=String(t),l=t.length;l>u;){for(o=t.charCodeAt(u),o=256>o?n[o]:-1,c=(c<<r)+o,d+=r;d>=s;)d-=s,a=c>>d,h+=i.charAt(a),c^=a<<d;++u}return!e&&d>0&&(h+=i.charAt(c<<s-d)),h}function n(n){return o||t(),n=e(n,!1,l,r,8,6),n+"====".slice(n.length%4||4)}function i(n){var i;o||t(),n=n.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=String(n).split("="),i=n.length;do--i,n[i]=e(n[i],!0,a,s,6,8);while(i>0);return n=n.join("")}var o,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",a=[256],l=[256],c=0;return{atob:i,btoa:n}}(),{init:function(){s=this,o=t("#adminmenu .wp-menu-image, #wpadminbar .ab-item"),this.setColors(),this.findElements(),this.paint()},setColors:function(t){"undefined"==typeof t&&"undefined"!=typeof e._wpColorScheme&&(t=e._wpColorScheme),t&&t.icons&&t.icons.base&&t.icons.current&&t.icons.focus&&(a=t.icons)},findElements:function(){o.each(function(){var e=t(this),n=e.css("background-image");n&&-1!=n.indexOf("data:image/svg+xml;base64")&&l.push(e)})},paint:function(){t.each(l,function(t,n){var i=n.parent().parent();i.hasClass("current")||i.hasClass("wp-has-current-submenu")?s.paintElement(n,"current"):(s.paintElement(n,"base"),i.hover(function(){s.paintElement(n,"focus")},function(){e.setTimeout(function(){s.paintElement(n,"base")},100)}))})},paintElement:function(t,n){var i,o,s;if(n&&a.hasOwnProperty(n)&&(s=a[n],s.match(/^(#[0-9a-f]{3}|#[0-9a-f]{6})$/i)&&(i=t.data("wp-ui-svg-"+s),"none"!==i))){if(!i){if(o=t.css("background-image").match(/.+data:image\/svg\+xml;base64,([A-Za-z0-9\+\/\=]+)/),!o||!o[1])return void t.data("wp-ui-svg-"+s,"none");try{i="atob"in e?e.atob(o[1]):r.atob(o[1])}catch(l){}if(!i)return void t.data("wp-ui-svg-"+s,"none");i=i.replace(/fill="(.+?)"/g,'fill="'+s+'"'),i=i.replace(/style="(.+?)"/g,'style="fill:'+s+'"'),i=i.replace(/fill:.*?;/g,"fill: "+s+";"),i="btoa"in e?e.btoa(i):r.btoa(i),t.data("wp-ui-svg-"+s,i)}t.attr("style",'background-image: url("data:image/svg+xml;base64,'+i+'") !important;')}}}}(jQuery,window,document),define("svgpainter",function(){}),!function(t){var e=function(e,n){this.element=t(e),this.picker=t('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||n.id,this.id&&(this.picker[0].id=this.id),"undefined"!=typeof Modernizr&&Modernizr.touch&&(this.touchCapable=!0);var i=this.element.data("slider-tooltip")||n.tooltip;switch(this.tooltip=this.picker.find(".tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.orientation=this.element.data("slider-orientation")||n.orientation,this.orientation){case"vertical":this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth()),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px"}this.min=this.element.data("slider-min")||n.min,this.max=this.element.data("slider-max")||n.max,this.step=this.element.data("slider-step")||n.step,this.value=this.element.data("slider-value")||n.value,this.value[1]&&(this.range=!0),this.selection=this.element.data("slider-selection")||n.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style;var o=this.element.data("slider-handle")||n.handle;switch(o){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),
this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=n.formater,this.layout(),this.touchCapable?this.picker.on({touchstart:t.proxy(this.mousedown,this)}):this.picker.on({mousedown:t.proxy(this.mousedown,this)}),"show"===i?this.picker.on({mouseenter:t.proxy(this.showTooltip,this),mouseleave:t.proxy(this.hideTooltip,this)}):this.tooltip.addClass("hide")};e.prototype={constructor:e,over:!1,inDrag:!1,showTooltip:function(){this.tooltip.addClass("in"),this.over=!0},hideTooltip:function(){this.inDrag===!1&&this.tooltip.removeClass("in"),this.over=!1},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%",this.handle2Stype[this.stylePos]=this.percentage[1]+"%","vertical"==this.orientation?(this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"):(this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%"),this.range?(this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px")},mousedown:function(e){this.touchCapable&&"touchstart"===e.type&&(e=e.originalEvent),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var n=this.getPercentage(e);if(this.range){var i=Math.abs(this.percentage[0]-n),o=Math.abs(this.percentage[1]-n);this.dragged=o>i?0:1}else this.dragged=0;this.percentage[this.dragged]=n,this.layout(),this.touchCapable?t(document).on({touchmove:t.proxy(this.mousemove,this),touchend:t.proxy(this.mouseup,this)}):t(document).on({mousemove:t.proxy(this.mousemove,this),mouseup:t.proxy(this.mouseup,this)}),this.inDrag=!0;var r=this.calculateValue();return this.element.trigger({type:"slideStart",value:r}).trigger({type:"slide",value:r}),!1},mousemove:function(t){this.touchCapable&&"touchmove"===t.type&&(t=t.originalEvent);var e=this.getPercentage(t);this.range&&(0===this.dragged&&this.percentage[1]<e?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>e&&(this.percentage[1]=this.percentage[0],this.dragged=0)),this.percentage[this.dragged]=e,this.layout();var n=this.calculateValue();return this.element.trigger({type:"slide",value:n}).data("value",n).prop("value",n),!1},mouseup:function(e){this.touchCapable?t(document).off({touchmove:this.mousemove,touchend:this.mouseup}):t(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1,0==this.over&&this.hideTooltip(),this.element;var n=this.calculateValue();return this.element.trigger({type:"slideStop",value:n}).data("value",n).prop("value",n),!1},calculateValue:function(){var t;return this.range?(t=[this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step],this.value=t):(t=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.value=[t,this.value[1]]),t},getPercentage:function(t){this.touchCapable&&(t=t.touches[0]);var e=100*(t[this.mousePos]-this.offset[this.stylePos])/this.size;return e=Math.round(e/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,e))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(t){this.value=t,this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.layout()}},t.fn.slider=function(n,i){return this.each(function(){var o=t(this),r=o.data("slider"),s="object"==typeof n&&n;r||o.data("slider",r=new e(this,t.extend({},t.fn.slider.defaults,s))),"string"==typeof n&&r[n](i)})},t.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(t){return t}},t.fn.slider.Constructor=e}(window.jQuery),define("bootstrapslider",function(){}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("spin",e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),r=.01+n/i*100,s=Math.max(1-(1-t)/e*(100-r),t),a=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[o]||(p.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",p.cssRules.length),d[o]=1),o}function i(t,e){var n,i,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<h.length;i++)if(n=h[i]+e,void 0!==o[n])return n;return void 0!==o[e]?e:void 0}function o(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function s(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=r(t||{},l.defaults,f))}function c(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,i){function r(){return o(n("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function s(t,s,l){e(d,e(o(r(),{rotation:360/i.lines*t+"deg",left:~~s}),e(o(n("roundrect",{arcsize:i.corners}),{width:c,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:a(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,c=i.length+i.width,u=2*c,h=2*-(i.width+i.length)+"px",d=o(r(),{position:"absolute",top:h,left:h});if(i.shadow)for(l=1;l<=i.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)s(l);return e(t,d)},l.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&e+i<o.childNodes.length&&(o=o.childNodes[e+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var u,h=["webkit","Moz","ms","O"],d={},p=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},r(l.prototype,{spin:function(e){this.stop();var n,i,r=this,a=r.opts,l=r.el=o(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),c=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),i=s(e),n=s(l),o(l,{left:("auto"==a.left?i.x-n.x+(e.offsetWidth>>1):parseInt(a.left,10)+c)+"px",top:("auto"==a.top?i.y-n.y+(e.offsetHeight>>1):parseInt(a.top,10)+c)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!u){var h,d=0,p=(a.lines-1)*(1-a.direction)/2,f=a.fps,g=f/a.speed,m=(1-a.opacity)/(g*a.trail/100),v=g/a.lines;!function y(){d++;for(var t=0;t<a.lines;t++)h=Math.max(1-(d+(a.lines-t)*v)%g*m,a.opacity),r.opacity(l,t*a.direction+p,h,a);r.timeout=r.el&&setTimeout(y,~~(1e3/f))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,r){function s(e,n){return o(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*c+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var l,c=0,h=(r.lines-1)*(1-r.direction)/2;c<r.lines;c++)l=o(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:u&&n(r.opacity,r.trail,h+c*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(l,o(s("#000","0 0 4px #000"),{top:"2px"})),e(i,e(l,s(a(r.color,c),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var g=o(t("group"),{behavior:"url(#default#VML)"});return!i(g,"transform")&&g.adj?c():u=i(g,"animation"),l}),function(t){if("object"==typeof exports)t(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define("jqueryspin",["jquery","spin"],t);else{if(!window.Spinner)throw new Error("Spin.js not present");t(window.jQuery,window.Spinner)}}(function(t,e){t.fn.spin=function(n,i){return this.each(function(){var o=t(this),r=o.data();r.spinner&&(r.spinner.stop(),delete r.spinner),n!==!1&&(n=t.extend({color:i||o.css("color")},t.fn.spin.presets[n]||n),r.spinner=new e(n).spin(this))})},t.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),jQuery&&function(t){function e(e,n){var i=t('<div class="minicolors" />'),o=t.minicolors.defaults;e.data("minicolors-initialized")||(n=t.extend(!0,{},o,n),i.addClass("minicolors-theme-"+n.theme).toggleClass("minicolors-with-opacity",n.opacity),void 0!==n.position&&t.each(n.position.split(" "),function(){i.addClass("minicolors-position-"+this)}),e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",n).prop("size",7).wrap(i).after('<div class="minicolors-panel minicolors-slider-'+n.control+'"><div class="minicolors-slider"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider"><div class="minicolors-picker"></div></div><div class="minicolors-grid"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),n.inline||(e.after('<span class="minicolors-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-swatch").on("click",function(t){t.preventDefault(),e.focus()})),e.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),n.inline&&e.parent().addClass("minicolors-inline"),a(e,!1),e.data("minicolors-initialized",!0))}function n(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function i(t){var e=t.parent(),n=e.find(".minicolors-panel"),i=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(o(),e.addClass("minicolors-focus"),n.stop(!0,!0).fadeIn(i.showSpeed,function(){i.show&&i.show.call(t.get(0))}))}function o(){t(".minicolors-focus").each(function(){var e=t(this),n=e.find(".minicolors-input"),i=e.find(".minicolors-panel"),o=n.data("minicolors-settings");i.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(n.get(0)),e.removeClass("minicolors-focus")})})}function r(t,e,n){var i,o,r,a,l=t.parents(".minicolors").find(".minicolors-input"),c=l.data("minicolors-settings"),u=t.find("[class$=-picker]"),h=t.offset().left,d=t.offset().top,p=Math.round(e.pageX-h),f=Math.round(e.pageY-d),g=n?c.animationSpeed:0;e.originalEvent.changedTouches&&(p=e.originalEvent.changedTouches[0].pageX-h,f=e.originalEvent.changedTouches[0].pageY-d),0>p&&(p=0),0>f&&(f=0),p>t.width()&&(p=t.width()),f>t.height()&&(f=t.height()),t.parent().is(".minicolors-slider-wheel")&&u.parent().is(".minicolors-grid")&&(i=75-p,o=75-f,r=Math.sqrt(i*i+o*o),a=Math.atan2(o,i),0>a&&(a+=2*Math.PI),r>75&&(r=75,p=75-75*Math.cos(a),f=75-75*Math.sin(a)),p=Math.round(p),f=Math.round(f)),t.is(".minicolors-grid")?u.stop(!0).animate({top:f+"px",left:p+"px"},g,c.animationEasing,function(){s(l,t)}):u.stop(!0).animate({top:f+"px"},g,c.animationEasing,function(){s(l,t)})}function s(t,e){function n(t,e){var n,i;return t.length&&e?(n=t.offset().left,i=t.offset().top,{x:n-e.offset().left+t.outerWidth()/2,y:i-e.offset().top+t.outerHeight()/2}):null}var i,o,r,s,a,c,u,d=t.val(),f=t.attr("data-opacity"),g=t.parent(),v=t.data("minicolors-settings"),y=g.find(".minicolors-swatch"),b=g.find(".minicolors-grid"),_=g.find(".minicolors-slider"),w=g.find(".minicolors-opacity-slider"),x=b.find("[class$=-picker]"),C=_.find("[class$=-picker]"),k=w.find("[class$=-picker]"),S=n(x,b),T=n(C,_),E=n(k,w);if(e.is(".minicolors-grid, .minicolors-slider")){switch(v.control){case"wheel":s=b.width()/2-S.x,a=b.height()/2-S.y,c=Math.sqrt(s*s+a*a),u=Math.atan2(a,s),0>u&&(u+=2*Math.PI),c>75&&(c=75,S.x=69-75*Math.cos(u),S.y=69-75*Math.sin(u)),o=p(c/.75,0,100),i=p(180*u/Math.PI,0,360),r=p(100-Math.floor(T.y*(100/_.height())),0,100),d=m({h:i,s:o,b:r}),_.css("backgroundColor",m({h:i,s:o,b:100}));break;case"saturation":i=p(parseInt(S.x*(360/b.width()),10),0,360),o=p(100-Math.floor(T.y*(100/_.height())),0,100),r=p(100-Math.floor(S.y*(100/b.height())),0,100),d=m({h:i,s:o,b:r}),_.css("backgroundColor",m({h:i,s:100,b:r})),g.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":i=p(parseInt(S.x*(360/b.width()),10),0,360),o=p(100-Math.floor(S.y*(100/b.height())),0,100),r=p(100-Math.floor(T.y*(100/_.height())),0,100),d=m({h:i,s:o,b:r}),_.css("backgroundColor",m({h:i,s:o,b:100})),g.find(".minicolors-grid-inner").css("opacity",1-r/100);break;default:i=p(360-parseInt(T.y*(360/_.height()),10),0,360),o=p(Math.floor(S.x*(100/b.width())),0,100),r=p(100-Math.floor(S.y*(100/b.height())),0,100),d=m({h:i,s:o,b:r}),b.css("backgroundColor",m({h:i,s:100,b:100}))}t.val(h(d,v.letterCase))}e.is(".minicolors-opacity-slider")&&(f=v.opacity?parseFloat(1-E.y/w.height()).toFixed(2):1,v.opacity&&t.attr("data-opacity",f)),y.find("SPAN").css({backgroundColor:d,opacity:f}),l(t,d,f)}function a(t,e){var n,i,o,r,s,a,c,u=t.parent(),f=t.data("minicolors-settings"),g=u.find(".minicolors-swatch"),y=u.find(".minicolors-grid"),b=u.find(".minicolors-slider"),_=u.find(".minicolors-opacity-slider"),w=y.find("[class$=-picker]"),x=b.find("[class$=-picker]"),C=_.find("[class$=-picker]");switch(n=h(d(t.val(),!0),f.letterCase),n||(n=h(d(f.defaultValue,!0),f.letterCase)),i=v(n),e||t.val(n),f.opacity&&(o=""===t.attr("data-opacity")?1:p(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),t.attr("data-opacity",o),g.find("SPAN").css("opacity",o),s=p(_.height()-_.height()*o,0,_.height()),C.css("top",s+"px")),g.find("SPAN").css("backgroundColor",n),f.control){case"wheel":a=p(Math.ceil(.75*i.s),0,y.height()/2),c=i.h*Math.PI/180,r=p(75-Math.cos(c)*a,0,y.width()),s=p(75-Math.sin(c)*a,0,y.height()),w.css({top:s+"px",left:r+"px"}),s=150-i.b/(100/y.height()),""===n&&(s=0),x.css("top",s+"px"),b.css("backgroundColor",m({h:i.h,s:i.s,b:100}));break;case"saturation":r=p(5*i.h/12,0,150),s=p(y.height()-Math.ceil(i.b/(100/y.height())),0,y.height()),w.css({top:s+"px",left:r+"px"}),s=p(b.height()-i.s*(b.height()/100),0,b.height()),x.css("top",s+"px"),b.css("backgroundColor",m({h:i.h,s:100,b:i.b})),u.find(".minicolors-grid-inner").css("opacity",i.s/100);break;case"brightness":r=p(5*i.h/12,0,150),s=p(y.height()-Math.ceil(i.s/(100/y.height())),0,y.height()),w.css({top:s+"px",left:r+"px"}),s=p(b.height()-i.b*(b.height()/100),0,b.height()),x.css("top",s+"px"),b.css("backgroundColor",m({h:i.h,s:i.s,b:100})),u.find(".minicolors-grid-inner").css("opacity",1-i.b/100);break;default:r=p(Math.ceil(i.s/(100/y.width())),0,y.width()),s=p(y.height()-Math.ceil(i.b/(100/y.height())),0,y.height()),w.css({top:s+"px",left:r+"px"}),s=p(b.height()-i.h/(360/b.height()),0,b.height()),x.css("top",s+"px"),y.css("backgroundColor",m({h:i.h,s:100,b:100}))}t.data("minicolors-initialized")&&l(t,n,o)}function l(t,e,n){var i=t.data("minicolors-settings"),o=t.data("minicolors-lastChange");o&&o.hex===e&&o.opacity===n||(t.data("minicolors-lastChange",{hex:e,opacity:n}),i.change&&(i.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){i.change.call(t.get(0),e,n)},i.changeDelay))):i.change.call(t.get(0),e,n)),t.trigger("change").trigger("input"))}function c(e){var n=d(t(e).val(),!0),i=b(n),o=t(e).attr("data-opacity");return i?(void 0!==o&&t.extend(i,{a:parseFloat(o)}),i):null}function u(e,n){var i=d(t(e).val(),!0),o=b(i),r=t(e).attr("data-opacity");return o?(void 0===r&&(r=1),n?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(r)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null}function h(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function d(t,e){return t=t.replace(/[^A-F0-9]/gi,""),3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t)}function p(t,e,n){return e>t&&(t=e),t>n&&(t=n),t}function f(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===i)e.r=e.g=e.b=o;else{var r=o,s=(255-i)*o/255,a=(r-s)*(n%60)/60;360===n&&(n=0),60>n?(e.r=r,e.b=s,e.g=s+a):120>n?(e.g=r,e.b=s,e.r=r-a):180>n?(e.g=r,e.r=s,e.b=s+a):240>n?(e.b=r,e.r=s,e.g=r-a):300>n?(e.b=r,e.g=s,e.r=s+a):360>n?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function g(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(n,function(t,e){1===e.length&&(n[t]="0"+e)}),"#"+n.join("")}function m(t){return g(f(t))}function v(t){var e=y(b(t));return 0===e.s&&(e.h=360),e}function y(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),o=i-n;return e.b=i,e.s=0!==i?255*o/i:0,0!==e.s?t.r===i?e.h=(t.g-t.b)/o:t.g===i?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function b(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},t.extend(t.fn,{minicolors:function(r,s){switch(r){case"destroy":return t(this).each(function(){n(t(this))}),t(this);case"hide":return o(),t(this);case"opacity":return void 0===s?t(this).attr("data-opacity"):(t(this).each(function(){a(t(this).attr("data-opacity",s))}),t(this));case"rgbObject":return c(t(this),"rgbaObject"===r);case"rgbString":case"rgbaString":return u(t(this),"rgbaString"===r);case"settings":return void 0===s?t(this).data("minicolors-settings"):(t(this).each(function(){var e=t(this).data("minicolors-settings")||{};n(t(this)),t(this).minicolors(t.extend(!0,e,s))}),t(this));case"show":return i(t(this).eq(0)),t(this);case"value":return void 0===s?t(this).val():(t(this).each(function(){a(t(this).val(s))}),t(this));default:return"create"!==r&&(s=r),t(this).each(function(){e(t(this),s)}),t(this)}}}),t(document).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||o()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var n=t(this);e.preventDefault(),t(document).data("minicolors-target",n),r(n,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var n=t(document).data("minicolors-target");n&&r(n,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(e){var n=t(this).parent().find(".minicolors-input");e.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&i(e)}).on("blur.minicolors",".minicolors-input",function(){var e=t(this),n=e.data("minicolors-settings");e.data("minicolors-initialized")&&(e.val(d(e.val(),!0)),""===e.val()&&e.val(d(n.defaultValue,!0)),e.val(h(e.val(),n.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var n=t(this);if(n.data("minicolors-initialized"))switch(e.keyCode){case 9:o();break;case 13:case 27:o(),n.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&a(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){a(e,!0)},1)})}(jQuery),define("jquerycolor",["jquery"],function(){}),function(t){"use strict";var e={},n=Math.max,i=Math.min;e.c={},e.c.d=t(document),e.c.t=function(t){return t.originalEvent.touches.length-1},e.o=function(){var n=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var e=function(t,e){var i;for(i in e)n.o[i]=e[i];n._carve().init(),n._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=t.extend({min:void 0!==this.$.data("min")?this.$.data("min"):0,max:void 0!==this.$.data("max")?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(t){return t},parse:function(t){return parseFloat(t)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(e){var i=t(this);n.i[e]=i,n.v[e]=n.o.parse(i.val()),i.bind("change blur",function(){var t={};t[e]=i.val(),n.val(t)})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){n.val(n._validate(n.o.parse(n.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=t(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=t('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",e).parent().bind("configure",e),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var t=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),e=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(t,e)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var t=!0;n.g=n.c,n.clear(),n.dH&&(t=n.dH()),t!==!1&&n.draw()},this._touch=function(t){var i=function(t){var e=n.xy2val(t.originalEvent.touches[n.t].pageX,t.originalEvent.touches[n.t].pageY);e!=n.cv&&(n.cH&&n.cH(e)===!1||(n.change(n._validate(e)),n._draw()))};return this.t=e.c.t(t),i(t),e.c.d.bind("touchmove.k",i).bind("touchend.k",function(){e.c.d.unbind("touchmove.k touchend.k"),n.val(n.cv)}),this},this._mouse=function(t){var i=function(t){var e=n.xy2val(t.pageX,t.pageY);e!=n.cv&&(n.cH&&n.cH(e)===!1||(n.change(n._validate(e)),n._draw()))};return i(t),e.c.d.bind("mousemove.k",i).bind("keyup.k",function(t){if(27===t.keyCode){if(e.c.d.unbind("mouseup.k mousemove.k keyup.k"),n.eH&&n.eH()===!1)return;n.cancel()}}).bind("mouseup.k",function(t){e.c.d.unbind("mousemove.k mouseup.k keyup.k"),n.val(n.cv)}),this},this._xy=function(){var t=this.$c.offset();return this.x=t.left,this.y=t.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(t){t.preventDefault(),n._xy()._mouse(t)}).bind("touchstart",function(t){t.preventDefault(),n._xy()._touch(t)}),this.listen()),this.relative&&t(window).resize(function(){n._carve().init(),n._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(t){return~~((0>t?-.5:.5)+t/this.o.step)*this.o.step},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(t){},this.val=function(t){},this.xy2val=function(t,e){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(t,e){var n;return t=t.substring(1,7),n=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)],"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"},this.copy=function(t,e){for(var n in t)e[n]=t[n]}},e.Dial=function(){e.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=t.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t,e){return null==t?this.v:(t=this.o.parse(t),void(e!==!1&&t!=this.v&&this.rH&&this.rH(t)===!1||(this.cv=this.o.stopper?n(i(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw())))},this.xy2val=function(t,e){var o,r;return o=Math.atan2(t-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.o.flip&&(o=this.angleArc-o-this.PI2),this.angleArc!=this.PI2&&0>o&&o>-.5?o=0:0>o&&(o+=this.PI2),r=~~(.5+o*(this.o.max-this.o.min)/this.angleArc)+this.o.min,this.o.stopper&&(r=n(i(r,this.o.max),this.o.min)),r},this.listen=function(){var e,o,r,s,a=this,l=function(t){t.preventDefault();var r=t.originalEvent,s=r.detail||r.wheelDeltaX,l=r.detail||r.wheelDeltaY,c=a._validate(a.o.parse(a.$.val()))+(s>0||l>0?a.o.step:0>s||0>l?-a.o.step:0);c=n(i(c,a.o.max),a.o.min),a.val(c,!1),a.rH&&(clearTimeout(e),e=setTimeout(function(){a.rH(c),e=null},100),o||(o=setTimeout(function(){e&&a.rH(c),o=null},200)))},c=1,u={37:-a.o.step,38:a.o.step,39:a.o.step,40:-a.o.step};this.$.bind("keydown",function(e){var o=e.keyCode;if(o>=96&&105>=o&&(o=e.keyCode=o-48),r=parseInt(String.fromCharCode(o)),isNaN(r)&&(13!==o&&8!==o&&9!==o&&189!==o&&(190!==o||a.$.val().match(/\./))&&e.preventDefault(),t.inArray(o,[37,38,39,40])>-1)){e.preventDefault();var l=a.o.parse(a.$.val())+u[o]*c;a.o.stopper&&(l=n(i(l,a.o.max),a.o.min)),a.change(l),a._draw(),s=window.setTimeout(function(){c*=2},30)}}).bind("keyup",function(t){isNaN(r)?s&&(window.clearTimeout(s),s=null,c=1,a.val(a.$.val())):a.$.val()>a.o.max&&a.$.val(a.o.max)||a.$.val()<a.o.min&&a.$.val(a.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",l),this.$.bind("mousewheel DOMMouseScroll",l)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/t>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(this.o.format(t))},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(t){var e,n;return t=this.angle(t),this.o.flip?(e=this.endAngle+1e-5,n=e-t-1e-5):(e=this.startAngle-1e-5,n=e+t+1e-5),this.o.cursor&&(e=n-this.cursorExt)&&(n+=this.cursorExt),{s:e,e:n,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var t,e=this.g,n=this.arc(this.cv),i=1;e.lineWidth=this.lineWidth,e.lineCap=this.lineCap,e.strokeStyle=this.o.bgColor,e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),e.stroke(),this.o.displayPrevious&&(t=this.arc(this.v),e.beginPath(),e.strokeStyle=this.pColor,e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d),e.stroke(),i=this.cv==this.v),e.beginPath(),e.strokeStyle=i?this.o.fgColor:this.fgColor,e.arc(this.xy,this.xy,this.radius,n.s,n.e,n.d),e.stroke()},this.cancel=function(){this.val(this.v)}},t.fn.dial=t.fn.knob=function(n){return this.each(function(){var i=new e.Dial;i.o=n,i.$=t(this),i.run()}).parent()}}(jQuery),define("jqueryknob",["jquery"],function(){}),function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),i=-1,o=this.length;++i<o&&(n.context=n[0]=this[i])&&e.call(n[0],i,n)!==!1;);
return this}})}(jQuery),function(t,e){"use strict";function n(e){var n=t(document.createTextNode(""));e.before(n),n.before(e),n.remove()}function i(t){function e(t){return $[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function o(t,e){for(var n=0,i=e.length;i>n;n+=1)if(s(t,e[n]))return n;return-1}function r(){var e=t(H);e.appendTo("body");var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}function s(t,n){return t===n?!0:t===e||n===e?!1:null===t||null===n?!1:t.constructor===String?t+""==n+"":n.constructor===String?n+""==t+"":!1}function a(e,n){var i,o,r;if(null===e||e.length<1)return[];for(i=e.split(n),o=0,r=i.length;r>o;o+=1)i[o]=t.trim(i[o]);return i}function l(t){return t.outerWidth(!1)-t.width()}function c(n){var i="keyup-change-value";n.on("keydown",function(){t.data(n,i)===e&&t.data(n,i,n.val())}),n.on("keyup",function(){var o=t.data(n,i);o!==e&&n.val()!==o&&(t.removeData(n,i),n.trigger("keyup-change"))})}function u(n){n.on("mousemove",function(n){var i=L;(i===e||i.x!==n.pageX||i.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)})}function h(t,n,i){i=i||e;var o;return function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(i,e)},t)}}function d(t,e){var n=h(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){o(t.target,e.get())>=0&&n(t)})}function p(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,n=t[0],i=t.val().length;t.focus();var o=n.offsetWidth>0||n.offsetHeight>0;o&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(e=n.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var n=0,i=0;if("selectionStart"in e)n=e.selectionStart,i=e.selectionEnd-n;else if("selection"in document){e.focus();var o=document.selection.createRange();i=document.selection.createRange().text.length,o.moveStart("character",-e.value.length),n=o.text.length-i}return{offset:n,length:i}}function g(t){t.preventDefault(),t.stopPropagation()}function m(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!F){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);F=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),F.attr("class","select2-sizer"),t("body").append(F)}return F.text(e.val()),F.width()}function y(e,n,i){var o,r,s=[];o=t.trim(e.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),o=t.trim(n.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(r=i(this),r&&s.push(r))})),e.attr("class",s.join(" "))}function b(t,e,n,o){var r=i(t.toUpperCase()).indexOf(i(e.toUpperCase())),s=e.length;return 0>r?void n.push(o(t)):(n.push(o(t.substring(0,r))),n.push("<span class='select2-match'>"),n.push(o(t.substring(r,r+s))),n.push("</span>"),void n.push(o(t.substring(r+s,t.length))))}function _(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function w(n){var i,o=null,r=n.quietMillis||100,s=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,r=s,c=n.transport||t.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},h=t.extend({},t.fn.select2.ajaxDefaults.params,u);i=i?i.call(a,l.term,l.page,l.context):null,r="function"==typeof r?r.call(a,l.term,l.page,l.context):r,o&&"function"==typeof o.abort&&o.abort(),n.params&&(t.isFunction(n.params)?t.extend(h,n.params.call(a)):t.extend(h,n.params)),t.extend(h,{url:r,dataType:n.dataType,data:i,success:function(t){var e=n.results(t,l.page,l);l.callback(e)},error:function(t,e,n){var i={hasError:!0,jqXHR:t,textStatus:e,errorThrown:n};l.callback(i)}}),o=c.call(a,h)},r)}}function x(e){var n,i,o=e,r=function(t){return""+t.text};t.isArray(o)&&(i=o,o={results:i}),t.isFunction(o)===!1&&(i=o,o=function(){return i});var s=o();return s.text&&(r=s.text,t.isFunction(r)||(n=s.text,r=function(t){return t[n]})),function(e){var n,i=e.term,s={results:[]};return""===i?void e.callback(o()):(n=function(o,s){var a,l;if(o=o[0],o.children){a={};for(l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],t(o.children).each2(function(t,e){n(e,a.children)}),(a.children.length||e.matcher(i,r(a),o))&&s.push(a)}else e.matcher(i,r(o),o)&&s.push(o)},t(o().results).each2(function(t,e){n(e,s.results)}),void e.callback(s))}}function C(n){var i=t.isFunction(n);return function(o){var r=o.term,s={results:[]},a=i?n(o):n;t.isArray(a)&&(t(a).each(function(){var t=this.text!==e,n=t?this.text:this;(""===r||o.matcher(r,n))&&s.results.push(t?this:{id:this,text:this})}),o.callback(s))}}function k(e,n){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(n+" must be a string, function, or falsy value")}function S(e,n){if(t.isFunction(e)){var i=Array.prototype.slice.call(arguments,2);return e.apply(n,i)}return e}function T(e){var n=0;return t.each(e,function(t,e){e.children?n+=T(e.children):n++}),n}function E(t,n,i,o){var r,a,l,c,u,h=t,d=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(u=o.tokenSeparators[l],a=t.indexOf(u),!(a>=0));l++);if(0>a)break;if(r=t.substring(0,a),t=t.substring(a+u.length),r.length>0&&(r=o.createSearchChoice.call(this,r,n),r!==e&&null!==r&&o.id(r)!==e&&null!==o.id(r))){for(d=!1,l=0,c=n.length;c>l;l++)if(s(o.id(r),o.id(n[l]))){d=!0;break}d||i(r)}}return h!==t?t:void 0}function M(){var e=this;t.each(arguments,function(t,n){e[n].remove(),e[n]=null})}function D(e,n){var i=function(){};return i.prototype=new e,i.prototype.constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}if(window.Select2===e){var P,A,I,R,O,F,N,z,L={x:0,y:0},P={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case P.LEFT:case P.RIGHT:case P.UP:case P.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case P.SHIFT:case P.CTRL:case P.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},H="<div class='select2-measure-scrollbar'></div>",$={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"};N=t(document),O=function(){var t=1;return function(){return t++}}(),A=D(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var i,o,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+O()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=t("body"),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(S(n.containerCss,this.opts.element)),this.container.addClass(S(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",g),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",g),this.results=i=this.container.find(s),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",g),u(this.results),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),d(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&i.mousewheel(function(t,e,n,o){var r=i.scrollTop();o>0&&0>=r-o?(i.scrollTop(0),g(t)):0>o&&i.get(0).scrollHeight-i.scrollTop()+o<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),g(t))}),c(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===e&&(a=!1),this.enable(!a);var l=n.element.prop("readonly");l===e&&(l=!1),this.readonly(l),z=z||r(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,n=t.data("select2"),i=this;this.close(),t.length&&t[0].detachEvent&&t.each(function(){this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==e&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),M.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:s(t.attr("locked"),"locked")||s(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,o,r,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(i,o,r){var s,a=this.opts.id,l=this.liveRegion;(s=function(i,o,u){var h,d,p,f,g,m,v,y,b,_;i=n.sortResults(i,o,r);var w=[];for(h=0,d=i.length;d>h;h+=1)p=i[h],g=p.disabled===!0,f=!g&&a(p)!==e,m=p.children&&p.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),y=t(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+O()),y.attr("role","option"),_=n.formatResult(p,y,r,c.opts.escapeMarkup),_!==e&&(y.html(_),v.append(y)),m&&(b=t("<ul></ul>"),b.addClass("select2-result-sub"),s(p.children,b,u+1),v.append(b)),v.data("select2-data",p),w.push(v[0]);o.append(w),l.text(n.formatMatches(i.length))})(o,i,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(r=n.id,n.id=function(t){return t[r]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind(function(t){var n,o,r,s={results:[],more:!1},a=t.term;r=function(e,n){var i;e.is("option")?t.matcher(a,e.text(),e)&&n.push(c.optionToData(e)):e.is("optgroup")&&(i=c.optionToData(e),e.children().each2(function(t,e){r(e,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==e&&n.length>0&&(o=this.getPlaceholderOption(),o&&(n=n.not(o))),n.each2(function(t,e){r(e,s.results)}),t.callback(s)}),n.id=function(t){return t.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=w.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=C(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),n.initSelection===e&&(n.initSelection=function(e,i){var o=[];t(a(e.val(),n.separator)).each(function(){var e={id:this,text:this},i=n.tags;t.isFunction(i)&&(i=i()),t(i).each(function(){return s(this.id,e.id)?(e=this,!1):void 0}),o.push(e)}),i(o)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,o=this;i.on("change.select2",this.bind(function(t){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var t=i.prop("disabled");t===e&&(t=!1),this.enable(!t);var n=i.prop("readonly");n===e&&(n=!1),this.readonly(n),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(S(this.opts.containerCssClass,this.opts.element)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(this.opts.dropdownCssClass,this.opts.element))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",o._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(e){t.each(e,o._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var e,n,i,o,r,s=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),h=t(window),d=h.width(),p=h.height(),f=h.scrollLeft()+d,g=h.scrollTop()+p,m=a.top+l,v=a.left,y=g>=m+u,b=a.top-u>=h.scrollTop(),_=s.outerWidth(!1),w=f>=v+_,x=s.hasClass("select2-drop-above");x?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(s.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),f=h.scrollLeft()+d,g=h.scrollTop()+p,m=a.top+l,v=a.left,_=s.outerWidth(!1),w=f>=v+_,s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=t(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),_=s.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:z.width),_>c?c=_:_=c,u=s.outerHeight(!1),w=f>=v+_):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),m-=e.top,v-=e.left),w||(v=a.left+this.container.outerWidth(!1)-_),o={left:v,width:c},n?(o.top=a.top-u,o.bottom="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(o.top=m,o.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),o=t.extend(o,S(this.opts.dropdownCss,this.opts.element)),s.css(o)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),N.on("mousemove.select2Event",function(t){L.x=t.pageX,L.y=t.pageY}),!0):!1},opening:function(){var e,i=this.containerEventName,o="scroll."+i,r="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0==e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(i){n(e);var o,r=t("#select2-drop");r.length>0&&(o=r.data("select2"),o.opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){t(this).on(r+" "+o+" "+s,function(t){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,n="scroll."+e,i="resize."+e,o="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(n).off(i).off(o)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),N.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return S(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,n,i,o,r,s,a,l,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void c.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),i=t(e[n]),l=(i.offset()||{}).top||0,o=l+i.outerHeight(!0),n===e.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(o=a.offset().top+a.outerHeight(!0))),r=c.offset().top+c.outerHeight(!0),o>r&&c.scrollTop(c.scrollTop()+(o-r)),s=l-c.offset().top,0>s&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=e;var o=t(n[i]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var n,i,r=this.findHighlightableChoices();return 0===arguments.length?o(r.filter(".select2-highlighted")[0],r.get()):(e>=r.length&&(e=r.length-1),0>e&&(e=0),this.removeHighlight(),n=t(r[e]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),i=n.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,n=e.find("li.select2-more-results"),i=this.resultsPage+1,o=this,r=this.search.val(),s=this.context;0!==n.length&&(t=n.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){o.opened()&&(o.opts.populateResults.call(this,e,t.results,{term:r,page:i,context:s}),o.postprocessResults(t,!1,!1),t.more===!0?(n.detach().appendTo(e).text(S(o.opts.formatLoadMore,o.opts.element,i+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):n.remove(),o.positionDropdown(),o.resultsPage=i,o.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),d.positionDropdown(),u.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.liveRegion.text(u.text()):d.liveRegion.text(d.opts.formatMatches(u.find(".select2-result-selectable").length))}function o(t){u.html(t),i()}var r,a,l,c=this.search,u=this.results,h=this.opts,d=this,p=c.val(),f=t.data(this.container,"select2-last-term");if((n===!0||!f||!s(p,f))&&(t.data(this.container,"select2-last-term",p),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(r=this.data(),t.isArray(r)&&r.length>=g&&k(h.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+S(h.formatSelectionTooBig,h.element,g)+"</li>");if(c.val().length<h.minimumInputLength)return o(k(h.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+S(h.formatInputTooShort,h.element,c.val(),h.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(h.maximumInputLength&&c.val().length>h.maximumInputLength)return void o(k(h.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+S(h.formatInputTooLong,h.element,c.val(),h.maximumInputLength)+"</li>":"");h.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+S(h.formatSearching,h.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=e&&null!=a&&c.val(a),this.resultsPage=1,h.query({element:h.element,term:c.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(r){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(r.hasError!==e&&k(h.formatAjaxError,"formatAjaxError"))return void o("<li class='select2-ajax-error'>"+S(h.formatAjaxError,h.element,r.jqXHR,r.textStatus,r.errorThrown)+"</li>");if(this.context=r.context===e?null:r.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(d,c.val(),r.results),a!==e&&null!==a&&d.id(a)!==e&&null!==d.id(a)&&0===t(r.results).filter(function(){return s(d.id(this),d.id(a))}).length&&this.opts.createSearchChoicePosition(r.results,a)),0===r.results.length&&k(h.formatNoMatches,"formatNoMatches"))return void o("<li class='select2-no-results'>"+S(h.formatNoMatches,h.element,c.val())+"</li>");u.empty(),d.opts.populateResults.call(this,u,r.results,{term:c.val(),
page:this.resultsPage,context:null}),r.more===!0&&k(h.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+h.escapeMarkup(S(h.formatLoadMore,h.element,this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(r,n),i(),this.opts.element.trigger({type:"select2-loaded",items:r})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,i,o,r,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==e)for(i=n.split(";"),r=0,s=i.length;s>r;r+=1)if(a=i[r].replace(/\s/g,""),o=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),I=D(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(o=this.search.val().length,n.setSelectionRange(o,o))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"selection","focusser")},initContainer:function(){var e,i,o=this.container,r=this.dropdown,s=O();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=o.find(".select2-choice"),this.focusser=o.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),i=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)return void g(t);switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),void g(t);case P.ENTER:return this.selectHighlighted(),void g(t);case P.TAB:return void this.selectHighlighted({noFocus:!0});case P.ESC:return this.cancel(t),void g(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.ESC){if(this.opts.openOnEnter===!1&&t.which===P.ENTER)return void g(t);if(t.which==P.DOWN||t.which==P.UP||t.which==P.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void g(t)}return t.which==P.DELETE||t.which==P.BACKSPACE?(this.opts.allowClear&&this.clear(),void g(t)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),m(t),this.close(),this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(i){n(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),g(i)})),r.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){g(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var n=this.selection.data("select2-data");if(n){var i=t.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(n,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()===e?!1:(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val()},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find("option").filter(function(){return this.selected&&!this.disabled});e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var o=n.val(),r=null;e.query({matcher:function(t,n,i){var a=s(o,e.id(i));return a&&(r=i),a},callback:t.isFunction(i)?function(){i(r)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,n){var i=0,o=this;if(this.findHighlightableChoices().each2(function(t,e){return s(o.id(e.data("select2-data")),o.opts.element.val())?(i=t,!1):void 0}),n!==!1&&(e===!0&&i>=0?this.highlight(i):this.highlight(0)),e===!0){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(T(t.results)>=r)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),s(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n,i,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),o.empty(),null!==t&&(n=this.opts.formatSelection(t,o,this.opts.escapeMarkup)),n!==e&&o.append(n),i=this.opts.formatSelectionCssClass(t,o),i!==e&&o.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,i=null,o=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return i=o.optionToData(e),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:r});else{if(!t&&0!==t)return void this.clear(n);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){o.opts.element.val(t?o.id(t):""),o.updateSelection(t),o.setPlaceholder(),n&&o.triggerChange({added:t,removed:r})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==e&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:n})):this.clear(i)))}}),R=D(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){i.push(n.optionToData(e))}),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var o=a(n.val(),e.separator),r=[];e.query({matcher:function(n,i,a){var l=t.grep(o,function(t){return s(t,e.id(a))}).length;return l&&r.push(a),l},callback:t.isFunction(i)?function(){for(var t=[],n=0;n<o.length;n++)for(var a=o[n],l=0;l<r.length;l++){var c=r[l];if(s(a,e.id(c))){t.push(c),r.splice(l,1);break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"searchContainer","selection")},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){i.search[0].focus(),i.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+O()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var n=e.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),o=n.next(".select2-search-choice:not(.select2-locked)"),r=f(this.search);if(n.length&&(t.which==P.LEFT||t.which==P.RIGHT||t.which==P.BACKSPACE||t.which==P.DELETE||t.which==P.ENTER)){var s=n;return t.which==P.LEFT&&i.length?s=i:t.which==P.RIGHT?s=o.length?o:null:t.which===P.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),s=i.length?i:o):t.which==P.DELETE?this.unselect(n.first())&&(this.search.width(10),s=o.length?o:null):t.which==P.ENTER&&(s=null),this.selectChoice(s),g(t),void(s&&s.length||this.open())}if((t.which===P.BACKSPACE&&1==this.keydowns||t.which==P.LEFT)&&0==r.offset&&!r.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void g(t);if(this.selectChoice(null),this.opened())switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),void g(t);case P.ENTER:return this.selectHighlighted(),void g(t);case P.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case P.ESC:return this.cancel(t),void g(t)}if(t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.BACKSPACE&&t.which!==P.ESC){if(t.which===P.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)&&g(t),t.which===P.ENTER&&g(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n=[],i=[],r=this;t(e).each(function(){o(r.id(this),n)<0&&(n.push(r.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){r.addSelectedChoice(this)}),r.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,n){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,o,r=!n.locked,s=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?s:a,c=this.id(n),u=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=e&&l.find("div").replaceWith("<div>"+i+"</div>"),o=this.opts.formatSelectionCssClass(n,l.find("div")),o!=e&&l.addClass(o),r&&l.find(".select2-search-choice-close").on("mousedown",g).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),g(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(e){var n,i,r=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(n=e.data("select2-data")){var s=t.Event("select2-removing");if(s.val=this.id(n),s.choice=n,this.opts.element.trigger(s),s.isDefaultPrevented())return!1;for(;(i=o(this.id(n),r))>=0;)r.splice(i,1),this.setVal(r),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(t,e,n){var i=this.getVal(),r=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;r.each2(function(t,e){var n=a.id(e.data("select2-data"));o(n,i)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+S(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var t,e,n,i,o,r=l(this.search);t=v(this.search)+10,e=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,o=n-(e-i)-r,t>o&&(o=n-r),40>o&&(o=n-r),0>=o&&(o=t),this.search.width(Math.floor(o))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),a(t,this.opts.separator))},setVal:function(e){var n;this.select?this.select.val(e):(n=[],t(e).each(function(){o(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),n=0;n<e.length;n++)for(var i=0;i<t.length;i++)s(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),n>0&&n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(n,i){var o,r=this;if(0===arguments.length)return this.getVal();if(o=this.data(),o.length||(o=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t.map(e,r.id);r.setVal(n),r.updateSelection(e),r.clearSearch(),i&&r.triggerChange(r.buildChangeDetails(o,r.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,n){var i,o,r=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(o=this.data(),e||(e=[]),i=t.map(e,function(t){return r.opts.id(t)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(o,this.data())),void 0)}}),t.fn.select2=function(){var n,i,r,s,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],h=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:t.extend({},l[0]),n.element=t(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),i=a?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(o(l[0],c)<0)throw"Unknown method: "+l[0];if(s=e,i=t(this).data("select2"),i===e)return;if(r=l[0],"container"===r?s=i.container:"dropdown"===r?s=i.dropdown:(d[r]&&(r=d[r]),s=i[r].apply(i,l.slice(1))),o(l[0],u)>=0||o(l[0],h)>=0&&1==l.length)return!1}}),s===e?this:s},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var o=[];return b(t.text,n.term,o,i),o.join("")},formatSelection:function(t,n,i){return t?i(t.text):e},sortResults:function(t,e,n){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,n){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return i(""+e).toUpperCase().indexOf(i(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:E,escapeMarkup:_,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,n){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return e&&t.opts.minimumResultsForSearch<0?!1:!0}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,n){return"Loading failed"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more resultsâ¦"},formatSearching:function(){return"Searchingâ¦"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:C},util:{debounce:h,markMatch:b,escapeMarkup:_,stripDiacritics:i},"class":{"abstract":A,single:I,multi:R}}}}(jQuery),define("select2",["jquery","bootstrap"],function(){}),!function(t){"use strict";function e(e,n){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input size="1" type="text" />').appendTo(this.$container),this.$element.after(this.$container),this.build(n)}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function o(t){return t?a.text(t).html():""}function r(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}var s={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(t,e){e.hide().fadeIn()}};e.prototype={constructor:e,add:function(e,n){var i=this;if(!(i.options.maxTags&&i.itemsArray.length>=i.options.maxTags||e!==!1&&!e)){if("object"==typeof e&&!i.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(i.isSelect&&!i.multiple&&i.itemsArray.length>0&&i.remove(i.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var r=e.split(",");if(r.length>1){for(var s=0;s<r.length;s++)this.add(r[s],!0);return void(n||i.pushVal())}}var a=i.options.itemValue(e),l=i.options.itemText(e),c=i.options.tagClass(e),u=t.grep(i.itemsArray,function(t){return i.options.itemValue(t)===a})[0];if(u){if(i.options.onTagExists){var h=t(".tag",i.$container).filter(function(){return t(this).data("item")===u});i.options.onTagExists(e,h)}}else{i.itemsArray.push(e);var d=t('<span class="tag '+o(c)+'">'+o(l)+'<span data-role="remove"></span></span>');if(d.data("item",e),i.findInputWrapper().before(d),d.after(" "),i.isSelect&&!t('option[value="'+escape(a)+'"]',i.$element)[0]){var p=t("<option selected>"+o(l)+"</option>");p.data("item",e),p.attr("value",a),i.$element.append(p)}n||i.pushVal(),i.options.maxTags===i.itemsArray.length&&i.$container.addClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemAdded",{item:e}))}}}},remove:function(e,n){var i=this;i.objectItems&&(e="object"==typeof e?t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==i.options.itemValue(e)})[0]:t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==e})[0]),e&&(t(".tag",i.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",i.$element).filter(function(){return t(this).data("item")===e}).remove(),i.itemsArray.splice(i.itemsArray.indexOf(e),1)),n||i.pushVal(),i.options.maxTags>i.itemsArray.length&&i.$container.removeClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal(),e.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),r=e.options.itemValue(i),s=e.options.itemText(i),a=e.options.tagClass(i);
if(n.attr("class",null),n.addClass("tag "+o(a)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o(s),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===i});l.attr("value",r)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(n,!0).trigger("change")},build:function(e){var o=this;o.options=t.extend({},s,e);var a=o.options.typeahead||{};o.objectItems&&(o.options.freeInput=!1),n(o.options,"itemValue"),n(o.options,"itemText"),n(o.options,"tagClass"),o.options.source&&(a.source=o.options.source),a.source&&t.fn.typeahead&&(i(a,"source"),o.$input.typeahead({source:function(e,n){function i(t){for(var e=[],i=0;i<t.length;i++){var s=o.options.itemText(t[i]);r[s]=t[i],e.push(s)}n(e)}this.map={};var r=this.map,s=a.source(e);t.isFunction(s.success)?s.success(i):t.when(s).then(i)},updater:function(t){o.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}})),o.$container.on("click",t.proxy(function(){o.$input.focus()},o)),o.$container.on("keydown","input",t.proxy(function(e){var n=t(e.target),i=o.findInputWrapper();switch(e.which){case 8:if(0===r(n[0])){var s=i.prev();s&&o.remove(s.data("item"))}break;case 46:if(0===r(n[0])){var a=i.next();a&&o.remove(a.data("item"))}break;case 37:var l=i.prev();0===n.val().length&&l[0]&&(l.before(i),n.focus());break;case 39:var c=i.next();0===n.val().length&&c[0]&&(c.after(i),n.focus());break;default:o.options.freeInput&&o.options.confirmKeys.indexOf(e.which)>=0&&(o.add(n.val()),n.val(""),e.preventDefault())}n.attr("size",Math.max(1,n.val().length))},o)),o.$container.on("click","[data-role=remove]",t.proxy(function(e){o.remove(t(e.target).closest(".tag").data("item"))},o)),o.options.itemValue===s.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):t("option",o.$element).each(function(){o.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(n,i){var o=[];return this.each(function(){var r=t(this).data("tagsinput");if(r){var s=r[n](i);void 0!==s&&o.push(s)}else r=new e(this,n),t(this).data("tagsinput",r),o.push(r),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof n?o.length>1?o:o[0]:o},t.fn.tagsinput.Constructor=e;var a=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),define("tagsinput",["jquery","bootstrap"],function(){}),function(t,e,n,i){var o={init:function(e){var n=t.extend({image:null,width:50,height:50,disabled:!1},e);return this.each(function(){var e=t(this),i=n.image,o=e.data("sdb-image");o&&(i=o),i||t.error("There is no image assigned for ScrewDefaultButtons"),e.wrap("<div >").css({display:"none"});var r=e.attr("class"),s=e.attr("onclick"),a=e.parent("div");a.addClass(r),a.attr("onclick",s),a.css({"background-image":i,width:n.width,height:n.height,cursor:"pointer"});var l=0,c=-n.height;if(e.is(":disabled")&&(l=-(2*n.height),c=-(3*n.height)),e.on("disableBtn",function(){e.attr("disabled","disabled"),l=-(2*n.height),c=-(3*n.height),e.trigger("resetBackground")}),e.on("enableBtn",function(){e.removeAttr("disabled"),l=0,c=-n.height,e.trigger("resetBackground")}),e.on("resetBackground",function(){e.is(":checked")?a.css({backgroundPosition:"0 "+c+"px"}):a.css({backgroundPosition:"0 "+l+"px"})}),e.trigger("resetBackground"),e.is(":checkbox"))a.on("click",function(){e.is(":disabled")||e.change()}),a.addClass("styledCheckbox"),e.on("change",function(){e.prop("checked")?(e.prop("checked",!1),a.css({backgroundPosition:"0 "+l+"px"})):(e.prop("checked",!0),a.css({backgroundPosition:"0 "+c+"px"}))});else if(e.is(":radio")){a.addClass("styledRadio");var u=e.attr("name");a.on("click",function(){e.prop("checked")||e.is(":disabled")||e.change()}),e.on("change",function(){if(e.prop("checked"))e.prop("checked",!1),a.css({backgroundPosition:"0 "+l+"px"});else{e.prop("checked",!0),a.css({backgroundPosition:"0 "+c+"px"});var n=t('input[name="'+u+'"]').not(e);n.trigger("radioSwitch")}}),e.on("radioSwitch",function(){a.css({backgroundPosition:"0 "+l+"px"})});var h=t(this).attr("id"),d=t('label[for="'+h+'"]');d.on("click",function(){a.trigger("click")})}if(!t.support.leadingWhitespace){var h=t(this).attr("id"),d=t('label[for="'+h+'"]');d.on("click",function(){a.trigger("click")})}})},check:function(){return this.each(function(){var e=t(this);o.isChecked(e)||e.change()})},uncheck:function(){return this.each(function(){var e=t(this);o.isChecked(e)&&e.change()})},toggle:function(){return this.each(function(){var e=t(this);e.change()})},disable:function(){return this.each(function(){var e=t(this);e.trigger("disableBtn")})},enable:function(){return this.each(function(){var e=t(this);e.trigger("enableBtn")})},isChecked:function(t){return t.prop("checked")?!0:!1}};return t.fn.screwDefaultButtons=function(e,n){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.screwDefaultButtons"):o.init.apply(this,arguments)},this}(jQuery),define("screwbuttons",["jquery"],function(){}),function(t){var e=navigator.userAgent.toLowerCase(),n=e.match(/(iphone|ipod|ipad)/),i={init:function(e){return this.each(function(){function i(t,e){var n=t.offset(),i=e.pageX-n.left,o=100*i/(t.width()+1);0>o&&(o=0),o>100&&(o=100),a=t.parents(".panzer").data("panzer"),a.audio.volume=o/100}var o=t(this);if(o.is("audio")){var r=t.extend({layout:"mini",theme:"dark",expanded:!1,cover:"",pauseothers:!0,showduration:!1,showvolume:!1,volume:100,title:""},e);r.volume<0&&(r.volume=0),r.volume>100&&(r.volume=100);var o=t(this),s=o.get(0),a=o.data("panzer");if(!a){var l="";if("big"==r.layout&&(l=" panzer-big"),l+="light"==r.theme?" panzer-light":"dark"==r.theme?" panzer-dark":" panzer-custom",r.expanded&&(l+=" panzer-expand"),r.pauseothers&&(l+=" pause-others"),this.canPlayType){if(controls='<div class="controls"><span class="play"><em></em></span></div><div class="progress-wrapper"><div class="progress"><div class="elapsed" style="width:0;display:none"></div></div></div>',r.showduration){var c,u;c=Math.floor(s.duration/60),c=isNaN(c)?"00":c>=10?c:"0"+c,u=Math.floor(s.duration%60),u=isNaN(u)?"00":u>=10?u:"0"+u,c>100?controls+='<span class="duration small">'+c+":"+u+"</span>":controls+='<span class="duration">'+c+":"+u+"</span>",l+=" show-duration"}r.showvolume&&(controls+='<div class="volume-wrapper"><span></span><div class="volume"><div class="set" style="width:'+r.volume+'%"></div></div></div>',l+=" show-volume")}else{var h=o.attr("src");"undefined"==typeof h&&(h=o.children("source:first").attr("src")),"undefined"==typeof h?(controls='<strong class="alert">Please specify an audio source file.</strong>',l+=" panzer-unsupported"):(controls='<div class="controls"><a class="download" href="'+h+'" title="Download File"><em></em></a></div><strong class="alert">Download Audio</strong>',l+=" panzer-download")}if(""!=r.cover?album_cover='<div class="cover"><img src="'+r.cover+'" alt="" /></div>':album_cover="",r.title&&0!==r.title.length?song_title='<div class="title">'+r.title+"</div>":song_title=o.attr("title")?'<div class="title">'+o.attr("title")+"</div>":"",$player=t('<div class="panzer'+l+'">'+album_cover+'<div class="player">'+controls+"</div>"+song_title+"</div>"),o.after($player).data("panzer",{target:o,audio:s,player:$player,loc:o.prev()}),n?o.css({position:"absolute",top:-9999,width:0,height:0,display:"none",visibility:"hidden",overflow:"hidden"}):o.detach(),$player.data("panzer",{audio:s}),this.canPlayType){if(t(".play",$player).click(function(e){t(this).hasClass("play")&&(t(".panzer.pause-others").each(function(){var e=t(this).data("panzer");e&&!e.audio.paused&&e.audio.pause()}),t(".panzerlist.pause-others").each(function(){var e=t(this).find("a.active").data("panzerlist");e&&!e.audio.paused&&e.audio.pause()})),a=t(this).parents(".panzer").data("panzer"),a.audio.paused?a.audio.play():a.audio.pause()}),s.addEventListener("play",function(){a=t(this).data("panzer"),t(".play",a.player).toggleClass("play pause")}),s.addEventListener("pause",function(){a=t(this).data("panzer"),t(".pause",a.$player).toggleClass("play pause")}),s.addEventListener("ended",function(){a=t(this).data("panzer"),a.audio.pause()}),s.addEventListener("timeupdate",function(){a=t(this).data("panzer");var e=100*a.audio.currentTime/a.audio.duration;if(!isNaN(e)){var n,i,o;n=Math.floor(a.audio.currentTime/60),i=isNaN(n)?"00":n>=10?n:"0"+n,o=Math.floor(a.audio.currentTime%60),o=isNaN(o)?"00":o>=10?o:"0"+o,!isNaN(n)&&n>99&&t("span.duration",a.player).addClass("small"),t("span.duration",a.player).html(i+":"+o),0==e?t(".elapsed",a.player).hide().css("width",0):t(".elapsed",a.player).show().css("width",e+"%")}}),r.showvolume){s.addEventListener("volumechange",function(){a=t(this).data("panzer");var e=100*a.audio.volume;0==e?t(".volume .set",a.player).hide().css("width",0):t(".volume .set",a.player).show().css("width",e+"%")}),s.volume=r.volume/100;var d=!1;t(".volume",$player).mousedown(function(e){1===e.which&&(d=!0,i(t(this),e))}).mouseup(function(t){1===t.which&&(d=!1)}).mousemove(function(e){(e.which=d)&&i(t(this),e)})}t(".progress").click(function(e){var n=t(this).offset(),i=e.pageX-n.left,o=100*i/(t(this).width()+1);0>o&&(o=0),o>100&&(o=100),a=t(this).parents(".panzer").data("panzer");var r=Math.round(a.audio.duration/100*o);0===a.audio.readyState?a.audio.addEventListener("canplay",function(){a=t(this).data("panzer"),a.audio.currentTime=r}):a.audio.currentTime=r})}}}})},destroy:function(){return this.each(function(){var e=t(this),i=e.data("panzer");i&&(n?e.removeAttr("style"):i.loc&&i.loc.after(e),i.player.remove(),e.removeData("panzer").removeAttr("style"))})}};t.fn.panzer=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.panzer"):i.init.apply(this,arguments)}}(jQuery),define("panzer",["jquery"],function(){}),function(t){var e=navigator.userAgent.toLowerCase(),n=e.match(/(iphone|ipod|ipad)/),i={init:function(e){function i(e,n){var i=e.offset(),o=n.pageX-i.left,r=100*o/(e.width()+1);0>r&&(r=0),r>100&&(r=100),$elems=e.parents(".panzerlist").find(".list a"),$elems.each(function(){data=t(this).data("panzerlist"),data.audio.volume=r/100})}function o(){data=t(this).data("panzerlist"),t(".play",data.player).toggleClass("play pause")}function r(){data=t(this).data("panzerlist"),t(".pause",data.$player).toggleClass("play pause")}function s(){if(data=t(this).data("panzerlist"),data.audio.pause(),data.player.hasClass("auto-advance")){if($active=data.player.find(".list a.active"),$active.is(":last-child")){if(!data.player.hasClass("repeat-all"))return;$next=data.player.find(".list a:first")}else $next=$active.next("a");$next.trigger("click")}}function a(){data=t(this).data("panzerlist");var e=100*data.audio.currentTime/data.audio.duration;if(!isNaN(e)){var n,i,o;n=Math.floor(data.audio.currentTime/60),i=isNaN(n)?"00":n>=10?n:"0"+n,o=Math.floor(data.audio.currentTime%60),o=isNaN(o)?"00":o>=10?o:"0"+o,!isNaN(n)&&n>99&&t("span.duration",data.player).addClass("small"),t("span.duration",data.player).html(i+":"+o),0==e?t(".elapsed",data.player).hide().css("width",0):t(".elapsed",data.player).show().css("width",e+"%")}}function l(){data=t(this).data("panzerlist");var e=100*data.audio.volume;0==e?t(".volume .set",data.player).hide().css("width",0):t(".volume .set",data.player).show().css("width",e+"%")}function c(e){if(e.preventDefault(),$this=t(this),t(".panzerlist.pause-others .list a.active").not($this).each(function(){var e=t(this).data("panzerlist");e&&(e.audio.paused||e.audio.pause())}),data=t(this).parents(".panzerlist").find(".list a.active").data("panzerlist"),$isactive=t(this).hasClass("active"),data.audio.paused||($isactive||data.audio.pause(),data.audio.currentTime=0),$isactive)data.audio.play();else{try{data.audio.currentTime=0}catch(n){}data=t(this).data("panzerlist"),t(this).parents(".panzerlist").find(".list a").removeClass("active"),t(this).addClass("active"),data.audio.play()}}var u=t.extend({layout:"mini",theme:"dark",expanded:!1,title:"",cover:"",volume:100,show_prev_next:!1,show_list:!0,pause_others:!0,auto_start:!1,auto_advance:!0,repeat_all:!1,outdated_text:"Browser is outdated, but you can still download and listen to the audio files on your computer.",auto_numbering:!1},e);u.volume<0&&(u.volume=0),u.volume>100&&(u.volume=100);var h="";"big"==u.layout&&(h=" panzerlist-big"),h+=" panzerlist-"+u.theme,u.expanded&&(h+=" panzerlist-expand"),u.show_prev_next||(h+=" hide-prev-next"),u.show_list||(h+=" hide-list"),u.pause_others&&(h+=" pause-others"),u.auto_advance&&(h+=" auto-advance"),u.repeat_all&&(h+=" repeat-all");var d=document.createElement("audio");if(d.canPlayType){controls='<div class="controls"><span class="play"><em></em></span><div class="prev-next"><span class="prev"></span><span class="next"></span></div></div><div class="progress-wrapper"><div class="progress"><div class="elapsed" style="width:0;display:none"></div></div></div><span class="duration">00:00</span><div class="volume-wrapper"><span></span><div class="volume"><div class="set" style="width:'+u.volume+'%"></div></div></div>',u.title&&0!==u.title.length?song_title='<div class="title">'+u.title+"</div>":song_title="",""!=u.cover?(album_cover='<div class="cover"><img src="'+u.cover+'" alt="" /></div>',u.show_list&&(h+=" hide-list")):album_cover="",$player=t('<div class="panzerlist'+h+'">'+song_title+album_cover+'<div class="list"></div><div class="player">'+controls+"</div></div>"),t(".play",$player).click(function(e){t(this).hasClass("play")&&(t(".panzerlist.pause-others").each(function(){var e=t(this).find("a.active").data("panzerlist");e&&!e.audio.paused&&e.audio.pause()}),t(".panzer.pause-others").each(function(){var e=t(this).data("panzer");e&&!e.audio.paused&&e.audio.pause()})),data=t(this).parents(".panzerlist").find(".list a.active").data("panzerlist"),data.audio.paused?data.audio.play():data.audio.pause()}),t(".prev,.next",$player).click(function(e){if($active=t(this).parents(".panzerlist").find(".list a.active"),data=$active.data("panzerlist"),t(this).hasClass("prev"))if($active.is(":first-child")){if(!data.player.hasClass("repeat-all"))return;$next=data.player.find(".list a:last")}else $next=$active.prev("a");else if($active.is(":last-child")){if(!data.player.hasClass("repeat-all"))return;$next=data.player.find(".list a:first")}else $next=$active.next("a");data.audio.pause(),data.audio.currentTime=0,$next.trigger("click")});var p=!1;t(".volume",$player).mousedown(function(e){1===e.which&&(p=!0,i(t(this),e))}).mouseup(function(t){1===t.which&&(p=!1)}).mousemove(function(e){1===e.which&&p&&i(t(this),e)}),t(".progress",$player).click(function(e){var n=t(this).offset(),i=e.pageX-n.left,o=100*i/(t(this).width()+1);0>o&&(o=0),o>100&&(o=100),$audio_el=t(this).parents(".panzerlist").find(".list a.active"),data=$audio_el.data("panzerlist");var r=Math.round(data.audio.duration/100*o);0===data.audio.readyState?data.audio.addEventListener("canplay",function(){data=t(this).data("panzerlist"),data.audio.currentTime=r}):data.audio.currentTime=r}),$i=0,this.each(function(){var e=t(this),i=e.get(0);e.is("audio")&&(e.data("panzerlist")||(i.volume=u.volume/100,i.addEventListener("play",o),i.addEventListener("pause",r),i.addEventListener("ended",s),i.addEventListener("timeupdate",a),i.addEventListener("volumechange",l),$i++,$el=t('<a href="'+e.children("source:first").attr("src")+'"'+(1==$i?' class="active"':"")+">"+(u.auto_numbering?$i+". ":"")+e.attr("title")+"</a>").data("panzerlist",{audio:i,player:$player}).click(c),t(".list",$player).append($el),e.after($player).data("panzerlist",{audio:i,player:$player,elem:$el,loc:e.prev()}),n?e.css({position:"absolute",top:-9999,width:0,height:0,display:"none",visibility:"hidden",overflow:"hidden"}):e.detach()))}),u.auto_start&&t(".list a:first",$player).trigger("click")}else h=" panzerlist-unsupported","big"==u.layout&&(h+=" panzerlist-big"),h+=" panzerlist-"+u.theme,u.expanded&&(h+=" panzerlist-expand"),u.title&&0!==u.title.length?song_title='<div class="title">'+u.title+"</div>":song_title="",""!=u.cover?(album_cover='<div class="cover"><img src="'+u.cover+'" alt="" /></div>',u.show_list&&(h+=" hide-list")):album_cover="",$player=t('<div class="panzerlist'+h+'">'+song_title+album_cover+'<div class="list"></div><div class="player"><strong class="alert">'+u.outdated_text+"</strong></div></div>"),$i=0,this.each(function(){var e=t(this);e.is("audio")&&(e.data("panzerlist")||($i++,$el=t('<a href="'+e.children("source:first").attr("src")+'">'+$i+". "+e.attr("title")+"</a>").data("panzerlist",{player:$player}),t(".list",$player).append($el),e.after($player).data("panzerlist",{player:$player,elem:$el,loc:e.prev()}).detach()))});return this},destroy:function(){return this.each(function(){var e=t(this),i=e.data("panzerlist");i&&(n?e.removeAttr("style"):i.loc&&i.loc.after(e),i.player.remove(),e.removeData("panzerlist").removeAttr("style"),i=null)})}};t.fn.panzerlist=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.panzerlist"):i.init.apply(this,arguments)}}(jQuery),define("panzerlist",["jquery"],function(){});var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__slice=[].slice;!function(t,e){var n,i,o,r;return i=function(t){return parseFloat(t.style.width.replace("%",""))},r=function(t,e){return e=e.toFixed(2),t.style.width=""+e+"%"},o=function(t){return 0===t.type.indexOf("touch")?(t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]).pageX:t.pageX},n=function(){function n(n,i){this.pointerdown=__bind(this.pointerdown,this),this.constrainWidth=__bind(this.constrainWidth,this),this.options=t.extend({},this.defaults,i),this.$table=n,this.setHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),t(e).on("resize.rc",function(t){return function(){return t.syncHandleWidths()}}(this)),this.options.start&&this.$table.bind("column:resize:start.rc",this.options.start),this.options.resize&&this.$table.bind("column:resize.rc",this.options.resize),this.options.stop&&this.$table.bind("column:resize:stop.rc",this.options.stop)}return n.prototype.defaults={selector:"tr th:visible",store:e.store,syncHandlers:!0,resizeFromBody:!0,maxWidth:null,minWidth:null},n.prototype.triggerEvent=function(e,n,i){var o;return o=t.Event(e),o.originalEvent=t.extend({},i),this.$table.trigger(o,[this].concat(n||[]))},n.prototype.getColumnId=function(t){return this.$table.data("resizable-columns-id")+"-"+t.data("resizable-column-id")},n.prototype.setHeaders=function(){return this.$tableHeaders=this.$table.find(this.options.selector),this.assignPercentageWidths(),this.createHandles()},n.prototype.destroy=function(){return this.$handleContainer.remove(),this.$table.removeData("resizableColumns"),this.$table.add(e).off(".rc")},n.prototype.assignPercentageWidths=function(){return this.$tableHeaders.each(function(e){return function(n,i){var o;return o=t(i),r(o[0],o.outerWidth()/e.$table.width()*100)}}(this))},n.prototype.createHandles=function(){var e;return null!=(e=this.$handleContainer)&&e.remove(),this.$table.before(this.$handleContainer=t("<div class='rc-handle-container' />")),this.$tableHeaders.each(function(e){return function(n,i){var o;return 0!==e.$tableHeaders.eq(n+1).length&&null==e.$tableHeaders.eq(n).attr("data-noresize")&&null==e.$tableHeaders.eq(n+1).attr("data-noresize")?(o=t("<div class='rc-handle' />"),o.data("th",t(i)),o.appendTo(e.$handleContainer)):void 0}}(this)),this.$handleContainer.on("mousedown touchstart",".rc-handle",this.pointerdown)},n.prototype.syncHandleWidths=function(){return this.$handleContainer.width(this.$table.width()).find(".rc-handle").each(function(e){return function(n,i){var o;return o=t(i),o.css({left:o.data("th").outerWidth()+(o.data("th").offset().left-e.$handleContainer.offset().left),height:e.options.resizeFromBody?e.$table.height():e.$table.find("thead").height()})}}(this))},n.prototype.saveColumnWidths=function(){return this.$tableHeaders.each(function(e){return function(n,o){var r;return r=t(o),null==r.attr("data-noresize")&&null!=e.options.store?e.options.store.set(e.getColumnId(r),i(r[0])):void 0}}(this))},n.prototype.restoreColumnWidths=function(){return this.$tableHeaders.each(function(e){return function(n,i){var o,s;return o=t(i),null!=e.options.store&&(s=e.options.store.get(e.getColumnId(o)))?r(o[0],s):void 0}}(this))},n.prototype.totalColumnWidths=function(){var e;return e=0,this.$tableHeaders.each(function(){return function(n,i){return e+=parseFloat(t(i)[0].style.width.replace("%",""))}}(this)),e},n.prototype.constrainWidth=function(t){return null!=this.options.minWidth&&(t=Math.max(this.options.minWidth,t)),null!=this.options.maxWidth&&(t=Math.min(this.options.maxWidth,t)),t},n.prototype.pointerdown=function(e){var n,s,a,l,c,u,h;return e.preventDefault(),a=t(e.currentTarget.ownerDocument),u=o(e),n=t(e.currentTarget),s=n.data("th"),l=this.$tableHeaders.eq(this.$tableHeaders.index(s)+1),h={left:i(s[0]),right:i(l[0])},c={left:h.left,right:h.right},this.$handleContainer.add(this.$table).addClass("rc-table-resizing"),s.add(l).add(n).addClass("rc-column-resizing"),this.triggerEvent("column:resize:start",[s,l,c.left,c.right],e),a.on("mousemove.rc touchmove.rc",function(t){return function(e){var n;return n=(o(e)-u)/t.$table.width()*100,r(s[0],c.left=t.constrainWidth(h.left+n)),r(l[0],c.right=t.constrainWidth(h.right-n)),null!=t.options.syncHandlers&&t.syncHandleWidths(),t.triggerEvent("column:resize",[s,l,c.left,c.right],e)}}(this)),a.one("mouseup touchend",function(t){return function(){return a.off("mousemove.rc touchmove.rc"),t.$handleContainer.add(t.$table).removeClass("rc-table-resizing"),s.add(l).add(n).removeClass("rc-column-resizing"),t.syncHandleWidths(),t.saveColumnWidths(),t.triggerEvent("column:resize:stop",[s,l,c.left,c.right],e)}}(this))},n}(),t.fn.extend({resizableColumns:function(){var e,i;return i=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],this.each(function(){var o,r;return o=t(this),r=o.data("resizableColumns"),r||o.data("resizableColumns",r=new n(o,i)),"string"==typeof i?r[i].apply(r,e):void 0})}})}(window.jQuery,window),define("resizablecolumns",["jquery"],function(){}),!function(t,e){"use strict";"function"==typeof define&&define.amd?define("bootbox",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.bootbox=e(t.jQuery)}(this,function e(t,n){"use strict";function i(t){var e=m[f.locale];return e?e[t]:m.en[t]}function o(e,n,i){e.stopPropagation(),e.preventDefault();var o=t.isFunction(i)&&i(e)===!1;o||n.modal("hide")}function r(t){var e,n=0;for(e in t)n++;return n}function s(e,n){var i=0;t.each(e,function(t,e){n(t,e,i++)})}function a(e){var n,i;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},f,e),e.buttons||(e.buttons={}),e.backdrop=e.backdrop?"static":!1,n=e.buttons,i=r(n),s(n,function(e,o,r){if(t.isFunction(o)&&(o=n[e]={callback:o}),"object"!==t.type(o))throw new Error("button with key "+e+" must be an object");o.label||(o.label=e),o.className||(o.className=2>=i&&r===i-1?"btn-primary":"btn-default")}),e}function l(t,e){var n=t.length,i={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof t[0]?(i[e[0]]=t[0],i[e[1]]=t[1]):i=t[0],i}function c(e,n,i){return t.extend(!0,{},e,l(n,i))}function u(t,e,n,i){var o={className:"bootbox-"+t,buttons:h.apply(null,e)};return d(c(o,i,n),e)}function h(){for(var t={},e=0,n=arguments.length;n>e;e++){var o=arguments[e],r=o.toLowerCase(),s=o.toUpperCase();t[r]={label:i(s)}}return t}function d(t,e){var i={};return s(e,function(t,e){i[e]=!0}),s(t.buttons,function(t){if(i[t]===n)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},g={};g.alert=function(){var e;if(e=u("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback():!0},g.dialog(e)},g.confirm=function(){var e;if(e=u("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback(!1)},e.buttons.confirm.callback=function(){return e.callback(!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return g.dialog(e)},g.prompt=function(){var e,i,o,r,a,l,u;if(r=t(p.form),i={className:"bootbox-prompt",buttons:h("cancel","confirm"),value:"",inputType:"text"},e=d(c(i,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===n?!0:e.show,e.message=r,e.buttons.cancel.callback=e.onEscape=function(){return e.callback(null)},e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":n=a.val();break;case"checkbox":var i=a.find("input:checked");n=[],s(i,function(e,i){n.push(t(i).val())})}return e.callback(n)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!p.inputs[e.inputType])throw new Error("invalid prompt type");switch(a=t(p.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":a.val(e.value);break;case"select":var f={};if(u=e.inputOptions||[],!u.length)throw new Error("prompt with select requires options");s(u,function(e,i){var o=a;if(i.value===n||i.text===n)throw new Error("given options in wrong format");i.group&&(f[i.group]||(f[i.group]=t("<optgroup/>").attr("label",i.group)),o=f[i.group]),o.append("<option value='"+i.value+"'>"+i.text+"</option>")}),s(f,function(t,e){a.append(e)}),a.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];if(u=e.inputOptions||[],!u.length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");a=t("<div/>"),s(u,function(n,i){var o=t(p.inputs[e.inputType]);o.find("input").attr("value",i.value),o.find("label").append(i.text),s(m,function(t,e){e===i.value&&o.find("input").prop("checked",!0)}),a.append(o)})}return e.placeholder&&a.attr("placeholder",e.placeholder),e.pattern&&a.attr("pattern",e.pattern),r.append(a),r.on("submit",function(t){t.preventDefault(),t.stopPropagation(),o.find(".btn-primary").click()}),o=g.dialog(e),o.off("shown.bs.modal"),o.on("shown.bs.modal",function(){a.focus()}),l===!0&&o.modal("show"),o},g.dialog=function(e){e=a(e);var n=t(p.dialog),i=n.find(".modal-dialog"),r=n.find(".modal-body"),l=e.buttons,c="",u={onEscape:e.onEscape};if(s(l,function(t,e){c+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",u[t]=e.callback}),r.find(".bootbox-body").html(e.message),e.animate===!0&&n.addClass("fade"),e.className&&n.addClass(e.className),"large"===e.size&&i.addClass("modal-lg"),"small"===e.size&&i.addClass("modal-sm"),e.title&&r.before(p.header),e.closeButton){var h=t(p.closeButton);e.title?n.find(".modal-header").prepend(h):h.css("margin-top","-10px").prependTo(r)}return e.title&&n.find(".modal-title").html(e.title),c.length&&(r.after(p.footer),n.find(".modal-footer").html(c)),n.on("hidden.bs.modal",function(t){t.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),n.on("escape.close.bb",function(t){u.onEscape&&o(t,n,u.onEscape)}),n.on("click",".modal-footer button",function(e){var i=t(this).data("bb-handler");o(e,n,u[i])}),n.on("click",".bootbox-close-button",function(t){o(t,n,u.onEscape)}),n.on("keyup",function(t){27===t.which&&n.trigger("escape.close.bb")}),t(e.container).append(n),n.modal({backdrop:e.backdrop,keyboard:!1,show:!1}),e.show&&n.modal("show"),n},g.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(f,e)},g.hideAll=function(){return t(".bootbox").modal("hide"),g};var m={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"ZruÅ¡it",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"ÎÎ½ÏÎ¬Î¾ÎµÎ¹",CANCEL:"ÎÎºÏÏÏÏÎ·",CONFIRM:"ÎÏÎ¹Î²ÎµÎ²Î±Î¯ÏÏÎ·"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"×××©××¨",CANCEL:"×××××",CONFIRM:"×××©××¨"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"ã­ã£ã³ã»ã«",CONFIRM:"ç¢ºèª"},lt:{OK:"Gerai",CANCEL:"AtÅ¡aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"ApstiprinÄt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"PotwierdÅº"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"ÐÑÐ¼ÐµÐ½Ð°",CONFIRM:"ÐÑÐ¸Ð¼ÐµÐ½Ð¸ÑÑ"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"Ä°ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"åæ¶",CONFIRM:"ç¡®è®¤"},zh_TW:{OK:"OK",CANCEL:"åæ¶",CONFIRM:"ç¢ºèª"}};return g.init=function(n){return e(n||t)},g}),function(t){function e(t,e){return function(n){return l(t.call(this,n),e)}}function n(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function i(){}function o(t){_(t),s(this,t)}function r(t){var e=f(t),n=e.year||0,i=e.month||0,o=e.week||0,r=e.day||0,s=e.hour||0,a=e.minute||0,l=e.second||0,c=e.millisecond||0;this._input=t,this._milliseconds=+c+1e3*l+6e4*a+36e5*s,this._days=+r+7*o,
this._months=+i+12*n,this._data={},this._bubble()}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function c(t,e,n,i){var o,r,s=e._milliseconds,a=e._days,l=e._months;s&&t._d.setTime(+t._d+s*n),(a||l)&&(o=t.minute(),r=t.hour()),a&&t.date(t.date()+a*n),l&&t.month(t.month()+l*n),s&&!i&&et.updateOffset(t),(a||l)&&(t.minute(o),t.hour(r))}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function d(t,e,n){var i,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(i=0;o>i;i++)(n&&t[i]!==e[i]||!n&&m(t[i])!==m(e[i]))&&s++;return s+r}function p(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Nt[t]||zt[e]||e}return t}function f(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=p(n),e&&(i[e]=t[n]));return i}function g(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}et[e]=function(o,r){var s,a,l=et.fn._lang[e],c=[];if("number"==typeof o&&(r=o,o=t),a=function(t){var e=et().utc().set(i,t);return l.call(et.fn._lang,e,o||"")},null!=r)return a(r);for(s=0;n>s;s++)c.push(a(s));return c}}function m(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function v(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function y(t){return b(t)?366:365}function b(t){return 0===t%4&&0!==t%100||0===t%400}function _(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[st]<0||t._a[st]>11?st:t._a[at]<1||t._a[at]>v(t._a[rt],t._a[st])?at:t._a[lt]<0||t._a[lt]>23?lt:t._a[ct]<0||t._a[ct]>59?ct:t._a[ut]<0||t._a[ut]>59?ut:t._a[ht]<0||t._a[ht]>999?ht:-1,t._pf._overflowDayOfYear&&(rt>e||e>at)&&(e=at),t._pf.overflow=e)}function w(t){t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function x(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function C(t){return t?t.toLowerCase().replace("_","-"):t}function k(t,e){return e.abbr=t,dt[t]||(dt[t]=new i),dt[t].set(e),dt[t]}function S(t){delete dt[t]}function T(t){var e,n,i,o,r=0,s=function(t){if(!dt[t]&&pt)try{require("./lang/"+t)}catch(e){}return dt[t]};if(!t)return et.fn._lang;if(!u(t)){if(n=s(t))return n;t=[t]}for(;r<t.length;){for(o=C(t[r]).split("-"),e=o.length,i=C(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=s(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&d(o,i,!0)>=e-1)break;e--}r++}return et.fn._lang}function E(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function M(t){var e,n,i=t.match(vt);for(e=0,n=i.length;n>e;e++)i[e]=Kt[i[e]]?Kt[i[e]]:E(i[e]);return function(o){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(o,t):i[e];return r}}function D(t,e){return t.isValid()?(e=P(e,t.lang()),Lt[e]||(Lt[e]=M(e)),Lt[e](t)):t.lang().invalidDate()}function P(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(yt.lastIndex=0;i>=0&&yt.test(t);)t=t.replace(yt,n),yt.lastIndex=0,i-=1;return t}function A(t,e){var n;switch(t){case"DDDD":return wt;case"YYYY":case"GGGG":case"gggg":return xt;case"YYYYY":case"GGGGG":case"ggggg":return Ct;case"S":case"SS":case"SSS":case"DDD":return _t;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return St;case"a":case"A":return T(e._l)._meridiemParse;case"X":return Mt;case"Z":case"ZZ":return Tt;case"T":return Et;case"SSSS":return kt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return bt;default:return n=new RegExp(H(L(t.replace("\\","")),"i"))}}function I(t){var e=(Tt.exec(t)||[])[0],n=(e+"").match(Rt)||["-",0,0],i=+(60*n[1])+m(n[2]);return"+"===n[0]?-i:i}function R(t,e,n){var i,o=n._a;switch(t){case"M":case"MM":null!=e&&(o[st]=m(e)-1);break;case"MMM":case"MMMM":i=T(n._l).monthsParse(e),null!=i?o[st]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[at]=m(e));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=m(e));break;case"YY":o[rt]=m(e)+(m(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":o[rt]=m(e);break;case"a":case"A":n._isPm=T(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":o[lt]=m(e);break;case"m":case"mm":o[ct]=m(e);break;case"s":case"ss":o[ut]=m(e);break;case"S":case"SS":case"SSS":case"SSSS":o[ht]=m(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=I(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function O(t){var e,n,i,o,r,s,a,l,c,u,h=[];if(!t._d){for(i=N(t),t._w&&null==t._a[at]&&null==t._a[st]&&(r=function(e){return e?e.length<3?parseInt(e,10)>68?"19"+e:"20"+e:e:null==t._a[rt]?et().weekYear():t._a[rt]},s=t._w,null!=s.GG||null!=s.W||null!=s.E?a=Y(r(s.GG),s.W||1,s.E,4,1):(l=T(t._l),c=null!=s.d?V(s.d,l):null!=s.e?parseInt(s.e,10)+l._week.dow:0,u=parseInt(s.w,10)||1,null!=s.d&&c<l._week.dow&&u++,a=Y(r(s.gg),u,c,l._week.doy,l._week.dow)),t._a[rt]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(o=null==t._a[rt]?i[rt]:t._a[rt],t._dayOfYear>y(o)&&(t._pf._overflowDayOfYear=!0),n=j(o,0,t._dayOfYear),t._a[st]=n.getUTCMonth(),t._a[at]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=h[e]=i[e];for(;7>e;e++)t._a[e]=h[e]=null==t._a[e]?2===e?1:0:t._a[e];h[lt]+=m((t._tzm||0)/60),h[ct]+=m((t._tzm||0)%60),t._d=(t._useUTC?j:q).apply(null,h)}}function F(t){var e;t._d||(e=f(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],O(t))}function N(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function z(t){t._a=[],t._pf.empty=!0;var e,n,i,o,r,s=T(t._l),a=""+t._i,l=a.length,c=0;for(i=P(t._f,s).match(vt)||[],e=0;e<i.length;e++)o=i[e],n=(A(o,t).exec(a)||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&t._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),c+=n.length),Kt[o]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(o),R(o,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-c,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[lt]<12&&(t._a[lt]+=12),t._isPm===!1&&12===t._a[lt]&&(t._a[lt]=0),O(t),_(t)}function L(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,o){return e||n||i||o})}function H(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(t){var e,n,i,o,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)r=0,e=s({},t),w(e),e._f=t._f[o],z(e),x(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==i||i>r)&&(i=r,n=e));s(t,n||e)}function K(t){var e,n=t._i,i=Dt.exec(n);if(i){for(t._pf.iso=!0,e=4;e>0;e--)if(i[e]){t._f=At[e-1]+(i[6]||" ");break}for(e=0;4>e;e++)if(It[e][1].exec(n)){t._f+=It[e][0];break}Tt.exec(n)&&(t._f+="Z"),z(t)}else t._d=new Date(n)}function B(e){var n=e._i,i=ft.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?K(e):u(n)?(e._a=n.slice(0),O(e)):h(n)?e._d=new Date(+n):"object"==typeof n?F(e):e._d=new Date(n)}function q(t,e,n,i,o,r,s){var a=new Date(t,e,n,i,o,r,s);return 1970>t&&a.setFullYear(t),a}function j(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function V(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function W(t,e,n,i,o){return o.relativeTime(e||1,!!n,t,i)}function U(t,e,n){var i=ot(Math.abs(t)/1e3),o=ot(i/60),r=ot(o/60),s=ot(r/24),a=ot(s/365),l=45>i&&["s",i]||1===o&&["m"]||45>o&&["mm",o]||1===r&&["h"]||22>r&&["hh",r]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",ot(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=n,W.apply({},l)}function G(t,e,n){var i,o=n-e,r=n-t.day();return r>o&&(r-=7),o-7>r&&(r+=7),i=et(t).add("d",r),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function Y(t,e,n,i,o){var r,s,a=new Date(Date.UTC(t,0)).getUTCDay();return n=null!=n?n:o,r=o-a+(a>i?7:0),s=7*(e-1)+(n-o)+r+1,{year:s>0?t:t-1,dayOfYear:s>0?s:y(t-1)+s}}function X(t){var e=t._i,n=t._f;return"undefined"==typeof t._pf&&w(t),null===e?et.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=T().preparse(e)),et.isMoment(e)?(t=s({},e),t._d=new Date(+e._d)):n?u(n)?$(t):z(t):B(t),new o(t))}function Q(t,e){et.fn[t]=et.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),et.updateOffset(this),this):this._d["get"+n+e]()}}function J(t){et.duration.fn[t]=function(){return this._data[t]}}function Z(t,e){et.duration.fn["as"+t]=function(){return+this/e}}function tt(t){var e=!1,n=et;"undefined"==typeof ender&&(this.moment=t?function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)}:et)}for(var et,nt,it="2.4.0",ot=Math.round,rt=0,st=1,at=2,lt=3,ct=4,ut=5,ht=6,dt={},pt="undefined"!=typeof module&&module.exports,ft=/^\/?Date\((\-?\d+)/i,gt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,mt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,yt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,bt=/\d\d?/,_t=/\d{1,3}/,wt=/\d{3}/,xt=/\d{1,4}/,Ct=/[+\-]?\d{1,6}/,kt=/\d+/,St=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Tt=/Z|[\+\-]\d\d:?\d\d/i,Et=/T/i,Mt=/[\+\-]?\d+(\.\d{1,3})?/,Dt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Pt="YYYY-MM-DDTHH:mm:ssZ",At=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],It=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Rt=/([\+\-]|\d\d)/gi,Ot="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ft={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Nt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},zt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Lt={},Ht="DDD w W M D d".split(" "),$t="M D H h m s w W".split(" "),Kt={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return m(this.milliseconds()/100)},SS:function(){return l(m(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(m(t/60),2)+":"+l(m(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(m(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Bt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Ht.length;)nt=Ht.pop(),Kt[nt+"o"]=n(Kt[nt],nt);for(;$t.length;)nt=$t.pop(),Kt[nt+nt]=e(Kt[nt],2);for(Kt.DDDD=e(Kt.DDD,3),s(i.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=et.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=et([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var o=this._relativeTime[n];return"function"==typeof o?o(t,e,n,i):o.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return G(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),et=function(e,n,i,o){return"boolean"==typeof i&&(o=i,i=t),X({_i:e,_f:n,_l:i,_strict:o,_isUTC:!1})},et.utc=function(e,n,i,o){var r;return"boolean"==typeof i&&(o=i,i=t),r=X({_useUTC:!0,_isUTC:!0,_l:i,_i:e,_f:n,_strict:o}).utc()},et.unix=function(t){return et(1e3*t)},et.duration=function(t,e){var n,i,o,s=et.isDuration(t),a="number"==typeof t,l=s?t._input:a?{}:t,c=null;return a?e?l[e]=t:l.milliseconds=t:(c=gt.exec(t))?(n="-"===c[1]?-1:1,l={y:0,d:m(c[at])*n,h:m(c[lt])*n,m:m(c[ct])*n,s:m(c[ut])*n,ms:m(c[ht])*n}):(c=mt.exec(t))&&(n="-"===c[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},l={y:o(c[2]),M:o(c[3]),d:o(c[4]),h:o(c[5]),m:o(c[6]),s:o(c[7]),w:o(c[8])}),i=new r(l),s&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},et.version=it,et.defaultFormat=Pt,et.updateOffset=function(){},et.lang=function(t,e){var n;return t?(e?k(C(t),e):null===e?(S(t),t="en"):dt[t]||T(t),n=et.duration.fn._lang=et.fn._lang=T(t),n._abbr):et.fn._lang._abbr},et.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),T(t)},et.isMoment=function(t){return t instanceof o},et.isDuration=function(t){return t instanceof r},nt=Bt.length-1;nt>=0;--nt)g(Bt[nt]);for(et.normalizeUnits=function(t){return p(t)},et.invalid=function(t){var e=et.utc(NaN);return null!=t?s(e._pf,t):e._pf.userInvalidated=!0,e},et.parseZone=function(t){return et(t).parseZone()},s(et.fn=o.prototype,{clone:function(){return et(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return D(et(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&d(this._a,(this._isUTC?et.utc(this._a):et(this._a)).toArray())>0:!1},parsingFlags:function(){return s({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=D(this,t||et.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?et.duration(+e,t):et.duration(t,e),c(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?et.duration(+e,t):et.duration(t,e),c(this,n,-1),this},diff:function(t,e,n){var i,o,r=this._isUTC?et(t).zone(this._offset||0):et(t).local(),s=6e4*(this.zone()-r.zone());return e=p(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),o+=(this-et(this).startOf("month")-(r-et(r).startOf("month")))/i,o-=6e4*(this.zone()-et(this).startOf("month").zone()-(r.zone()-et(r).startOf("month").zone()))/i,"year"===e&&(o/=12)):(i=this-r,o="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-s)/864e5:"week"===e?(i-s)/6048e5:i),n?o:a(o)},from:function(t,e){return et.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(et(),t)},calendar:function(){var t=this.diff(et().zone(this.zone()).startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=V(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),et.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=p(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=p(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+et(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+et(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+et(t).startOf(e)},min:function(t){return t=et.apply(null,arguments),this>t?this:t},max:function(t){return t=et.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=I(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&c(this,et.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?et(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(t){var e=ot((et(this).startOf("day")-et(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=G(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=G(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=G(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=p(t),this[t]()},set:function(t,e){return t=p(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=T(e),this)}}),nt=0;nt<Ot.length;nt++)Q(Ot[nt].toLowerCase().replace(/s$/,""),Ot[nt]);Q("year","FullYear"),et.fn.days=et.fn.day,et.fn.months=et.fn.month,et.fn.weeks=et.fn.week,et.fn.isoWeeks=et.fn.isoWeek,et.fn.toJSON=et.fn.toISOString,s(et.duration.fn=r.prototype,{_bubble:function(){var t,e,n,i,o=this._milliseconds,r=this._days,s=this._months,l=this._data;l.milliseconds=o%1e3,t=a(o/1e3),l.seconds=t%60,e=a(t/60),l.minutes=e%60,n=a(e/60),l.hours=n%24,r+=a(n/24),l.days=r%30,s+=a(r/30),l.months=s%12,i=a(s/12),l.years=i},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*m(this._months/12)},humanize:function(t){var e=+this,n=U(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=et.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=et.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=p(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=p(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:et.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),o=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||o||r?"T":"")+(i?i+"H":"")+(o?o+"M":"")+(r?r+"S":""):"P0D"}});for(nt in Ft)Ft.hasOwnProperty(nt)&&(Z(nt,Ft[nt]),J(nt.toLowerCase()));Z("Weeks",6048e5),et.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},et.lang("en",{ordinal:function(t){var e=t%10,n=1===m(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),pt?(module.exports=et,tt(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(e,n,i){return i.config().noGlobal!==!0&&tt(i.config().noGlobal===t),et}):tt()}.call(this),define("plugins/content-creator-pluginloader",["underscore","jquery","jqueryui","jqueryresize","underscorestring","kinetic","plupload","kineticresize","backbone","babysitter","marionette","mustache","syphon","text","jqueryvalidate","sidr","bootstrap","checkbox","json2","imageareaselect","imageedit","svgpainter","bootstrapslider","spin","jqueryspin","jquerycolor","jqueryknob","select2","tagsinput","screwbuttons","panzer","panzerlist","resizablecolumns","bootbox","moment"],function(){});var indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("config/jquery",["jquery","underscore"],function(t,e){var n;return t(document).on("click",".grid .tools .collapse, .grid .tools .expand, .grid-body-toggle",function(e){var n,i;return n=t(e.target).parents(".grid").children(".grid-body"),n.slideToggle(200),i=t(e.target).parents(".grid").find(".tools a"),t(i).hasClass("collapse")?t(i).removeClass("collapse").addClass("expand"):t(i).removeClass("expand").addClass("collapse")}),t(document).on("click",".goto-prev-page",function(){return window.history.back()}),t.fn.isEmptyColumn=function(t){return null==t&&(t={}),0===this.children(".element-wrapper").length},t.fn.canBeDeleted=function(){var n,i;return n=this.children(".column"),i=!0,e.each(n,function(e){return function(e,n){return t(e).isEmptyColumn()?void 0:i=!1}}(this)),i},t.showHeaderAndLeftNav=function(){return e.isEmpty(App.headerRegion.$el)&&App.execute("show:headerapp",{region:App.headerRegion}),e.isEmpty(App.leftNavRegion.$el)&&App.execute("show:leftnavapp",{region:App.leftNavRegion}),t(".page-content").removeClass("expand-page")},t.fn.removeAllAttr=function(){var n;return n=["class","tabindex","contenteditable","id","spellcheck","role","aria-label","title","aria-describedby","style"],e.each(this,function(i){return e.each(n,function(e){return t(i).removeAttr(e)})})},t.fn.center=function(e){return e=e?this.parent():window,this.css({position:"fixed",top:(t(e).height()-this.outerHeight())/2+t(e).scrollTop()+"px",left:(t(e).width()-this.outerWidth())/2+t(e).scrollLeft()+"px"}),t(window).on("scroll",function(n){return function(){return n.css({top:(t(e).height()-n.outerHeight())/2+t(e).scrollTop()+"px"})}}(this)),this},t.timeMinSecs=function(t){var e,n,i,o,r;return n=0,r=t,i=parseInt(t/60),i>59&&(n=parseInt(i/60),i=parseInt(i%60)),o=parseInt(r%60),e="",n>0&&(e=n+"h "),e+=i+"m "+o+"s"},t(document).on("keyup",".autogrow",function(e){return function(e){var n;return n=t(e.target),t(n).prop("clientHeight")<t(n).prop("scrollHeight")&&t(n).css({height:t(n).prop("scrollHeight")+"px"}),t(n).prop("clientHeight")<t(n).prop("scrollHeight")?t(n).css({height:2*t(n).prop("scrollHeight")-t(n).prop("clientHeight")+"px"}):void 0}}(this)),t.fn.selectSelectableElements=function(e){return t(".ui-selected",this).not(e).removeClass("ui-selected"),t(e).not(".ui-selected").addClass("ui-selected")},n=e.debounce(function(){var e,n;return e=t(window).height(),n=e-40,t(".aj-upper-content").css("min-height",n),t(".aj-upper-content").children().css("min-height",n)},30),t(document).ready(function(){return n()}),t(window).resize(n),t.toggleCheckAll=function(e,n){var i,o,r,s,a,l;if(null==n&&(n=[]),e.find("#check_all").is(":checked")){for(o=e.find(".tab_checkbox"),l=[],r=0,s=o.length;s>r;r++)i=o[r],a=parseInt(i.value),indexOf.call(n,a)<0?l.push(t(i).trigger("click").prop("checked",!0)):l.push(void 0);return l}return e.find(".tab_checkbox").removeAttr("checked")},t.getCheckedItems=function(n){var i;return i=e.chain(n.find(".tab_checkbox")).map(function(e){return t(e).is(":checked")?t(e).val():void 0}).compact().value()},t.getAllItems=function(n){var i;return i=e.chain(n.find(".tab_checkbox")).map(function(e){return t(e).val()}).compact().value()},t.allowRoute=function(t){var e;if(e=App.request("get:user:model"),"textbooks"===t||"content-pieces"===t||"add-module"===t||"edit-module"===t||"view-module"===t||"module-list"===t||"dummy-module"===t||"view-quiz"===t||"create-quiz"===t||"edit-quiz"===t||"quiz-list"===t||"dummy-quiz"===t||"quiz-report"===t||"dashboard"===t||"users"===t)return e.get("ID")?!0:(App.navigate("login",!0),!1);switch(t){case"login":if(!e.get("ID"))return!0;break;case"admin/view-all-modules":if(App.request("current:user:can","administrator")||App.request("current:user:can","school-admin"))return!0}}}),define("config/jquery-validate",["jquery","jqueryvalidate"],function(t){return t.validator.setDefaults({errorElement:"span",errorClass:"error",focusInvalid:!1,ignore:[],errorPlacement:function(e,n){var i,o;return t(n).prev(".select2-container").find(".select2-choice").addClass("error"),i=t(n).parent(".input-with-icon").children("i"),o=t(n).parent(".input-with-icon"),i.removeClass("icon-ok").addClass("icon-exclamation"),o.removeClass("success-control").addClass("error-control")},success:function(e,n){var i,o;return t(n).prev(".select2-container").find(".select2-choice").removeClass("error"),i=t(n).parent(".input-with-icon").children("i"),o=t(n).parent(".input-with-icon"),i.removeClass("icon-exclamation").addClass("icon-ok"),o.removeClass("error-control").addClass("success-control")}})});var slice=[].slice;define("config/underscore",["underscore","underscorestring"],function(t){return t.templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g},t.mixin(t.str.exports()),t.mixin({logAppMsg:function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],t.each(arguments,function(t,e){return console.log(t)})},logAppErr:function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],t.each(arguments,function(t,e){return console.log(t)})},idOrder:function(e){var n;return n=[],t.each(e,function(t,e){var i;return i=t.split("-"),n.push(parseInt(i[1]))}),n},stripslashes:function(t){return(t+"").replace(/\\(.?)/g,function(t,e){switch(e){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return e}})},convertHex:function(t,e){var n,i,o,r;return null==e&&(e=1),t=t.replace("#",""),o=parseInt(t.substring(0,2),16),i=parseInt(t.substring(2,4),16),n=parseInt(t.substring(4,6),16),r="rgba("+o+","+i+","+n+","+e+")"},getOrdinal:function(e){var n,i;return parseFloat(e)!==parseInt(e)||t.isNaN(e)?e:(n=["th","st","nd","rd"],i=e%100,e+(n[(i-20)%10]||n[i]||n[0]))}})}),define("config/backbone",["backbone"],function(t){var e;return _.extend(t.Model.prototype,{sync:function(e,n,i){var o,r,s,a,l,c,u,h;if(!this.name)throw new Error("'name' property not set for the model");switch(l={type:"POST",dataType:"json",data:{}},l.url=AJAXURL,o=e+"-"+this.name,l.data.action=o,e){case"read":l.type="GET",s=n.idAttribute,l.data[s]=n.get(s);break;case"create":l.data=_.defaults(n.toJSON(),l.data);break;case"update":a=null!=(c=i.onlyChanged)?c:!1,a?n.hasChanged()&&(l.data.changes={},_.each(n.changed,function(t,e){return l.data.changes[t]=this.get(t)},this)):l.data=_.defaults(n.toJSON(),l.data);break;case"delete":r=null!=(u=i.allData)?u:!0,r?l.data=_.defaults(n.toJSON(),l.data):(s=n.idAttribute,l.data[s]=n.get(s))}return h=i.xhr=t.ajax(_.extend(l,i)),n.trigger("request",n,h,i),("read"===e||"create"===e)&&(n._fetch=h),h},parse:function(t){return"OK"===t.code?t.data:t}}),_.extend(t.Collection.prototype,{parse:function(t){return"OK"===t.code?t.data:t}}),e=t.sync,t.sync=function(t,n,i){var o;return null==i&&(i={}),o=e(t,n,i),(!n._fetch&&"read"===t||!n._fetch&&"create"===t)&&(n._fetch=o),o}}),define("text!config/marionette/templates/modal.html",[],function(){return'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" data-dismiss="modal" aria-hidden="true" class="close">&times;</button>\n      <h4 class="modal-title">{{&modal_title}}</h4>\n    </div>\n    <div class="modal-body"></div>\n  </div>\n</div>';
});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("config/marionette/dialog-region",["marionette","mustache","text!config/marionette/templates/modal.html"],function(t,e,n){return t.Region.Dialog=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=n,i.prototype.open=function(t){var i,o;return i=t.dialogOptions?t.dialogOptions:{},i=this._getOptions(i),o=e.to_html(n,i),this.$el.html(o),this.$el.find(".modal-body").append(t.el),this.$el.addClass(i.modal_size+" modal")},i.prototype.onShow=function(t){return this.setupBindings(t),this.$el.modal(),this.$el.modal("show"),this.$el.on("hidden.bs.modal",function(t){return function(){return t.clearDialog()}}(this))},i.prototype.reloadCollection=function(t){return console.log("reloadCollection"),Backbone.trigger("reload:collection",this.collection)},i.prototype.closeDialog=function(){return this.$el.modal("hide")},i.prototype._getOptions=function(t){return _.defaults(t,{modal_title:"",modal_size:"wide-modal"})},i.prototype.setupBindings=function(t){return this.listenTo(t,"dialog:close",this.closeDialog),this.listenTo(t,"dialog:resize",this.resizeDialog)},i.prototype.clearDialog=function(){return this.close(),this.$el.empty()},i}(t.Region)});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("config/marionette/settings-region",["marionette"],function(t){return t.Region.Settings=function(t){function e(){return this._closeViewWhenClickedOutside=bind(this._closeViewWhenClickedOutside,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.onShow=function(t){return $(window).on("click",this._closeViewWhenClickedOutside),this.$el.draggable()},e.prototype.onClose=function(){return this.$el.draggable("destroy"),$(window).off("click",this._closeViewWhenClickedOutside)},e.prototype._closeViewWhenClickedOutside=function(){return this.close()},e}(t.Region)});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("config/marionette/formview",["marionette"],function(t){return t.FormView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="form",e.prototype.className="form-horizontal clearfix",e.prototype.onShow=function(){var t;return t=this._getOptions(),this.$el.validate(t)},e.prototype._getOptions=function(){return this.options||(this.options={}),_.defaults(this.options,{debug:!0,success:"success",ignore:".ignore",errorClass:"p-message",submitHandler:this.submitForm})},e.prototype.submitForm=function(t){throw new Error("Submit handler not defined")},e}(t.ItemView)});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("config/marionette/marionette",["marionette","mustache"],function(t,e){return _.extend(t.Application.prototype,{navigate:function(t,e){return null==e&&(e={}),Backbone.history.navigate(t,e)},getCurrentRoute:function(){var t;return t=Backbone.history.fragment,_.isEmpty(t)?null:t},startHistory:function(){return Backbone.history?Backbone.history.start():void 0},register:function(t,e){return null==this._registry&&(this._registry={}),this._registry[e]=t},unregister:function(t,e){return delete this._registry[e]},resetRegistry:function(){var t,e,n,i,o;i=this.getRegistrySize(),o=this._registry;for(e in o)t=o[e],t.region.close();return n="There were "+i+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(n,this._registry):console.log(n)},getRegistrySize:function(){return _.size(this._registry)},registerElement:function(t,e){return null==this._elementRegistry&&(this._elementRegistry={}),this._elementRegistry[e]=t},unregisterElement:function(t,e){return delete this._elementRegistry[e]},resetElementRegistry:function(){var t,e,n,i,o;i=this.getElementRegistrySize(),o=this._elementRegistry;for(e in o)t=o[e],t.layout.close();return n="There were "+i+" controllers in the registry, there are now "+this.getElementRegistrySize(),this.getElementRegistrySize()>0?console.warn(n,this._elementRegistry):console.log(n)},getElementRegistrySize:function(){return _.size(this._elementRegistry)},createEventObject:function(){return{vent:new Backbone.Wreqr.EventAggregator,command:new Backbone.Wreqr.Commands,reqres:new Backbone.Wreqr.RequestResponse}}}),_.extend(t.Region.prototype,{hide:function(){return this.$el.hide()},unhide:function(){return this.$el.show()}}),t.Renderer.render=function(t,n){return t||(t=""),"function"==typeof t&&(t=t()),e.to_html(t,n)},t.TemplateCache.prototype.loadTemplate=function(t){var e,n,i;if(i=t,!i||0===i.length)throw n="Could not find template: '"+t+"'",e=new Error(n),e.name="NoTemplateError",e;return i},t.FormView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="form",e.prototype.className="form-horizontal",e.prototype.onShow=function(){return this.$el.validate()},e}(t.ItemView)}),define("config/textbook-filters",["jquery","underscore"],function(t,e){return t.showTextbookFilters=function(t){var e,n,i;return null==t&&(t={}),n="",t.textbooks&&(i="",t.textbooks.each(function(t){return i+="<option value="+t.get("term_id")+">"+t.get("name")+"</option>"}),n+='<select class="textbook-filter select2-filters" id="textbooks-filter"> <option value="">All Textbooks</option>'+i+'</select> <select class="textbook-filter select2-filters" id="chapters-filter"> <option value="">All Chapters</option> </select>'),t.chapters&&(e="",t.chapters.each(function(t){return e+="<option value="+t.get("term_id")+">"+t.get("name")+"</option>"}),n+='<select class="textbook-filter select2-filters" id="chapters-filter"> <option value="">All Chapters</option>'+e+"</select>"),n+='<select class="textbook-filter select2-filters" id="sections-filter"> <option value="">All Sections</option> </select> <select class="textbook-filter select2-filters" id="subsections-filter"> <option value="">All Sub Sections</option> </select>'},t.populateTextbooks=function(t,n){var i,o;return n.find("#textbooks-filter, #chapters-filter,#sections-filter,#subsections-filter").html(""),o=n.find("#textbooks-filter"),i=n.find("#chapters-filter"),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0?(e.each(t,function(t){return function(t,e){return o.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),o.select2().select2("val",e.first(t).get("term_id"))):o.select2("data",null)},t.populateChapters=function(t,n,i){var o,r,s;return null==i&&(i=""),n.find("#chapters-filter,#sections-filter,#subsections-filter").html(""),o=n.find("#chapters-filter"),r=n.find("#textbooks-filter").val(),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0&&r?(o.select2("data",{text:"Select Chapter"}),o.append('<option value="">All Chapters</option>'),e.each(t,function(t){return function(t,e){return o.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),i?o.select2().select2("val",i):void 0):(s="All",o.select2("data",{text:s+" chapters"}),n.find("#sections-filter").select2("data",{text:s+" Sections"}),n.find("#subsections-filter").select2("data",{text:s+" Sub Sections"}))},t.populateSections=function(t,n,i){var o,r,s;return null==i&&(i=[]),n.find("#sections-filter,#subsections-filter").html(""),o=n.find("#sections-filter"),r=n.find("#chapters-filter").val(),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0&&r?(o.select2("data",{text:"Select Section"}),o.append('<option value="">All Sections</option>'),e.each(t,function(t){return function(t,e){return o.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),e.isArray(i)&&(i=e.flatten(e.compact(i))),e.isEmpty(i)?void 0:o.select2().select2("val",i)):(s="All",o.select2("data",{text:s+" Sections"}),n.find("#subsections-filter").select2("data",{text:s+" Sub Sections"}))},t.populateSubSections=function(t,n,i){var o,r,s;return null==i&&(i=[]),r=n.find("#subsections-filter"),r.html(""),o=n.find("#sections-filter").val(),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0&&o?(r.select2("data",{text:"Select Sub Section"}),r.append('<option value="">All Sections</option>'),e.each(t,function(t){return function(t,e){return r.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),e.isArray(i)&&(i=e.flatten(e.compact(i))),e.isEmpty(i)?void 0:r.select2().select2("val",i)):(s="All",r.select2("data",{text:s+" Sub Sections"}))},t.populateChaptersOrSections=function(t,n,i){return null==i&&(i=[]),n.html(""),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0?(e.each(t,function(t){return function(t,e){return n.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),e.isArray(i)&&(i=e.flatten(e.compact(i))),n.select2().select2("val",i)):void 0},t.filterTableByTextbooks=function(n,i){var o,r,s,a,l,c,u,h,d,p,f,g;return c=n.$el.find("select.textbook-filter"),l="teaching-modules"===i?App.request("get:content:modules:repository"):"student-training"===i?App.request("get:student:training:modules:repository"):"quiz"===i?App.request("get:quiz:repository"):App.request("get:content:pieces:repository"),u=e.map(c,function(t,e){var n;return n="",isNaN(t.value)||(n=t.value),n}),u=e.compact(u),g=t("#textbooks-filter").val(),f="string"==typeof g?!1:!0,s=n.$el.find("#content-type-filter").val(),r=n.$el.find("#content-status-filter").val(),o=n.$el.find("#content-post-status-filter").val(),"any"===o&&(o=""),p=n.$el.find("#quiz-type-filter").val(),a=parseInt(n.$el.find("#difficulty-level-filter").val()),s&&l.reset(l.where({content_type:s})),r&&l.reset(l.where({status:r})),o&&l.reset(l.where({post_status:o})),p&&l.reset(l.where({quiz_type:p})),a&&l.reset(l.where({difficulty_level:a})),d=l.models,h=e.size(u)>0?e.filter(d,function(t){return function(t){var n,i;return n="",i=e.flatten(t.get("term_ids")),f===!1?e.size(e.intersection(i,u))===e.size(u)&&(n=t):n=t,n}}(this)):d}}),define("config/content-creator-configloader",["config/jquery","config/jquery-validate","config/underscore","config/backbone","config/marionette/dialog-region","config/marionette/settings-region","config/marionette/formview","config/marionette/marionette","config/textbook-filters"],function(){}),define("app",["marionette"],function(t){return window.App=new t.Application,App.addRegions({leftNavRegion:"#left-nav-region",headerRegion:"#header-region",mainContentRegion:"#main-content-region",dialogRegion:t.Region.Dialog.extend({el:"#dialog-region"}),settingsRegion:t.Region.Settings.extend({el:"#settings-region"}),loginRegion:"#login-region",breadcrumbRegion:"#breadcrumb-region"}),App.rootRoute="",App.loginRoute="login",App.reqres.setHandler("default:region",function(){return App.mainContentRegion}),App.commands.setHandler("when:fetched",function(t,e){var n;return n=_.chain([t]).flatten().pluck("_fetch").value(),$.when.apply($,n).done(function(){return e()})}),App.commands.setHandler("register:instance",function(t,e){return App.register(t,e)}),App.commands.setHandler("unregister:instance",function(t,e){return App.unregister(t,e)}),App.on("initialize:after",function(t){return App.startHistory(),this.getCurrentRoute()?void 0:App.navigate(this.rootRoute,{trigger:!0})}),App.on("start",function(){var t;return console.log("start app Main"),t=$.get(AJAXURL+"?action=get-user-data",{},function(t){return function(t){var e,n;return t.success?(n=App.request("get:user:model"),n.set(t.data.data),e=App.request("get:current:school"),App.vent.trigger("show:content:builder"),App.loginRegion.close()):App.vent.trigger("show:login")}}(this),"json")}),App.vent.on("show:content:builder",function(){return App.execute("show:content:creator",{region:App.mainContentRegion}),App.execute("show:headerapp",{region:App.headerRegion}),App.execute("show:leftnavapp",{region:App.leftNavRegion}),App.execute("show:breadcrumbapp",{region:App.breadcrumbRegion})}),App.vent.on("show:login",function(){return window.location=SITEURL+"#login"}),App});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/user",["app","backbone"],function(t,e){return t.module("Entities.Users",function(t,e,n,i,o,r){var s,a,l;return t.UserModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.name="user",e.prototype.idAttribute="ID",e.prototype.defaults=function(){return{display_name:"",user_email:"",role:[],profile_pic:""}},e}(n.Model),l=new t.UserModel,"undefined"!=typeof USER&&null!==USER&&l.set(USER),a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.UserModel,n.prototype.comparator="display_name",n.prototype.url=function(){return AJAXURL+"?action=get-users"},n}(n.Collection),s={getUsers:function(t){var e;return null==t&&(t={}),e=new a,e.fetch({data:t}),e},newUser:function(){return new t.UserModel},getUserByID:function(e){var n;return n=new t.UserModel({ID:e}),n.fetch(),n},getStudentsByDivision:function(t){var e,n;return e={role:"student",division:t},n=new a,n.fetch({data:e}),n},getUserData:function(t){var e;return e=l.get("data"),console.log(e[t]),e[t]},current_user_can:function(t){var e;return e=l.get("allcaps"),e[t]?!0:!1},getDummyStudents:function(){var t,e;return e=new a,t=[{ID:2343424,display_name:"Dummy Student 1",user_email:"dummystudent1@mailinator.com"},{ID:2343434,display_name:"Dummy Student 2",user_email:"dummystudent2@mailinator.com"},{ID:23434234,display_name:"Dummy Student 3",user_email:"dummystudent3@mailinator.com"},{ID:2343423432,display_name:"Dummy Student 4",user_email:"dummystudent4@mailinator.com"},{ID:2343432342,display_name:"Dummy Student 5",user_email:"dummystudent5@mailinator.com"}],e.set(t),e}},e.reqres.setHandler("get:user:model",function(){return l}),e.reqres.setHandler("get:loggedin:user:id",function(){return parseInt(l.get("ID"))}),e.reqres.setHandler("get:user:collection",function(t){return s.getUsers(t)}),e.reqres.setHandler("get:students:by:division",function(t){return s.getStudentsByDivision(t)}),e.reqres.setHandler("get:user:data",function(t){return s.getUserData(t)}),e.reqres.setHandler("get:dummy:students",function(){return s.getDummyStudents()}),e.reqres.setHandler("get:user:by:id",function(t){return s.getUserByID(t)}),e.reqres.setHandler("current:user:can",function(t){return s.current_user_can(t)}),e.reqres.setHandler("new:user",function(){return s.newUser()})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/menu",["app","backbone"],function(t,e){return t.module("Entities.Menus",function(t,e,n,i,o,r){var s,a;return t.MenuItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.defaults={post_title:"",menu_item_link:"",menu_item_parent:0,order:0,submenu:[]},e.prototype.name="menu-item",e}(n.Model),t.MenuItemCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.MenuItemModel,n.prototype.comparator="order",n}(n.Collection),a=new t.MenuItemCollection,s={getMenus:function(t){return null==t&&(t={}),a.isEmpty()?(a.url=AJAXURL+"?action=get-menus",a.fetch({reset:!0,data:t}),a):a}},e.reqres.setHandler("get:site:menus",function(){return s.getMenus()})}),t.Entities.Menus}),define("entities/base-entities",["app","backbone"],function(t){return t.module("Entities",function(t,e,n,i,o,r){}),t.Entities});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/elementbox",["app","backbone"],function(t,e){return t.module("Entities.ElementBox",function(t,e,n,i,o,r){var s,a;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="element",e.prototype.name="elementbox",e}(n.Model),t.ElementCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ElementModel,n.prototype.url="",n}(n.Collection),a=new t.ElementCollection,a.add([{element:"Hotspot"},{element:"Row"}]),s={getElements:function(t){null==t&&(t={})},getElementSettingOptions:function(t){var e;return console.log(a.get(t)),e=a.get(t)}},e.reqres.setHandler("get:elementbox:elements",function(){return s.getElements()}),e.reqres.setHandler("get:element:settings:options",function(t){return s.getElementSettingOptions(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/element",["app","backbone"],function(t,e){return t.module("Entities.Elements",function(t,e,n,i,o,r){var s,a;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="meta_id",e.prototype.defaults=function(){return{style:"",draggable:!0}},e.prototype.name="element",e.prototype.setMultiplicationFactor=function(t){return t?this.get("marks_set")?void 0:this.set({multiplicationFactor:t,marks:parseFloat((parseFloat(this.get("marks"))*t).toFixed(1)),marks_set:!0}):this.set({multiplicationFactor:1})},e}(n.Model),t.ElementCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ElementModel,n}(n.Collection),a=new t.ElementCollection,s={createElement:function(e){var n,i,o;return null==e&&(e={}),null!=e.meta_id&&"Row"!==(i=e.element)&&"TeacherQuestion"!==i&&null!=a.get(e.meta_id)?n=a.get(e.meta_id):(n=new t.ElementModel,n.set(e)),"Row"!==(o=n.get("element"))&&"TeacherQuestion"!==o&&"Column"!==n.get("element")&&n.isNew()&&n.save(null,{wait:!0}),a.add(n),n}},e.reqres.setHandler("create:new:element",function(t){return s.createElement(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/media",["app","backbone"],function(t,e){return t.module("Entities.Media",function(t,e,n,i,o,r){var s;return t.MediaModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.name="media",e.prototype.getBestFit=function(t){var e,n,i;return n=this.get("sizes"),e=null,i=99999,r.each(n,function(n,o){var r;return r=n.width-t,r=0>r?-1*r:r,i>=r?(e={url:n.url,size:o},i=r):void 0}),r.isNull(e)&&(e=n.full),console.log(e),e},e}(n.Model),t.MediaCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.filters={order:"DESC",orderby:"date",paged:1,posts_per_page:40,searchStr:""},n.prototype.model=t.MediaModel,n.prototype.parse=function(t){return"OK"===t.code?t.data:t},n}(n.Collection),s={fetchMedia:function(e,n){var i;return null==e&&(e={}),i=new t.MediaCollection,i.url=AJAXURL+"?action=query_attachments",r.defaults(e,i.filters),i.filters=e,i.fetch({reset:n,data:e}),i},getMediaById:function(e){var n;return 0===parseInt(e)?s.getPlaceHolderMedia():(n=new t.MediaModel({id:e}),n.fetch(),n)},getEmptyMediaCollection:function(){var e;return e=new t.MediaCollection},getMediaCollectionById:function(e){var n;return null==e&&(e=[]),n=new t.MediaCollection,n.url=AJAXURL+"?action=get_media_by_ids",r.size(e)>0&&n.fetch({data:{ids:e,mediaType:"video"}}),n},getPlaceHolderMedia:function(){var e;return e=new t.MediaModel},createNewMedia:function(e){var n;return n=new t.MediaModel(e)}},e.reqres.setHandler("get:empty:media:collection",function(){return s.getEmptyMediaCollection()}),e.reqres.setHandler("fetch:media",function(t,e){return null==t&&(t={}),null==e&&(e=!1),s.fetchMedia(t,e)}),e.reqres.setHandler("get:media:by:id",function(t){return s.getMediaById(t)}),e.reqres.setHandler("get:media:collection:by:ids",function(t){return s.getMediaCollectionById(t)}),e.reqres.setHandler("new:media:added",function(t){return s.createNewMedia(t)}),e.commands.setHandler("new:media:added",function(t){return s.createNewMedia(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/hotspotelementbox",["app","backbone"],function(t,e){return t.module("Entities.HotspotElementBox",function(t,e,n,i,o,r){var s,a;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="element",e.prototype.name="hotspotelementbox",e}(n.Model),t.ElementCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ElementModel,n}(n.Collection),a=new t.ElementCollection,a.add([{element:"Hotspot-Circle",icon:"fa-circle-o"},{element:"Hotspot-Rectangle",icon:"fa-square-o"},{element:"Hotspot-Image",icon:"fa-camera"},{element:"Hotspot-Text",icon:"fa-font"}]),s={getElements:function(){return a}},e.reqres.setHandler("get:all:hotspot:elements",function(){return s.getElements()})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/hotspotelement",["app","backbone"],function(t,e){return t.module("Entities.HotspotElement",function(t,e,n){var i;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults=function(){return{family:"hotspot",toDelete:!1}},e}(n.Model),t.ElementCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ElementModel,n}(n.Collection),i={createHotspotElement:function(e){var n;return n=new t.ElementModel,n.set(e),n},createHotspotElementCollection:function(e){var n;return null==e&&(e={}),n=new t.ElementCollection,n.set(e),n}},e.reqres.setHandler("create:new:hotspot:element",function(t){return i.createHotspotElement(t)}),e.reqres.setHandler("create:new:hotspot:element:collection",function(t){var e;return e=void 0!==t?t:"",i.createHotspotElementCollection(e)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/questionelement",["app","backbone"],function(t,e){return t.module("Entities.QuestionElement",function(t,e,n){var i;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e}(n.Model),t.ElementCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ElementModel,n}(n.Collection),i={createQuestionElement:function(e){var n;return n=new t.ElementModel,n.set(e),n},createQuestionElementCollection:function(e){var n;return null==e&&(e={}),n=new t.ElementCollection,n.set(e),n}},e.reqres.setHandler("create:new:question:element",function(t){return i.createQuestionElement(t)}),e.reqres.setHandler("create:new:question:element:collection",function(t){var e;return null==t&&(t={}),e=t,i.createQuestionElementCollection(e)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/option",["app","backbone"],function(t,e){return t.module("Entities.Option",function(t,e,n,i,o,r){var s;return t.OptionModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="optionNo",e.prototype.defaults=function(){return{marks:0,text:""}},e.prototype.name="option-model",e}(n.Model),t.OptionCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.OptionModel,n}(n.Collection),s={createOption:function(e){var n;return n=new t.OptionModel,n.set(e),n},createOptionCollection:function(e){var n;return null==e&&(e={}),n=new t.OptionCollection,n.set(e),n}},e.reqres.setHandler("create:new:option",function(t){return s.createOption(t)}),e.reqres.setHandler("create:new:option:collection",function(t){return s.createOptionCollection(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/json",["app","backbone"],function(t,e){return t.module("Entities.BuilderJSON",function(t,e,n,i,o,r){var s,a;return a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="ID",e.prototype.defaults={post_status:"pending"},e.prototype.name="content-piece",e.prototype.layout="",e}(n.Model),s={getPageJSON:function(t){var e;return null==t&&(t=""),t?(e=new a({ID:parseInt(t)}),e.fetch()):e=new a,e}},e.reqres.setHandler("get:page:json",function(t){return s.getPageJSON(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/schools",["app","backbone"],function(t,e){return t.module("Entities.Schools",function(t,e,n,i,o,r){var s,a,l;return t.SchoolModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.name="schools",e.prototype.defaults=function(){return{school_name:"",school_logo:""}},e}(n.Model),a=new t.SchoolModel,t.SchoolCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.SchoolModel,n.prototype.comparator="id",n.prototype.url=function(){return AJAXURL+"?action=get-schools"},n}(n.Collection),l=new t.SchoolCollection,s={getSchools:function(t){return null==t&&(t={}),l.fetch({reset:!0,data:t}),l},getCurrentSchool:function(){return a=new t.SchoolModel,a.fetch(),a}},e.reqres.setHandler("get:all:schools",function(){return s.getSchools()}),e.reqres.setHandler("get:current:school",function(){return s.getCurrentSchool()}),e.reqres.setHandler("get:school:logo",function(){return s.getCurrentSchool()})}),t.Entities.Schools});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/breadcrumb",["app","backbone"],function(t,e){return t.module("Entities.Breadcrumb",function(t,e,n,i,o,r){var s;return t.BreadcrumbModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.name="breadcrumb",e.prototype.defaults=function(){return{items:[{label:"Dashboard",link:"javascript://"},{label:"Content Creator",link:"javascript://"},{label:"Textbooks",link:"javascript://",active:"active"}]}},e}(n.Model),window.breadcrumb=new t.BreadcrumbModel,s={updateBreadcrumbModel:function(t){return breadcrumb.set(t),e.execute("show:breadcrumbapp",{region:e.breadcrumbRegion})}},e.reqres.setHandler("get:breadcrumb:model",function(){return breadcrumb}),e.commands.setHandler("update:breadcrumb:model",function(t){return s.updateBreadcrumbModel(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("entities/content-pieces",["app","backbone","bootbox"],function(t,e,n){return t.module("Entities.ContentPiece",function(t,e,i,o,r,s){var a,l;return t.ItemModel=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.idAttribute="ID",i.prototype.defaults={post_title:"",post_author:"",post_author_name:"",post_modified:"",post_date:"",post_tags:"",order:""},i.prototype.name="content-piece",i.prototype.setMarks=function(t){return this.set({marks:t*this.get("marks")}),this.set({multiplicationFactor:t}),this},i.prototype.duplicate=function(){return n.confirm("Are you sure you want to clone this content piece ?",function(t){return function(n){var i;return n?(t.cloneModel=e.request("new:content:piece"),i=t.toJSON(),t.clonedData=s.omit(i,["ID","guid","last_modified_by","post_author","post_author_name","post_date","post_date_gmt","published_by"]),t.clonedData.post_status="pending",t.clonedData.clone_id=t.id,e.execute("when:fetched",t.cloneModel,function(){return t.cloneModel.save(t.clonedData,{wait:!0,success:function(t){return document.location=SITEURL+("/content-creator/#edit-content/"+t.id)},error:function(t){return console.log(t)}})})):void 0}}(this))},i}(i.Model),t.ItemCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ItemModel,n.prototype.comparator="order",n.prototype.url=function(){return AJAXURL+"?action=get-content-pieces"},n}(i.Collection),l=new t.ItemCollection,t.GroupItemCollection=function(e){function n(){return this.addedPieces=bind(this.addedPieces,this),this.removedModel=bind(this.removedModel,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ItemModel,n.prototype.comparator="order",n.prototype.initialize=function(){return console.log("content piece "),this.on("remove",this.removedModel,this),this.on("add",this.addedPieces,this)},n.prototype.removedModel=function(t){return this.trigger("content:pieces:of:group:removed",t)},n.prototype.addedPieces=function(t){return this.trigger("content:pieces:of:group:added",t)},n}(i.Collection),a={getContentPieces:function(e){var n;return null==e&&(e={}),n=new t.ItemCollection,n.fetch({add:!0,remove:!1,data:e,type:"post",success:function(t){return e.search_str?void 0:l.reset(t.models)}}),n},getContentPiecesOfGroup:function(e){var n,i,o,r,s,a;if(r=new t.GroupItemCollection,i=e.get("content_pieces"))for(s=0,a=i.length;a>s;s++)n=i[s],o=new t.ItemModel({ID:n}),o.fetch(),r.add(o);return r},getContentPieceByID:function(e){var n;return n=l.get(e),n||(n=new t.ItemModel({ID:e}),n.fetch({success:function(t){return l.add(t)}})),n},getContentPiecesByIDs:function(e){var n,i,o,r,a;for(null==e&&(e=[]),n=new t.ItemCollection,i=0,r=e.length;r>i;i++)o=e[i],a=l.get(o),a&&(n.add(a),e=s.without(e,o));return s.size(e)>0&&n.fetch({add:!0,remove:!1,data:{ids:e}}),n},newContentPiece:function(){var e;return e=new t.ItemModel;
},emptyContentCollection:function(){var e;return e=new t.ItemCollection}},e.reqres.setHandler("get:content:pieces",function(t){return a.getContentPieces(t)}),e.reqres.setHandler("get:content:pieces:of:group",function(t){return a.getContentPiecesOfGroup(t)}),e.reqres.setHandler("get:content:piece:by:id",function(t){return a.getContentPieceByID(t)}),e.reqres.setHandler("get:content:pieces:by:ids",function(t){return a.getContentPiecesByIDs(t)}),e.reqres.setHandler("new:content:piece",function(){return a.newContentPiece()}),e.reqres.setHandler("empty:content:pieces:collection",function(){return a.emptyContentCollection()}),e.reqres.setHandler("get:content:pieces:repository",function(){return l.clone()})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-group",["app","backbone"],function(t,e){return t.module("Entities.ContentGroup",function(t,e,n,i,o,r){var s,a;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.defaults={name:"",description:[],created_on:"",created_by:"",last_modified_on:"",last_modified_by:"",published_on:"",published_by:"",post_status:"underreview",type:"teaching-module",total_minutes:0,duration:0,minshrs:"mins",term_ids:[],content_pieces:[],training_date:""},e.prototype.name="content-group",e}(n.Model),t.ItemCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ItemModel,n.prototype.url=function(){return AJAXURL+"?action=get-content-groups"},n.prototype.parse=function(t){return t.data.reverse()},n}(n.Collection),a=new t.ItemCollection,s={getContentGroups:function(e){var n;return null==e&&(e={}),n=new t.ItemCollection,n.fetch({add:!0,remove:!1,data:e,type:"post",success:function(t){return e.search_str?void 0:a.reset(t.models)}}),n},getContentGroupByID:function(e){var n;return"undefined"!=typeof contentGroupCollection&&null!==contentGroupCollection&&(n=contentGroupCollection.get(e)),n||(n=new t.ItemModel({id:e}),n.fetch()),n},saveContentGroupDetails:function(e){var n;return n=new t.ItemModel(e)},newContentGroup:function(){var e;return e=new t.ItemModel},scheduleContentGroup:function(t){var n;return n=e.request("save:question:response"),n.set(t),n.save()},getEmptyModulesCollection:function(){var e;return e=new t.ItemCollection},getDummyModules:function(e){var n;return n=new t.ItemModel,n.set({id:3423432,name:"Dummy Module",description:"Dummy Module Description",created_on:"",created_by:"",last_modified_on:"",last_modified_by:"",published_on:"",published_by:"",post_status:"",type:"teaching-module",total_minutes:0,duration:40,minshrs:"mins",term_ids:[],content_pieces:[e],training_date:""})}},e.reqres.setHandler("get:content:groups",function(t){return s.getContentGroups(t)}),e.reqres.setHandler("get:content:group:by:id",function(t){return s.getContentGroupByID(t)}),e.reqres.setHandler("save:content:group:details",function(t){return s.saveContentGroupDetails(t)}),e.reqres.setHandler("new:content:group",function(){return s.newContentGroup()}),e.reqres.setHandler("schedule:content:group",function(t){return s.scheduleContentGroup(t)}),e.reqres.setHandler("empty:content:modules:collection",function(){return s.getEmptyModulesCollection()}),e.reqres.setHandler("create:dummy:content:module",function(t){return s.getDummyModules(t)}),e.reqres.setHandler("get:content:modules:repository",function(){return a.clone()})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/textbooks",["app","backbone"],function(t,e){return t.module("Entities.Textbooks",function(t,e,n,i,o,r){var s;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="term_id",e.prototype.defaults={name:"",slug:"",description:"",parent:0,term_order:0,count:0,chapter_count:0},e.prototype.name="textbook",e.prototype.getClasses=function(){var t,e,n,i,o;if(n=[],e=this.get("classes"),r.isArray(e)){for(i=0,o=e.length;o>i;i++)t=e[i],n.push(CLASS_LABEL[t]);n.join()}return n},e}(n.Model),t.NameModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults={name:""},e.prototype.name="textbookName",e}(n.Model),t.ItemCollection=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,n),i.prototype.model=t.ItemModel,i.prototype.comparator="term_order",i.prototype.url=function(){return AJAXURL+"?action=get-textbooks"},i.prototype.parse=function(t){return this.total=t.count,t.data},i.prototype.fetchChaptersOrSections=function(t){var n;return n=e.request("get:chapters",{parent:t})},i}(n.Collection),t.NamesCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.NameModel,n.prototype.comparator="term_order",n.prototype.url=function(){return AJAXURL+"?action=get-textbook-names"},n.prototype.getTextbookName=function(t){var e,n;return n=this.get(t.textbook),null!=n?e=n.get("name"):void 0},n.prototype.getChapterName=function(t){var e,n;return e=this.get(t.chapter),null!=e?n=e.get("name"):void 0},n.prototype.getSectionsNames=function(t){var e,n,i,o,s,a,l,c;if(l=r.flatten(t.sections),a="",s=[],l){for(e=0,n=l.length;n>e;e++)i=l[e],c=this.get(i),null!=c&&(o=c.get("name")),s.push(o);return a=s.join()}},n.prototype.getSubSectionsNames=function(t){var e,n,i,o,s,a,l;if(l=r.flatten(t.subsections),o="",a=[],l){for(e=0,n=l.length;n>e;e++)i=l[e],s=this.get(i),null!=s&&a.push(s.get("name"));return o=a.join()}},n}(n.Collection),s={getTextbooks:function(e){var n;return null==e&&(e={}),n=new t.ItemCollection,n.fetch({reset:!0,data:e}),n},getTextBookByID:function(e){var n;return"undefined"!=typeof textbookCollection&&null!==textbookCollection&&(n=textbookCollection.get(e)),n||(n=new t.ItemModel({term_id:e}),n.fetch()),n},getTextBookNameByID:function(e){var n,i;return"undefined"!=typeof textbookCollection&&null!==textbookCollection&&(n=textbookCollection.get(e)),n||(n=new t.ItemModel({term_id:e}),n.fetch()),i=n.get("name")},getTextBookNamesByIDs:function(e){var n;return e=r.compact(r.flatten(e)),n=new t.NamesCollection,n.fetch({reset:!0,data:{term_ids:e}}),n}},e.reqres.setHandler("get:textbooks",function(t){return s.getTextbooks(t)}),e.reqres.setHandler("get:textbook:by:id",function(t){return s.getTextBookByID(t)}),e.reqres.setHandler("get:textbook:name:by:id",function(t){return s.getTextBookNameByID(t)}),e.reqres.setHandler("get:textbook:names:by:ids",function(t){return s.getTextBookNamesByIDs(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/chapters",["app","backbone"],function(t,e){return t.module("Entities.Chapters",function(t,e,n,i,o,r){var s;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="chapter_id",e.prototype.defaults={name:"",slug:"",description:"",parent:0,term_order:0},e.prototype.name="chapter",e}(n.Model),t.ItemCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ItemModel,n.prototype.comparator="term_order",n.prototype.url=function(){return AJAXURL+"?action=get-chapters"},n.prototype.parse=function(t){return this.total=t.count,t.data},n}(n.Collection),t.SubSectionCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ItemModel,n.prototype.comparator="term_order",n.prototype.url=function(){return AJAXURL+"?action=get-chapter-subsections"},n.prototype.parse=function(t){return this.total=t.count,t.data},n}(n.Collection),s={getChapters:function(e){var n;return null==e&&(e={}),n=new t.ItemCollection,n.fetch({reset:!0,data:e}),n},getChapterByID:function(e){var n;return n=chapterCollection.get(e),n||(n=new t.ItemModel({term_id:e}),console.log(n),n.fetch()),n},getSubsectionByChapterID:function(e){var n;return null==e&&(e={}),n=new t.SubSectionCollection,n.fetch({reset:!0,data:e}),n}},e.reqres.setHandler("get:chapters",function(t){return s.getChapters(t)}),e.reqres.setHandler("get:chapter:by:id",function(t){return s.getChapterByID(t)}),e.reqres.setHandler("get:subsections:by:chapter:id",function(t){return s.getSubsectionByChapterID(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/grading-parameter",["app","backbone"],function(t,e){return t.module("Entities.GradingParameter",function(t,e,n,i,o,r){var s;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults={parameter:"",attributes:[]},e}(n.Model),t.ItemCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.model=t.ItemModel,n}(n.Collection),s={getGradingParameterCollections:function(e){var n;return n=new t.ItemCollection,n.set(e),n},getGradingParameter:function(e){var n;return n=new t.ItemModel(e)}},e.reqres.setHandler("get:grading:parameter:collection",function(t){return s.getGradingParameterCollections(t)}),e.reqres.setHandler("get:grading:parameter",function(t){return s.getGradingParameter(t)})})}),define("entitiesloader",["entities/user","entities/menu","entities/base-entities","entities/content-creator/elementbox","entities/content-creator/element","entities/content-creator/media","entities/content-creator/hotspotelementbox","entities/content-creator/hotspotelement","entities/content-creator/questionelement","entities/content-creator/option","entities/content-creator/json","entities/schools","entities/breadcrumb","entities/content-pieces","entities/content-group","entities/textbooks","entities/chapters","entities/grading-parameter"],function(){});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,slice=[].slice;define("controllers/region-controller",["marionette","app"],function(t,e){var n;return n=function(t){function n(t){null==t&&(t={}),this.region=t.region||e.request("default:region"),this._instance_id=_.uniqueId("controller"),e.commands.execute("register:instance",this,this._instance_id),n.__super__.constructor.call(this,t)}return extend(n,t),n.prototype.close=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],delete this.region,delete this.options,e.commands.execute("unregister:instance",this,this._instance_id),n.__super__.close.call(this,t)},n.prototype.show=function(t,e){return null==e&&(e={}),_.defaults(e,{loading:!1,region:this.region}),this._setMainView(t),this._manageView(t,e)},n.prototype._setMainView=function(t){return this._mainView?void 0:(this._mainView=t,this.listenTo(t,"close",this.close))},n.prototype._manageView=function(t,n){return n.loading?e.commands.execute("show:loading",t,n):n.region?n.region.show(t):void 0},n}(t.Controller)});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("components/loading/view",["marionette"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="<i></i>",e.prototype.className="loading-container",e.prototype.onShow=function(){var t;return t=this._getOptions(),this.$el.spin(t)},e.prototype.onClose=function(){return this.$el.spin(!1)},e.prototype._getOptions=function(){return{lines:10,length:6,width:2.5,radius:7,corners:1,rotate:9,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},e}(t.ItemView)});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("components/loading/controller",["app","controllers/region-controller","components/loading/view"],function(t,e,n){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,n,i;switch(i=t.view,e=t.config,e=_.isBoolean(e)?{}:e,_.defaults(e,{loadingType:"spinner",entities:this.getEntities(i),debug:!1}),e.loadingType){case"opacity":this.region.currentView.$el.css("opacity",.5);break;case"spinner":n=this.getLoadingView(),this.show(n);break;default:throw new Error("Invalid loadingType")}return this.showRealView(i,n,e)},i.prototype.showRealView=function(e,n,i){var o;return o=_.debounce(function(t){return function(){switch(i.loadingType){case"opacity":t.region.currentView.$el.removeAttr("style");break;case"spinner":if(t.region&&t.region.currentView!==n)return e.close()}return i.debug?void 0:(t.show(e),e.triggerMethod("dependencies:fetched"))}}(this),10),t.commands.execute("when:fetched",i.entities,o)},i.prototype.getEntities=function(t){return _.chain(t).pick("model","collection").toArray().compact().value()},i.prototype.getLoadingView=function(){return new n},i}(e),t.commands.setHandler("show:loading",function(t,e){return new i({view:t,region:e.region,config:e.loading})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("components/image-editor/image-editor",["app","marionette"],function(t,e){var n,i,o;return window.imageEdit.initCrop=function(e,n,i){var o,r,s,a;return a=this,s=$("#imgedit-sel-width-"+e),r=$("#imgedit-sel-height-"+e),o=void 0,a.iasapi=$(n).imgAreaSelect({aspectRatio:t.currentImageRatio,parent:i,instance:!0,handles:!0,keys:!0,minWidth:3,minHeight:3,onInit:function(t){return o=$(t),o.next().css("position","absolute").nextAll(".imgareaselect-outer").css("position","absolute"),a._view.$el.find("#imgedit-crop-sel-"+e).prev().hide(),a._view._informUser()},onSelectStart:function(){imageEdit.setDisabled($("#imgedit-crop-sel-"+e),1)},onSelectEnd:function(t,n){imageEdit.setCropSelection(e,n)},onSelectChange:function(t,e){var n;n=imageEdit.hold.sizer,s.val(imageEdit.round(e.width/n)),r.val(imageEdit.round(e.height/n))}})},i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="Invalid media argument passed",e}(e.ItemView),n=function(e){function n(){return this._iasInit=bind(this._iasInit,this),this.showImageEditor=bind(this.showImageEditor,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.className="wp_attachment_holder",n.prototype.template='<p class="loading t-a-c">Loading... Please wait...</p>',n.prototype.initialize=function(e){return n.__super__.initialize.call(this,e),this.model._fetch?t.execute("when:fetched",[this.model],this.showImageEditor):this.listenTo(this,"show",this.showImageEditor)},n.prototype.back=function(){return this.trigger("image:editing:cancelled"),this.close()},n.prototype.save=function(){return this.model.fetch({success:function(t){return function(e){return t.back()}}(this)})},n.prototype.refresh=function(){return this.model.fetch()},n.prototype.showImageEditor=function(){return this.render(),this.$el.attr("id","image-editor-"+this.model.get("id")),_.delay(function(t){return function(){return window.imageEdit.open(t.model.get("id"),t.model.get("nonces").edit,t)}}(this),400)},n.prototype._informUser=function(){var t,e,n,i,o,r,s,a,l;return n=$("#aj-imp-builder-drag-drop").width(),e=1600,t=window.imageEdit.iasapi.getOptions().aspectRatio,_.isString(t)?(t=t.split(":"),l=parseFloat(t.shift()),a=parseFloat(t.pop()),r=e*l/n,o=a*r/l,s="<p class='note'><b>Expected image width to scale up on all screen sizes is <br /> "+parseInt(r)+" x "+parseInt(o)+"</b></p>",i=this.$el.find("#imgedit-crop-sel-"+this.model.get("id")),i.next(".note").remove(),i.after(s)):!1},n.prototype._iasInit=function(t){var e;return e=$(t),e.next().css("position","absolute").nextAll(".imgareaselect-outer").css("position","absolute"),this.$el.find("#imgedit-crop-sel-"+this.model.get("id")).prev().hide()},n}(e.ItemView),o=function(e,o){var r,s;return null==e&&(e=0),null==o&&(o={}),0===e?new i:(_.isObject(e)?s=e:_.isNumber(parseInt(e))&&(s=t.request("get:media:by:id",e)),r=new n({model:s,options:o}))},t.reqres.setHandler("get:image:editor:view",o)}),define("componentloader",["components/loading/controller","components/image-editor/image-editor"],function(){}),define("text!apps/header/left/templates/left.html",[],function(){return'<!-- BEGIN HEADER LEFT SIDE SECTION -->\n	<!-- BEGIN SLIM NAVIGATION TOGGLE -->\n	<ul class="nav quick-section">\n		<li class="quicklinks">\n			<a id="layout-condensed-toggle" class="" style="cursor:pointer" >\n				<div class="iconset top-menu-toggle-dark"></div>\n			</a>\n		</li>\n	</ul>\n	<!-- BEGIN HEADER QUICK LINKS -->\n	<ul class="nav quick-section">\n\n	</ul>\n	<!-- BEGIN HEADER QUICK LINKS -->\n									\n			<!-- END HEADER LEFT SIDE SECTION -->'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/header/left/leftapp",["app","controllers/region-controller","text!apps/header/left/templates/left.html"],function(t,e,n){return t.module("LeftHeaderApp.Controller",function(t,i){var o;return t.LeftHeaderController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.view=t=this._getLeftHeaderView(),this.show(t)},e.prototype._getLeftHeaderView=function(){return new o},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e.prototype.className="pull-left",e.prototype.events={"click #layout-condensed-toggle":"toggleLeftSidebar"},e.prototype.toggleLeftSidebar=function(){return"1"===$("#main-menu").attr("data-inner-menu")?console.log("Menu is already condensed"):$("#main-menu").hasClass("mini")?($("body").removeClass("grey"),$("#main-menu").removeClass("mini"),$(".page-content").removeClass("condensed"),$(".scrollup").removeClass("to-edge"),$(".header-seperation").css("width","250px"),$(".header-seperation").css("height","61px"),$(".footer-widget").show()):($("body").addClass("grey"),$("#main-menu").addClass("mini"),$(".page-content").addClass("condensed"),$(".scrollup").addClass("to-edge"),$(".header-seperation").css("width","0"),$(".footer-widget").hide())},e}(Marionette.ItemView),i.commands.setHandler("show:leftheaderapp",function(e){return null==e&&(e={}),new t.LeftHeaderController(e)})})}),define("text!apps/header/right/templates/right.html",[],function(){return'<!-- BEGIN HEADER RIGHT SIDE SECTION -->\n	<!-- BEGIN HEADER NAV BUTTONS -->\n	<ul class="nav quick-section2" id="gears-pc">\n		<!-- BEGIN SETTINGS -->\n		<li class="quicklinks"> \n			<a id="user-options" href="#" class="dropdown-toggle pull-right" data-toggle="dropdown">						\n				<div class="iconset top-settings-dark"></div> 	\n			</a>\n			<ul aria-labelledby="user-options" role="menu" class="dropdown-menu pull-right">\n				{{#syncUrl}}\n                	<li><a href="{{syncUrl}}"><span class="fa fa-refresh"></span>&nbsp;&nbsp;Sync</a></li>\n                {{/syncUrl}}\n				<li><a id="user_logout" href="javascript://"><i class="fa fa-power-off"></i>&nbsp;&nbsp;Log Out</a></li>\n			</ul>\n		</li>\n		<!-- END SETTINGS -->\n		 \n	</ul>\n	<!-- END HEADER NAV BUTTONS -->\n<!-- END HEADER RIGHT SIDE SECTION -->\n\n<ul class="nav pull-right notifcation-center">\n\n    <!-- BEGIN MOBILE CHAT TOGGLER -->\n    <li style="display:none" id="portrait-chat-toggler" class="dropdown">\n        <a class="chat-menu-toggle" href="#sidr">\n            <div class="iconset top-chat-white"></div>\n        </a>\n    </li>\n    <!-- END MOBILE CHAT TOGGLER -->\n</ul>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/header/right/rightapp",["app","controllers/region-controller","text!apps/header/right/templates/right.html"],function(t,e,n){return t.module("RightHeaderApp.Controller",function(t,i){var o;return t.RightHeaderController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.view=t=this._getRightHeaderView(),this.show(t),this.listenTo(this.view,{"user:logout":function(){return this.region.trigger("user:logout")}})},e.prototype._getRightHeaderView=function(){return new o},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e.prototype.className="pull-right",e.prototype.events={"click #user_logout":function(){return this.trigger("user:logout")}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),"undefined"!=typeof IS_STANDALONE_SITE&&null!==IS_STANDALONE_SITE&&IS_STANDALONE_SITE===!0&&i.request("current:user:can","sync_site_content")&&(t.syncUrl=SITEURL+"/sync-site-content"),t},e}(Marionette.ItemView),i.commands.setHandler("show:rightheaderapp",function(e){return null==e&&(e={}),new t.RightHeaderController(e)})})}),define("text!apps/header/templates/header.html",[],function(){return'<div class="header navbar navbar-inverse"> \n	<!-- BEGIN TOP NAVIGATION BAR -->\n	<div class="navbar-inner">\n		<!-- BEGIN NAVIGATION HEADER -->\n		<div class="header-seperation"> \n			<!-- BEGIN MOBILE HEADER -->\n\n			<ul style="display:none" id="mobile-menu-toggle-wrapper" class="nav pull-left notifcation-center">	\n				<li class="dropdown">\n					<a class="btn btn-small btn-primary" href="#teachers/dashboard" id="main-menu-toggle"><span class="small-text">Dashboard</span>\n					</a>\n				</li>		 \n			</ul>\n\n\n			<!-- END MOBILE HEADER -->\n			<!-- BEGIN LOGO -->	\n			<a href="#">\n				<img width="192" height="38" data-src-retina="{{logourl}}" data-src="{{logourl}}" alt="" class="logo" src="{{logourl}}">\n			</a>\n			<!-- END LOGO --> \n\n			<ul class="nav quick-section2 pull-right notifcation-center" id="gears-mob">\n				<li class="quicklinks"> \n					<a id="user-options" href="#" class="dropdown-toggle pull-right" data-toggle="dropdown">	\n						<span class="fa fa-gears"></span>	\n					</a>\n					<ul aria-labelledby="user-options" role="menu" class="dropdown-menu pull-right">\n						<li><a href="#sync"><span class="fa fa-refresh"></span>&nbsp;&nbsp;Sync</a></li>\n						<li class="divider"></li>                \n						<li><a id="user_logout" href="javascript://"><span class="fa fa-power-off"></span>&nbsp;&nbsp;Log Out</a></li>\n					</ul>\n				</li>\n			</ul>\n			<!-- END LOGO NAV BUTTONS -->\n		</div>\n		<!-- END NAVIGATION HEADER -->\n		<!-- BEGIN CONTENT HEADER -->\n		<div class="header-quick-nav"> \n			<div id="header-left"></div>\n			<div id="header-right"></div>\n			\n		</div> \n		<!-- END CONTENT HEADER --> \n	</div>\n	<!-- END TOP NAVIGATION BAR --> \n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/header/headerapp",["app","controllers/region-controller","apps/header/left/leftapp","apps/header/right/rightapp","text!apps/header/templates/header.html"],function(t,e,n,i,o){return t.module("HeaderApp.Controller",function(t,n){var i;return t.HeaderController=function(t){function e(){return this._getHeaderView=bind(this._getHeaderView,this),this._showLeftRightViews=bind(this._showLeftRightViews,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.layout=t=this._getHeaderView(),this.listenTo(t,"show",this._showLeftRightViews),this.show(t),this.listenTo(this.layout.rightRegion,"user:logout",this._logoutCurrentUser),this.listenTo(t,"user:logout",this._logoutCurrentUser)},e.prototype._logoutCurrentUser=function(){return $.post(AJAXURL+"?action=logout_user",function(t){return function(t){var e,i;return t.error?console.log(t):(e=window.location.hostname,i=n.request("get:user:model"),i.clear(),location.href=e+"/#login")}}(this))},e.prototype._showLeftRightViews=function(){return n.execute("show:leftheaderapp",{region:this.layout.leftRegion}),n.execute("show:rightheaderapp",{region:this.layout.rightRegion})},e.prototype._getHeaderView=function(){return new i({templateHelpers:{show_user_name:function(){var t,e;return t=n.request("get:user:model"),e=t.get("display_name")}}})},e}(e),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=o,e.prototype.className="header navbar navbar-inverse",e.prototype.regions={leftRegion:"#header-left",rightRegion:"#header-right"},e.prototype.events={"click #logout":function(){return $.sidr("close","walnutProfile"),this.trigger("user:logout")}},e.prototype.serializeData=function(){var t;return t=e.__super__.serializeData.call(this),t.logourl=SITEURL+"/wp-content/themes/walnut/images/synapse_logo.png",t},e.prototype.onShow=function(){return $(window).width()>1024&&$("#gears-mob").remove(),$(window).width()<1025&&$("#gears-pc").remove(),$(".creator").length>0?($(".page-content").addClass("condensed"),$(".header-seperation").css("display","none")):void 0},e}(Marionette.Layout),n.commands.setHandler("show:headerapp",function(e){return null==e&&(e={}),new t.HeaderController(e)})})}),define("text!apps/left-nav/templates/leftnav.html",[],function(){return'\n  <div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 697.5px;"><div id="main-menu-wrapper" class="page-sidebar-wrapper" style="overflow: hidden; width: auto; height: 697.5px;">\n\n<ul class="menu-items">	\n\n	<!-- BEGIN ONE LEVEL MENU -->\n	\n	<!-- END ONE LEVEL MENU -->\n\n</ul>\n<!-- END SIDEBAR MENU -->\n<!-- BEGIN SIDEBAR WIDGETS -->\n<div class="side-bar-widgets">\n\n</div>\n<div class="clearfix"></div>\n<!-- END SIDEBAR WIDGETS --> \n</div><div class="slimScrollBar ui-draggable" style="background: none repeat scroll 0% 0% rgb(161, 178, 189); width: 4px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 4px; z-index: 99; right: 1px; height: 698px;"></div><div class="slimScrollRail" style="width: 4px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 4px; background: none repeat scroll 0% 0% rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div></div>\n'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/left-nav/views",["app","text!apps/left-nav/templates/leftnav.html"],function(t,e){return t.module("LeftNavApp.Controller.Views",function(t,n){var i;return i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="li",e.prototype.template='<a href="javascript:;"> <i class="{{iconClass}}"></i> <span class="title">{{post_title}}</span> <span class="arrow"></span> </a> <ul class="sub-menu"> {{#submenu}} <li><a href="{{menu_item_link}}">{{post_title}}</a></li> {{/submenu}} </ul>',e.prototype.serializeData=function(){var t,n;return t=e.__super__.serializeData.call(this),n="icon-custom-ui","Content Management"===this.model.get("post_title")&&(n="fa fa-pencil-square-o"),"Training Management"===this.model.get("post_title")&&(n="fa fa-book"),"Quiz Management"===this.model.get("post_title")&&(n="fa fa-puzzle-piece"),t.iconClass=n,t},e}(Marionette.ItemView),t.LeftNavView=function(t){function n(){return this.clickMenu=bind(this.clickMenu,this),n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.id="main-menu",n.prototype.className="page-sidebar",n.prototype.itemView=i,n.prototype.itemViewContainer="ul.menu-items",n.prototype.events={"click li":"clickMenu","click .sub-menu li":"closeNav"},n.prototype.onShow=function(){var t;return $(".creator").length>0?($("#main-menu").addClass("mini"),$(".start").removeClass("active open"),$(".arrow").removeClass("open"),$(".page-content").addClass("condensed"),$(".header-seperation").hide()):$(".page-content").removeClass("condensed"),$(".page-sidebar").hasClass("mini")?(t=$(".page-sidebar ul"),t.children("li.open").children("a").children(".arrow").removeClass("open"),t.children("li.open").children("a").children(".arrow").removeClass("active"),t.children("li.open").children(".sub-menu").slideUp(200),t.children("li").removeClass("open")):void 0},n.prototype.clickMenu=function(t){var e,n,i;return e=$(t.target).closest("li").find("a"),e.next().hasClass("sub-menu")!==!1?(n=e.parent().parent(),n.children("li.open").children("a").children(".arrow").removeClass("open"),n.children("li.open").children("a").children(".arrow").removeClass("active"),n.children("li.open").children(".sub-menu").slideUp(200),n.children("li").removeClass("open"),i=e.next(),i.is(":visible")?($(".arrow",e).removeClass("open"),e.parent().removeClass("active"),i.slideUp(200,function(t){return function(){return t.handleSidenarAndContentHeight()}}(this))):($(".arrow",e).addClass("open"),e.parent().addClass("open"),i.slideDown(200,function(t){return function(){return t.handleSidenarAndContentHeight()}}(this))),t.preventDefault()):void 0},n.prototype.handleSidenarAndContentHeight=function(){var t,e;return t=$(".page-content"),e=$(".page-sidebar"),t.attr("data-height")||t.attr("data-height",t.height()),e.height()>t.height()?t.css("min-height",e.height()+120):t.css("min-height",t.attr("data-height"))},n.prototype.closeNav=function(){return this.$el.hasClass("mini")?(this.$el.find(".menu-items li").removeClass("open"),this.$el.find(".sub-menu").slideUp()):void 0},n}(Marionette.CompositeView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/left-nav/leftnavapp",["app","controllers/region-controller","apps/left-nav/views"],function(t,e){return t.module("LeftNavApp.Controller",function(t,n){return t.LeftNavController=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(){var t,e;return t=n.request("get:site:menus"),this.view=e=this._getLeftNavView(t),this.show(e,{loading:!0})},i.prototype._getLeftNavView=function(e){return new t.Views.LeftNavView({collection:e})},i}(e),n.commands.setHandler("show:leftnavapp",function(e){return null==e&&(e={}),new t.LeftNavController(e)})})}),define("text!apps/content-creator/element-box/templates/toolbox.html",[],function(){return'<div class="tiles default">\n    <div class="tiles-head">\n        <h4 class="text-white">\n            <span class="semi-bold">Tool</span>box\n        </h4>\n    </div>\n</div>\n<h5 class="semi-bold text-center b-b b-grey p-b-10">Components</h5>\n<div class="tools">\n    <ul>\n        <li data-element="Row">\n            <a class="drag builder-element">\n                <i class="bicon icon-uniF160"></i>\n\n                <div class="aj-imp-builder-title">Row</div>\n            </a>\n        </li>\n        <div class="clearfix"></div>\n    </ul>\n</div>\n<h5 class="semi-bold text-center b-b b-grey p-b-10" id="questions_elements_label">Questions</h5>\n<div class="qstns">\n    <ul class="elements">\n        <li data-element="Hotspot">\n            <a class="drag builder-element">\n                <i class="fa fa-bullseye"></i>\n\n                <div class="aj-imp-builder-title">Hotspot</div>\n            </a>\n        </li>\n        <li data-element="Mcq">\n            <a class="drag builder-element">\n                <i class="fa fa-list-ol"></i>\n\n                <div class="aj-imp-builder-title">MCQ</div>\n            </a>\n        </li>\n        <li data-element="Fib">\n            <a class="drag builder-element">\n                <i class="bicon icon-uniF148"></i>\n\n                <div class="aj-imp-builder-title"> FIB</div>\n            </a>\n        </li>\n        <li data-element="BigAnswer">\n            <a class="drag builder-element">\n                <i class="fa fa-text-width"></i>\n\n                <div class="aj-imp-builder-title">Big Answer</div>\n            </a>\n        </li>\n        <li data-element="Sort">\n            <a class="drag builder-element">\n                <i class="fa fa-arrows-v"></i>\n\n                <div class="aj-imp-builder-title">Sort</div>\n            </a>\n        </li>\n        <li data-element="TeacherQuestion">\n            <a class="drag builder-element">\n                <i class="fa fa-arrows-v"></i>\n\n                <div class="aj-imp-builder-title">Teacher Question</div>\n            </a>\n        </li>\n    </ul>\n    <div class="clearfix"></div>\n</div>\n<h5 class="semi-bold text-center b-b b-grey p-b-10">Elements</h5>\n<div class="tools">\n    <ul>\n        <li data-element="Image" class="hotspotable">\n            <a class="drag builder-element">\n                <i class="bicon icon-uniF10E"></i>\n\n                <div class="aj-imp-builder-title">Image</div>\n            </a>\n        </li>\n        <li data-element="Text" class="hotspotable">\n            <a class="drag builder-element">\n                <i class="bicon icon-uniF11C"></i>\n\n                <div class="aj-imp-builder-title">Text</div>\n            </a>\n        </li>\n        <li data-element="ImageWithText" class="hotspotable">\n            <a class="drag builder-element">\n                <i class="bicon icon-uniF112"></i>\n\n                <div class="aj-imp-builder-title">Image With Text</div>\n            </a>\n        </li>\n        <li data-element="Table" class="hotspotable">\n            <a  class="drag builder-element">\n                <i class="bicon icon-uniF166"></i>\n\n                <div class="aj-imp-builder-title">Table</div>\n            </a>\n        </li>\n        <li data-element="Video" class="hotspotable">\n            <a class="drag builder-element">\n                <i class="bicon icon-uniF11E"></i>\n\n                <div class="aj-imp-builder-title">Video</div>\n            </a>\n        </li>\n        <li data-element="Audio" class="hotspotable">\n            <a  class="drag builder-element">\n                <i class="bicon icon-uniF100"></i>\n\n                <div class="aj-imp-builder-title">Audio</div>\n            </a>\n        </li>\n        <div class="clearfix"></div>\n    </ul>\n</div>';
});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/element-box/view",["app","text!apps/content-creator/element-box/templates/toolbox.html"],function(t,e){return t.module("ContentCreator.ElementBox.Views",function(t,n){return t.ElementBoxView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.onShow=function(){var t,e;return this.$el.find("*[data-element]").draggable({connectToSortable:".droppable-column",helper:"clone",delay:5,addClasses:!1,distance:5,revert:"invalid"}),t=Marionette.getOption(this,"contentType"),"teacher_question"===t?e=["Row","TeacherQuestion","Image","Text","ImageWithText","Video","Audio","Table"]:"content_piece"===t?(e=["Row","Image","Text","ImageWithText","Video","Audio","Table"],this.$el.find("#questions_elements_label").hide()):e=["Row","Hotspot","Mcq","Fib","BigAnswer","Sort","Image","Text","ImageWithText","Video","Audio","Table"],_.each(this.$el.find("li"),function(t,n){var i;return i=$(t).attr("data-element"),_.contains(e,i)?void 0:$(t).hide()})},n.prototype.onQuestionElementAdded=function(){return"student_question"===Marionette.getOption(this,"contentType")?this.$el.find(".qstns *[data-element]").draggable("disable"):void 0},n.prototype.onQuestionElementRemoved=function(){return this.$el.find(".qstns *[data-element]").draggable("enable")},n}(Marionette.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/element-box/elementboxapp",["app","controllers/region-controller","apps/content-creator/element-box/view"],function(t,e){return t.module("ContentCreator.ElementBox",function(t,n,i,o,r,s){var a;return a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n;return e=t.contentType,n=t.eventObj,console.log(n),this.view=this._getElementBoxView(e),this.listenTo(n.vent,"question:element:added",function(t){return function(){return t.view.triggerMethod("question:element:added")}}(this)),this.listenTo(n.vent,"question:element:removed",function(t){return function(){return t.view.triggerMethod("question:element:removed")}}(this)),this.show(this.view)},n.prototype._getElementBoxView=function(e){return new t.Views.ElementBoxView({contentType:e})},n}(e),n.commands.setHandler("show:element:box",function(t){return new a(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/view",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Views",function(t,e){return t.ContentBuilderView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div id="myCanvas" class="droppable-column" height="300"></div>',e.prototype.onRender=function(){return this.$el.attr("id","site-page-content-region")},e.prototype.onShow=function(){return this.$el.find(".droppable-column").sortable({revert:"invalid",items:"> .element-wrapper",connectWith:".droppable-column,.column",start:function(t,e){console.log("moving"),e.placeholder.height(e.item.height()),window.dragging=!0},stop:function(t,e){window.dragging=!1},handle:".aj-imp-drag-handle",helper:"clone",opacity:.65,receive:function(t){return function(e,n){var i;return"LI"===n.item.prop("tagName")?(i=n.item.attr("data-element"),t.trigger("add:new:element",$(e.target),i)):void 0}}(this)})},e}(Marionette.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,slice=[].slice;define("controllers/element-controller",["marionette","app"],function(t,e){var n;return n=function(t){function n(t){null==t&&(t={}),this._instance_id=_.uniqueId("elementcontroller"),e.commands.execute("register:instance",this,this._instance_id),n.__super__.constructor.call(this,t)}return extend(n,t),n.prototype.close=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],delete this.layout,delete this.options,e.commands.execute("unregister:instance",this,this._instance_id),n.__super__.close.call(this,t)},n.prototype.add=function(t,e){var n;return this.listenTo(t,"close",this.close),n=t.model.get("element"),1===e.find("li[data-element='"+n+"']").length?e.find("li[data-element='"+n+"']").replaceWith(t.$el):e.append(t.$el),e.removeClass("empty-column"),t.render(),t.triggerMethod("show"),"Row"===t.model.get("element")&&this.layout.addHiddenFields(),t.model.isNew()&&"Row"!==t.model.get("element")?void 0:(t.triggerMethod("before:render:element"),this.renderElement())},n}(t.Controller)});var Holder=Holder||{};!function(t,e){function n(t,e){var n="complete",i="readystatechange",o=!1,r=o,s=!0,a=t.document,l=a.documentElement,c=a.addEventListener?"addEventListener":"attachEvent",u=a.addEventListener?"removeEventListener":"detachEvent",h=a.addEventListener?"":"on",d=function(s){(s.type!=i||a.readyState==n)&&(("load"==s.type?t:a)[u](h+s.type,d,o),!r&&(r=!0)&&e.call(t,null))},p=function(){try{l.doScroll("left")}catch(t){return void setTimeout(p,50)}d("poll")};if(a.readyState==n)e.call(t,"lazy");else{if(a.createEventObject&&l.doScroll){try{s=!t.frameElement}catch(f){}s&&p()}a[c](h+"DOMContentLoaded",d,o),a[c](h+i,d,o),t[c](h+"load",d,o)}}function i(t){t=t.match(/^(\W)?(.*)/);var e=document["getElement"+(t[1]?"#"==t[1]?"ById":"sByClassName":"sByTagName")](t[2]),n=[];return null!==e&&(n=e.length?e:0===e.length?e:[e]),n}function o(t,e){var n={};for(var i in t)n[i]=t[i];for(var o in e)n[o]=e[o];return n}function r(t,e,n){e=parseInt(e,10),t=parseInt(t,10);var i=Math.max(e,t),o=Math.min(e,t),r=1/12,s=Math.min(.75*o,.75*i*r);return{height:Math.round(Math.max(n.size,s))}}function s(t,e,n,i,o){var s=r(e.width,e.height,n),a=s.height,l=e.width*i,c=e.height*i,u=n.font?n.font:"sans-serif";d.width=l,d.height=c,t.textAlign="center",t.textBaseline="middle",t.fillStyle=n.background,t.fillRect(0,0,l,c),t.fillStyle=n.foreground,t.font="bold "+a+"px "+u;var h=n.text?n.text:Math.floor(e.width)+"x"+Math.floor(e.height);o&&(h=n.literalText);var p=t.measureText(h).width;return p/l>=.75&&(a=Math.floor(.75*a*(l/p))),t.font="bold "+a*i+"px "+u,t.fillText(h,l/2,c/2,l),d.toDataURL("image/png")}function a(t,e,n,i){var r=n.dimensions,a=n.theme,c=n.text?decodeURIComponent(n.text):n.text,u=r.width+"x"+r.height;a=c?o(a,{text:c}):a,a=n.font?o(a,{font:n.font}):a,e.setAttribute("data-src",i),a.literalText=u,n.originalTheme=n.theme,n.theme=a,"image"==t?(e.setAttribute("alt",c?c:a.text?a.text+" ["+u+"]":u),(h||!n.auto)&&(e.style.width=r.width+"px",e.style.height=r.height+"px"),h?e.style.backgroundColor=a.background:e.setAttribute("src",s(p,r,a,m))):"background"==t?h||(e.style.backgroundImage="url("+s(p,r,a,m)+")",e.style.backgroundSize=r.width+"px "+r.height+"px"):"fluid"==t&&(e.setAttribute("alt",c?c:a.text?a.text+" ["+u+"]":u),"%"==r.height.slice(-1)?e.style.height=r.height:e.style.height=r.height+"px","%"==r.width.slice(-1)?e.style.width=r.width:e.style.width=r.width+"px",("inline"==e.style.display||""===e.style.display)&&(e.style.display="block"),h?e.style.backgroundColor=a.background:(e.holderData=n,v.push(e),l(e)))}function l(t){var e;e=null==t.nodeType?v:[t];for(var n in e){var i=e[n];if(i.holderData){var o=i.holderData;i.setAttribute("src",s(p,{height:i.clientHeight,width:i.clientWidth},o.theme,m,!!o.literal))}}}function c(e,n){var i={theme:y.themes.gray},o=!1;for(sl=e.length,j=0;j<sl;j++){var r=e[j];t.flags.dimensions.match(r)?(o=!0,i.dimensions=t.flags.dimensions.output(r)):t.flags.fluid.match(r)?(o=!0,i.dimensions=t.flags.fluid.output(r),i.fluid=!0):t.flags.literal.match(r)?i.literal=!0:t.flags.colors.match(r)?i.theme=t.flags.colors.output(r):n.themes[r]?i.theme=n.themes[r]:t.flags.font.match(r)?i.font=t.flags.font.output(r):t.flags.auto.match(r)?i.auto=!0:t.flags.text.match(r)&&(i.text=t.flags.text.output(r))}return o?i:!1}var u=!1,h=!1,d=document.createElement("canvas");if(d.getContext)if(d.toDataURL("image/png").indexOf("data:image/png")<0)h=!0;else var p=d.getContext("2d");else h=!0;var f=1,g=1;h||(f=window.devicePixelRatio||1,g=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1);var m=f/g;document.getElementsByClassName||(document.getElementsByClassName=function(t){var e,n,i,o=document,r=[];if(o.querySelectorAll)return o.querySelectorAll("."+t);if(o.evaluate)for(n=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]",e=o.evaluate(n,o,null,0,null);i=e.iterateNext();)r.push(i);else for(e=o.getElementsByTagName("*"),n=new RegExp("(^|\\s)"+t+"(\\s|$)"),i=0;i<e.length;i++)n.test(e[i].className)&&r.push(e[i]);return r}),window.getComputedStyle||(window.getComputedStyle=function(t){return this.el=t,this.getPropertyValue=function(e){var n=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),n.test(e)&&(e=e.replace(n,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(t){var e=this.__proto__||this.constructor.prototype;return t in this&&(!(t in e)||e[t]!==this[t])});var v=[],y={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12}},stylesheet:""};t.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(t){var e=this.regex.exec(t);return{width:+e[1],height:+e[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(t){var e=this.regex.exec(t);return{width:e[1],height:e[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(t){var e=this.regex.exec(t);return{size:y.themes.gray.size,foreground:"#"+e[2],background:"#"+e[1]}}},text:{regex:/text\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},font:{regex:/font\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},auto:{regex:/^auto$/},literal:{regex:/^literal$/}};for(var b in t.flags)t.flags.hasOwnProperty(b)&&(t.flags[b].match=function(t){return t.match(this.regex)});t.add_theme=function(e,n){return null!=e&&null!=n&&(y.themes[e]=n),t},t.add_image=function(e,n){var o=i(n);if(o.length)for(var r=0,s=o.length;s>r;r++){var a=document.createElement("img");a.setAttribute("data-src",e),o[r].appendChild(a)}return t},t.run=function(e){var n=o(y,e),r=[],s=[],l=[];for("string"==typeof n.images?s=i(n.images):window.NodeList&&n.images instanceof window.NodeList?s=n.images:window.Node&&n.images instanceof window.Node&&(s=[n.images]),"string"==typeof n.bgnodes?l=i(n.bgnodes):window.NodeList&&n.elements instanceof window.NodeList?l=n.bgnodes:window.Node&&n.bgnodes instanceof window.Node&&(l=[n.bgnodes]),u=!0,f=0,p=s.length;p>f;f++)r.push(s[f]);var h=document.getElementById("holderjs-style");h||(h=document.createElement("style"),h.setAttribute("id","holderjs-style"),h.type="text/css",document.getElementsByTagName("head")[0].appendChild(h)),n.nocss||(h.styleSheet?h.styleSheet.cssText+=n.stylesheet:h.appendChild(document.createTextNode(n.stylesheet)));for(var d=new RegExp(n.domain+'/(.*?)"?\\)'),p=l.length,f=0;p>f;f++){var g=window.getComputedStyle(l[f],null).getPropertyValue("background-image"),m=g.match(d),v=l[f].getAttribute("data-background-src");if(m){var b=c(m[1].split("/"),n);b&&a("background",l[f],b,g)}else if(null!=v){var b=c(v.substr(v.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);b&&a("background",l[f],b,g)}}for(p=r.length,f=0;p>f;f++){var _,w;w=_=g=null;try{w=r[f].getAttribute("src"),attr_datasrc=r[f].getAttribute("data-src")}catch(x){}if(null==attr_datasrc&&w&&w.indexOf(n.domain)>=0?g=w:attr_datasrc&&attr_datasrc.indexOf(n.domain)>=0&&(g=attr_datasrc),g){var b=c(g.substr(g.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);b&&(b.fluid?a("fluid",r[f],b,g):a("image",r[f],b,g))}}return t},n(e,function(){window.addEventListener?(window.addEventListener("resize",l,!1),window.addEventListener("orientationchange",l,!1)):window.attachEvent("onresize",l),u||t.run()}),"function"==typeof define&&define.amd&&define("holder",[],function(){return t})}(Holder,window),define("text!apps/content-creator/content-builder/element/templates/element.html",[],function(){return'\n<form>\n  <input type="hidden" name="meta_id"/>\n  <input type="hidden" name="element"/>\n</form>\n<div class="element-controls">\n  <div class="aj-imp-drag-handle">\n    <p title="Move"><span class="fa fa-ellipsis-h"></span></p>\n  </div>\n  <div class="aj-imp-delete-btn"><span title="Delete">&times;</span></div>\n  <div class="hidden aj-imp-settings-btn"><span title="Settings" class="glyphicon glyphicon-cog"></span></div>\n</div>\n<div class="element-markup"><span></span></div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/element/views",["app","holder","text!apps/content-creator/content-builder/element/templates/element.html"],function(t,e,n){return t.module("ContentCreator.ContentBuilder.Element.Views",function(t,e,i,o,r,s){return t.ElementView=function(t){function e(){return this.onShow=bind(this.onShow,this),this.initialize=bind(this.initialize,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e.prototype.tagName="div",e.prototype.regions={elementRegion:"> .element-markup"},e.prototype.className="element-wrapper",e.prototype.modelEvents={"change:complete":"_changeComplete"},e.prototype.events={"click .aj-imp-settings-btn":function(t){return t.stopPropagation(),this.trigger("show:setting:popup",this.model)},"click .aj-imp-delete-btn":function(t){return t.stopPropagation(),this.trigger("delete:element",this.model)}},e.prototype.initialize=function(){return this.once("before:render:element",function(t){return function(){return t.trigger("bind:element:events")}}(this))},e.prototype.onRender=function(){return this.$el.find(".element-markup > span").spin(this._getOptions())},e.prototype.onShow=function(){var t,e;return console.log("elemtn test"),console.log(this.model.get("element")),("Row"===(t=this.model.get("element"))||"ImageWithText"===t)&&this.$el.find(".aj-imp-settings-btn").removeClass("hidden"),"TeacherQuestion"===(e=this.model.get("element"))&&this.$el.find(".aj-imp-settings-btn").addClass("hidden"),this.$el.mouseover(function(t){return function(e){return e.stopPropagation(),window.dragging?void 0:t.$el.addClass("hover-class")}}(this)).mouseout(function(t){return function(){return t.$el.removeClass("hover-class")}}(this))},e.prototype._changeComplete=function(t,e){return this.setHiddenField("complete",this.model.get("complete")),this.setHiddenField("error_info",this.model.get("error_info"))},e.prototype.onBeforeRenderElement=function(){var t,e,n,i,o;for(i=["meta_id","style","element"],e=0,n=i.length;n>e;e++)t=i[e],this.setHiddenField(t,this.model.get(t));return("Fib"===(o=this.model.get("element"))||"Mcq"===o||"Sort"===o||"Hotspot"===o||"BigAnswer"===o)&&(this.$el.find("form").append("<input type='hidden' name='complete' value="+this.model.get("complete")+" />"),this.model.get("error_info")&&this.$el.find("form").append("<input type='hidden' name='error_info' value="+this.model.get("error_info")+" />")),this.setDraggable(this.model.get("draggable"))},e.prototype.addHiddenFields=function(){var t,e,n,i,o;for(i=["draggable","style"],o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(this.$el.children("form").append("<input type='hidden' name='"+t+"' value=''/>"));return o},e.prototype.setDraggable=function(t){return t===!1?this.$el.find(".aj-imp-drag-handle").addClass("non-visible"):t===!0&&this.$el.find(".aj-imp-drag-handle").removeClass("non-visible"),this.setHiddenField("draggable",t)},e.prototype.setMargin=function(t,e){var n;return null==e&&(e=""),n=this.elementRegion.currentView,n.$el.removeClass(e),n.$el.addClass(t)},e.prototype.setStyle=function(t,e){var n;return null==e&&(e=""),n=this.elementRegion.currentView,n.$el.removeClass(e),n.$el.addClass(t)},e.prototype.setHiddenField=function(t,e){return 1===this.$el.children("form").find("input[name='"+t+"']").length?this.$el.children("form").find("input[name='"+t+"']").val(e):void 0},e.prototype.onElementModelCreated=function(){return this.$el.find(".element-markup > span").spin(!1)},e.prototype._getOptions=function(){return{lines:10,length:6,width:2.5,radius:7,corners:1,rotate:9,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"0px",left:"40px"}},e}(o.Layout)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/element/controller",["app","controllers/element-controller","apps/content-creator/content-builder/element/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return this.setMargin=bind(this.setMargin,this),this.setDraggable=bind(this.setDraggable,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i,a,l,c;return e=t.container,a=t.modelData,this.eventObj=t.eventObj,l={draggable:!0,style:"",bottom_margin:"",top_margin:"",left_margin:"",right_margin:""},s.defaults(a,l),("Mcq"===(c=a.element)||"Fib"===c||"Sort"===c||"Hotspot"===c||"BigAnswer"===c)&&this.eventObj.vent.trigger("question:element:added"),i=n.request("create:new:element",a),this.layout=this._getView(i),this.listenTo(this.layout,"show:setting:popup",function(t){var e;return e=s.slugify(t.get("element")),n.vent.trigger("show:"+e+":settings:popup",t)}),this.listenTo(this.layout,"delete:element",function(t){return function(e){return confirm("Are you sure?")?t.deleteElement(e):void 0}}(this)),this.listenTo(this.layout,"bind:element:events",this.bindEvents),this.listenTo(i,"destroy",function(t){return function(){return t.layout.$el.parent().hasClass("column")&&1===t.layout.$el.parent().children(".element-wrapper").length&&t.layout.$el.parent().addClass("empty-column"),t.layout.close()}}(this)),this.layout.elementRegion.on("show",function(t){return function(e){var n,i,r,s,a,l;for(s=o.getOption(t.layout,"model"),a=["top_margin","left_margin","right_margin","bottom_margin"],l=[],n=0,i=a.length;i>n;n++)r=a[n],l.push(t.layout.setMargin(s.get(r)));return l}}(this)),i.isNew()&&n.execute("when:fetched",i,function(t){return function(){return t.layout.triggerMethod("before:render:element"),t.renderElement()}}(this)),this.add(this.layout,r(e))},i.prototype.bindEvents=function(){return this.listenTo(this.layout.model,"change:draggable",this.setDraggable),this.listenTo(this.layout.model,"change:top_margin",this.setMargin),this.listenTo(this.layout.model,"change:bottom_margin",this.setMargin),this.listenTo(this.layout.model,"change:left_margin",this.setMargin),this.listenTo(this.layout.model,"change:right_margin",this.setMargin)},i.prototype.setDraggable=function(t){return this.layout.setDraggable(t.get("draggable"))},i.prototype.setMargin=function(t){var e,n;return n=s.chain(s.keys(t.changed)).first().value(),e=t.previous(n),this.layout.setMargin(t.get(n),e)},i.prototype._getView=function(e){return new t.Views.ElementView({model:e})},i.prototype._getElementTemplate=function(t){var e,i,o,r;return e=n.request("get:element:settings:options",t.get("element")),r=e.get("styles"),o=s.findWhere(r,{name:t.get("style")}),null!=(i=o.template)?i:""},i.prototype.removeSpinner=function(){},i.prototype.deleteElement=function(t){var e;return("Mcq"===(e=t.get("element"))||"Fib"===e||"Sort"===e||"Hotspot"===e||"BigAnswer"===e||"TeacherQuestion"===e)&&this.eventObj.vent.trigger("question:element:removed"),t.destroy({wait:!0})},i}(e)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/hotspot/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Hotspot.Views",function(t,e,n,i,o,r){return t.HotspotView=function(t){function n(){return this._setResizeHandler=bind(this._setResizeHandler,this),n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.className="stage",n.prototype.initialize=function(t){return null==t&&(t={}),this.stageName=r.uniqueId("stage"),this.imageLayer=new Kinetic.Layer({name:"imageLayer"}),this.optionLayer=new Kinetic.Layer({name:"optionLayer"}),this.textLayer=new Kinetic.Layer({name:"textLayer"}),this.defaultLayer=new Kinetic.Layer({name:"defaultLayer"})},n.prototype.onRender=function(){return this.$el.attr("id",this.stageName)},n.prototype.onShow=function(){return this.stage=new Kinetic.Stage({container:this.stageName,width:this.$el.parent().width(),height:this.$el.parent().height()+80}),0!==this.model.get("height")&&this.stage.height(this.model.get("height")),this.stage.add(this.defaultLayer),this.stage.add(this.imageLayer),this.stage.add(this.textLayer),this.stage.add(this.optionLayer),this._initializeCanvasResizing(),this.$el.parent().parent().on("click",function(t){return function(e){return t.trigger("show:hotspot:elements"),e.stopPropagation()}}(this)),this.$el.parent().parent().on("mousedown",function(t){return function(e){return t.trigger("close:hotspot:element:properties")}}(this)),this._drawExistingElements(),this.$el.find(".kineticjs-content").droppable({accept:".hotspotable",drop:function(t){return function(e,n){var i,o;return"LI"===n.draggable.prop("tagName")?(o=n.draggable.attr("data-element"),i={left:e.clientX-t.$el.find(".kineticjs-content").offset().left,top:e.clientY-t.$el.find(".kineticjs-content").offset().top+window.pageYOffset},t.triggerMethod("add:hotspot:element",o,i)):void 0}}(this)})},n.prototype._initializeCanvasResizing=function(){return this.$el.resize(this._setResizeHandler),this.model.set("height",this.stage.height()),this.$el.resizable({handles:"s"})},n.prototype._setResizeHandler=function(){return this.$el.height()>0&&this.stage.setSize({width:this.$el.width(),height:this.$el.height()-8}),this.model.set("height",this.stage.height()),this._updateDefaultImageSize()},n.prototype._setDefaultImage=function(){var t;return t=new Image,t.onload=function(e){return function(){return e.hotspotDefault=new Kinetic.Image({image:t}),e.defaultLayer.add(e.hotspotDefault),r.delay(function(){return e._updateDefaultLayer()},500),e._updateDefaultImageSize()}}(this),t.src="../wp-content/themes/walnut/images/empty-hotspot.svg"},n.prototype._updateDefaultLayer=function(){var t,e;for(t=1,e=!0;t<this.stage.getChildren().length;){if(t&&this.stage.getChildren()[t].getChildren().length){this.defaultLayer.removeChildren(),e=!1;break}t++}return e&&(this.stage.getChildren()[0].getChildren().length||this._setDefaultImage()),this.defaultLayer.draw()},n.prototype._updateDefaultImageSize=function(){var t,e;return this.hotspotDefault?(e=this.stage.width(),t=this.stage.height(),this.hotspotDefault.setSize({width:336,height:200}),220>e&&this.hotspotDefault.setSize({width:e-10,height:(e-10)/1.68}),160>t&&this.hotspotDefault.setSize({width:1.68*(t-10),height:t-10}),this.hotspotDefault.position({x:this.stage.width()/2-this.hotspotDefault.width()/2,y:this.stage.height()/2-this.hotspotDefault.height()/2}),this.defaultLayer.draw()):void 0},n.prototype._drawExistingElements=function(){return this.model.get("textCollection").each(function(t){return function(e,n){return t._addEachElements("Hotspot-Text",e)}}(this)),this.model.get("optionCollection").each(function(t){return function(e,n){return"Rect"===e.get("shape")&&t._addEachElements("Hotspot-Rectangle",e),"Circle"===e.get("shape")?t._addEachElements("Hotspot-Circle",e):void 0}}(this)),this.model.get("imageCollection").each(function(t){return function(e,n){return t._addEachElements("Hotspot-Image",e)}}(this)),this._updateDefaultLayer(),r.delay(function(t){return function(){return t.$el.trigger("mousedown")}}(this),10)},n.prototype._addEachElements=function(t,e){return this.triggerMethod("add:hotspot:element",t,{left:e.get("x"),top:e.get("y")},e)},n.prototype.onAddHotspotElement=function(t,e,n){return"Hotspot-Circle"===t?this._addCircle(e,n):"Hotspot-Rectangle"===t?this._addRectangle(e,n):"Hotspot-Text"===t?this._addTextElement(e,n):"Hotspot-Image"===t&&(n?this._addImageElement(e,n.get("url"),n):this._uploadImage(e)),this._updateDefaultLayer()},n.prototype._uploadImage=function(t){return e.execute("show:media:manager:app",{region:e.dialogRegion,mediaType:"image"}),this.listenTo(e.vent,"media:manager:choosed:media",function(n){return function(i){return n._addImageElement(t,i.toJSON().url),n.stopListening(e.vent,"media:manager:choosed:media")}}(this)),this.listenTo(e.vent,"stop:listening:to:media:manager",function(t){return function(){return t.stopListening(e.vent,"media:manager:choosed:media")}}(this))},n.prototype._addCircle=function(t,n){var i,o,s,a,l;return n?s=n:(a={id:r.uniqueId("option"),type:"Option",shape:"Circle",x:t.left,y:t.top,radius:20,color:"#000000",correct:!1,marks:1},s=e.request("create:new:hotspot:element",a),this.model.get("optionCollection").add(s)),l=this,this.trigger("show:hotspot:element:properties",s),i=new Kinetic.Circle({id:s.get("id"),x:s.get("x"),y:s.get("y"),radius:s.get("radius"),stroke:s.get("color"),strokeWidth:2,dash:[6,4],dashEnabled:this.model.get("transparent"),fill:s.get("correct")?"rgba(12, 199, 55, 0.28)":""}),o=resizeCircle(i,this.optionLayer),o.on("dragend",function(t){return s.set("x",i.getAbsolutePosition().x),s.set("y",i.getAbsolutePosition().y),s.set("radius",i.radius())}),this.model.on("change:transparent",function(t){return function(e,n){return i.dashEnabled(n),t.optionLayer.draw()}}(this)),s.on("change:color",function(t){return function(){return i.stroke(s.get("color")),t.optionLayer.draw()}}(this)),s.on("change:correct",function(t){return function(){return s.get("correct")?i.fill("rgba(12, 199, 55, 0.28)"):i.fill(""),t.optionLayer.draw()}}(this)),s.on("change:toDelete",function(t){return function(){return o.destroy(),t.model.get("optionCollection").remove(s),t.trigger("close:hotspot:element:properties"),t.optionLayer.draw(),t._updateDefaultLayer()}}(this)),o.on("mousedown ",function(t){return function(e){return e.stopPropagation(),t.trigger("show:hotspot:element:properties",s)}}(this)),this.optionLayer.draw()},n.prototype._addRectangle=function(t,n){var i,o,s,a,l;return n?o=n:(s={id:r.uniqueId("option"),type:"Option",shape:"Rect",x:t.left,y:t.top,width:30,height:30,color:"#000000",angle:0,correct:!1,marks:1},o=e.request("create:new:hotspot:element",s),this.model.get("optionCollection").add(o)),l=this,this.trigger("show:hotspot:element:properties",o),i=new Kinetic.Rect({id:o.get("id"),x:o.get("x"),y:o.get("y"),width:o.get("width"),height:o.get("height"),stroke:o.get("color"),strokeWidth:2,dash:[6,4],dashEnabled:this.model.get("transparent"),fill:o.get("correct")?"rgba(12, 199, 55, 0.28)":""}),a=resizeRect(i,this.optionLayer),a.rotation(o.get("angle")),a.on("dragend",function(t){return o.set("x",i.getAbsolutePosition().x),o.set("y",i.getAbsolutePosition().y),o.set("width",i.width()),o.set("height",i.height())}),this.model.on("change:transparent",function(t){return function(e,n){return i.dashEnabled(n),t.optionLayer.draw()}}(this)),o.on("change:color",function(t){return function(){return i.stroke(o.get("color")),t.optionLayer.draw()}}(this)),o.on("change:angle",function(t){return function(){return a.rotation(o.get("angle")),t.optionLayer.draw()}}(this)),o.on("change:correct",function(t){return function(){return o.get("correct")?i.fill("rgba(12, 199, 55, 0.28)"):i.fill(""),t.optionLayer.draw()}}(this)),o.on("change:toDelete",function(t){return function(){return a.destroy(),t.model.get("optionCollection").remove(o),t.trigger("close:hotspot:element:properties"),t.optionLayer.draw(),t._updateDefaultLayer()}}(this)),a.on("mousedown ",function(t){return function(e){return e.stopPropagation(),t.trigger("show:hotspot:element:properties",o)}}(this)),this.optionLayer.draw()},n.prototype._addTextElement=function(t,n){var i,o,r,s,a;return n?o=n:(r={x:t.left,y:t.top,type:"Text",text:"",fontFamily:"Arial",fontSize:"14",fontColor:"#000000",fontBold:"",fontItalics:"",textAngle:0},o=e.request("create:new:hotspot:element",r),this.model.get("textCollection").add(o)),s=this,this.trigger("show:hotspot:element:properties",o),a=new Kinetic.Label({x:o.get("x"),y:o.get("y"),width:100,draggable:!0,dragBoundFunc:function(t){return s._setBoundRegion(t,this,s.stage)}}),i=new Kinetic.Text({text:"Enter text in Properties Dock",opacity:.3,fontFamily:o.get("fontFamily"),fontSize:o.get("fontSize"),fill:o.get("fontColor"),fontStyle:o.get("fontBold")+" "+o.get("fontItalics"),padding:5,rotation:o.get("textAngle")}),a.on("dragend",function(t){return o.set("x",a.getAbsolutePosition().x),o.set("y",a.getAbsolutePosition().y)}),a.on("mousedown ",function(t){return function(e){return e.stopPropagation(),t.trigger("show:hotspot:element:properties",o)}}(this)),""!==o.get("text")&&(i.setText(o.get("text")),i.opacity(1),i.fill(o.get("fontColor"))),o.on("change:text",function(t){return function(){return""!==o.get("text")?(i.setText(o.get("text")),i.opacity(1),i.fill(o.get("fontColor"))):(i.setText("CLICK TO ENTER TEXT"),i.opacity(.3),i.fill("fontColor")),t.textLayer.draw()}}(this)),o.on("change:fontSize",function(t){return function(){return i.fontSize(o.get("fontSize")),t.textLayer.draw()}}(this)),o.on("change:fontFamily",function(t){return function(){return i.fontFamily(o.get("fontFamily")),t.textLayer.draw()}}(this)),o.on("change:fontBold change:fontItalics",function(t){return function(){return i.fontStyle(o.get("fontBold")+" "+o.get("fontItalics")),t.textLayer.draw()}}(this)),o.on("change:fontColor",function(t){return function(){return i.fill(o.get("fontColor")),t.textLayer.draw()}}(this)),o.on("change:toDelete",function(t){return function(){return a.destroy(),t.model.get("textCollection").remove(o),t.trigger("close:hotspot:element:properties"),t.textLayer.draw(),t._updateDefaultLayer()}}(this)),o.on("change:textAngle",function(t){return function(){return a.rotation(o.get("textAngle")),t.textLayer.draw()}}(this)),a.add(i),this.textLayer.add(a),this.textLayer.draw()},n.prototype._addImageElement=function(t,n,i){var o,r,s,a;return i?o=i:(a={type:"Image",x:t.left,y:t.top,width:150,height:150,angle:0,url:n},o=e.request("create:new:hotspot:element",a),this.model.get("imageCollection").add(o)),r=null,s=new Image,s.src=o.get("url"),s.onload=function(t){return function(){var e;return t.trigger("show:hotspot:element:properties",o),e=new Kinetic.Image({image:s,x:o.get("x"),y:o.get("y"),width:o.get("width"),height:o.get("height")}),r=resizeRect(e,t.imageLayer),t._updateDefaultLayer(),r.rotation(o.get("angle")),t.imageLayer.draw(),r.on("dragend",function(t){return o.set("x",e.getAbsolutePosition().x),o.set("y",e.getAbsolutePosition().y),o.set("width",e.width()),o.set("height",e.height())}),r.on("mousedown ",function(e){
return e.stopPropagation(),t.trigger("show:hotspot:element:properties",o)})}}(this),o.on("change:angle",function(t){return function(){return r.rotation(o.get("angle")),t.imageLayer.draw()}}(this)),o.on("change:toDelete",function(t){return function(){return r.destroy(),t.model.get("imageCollection").remove(o),t.trigger("close:hotspot:element:properties"),t.imageLayer.draw(),t._updateDefaultLayer()}}(this))},n.prototype._setBoundRegion=function(t,e,n){var i,o,r,s,a,l,c;return r=e.getHeight(),l=n.getX(),s=n.getX()+n.getWidth()-e.getWidth(),c=n.getY(),a=n.getY()+n.getHeight()-e.getHeight(),i=t.x,o=t.y,l>i&&(i=l),i>s&&(i=s),c>o&&(o=c),o>a&&(o=a),{x:i,y:o}},n.prototype.updateModel=function(){return this.layout.model.set("content",this._getHotspotData())},n.prototype._getHotspotData=function(){return this.stage.toJSON()},n}(i.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("apps/content-creator/content-builder/elements/hotspot/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/hotspot/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Hotspot",function(t,n,i,o,r,s){return t.Controller=function(e){function o(){return this.renderElement=bind(this.renderElement,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){return this.eventObj=t.eventObj,s.defaults(t.modelData,{element:"Hotspot",height:0,marks:1,transparent:!1,enableIndividualMarks:!1,optionCollection:[],textCollection:[],imageCollection:[],complete:!1}),o.__super__.initialize.call(this,t)},o.prototype._getHotspotView=function(){return new t.Views.HotspotView({model:this.layout.model})},o.prototype.renderElement=function(){var t,e,o;return e=this.layout.model.get("optionCollection"),o=this.layout.model.get("textCollection"),t=this.layout.model.get("imageCollection"),this._parseArray(e,o,t),e instanceof i.Collection||(this.optionCollection=n.request("create:new:hotspot:element:collection",e),this.textCollection=n.request("create:new:hotspot:element:collection",o),this.imageCollection=n.request("create:new:hotspot:element:collection",t),this.layout.model.set("optionCollection",this.optionCollection),this.layout.model.set("textCollection",this.textCollection),this.layout.model.set("imageCollection",this.imageCollection)),this.view=this._getHotspotView(),this.listenTo(this.view,"show show:hotspot:elements",function(t){return function(){return n.execute("show:question:elements",{model:t.layout.model}),n.execute("show:question:properties",{model:t.layout.model})}}(this)),this.listenTo(this.view,"close:hotspot:element:properties",function(){return n.execute("close:question:element:properties")}),this.listenTo(this.view,"show:hotspot:element:properties",function(t){return n.execute("show:hotspot:element:properties",{model:t,hotspotModel:this.layout.model})}),this.layout.elementRegion.show(this.view,{loading:!0})},o.prototype._parseArray=function(t,e,n){return s.each(t,function(t){return function(e){return t._parseObject(e)}}(this)),s.each(e,function(t){return function(e){return t._parseObject(e)}}(this)),s.each(n,function(t){return function(e){return t._parseObject(e)}}(this))},o.prototype._parseObject=function(t){var e,n,i;return i=["radius","marks","width","height","angle","textAngle","fontSize"],n=["x","y"],e=["toDelete","correct"],s.each(t,function(o,r){return indexOf.call(i,r)>=0&&(t[r]=parseInt(o)),indexOf.call(n,r)>=0&&(t[r]=parseFloat(o)),indexOf.call(e,r)>=0?t[r]=s.toBoolean(o):void 0})},o.prototype.deleteElement=function(t){return t.set("optionCollection",""),t.set("textCollection",""),t.set("imageCollection",""),o.__super__.deleteElement.call(this,t),n.execute("close:question:elements"),n.execute("close:question:properties"),n.execute("close:question:element:properties")},o}(e.Controller)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/content-creator/content-builder/elements/row/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Row.Views",function(t,e,n,i,o,r){var s;return s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="column empty-column",e.prototype.tagName="div",e.prototype.template="",e.prototype.onShow=function(){return this.$el.attr("data-position",this.model.get("position")),this.$el.addClass("col-md-"+this.model.get("className")).attr("data-class",this.model.get("className")),this.$el.sortable({revert:"invalid",items:"> .element-wrapper",connectWith:".droppable-column,.column",handle:".aj-imp-drag-handle",start:function(t,e){e.placeholder.height(e.item.height()),window.dragging=!0},stop:function(t,e){window.dragging=!1},helper:"clone",opacity:.65,remove:function(t,e){return 0===o(t.target).children().length?o(t.target).addClass("empty-column"):void 0},update:function(t,e){return"Row"===e.item.find("form").find('input[name="element"]').val()&&e.item.children(".element-markup").children().trigger("row:is:moved",e.item.children(".element-markup").children().prop("id")),o(t.target).removeClass("empty-column")}})},e.prototype.onClose=function(){return this.$el.hasClass("ui-sortable")?this.$el.sortable("destroy"):void 0},e}(i.ItemView),t.RowView=function(t){function e(){return this.adjustColumnsInRow=bind(this.adjustColumnsInRow,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="row",e.prototype.template="&nbsp;",e.prototype.itemView=s,e.prototype.initialize=function(t){var e,i,o,s,a,l,c,u,h,d,p;if(null==t&&(t={}),this.collection=new n.Collection,0===t.model.get("elements").length){for(u=[1,2],d=[],s=0,l=u.length;l>s;s++)o=u[s],d.push(this.collection.add({position:o,element:"Column",className:6,elements:[]}));return d}for(h=t.model.get("elements"),p=[],a=0,c=h.length;c>a;a++)i=h[a],e=r.clone(i),delete e.elements,p.push(this.collection.add(e));return p},e.prototype.onShow=function(){return this.$el.attr("id",r.uniqueId("row-")),r.delay(function(t){return function(){return t.setColumnResizer()}}(this),400),this.$el.on("row:is:moved",function(t){return function(e,n){return t.$el.attr("id")===n?(console.log(n+" is moved"),t.setColumnResizer()):void 0}}(this)),this.$el.find(".column").on("class:changed",function(t){return function(e){return e.stopPropagation(),t.$el.find(".row").trigger("adjust:resizer")}}(this)),this.$el.on("adjust:resizer",function(t){return function(e){return e.stopPropagation(),console.log("column resizer set"),t.setColumnResizer()}}(this))},e.prototype.onStyleChanged=function(t,e){return r(e).isEmpty()||this.$el.removeClass(e),this.$el.addClass(t),this.setColumnResizer()},e.prototype.onColumnCountChanged=function(t){return this.adjustColumnsInRow(t)},e.prototype.columnCount=function(){return this.$el.children(".column").length},e.prototype.getColumns=function(){return this.$el.children(".column")},e.prototype.getResizers=function(){return this.$el.closest(".element-wrapper").find(".element-controls > .aj-imp-col-divider")},e.prototype.getColumnAt=function(t){var e;return e=this.$el.children(".column"),e[t]},e.prototype.clearResizers=function(){var t,e,n,i,r;for(n=this.getResizers(),r=[],t=0,e=n.length;e>t;t++)i=n[t],o(i).hasClass("ui-draggable")?(o(i).draggable("destroy"),r.push(o(i).remove())):r.push(void 0);return r},e.prototype.destroySortableColumns=function(){return this.$el.children(".column").sortable("destroy")},e.prototype.onClose=function(){return this.clearResizers(),this.destroySortableColumns()},e.prototype.setColumnResizer=function(){var t,e;return this.clearResizers(),1!==this.columnCount()?(e='<div class="aj-imp-col-divider"> <p title="Move"> <span class="fa fa-ellipsis-h"></span> </p> </div>',t=this.columnCount()-1,r.each(r.range(t),function(t){return function(n,i){var r,s,a;return r=t.getColumnAt(i+1),s=o(r).position().left-16,a=o(e),a.attr("data-position",i+1),a.css("left",s),t.$el.closest(".element-wrapper").children(".element-controls").append(a),t.makeResizer(a)}}(this)),this.setColumnResizerContainment()):void 0},e.prototype.makeResizer=function(t){var e,n,i,s;return n=t.parent(),s=n.width(),s/=12,i=this,e=r.throttle(function(t){return function(t,e){var n,r,s;return n=Math.round(e.position.left),s=Math.round(e.helper.start.left),n>s?(e.helper.start=e.position,r=o(t.target).attr("data-position"),i.resizeColumns("right",parseInt(r))):s>n?(e.helper.start=e.position,r=o(t.target).attr("data-position"),i.resizeColumns("left",parseInt(r))):void 0}}(this),0),t.draggable({axis:"x",containment:n,grid:[s,0],start:function(t){return function(t,e){return r.isUndefined(e.helper.start)?e.helper.start=e.originalPosition:void 0}}(this),stop:function(t){return function(e,n){return n.helper.start=n.position,t.setColumnResizerContainment()}}(this),drag:e})},e.prototype.resizeColumns=function(t,e){var n,i,r,s,a;if(n=[],n.push(this.getColumnAt(e-1)),n.push(this.getColumnAt(e)),r=parseInt(o(n[0]).attr("data-class")),i=parseInt(o(n[1]).attr("data-class")),0!==r&&0!==i){switch(t){case"right":a=r+1,s=i-1;break;case"left":a=r-1,s=i+1}if(0!==a&&0!==s)return o(n[0]).removeClass("col-md-"+r),o(n[1]).removeClass("col-md-"+i),o(n[0]).attr("data-class",a).addClass("col-md-"+a),o(n[1]).attr("data-class",s).addClass("col-md-"+s),o(n[0]).trigger("class:changed"),o(n[1]).trigger("class:changed")}},e.prototype.setColumnResizerContainment=function(){var t;return t=this.$el.closest(".element-wrapper").children(".element-controls").find(".aj-imp-col-divider"),r.each(t,function(t){return function(e){var n,i,r;return r=t.$el.width(),console.log(r),n=t.$el.offset().left+r/24,"undefined"!=typeof o(e).prev(".aj-imp-col-divider").position()&&(n=t.$el.offset().left+parseFloat(o(e).prev(".aj-imp-col-divider").css("left"))+r/24),i=t.$el.offset().left+r-r/16,"undefined"!=typeof o(e).next(".aj-imp-col-divider").position()&&(i=t.$el.offset().left+parseFloat(o(e).next(".aj-imp-col-divider").css("left"))-r/24),o(e).draggable("option","containment",[n,0,i,0])}}(this))},e.prototype.addNewColumn=function(t,e){return this.collection.add({position:e,element:"Column",className:parseInt(t),elements:[]})},e.prototype.removeColumn=function(t){var e,n;return e=parseInt(t.attr("data-position")),n=this.collection.findWhere({position:e}),this.collection.remove(n)},e.prototype.adjustColumnsInRow=function(t){var e,n,i,s,a,l,c,u,h,d,p,f;if(f=t,f!==this.columnCount()){if(e=12/f,f>this.columnCount())for(l=f-this.columnCount(),r.each(this.getColumns(),function(t){return function(t,n){var i;return i=o(t).attr("data-class"),o(t).removeClass("col-md-"+i).addClass("col-md-"+e).attr("data-class",e)}}(this)),t=this.columnCount(),p=r.range(l),u=0,h=p.length;h>u;u++)c=p[u],this.addNewColumn(e,t+c+1);else if(f<this.columnCount()){if(a=[],r.each(this.getColumns(),function(t,e){return o(t).isEmptyColumn()?a.push(o(t)):void 0}),s=a.length,0===s)return void alert("None of the columns are empty. Please delete elements inside columns to remove");if(this.columnCount()-f>s)return void alert("Unable to perform this action");i=0,i=this.columnCount()-f<=s?this.columnCount()-f:s-f,d=[],n=this.getColumns().toArray().reverse(),r.each(n,function(t){return function(e,n){return 0!==i&&o(e).isEmptyColumn()?(t.removeColumn(o(e)),i--):void 0}}(this)),r.each(this.getColumns(),function(t,n){var i;return i=o(t).attr("data-class"),o(t).removeClass("col-md-"+i).addClass("col-md-"+e).attr("data-class",e)})}return this.setColumnResizer()}},e}(i.CollectionView)})}),define("text!apps/content-creator/content-builder/elements/row/settings/templates/settings.html",[],function(){return'\n<header class="settings-header">\n  <div class="row">\n    <div class="col-sm-10">\n      <h5 class="title">{{config.element}} Settings</h5>\n    </div>\n    <div class="col-sm-2 close-btn"><a href="#" class="close-settings">&times;</a></div>\n  </div>\n</header>\n<div class="row">\n  <div class="col-sm-12">\n    <form action="" method="POST" role="form" class="form-horizontal">\n    <!--   <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Choose Style</label>\n        <div class="col-sm-8">\n          <select name="style">\n            <option value="">None</option>{{#styles}}\n            <option value="{{name}}">{{name}}</option>{{/styles}}\n          </select>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Draggable</label>\n        <div class="col-sm-8"><span class="checkbox">\n            <input type="checkbox" name="draggable"/></span></div>\n        <div class="clearfix"></div>\n      </div> -->\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">No of columns</label>\n        <div class="col-sm-8">\n          <div class="set-column-count btn-group btn-group-xs"><a class="btn btn-default">1 </a><a class="btn btn-default">2 </a><a class="btn btn-default">3 </a><a class="btn btn-default">4 </a><a class="btn btn-default">6 </a></div>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/row/settings/views",["app","text!apps/content-creator/content-builder/elements/row/settings/templates/settings.html"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Row.Settings.Views",function(t,n,i,o,r,s){return t.SettingsView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="modal-content settings-box",i.prototype.initialize=function(t){return null==t&&(t={}),this.eleModel=t.eleModel,i.__super__.initialize.call(this,t)},i.prototype.onRender=function(){return this.$el.find('input[type="checkbox"]').checkbox(),this.setFields()},i.prototype.setFields=function(){return this.eleModel.get("draggable")===!0?this.$el.find('input[name="draggable"]').checkbox("check"):void 0},i.prototype.events={click:function(t){return t.stopPropagation()},"click .close-settings":function(t){return t.preventDefault(),n.settingsRegion.close()},"click .set-column-count a.btn":function(t){return this.trigger("element:column:count:changed",parseInt(r(t.target).text()))},'change select[name="style"]':function(t){return this.trigger("element:style:changed",r(t.target).val())},'change input[name="draggable"]':function(t){return this.trigger("element:draggable:changed",r(t.target).is(":checked"))}},i}(o.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/row/settings/controller",["app","controllers/region-controller","apps/content-creator/content-builder/elements/row/settings/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Row.Settings",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i;return null==t&&(t={}),this.model=t.model,this.region=n.settingsRegion,e=n.request("get:element:settings:options","Row"),i=this._getSettingView(e,this.model),this.listenTo(i,"show",function(t){return function(){return t.region.$el.center(!1)}}(this)),this.listenTo(i,"element:style:changed",function(t){return function(e){return t.model.set("style",e)}}(this)),this.listenTo(i,"element:draggable:changed",function(t){return function(e){return t.model.set("draggable",e)}}(this)),this.listenTo(i,"element:column:count:changed",function(t){return function(e){return t.model.set("columncount",e)}}(this)),this.show(i)},i.prototype._getSettingView=function(e,n){return new t.Views.SettingsView({eleModel:n,model:e})},i}(e),n.vent.on("show:row:settings:popup",function(e){return new t.Controller({model:e})})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/row/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/row/views","apps/content-creator/content-builder/elements/row/settings/controller"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Row",function(t,n,i,o,r,s){return t.Controller=function(e){function n(){return this.renderElement=bind(this.renderElement,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"Row",columncount:2,elements:[],meta_id:0}),n.__super__.initialize.call(this,t)},n.prototype.bindEvents=function(){return this.listenTo(this.layout.model,"change:style",this.changeStyle),this.listenTo(this.layout.model,"change:columncount",this.columnCountChanged),n.__super__.bindEvents.call(this)},n.prototype._getRowView=function(){return new t.Views.RowView({model:this.layout.model})},n.prototype.columnCountChanged=function(t){return this.layout.elementRegion.currentView.triggerMethod("column:count:changed",t.get("columncount"))},n.prototype.changeStyle=function(t){var e,n,i;return n=null!=(i=t.previous("style"))?i:"",e=t.get("style"),this.layout.elementRegion.currentView.triggerMethod("style:changed",s.slugify(e),s.slugify(n)),this.layout.setHiddenField("style",e)},n.prototype.renderElement=function(){var t;return this.removeSpinner(),t=this._getRowView(),this.layout.elementRegion.show(t),this.changeStyle(this.layout.model)},n.prototype.deleteElement=function(t){return this.layout.elementRegion.currentView.$el.canBeDeleted()?t.destroy():alert("Please remove elements inside row and then delete.")},n}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/text/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Text.Views",function(t,e,n,i,o,r){return t.TextView=function(t){function e(){return this.configureEditor=bind(this.configureEditor,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="div",e.prototype.template="",e.prototype.className="text",e.prototype.events={"click a":function(t){return t.preventDefault()},blur:function(){return this.trigger("text:element:blur",this.$el.html())}},e.prototype.onShow=function(){return CKEDITOR.dtd.$removeEmpty.span=!1,this.$el.attr("contenteditable","true").attr("id",r.uniqueId("text-")),CKEDITOR.on("instanceCreated",this.configureEditor),this.editor=CKEDITOR.inline(document.getElementById(this.$el.attr("id"))),this.editor.setData(r.stripslashes(this.model.get("content")))},e.prototype.configureEditor=function(t){var e,n;return e=t.editor,n=e.element,n.getAttribute("id")===this.$el.attr("id")?e.on("configLoaded",function(){return e.config.placeholder="This is a Text Block. Use this to provide textâ¦"}):void 0},e.prototype.onClose=function(){return this.editor.destroy()},e}(i.ItemView)})}),define("text!apps/content-creator/content-builder/elements/text/settings/templates/settings.html",[],function(){return'\n<header class="settings-header">\n  <div class="row">\n    <div class="col-sm-10">\n      <h5 class="title">{{element}} Settings</h5>\n    </div>\n    <div class="col-sm-2 close-btn"><a href="#" class="close-settings">&times;</a></div>\n  </div>\n</header>\n<div class="row">\n  <div class="col-sm-12">\n    <form action="" method="POST" role="form" class="form-horizontal">\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Draggable</label>\n        <div class="col-sm-8"><span class="checkbox">\n            <input type="checkbox" name="draggable"/></span></div>\n      </div>\n    </form>\n  </div>\n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/text/settings/views",["app","text!apps/content-creator/content-builder/elements/text/settings/templates/settings.html"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Text.Settings.Views",function(t,n,i,o,r,s){return t.SettingsView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="modal-content settings-box",i.prototype.initialize=function(t){return null==t&&(t={}),this.eleModel=t.eleModel,i.__super__.initialize.call(this,t)},i.prototype.onRender=function(){return this.$el.find('input[type="checkbox"]').checkbox(),this.setFields()},i.prototype.setFields=function(){return this.eleModel.get("draggable")===!0?this.$el.find('input[name="draggable"]').checkbox("check"):void 0},i.prototype.events={"click .close-settings":function(t){return t.preventDefault(),n.settingsRegion.close()},'change input[name="draggable"]':function(t){return this.trigger("element:draggable:changed",r(t.target).is(":checked"))}},i}(o.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/text/settings/controller",["app","controllers/region-controller","apps/content-creator/content-builder/elements/text/settings/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Text.Settings",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i;return null==t&&(t={}),this.model=t.model,this.region=n.settingsRegion,e=n.request("get:element:settings:options","Text"),i=this._getSettingView(e,this.model),this.listenTo(i,"render",function(t){return function(){return t.region.$el.css("top",200),t.region.$el.css("left",400)}}(this)),this.listenTo(i,"element:style:changed",function(t){return function(e){return t.model.set("style",e)}}(this)),this.listenTo(i,"element:draggable:changed",function(t){return function(e){return t.model.set("draggable",e)}}(this)),this.show(i)},i.prototype._getSettingView=function(e,n){return new t.Views.SettingsView({eleModel:n,model:e})},i}(e),n.vent.on("show:text:settings:popup",function(e){return new t.Controller({model:e})})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/text/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/text/views","apps/content-creator/content-builder/elements/text/settings/controller"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Text",function(t,n,i,o,r,s){return t.Controller=function(e){function n(){return this.renderElement=bind(this.renderElement,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"Text",content:""}),n.__super__.initialize.call(this,t)},n.prototype.bindEvents=function(){return n.__super__.bindEvents.call(this)},n.prototype._getTextView=function(e){return new t.Views.TextView({model:e})},n.prototype.renderElement=function(){var t;return this.removeSpinner(),t=this._getTextView(this.layout.model),this.listenTo(t,"text:element:blur",function(t){return function(e){return t.layout.model.set("content",""+e),t.layout.model.hasChanged()?(console.log(t.layout.model),t.layout.model.save()):void 0}}(this)),this.layout.elementRegion.show(t)},n}(e.Controller)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/image/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Image.Views",function(t,e,n,i,o,r){return t.ImageView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="image",e.prototype.template='{{#image}} <img src="{{imageurl}}" alt="{{title}}" class="{{alignclass}} img-responsive" width="100%"/> <div class="clearfix"></div> {{/image}} {{#placeholder}} <div class="image-placeholder" ><span class="bicon icon-uniF10E"></span>Add Image</div> {{/placeholder}}',e.prototype.modelEvents={change:"render"},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),this.model.isNew()?(console.log(this.model.id),t.placeholder=!0):(t.image=!0,t.imageurl="",t.alignclass=function(){return""}),t},e.prototype.events={"click .image-placeholder, .img-responsive":"imageClick"},e.prototype.initialize=function(t){return this.imageHeightRatio=i.getOption(this,"imageHeightRatio"),this.positionTopRatio=i.getOption(this,"positionTopRatio")},e.prototype.onShow=function(){return this.model.isNew()?void this.$el.resizable({handles:"s",stop:function(t){return function(e,n){return t.$el.css("width","auto")}}(this)}):("auto"!==this.imageHeightRatio&&this.$el.height(parseFloat(this.imageHeightRatio)*this.$el.width()),this.positionTopRatio&&this.$el.find("img").css("top",this.positionTopRatio*this.$el.width()+"px"),this.$el.resizable({handles:"s",stop:function(t){return function(e,n){return t.$el.css("width","auto"),t.trigger("set:image:height",t.$el.height(),t.$el.width()),t.adjustImagePosition()}}(this),start:function(t){return function(e,n){return o(t).addClass("noclick")}}(this)}),this.$el.css("overflow","hidden"),this.$el.find("img").draggable({axis:"y",cursor:"move",drag:function(t){return function(e,n){var i;return i=n.position.top,i>0&&(n.position.top=0),i<t.$el.height()-t.$el.find("img").height()?n.position.top=t.$el.height()-t.$el.find("img").height():void 0}}(this),stop:function(t){return function(e,n){return t.trigger("set:image:top:position",t.$el.width(),parseInt(t.$el.find("img").css("top")))}}(this)}),this.$el.closest(".column").on("class:changed",function(t){return function(){return t.assignImagePath(),t.$el.height()>t.$el.find("img").height()?(t.$el.height("auto"),t.trigger("set:image:height","auto")):t.trigger("set:image:height",t.$el.height(),t.$el.width()),t.adjustImagePosition()}}(this)),this.assignImagePath())},e.prototype.imageClick=function(t){var e;return t.stopPropagation(),o(t.target).hasClass("noclick")?o(t.target).removeClass("noclick"):(e=this._getImageRatio(),this.trigger("show:media:manager",e))},e.prototype.assignImagePath=function(){var t,e;return e=this.$el.width(),t=this.model.getBestFit(e),this.$el.find("img").attr("src",t.url),this.trigger("image:size:selected",t.size)},e.prototype._getImageRatio=function(){var t,e;return console.log(this.$el),e=this.$el.width(),t=this.$el.height(),parseInt(e)+":"+parseInt(t)},e.prototype.adjustImagePosition=function(){var t;return t=parseInt(r(this.$el.find("img").css("top")).rtrim("px")),t>0&&this.$el.find("img").css("top","0px"),this.trigger("set:image:top:position",this.$el.width(),parseInt(this.$el.find("img").css("top")))},e}(i.ItemView)})}),define("text!apps/content-creator/content-builder/elements/image/settings/templates/settings.html",[],function(){return'\n<header class="settings-header">\n  <div class="row">\n    <div class="col-sm-10">\n      <h5 class="title">{{element}} Settings</h5>\n    </div>\n    <div class="col-sm-2 close-btn"><a href="#" class="close-settings">&times;</a></div>\n  </div>\n</header>\n<div class="row">\n  <div class="col-sm-12">\n    <form action="" method="POST" role="form" class="form-horizontal">\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Draggable</label>\n        <div class="col-sm-8"><span class="checkbox">\n            <input type="checkbox" name="draggable"/></span></div>\n      </div>\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Align</label>\n        <div class="col-sm-8">\n          <select name="align">\n            <option value="left">Left</option>\n            <option value="right">Right</option>\n          </select>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Top Margin</label>\n        <div class="col-sm-8">\n          <select name="top_margin" class="spacing">\n            <option value="">None</option>\n            <option value="top-margin-small">Small</option>\n            <option value="top-margin-medium">Medium</option>\n            <option value="top-margin-large">Large</option>\n          </select>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Bottom Margin</label>\n        <div class="col-sm-8">\n          <select name="bottom_margin" class="spacing">\n            <option value="">None</option>\n            <option value="bottom-margin-small">Small</option>\n            <option value="bottom-margin-medium">Medium</option>\n            <option value="bottom-margin-large">Large</option>\n          </select>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Left Margin</label>\n        <div class="col-sm-8">\n          <select name="left_margin" class="spacing">\n            <option value="">None</option>\n            <option value="left-margin-small">Small</option>\n            <option value="left-margin-medium">Medium</option>\n            <option value="left-margin-large">Large</option>\n          </select>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Right Margin</label>\n        <div class="col-sm-8">\n          <select name="right_margin" class="spacing">\n            <option value="">None</option>\n            <option value="right-margin-small">Small</option>\n            <option value="right-margin-medium">Medium</option>\n            <option value="right-margin-large">Large</option>\n          </select>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/image/settings/views",["app","text!apps/content-creator/content-builder/elements/image/settings/templates/settings.html"],function(t,e){
return t.module("ContentCreator.ContentBuilder.Element.Image.Settings.Views",function(t,n,i,o,r,s){return t.SettingsView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="modal-content settings-box",i.prototype.initialize=function(t){return null==t&&(t={}),this.eleModel=t.eleModel,i.__super__.initialize.call(this,t)},i.prototype.onRender=function(){return this.$el.find('input[type="checkbox"]').checkbox(),this.$el.find("select").select2({minimumResultsForSearch:-1}),this.setFields()},i.prototype.setFields=function(){return this.eleModel.get("draggable")===!0&&this.$el.find('input[name="draggable"]').checkbox("check"),this.$el.find('select[name="align"]').select2("val",this.eleModel.get("align")),this.$el.find('select[name="top_margin"]').select2("val",this.eleModel.get("top_margin")),this.$el.find('select[name="left_margin"]').select2("val",this.eleModel.get("left_margin")),this.$el.find('select[name="bottom_margin"]').select2("val",this.eleModel.get("bottom_margin")),this.$el.find('select[name="right_margin"]').select2("val",this.eleModel.get("right_margin"))},i.prototype.events={click:function(t){return t.stopPropagation()},"click .close-settings":function(t){return t.preventDefault(),n.settingsRegion.close()},'change input[name="draggable"]':function(t){return this.trigger("element:draggable:changed",r(t.target).is(":checked"))},'change select[name="align"]':function(t){return this.trigger("element:alignment:changed",r(t.target).val())},"change select.spacing":function(t){return this.trigger("element:spacing:changed",r(t.target).attr("name"),r(t.target).val())}},i}(o.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/image/settings/controller",["app","controllers/region-controller","apps/content-creator/content-builder/elements/image/settings/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Image.Settings",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i;return null==t&&(t={}),this.model=t.model,this.region=n.settingsRegion,e=n.request("get:element:settings:options","Image"),i=this._getSettingView(e,this.model),this.listenTo(i,"show",function(t){return function(){return t.region.$el.center(!1)}}(this)),this.listenTo(i,"element:style:changed",function(t){return function(e){return t.model.set("style",e)}}(this)),this.listenTo(i,"element:draggable:changed",function(t){return function(e){return t.model.set("draggable",e)}}(this)),this.listenTo(i,"element:alignment:changed",function(t){return function(e){return t.model.set("align",e)}}(this)),this.listenTo(i,"element:spacing:changed",function(t){return function(e,n){return t.model.set(e,n),console.log(t.model)}}(this)),this.show(i)},i.prototype.onClose=function(){return this.model.hasChanged()?this.model.save(null,{wait:!0}):void 0},i.prototype._getSettingView=function(e,n){return new t.Views.SettingsView({eleModel:n,model:e})},i}(e),n.vent.on("show:image:settings:popup",function(e){return new t.Controller({model:e})})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/image/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/image/views","apps/content-creator/content-builder/elements/image/settings/controller"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Image",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"Image",image_id:0,size:"thumbnail",align:"left",heightRatio:"auto",topRatio:0}),"auto"!==t.modelData.heightRatio&&(t.modelData.heightRatio=parseFloat(t.modelData.heightRatio)),s.isNaN(t.modelData.topRatio)&&(t.modelData.topRatio=0),i.__super__.initialize.call(this,t)},i.prototype.bindEvents=function(){return this.listenTo(this.layout.model,"change:image_id",this.renderElement),i.__super__.bindEvents.call(this)},i.prototype._getTemplateHelpers=function(){return{size:this.layout.model.get("size"),alignment:this.layout.model.get("align")}},i.prototype._getImageView=function(e){return new t.Views.ImageView({model:e,imageHeightRatio:this.layout.model.get("heightRatio"),positionTopRatio:parseFloat(this.layout.model.get("topRatio")),templateHelpers:this._getTemplateHelpers()})},i.prototype.renderElement=function(){var t;return this.removeSpinner(),t=n.request("get:media:by:id",this.layout.model.get("image_id")),n.execute("when:fetched",t,function(e){return function(){var i;return i=e._getImageView(t),e.listenTo(i,"show:media:manager",function(t){return null==t&&(t=!1),n.currentImageRatio=t,n.execute("show:media:manager:app",{region:n.dialogRegion,mediaType:"image"}),e.listenTo(n.vent,"media:manager:choosed:media",function(t){return e.layout.model.set("image_id",t.get("id")),n.currentImageRatio=!1,e.stopListening(n.vent,"media:manager:choosed:media")}),e.listenTo(n.vent,"stop:listening:to:media:manager",function(){return n.currentImageRatio=!1,e.stopListening(n.vent,"media:manager:choosed:media")})}),e.listenTo(i,"image:size:selected",function(t){return e.layout.model.set("size",t),e.layout.model.save()}),e.listenTo(i,"set:image:height",function(t,n){return e.layout.model.set("height",t),"auto"===t?e.layout.model.set("heightRatio","auto"):e.layout.model.set("heightRatio",t/n),e.layout.model.save()}),e.listenTo(i,"set:image:top:position",function(t,n){return e.layout.model.set("top",n),e.layout.model.set("topRatio",n/t),e.layout.model.save()}),e.layout.elementRegion.show(i)}}(this))},i}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/imagewithtext/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.ImageWithText.Views",function(t,e,n,i,o,r){return t.ImageWithTextView=function(t){function e(){return this.configureEditor=bind(this.configureEditor,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="imagewithtext",e.prototype.template='{{#image}} <img src="{{imageurl}}" alt="{{title}}" class="{{alignclass}} img-responsive"/> {{/image}} {{#placeholder}} <div class="image-placeholder"><span class="bicon icon-uniF10E"></span>Add Image</div> {{/placeholder}} <div class="editor"></div> <div class="clearfix"></div>',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.holder="",this.model.isNew()?t.placeholder=!0:(t.image=!0,t.imageurl=function(){return this.sizes.thumbnail?this.sizes.thumbnail.url:this.sizes.full.url}),t.alignclass=function(){switch(this.align){case"left":return"pull-left";case"right":return"pull-right"}},t},e.prototype.events={"click img,.image-placeholder":function(t){return this.trigger("show:media:manager")},"blur .editor":function(t){return this.trigger("text:element:blur",this.$el.children(".editor").html())}},e.prototype.onStyleUpadted=function(t,e){return this.$el.removeClass(e).addClass(t)},e.prototype.onRender=function(){var t;return t=i.getOption(this,"style"),this.onStyleUpadted(r.slugify(t),"")},e.prototype.onShow=function(){var t;return this.$el.children(".editor").attr("contenteditable","true").attr("id",r.uniqueId("text-")),CKEDITOR.on("instanceCreated",this.configureEditor),this.editor=CKEDITOR.inline(document.getElementById(this.$el.children(".editor").attr("id"))),t=i.getOption(this,"templateHelpers").content,this.editor.setData(r.stripslashes(t))},e.prototype.configureEditor=function(t){var e,n;return e=t.editor,n=e.element,n.getAttribute("id")===this.$el.children(".editor").attr("id")?e.on("configLoaded",function(){return e.config.placeholder="Your text goes here. You can change the format of the text using the text editor provided. Upload image by clicking on the image placeholder..."}):void 0},e}(i.ItemView)})}),define("text!apps/content-creator/content-builder/elements/imagewithtext/settings/templates/settings.html",[],function(){return'\n<header class="settings-header">\n  <div class="row">\n    <div class="col-sm-10">\n      <h5 class="title">{{element}} Settings</h5>\n    </div>\n    <div class="col-sm-2 close-btn"><a href="#" class="close-settings">&times;</a></div>\n  </div>\n</header>\n<div class="row">\n  <div class="col-sm-12">\n    <form action="" method="POST" role="form" class="form-horizontal">\n      <div class="form-group">\n        <label for="" class="col-sm-4 control-label">Align</label>\n        <div class="col-sm-8">\n          <select name="align">\n            <option value="left">Left</option>\n            <option value="right">Right</option>\n          </select>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/imagewithtext/settings/views",["app","text!apps/content-creator/content-builder/elements/imagewithtext/settings/templates/settings.html"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.ImageWithText.Settings.Views",function(t,n,i,o,r,s){return t.SettingsView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="modal-content settings-box",i.prototype.initialize=function(t){return null==t&&(t={}),this.eleModel=t.eleModel,i.__super__.initialize.call(this,t)},i.prototype.onRender=function(){return this.$el.find('input[type="checkbox"]').checkbox(),this.$el.find("select").select2({minimumResultsForSearch:-1}),this.setFields()},i.prototype.setFields=function(){return this.eleModel.get("draggable")===!0&&this.$el.find('input[name="draggable"]').checkbox("check"),this.$el.find('select[name="align"]').select2("val",this.eleModel.get("align"))},i.prototype.events={click:function(t){return t.stopPropagation()},"click .close-settings":function(t){return t.preventDefault(),n.settingsRegion.close()},'change select[name="style"]':function(t){return this.trigger("element:style:changed",r(t.target).val())},'change input[name="draggable"]':function(t){return this.trigger("element:draggable:changed",r(t.target).is(":checked"))},'change select[name="align"]':function(t){return this.trigger("element:alignment:changed",r(t.target).val())}},i}(o.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/imagewithtext/settings/controller",["app","controllers/region-controller","apps/content-creator/content-builder/elements/imagewithtext/settings/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.ImageWithText.Settings",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i;return null==t&&(t={}),this.model=t.model,this.region=n.settingsRegion,e=n.request("get:element:settings:options","ImageWithText"),i=this._getSettingView(e,this.model),this.listenTo(i,"show",function(t){return function(){return t.region.$el.center(!1)}}(this)),this.listenTo(i,"element:style:changed",function(t){return function(e){return t.model.set("style",e)}}(this)),this.listenTo(i,"element:draggable:changed",function(t){return function(e){return t.model.set("draggable",e)}}(this)),this.listenTo(i,"element:alignment:changed",function(t){return function(e){return t.model.set("align",e)}}(this)),this.show(i)},i.prototype.onClose=function(){return this.model.hasChanged()?this.model.save(null,{wait:!0}):void 0},i.prototype._getSettingView=function(e,n){return new t.Views.SettingsView({eleModel:n,model:e})},i}(e),n.vent.on("show:imagewithtext:settings:popup",function(e){return new t.Controller({model:e})})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/imagewithtext/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/imagewithtext/views","apps/content-creator/content-builder/elements/imagewithtext/settings/controller"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.ImageWithText",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"ImageWithText",image_id:0,size:"thumbnail",align:"left",style:"",content:""}),i.__super__.initialize.call(this,t)},i.prototype.bindEvents=function(){return this.listenTo(this.layout.model,"change:image_id",this.renderElement),this.listenTo(this.layout.model,"change:style",this.changeElementStyle),this.listenTo(this.layout.model,"change:size",this.renderElement),this.listenTo(this.layout.model,"change:align",this.renderElement),i.__super__.bindEvents.call(this)},i.prototype._getTemplateHelpers=function(){return{size:this.layout.model.get("size"),align:this.layout.model.get("align"),content:this.layout.model.get("content")}},i.prototype._getImageWithTextView=function(e,n){return new t.Views.ImageWithTextView({model:e,templateHelpers:this._getTemplateHelpers(),style:n})},i.prototype.changeElementStyle=function(t){var e,n;return n=s.slugify(t.previous("style")),e=s.slugify(t.get("style")),this.layout.elementRegion.currentView.triggerMethod("style:upadted",e,n)},i.prototype.renderElement=function(){var t;return this.removeSpinner(),t=n.request("get:media:by:id",this.layout.model.get("image_id")),n.execute("when:fetched",t,function(e){return function(){var i;return i=e._getImageWithTextView(t,e.layout.model.get("style")),e.listenTo(i,"show:media:manager",function(){return n.execute("show:media:manager:app",{region:n.dialogRegion,mediaType:"image"}),e.listenTo(n.vent,"media:manager:choosed:media",function(t,i){return e.layout.model.set("image_id",t.get("id")),e.layout.model.set("size",i),e.layout.model.save(),localStorage.setItem("ele"+e.layout.model.get("meta_id"),JSON.stringify(e.layout.model.toJSON())),e.stopListening(n.vent,"media:manager:choosed:media")}),e.listenTo(n.vent,"stop:listening:to:media:manager",function(){return e.stopListening(n.vent,"media:manager:choosed:media")})}),e.listenTo(i,"text:element:blur",function(t){return e.layout.model.set("content",""+t),e.layout.model.hasChanged()&&e.layout.model.save(),e.layout.model.hasChanged()?localStorage.setItem("ele"+e.layout.model.get("meta_id"),JSON.stringify(e.layout.model.toJSON())):void 0}),e.layout.elementRegion.show(i)}}(this))},i}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/mcq/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Mcq.Views",function(t,e,n,i,o,r){return t.McqView=function(t){function e(){return this._showProperties=bind(this._showProperties,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="mcq",e.prototype.onShow=function(){return this.$el.attr("id","mcq-container"),this.$el.closest(".element-wrapper").off("click",this._showProperties),this.$el.closest(".element-wrapper").on("click",this._showProperties),this.trigger("create:row:structure",{container:this.$el}),this.$el.find(".row").closest(".element-wrapper").children(".element-controls").find(".aj-imp-drag-handle, .aj-imp-delete-btn, .aj-imp-delete-btn, .aj-imp-settings-btn").remove(),this.$el.children(".element-wrapper").children(".element-markup").children(".row").children(".column").sortable("disable")},e.prototype._showProperties=function(t){return this.trigger("show:this:mcq:properties"),t.stopPropagation()},e.prototype.onPreTickAnswers=function(){return console.log(this.model.get("correct_answer")),r.each(this.model.get("correct_answer"),r.bind(this._tickToggleOption,this,!0))},e.prototype._tickToggleOption=function(t,e){return this.$el.find("input:checkbox[id=option-"+e+"]").attr("checked",t),t?this.$el.find("input:checkbox[id=option-"+e+"]").parent().css("background-position","0px -26px"):this.$el.find("input:checkbox[id=option-"+e+"]").parent().css("background-position","0px 0px")},e.prototype.onUpdateTick=function(){var t,e,n;return t=this.model.get("correct_answer"),e=this.model.get("optioncount"),n=r.difference(r.range(1,e+1),t),r.each(n,r.bind(this._tickToggleOption,this,!1))},e.prototype.onGetAllOptionElements=function(){var t,e;return t=this.$el.children(".element-wrapper").children(".element-markup").children(".row").children(".column").find(".row").find(".element-wrapper"),e=new Array,console.log(e),r.each(t,function(t,n){var i;return i=parseInt(o(t).closest(".column[data-option]").attr("data-option")),console.log(e[i-1]),e[i-1]=null!=e[i-1]?e[i-1]:new Array,console.log(e[i-1]),e[i-1].push({element:o(t).find('form input[name="element"]').val(),meta_id:parseInt(o(t).find('form input[name="meta_id"]').val())})}),this.model.set("elements",e),console.log(JSON.stringify(this.model.get("elements")))},e}(i.ItemView),t.McqOptionView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="mcq-option",e.prototype.tagName="div",e.prototype.template='<span class="optionNo">{{optionNo}}</span> <input class="mcq-option-select" id="option-{{optionNo}}" type="checkbox"  value="no">',e.prototype.events={"change input:checkbox":"_onClickOfCheckbox"},e.prototype.onShow=function(){return this.$el.find("input:checkbox").screwDefaultButtons({image:'url("../wp-content/themes/walnut/images/csscheckbox-correct.png")',width:32,height:26}),this.$el.closest(".row").closest(".column").on("class:changed",function(t){return function(){return t.model.set("class",parseInt(t.$el.closest(".row").closest(".column").attr("data-class"))),console.log(t.model.get("class"))}}(this))},e.prototype._onClickOfCheckbox=function(t){return o(t.target).prop("checked")?(console.log("checked"),this.trigger("option:checked",this.model)):(console.log("unchecked"),this.trigger("option:unchecked",this.model))},e}(i.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/mcq/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/mcq/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Mcq",function(t,n,i,o,r,s){return t.Controller=function(e){function o(){return this._changeColumnCount=bind(this._changeColumnCount,this),this._changeMultipleAnswers=bind(this._changeMultipleAnswers,this),this._changeOptionCount=bind(this._changeOptionCount,this),this._optionUnchecked=bind(this._optionUnchecked,this),this._optionChecked=bind(this._optionChecked,this),this.renderElement=bind(this.renderElement,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"Mcq",optioncount:4,columncount:2,options:[{optionNo:1,"class":6},{optionNo:2,"class":6},{optionNo:3,"class":6},{optionNo:4,"class":6}],elements:[],marks:1,multiple:!1,correct_answer:[3],complete:!1}),o.__super__.initialize.call(this,t),this.layout.model.on("change:columncount",this._changeColumnCount),this.layout.model.on("change:optioncount",this._changeOptionCount),this.layout.model.on("change:multiple",this._changeMultipleAnswers)},o.prototype.renderElement=function(){var t,e;return e=this.layout.model.get("options"),this._parseOptions(e),e instanceof i.Collection||(t=n.request("create:new:option:collection",e),this.layout.model.set("options",t)),this.view=this._getMcqView(),this.listenTo(this.view,"show show:this:mcq:properties",function(t){return function(e){return n.execute("show:question:properties",{model:t.layout.model})}}(this)),this.listenTo(this.view,"create:row:structure",this.createRowStructure),this.layout.elementRegion.show(this.view)},o.prototype._getMcqView=function(){return new t.Views.McqView({model:this.layout.model})},o.prototype._parseOptions=function(t){return t instanceof i.Collection&&(t=t.toJSON()),s.each(t,function(t){return null!=t.marks&&(t.marks=parseFloat(t.marks)),null!=t.optionNo&&(t.optionNo=parseInt(t.optionNo)),null!=t["class"]?t["class"]=parseInt(t["class"]):void 0}),this.layout.model.set("correct_answer",s.map(this.layout.model.get("correct_answer"),function(t){return parseInt(t)}))},o.prototype.createRowStructure=function(t){var e,i,o,r,s,a,l,c,u,h,d;for(e=parseInt(this.layout.model.get("columncount"))+1,o=function(){var t;for(t=[];e-=1;)console.log(e),i={position:this.layout.model.get("columncount")-e+1,element:"Column",className:12/this.layout.model.get("columncount"),elements:[]},t.push(i);return t}.call(this),u={element:"Row",columncount:this.layout.model.get("columncount"),elements:o},console.log(u),d=this.layout.model.get("optioncount"),h=1;d>0;){for(l=d>this.layout.model.get("columncount")?this.layout.model.get("columncount"):d,this._setColumnClassForRow(u,h,l),console.log(u),r=n.request("add:new:element",t.container,"Row",null,u),a=s=1,c=l;c>=1?c>=s:s>=c;a=c>=1?++s:--s)this._iterateThruOptions(r,h,a);d-=this.layout.model.get("columncount"),h+=1}return this.view.triggerMethod("pre:tick:answers")},o.prototype._setColumnClassForRow=function(t,e,n){var i,o,r;return r=function(){var t,n,i;for(i=[],o=t=1,n=this.layout.model.get("columncount");n>=1?n>=t:t>=n;o=n>=1?++t:--t)i.push((e-1)*this.layout.model.get("columncount")+o);return i}.call(this),i=12,s.each(r,function(e){return function(o,r){return e.layout.model.get("options").get(o)?(i-=e.layout.model.get("options").get(o).get("class"),t.elements[r].className=e.layout.model.get("options").get(o).get("class")):(t.elements[r].className=Math.floor(i/(e.layout.model.get("columncount")-n)),i-=Math.floor(i/(e.layout.model.get("columncount")-n)),n++)}}(this))},o.prototype._iterateThruOptions=function(t,e,i){var o,s,a,l,c,u,h;return o=this.layout.model.get("columncount"),c=(e-1)*this.layout.model.get("columncount")+i,a=i-1,s=t.layout.elementRegion.currentView.$el.children().eq(a),console.log(s),r(s).attr("data-option",c),l={element:"Row",columncount:1,elements:[{position:1,element:"Column",className:12,elements:[]}]},h=n.request("add:new:element",s,"Row",null,l),u=h.layout.elementRegion.currentView.$el.children().eq(0),this._fillOptionRowWithElements(u,c)},o.prototype._fillOptionRowWithElements=function(t,e){var i;return this._addMcqOption(t,this.layout.model.get("options").get(e)),null==this.layout.model.get("elements")[e-1]&&(this.layout.model.get("elements")[e-1]=[{element:"Text"}]),i=this.layout.model.get("elements")[e-1],s.each(i,function(e){return n.request("add:new:element",t,e.element,null,e)})},o.prototype._addMcqOption=function(t,e){var n;return n=this._getMcqOptionView(e),n.render(),r(t).removeClass("empty-column"),r(t).append(n.$el),this.listenTo(n,"option:checked",this._optionChecked),this.listenTo(n,"option:unchecked",this._optionUnchecked),n.triggerMethod("show"),r(t).on("remove",function(){return n.triggerMethod("close")})},o.prototype._getMcqOptionView=function(e){return new t.Views.McqOptionView({model:e})},o.prototype._optionChecked=function(t){var e;return e=this.layout.model.get("correct_answer"),!this.layout.model.get("multiple")&&e.length?(this.layout.model.set("correct_answer",[parseInt(t.get("optionNo"))]),console.log("in check"),this.view.triggerMethod("update:tick")):e.push(parseInt(t.get("optionNo"))),e.sort(),console.log(this.layout.model.get("correct_answer"))},o.prototype._optionUnchecked=function(t){var e,n;return e=this.layout.model.get("correct_answer"),n=r.inArray(t.get("optionNo"),e),e.splice(n,1),console.log(this.layout.model.get("correct_answer"))},o.prototype._changeOptionCount=function(t,e){var n,i,o;if(n=t.get("columncount"),i=t.previous("optioncount"),this._getAllOptionElements(),e>i)for(;i!==e;)i++,t.get("options").push({optionNo:i});if(i>e)for(;i!==e;)t.get("elements").pop(),o=t.get("options").pop(),t.set("correct_answer",s.without(t.get("correct_answer"),o.get("optionNo"))),i--;return t.get("options").each(s.bind(this._changeColumnClass,this,n)),this.layout.elementRegion.show(this.view)},o.prototype._changeMultipleAnswers=function(t,e){return e?void 0:(t.set("correct_answer",[]),this._getAllOptionElements(),this.layout.elementRegion.show(this.view))},o.prototype._changeColumnCount=function(t,e){return t.get("options").each(s.bind(this._changeColumnClass,this,e)),this._getAllOptionElements(),this.layout.elementRegion.show(this.view)},o.prototype._changeColumnClass=function(t,e){return e.set("class",12/t)},o.prototype._getAllOptionElements=function(){return this.view.triggerMethod("get:all:option:elements")},o.prototype.deleteElement=function(t){return t.set("options",""),delete t.get("options"),o.__super__.deleteElement.call(this,t),n.execute("close:question:properties")},o}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/fib/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Fib.Views",function(t,e,n,i,o,r){return t.FibView=function(t){function n(){return this._updateInputProperties=bind(this._updateInputProperties,this),this._onClickOfBlank=bind(this._onClickOfBlank,this),this._initializeEachBlank=bind(this._initializeEachBlank,this),this._afterCKEditorInitialization=bind(this._afterCKEditorInitialization,this),this.configureEditor=bind(this.configureEditor,this),n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.className="fib-text",n.prototype.modelEvents={"change:font":function(t,e){return this._changeFont(e)},"change:font_size":function(t,e){return this._changeFontSize(e)},"change:color":function(t,e){return this._changeColor(e)},"change:bg_color":function(t,e){return this._changeBGColor(t)},"change:bg_opacity":function(t,e){return this._changeBGColor(t)},"change:style":function(t,e){return this._changeFibStyle(e)},"change:numberOfBlanks":"_changeNumberOfBlanks"},n.prototype.events={"click a":function(t){return t.preventDefault()},"blur .fib-text":"onSaveText"},n.prototype.onShow=function(){return this.$el.parent().parent().on("click",function(t){return function(e){return t.trigger("show:this:fib:properties"),t.trigger("close:question:element:properties"),t.trigger("close:question:elements"),e.stopPropagation()}}(this)),this.$el.attr("contenteditable","true").attr("id",r.uniqueId("text-")),CKEDITOR.on("instanceCreated",this.configureEditor),this.editor=CKEDITOR.inline(document.getElementById(this.$el.attr("id"))),this.editor.setData(r.stripslashes(this.model.get("text"))),this.editor.on("instanceReady",function(t){return function(){return t._afterCKEditorInitialization()}}(this))},n.prototype.configureEditor=function(t){var e,n;return e=t.editor,n=e.element,n.getAttribute("id")===this.$el.attr("id")?e.on("configLoaded",function(t){return function(){return e.config.placeholder="This is a FIB Block. Use this to provide text and blanksâ¦"}}(this)):void 0},n.prototype._afterCKEditorInitialization=function(){return o("#cke_"+this.editor.name).on("click",function(t){return t.stopPropagation()}),this.$el.append('<p class="hidden-align-fix" contenteditable="false" style="display:none;"></p>'),this.model.get("numberOfBlanks")?(this.$el.find("input").wrap('<span contenteditable="false"></span>'),this.$el.find("input").before('<span class="fibno"></span>'),this.$el.find("input").parent().on("click",this._onClickOfBlank),this.model.get("blanksArray").each(this._initializeEachBlank)):this.model.set("numberOfBlanks",1),this.$el.on("DOMSubtreeModified",this._updateInputProperties),this._updateInputProperties()},n.prototype._initializeEachBlank=function(t){return this._changeBlankSize(t,t.get("blank_size")),this._changeCorrectAnswers(t,t.get("correct_answers")),this.listenTo(t,"change:correct_answers",this._changeCorrectAnswers),this.listenTo(t,"change:blank_size",this._changeBlankSize)},n.prototype._changeNumberOfBlanks=function(t,e){var n,i;if(0===e?(this.model.set({complete:!1}),this.model.set({error_info:"You need to set at least one blank"})):this.model.set({error_info:""}),this.$el.find("input").length!==e){if(e>t.previous("numberOfBlanks"))return n=e-t.previous("numberOfBlanks"),this._addBlanks(n);if(e<t.previous("numberOfBlanks"))return i=t.previous("numberOfBlanks")-e,this._removeBlanks(i)}},n.prototype._removeBlanks=function(t){var e;for(e=[];0!==t;)this.$el.find("input").last().parent().remove(),e.push(t--);return e},n.prototype._addBlanks=function(t){var e,n,i,o;for(o=[];0!==t;)n=r.uniqueId("input-"),i=this.model.get("blanksArray").size()+1,this.trigger("create:new:fib:element",n),this.$el.find("p").length||(this.$el.html("<p></p>"),this.$el.removeClass("placeholder")),this.$el.find("p").first().append("<span contenteditable='false'> <span class='fibno'>"+i+"</span><input type='text' data-id='"+n+"' data-cke-editable='1' style=' height :100%' contenteditable='false' ></span>&nbsp;&nbsp;"),e=this.model.get("blanksArray").get(n),this._initializeEachBlank(e),this.$el.find("input").parent().on("click",this._onClickOfBlank),o.push(t--);return o},n.prototype._onClickOfBlank=function(t){var n,i;return console.log("clicked"),"fibno"!==o(t.target).prop("class")?(i="INPUT"===o(t.target).prop("tagName")?o(t.target).attr("data-id"):o(t.target).children("input").attr("data-id"),n=this.model.get("blanksArray").get(i),e.execute("show:fib:element:properties",{model:n,fibModel:this.model}),this.trigger("show:this:fib:properties"),t.stopPropagation()):void 0},n.prototype._changeFont=function(t){return this.$el.find("input").css("font-family",t)},n.prototype._changeFontSize=function(t){return this.$el.find("input").css("font-size",t+"px")},n.prototype._changeColor=function(t){return this.$el.find("input").css("color",t)},n.prototype._changeBGColor=function(t){return this.$el.find("input").css("background-color",r.convertHex(this.model.get("bg_color"),this.model.get("bg_opacity")));
},n.prototype._changeFibStyle=function(t){return"uline"===t?this.$el.find("input").removeClass("border").addClass("underline"):"box"===t?this.$el.find("input").removeClass("underline").addClass("border"):this.$el.find("input").removeClass("underline border")},n.prototype._changeCorrectAnswers=function(t,e){return e.length?this.$el.find("input[data-id="+t.id+"]").val(e[0]):void 0},n.prototype._changeBlankSize=function(t,e){return this.$el.find("input[data-id="+t.id+"]").attr("size",e)},n.prototype.onSaveText=function(){var t,e;return e="",t=this.$el.find("p"),r.each(t,function(n){return function(n,i){var r;return o(n).hasClass("hidden-align-fix")||(r=o(n).clone(),o(r).find("input").attr("value",""),o(r).find("input").unwrap(),o(r).find("input").prev().remove(),e+=r.html(),i===t.length-1)?void 0:e+="<br>"}}(this)),this.model.set("text",e)},n.prototype._updateInputProperties=function(){return r.each(this.$el.find("input"),function(t){return function(e,n){return r.delay(function(){var i;return i=t.model.get("blanksArray").get(o(e).attr("data-id")),void 0!==i&&i.set("blank_index",n+1),parseInt(o(e).prev().text())!==n+1?o(e).prev().text(n+1):void 0},20)}}(this)),r.delay(function(t){return function(){return t.model.get("blanksArray").size()>0?t.model.get("blanksArray").each(function(e){var n;return n=r.find(t.$el.find("input"),function(t){return e.get("id")===o(t).attr("data-id")}),r.isUndefined(n)&&(console.log(" in remove"),t.model.get("blanksArray").remove(e),t.trigger("close:question:element:properties"),t.model.get("blanksArray").size()<t.model.get("numberOfBlanks"))?t.model.set("numberOfBlanks",t.model.get("numberOfBlanks")-1):void 0}):void 0}}(this),500),this._changeFont(this.model.get("font")),this._changeFontSize(this.model.get("font_size")),this._changeColor(this.model.get("color")),this._changeBGColor(this.model),this._changeFibStyle(this.model.get("style"))},n.prototype.onClose=function(){return this.editor.destroy()},n}(i.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/fib/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/fib/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Fib",function(t,n,i,o,r,s){return t.Controller=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"Fib",font:"Arial",color:"#000000",bg_color:"#ffffff",bg_opacity:.5,font_size:12,case_sensitive:!1,enableIndividualMarks:!1,marks:0,style:"uline",text:"Add text here",numberOfBlanks:0,blanksArray:[],complete:!1}),o.__super__.initialize.call(this,t)},o.prototype.renderElement=function(){var t,e;return t=this.layout.model.get("blanksArray"),this._parseOptions(t),t instanceof i.Collection||(this.blanksCollection=n.request("create:new:question:element:collection",t),this.layout.model.set("blanksArray",this.blanksCollection)),console.log(this.blanksCollection),e=this._getFibView(this.layout.model),this.listenTo(e,"show show:this:fib:properties",function(t){return function(){return n.execute("show:question:properties",{model:t.layout.model})}}(this)),this.listenTo(e,"close:question:element:properties",function(){return n.execute("close:question:element:properties")}),this.listenTo(e,"close:question:elements",function(){return n.execute("close:question:elements")}),n.commands.setHandler("save:fib:text",function(){return e.triggerMethod("save:text")}),this.listenTo(e,"create:new:fib:element",function(t){return function(e){var i,o;return i={id:e,blank_index:0,correct_answers:[],marks:1,blank_size:20},o=n.request("create:new:question:element",i),t.layout.model.get("blanksArray").add(o)}}(this)),this.layout.elementRegion.show(e,{loading:!0,entities:[this.layout.model]})},o.prototype._parseOptions=function(t){return s.each(t,function(t){return null!=t.blank_index&&(t.blank_index=parseInt(t.blank_index)),null!=t.blank_size&&(t.blank_size=parseInt(t.blank_size)),null!=t.marks?t.marks=parseInt(t.marks):void 0})},o.prototype._getFibView=function(e){return new t.Views.FibView({model:e})},o.prototype.deleteElement=function(t){return t.set("blanksArray",""),delete t.get("blanksArray"),o.__super__.deleteElement.call(this,t),n.execute("close:question:properties"),n.execute("close:question:element:properties")},o}(e.Controller)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/biganswer/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.BigAnswer.Views",function(t,e,n,i,o,r){return t.BigAnswerView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<textarea  type="text" maxlength="{{maxlength}}" contenteditable="false" style=" font-family: {{font}}; font-size: {{font_size}}px; color: {{color}}; max-width:100%; width :100%; height: 100%; line-height : inherit;" ></textarea>',e.prototype.onShow=function(){return this.$el.parent().parent().on("click",function(t){return function(e){return t.trigger("show:this:biganswer:properties"),e.stopPropagation()}}(this)),this._changeBGColor(),this._changeBigAnswerStyle(this.model,this.model.get("style"))},e.prototype.modelEvents={"change:maxlength":"_changeMaxLength","change:font":"_changeFont","change:font_size":"_changeSize","change:color":"_changeColor","change:bg_color":"_changeBGColor","change:bg_opacity":"_changeBGColor","change:style":"_changeBigAnswerStyle"},e.prototype._changeMaxLength=function(t,e){return this.$el.find("textarea").prop("maxLength",parseInt(e))},e.prototype._changeFont=function(t,e){return this.$el.find("textarea").css("font-family",e)},e.prototype._changeSize=function(t,e){return this.$el.find("textarea").css("font-size",e+"px")},e.prototype._changeColor=function(t,e){return this.$el.find("textarea").css("color",e)},e.prototype._changeBGColor=function(t,e){return this.$el.find("textarea").css("background-color",r.convertHex(this.model.get("bg_color"),this.model.get("bg_opacity")))},e.prototype._changeBigAnswerStyle=function(t,e){return"uline"===e?this.$el.find("textarea").removeClass("border").addClass("underline"):"box"===e?this.$el.find("textarea").removeClass("underline").addClass("border"):this.$el.find("textarea").removeClass("underline border")},e}(i.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/biganswer/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/biganswer/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.BigAnswer",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.eventObj=t.eventObj,s.defaults(t.modelData,{element:"BigAnswer",maxlength:"50",font:"Arial",color:"#000000",bg_color:"#c5ebd2",bg_opacity:"0.5",font_size:"12",case_sensitive:!1,marks:2,style:"blank",complete:!1}),i.__super__.initialize.call(this,t)},i.prototype.renderElement=function(){var t;return t=this._getBigAnswerView(this.layout.model),this.listenTo(t,"show show:this:biganswer:properties",function(t){return function(){return n.execute("show:question:properties",{model:t.layout.model})}}(this)),this.layout.elementRegion.show(t)},i.prototype._getBigAnswerView=function(e){return new t.Views.BigAnswerView({model:e})},i.prototype.deleteElement=function(t){return i.__super__.deleteElement.call(this,t),n.execute("close:question:properties")},i}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/sort/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Sort.Views",function(t,e,n,i,o,r){var s;return s=function(t){function e(){return this.configureEditor=bind(this.configureEditor,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="sort-option",e.prototype.template='<input type="hidden" id="optionNo" value="{{optionNo}}"> <div class="sort-option-text"></div>',e.prototype.events={"click a":function(t){return t.preventDefault()},"blur .sort-option-text":function(){return this.model.set("text",this.$el.find(".sort-option-text").html())}},e.prototype.onShow=function(){return this.$el.attr("id","sort-option-"+this.model.get("optionNo")),this.$el.find(".sort-option-text").attr("contenteditable","true").attr("id","text-"+this.model.get("optionNo")),CKEDITOR.on("instanceCreated",this.configureEditor),this.editor=CKEDITOR.inline(document.getElementById(this.$el.find(".sort-option-text").attr("id"))),this.editor.setData(r.stripslashes(this.model.get("text"))),r.delay(function(t){return function(){return o("#cke_"+t.editor.name).on("click",function(t){return t.stopPropagation()})}}(this),500)},e.prototype.configureEditor=function(t){var e,n;return e=t.editor,n=e.element,n.getAttribute("id")===this.$el.find(".sort-option-text").attr("id")?e.on("configLoaded",function(){return e.config.placeholder="Type option here.."}):void 0},e.prototype.onClose=function(){return this.editor.destroy()},e}(i.ItemView),t.SortView=function(t){function e(){return this._onOptionPositionChanged=bind(this._onOptionPositionChanged,this),this._changeHeight=bind(this._changeHeight,this),this._changeBGColor=bind(this._changeBGColor,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="sort",e.prototype.itemView=s,e.prototype.initialize=function(t){return this.sort_model=t.sort_model},e.prototype.onShow=function(){return this.$el.parent().parent().on("click",function(t){return function(e){return t.trigger("show:this:sort:properties"),e.stopPropagation()}}(this)),this._changeBGColor(),this.sort_model.on("change:bg_color",this._changeBGColor),this.sort_model.on("change:bg_opacity",this._changeBGColor),this.sort_model.on("change:height",this._changeHeight),this._enableSorting(),this._changeHeight(this.sort_model,this.sort_model.get("height"))},e.prototype.onAfterItemAdded=function(){return this._changeBGColor(),this._enableSorting(),this._changeHeight(this.sort_model,this.sort_model.get("height"))},e.prototype._changeBGColor=function(t,e){return this.$el.find(".sort-option").css("background-color",r.convertHex(this.sort_model.get("bg_color"),this.sort_model.get("bg_opacity")))},e.prototype._changeHeight=function(t,e){return this.$el.find(".sort-option").css("min-height",e+"px")},e.prototype._enableSorting=function(){return this.$el.find(".sort-option-text").on("mousedown",function(t){return function(t){return t.stopPropagation()}}(this)),this.$el.find(".sort-option").on("mousedown",function(t){return function(){return t.trigger("show:this:sort:properties"),t.$el.hasClass("ui-sortable")?void 0:t.$el.sortable({cursor:"move",stop:t._onOptionPositionChanged})}}(this))},e.prototype._onOptionPositionChanged=function(){return this.$el.find("input#optionNo").each(function(t){return function(e,n){return console.log(e+"  "+n.value),t.collection.get(n.value).set("index",e+1)}}(this)),this.collection.comparator=function(t){return t.get("index")},this.collection.sort()},e.prototype.onClose=function(){return this.$el.hasClass("ui-sortable")?this.$el.sortable("destroy"):void 0},e}(i.CollectionView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/sort/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/sort/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Sort",function(t,n,i,o,r,s){return t.Controller=function(e){function o(){return this._changeOptionCount=bind(this._changeOptionCount,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){return this.eventObj=t.eventObj,s.defaults(t.modelData,{marks:1,element:"Sort",optioncount:2,elements:[{optionNo:s.uniqueId(),index:1},{optionNo:s.uniqueId(),index:2}],bg_color:"#ffffff",bg_opacity:.5,height:40,complete:!1}),o.__super__.initialize.call(this,t),this.layout.model.on("change:optioncount",this._changeOptionCount)},o.prototype.renderElement=function(){var t,e;return e=this.layout.model.get("elements"),this.layout.model.get("elements")instanceof i.Collection&&(e=this.layout.model.get("elements").toJSON()),console.log(e),this._parseOptions(e),e instanceof i.Collection||(t=n.request("create:new:option:collection",e),t.comparator="index",t.sort(),this.layout.model.set("elements",t)),this.view=this._getSortView(),this.listenTo(this.view,"show show:this:sort:properties",function(t){return function(){return n.execute("show:question:properties",{model:t.layout.model})}}(this)),this.layout.elementRegion.show(this.view)},o.prototype._getSortView=function(){return new t.Views.SortView({collection:this.layout.model.get("elements"),sort_model:this.layout.model})},o.prototype._parseOptions=function(t){return s.each(t,function(t){return null!=t.optionNo&&(t.optionNo=parseInt(t.optionNo)),null!=t.marks&&(t.marks=parseInt(t.marks)),null!=t.index?t.index=parseInt(t.index):void 0})},o.prototype._changeOptionCount=function(t,e){var n,i;if(i=t.previous("optioncount"),n=e,n>i)for(;i!==n;)i++,t.get("elements").push({optionNo:s.uniqueId(),index:i});if(i>n)for(;i!==n;)t.get("elements").pop(),i--;return this.renderElement()},o.prototype.deleteElement=function(t){return t.set("elements",""),delete t.get("elements"),console.log(t.get("elements")),o.__super__.deleteElement.call(this,t),n.execute("close:question:properties")},o}(e.Controller)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/content-creator/content-builder/elements/teacherquestion/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.TeacherQuestion.Views",function(t,e,n,i,o,r){var s;return s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.className="teacher-question-row column",n.prototype.template="<span></span>",n.prototype.onShow=function(){return 1===this.model.get("position")?this.$el.find("span").text("Question"):this.$el.find("span").text("Answer"),this.$el.attr("data-position",this.model.get("position")),this.$el.sortable({revert:"invalid",items:"> .element-wrapper",connectWith:".droppable-column, .column",handle:".aj-imp-drag-handle",start:function(t,e){e.placeholder.height(e.item.height()),window.dragging=!0},stop:function(t,e){window.dragging=!1},helper:"clone",opacity:.65,remove:function(t,e){return 0===o(t.target).children().length?o(t.target).addClass("empty-column"):void 0},update:function(t,e){return o(t.target).removeClass("empty-column")}})},n.prototype.onClose=function(){return this.$el.hasClass("ui-sortable")?this.$el.sortable("destroy"):void 0},n.prototype.onAddDefaultTextElement=function(){return e.request("add:new:element",this.$el,"Text")},n}(i.ItemView),t.MainView=function(t){function e(){return this._addTextForChild=bind(this._addTextForChild,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="teacher-question",e.prototype.template="&nbsp;",e.prototype.itemView=s,e.prototype.initialize=function(t){var e,i,o,s,a,l,c,u,h,d,p;if(null==t&&(t={}),this.model=t.model,this.collection=new n.Collection,0===t.model.get("elements").length){for(l=[1,2],u=[],i=0,s=l.length;s>i;i++)e=l[i],u.push(this.collection.add({position:e,element:"TeacherQuestRow",elements:[]}));return u}for(c=t.model.get("elements"),h=[],o=0,a=c.length;a>o;o++)p=c[o],d=r.clone(p),delete d.elements,h.push(this.collection.add(d));return h},e.prototype.onShow=function(t){return null==t&&(t={}),0===this.model.get("elements").length?this.collection.each(this._addTextForChild):void 0},e.prototype._addTextForChild=function(t){var e;return console.log(this.children.findByModel(t)),e=this.children.findByModel(t),e.triggerMethod("add:default:text:element")},e}(i.CollectionView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/teacherquestion/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/teacherquestion/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.TeacherQuestion",function(t,n,i,o,r,s){return t.Controller=function(e){function n(){return this.renderElement=bind(this.renderElement,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"TeacherQuestion",elements:[],meta_id:0}),n.__super__.initialize.call(this,t)},n.prototype.renderElement=function(){var t;return this.removeSpinner(),console.log("s"),t=this._getMainView(),this.layout.elementRegion.show(t)},n.prototype._getMainView=function(){return console.log(this.layout),new t.Views.MainView({model:this.layout.model})},n.prototype.deleteElement=function(t){return this.layout.elementRegion.currentView.$el.canBeDeleted()?t.destroy():alert("Please remove elements inside row and then delete.")},n}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/video/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Video.Views",function(t,e,n,i,o,r){return t.VideoView=function(t){function e(){return this._showProperties=bind(this._showProperties,this),this._playVideo=bind(this._playVideo,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="video",e.prototype.template='{{#video}} <div class="videoContainer"></div> <div class="clearfix"></div> {{/video}} {{#placeholder}} <div class="video-placeholder show-video "><span class="bicon icon-uniF11E"></span>Add Video</div> {{/placeholder}}',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),this.model.get("video_ids").length?(t.video=!0,t.videourl=t.videoUrls[0]):t.placeholder=!0,t},e.prototype.events={"click .show-video":"_showMediaManager","click .show-playlist":"togglePlaylist","click #prev":"_playPrevVideo","click #next":"_playNextVideo","click .playlist-video":"_playClickedVideo",click:function(){return this.trigger("show:video:properties")}},e.prototype.onShow=function(){return this.model.get("video_ids").length?(this.videos=this.model.get("videoUrls"),this.index=0,this.$el.find("video").on("ended",function(t){return function(){return t._playNextVideo()}}(this)),r.size(this.videos)>1&&this._setVideoList(),this.$el.find(".playlist-video[data-index='0']").addClass("currentVid"),this._addVideoElement(this.videos[0]),this.$el.closest(".element-wrapper").off("click",this._showProperties),this.$el.closest(".element-wrapper").on("click",this._showProperties)):void 0},e.prototype._setVideoList=function(){return this.$el.append('<div id="playlist-hover" class="playlistHover"> <div class="row m-l-0 m-r-0 p-b-5 m-b-5"> <div class="col-sm-8 nowPlaying"> <span class="small text-muted">Now Playing:</span> <span id="now-playing-tag">'+this.model.get("title")[0]+'</span> </div> <div class="col-sm-4"> <button class="btn btn-white btn-small pull-right show-playlist"> <i class="fa fa-list-ul"></i> Playlist </button> </div> </div> <div class="row m-l-0 m-r-0 playlist-hidden vidList animated fadeInRight" style="display: none;"> <div class="video-list col-sm-8" id="video-list"></div> <div class="col-sm-4 p-t-5 m-b-5"> <button class="btn btn-info btn-small pull-right" id="next"> <i class="fa fa-step-forward"></i> </button> <button class="btn btn-info btn-small pull-right m-r-10" id="prev"> <i class="fa fa-step-backward"></i> </button> </div> </div> </div>'),this.$el.find("#video-list").empty(),r.each(this.model.get("title"),function(t){return function(e,n){return t.$el.find("#video-list").append("<div class='playlist-video' data-index="+n+">"+e+"</div>")}}(this))},e.prototype.togglePlaylist=function(){return this.$el.find(".playlist-hidden").toggle()},e.prototype._playPrevVideo=function(t){return t.stopPropagation(),this.index>0&&this.index--,this._playVideo()},e.prototype._playNextVideo=function(t){return null!=t&&t.stopPropagation(),this.index<this.videos.length-1?(this.index++,this._playVideo()):void 0},e.prototype._playClickedVideo=function(t){var e;return t.stopPropagation(),e=parseInt(o(t.target).attr("data-index")),this.index=e,this._playVideo()},e.prototype._playVideo=function(){return this.$el.find(".playlist-video").removeClass("currentVid"),this.$el.find(".playlist-video[data-index='"+this.index+"']").addClass("currentVid"),this.$el.find("#now-playing-tag").text(this.model.get("title")[this.index]),this._addVideoElement(this.videos[this.index],!0)},e.prototype._showMediaManager=function(t){return t.stopPropagation(),this.trigger("show:media:manager")},e.prototype._addVideoElement=function(t,e){var n;return null==e&&(e=!1),this.$el.find(".videoContainer").empty(),r.str.contains(t,"youtube.com")?(n=r.str.strRightBack(t,"?v="),this.$el.find(".videoContainer").html('<div class="videoWrapper"> <iframe width="100%" height="349" src="https://www.youtube.com/embed/'+n+'?rel=0&amp;showinfo=0&autoplay=1" frameborder="0"> </iframe></div>')):(this.$el.find(".videoContainer").html('<video class="video-js vjs-default-skin show-video" controls preload="none" height="auto" width="100%" poster="'+SITEURL+'/wp-content/themes/walnut/images/video-poster.jpg" data-setup="{}" controls src="'+t+'"> </video>'),this.$el.find("video")[0].load(),this.$el.find("video")[0].play())},e.prototype._showProperties=function(t){return this.trigger("show:video:properties"),t.stopPropagation()},e}(i.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/video/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/video/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Video",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"Video",video_ids:[],video_id:0,height:0,width:0,title:[],videoUrl:"",videoUrls:[]}),i.__super__.initialize.call(this,t)},i.prototype.bindEvents=function(){return i.__super__.bindEvents.call(this)},i.prototype._getVideoView=function(){return new t.Views.VideoView({model:this.layout.model})},i.prototype._getVideoCollection=function(){return this.videoCollection||(this.layout.model.get("video_ids").length?this.videoCollection=n.request("get:media:collection:by:ids",this.layout.model.get("video_ids")):this.videoCollection=n.request("get:empty:media:collection")),this.videoCollection.comparator="order",this.videoCollection},i.prototype._parseInt=function(){var t;return t=new Array,!this.layout.model.get("video_ids")&&this.layout.model.get("video_id")&&(this.layout.model.set("video_ids",[this.layout.model.get("video_id")]),this.layout.model.set("videoUrls",[this.layout.model.get("videoUrl")])),s.each(this.layout.model.get("video_ids"),function(e){return t.push(parseInt(e))}),this.layout.model.set("video_ids",t)},i.prototype.renderElement=function(){var t;return this.removeSpinner(),this._parseInt(),t=this._getVideoCollection(),n.execute("when:fetched",t,function(e){return function(){return t.each(function(t,n){var i;return i=e.layout.model.get("title"),s.str.contains(i[n],"youtube.com")&&!t.get("url")?t.set({title:i[n],name:i[n],url:i[n]}):void 0}),e.view=e._getVideoView(),e.listenTo(e.view,"show:media:manager",function(){return n.execute("show:media:collection:manager",{region:n.dialogRegion,mediaType:"video",mediaCollection:t})}),e.listenTo(e.videoCollection,"add remove order:updated",function(){return this.videoCollection.sort(),this.layout.model.set({video_ids:this.videoCollection.pluck("id"),videoUrls:this.videoCollection.pluck("url"),title:this.videoCollection.pluck("title"),video_id:s.first(this.videoCollection.pluck("id")),videoUrl:s.first(this.videoCollection.pluck("url"))}),this.layout.elementRegion.show(this.view),this.layout.model.save()}),e.listenTo(e.view,"show show:video:properties",function(){return n.execute("show:question:properties",{model:e.layout.model})}),e.layout.elementRegion.show(e.view)}}(this))},i}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/audio/views",["app"],function(t){return t.module("ContentCreator.ContentBuilder.Element.Audio.Views",function(t,e,n,i,o,r){return t.AudioView=function(t){function e(){return this._showProperties=bind(this._showProperties,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="audio",e.prototype.template='{{#audio}} <audio title="{{title}}" class="audio1" controls> <source src="{{audioUrl}}" type="audio/mpeg"> Your browser does not support the audio element. </audio> {{/audio}} {{#placeholder}} <div class="audio-placeholder"><span class="bicon icon-uniF100"></span>Upload Audio</div> {{/placeholder}}',e.prototype.mixinTemplateHelpers=function(t){var n,i;return t=e.__super__.mixinTemplateHelpers.call(this,t),this.model.get("audio_ids").length?(n=r.zip(this.model.get("title"),this.model.get("audioUrls")),i=new Array,r.each(n,function(t){return i.push(r.object(["title","audioUrl"],t))}),t.audio=i):t.placeholder=!0,t},e.prototype.events={click:function(t){return t.stopPropagation(),this.trigger("show:media:manager"),this.trigger("show:audio:properties")},"click .panzerlist .controls":"_stopPropagating","click .panzerlist .list":"_stopPropagating"},e.prototype._stopPropagating=function(t){return t.stopPropagation()},e.prototype.onShow=function(){return this.$el.find("audio.audio1").panzerlist({theme:"light",layout:"big",expanded:!0,showduration:!0,show_prev_next:!0}),this.$el.closest(".element-wrapper").off("click",this._showProperties),this.$el.closest(".element-wrapper").on("click",this._showProperties)},e.prototype._showProperties=function(t){return this.trigger("show:audio:properties"),t.stopPropagation()},e}(i.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/audio/controller",["app","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements/audio/views"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Audio",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return s.defaults(t.modelData,{element:"Audio",audio_id:0,audio_ids:[],height:0,width:0,audioUrl:"",audioUrls:[],title:[]}),i.__super__.initialize.call(this,t)},i.prototype.bindEvents=function(){return i.__super__.bindEvents.call(this)},i.prototype._getAudioView=function(){return new t.Views.AudioView({model:this.layout.model})},i.prototype._getAudioCollection=function(){return this.audioCollection||(this.layout.model.get("audio_ids").length?this.audioCollection=n.request("get:media:collection:by:ids",this.layout.model.get("audio_ids")):this.audioCollection=n.request("get:empty:media:collection")),this.audioCollection.comparator="order",this.audioCollection},i.prototype._parseInt=function(){var t;return t=new Array,!this.layout.model.get("audio_ids")&&this.layout.model.get("audio_id")&&(this.layout.model.set("audio_ids",[this.layout.model.get("audio_id")]),this.layout.model.set("audioUrls",[this.layout.model.get("audioUrl")])),s.each(this.layout.model.get("audio_ids"),function(e){return t.push(parseInt(e))}),this.layout.model.set("audio_ids",t)},i.prototype.renderElement=function(){var t;return this.removeSpinner(),this._parseInt(),t=this._getAudioCollection(),n.execute("when:fetched",t,function(e){return function(){return e.view=e._getAudioView(),e.listenTo(e.view,"show:media:manager",function(){return n.execute("show:media:collection:manager",{region:n.dialogRegion,mediaType:"audio",mediaCollection:t})}),e.listenTo(e.audioCollection,"add remove order:updated",function(){return this.audioCollection.sort(),this.layout.model.set({audio_ids:this.audioCollection.pluck("id"),audioUrls:this.audioCollection.pluck("url"),title:this.audioCollection.pluck("title"),audio_id:s.first(this.audioCollection.pluck("id")),audioUrl:s.first(this.audioCollection.pluck("url"))}),this.layout.elementRegion.show(this.view),this.layout.model.save()}),e.listenTo(e.view,"show show:audio:properties",function(){return n.execute("show:question:properties",{model:e.layout.model})}),e.layout.elementRegion.show(e.view)}}(this))},i}(e.Controller)})}),define("text!apps/content-creator/content-builder/elements/table/templates/table.html",[],function(){return'<div class="table-responsive">\n   <table cellspacing="0" class="table table-hover style-1">\n      <thead>\n         <tr>\n            <th><div>demo</div></th>\n            <th><div>demo</div></th>\n            <th><div>demo</div></th>\n         </tr>\n      </thead>\n      <tbody>\n      	<tr>\n            <td><div>demo</div></td>\n            <td><div>demo</div></td>\n            <td><div>demo</div></td>\n         </tr>      \n         <tr>\n            <td><div>demo</div></td>\n            <td><div>demo</div></td>\n            <td><div>demo</div></td>\n         </tr>      \n         <tr>\n            <td><div>demo</div></td>\n            <td><div>demo</div></td>\n            <td><div>demo</div></td>  \n         </tr>       \n      </tbody>\n   </table>\n</div> ';
});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/table/views",["app","bootbox"],function(t,e){return t.module("ContentCreator.ContentBuilder.Element.Table.Views",function(t,n,i,o,r,s){return t.TableView=function(t){function n(){return this.destroyEditor=bind(this.destroyEditor,this),this.configureEditor=bind(this.configureEditor,this),n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.className="snp-table",n.prototype.template='<div class="table-holder"></div>',n.prototype.ui={editableData:"table td ",editableHead:"table th "},n.prototype.events={"focus @ui.editableData,@ui.editableHead":"showEditor","focus .cke_editable":function(t){return t.stopPropagation()},"click a":function(t){return t.preventDefault()},"focus .table-holder":"destroyEditor","column:resize:stop.rc table":"saveTableMarkup"},n.prototype.modelEvents={"change:row":"rowChanged","change:column":"columnChanged","change:bordered":"changeBordered","change:striped":"changeStriped","change:style":"changeStyle",destroy:function(){return r("#myCanvas").unbind("click")}},n.prototype.onShow=function(){return r("#myCanvas").bind("click",function(t){return function(e){return r.contains(r("#myCanvas")[0],e.target)?void 0:t.destroyEditor(e)}}(this)),this.$el.find(".table-holder").html(s.stripslashes(this.model.get("content"))),this.$el.find(".table-holder tr div").attr("tabindex",0),this.$el.find("table").resizableColumns()},n.prototype.rowChanged=function(t,n){var i,o,r,s,a,l;if(i=this.$el.find("tbody tr").length,i!==n){if(n>i){for(l=[];i!==n;){for(o="<tr>",s=r=1,a=t.get("column");a>=1?a>=r:r>=a;s=a>=1?++r:--r)o+="<td><div tabindex=0>demo</div></td>";o+="</tr>",this.$el.find("tbody").append(o),this.saveTableMarkup(),l.push(i++)}return l}return e.confirm("Removing a ROW might cause a loss of data. Do you want to continue?",function(e){return function(o){var r;if(o){for(r=[];i!==n;)e.$el.find("tbody tr:last-of-type").remove(),e.saveTableMarkup(),r.push(i--);return r}return t.set("row",i)}}(this))}},n.prototype.columnChanged=function(t,n){var i,o,a;if(i=this.$el.find("thead th").length,i!==n){if(n>i){for(o=[];i!==n;)this.$el.find("thead tr").append("<th><div tabindex=0>demo</div></th>"),a=this.$el.find("tbody tr"),s.each(a,function(t,e){return r(t).append("<td><div tabindex=0>demo</div></td>")}),this.$el.find("table").resizableColumns("destroy"),this.$el.find("table").resizableColumns(),console.log("in columns increase"),this.saveTableMarkup(),o.push(i++);return o}return e.confirm("Removing a COLUMN might cause a loss of data. Do you want to continue?",function(e){return function(o){var r;if(o){for(r=[];i!==n;)e.$el.find("thead tr th:last-of-type").remove(),a=e.$el.find("tbody tr td:last-of-type").remove(),e.$el.find("table").resizableColumns("destroy"),e.$el.find("table").resizableColumns(),e.saveTableMarkup(),r.push(i--);return r}return t.set("column",i)}}(this))}},n.prototype.showEditor=function(t){var e;return t.stopPropagation(),this.trigger("show:table:property"),this.editor&&(this.editor.destroy(),this.$el.find("td div, th div").removeAttr("contenteditable").removeAttr("style").removeAttr("id"),this.saveTableMarkup()),e=s.uniqueId("text-"),r(t.target).closest("td,th").find("div").attr("contenteditable","true").attr("id",e),CKEDITOR.on("instanceCreated",this.configureEditor),this.editor=CKEDITOR.inline(document.getElementById(e)),this.editor.config.placeholder="Click to enter text."},n.prototype.configureEditor=function(t){var e,n;return e=t.editor,n=e.element,n.getAttribute("id")===this.$el.attr("id")?e.on("configLoaded",function(){return e.config.placeholder="Enter Data"}):void 0},n.prototype.destroyEditor=function(t){return console.log("destroy editor"),t.stopPropagation(),this.trigger("show:table:property"),this.editor&&!r(t.target).hasClass("cke_editable")?(this.editor.destroy(),this.editor=null,console.log("editor destroyed"),this.$el.find("td div, th div").removeAttr("contenteditable").removeAttr("style").removeAttr("id"),this.$el.find("table").resizableColumns("destroy"),this.$el.find("table").resizableColumns(),this.saveTableMarkup()):void 0},n.prototype.saveTableMarkup=function(){return this.trigger("save:table",this.$el.find(".table-holder"))},n.prototype.changeBordered=function(t,e){return e?this.$el.find("table").addClass("table-bordered"):this.$el.find("table").removeClass("table-bordered"),this.saveTableMarkup()},n.prototype.changeStriped=function(t,e){return e?this.$el.find("table").addClass("table-striped"):this.$el.find("table").removeClass("table-striped"),this.saveTableMarkup()},n.prototype.changeStyle=function(t,e){return this.$el.find("table").removeClass("style-1 style-2").addClass(e),this.saveTableMarkup()},n.prototype.onSaveTableMarkup=function(){return this.saveTableMarkup()},n}(o.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/elements/table/controller",["app","apps/content-creator/content-builder/element/controller","text!apps/content-creator/content-builder/elements/table/templates/table.html","apps/content-creator/content-builder/elements/table/views"],function(t,e,n){return t.module("ContentCreator.ContentBuilder.Element.Table",function(t,i,o,r,s,a){return t.Controller=function(e){function o(){return this.renderElement=bind(this.renderElement,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){return a.defaults(t.modelData,{element:"Table",content:n,row:3,column:3,style:"style-1",bordered:!1,striped:!1}),o.__super__.initialize.call(this,t)},o.prototype.bindEvents=function(){return o.__super__.bindEvents.call(this)},o.prototype._getTableView=function(){return new t.Views.TableView({model:this.layout.model})},o.prototype.renderElement=function(){return this.removeSpinner(),this.view=this._getTableView(),this.listenTo(this.view,"save:table",function(t){return function(e){var n;return n=s(e).clone(),s(n).find(".rc-handle-container").remove(),s(n).find("td div, th div").removeAllAttr(),t.layout.model.set("content",""+s(n).html()),t.layout.model.hasChanged()?t.layout.model.save():void 0}}(this)),this.listenTo(this.view,"show show:table:property",function(t){return function(){return i.execute("show:question:properties",{model:t.layout.model})}}(this)),this.layout.model.on("save:table:markup",function(t){return function(){return t.view.triggerMethod("save:table:markup")}}(this)),this.layout.elementRegion.show(this.view)},o.prototype.onClose=function(){return i.execute("close:question:properties")},o}(e.Controller)})}),define("apps/content-creator/content-builder/elements-loader",["apps/content-creator/content-builder/elements/hotspot/controller","apps/content-creator/content-builder/elements/row/controller","apps/content-creator/content-builder/elements/text/controller","apps/content-creator/content-builder/elements/image/controller","apps/content-creator/content-builder/elements/imagewithtext/controller","apps/content-creator/content-builder/elements/mcq/controller","apps/content-creator/content-builder/elements/fib/controller","apps/content-creator/content-builder/elements/biganswer/controller","apps/content-creator/content-builder/elements/sort/controller","apps/content-creator/content-builder/elements/teacherquestion/controller","apps/content-creator/content-builder/elements/video/controller","apps/content-creator/content-builder/elements/audio/controller","apps/content-creator/content-builder/elements/table/controller"],function(){});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/autosave/controller",["app"],function(t){return t.module("ContentCreator.ContentBuilder.AutoSave",function(t,e,n,i,o,r){return t.Controller=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.initialize=function(t){null==t&&(t={})},n.prototype.autoSave=function(t){var n,i,s,a,l;if(a=e.mainContentRegion.$el,n=this._getPageJson(a),!r.isObject(n))throw new Error("invalid json...");return i=t.toJSON(),delete i.layout,i.action="save-content-piece-json",i.json=n,s={type:"POST",url:AJAXURL,data:i},l=!0,"student_question"===i.content_type?l=this._questionExists()&&this._checkIfMarksEntered()?!0:!1:"pending"!==i.post_status&&r.isEmpty(i.json)&&(this._showEmptyCanvasError(i.post_status),l=!1),l?(o("#saved-successfully, #save-fail").remove(),o.ajax(s).done(function(e){return t.set({ID:e.ID}),o(".page-title").before('<div id="saved-successfully" style="text-align:center;" class="alert alert-success">Content Piece Saved Successfully</div>'),setTimeout(function(){return o("#saved-successfully").remove()},3e3)}).fail(function(t){return console.log("error")})):void 0},n.prototype._questionExists=function(){var t,n;return t=e.mainContentRegion.$el.find("#myCanvas").find('form input[name="element"]'),n=!1,r.each(t,function(t,e){var i;return"Fib"===(i=o(t).val())||"Mcq"===i||"Sort"===i||"Hotspot"===i||"BigAnswer"===i?n=!0:void 0}),n?!0:(this._showNoQuestionExistsError(),!1)},n.prototype._checkIfMarksEntered=function(){var t;return t=e.mainContentRegion.$el.find("#myCanvas").find(".element-wrapper"),r.every(t,function(t){var e,n,i;return o("#saved-successfully, #save-fail").remove(),"Fib"!==(i=o(t).find('form input[name="element"]').val())&&"Mcq"!==i&&"Sort"!==i&&"Hotspot"!==i&&"BigAnswer"!==i||"false"!==o(t).find('form input[name="complete"]').val()?!0:(n="Ensure you have set the marks and added valid answers to save the question",e=o(t).find('form input[name="error_info"]').val(),r.isEmpty(e)||(n=e),o(".page-title").before('<div id="save-failure" style="text-align:center;" class="alert alert-failure">'+n+"</div>"),setTimeout(function(){return o("#save-failure").remove()},3e3),!1)})},n.prototype._showNoQuestionExistsError=function(){return o("#saved-successfully, #save-fail").remove(),o(".page-title").before('<div id="save-failure" style="text-align:center;" class="alert alert-failure">To save, at least 1 question element must be included in the question area</div>'),setTimeout(function(){return o("#save-failure").remove()},3e3)},n.prototype._showEmptyCanvasError=function(t){return o("#saved-successfully, #save-fail").remove(),o(".page-title").before("<div id='save-failure' style='text-align:center;' class='alert alert-failure'> Cannot "+t+" an empty canvas </div>"),setTimeout(function(){return o("#save-failure").remove()},3e3)},n.prototype._getPageJson=function(t){var e;return e=this._getJson(t.find("#myCanvas"))},n.prototype._getJson=function(t,e){var n;return null==e&&(e=[]),n=t.children(".element-wrapper"),r.each(n,function(t){return function(i,s){var a,l;return a={element:o(i).find('form input[name="element"]').val(),meta_id:parseInt(o(i).find('form input[name="meta_id"]').val())},"Row"===a.element&&(a.draggable="true"===o(i).children("form").find('input[name="draggable"]').val(),a.style=o(i).children("form").find('input[name="style"]').val(),delete a.meta_id,a.elements=[],r.each(o(i).children(".element-markup").children(".row").children(".column"),function(e,n){var i,r;i=o(e).attr("data-class"),r={position:n+1,element:"Column",className:i,elements:t._getJson(o(e))},a.elements.push(r)})),"TeacherQuestion"===a.element&&(delete a.meta_id,a.elements=[],r.each(o(i).children(".element-markup").children(".teacher-question").children(".teacher-question-row"),function(e,n){var i;return i={position:n+1,element:"TeacherQuestRow",elements:t._getJson(o(e))},a.elements.push(i)})),"Mcq"===a.element&&(n=o(i).find(".mcq").children(".element-wrapper").children(".element-markup").children(".row").children(".column").find(".row").find(".element-wrapper"),l=new Array,console.log(l),r.each(n,function(t,e){var n;return n=parseInt(o(t).closest(".column[data-option]").attr("data-option")),console.log(l[n-1]),l[n-1]=null!=l[n-1]?l[n-1]:new Array,console.log(l[n-1]),l[n-1].push({element:o(t).find('form input[name="element"]').val(),meta_id:parseInt(o(t).find('form input[name="meta_id"]').val())})}),console.log(JSON.stringify(l)),a.elements=l),e.push(a)}}(this)),e},n}(i.Controller),e.reqres.setHandler("autosave:question:layout",function(){return new t.Controller})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-builder/app",["app","controllers/region-controller","apps/content-creator/content-builder/view","apps/content-creator/content-builder/element/controller","apps/content-creator/content-builder/elements-loader","apps/content-creator/content-builder/autosave/controller"],function(t,e){return t.module("ContentCreator.ContentBuilder",function(t,n,i,o,r,s){var a,l,c;return c=null,l=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return c=t.contentPieceModel,this.eventObj=t.eventObj,console.log(this.eventObj),this.view=this._getContentBuilderView(c),this.listenTo(this.view,"add:new:element",function(t,e){return n.request("add:new:element",t,e,this.eventObj)}),this.listenTo(this.view,"dependencies:fetched",function(t){return function(){return s.delay(function(){return t.startFillingElements()},400)}}(this)),this.show(this.view,{loading:!0})},i.prototype._getContentBuilderView=function(e){return new t.Views.ContentBuilderView({model:e})},i.prototype._getContainer=function(){return this.view.$el.find("#myCanvas")},i.prototype.startFillingElements=function(){var t,e;return e=this.view.model.get("layout"),t=this._getContainer(),s.each(e,function(e){return function(i,o){return"Row"===i.element||"TeacherQuestion"===i.element?e.addNestedElements(t,i):n.request("add:new:element",t,i.element,e.eventObj,i)}}(this))},i.prototype.addNestedElements=function(t,e){var i;return i=n.request("add:new:element",t,e.element,null,e),s.each(e.elements,function(o){return function(a,l){return a.elements?(t=i.layout.elementRegion.currentView.$el.children().eq(l),s.each(a.elements,function(i,s){return"Row"===i.element||"TeacherQuestion"===e.element?o.addNestedElements(r(t),i):n.request("add:new:element",t,i.element,o.eventObj,i)})):void 0}}(this))},i}(e),a={addNewElement:function(e,n,i,o){return console.log(n),new t.Element[n].Controller({container:e,modelData:o,eventObj:i})},saveQuestion:function(t){return function(){var t;return t=n.request("autosave:question:layout"),t.autoSave(c)}}(this)},n.commands.setHandler("show:content:builder",function(t){return new l(t)}),n.reqres.setHandler("add:new:element",function(t,e,n,i){return null==i&&(i={}),a.addNewElement(t,e,n,i)}),n.commands.setHandler("save:question",function(t){return a.saveQuestion(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/views",["app"],function(t){return t.module("ContentCreator.PropertyDock.Views",function(t,e){return t.Layout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tiles default"> <div class="tiles-head"> <h4 class="text-white"><span class="semi-bold">Properties </span>Dock</h4> </div> </div> <div id="question-elements-property" class="docket"></div> <div id="question-property" class="docket"></div> <div id="question-elements" class="docket"></div>',e.prototype.className="dock tiles",e.prototype.regions={questElementPropRegion:"#question-elements-property",questPropertyRegion:"#question-property",questElementRegion:"#question-elements"},e.prototype.onShow=function(){return this.$el.find("#question-property, #question-elements-property, #question-elements").on("click",function(t){return t.stopPropagation()}),$(".content-creator-layout").on("click",function(t){return function(){return null!=t.questPropertyRegion&&t.questPropertyRegion.close(),null!=t.questElementPropRegion&&t.questElementPropRegion.close(),null!=t.questElementRegion?t.questElementRegion.close():void 0}}(this))},e}(Marionette.Layout)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-element-box/views",["app"],function(t){return t.module("ContentCreator.PropertyDock.HotspotElementBox.Views",function(t,e){return t.HotspotElementView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="li",e.prototype.className="hotspot-elements hotspotable",e.prototype.template='<a class="drag builder-element"> <i class="fa {{icon}}"></i> </a>',e.prototype.onRender=function(){return this.$el.attr("data-element",this.model.get("element"))},e}(Marionette.ItemView),t.HotspotElementBoxView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> Hotspot Properties </div> <div class="docket-body"> <p class="text-center">Drag the below elements to your hotspot screen</p> <ul class="hotspot-elements-container"> </ul> <div class="clearfix"></div> </div> </div> </div>',n.prototype.itemView=t.HotspotElementView,n.prototype.itemViewContainer="ul.hotspot-elements-container",n.prototype.onShow=function(){return this.$el.find(".hotspot-elements").draggable({helper:"clone",delay:5,addClasses:!1,distance:5,revert:"invalid"})},n}(Marionette.CompositeView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-element-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/hotspot-element-box/views"],function(t,e){return t.module("ContentCreator.PropertyDock.HotspotElementBox",function(t,n,i,o,r,s){var a;return a=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.view=this._getView(),this.show(this.view)},i.prototype._getView=function(){return new t.Views.HotspotElementBoxView({collection:n.request("get:all:hotspot:elements")})},i}(e),n.commands.setHandler("show:hotspot:elements",function(t){return new a({region:t.region})})})}),define("text!apps/content-creator/property-dock/hotspot-element-property-box/templates/textview.html",[],function(){return'<div class="tile-more-content no-padding">\n  \n  <div class="tiles blue">\n    \n    <div class="tile-footer drag">\n      Hotspot \n      <i class="fa fa-chevron-right">\n      </i>\n      \n      <span class="semi-bold">\n        Text Element\n      </span>\n      \n    </div>\n    \n    <div class="docket-body">\n      \n      <div class="form-group">\n        \n        <textarea id="hotspot-textelement-text" class="textarea" placeholder="Enter Text here" >{{getText}}</textarea>\n        \n      </div>\n      \n      <div class="form-group">\n        \n        <select class="font" id="hotspot-textelement-fontfamily">\n          \n          <option value="Arial">\n            Arial\n          </option>\n          \n          <option value="Calibri">\n            Calibri\n          </option>\n          \n          <option value="Comic Sans MS">\n            Comic Sans MS\n          </option>\n          \n          <option value="Courier">\n            Courier\n          </option>\n          \n          <option value="Georgia">\n            Georgia\n          </option>\n          \n          <option value="Helvetica">\n            Helvetica\n          </option>\n          \n          <option value="Impact">\n            Impact\n          </option>\n          \n          <option value="Lucida Console">\n            Lucida Console\n          </option>\n          \n          <option value="Lucida Sans Unicode">\n            Lucida Sans Unicode\n          </option>\n          \n          <option value="Tahoma">\n            Tahoma\n          </option>\n          \n          <option value="Times New Roman">\n            Times New Roman\n          </option>\n          \n          <option value="Trebuchet MS">\n            Trebuchet MS\n          </option>\n          \n          <option value="Verdana">\n            Verdana\n          </option>\n\n          <option value="Chelsea Market">\n    		    Chelsea Market\n    		  </option>\n\n    		  <option value="Indie Flower">\n    		    Indie Flower\n    		  </option>\n\n    		  <option value="Just Another Hand">\n    		    Just Another Hand\n    		  </option>\n    		  \n    		  <option value="Sacramento">\n    		    Sacramento\n    		  </option>\n              \n        </select>\n   \n\n        <div class="textFormat">\n          <div id="font-style" class="checkbox">\n            <span>\n              <input id="bold-checkbox" type="checkbox" value="1">\n              <label for="bold-checkbox" class="btn"><i class="fa fa-bold"></i></label>\n            </span>\n            <span>\n              <input id="italic-checkbox" type="checkbox" value="2">\n              <label for="italic-checkbox" class="btn"><i class="fa fa-italic"></i></label>\n            </span>\n          </div>\n        </div>\n   \n      </div>\n      \n      <div class="">\n        \n        <div class="textProp slider success">\n          Size \n          <input type="text" id="hotspot-textelement-fontsize" class="fontSize" data-slider-max="80" data-slider-step="1" data-slider-value="{{fontSize}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%">\n          \n        </div>\n        \n      </div>\n           \n      <div class="form-group inline">\n        Color  \n        <input type="hidden" id="hidden-input" class="fontColor" value="#1a45a1">\n        \n      </div>\n      \n      <div class="form-group inline rotateCtrl">\n        Rotate \n        <input type="text" class="dial" data-min="0" data-max="360" data-width="40" data-height="40" data-displayInput=false data-thickness=".7" data-fgColor="#0090D9" data-bgColor="#d1dade" data-angleOffset="90" data-cursor=true>\n        \n      </div>\n      \n      <div class="text-right">\n        <a id="delete" class="text-danger small" href="javascript:void(0)"><i class="fa fa-trash-o"></i> Delete</a>\n      </div>\n      \n    </div>\n    \n  </div>\n  \n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-element-property-box/textview",["app","text!apps/content-creator/property-dock/hotspot-element-property-box/templates/textview.html"],function(t,e){return t.module("ContentCreator.PropertyDock.HotspotElementPropertyBox.Views",function(t,n,i,o,r,s){return t.TextView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.events={"change #hotspot-textelement-fontfamily":function(t){return this.model.set("fontFamily",r(t.target).val())},"input #hotspot-textelement-text":function(t){return this.model.set("text",r(t.target).val())},"click #delete.text-danger":function(){return this.model.set("toDelete",!0)}},n.prototype.mixinTemplateHelpers=function(t){return t.getText=function(){return console.log(s.stripslashes(this.text)),s.stripslashes(this.text)},t},n.prototype.onShow=function(){var t;return t=this,this.$el.find(".fontSize").slider(),this.$el.find("#hotspot-textelement-fontsize").slider().on("slide",function(t){return function(){var e;return e=t.model.get("fontSize"),t.model.set("fontSize",t.$el.find(".fontSize").slider("getValue").val()||e)}}(this)),this.$el.find(".dial").val(t.model.get("textAngle")),this.$el.find(".dial").knob({change:function(e){return t.model.set("textAngle",e)}}),this.$el.find(".fontColor").minicolors({animationSpeed:200,animationEasing:"swing",control:"hue",position:"top left",showSpeed:200,change:function(e,n){return t.model.set("fontColor",e)}}),this.$el.find(".fontColor").minicolors("value",t.model.get("fontColor")),this.$el.find("#hotspot-textelement-fontfamily").select2({minimumResultsForSearch:-1}),this.$el.find("#hotspot-textelement-fontfamily").select2("val",t.model.get("fontFamily")),"bold"===this.model.get("fontBold")&&this.$el.find("#font-style #bold-checkbox").prop("checked",!0),"italic"===this.model.get("fontItalics")&&this.$el.find("#font-style #italic-checkbox").prop("checked",!0),this.$el.find("#font-style .btn").on("click",function(e){return function(){return s.delay(function(){return console.log("timeout"),e.$el.find("#font-style #bold-checkbox").prop("checked")?t.model.set("fontBold","bold"):t.model.set("fontBold",""),e.$el.find("#font-style #italic-checkbox").prop("checked")?t.model.set("fontItalics","italic"):t.model.set("fontItalics","")},200)}}(this))},n}(o.ItemView)})}),define("text!apps/content-creator/property-dock/hotspot-element-property-box/templates/optionview.html",[],function(){return'<div class="tile-more-content no-padding">\n	<div class="tiles blue">\n		<div class="tile-footer drag">\n			Hotspot <i class="fa fa-chevron-right"></i> <span class="semi-bold">{{shape}} Element</span>\n		</div>\n		<div class="docket-body">\n\n			<div id="correct-answer" class="radio radio-success">Is this correct?\n				<input id="yes" type="radio" name="optionyes" value="yes">\n				<label for="yes">Yes</label>\n				<input id="no" type="radio" name="optionyes" value="no" checked="checked">\n				<label for="no">No</label>\n			</div>\n\n			<div class="m-b-10">\n				Marks\n				<input id="individual-marks" type="text" value="{{marks}}" class="form-control">\n			</div>\n\n			<div class="form-group inline m-t-20 option-color">\n				Color  <input type="hidden" id="hidden-input" class="fontColor" value="#1a45a1">\n			</div>\n\n			<div id="knob" class="form-group rotateCtrl">\n				Rotate <input type="text" class="dial" data-min="0" data-max="360"\n				 data-width="40" data-height="40" data-displayInput=false data-thickness=".7"\n				  data-fgColor="#0090D9" data-bgColor="#d1dade" data-angleOffset="90" data-cursor=true>\n			</div>\n\n			\n\n			<div class="text-right">\n		        <a id="delete" class="text-danger small" href="javascript:void(0)"><i class="fa fa-trash-o"></i> Delete</a>\n		    </div>\n\n		</div>\n	</div>\n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-element-property-box/optionview",["app","text!apps/content-creator/property-dock/hotspot-element-property-box/templates/optionview.html"],function(t,e){return t.module("ContentCreator.PropertyDock.HotspotElementPropertyBox.Views",function(t,n,i,o,r,s){return t.OptionView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.ui={individualMarksTextbox:"#individual-marks"},n.prototype.events={"blur @ui.individualMarksTextbox":"_changeIndividualMarks"},n.prototype.initialize=function(t){return this.hotspotModel=t.hotspotModel},n.prototype.onShow=function(){return console.log(this.hotspotModel.get("transparent")),this.hotspotModel.get("transparent")&&(this.$el.find(".option-color").hide(),this.$el.find(".option-color").removeClass("inline")),this.listenTo(this.hotspotModel,"change:transparent",function(t){return function(e,n){return n?(t.$el.find(".option-color").hide(),t.$el.find(".option-color").removeClass("inline")):(t.$el.find(".option-color").show(),t.$el.find(".option-color").addClass("inline"))}}(this)),this.$el.find(".fontColor").minicolors({animationSpeed:200,animationEasing:"swing",control:"hue",position:"top left",showSpeed:200,change:function(t){return function(e,n){return t.model.set("color",e)}}(this)}),this.$el.find(".fontColor").minicolors("value",this.model.get("color")),this.$el.find("#delete.text-danger").on("click",function(t){return function(){return t.model.set("toDelete",!0)}}(this)),"Rect"===this.model.get("shape")?(this.$el.find(".dial").val(this.model.get("angle")),this.$el.find(".dial").knob({change:function(t){return function(e){return t.model.set("angle",e)}}(this)})):this.$el.find("#knob").hide(),this._initializeCorrectAnswer(),this.$el.find("#correct-answer.radio input").on("change",function(t){return function(){var e;return t.model.set("correct",null!=(e="yes"===t.$el.find("#correct-answer.radio input:checked").val())?e:{"true":!1}),t._toggleMarks()}}(this)),this.ui.individualMarksTextbox.on("change",function(){return console.log("marks cxhanged")}),this._toggleMarks(),this.listenTo(this.hotspotModel,"change:enableIndividualMarks",this._toggleMarks)},n.prototype._initializeCorrectAnswer=function(){return this.model.get("correct")?this.$el.find("#correct-answer.radio input#yes").prop("checked",!0):this.$el.find("#correct-answer.radio input#no").prop("checked",!0)},n.prototype._toggleMarks=function(t,e){return this.hotspotModel.get("enableIndividualMarks")&&this.model.get("correct")?this._enableMarks():(this.model.set("marks",0),this.ui.individualMarksTextbox.trigger("change"),this._disableMarks())},n.prototype._disableMarks=function(){return this.ui.individualMarksTextbox.val(0),this.ui.individualMarksTextbox.prop("disabled",!0)},n.prototype._enableMarks=function(){return this.ui.individualMarksTextbox.val(this.model.get("marks")),this.ui.individualMarksTextbox.prop("disabled",!1)},n.prototype._changeIndividualMarks=function(t){return isNaN(r(t.target).val())?void 0:this.model.set("marks",parseInt(r(t.target).val()))},n.prototype.onBeforeClose=function(){return this.ui.individualMarksTextbox.trigger("blur")},n}(o.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-element-property-box/imageview",["app"],function(t){return t.module("ContentCreator.PropertyDock.HotspotElementPropertyBox.Views",function(t,e,n,i,o,r){return t.ImageView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> Hotspot <i class="fa fa-chevron-right"></i> <span class="semi-bold">Image Element</span> </div> <div class="docket-body"> <div id="knob" class="form-group"> Rotate <input type="text" class="dial" data-min="0" data-max="360" data-width="40" data-height="40" data-displayInput=false data-thickness=".5" data-fgColor="#0AA699" data-angleOffset="90" data-cursor=true> </div> <div class="form-group"> <button type="button" id="delete" class="btn btn-danger btn-small">Delete</button> </div> </div> </div> </div>',
e.prototype.onShow=function(){return o(".dial").val(this.model.get("angle")),o(".dial").knob({change:function(t){return function(e){return t.model.set("angle",e)}}(this)}),o("#delete.btn-danger").on("click",function(t){return function(){return t.model.set("toDelete",!0)}}(this))},e}(i.ItemView)})}),define("apps/content-creator/property-dock/hotspot-element-property-box/hotspot-element-property-view-loader",["apps/content-creator/property-dock/hotspot-element-property-box/textview","apps/content-creator/property-dock/hotspot-element-property-box/optionview","apps/content-creator/property-dock/hotspot-element-property-box/imageview"],function(){});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-element-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/hotspot-element-property-box/hotspot-element-property-view-loader"],function(t,e){return t.module("ContentCreator.PropertyDock.HotspotElementPropertyBox",function(t,n,i,o,r,s){var a;return a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.view=this._getView(t),this.show(this.view)},n.prototype._getView=function(e){var n,i;return n=e.model.get("type"),i=n+"View",new t.Views[i]({model:e.model,hotspotModel:e.hotspotModel})},n}(e),n.commands.setHandler("show:hotspot:element:properties:box",function(t){return new a({region:t.region,model:t.model,hotspotModel:t.hotspotModel})})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-property-box/view",["app"],function(t){return t.module("ContentCreator.PropertyDock.HotspotPropertyBox.Views",function(t,e,n,i,o,r){return t.PropertyView=function(t){function e(){return this._delayUpdateTillMarksChange=bind(this._delayUpdateTillMarksChange,this),this._updateMarks=bind(this._updateMarks,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> Hotspot <i class="fa fa-chevron-right"></i> <span class="semi-bold">Hotspot Question Properties</span> </div> <div class="docket-body"> <div class="checkbox check-success"> <input id="check-individual-marks" type="checkbox" name="check-individual-marks"> <label for="check-individual-marks">Set marks for each hotspot</label> </div> <div class="m-b-10"> Marks <input id="marks" type="text" value="{{marks}}" class="form-control" > </div> <div id="transparency" class="checkbox check-success"> <input id="transparency-checkbox" type="checkbox" value="1"> <label for="transparency-checkbox">Set Transparent</label> </div> </div> </div> </div>',e.prototype.events={"blur input#marks":"_changeMarks","change @ui.individualMarksCheckbox":"_toggleIndividualMarks","change @ui.transparencyCheckbox":"_toggleTransparency"},e.prototype.ui={marksTextbox:"input#marks",individualMarksCheckbox:"input#check-individual-marks",transparencyCheckbox:"input#transparency-checkbox"},e.prototype.onShow=function(){return console.log(this.model.get("optionCollection")),this.model.get("enableIndividualMarks")&&(this.ui.individualMarksCheckbox.prop("checked",!0),this.ui.marksTextbox.prop("disabled",!0),this._enableCalculateMarks()),this.model.get("transparent")?this.$el.find("#transparency-checkbox").prop("checked",!0):void 0},e.prototype._changeMarks=function(t){return isNaN(o(t.target).val())?void 0:this.model.set("marks",parseInt(o(t.target).val()))},e.prototype._enableCalculateMarks=function(){return this._updateMarks(),this.$el.closest("#property-dock").on("change","#question-elements-property #individual-marks",function(t){return function(e){return t._updateMarks()}}(this)),this.listenTo(this.model.get("optionCollection"),"add",this._updateMarks),this.listenTo(this.model.get("optionCollection"),"remove",this._updateMarks)},e.prototype._disableCalculateMarks=function(){return this.$el.closest("#property-dock").off("change","#question-elements-property #individual-marks"),this.stopListening(this.model.get("optionCollection"))},e.prototype._updateMarks=function(){return r.delay(this._delayUpdateTillMarksChange,50)},e.prototype._delayUpdateTillMarksChange=function(){var t;return t=0,console.log(this.model.get("optionCollection")),this.model.get("optionCollection").each(function(e){return function(e){return t+=parseInt(e.get("marks"))}}(this)),this.model.set("marks",t),o(this.ui.marksTextbox).val(t)},e.prototype._toggleIndividualMarks=function(t){return o(t.target).prop("checked")?(this.model.set("enableIndividualMarks",!0),this.ui.marksTextbox.prop("disabled",!0),this._enableCalculateMarks()):(this.model.set("enableIndividualMarks",!1),this.ui.marksTextbox.prop("disabled",!1),this._disableCalculateMarks())},e.prototype._toggleTransparency=function(){return this.ui.transparencyCheckbox.prop("checked")?this.model.set("transparent",!0):this.model.set("transparent",!1)},e.prototype.onClose=function(){return this._disableCalculateMarks()},e}(i.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/hotspot-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/hotspot-property-box/view"],function(t,e){return t.module("ContentCreator.PropertyDock.HotspotPropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.model=t.model,this.layout=this._getView(this.model),this.show(this.layout)},i.prototype._getView=function(e){return new t.Views.PropertyView({model:e})},i.prototype.onClose=function(){var t,e,i,o,r,a,l,c,u;return n.execute("save:hotspot:content"),console.log(this.model),t=["option","image","text"],r=this.model.get("optionCollection").models,a=s.map(r,function(t){return t.toJSON()}),this.model.set({optionCollection:a}),i=this.model.get("imageCollection").models,o=s.map(i,function(t){return t.toJSON()}),this.model.set({imageCollection:o}),c=this.model.get("textCollection").models,u=s.map(c,function(t){return t.toJSON()}),this.model.set({textCollection:u}),l=this.model.get("optionCollection"),this.model.get("marks")>0&&!s.every(l,function(t){return!t.correct})?this.model.set("complete",!0):this.model.set("complete",!1),this.model.get("enableIndividualMarks")&&(e=s.where(l,{correct:!0}),s.every(e,function(t){return t.marks>0?!0:void 0})||this.model.set("complete",!1)),this.model.save(),r=n.request("create:new:hotspot:element:collection",r),i=n.request("create:new:hotspot:element:collection",i),c=n.request("create:new:hotspot:element:collection",c),this.model.set({optionCollection:r,imageCollection:i,textCollection:c})},i}(e),n.commands.setHandler("show:hotspot:properties",function(e){return new t.Controller({region:e.region,model:e.model})})})}),define("text!apps/content-creator/property-dock/mcq-property-box/templates/mcqpropview.html",[],function(){return'<div class="tile-more-content no-padding" >\n	<div class="tiles blue">\n		<div class="tile-footer drag">\n			MCQ <i class="fa fa-chevron-right"></i> <span class="semi-bold">Multiple Choice Question Properties</span>\n		</div>\n		<div class="docket-body mcqProp">\n\n			<div id="multiple-answer" class="radio radio-success">Multiple right answers allowed?\n				<input id="yes" type="radio" name="optionyes" value="yes">\n				<label for="yes">Yes</label>\n				<input id="no" type="radio" name="optionyes" value="no" checked="checked">\n				<label for="no">No</label>\n			</div>\n\n			<div class="m-t-5 m-b-10">\n				Options\n				<select id="options-num">\n					<option value="2">2</option>\n					<option value="3">3</option>\n					<option value="4">4</option>\n					<option value="5">5</option>\n					<option value="6">6</option>\n					<option value="7">7</option>\n					<option value="8">8</option>\n				</select>\n			</div>\n\n			<div class="m-b-10">\n				Columns\n				<select id="column-num">\n					<option value="1">1</option>\n					<option value="2">2</option>\n					<option value="3">3</option>\n					<option value="4">4</option>\n					<option value="6">6</option>\n				</select>\n			</div>\n\n			<div class="m-b-10">\n				Marks\n				<input id="marks" type="text" value="{{marks}}" class="form-control">\n			</div>\n\n			<!-- <div class="m-t-15">\n				<div class="checkbox check-success">\n					<input id="check-ind-marks" type="checkbox" name="check-ind-marks"> <label for="check-ind-marks">Marks for individual options</label>\n				</div>\n			</div> -->\n\n			<div id="individual-marks-region"></div>\n		\n		</div>\n	</div>\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/mcq-property-box/views",["app","text!apps/content-creator/property-dock/mcq-property-box/templates/mcqpropview.html"],function(t,e){return t.module("ContentCreator.PropertyDock.McqPropertyBox.Views",function(t,n,i,o,r,s){return t.PropertyView=function(t){function n(){return this._changeMultipleCorrectAnswers=bind(this._changeMultipleCorrectAnswers,this),n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.ui={numberOfColumnsDropdown:"select#column-num",numberOfOptionsDropdown:"select#options-num",enableMultipleAnswersRadio:"#multiple-answer.radio",marksTextbox:"input#marks"},n.prototype.regions={individualMarksRegion:"#individual-marks-region"},n.prototype.events={"change @ui.numberOfOptionsDropdown":"_changeOptionNumber","change @ui.numberOfColumnsDropdown":"_changeColumnNumber","change @ui.marksTextbox":"_changeMarks","change @ui.enableMultipleAnswersRadio":"_changeMultipleCorrectAnswers"},n.prototype.onShow=function(){return this.ui.numberOfOptionsDropdown.select2({minimumResultsForSearch:-1}),this.ui.numberOfColumnsDropdown.select2({minimumResultsForSearch:-1}),this.ui.numberOfOptionsDropdown.select2("val",this.model.get("optioncount")),this.ui.numberOfColumnsDropdown.select2("val",this.model.get("columncount")),this.model.get("multiple")?(this.ui.enableMultipleAnswersRadio.find("input#yes").prop("checked",!0),this.trigger("show:individual:marks:table"),this.ui.marksTextbox.prop("disabled",!0),this._updateMarks()):this.ui.enableMultipleAnswersRadio.find("input#no").prop("checked",!0),this.$el.find("#individual-marks-region").on("blur","input",function(t){return function(e){return t._updateMarks()}}(this))},n.prototype._updateMarks=function(){var t;return t=0,s.each(this.model.get("correct_answer"),function(e){return function(n){return t+=parseInt(e.model.get("options").get(n).get("marks"))}}(this)),this.model.set("marks",t),this.ui.marksTextbox.val(t)},n.prototype._changeMultipleCorrectAnswers=function(){var t;return this.model.set("multiple",null!=(t="yes"===this.ui.enableMultipleAnswersRadio.find("input:checked").val())?t:{"true":!1}),this.model.get("multiple")?(this.trigger("show:individual:marks:table"),this.ui.marksTextbox.prop("disabled",!0),this._updateMarks()):void 0},n.prototype._changeMarks=function(t){return isNaN(r(t.target).val())?void 0:this.model.set("marks",r(t.target).val())},n.prototype._changeOptionNumber=function(t){var e,n;return n=parseInt(r(t.target).val()),e=this.model.previous("optioncount"),e>n?confirm("Decreasing number of blanks may cause loss of data. Do you want to continue?")?this.model.set("optioncount",n):r(t.target).select2().select2("val",e):this.model.set("optioncount",n)},n.prototype._changeColumnNumber=function(t){return this.model.set("columncount",parseInt(r(t.target).val()))},n}(o.Layout)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/mcq-property-box/marksView",["app"],function(t){return t.module("ContentCreator.PropertyDock.McqPropertyBox.Views",function(t,e,n,i,o,r){var s;return s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="row",e.prototype.template='<div class="col-sm-4"><label>{{optionNo}}</label></div> <div class="col-sm-8"> <input data-id="{{optionNo}}" type="text" value="{{marks}}" class="form-control"> </div>',e.prototype.events={"blur input":function(t){return this.model.set("marks",o(t.target).val())}},e}(i.ItemView),t.MarksView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row"> <div class="col-sm-4"><div class="text-right">Option</div></div> <div class="col-sm-8"><div>Marks</div></div> </div> <div class="items"> </div>',e.prototype.itemView=s,e.prototype.itemViewContainer="div.items",e.prototype.initialize=function(t){return this.mcqModel=t.mcq_model},e.prototype.onRender=function(){return console.log(this.collection)},e.prototype.onShow=function(){return console.log(this.mcqModel),r.each(this.mcqModel.get("correct_answer"),function(t){return function(e){return t.$el.find('input[data-id="'+e+'"]').prop("disabled",!1)}}(this)),r.each(r.difference(r.range(1,this.mcqModel.get("optioncount")+1),this.mcqModel.get("correct_answer")),function(t){return function(e){return t.$el.find('input[data-id="'+e+'"]').val(0).prop("disabled",!0)}}(this))},e}(i.CompositeView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/mcq-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/mcq-property-box/views","apps/content-creator/property-dock/mcq-property-box/marksView"],function(t,e){return t.module("ContentCreator.PropertyDock.McqPropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.model=t.model,n.execute("close:question:elements"),n.execute("close:question:element:properties"),this.layout=this._getView(this.model),this.listenTo(this.layout,"change:option:number",function(t){return function(e){return t.model.set("optioncount",parseInt(e))}}(this)),this.listenTo(this.layout,"show:individual:marks:table",function(t){return function(){var e;return e=t._getMarksView(t.model),t.layout.individualMarksRegion.show(e)}}(this)),this.listenTo(this.layout,"hide:individual:marks:table",function(t){return function(){return t.layout.individualMarksRegion.close()}}(this)),this.show(this.layout)},i.prototype._getView=function(e){return new t.Views.PropertyView({model:e})},i.prototype._getMarksView=function(e){return new t.Views.MarksView({collection:e.get("options"),mcq_model:e})},i.prototype.onClose=function(){var t,e,i,o,r,a,l,c,u,h;if(this.model.get("marks")>0&&this.model.get("correct_answer").length)if(this.model.get("multiple"))for(e=this.model.get("correct_answer"),h=this.model.get("options"),o=0,r=e.length;r>o;o++){if(t=e[o],l=h.get(t),0===parseInt(l.get("marks")))return this.model.set("complete",!1),!1;this.model.set("complete",!0)}else this.model.set("complete",!0);else this.model.set("complete",!1);return a=this.model.get("options").models,i=s.map(a,function(t){return t.toJSON()}),this.model.set({options:i}),u=this.model.get("elements"),this.model.unset("elements"),this.model.save(),this.model.set("elements",u),c=n.request("create:new:option:collection",a),this.model.set("options",c)},i}(e),n.commands.setHandler("show:mcq:properties",function(e){return new t.Controller({region:e.region,model:e.model})})})}),define("text!apps/content-creator/property-dock/fib-property-box/templates/fibpropview.html",[],function(){return'<div class="tile-more-content no-padding">\n	<div class="tiles blue">\n		<div class="tile-footer drag">\n			FIB <i class="fa fa-chevron-right"></i> <span class="semi-bold">Fill In The Blanks Properties</span>\n		</div>\n		<div class="docket-body">\n\n            <div class="form-group">\n                Number of Blanks \n                <select class="no-of-blanks" id="no-of-blanks">\n                    <option value="0" disabled>\n                        0\n                    </option>\n                    <option value="1">\n                        1\n                    </option>\n\n                    <option value="2">\n                        2\n                    </option>\n                    <option value="3">\n                        3\n                    </option>\n                    <option value="4">\n                        4\n                    </option>\n                    <option value="5">\n                        5\n                    </option>\n                    <option value="6">\n                        6\n                    </option>\n                    <option value="7">\n                        7\n                    </option>\n                    <option value="8">\n                        8\n                    </option>\n                </select>\n            </div>\n\n			<div class="checkbox check-success">\n				<input id="check-case-sensitive" type="checkbox" name="check-ind-marks"> <label for="check-case-sensitive">Case Sensitive</label>\n			</div>\n			\n			<div class="m-b-10">\n				Font\n				<select class="font" id="fib-font">\n				  <option value="Arial">\n				    Arial\n				  </option>\n				  \n				  <option value="Calibri">\n				    Calibri\n				  </option>\n				  \n				  <option value="Comic Sans MS">\n				    Comic Sans MS\n				  </option>\n				  \n				  <option value="Courier">\n				    Courier\n				  </option>\n				  \n				  <option value="Georgia">\n				    Georgia\n				  </option>\n				  \n				  <option value="Helvetica">\n				    Helvetica\n				  </option>\n				  \n				  <option value="Impact">\n				    Impact\n				  </option>\n				  \n				  <option value="Lucida Console">\n				    Lucida Console\n				  </option>\n				  \n				  <option value="Lucida Sans Unicode">\n				    Lucida Sans Unicode\n				  </option>\n				  \n				  <option value="Tahoma">\n				    Tahoma\n				  </option>\n				  \n				  <option value="Times New Roman">\n				    Times New Roman\n				  </option>\n				  \n				  <option value="Trebuchet MS">\n				    Trebuchet MS\n				  </option>\n				  \n				  <option value="Verdana">\n				    Verdana\n				  </option>\n\n				  <option value="Chelsea Market">\n				    Chelsea Market\n				  </option>\n				  <option value="Indie Flower">\n				    Indie Flower\n				  </option>\n				  <option value="Just Another Hand">\n				    Just Another Hand\n				  </option>\n				  <option value="Sacramento">\n				    Sacramento\n				  </option>\n				  \n				</select>\n			</div>\n\n			<div class="m-b-10 inline colors">\n				Font Color\n				<input type="hidden" id="font-color" class="color-picker" value="{{color}}">\n			</div>\n\n			<div class="m-b-10">\n        \n				<div class="textProp slider success">\n					Font Size \n					<input type="text" id="fib-fontsize" class="fontSize" data-slider-max="30" data-slider-min="12" data-slider-step="1" data-slider-value="{{font_size}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%">\n\n				</div>\n\n			</div>\n\n			<div class="m-b-10 style">\n				Blank Style\n				<select id="fib-style">\n					<option value="uline">Underline</option>\n					<option value="box">Box</option>\n					<option value="blank">Blank</option>		\n				</select>\n			</div>\n			\n			<div class="form-group inline colors">\n				Blank Background\n				<input type="hidden" id="bg-color" class="color-picker" value={{bg_color}}>\n			</div>\n\n			<div class="m-b-10">\n				<div class=" slider success">\n					Backgroung Transparency\n					<input type="text" id="bg-opacity" class="opacity" data-slider-max="1" data-slider-min="0" data-slider-step="0.01" data-slider-value="{{bg_opacity}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%">\n				</div>\n			</div>\n\n			<div class="checkbox check-success">\n				<input id="check-individual-marks" type="checkbox" name="check-individual-marks"> <label for="check-individual-marks">Set marks for each blank</label>\n			</div>\n\n			<div class="m-b-10">\n				Marks\n				<input id="marks" type="text" value="{{marks}}" class="form-control" >\n			</div>\n\n			\n		\n		</div>\n	</div>\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/fib-property-box/views",["app","text!apps/content-creator/property-dock/fib-property-box/templates/fibpropview.html"],function(t,e){return t.module("ContentCreator.PropertyDock.FibPropertyBox.Views",function(t,n,i,o,r,s){return t.PropertyView=function(t){function n(){return this._updateMarks=bind(this._updateMarks,this),n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.ui={marksTextbox:"input#marks",individualMarksCheckbox:"input#check-individual-marks",noOfBlanksDropdown:"select#no-of-blanks"},n.prototype.events={"change input#check-case-sensitive":"_checkCaseSensitive","change select#fib-font":"_changeFont","blur @ui.marksTextbox":"_changeMarks","change select#fib-style":"_changeStyle","change @ui.individualMarksCheckbox":"_toggleIndividualMarks","change @ui.noOfBlanksDropdown":"_changeNumberOfBlanks"},n.prototype.modelEvents={"change:numberOfBlanks":"_updateNoOfBlanks"},n.prototype.onShow=function(t){return this.model.get("case_sensitive")&&this.$el.find("#check-case-sensitive").prop("checked",!0),this.model.get("enableIndividualMarks")&&(this.ui.individualMarksCheckbox.prop("checked",!0),this.ui.marksTextbox.prop("disabled",!0),this._enableCalculateMarks()),this.$el.find("#fib-font").select2({minimumResultsForSearch:-1}),this.$el.find("#fib-font").select2("val",this.model.get("font")),this.ui.noOfBlanksDropdown.select2({minimumResultsForSearch:-1}),this.ui.noOfBlanksDropdown.select2("val",this.model.get("numberOfBlanks")),this.$el.find("#fib-style").select2({minimumResultsForSearch:-1}),this.$el.find("#fib-style").select2("val",this.model.get("style")),this.$el.find(".fontSize").slider(),this.$el.find("#fib-fontsize").slider().on("slide",function(t){return function(){var e;return e=t.model.get("font_size"),t.model.set("font_size",t.$el.find(".fontSize").slider("getValue").val()||e)}}(this)),this.$el.find("#font-color.color-picker").minicolors({animationSpeed:200,animationEasing:"swing",control:"hue",position:"top left",showSpeed:200,change:function(t){return function(e,n){return t.model.set("color",e)}}(this)}),this.$el.find("#bg-color.color-picker").minicolors({animationSpeed:200,animationEasing:"swing",control:"hue",position:"top right",showSpeed:200,change:function(t){return function(e,n){return t.model.set("bg_color",e)}}(this)}),this.$el.find("#bg-opacity").slider(),this.$el.find("#bg-opacity").slider().on("slide",function(t){return function(){return t.model.set("bg_opacity",t.$el.find("#bg-opacity").slider("getValue").val())}}(this))},n.prototype._enableCalculateMarks=function(){return this._updateMarks(),this.$el.closest("#property-dock").on("blur","#question-elements-property #individual-marks",function(t){return function(t){}}(this),this._updateMarks()),this.listenTo(this.model.get("blanksArray"),"change",this._updateMarks),this.listenTo(this.model.get("blanksArray"),"add",this._updateMarks),this.listenTo(this.model.get("blanksArray"),"remove",this._updateMarks)},n.prototype._disableCalculateMarks=function(){return this.$el.closest("#property-dock").off("blur","#question-elements-property #individual-marks"),this.stopListening(this.model.get("blanksArray"))},n.prototype._updateMarks=function(){var t;return console.log("change"),t=0,this.model.get("blanksArray").each(function(e){return function(e){return t+=parseInt(e.get("marks"))}}(this)),this.model.set("marks",t),this.ui.marksTextbox.val(t)},n.prototype._checkCaseSensitive=function(t){return r(t.target).prop("checked")?this.model.set("case_sensitive",!0):this.model.set("case_sensitive",!1)},n.prototype._changeFont=function(t){return this.model.set("font",r(t.target).val())},n.prototype._changeNumberOfBlanks=function(t){var e;return e=parseInt(r(t.target).val()),e<this.model.previous("numberOfBlanks")?confirm("Decreasing number of blanks may cause loss of data. Do you want to continue?")?this.model.set("numberOfBlanks",e):r(t.target).select2().select2("val",this.model.previous("numberOfBlanks")):this.model.set("numberOfBlanks",e)},n.prototype._changeStyle=function(t){return this.model.set("style",r(t.target).val())},n.prototype._toggleIndividualMarks=function(t){return r(t.target).prop("checked")?(this.model.set("enableIndividualMarks",!0),this.ui.marksTextbox.prop("disabled",!0),this._enableCalculateMarks()):(this.model.set("enableIndividualMarks",!1),this.ui.marksTextbox.prop("disabled",!1),this._disableCalculateMarks())},n.prototype._changeMarks=function(t){return isNaN(r(t.target).val())?void 0:this.model.set("marks",parseInt(r(t.target).val()))},n.prototype._updateNoOfBlanks=function(t,e){return this.ui.noOfBlanksDropdown.select2("val",e),console.log(e)},n.prototype.onClose=function(){return this._disableCalculateMarks()},n}(o.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/fib-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/fib-property-box/views"],function(t,e){return t.module("ContentCreator.PropertyDock.FibPropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.model=t.model,this.layout=this._getView(this.model),this.show(this.layout)},i.prototype._getView=function(e){return new t.Views.PropertyView({model:e})},i.prototype.onClose=function(){var t,e,i;return n.execute("save:fib:text"),i=this.model.get("blanksArray").models,e=s.map(i,function(t){return t.toJSON()}),this.model.set({blanksArray:e}),this.model.get("marks")>0?(this.model.set("complete",!0),this.has_individual_marks=this.model.get("enableIndividualMarks"),s.each(this.model.get("blanksArray"),function(t){return function(e){return(s.isEmpty(e.correct_answers)||s.isEmpty(e.correct_answers[0]))&&t.model.set("complete",!1),t.has_individual_marks&&0===e.marks?t.model.set("complete",!1):void 0}}(this))):this.model.set("complete",!1),0===this.model.get("numberOfBlanks")&&this.model.set({complete:!1}),this.model.save(),t=n.request("create:new:question:element:collection",i),this.model.set("blanksArray",t)},i}(e),n.commands.setHandler("show:fib:properties",function(e){return new t.Controller({region:e.region,model:e.model})})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/fib-element-property-box/views",["app"],function(t){return t.module("ContentCreator.PropertyDock.FibElementPropertyBox.Views",function(t,e,n,i,o,r){return t.BlankElementView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> FIB <i class="fa fa-chevron-right"> </i> <span class="semi-bold"> Blank No : <span id="blankPropertiesNo"></span> </span> </div> <div class="docket-body"> <!-- 			<div class="from-group">Set maximum characters allowed to enter <input id="answer-max-length" type="text"  value="{{maxlength}}"> </div>   --> <div class=""> Accepted answers <input id="correct-answers"   value="{{correctanswersFn}}" type="text" data-role="tagsinput" placeholder="Type Answer and press Enter" /> </div> <div class="form-group"> <div class="textProp slider success"> Size <input type="text" id="fib-blanksize" class="blankSize" data-slider-max="50" data-slider-min="1" data-slider-step="1" data-slider-value="{{blank_size}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%"> </div> </div> <div class="m-b-10"> Marks <input id="individual-marks" type="text" value="{{marks}}" class="form-control"> </div> </div> </div> </div>',e.prototype.ui={individualMarksTextbox:"#individual-marks"},e.prototype.events={"change input#correct-answers":"_changeCorrectAnswers","blur @ui.individualMarksTextbox":"_changeIndividualMarks"},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.correctanswersFn=function(){return this.correct_answers.toString()},t},e.prototype.initialize=function(t){return this.fibModel=t.fibModel},e.prototype.onShow=function(){return this.$el.find("input#correct-answers").tagsinput("refresh"),this.$el.find("#blankPropertiesNo").text(this.model.get("blank_index")),console.log(this.model.get("blank_index")),this.$el.find(".blankSize").slider(),this.$el.find("#fib-blanksize").slider().on("slide",function(t){return function(){var e;return e=t.model.get("blank_size"),t.model.set("blank_size",t.$el.find(".blankSize").slider("getValue").val()||e)}}(this)),this.fibModel.get("enableIndividualMarks")||this._disableMarks(),this.listenTo(this.fibModel,"change:enableIndividualMarks",this._toggleMarks)},e.prototype._toggleMarks=function(t,e){return e?this._enableMarks():this._disableMarks()},e.prototype._disableMarks=function(){return this.ui.individualMarksTextbox.val(0),this.ui.individualMarksTextbox.prop("disabled",!0)},e.prototype._enableMarks=function(){return this.ui.individualMarksTextbox.val(this.model.get("marks")),this.ui.individualMarksTextbox.prop("disabled",!1)},e.prototype._changeCorrectAnswers=function(t){return this.model.set("correct_answers",o(t.target).val().split(","))},e.prototype._changeIndividualMarks=function(t){return isNaN(o(t.target).val())?void 0:this.model.set("marks",parseInt(o(t.target).val()))},e}(i.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/fib-element-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/fib-element-property-box/views"],function(t,e){return t.module("ContentCreator.PropertyDock.FibElementPropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.view=this._getView(t),this.show(this.view)},n.prototype._getView=function(e){
return new t.Views.BlankElementView({model:e.model,fibModel:e.fibModel})},n}(e),n.commands.setHandler("show:fib:element:properties:box",function(e){return new t.Controller({region:e.region,model:e.model,fibModel:e.fibModel})})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/biganswer-property-box/views",["app"],function(t){return t.module("ContentCreator.PropertyDock.BigAnswerPropertyBox.Views",function(t,e,n,i,o,r){return t.PropertyView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> BigAnswer<i class="fa fa-chevron-right"></i> <span class="semi-bold">Big Answer Properties</span> </div> <div class="docket-body"> <!--	<div class="form-group"> <div class="bootstrap-tagsinput"> <input id="correct-answers" value="{{correctanswersFn}}" type="text" data-role="tagsinput" placeholder="Type Answer and press Enter" /> </div> </div> --> <div class="checkbox check-success"> <input id="check-case-sensitive" type="checkbox" name="check-ind-marks"> <label for="check-case-sensitive">Case Sensitive</label> </div> <div class="m-b-10">Max Characters <input id="answer-max-length" type="text"  value="{{maxlength}}" > </div> <div class="m-b-10"> Font <select class="font" id="biganswer-font"> <option value="Arial"> Arial </option> <option value="Calibri"> Calibri </option> <option value="Comic Sans MS"> Comic Sans MS </option> <option value="Courier"> Courier </option> <option value="Georgia"> Georgia </option> <option value="Helvetica"> Helvetica </option> <option value="Impact"> Impact </option> <option value="Lucida Console"> Lucida Console </option> <option value="Lucida Sans Unicode"> Lucida Sans Unicode </option> <option value="Tahoma"> Tahoma </option> <option value="Times New Roman"> Times New Roman </option> <option value="Trebuchet MS"> Trebuchet MS </option> <option value="Verdana"> Verdana </option> <option value="Chelsea Market"> Chelsea Market </option> <option value="Indie Flower"> Indie Flower </option> <option value="Just Another Hand"> Just Another Hand </option> <option value="Sacramento"> Sacramento </option> </select> </div> <div class="m-b-10 inline colors"> Font Color <input type="hidden" id="font-color" class="color-picker" value="{{color}}"> </div> <div class=""> <div class="textProp slider success"> Font Size <input type="text" id="biganswer-fontsize" class="fontSize" data-slider-max="60" data-slider-min="6" data-slider-step="1" data-slider-value="{{font_size}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%"> </div> </div> <div class="m-b-10"> Blank Style <select id="biganswer-style"> <option value="uline">Underline</option> <option value="box">Box</option> <option value="blank">Blank</option> </select> </div> <div class="form-group inline colors"> Blank Background <input type="hidden" id="bg-color" class="color-picker" value={{bg_color}}> </div> <div class="textProp slider success"> Background Transparency <input type="text" id="bg-opacity" class="opacity" data-slider-max="1" data-slider-min="0" data-slider-step="0.01" data-slider-value="{{bg_opacity}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%"> </div> <div> Marks <input id="marks" type="text" value="{{marks}}" class="form-control" > </div> </div> </div> </div>',e.prototype.events={"blur #answer-max-length":"_changeMaxLength","change input#check-case-sensitive":"_checkCaseSensitive","change select#biganswer-font":"_changeFont","blur input#marks":"_changeMarks","change select#biganswer-style":"_changeStyle"},e.prototype.onShow=function(t){return this.model.get("case_sensitive")&&this.$el.find("#check-case-sensitive").prop("checked",!0),this.$el.find("#biganswer-font").select2({minimumResultsForSearch:-1}),this.$el.find("#biganswer-font").select2("val",this.model.get("font")),this.$el.find("#biganswer-style").select2({minimumResultsForSearch:-1}),this.$el.find("#biganswer-style").select2("val",this.model.get("style")),this.$el.find(".fontSize").slider(),this.$el.find("#biganswer-fontsize").slider().on("slide",function(t){return function(){var e;return e=t.model.get("font_size"),t.model.set("font_size",t.$el.find(".fontSize").slider("getValue").val()||e)}}(this)),this.$el.find("#font-color.color-picker").minicolors({animationSpeed:200,animationEasing:"swing",control:"hue",position:"top left",showSpeed:200,change:function(t){return function(e,n){return t.model.set("color",e)}}(this)}),this.$el.find("#bg-color.color-picker").minicolors({animationSpeed:200,animationEasing:"swing",control:"hue",position:"top right",showSpeed:200,change:function(t){return function(e,n){return t.model.set("bg_color",e)}}(this)}),this.$el.find("#bg-opacity").slider(),this.$el.find("#bg-opacity").slider().on("slide",function(t){return function(){return t.model.set("bg_opacity",t.$el.find("#bg-opacity").slider("getValue").val())}}(this))},e.prototype._checkCaseSensitive=function(t){return o(t.target).prop("checked")?this.model.set("case_sensitive",!0):this.model.set("case_sensitive",!1)},e.prototype._changeFont=function(t){return this.model.set("font",o(t.target).val())},e.prototype._changeMarks=function(t){return this.model.set("marks",o(t.target).val())},e.prototype._changeMaxLength=function(t){return isNaN(o(t.target).val())?void 0:(console.log(this.model),this.model.set("maxlength",o(t.target).val()),console.log(this.model))},e.prototype._changeStyle=function(t){return this.model.set("style",o(t.target).val())},e}(i.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/biganswer-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/biganswer-property-box/views"],function(t,e){return t.module("ContentCreator.PropertyDock.BigAnswerPropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return n.execute("close:question:elements"),n.execute("close:question:element:properties"),this.model=t.model,this.layout=this._getView(this.model),this.show(this.layout)},i.prototype._getView=function(e){return new t.Views.PropertyView({model:e})},i.prototype.onClose=function(){return console.log(this.model),this.model.get("marks")>0?this.model.set("complete",!0):this.model.set("complete",!1),this.model.save()},i}(e),n.commands.setHandler("show:biganswer:properties",function(e){return new t.Controller({region:e.region,model:e.model})})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/sort-property-box/views",["app"],function(t){return t.module("ContentCreator.PropertyDock.SortPropertyBox.Views",function(t,e,n,i,o,r){return t.PropertyView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> Sort <i class="fa fa-chevron-right"></i> <span class="semi-bold">Sort Properties</span> </div> <div class="docket-body"> <div> Options <select id="options-num"> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> </select> </div> <div class="m-b-10"> Marks <input id="marks" type="text" value="{{marks}}" class="form-control" > </div> <div class=" inline colors"> Background Color <input type="hidden" id="bg-color"  class="color-picker" value={{bg_color}}> </div> <div class="textProp slider success"> Background Transparency <input type="text" id="bg-opacity" class="opacity" data-slider-max="1" data-slider-min="0" data-slider-step="0.01" data-slider-value="{{bg_opacity}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%"> </div> <div class="textProp slider success"> Height <input type="text" id="sort-height" class="height" data-slider-max="100" data-slider-min="40" data-slider-step="5" data-slider-value="{{height}}" data-slider-orientation="horizontal" data-slider-selection="before" style="width:85%"> </div> </div> </div> </div>',e.prototype.events={"change select#options-num":"_changeOptionNumber","blur input#marks":"_changeMarks"},e.prototype.onShow=function(){return this.$el.find("select#options-num").select2({minimumResultsForSearch:-1}),this.$el.find("select#options-num").select2("val",this.model.get("optioncount")),this.$el.find("#bg-color.color-picker").minicolors({animationSpeed:200,animationEasing:"swing",control:"hue",position:"top right",showSpeed:200,change:function(t){return function(e,n){return t.model.set("bg_color",e)}}(this)}),this.$el.find("#bg-opacity").slider(),this.$el.find("#bg-opacity").slider().on("slide",function(t){return function(){return t.model.set("bg_opacity",t.$el.find("#bg-opacity").slider("getValue").val())}}(this)),this.$el.find("#sort-height.height").slider(),this.$el.find("#sort-height.height").slider().on("slide",function(t){return function(){var e;return e=t.model.get("height"),t.model.set("height",t.$el.find("#sort-height.height").slider("getValue").val()||e)}}(this))},e.prototype._changeMarks=function(t){return isNaN(o(t.target).val())?void 0:this.model.set("marks",parseInt(o(t.target).val()))},e.prototype._changeOptionNumber=function(t){return this.model.set("optioncount",parseInt(o(t.target).val()))},e}(i.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/sort-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/sort-property-box/views"],function(t,e){return t.module("ContentCreator.PropertyDock.SortPropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return n.execute("close:question:elements"),n.execute("close:question:element:properties"),this.model=t.model,this.view=this._getView(this.model),this.show(this.view)},i.prototype._getView=function(e){return new t.Views.PropertyView({model:e})},i.prototype.onClose=function(){var t,e,i;return this.model.get("marks")>0?this.model.set("complete",!0):this.model.set("complete",!1),e=this.model.get("elements").models,t=s.map(e,function(t){return t.toJSON()}),console.log(t),this.model.set({elements:t}),this.model.save(),i=n.request("create:new:option:collection",e),this.model.set("elements",i),console.log(this.model)},i}(e),n.commands.setHandler("show:sort:properties",function(e){return new t.Controller({region:e.region,model:e.model})})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/table-property-box/table-property-box-views",["app"],function(t){return t.module("ContentCreator.PropertyDock.TablePropertyBox.Views",function(t,e){return t.PropertyView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> Table <i class="fa fa-chevron-right"></i> <span class="semi-bold">Table Properties</span> </div> <div class="docket-body"> <div class="control-group m-b-20"> <label for="spinner-01">Columns: </label> <div class="input-group spinner column-spinner"> <input type="text" class="form-control rowColInput" value="{{column}}" > <div class="input-group-btn-vertical "> <button class="btn btn-default btn-small m-r-5"><i class="fa fa-chevron-up"></i></button> <button class="btn btn-default btn-small"><i class="fa fa-chevron-down"></i></button> </div> </div> </div> <div class="control-group m-b-20"> <label for="spinner-02">Rows: </label> <div class="input-group spinner row-spinner"> <input type="text" class="form-control rowColInput" value="{{row}}" > <div class="input-group-btn-vertical"> <button class="btn btn-default btn-small m-r-5"><i class="fa fa-chevron-up"></i></button> <button class="btn btn-default btn-small"><i class="fa fa-chevron-down"></i></button> </div> </div> </div> <div class="control-group m-b-20"> <label for="properties">Properties: </label> <div class="checkbox check-info"> <input type="checkbox" value="" id="checkbox-bordered" data-toggle="checkbox"> <label class="checkbox" for="checkbox-bordered"> Bordered </label> <input type="checkbox" value="" id="checkbox-striped" data-toggle="checkbox"> <label class="checkbox" for="checkbox-striped"> Striped </label> </div> </div> <div class="control-group styles"> <label for="style">Style: </label> <select id="table-style"> <option value="style-1">Style 1</option> <option value="style-2">Style 2</option> </select> </div> </div> </div> </div>',e.prototype.events={"click .spinner .btn:first-of-type":"increaseCount","click .spinner .btn:last-of-type":"decreaseCount","blur .spinner input":"changeCount","change #checkbox-bordered":"changeBordered","change #checkbox-striped":"changeStriped","change #table-style":"changeStyle"},e.prototype.modelEvents={"change:row":"changeRowCount","change:column":"changeColCount"},e.prototype.onShow=function(){return this.$el.find("#checkbox-bordered").prop("checked",this.model.get("bordered")),this.$el.find("#checkbox-striped").prop("checked",this.model.get("striped")),this.$el.find("#table-style").val(this.model.get("style"))},e.prototype.changeCount=function(t){var e;return e=parseInt($(t.target).closest(".spinner").find("input").val()),_.isNumber(e)&&e>0&&($(t.target).closest(".spinner").hasClass("column-spinner")&&this.model.set("column",e),$(t.target).closest(".spinner").hasClass("row-spinner"))?this.model.set("row",e):void 0},e.prototype.increaseCount=function(t){var e;return t.stopPropagation(),e=parseInt($(t.target).closest(".spinner").find("input").val(),10),e++,$(t.target).closest(".spinner").find("input").val(e),$(t.target).closest(".spinner").hasClass("column-spinner")&&this.model.set("column",e),$(t.target).closest(".spinner").hasClass("row-spinner")?this.model.set("row",e):void 0},e.prototype.decreaseCount=function(t){var e;return t.stopPropagation(),e=parseInt($(t.target).closest(".spinner").find("input").val(),10),e--,e>0&&($(t.target).closest(".spinner").find("input").val(e),$(t.target).closest(".spinner").hasClass("column-spinner")&&this.model.set("column",e),$(t.target).closest(".spinner").hasClass("row-spinner"))?this.model.set("row",e):void 0},e.prototype.changeRowCount=function(t,e){return this.$el.find(".row-spinner input").val(e)},e.prototype.changeColCount=function(t,e){return this.$el.find(".column-spinner input").val(e)},e.prototype.changeBordered=function(t){return $(t.target).prop("checked")?this.model.set("bordered",!0):this.model.set("bordered",!1)},e.prototype.changeStriped=function(t){return $(t.target).prop("checked")?this.model.set("striped",!0):this.model.set("striped",!1)},e.prototype.changeStyle=function(t){return this.model.set("style",_.slugify($(t.target).val()))},e}(Marionette.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/table-property-box/table-property-box-controller",["app","controllers/region-controller","apps/content-creator/property-dock/table-property-box/table-property-box-views"],function(t,e){return t.module("ContentCreator.PropertyDock.TablePropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return n.execute("close:question:elements"),n.execute("close:question:element:properties"),this.model=t.model,this.view=this._getView(this.model),this.show(this.view)},i.prototype._getView=function(e){return new t.Views.PropertyView({model:e})},i.prototype.onClose=function(){return this.model.trigger("save:table:markup")},i}(e),n.commands.setHandler("show:table:properties",function(e){return new t.Controller({region:e.region,model:e.model})})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/media-property-box/views",["app"],function(t){return t.module("ContentCreator.PropertyDock.MediaPropertyBox.Views",function(t,e,n,i,o,r){return t.PropertyView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tile-more-content no-padding"> <div class="tiles blue"> <div class="tile-footer drag"> Media <i class="fa fa-chevron-right"></i> <span class="semi-bold">{{element}} Properties</span> </div> <div class="docket-body"> <br> <div class="radio radio-success"> Autoplay? <input id="autoplayTrue" type="radio" name="autoplay" value="true"> <label for="autoplayTrue">Yes</label> <input id="autoplayFalse" type="radio" name="autoplay" value="false"> <label for="autoplayFalse">No</label> </div> <br> <div class="media_times hidden"> Start Time: <input name="startTime" value="{{startTime}}" type = "text" /><br> End Time: <input name="endTime" value="{{endTime}}" type = "text" /> </div> <br> </div> </div> </div>',e.prototype.events={'change input[name="autoplay"]':function(){return this.model.set({autoplay:r.toBool(this.$el.find('input[name="autoplay"]:checked').val())})},'blur input[name="startTime"]':function(t){var e;return o(t.target).removeClass("error"),e=parseInt(o(t.target).val()),r.isNaN(e)?(o(t.target).addClass("error"),this.model.set({startTime:0})):r.isNaN(e)?void 0:this.model.set({startTime:e})},'blur input[name="endTime"]':function(t){var e;return o(t.target).removeClass("error"),e=parseInt(o(t.target).val()),r.isNaN(e)?(o(t.target).addClass("error"),this.model.set({endTime:0})):r.isNaN(e)?void 0:this.model.set({endTime:e})}},e.prototype.onShow=function(){return"Video"===this.model.get("element")&&this.$el.find(".media_times").removeClass("hidden"),r.toBool(this.model.get("autoplay"))?this.$el.find("#autoplayTrue").attr("checked",!0):this.$el.find("#autoplayFalse").attr("checked",!0),""===this.model.attributes.videoUrl?this.$el.find("#autoplayTrue").attr("checked",!0):void 0},e.prototype._changeMarks=function(t){return isNaN(o(t.target).val())?void 0:this.model.set("marks",parseInt(o(t.target).val()))},e.prototype._changeOptionNumber=function(t){return this.model.set("optioncount",parseInt(o(t.target).val()))},e}(i.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/media-property-box/controller",["app","controllers/region-controller","apps/content-creator/property-dock/media-property-box/views"],function(t,e){return t.module("ContentCreator.PropertyDock.MediaPropertyBox",function(t,n,i,o,r,s){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return n.execute("close:question:elements"),n.execute("close:question:element:properties"),this.model=t.model,this.view=this._getView(this.model),this.show(this.view)},i.prototype._getView=function(e){return new t.Views.PropertyView({model:e})},i.prototype.onClose=function(){return this.model.save()},i}(e),n.commands.setHandler("show:audio:properties",function(e){return new t.Controller({region:e.region,model:e.model})}),n.commands.setHandler("show:video:properties",function(e){return new t.Controller({region:e.region,model:e.model})})})}),define("apps/content-creator/property-dock/question-element-box-loader",["apps/content-creator/property-dock/hotspot-element-box/controller","apps/content-creator/property-dock/hotspot-element-property-box/controller","apps/content-creator/property-dock/hotspot-property-box/controller","apps/content-creator/property-dock/mcq-property-box/controller","apps/content-creator/property-dock/fib-property-box/controller","apps/content-creator/property-dock/fib-element-property-box/controller","apps/content-creator/property-dock/biganswer-property-box/controller","apps/content-creator/property-dock/sort-property-box/controller","apps/content-creator/property-dock/table-property-box/table-property-box-controller","apps/content-creator/property-dock/media-property-box/controller"],function(){});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/property-dock/controller",["app","controllers/region-controller","apps/content-creator/property-dock/views","apps/content-creator/property-dock/question-element-box-loader"],function(t,e){return t.module("ContentCreator.PropertyDock",function(t,n,i,o,r,s){var a;return a=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.saveModelCommand=t.saveModelCommand,this.layout=this._getLayout(),n.commands.setHandler("show:question:elements",function(t){return function(e){return t._getElementBox(e.model)}}(this)),n.commands.setHandler("show:question:properties",function(t){return function(e){return t._getElementProperties(e.model)}}(this)),n.commands.setHandler("show:hotspot:element:properties",function(t){return function(e){return t._getHotspotElementProperties(e)}}(this)),n.commands.setHandler("show:fib:element:properties",function(t){return function(e){return t._getFibElementProperties(e)}}(this)),n.commands.setHandler("close:question:element:properties",function(t){return function(){return t.layout.questElementPropRegion.close()}}(this)),n.commands.setHandler("close:question:elements",function(t){return function(){return t.layout.questElementRegion.close()}}(this)),n.commands.setHandler("close:question:properties",function(t){return function(){return t.layout.questPropertyRegion.close()}}(this)),this.show(this.layout),this.listenTo(this.layout,"save:question",function(t){return function(){return t.saveModelCommand.execute("save:model:data")}}(this))},i.prototype._getLayout=function(){return new t.Views.Layout},i.prototype._getElementBox=function(t){var e,i;return i=t.get("element"),e=s.slugify(i),n.execute("show:"+e+":elements",{region:this.layout.questElementRegion,model:t})},i.prototype._getHotspotElementProperties=function(t){return n.execute("show:hotspot:element:properties:box",{region:this.layout.questElementPropRegion,model:t.model,hotspotModel:t.hotspotModel})},i.prototype._getFibElementProperties=function(t){return n.execute("show:fib:element:properties:box",{region:this.layout.questElementPropRegion,model:t.model,fibModel:t.fibModel})},i.prototype._getElementProperties=function(t){var e,i;return i=t.get("element"),e=s.slugify(i),n.execute("show:"+e+":properties",{region:this.layout.questPropertyRegion,model:t})},i}(e),n.commands.setHandler("show:property:dock",function(t){return new a(t)})})}),define("text!apps/content-creator/options-bar/templates/options-bar.html",[],function(){return'{{#isStudentQuestion}}\n<ul class="nav nav-tabs" id="subProps">\n    <li class="active" id="settings-tab"><a class="tabs" href="#settings-tab-pane">Settings</a></li>\n    <li class="" id="more-tab"><a class="tabs" href="#more-tab-pane">Hints and comments</a></li>\n</ul>\n{{/isStudentQuestion}}\n<form name="contentpiece-settings">\n    <div class="tab-content ">\n        <div class="tab-pane active" id="settings-tab-pane">\n\n            <div class="row m-b-15">\n                <div class="col-sm-4">\n                    <label class="form-label">Textbook<span class="text-error">*</span></label>\n                    <select required name="term_ids[textbook]" id="subs" class="form-control select2" >\n                        <option value="">--select textbook--</option>\n                        {{#textbooksFilter}}\n                        <option value="{{id}}" {{#selected}} selected="selected" {{/selected}}>{{&name}}</option>\n                        {{/textbooksFilter}}\n                    </select>\n                </div>\n                <div class="col-sm-4">\n                    <label class="form-label">Chapter<span class="text-error">*</span><span class="muted small pull-right"> Select a Subject first</span></label>\n                    <select required name="term_ids[chapter]" id="chaps" class="form-control select2" >\n                    </select>\n                </div>\n                <div class="col-sm-4">\n                    <label class="form-label">Tags <span class="muted small pull-right"> Enter tags for question</span></label>\n                    <input name="post_tags" type="text" data-role="tagsinput" value="{{post_tags}}" class="tagsinput" placeholder="Type Answer and press Enter" />\n                </div>\n            </div>\n            <div class="row m-b-15">\n                <div class="col-sm-4">\n                    <label class="form-label">Section <span class="muted small pull-right"> Select a Chapter first</span></label>\n                    <select name="term_ids[sections]" id="secs" class="form-control select2" multiple="">\n                    </select>\n                </div>\n                <div class="col-sm-4">\n                    <label class="form-label">Sub-Sections <span class="muted small pull-right"> Select a Chapter first</span></label>\n                    <select name="term_ids[subsections]" id="subsecs" class="form-control select2" multiple="">\n                    </select>\n                </div>\n                <div class="col-sm-4">\n                    <label class="form-label">Time<span class="text-error">*</span></label>\n                    <div class="row">\n                        <!--\n                        <div class="col-sm-6">\n                            <input type="text" class="form-control" placeholder="Hours">\n                        </div>-->\n                        <div class="col-sm-6">\n                            <input required name="duration" type="text" class="form-control" value="{{duration}}" placeholder="Minutes">\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="row m-b-15">\n                <div class="col-sm-4" id="question_type_column">\n                    <label class="form-label">Question Type<span class="text-error">*</span></label>\n                    <select required name="question_type" id="qType" class="form-control select2" >\n                        <option value="">--select question type--</option>\n                        <option value="chorus">Chorus</option>\n                        <option value="individual">Individual</option>\n                        <option value="multiple_eval">Multiple Evaluation</option>\n                    </select>\n                </div>\n                {{#isStudentQuestion}}\n                <div class="col-sm-4" id="difficulty_level_column">\n                    <label class="form-label">Difficulty Level<span class="text-error">*</span></label>\n                    <select required name="difficulty_level" id="difficulty_level" class="form-control select2" >\n                        <option value="">--select Difficulty Level--</option>\n                        <option value="1">Level 1</option>\n                        <option value="2">level 2</option>\n                        <option value="3">Level 3</option>\n                    </select>\n                </div>\n                {{/isStudentQuestion}}\n                <div class="col-sm-4">\n                    <label class="form-label">Status</label>\n                    <select required name="post_status" id="status" class="form-control select2" >\n                        <option value="pending">Under Review</option>\n                        <option value="publish">Publish</option>\n                        <option value="archive">Archive</option>\n                    </select>\n                </div>\n                <div class="col-sm-2">\n                    <label class="form-label">Author:</label>{{post_author_name}}\n                </div>\n\n                <div class="col-sm-2">\n                    <label class="form-label">Last Modified By:</label>\n                    <span class="lastMod muted">{{last_modified_by}}</span>\n                </div>\n\n            </div>\n            <div class="row">\n                <div class="col-sm-8">\n                    <label class="form-label">{{instructionsLabel}}</label>\n                    <textarea name="instructions" class="instructions form-control autogrow" placeholder="{{instructionsLabel}}">\n                        {{instructions}}\n                    </textarea>\n                </div>\n            </div>\n        </div>\n        {{#isStudentQuestion}}\n        <div class="tab-pane" id="more-tab-pane">\n            <div class="row m-b-15">\n                <div class="col-sm-6">\n                    <div class="checkbox check-info">\n                        <input type="checkbox" name="hint_enable" id="hint_enable">\n                        <label class="form-label" for="hint_enable">Enable Hint</label>\n                    </div>\n                    <textarea name="hint" id="question-hint" class="form-control" rows="4" placeholder="Enter Hint" style="display: none" disabled></textarea>\n                </div>\n                <div class="col-sm-6">\n                    <div class="checkbox check-info">\n                        <input type="checkbox" name="comment_enable" id="comment_enable">\n                        <label class="form-label" for="comment_enable">Enable Comment</label>\n                    </div>\n                    <textarea name="comment" id="question-comment" class="form-control" placeholder="Enter Comment" rows="4" style="display: none" disabled ></textarea>\n                </div>\n            </div>\n        </div>\n        {{/isStudentQuestion}}\n    </div>\n</form>\n<div class="row">\n    <div class="builder_actions pull-right">\n        <button type="button" class="btn btn-info btn-cons2" id="save-question">\n            <i class="fa fa-check"></i> Save</button>\n            \n        <button type="button" class="btn btn-info btn-cons2 none" id="clone-question">Clone</button>\n            \n        <button type="button" id="preview-question" class="btn btn-info btn-cons2 none">\n            <i class="fa fa-eye"></i> Preview</button>\n            \n        <button type="button" id="close-content-creator" class="btn btn-danger btn-cons2">\n            <i class="fa"></i> Cancel</button>\n    </div>\n</div>\n'});var bind=function(t,e){return function(){
return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/options-bar/options-bar-views",["app","text!apps/content-creator/options-bar/templates/options-bar.html","bootbox"],function(t,e,n){return t.module("ContentCreator.OptionsBar.Views",function(t,i){return t.OptionsBarView=function(t){function o(){return this._commentEnable=bind(this._commentEnable,this),this._hintEnable=bind(this._hintEnable,this),o.__super__.constructor.apply(this,arguments)}return extend(o,t),o.prototype.template=e,o.prototype.events={"change #subs":function(t){return this.trigger("fetch:chapters",$(t.target).val())},"change #chaps":function(t){return this.trigger("fetch:sections",$(t.target).val())},"change #secs":function(t){return this.trigger("fetch:subsections",$(t.target).val())},"change #qType":"_changeOfQuestionType","click #save-question":"onSaveQuestionSettings","click #preview-question":"previewQuestion","click #close-content-creator":function(){return n.confirm("Are you sure you want to close the content creator? Caution: Unsaved content will be lost.",function(t){return t?i.navigate("",!0):void 0})},"click #clone-question":function(){var t;return t=i.request("new:content:piece"),t.set(this.model.toJSON()),t.duplicate()},"click a.tabs":"_changeTabs","change #hint_enable":"_hintEnable","change #comment_enable":"_commentEnable"},o.prototype.modelEvents={"change:ID":function(){return this.$el.find("#preview-question, #clone-question").show()}},o.prototype.mixinTemplateHelpers=function(t){return t=o.__super__.mixinTemplateHelpers.call(this,t),t.isStudentQuestion="student_question"===this.model.get("content_type")?!0:!1,t.isTeacherQuestion="teacher_question"===this.model.get("content_type")?!0:!1,t.isContentPiece="content_piece"===this.model.get("content_type")?!0:!1,t.instructionsLabel="content_piece"===this.model.get("content_type")?"Procedure Summary":"Instructions",t},o.prototype.onShow=function(){var t;return t=this.$el.find(".instructions"),this.$el.find("#subs").trigger("change"),$(t).css({height:$(t).prop("scrollHeight")+"px"}),Backbone.Syphon.deserialize(this,this.model.toJSON()),this.$el.find("#subs, #chaps, #qType, #status, #secs, #subsecs, #difficulty_level ").select2(),this.$el.find("input.tagsinput").tagsinput(),this.model.get("hint_enable")&&this.$el.find("#hint_enable").trigger("click"),this.model.get("comment_enable")&&this.$el.find("#comment_enable").trigger("click"),"teacher_question"!==this.model.get("content_type")&&this.$el.find("#question_type_column").remove(),this.model.isNew()?void 0:this.$el.find("#preview-question, #clone-question").show()},o.prototype._changeTabs=function(t){return t.preventDefault(),$(t.target).tab("show")},o.prototype._hintEnable=function(t){return $(t.target).prop("checked")?(this.$el.find("#question-hint").prop("disabled",!1),this.$el.find("#question-hint").show()):(this.$el.find("#question-hint").prop("disabled",!0),this.$el.find("#question-hint").hide())},o.prototype._commentEnable=function(t){return $(t.target).prop("checked")?(this.$el.find("#question-comment").prop("disabled",!1),this.$el.find("#question-comment").show()):(this.$el.find("#question-comment").prop("disabled",!0),this.$el.find("#question-comment").hide())},o.prototype.onFetchChaptersComplete=function(t){var e,n,i;return this.$el.find("#chaps, #secs, #subsecs").select2("data",null),this.$el.find("#chaps, #secs, #subsecs").html(""),e=this.$el.find("#chaps"),i=this.model.get("term_ids"),n=i?i.chapter:"",$.populateChaptersOrSections(t,e,n),this.$el.find("#chaps").trigger("change")},o.prototype.onFetchSectionsComplete=function(t){var e,n,i;return this.$el.find("#secs, #subsecs").select2("data",null),this.$el.find("#secs, #subsecs").html(""),i=this.model.get("term_ids"),null!=i&&(e=i.sections),n=this.$el.find("#secs"),$.populateChaptersOrSections(t,n,e),this.$el.find("#secs").trigger("change")},o.prototype.onFetchSubsectionsComplete=function(t){var e,n,i;return this.$el.find("#subsecs").select2("data",null),this.$el.find("#subsecs").html(""),i=this.model.get("term_ids"),null!=i&&(e=i.subsections),n=this.$el.find("#subsecs"),$.populateChaptersOrSections(t,n,e)},o.prototype._changeOfQuestionType=function(t){return"multiple_eval"===$(t.target).val()?this.trigger("show:grading:parameter"):this.trigger("close:grading:parameter")},o.prototype.onSaveQuestionSettings=function(){var t,e,n;return this.$el.find("form").valid()?(t=Backbone.Syphon.serialize(this),this.trigger("save:data:to:model",t)):(n=_.first(this.$el.find(".form-control.error")),$(n).focus(),_.str.contains(n.id,"s2id")?(e=_.str.strRight(n.id,"_"),this.$el.find("#"+e).data("select2").open()):void 0)},o.prototype.previewQuestion=function(){return"student_question"===this.model.get("content_type")?window.open(SITEURL+"/#dummy-quiz/"+this.model.id,{target:"blank"}):window.open(SITEURL+"/#dummy-module/"+this.model.id,{target:"blank"})},o}(Marionette.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/options-bar/options-bar-app",["app","controllers/region-controller","bootbox","apps/content-creator/options-bar/options-bar-views"],function(t,e,n){return t.module("ContentCreator.OptionsBar",function(t,i,o,r,s,a){var l;return l=function(e){function o(){return this._getOptionsBarView=bind(this._getOptionsBarView,this),this._fetchSubsections=bind(this._fetchSubsections,this),this._fetchSections=bind(this._fetchSections,this),this._fetchChapters=bind(this._fetchChapters,this),this.showView=bind(this.showView,this),this._beforeChangeContentPiece=bind(this._beforeChangeContentPiece,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){return this.contentPieceModel=t.contentPieceModel,this.view=this._getOptionsBarView(),this.textbooksCollection=i.request("get:textbooks",{fetch_all:!0}),i.execute("when:fetched",[this.textbooksCollection,this.contentPieceModel],this.showView),this.listenTo(this.region,"change:content:piece",this._beforeChangeContentPiece),this.listenTo(this.view,"save:data:to:model",function(t){return function(e){return t.contentPieceModel.set(e),i.execute("save:question")}}(this)),this.listenTo(this.view,"show:grading:parameter",function(t){return function(){return t.region.trigger("show:grading:parameter")}}(this)),this.listenTo(this.view,"close:grading:parameter",function(t){return function(){return t.region.trigger("close:grading:parameter")}}(this))},o.prototype._beforeChangeContentPiece=function(t){var e;return this.contentPieceModel.isNew()?e="You are in the middle of creating a new content piece. If you reload the page your changes will be lost.":(this.view.triggerMethod("save:question:settings"),this.view.$el.find("form").valid()&&"false"!==s('form input[name="complete"]').val()?i.navigate("edit-content/"+t,!0):n.alert("Error occured saving your content"))},o.prototype.showView=function(){var t,e,n;return this.show(this.view,{loading:!0,entities:[this.textbooksCollection]}),e=this.contentPieceModel.get("term_ids"),e&&(n=e.textbook,null!=e.chapter&&(t=e.chapter),null!=n&&this._fetchChapters(n,t),null!=t&&this._fetchSections(t)),this.listenTo(this.view,"fetch:chapters",this._fetchChapters),this.listenTo(this.view,"fetch:sections",this._fetchSections),this.listenTo(this.view,"fetch:subsections",this._fetchSubsections)},o.prototype._fetchChapters=function(t,e){var n;return n=i.request("get:chapters",{parent:t}),i.execute("when:fetched",n,function(t){return function(){return t.view.triggerMethod("fetch:chapters:complete",n,e)}}(this))},o.prototype._fetchSections=function(t){return this.subSectionsList=null,this.allSectionsCollection=i.request("get:subsections:by:chapter:id",{child_of:t}),i.execute("when:fetched",this.allSectionsCollection,function(e){return function(){var n;return n=e.allSectionsCollection.where({parent:t}),e.subSectionsList=a.difference(e.allSectionsCollection.models,n),e.view.triggerMethod("fetch:sections:complete",n)}}(this))},o.prototype._fetchSubsections=function(t){return i.execute("when:fetched",this.allSectionsCollection,function(e){return function(){var n;return n=null,n=a.filter(e.subSectionsList,function(e){return a.contains(t,e.get("parent"))}),e.view.triggerMethod("fetch:subsections:complete",n)}}(this))},o.prototype._getOptionsBarView=function(){return new t.Views.OptionsBarView({model:this.contentPieceModel,templateHelpers:this._getTemplateHelpers()})},o.prototype._getTemplateHelpers=function(){return{textbooksFilter:function(t){return function(){var e,n,i;return i=new Array,e=t.contentPieceModel.get("term_ids"),null!=e&&(n=e.textbook),t.textbooksCollection.each(function(t,e){var o;return o={name:t.get("name"),id:t.get("term_id")},n&&n===t.get("term_id")&&(o.selected="selected"),i.push(o)}),i}}(this)}},o}(e),i.commands.setHandler("show:options:bar",function(t){return new l(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-pieces-listing/views",["app"],function(t){return t.module("ContentCreator.ContentPieces.Views",function(t,e){var n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='{{&excerpt}}<br> <label class="form-label list-group-item-text"> {{textbookName}} | {{chapterName}} | {{contentType}} </label> <label>Last Modified: {{date_modified}}</label>',e.prototype.className="col-md-2 list-group-item browse-content-pieces-item",e.prototype.tagName="a",e.prototype.modelEvents=function(){return{"change:isActive":function(){return this.$el.closest("div").find("a").removeClass("active"),this.$el.addClass("active")}}},e.prototype.events=function(){return{click:function(){return this.trigger("change:content:piece",this.model)}}},e.prototype.onShow=function(){return Marionette.getOption(this,"isCurrentItem")?this.$el.addClass("active"):void 0},e.prototype.mixinTemplateHelpers=function(t){return t.excerpt=_.prune(t.post_excerpt,50),t.contentType=_.str.titleize(_.str.humanize(t.content_type)),t.date_modified=moment(t.post_modified).format("Do MMM YYYY h:mm a"),t},e}(Marionette.ItemView),t.ContentPieces=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="col-md-12"> <div class="browse-thru none"> <div class="row"> <h4>Navigate between editable content pieces: <span class="m-l-10" id="textbookNames">{{&textbookNames}}</span> </h4> <div class="list-group" id="list-content-pieces"> </div> </div> <div class="row"> <div class"col-md-10"> <a class="pull-left btn btn-default browse-prev"><i class="fa fa-backward"></i> Browse Previous</a> <a class="pull-right btn btn-default browse-next"><i class="fa fa-forward"></i> Browse Next</a> </div> </div> </div> <div class="row m-t-20"> <div class="col-md-8"> {{#isTeacherQuestion}} <h3 class="m-t-0">Create a <span class="semi-bold">Teacher</span> Question<br> <small>Create questions for training module to be taken during the class</small></h3> {{/isTeacherQuestion}} {{#isContentPiece}} <h3 class="m-t-0">Create <span class="semi-bold">Content</span><br> <small>Create content for training modules. This will not have any student interaction like teacher question</small></h3> {{/isContentPiece}} {{#isStudentQuestion}} <h3 class="m-t-0">Create a <span class="semi-bold">Student</span> Question<br> <small>Create questions for quizzes to be taken by the students</small></h3> {{/isStudentQuestion}} </div> <div class="pull-right md-col-4"> <a class="btn btn-default previous-item"><i class="fa fa-backward"></i> Previous Question</a> <a class="btn btn-default next-item"><i class="fa fa-forward"></i> Next Question</a> <a class="btn btn-default browse-all">Browse</a> </div> </div> </div>',e.prototype.className="row m-b-20",e.prototype.itemView=n,e.prototype.itemViewContainer="#list-content-pieces",e.prototype.events=function(){return{"click .browse-next":function(){return this.trigger("browse:more","next")},"click .browse-prev":function(){return this.trigger("browse:more","prev")},"click .previous-item":function(){return this.trigger("change:content:piece","prev")},"click .next-item":function(){return this.trigger("change:content:piece","next")},"click .browse-all":function(){return this.$el.find(".browse-thru").toggle()}}},e.prototype.collectionEvents=function(){return{reset:function(){var t,e;return e=_.unique(this.collection.pluck("textbookName")),t=_.unique(this.collection.pluck("chapterName")),this.$el.find("#textbookNames").html("Textbook: <b>"+e+"</b> | Chapter: <b>"+t+"</b>")}}},e.prototype.itemViewOptions=function(t,e){var n;return n={},this.model.id===t.id&&(n.isCurrentItem=!0),n},e.prototype.mixinTemplateHelpers=function(t){var n,i;return t=e.__super__.mixinTemplateHelpers.call(this,t),t.isStudentQuestion="student_question"===this.model.get("content_type")?!0:!1,t.isTeacherQuestion="teacher_question"===this.model.get("content_type")?!0:!1,t.isContentPiece="content_piece"===this.model.get("content_type")?!0:!1,i=_.unique(this.collection.pluck("textbookName")),n=_.unique(this.collection.pluck("chapterName")),t.textbookNames="Textbook: <b>"+i+"</b> | Chapter: <b>"+n+"</b>",t},e}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-pieces-listing/app",["app","controllers/region-controller","apps/content-creator/content-pieces-listing/views"],function(t,e){return t.module("ContentCreator.ContentPieces",function(t,n,i,o,r,s){var a;return a=function(e){function i(){return this._browseMore=bind(this._browseMore,this),this._showViews=bind(this._showViews,this),this._getMoreItems=bind(this._getMoreItems,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e;return this.contentPieceModel=t.contentPieceModel,this.contentPiecesCollection=n.request("empty:content:pieces:collection"),this.contentPiecesCollection.comparator="post_modified",this.contentPiecesCollection.fetch_next=!0,this.contentPiecesCollection.fetch_prev=!0,e=this._getModels(this.contentPieceModel.id),e.done(this._showViews)},i.prototype._getModels=function(t,e){var i,o,a;return null==e&&(e="next"),this.defer=r.Deferred(),o=this.contentPiecesCollection.models,this.currentIndex=0,s.isEmpty(o)||(this.currentIndex=s.indexOf(this.contentPiecesCollection.models,this.contentPiecesCollection.get(t)),"next"===e?(this.currentIndex++,o=this.contentPiecesCollection.models.slice(this.currentIndex,this.currentIndex+12)):(this.currentIndex=this.currentIndex-12,o=this.contentPiecesCollection.models.slice(this.currentIndex,this.currentIndex+12))),o.length<12&&this.contentPiecesCollection["fetch_"+e]?(a=this._getMoreItems(t,e),a.done(function(t){return function(i){var o,r;return t.contentPiecesCollection.add(i.items),t.contentPiecesCollection.sort(),"next"===e?r=t.contentPiecesCollection.models.slice(t.currentIndex,t.currentIndex+12):(t.currentIndex=t.currentIndex-12,r=t.contentPiecesCollection.models.slice(t.currentIndex,t.currentIndex+12)),"over"===i.status&&(t.contentPiecesCollection["fetch_"+e]=!1),o=n.request("empty:content:pieces:collection"),o.reset(r),t.defer.resolve(o)}}(this))):(i=n.request("empty:content:pieces:collection"),i.reset(o),this.defer.resolve(i)),this.defer.promise()},i.prototype._getMoreItems=function(t,e){var n;return this.deferAJAX=r.Deferred(),n={action:"get-adjacent-content-pieces",ID:t,direction:e},r.get(AJAXURL,n).done(function(t){return function(e){return t.deferAJAX.resolve(e)}}(this)),this.deferAJAX.promise()},i.prototype._showViews=function(e){return e.comparator="post_modified",e.sort(),this.view=new t.Views.ContentPieces({model:this.contentPieceModel,collection:e}),this.show(this.view),this.listenTo(this.view,"itemview:change:content:piece",function(t){return function(e,i){return t.contentPieceModel=i,e.model.set({isActive:!0}),n.navigate("edit-content/"+i.id,!0)}}(this)),this.listenTo(this.view,"change:content:piece",function(t){return function(e){var i,o,r,a;return i=s.indexOf(t.contentPiecesCollection.models,t.contentPiecesCollection.get(t.contentPieceModel.id)),a="next"===e?i+1:i-1,r=t.contentPiecesCollection.at(a),console.log(r),console.log("testing change content piece"),r?n.navigate("edit-content/"+r.id,!0):(o=t._getMoreItems(t.contentPieceModel.id,e),o.done(function(t){return t.items.length>0?n.navigate("edit-content/"+t.items[0].ID,!0):void 0}))}}(this)),this.listenTo(this.view,"browse:more",this._browseMore)},i.prototype._browseMore=function(t){var e,n;return n="next"===t?this.view.collection.last():this.view.collection.first(),e=this._getModels(n.id,t),e.done(function(t){return function(e){return e.length>0?t.view.collection.reset(e.models):void 0}}(this))},i}(e),n.commands.setHandler("show:content:creator:pieces:listing",function(t){return new a(t)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/grading-parameter/grading-parameter-view",["app"],function(t){return t.module("ContentCreator.GradingParameter.Views",function(t,e){var n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="singleParam",e.prototype.template='<div class="row m-b-10"> <div class="col-sm-4"> <textarea id="parameter" placeholder="Parameter name" class="w100 autogrow">{{parameter}}</textarea> </div><div class="saved" style="color: dodgerblue;display: none">Updated</div><div class="changed" style="color: #ff0000; display: none">Changed</div> </div> <div class="row p-b-15"> {{#attributes}} <div class="col-sm-3"> <textarea placeholder="Attribute" class="w100 attribute autogrow">{{.}}</textarea> </div> {{/attributes}} </div> <div class="row b-grey b-b p-b-15 m-b-15"> <div class="col-sm-12"> <button id="btn-delete" class="btn btn-default btn-sm btn-small pull-right">Delete</button> <button id="btn-save" class="btn btn-success btn-sm btn-small pull-right m-r-10">Save</button> </div> </div>',e.prototype.mixinTemplateHelpers=function(t){for(t=e.__super__.mixinTemplateHelpers.call(this,t);t.attributes.length<4;)t.attributes.push("");return t},e.prototype.events={"click #btn-save":"_saveGradingParameter","click #btn-delete":"_deleteGradingParameter","change textarea":"_inputChanged"},e.prototype.onShow=function(){return _.each(this.$el.find("textarea"),function(t){return function(t,e){return $(t).css({height:$(t).prop("scrollHeight")+"px"})}}(this))},e.prototype._saveGradingParameter=function(){var t;if(""!==this.$el.find("textarea#parameter").val()&&(t=new Array,_.each(this.$el.find("textarea.attribute"),function(e){return""!==$(e).val()?t.push($(e).val()):void 0}),t.length))return this.model.set("parameter",this.$el.find("textarea#parameter").val()),this.model.set("attributes",t),this.trigger("save:grading:parameter"),this.$el.find(".saved").show(),this.$el.find(".changed").hide()},e.prototype._deleteGradingParameter=function(){return this.trigger("delete:grading:parameter")},e.prototype._inputChanged=function(){return this.$el.find(".saved").hide(),this.$el.find(".changed").show()},e}(Marionette.ItemView),t.GradingParamsView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="createParameters",e.prototype.template='<h4 class="semi-bold">Grading Parameters</h4> <div id="grading-params-table"> </div> <div class="row"> <div class="col-sm-12"> <button id="add-parameter" class="btn btn-info btn-block btn-small h-center block addParam">Add Parameter</button> </div> </div>',e.prototype.itemViewContainer="#grading-params-table",e.prototype.itemView=n,e.prototype.events={"click button#add-parameter":"_addParameter"},e.prototype._addParameter=function(){return this.trigger("add:new:grading:parameter")},e}(Marionette.CompositeView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/grading-parameter/grading-parameter-controller",["app","controllers/region-controller","apps/content-creator/grading-parameter/grading-parameter-view"],function(t,e){return t.module("ContentCreator.GradingParameter",function(t,n){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e;return this.contentPieceModel=t.contentPieceModel,e=this.contentPieceModel.get("grading_params"),this.gradingParamsCollection=n.request("get:grading:parameter:collection",e),this.view=this._getView(),this.listenTo(this.view,"itemview:save:grading:parameter",this._saveGradingCollection),this.listenTo(this.view,"itemview:delete:grading:parameter",this._deleteParameter),this.listenTo(this.view,"add:new:grading:parameter",this._addNewParameter),this._setMinCollectionSizeAsTwo(),this.show(this.view,{loading:!0,entities:this.gradingParamsCollection})},i.prototype._setMinCollectionSizeAsTwo=function(){var t,e;for(e=[];this.gradingParamsCollection.size()<2;)t=n.request("get:grading:parameter"),e.push(this.gradingParamsCollection.push(t));return e},i.prototype._getView=function(){return new t.Views.GradingParamsView({collection:this.gradingParamsCollection})},i.prototype._saveGradingCollection=function(){return this.contentPieceModel.set("grading_params",this.gradingParamsCollection.toJSON())},i.prototype._deleteParameter=function(t){return this.gradingParamsCollection.remove(t.model),this.contentPieceModel.set("grading_params",this.gradingParamsCollection.toJSON()),this._setMinCollectionSizeAsTwo()},i.prototype._addNewParameter=function(){var t;return t=n.request("get:grading:parameter"),this.gradingParamsCollection.push(t)},i}(e),n.commands.setHandler("show:grading:parameter:view",function(e){return console.log("show:grading:parameter:view"),new t.Controller(e)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/content-creator-controller",["app","controllers/region-controller","apps/content-creator/element-box/elementboxapp","apps/content-creator/content-builder/app","apps/content-creator/property-dock/controller","apps/content-creator/options-bar/options-bar-app","apps/content-creator/content-pieces-listing/app","apps/content-creator/grading-parameter/grading-parameter-controller"],function(t,e){return t.module("ContentCreator.Controller",function(t,n){var i,o;return t.ContentCreatorController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,o;return this.contentType=t.contentType,o=t.contentID,o?this.contentPieceModel=n.request("get:page:json",o):this.contentPieceModel=n.request("get:page:json"),n.execute("when:fetched",this.contentPieceModel,function(t){return function(){return t.contentPieceModel.get("ID")?void 0:t.contentPieceModel.set({content_type:t.contentType})}}(this)),e={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"Content Creator",link:"javascript:;",active:"active"}]},n.execute("update:breadcrumb:model",e),this.layout=this._getContentCreatorLayout(),this.eventObj=n.createEventObject(),this.listenTo(this.layout,"show",function(t){return function(){return t.contentPieceModel.isNew()||n.execute("show:content:creator:pieces:listing",{region:t.layout.contentPiecesListRegion,contentPieceModel:t.contentPieceModel}),t._showViews()}}(this)),this.listenTo(this.layout.optionsBarRegion,"show:grading:parameter",this._showGradingParameter),this.listenTo(this.layout.optionsBarRegion,"close:grading:parameter",this._closeGradingParameter),this.listenTo(this.layout.contentPiecesListRegion,"change:content:piece",function(t){return function(e){return t.layout.optionsBarRegion.trigger("change:content:piece",e)}}(this)),n.execute("when:fetched",this.contentPieceModel,function(t){return function(){var e,n;return e=t.contentPieceModel.get("present_in_modules"),_.isEmpty(e)?t.show(t.layout,{loading:!0}):(n=new i({model:t.contentPieceModel}),t.show(n))}}(this))},e.prototype._getContentCreatorLayout=function(){return new o({model:this.contentPieceModel})},e.prototype._showGradingParameter=function(){return $(this.layout.contentBuilderRegion.el).find("#myCanvas").hide(),n.execute("show:grading:parameter:view",{region:this.layout.gradingParameterRegion,contentPieceModel:this.contentPieceModel})},e.prototype._closeGradingParameter=function(){return $(this.layout.contentBuilderRegion.el).find("#myCanvas").show(),this.layout.gradingParameterRegion.reset()},e.prototype._showViews=function(){return n.execute("show:options:bar",{region:this.layout.optionsBarRegion,contentType:this.contentType,contentPieceModel:this.contentPieceModel}),n.execute("show:element:box",{region:this.layout.elementBoxRegion,contentType:this.contentPieceModel.get("content_type"),eventObj:this.eventObj}),n.execute("show:content:builder",{region:this.layout.contentBuilderRegion,contentPieceModel:this.contentPieceModel,eventObj:this.eventObj}),n.execute("show:property:dock",{region:this.layout.PropertyRegion,contentPieceModel:this.contentPieceModel}),null!=this.contentPieceModel.get("question_type")&&"multiple_eval"===this.contentPieceModel.get("question_type")?this._showGradingParameter():void 0},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="content-creator-layout",e.prototype.template='<div id="content-pieces-list-region"></div> <div id="options-bar-region"></div> <input type="hidden" name = "cp_not_saved" value= false data-description="content piece modified but not saved" /> <div class="page-title"> <h3>Add <span class="semi-bold">Question</span></h3> </div> <div class="creator"> <div class="tiles" id="toolbox"></div> <div class="" id="content-builder"></div> <div id="grading-parameter"></div> <div id="property-dock"></div> </div>',e.prototype.regions={elementBoxRegion:"#toolbox",contentBuilderRegion:"#content-builder",PropertyRegion:"#property-dock",optionsBarRegion:"#options-bar-region",gradingParameterRegion:"#grading-parameter",contentPiecesListRegion:"#content-pieces-list-region"},e}(Marionette.Layout),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tiles white grid simple vertical green animated slideInRight"> <div class="grid-title no-border"> Cannot Edit This Content Piece </div> <div style="overflow: hidden; display: block;" class="grid-body no-border"> <div class="row "> <div class="col-md-8"> <h4>This content piece cannot be edited as it is used in the following modules:</h4> <ul class="list-group"> {{#moduleItems}} <li class="list-group-item"><a href="{{url}}">{{name}}</a></li> {{/moduleItems}} </ul> <h4>You can clone it to create another content piece.</h4> <a class="btn btn-info" href="{{urlBase}}/{{ID}}">View Content Piece</a> <a class="btn btn-info clone_item">Clone Content Piece</a> </div> </div> </div> </div>',e.prototype.mixinTemplateHelpers=function(t){return t.moduleItems=_.map(t.present_in_modules,function(t){var e,n;return n=function(){switch(t.type){case"quiz":return"view-quiz";case"teaching-module":return"view-group";case"student-training":return"view-student-training-module"}}(),e=t,e.url=SITEURL+"/#"+n+"/"+t.id,e}),t.urlBase=SITEURL+"/#dummy-",t.urlBase+="student_question"===t.content_type?"quiz":"module",console.log(t),t},e.prototype.events=function(){return{"click .clone_item":"cloneItem"}},e.prototype.cloneItem=function(){var t;return this.cloneModel=n.request("new:content:piece"),t=this.model.toJSON(),this.clonedData=_.omit(t,["ID","guid","last_modified_by","post_author","post_author_name","post_date","post_date_gmt","published_by"]),this.clonedData.post_status="pending",this.clonedData.clone_id=this.model.id,n.execute("when:fetched",this.cloneModel,function(t){return function(){return t.cloneModel.save(t.clonedData,{wait:!0,success:function(t){return n.navigate("edit-content/"+t.id,!0)},error:function(t){return console.log(t)}})}}(this))},e}(Marionette.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/choose-content-type/choose-content-type-app",["app","controllers/region-controller"],function(t,e){return t.module("ContentCreator.Controller",function(t,n){var i;return t.ChooseContentType=function(t){function e(){return this._getChooseContentTypeView=bind(this._getChooseContentTypeView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t,e;return t={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"Choose Content Type",link:"javascript:;",active:"active"}]},n.execute("update:breadcrumb:model",t),this.view=e=this._getChooseContentTypeView(),this.show(e,{loading:!0})},e.prototype._getChooseContentTypeView=function(){return new i},e}(e),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<h1 class="text-center muted m-b-20">Select a <span class="bold">content type</span> to create</h1> <div class="col-sm-4"> <div class="tiles white text-center"> <a class="heading p-t-40 p-b-40" href="#create-content/teacher_question"> Teacher Question </a> </div> </div> <div class="col-sm-4"> <div class="tiles white text-center"> <a class="heading p-t-40 p-b-40" href="#create-content/student_question"> Student Question </a> </div> </div> <div class="col-sm-4"> <div class="tiles white text-center"> <a class="heading p-t-40 p-b-40" href="#create-content/content_piece"> Content </a> </div> </div> </div>',e.prototype.className="row creator",e}(Marionette.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-creator/contentcreatorapp",["app","controllers/region-controller","apps/content-creator/content-creator-controller","apps/content-creator/choose-content-type/choose-content-type-app"],function(t,e){return t.module("ContentCreator",function(t,e,n,i,o,r){var s;return t.closequestionelementproperty=!0,t.closequestionelements=!0,t.closequestioneproperty=!0,s=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}var o;return extend(i,n),i.prototype.appRoutes={"":"chooseContentType","create-content/:contentType":"showContentCreator","edit-content/:contentID":"editContent"},o={chooseContentType:function(){return new t.Controller.ChooseContentType({region:e.mainContentRegion})},showContentCreator:function(n){
return new t.Controller.ContentCreatorController({region:e.mainContentRegion,contentType:n})},editContent:function(n){return new t.Controller.ContentCreatorController({region:e.mainContentRegion,contentID:n})}},t.on("start",function(){return new i({controller:o})}),i}(i.AppRouter)})}),define("text!apps/media/upload/templates/upload.html",[],function(){return'\n<div class="aj-imp-upload-media"><span class="bicon icon-uniF10C"></span>\n  <div id="choosefiles" class="aj-imp-upload-message"><span class="glyphicon glyphicon-cloud-upload"></span>Upload Images from your Computer</div><span class="small-text">Upload Multiple Images by holding CTRL</span>\n  <div class="clear"></div><br/>\n  <div id="progress" style="width: 30%; margin: 0px auto; display: none;" class="progress progress-striped active">\n    <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="progress-bar"></div><span class="sr-only">0% Complete </span>\n  </div>\n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media/upload/views",["app","plupload","text!apps/media/upload/templates/upload.html"],function(t,e,n){return t.module("Media.Upload.Views",function(t,i){return t.UploadView=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,t),o.prototype.template=n,o.prototype.onShow=function(){return this.uploader=new e.Uploader({runtimes:"gears,html5,flash,silverlight,browserplus",file_data_name:"async-upload",multiple_queues:!0,browse_button:"choosefiles",multipart:!0,urlstream_upload:!0,max_file_size:"10mb",url:UPLOADURL,flash_swf_url:SITEURL+"/wp-includes/js/plupload/plupload.flash.swf",silverlight_xap_url:SITEURL+"/wp-includes/js/plupload/plupload.silverlight.xap",filters:[{title:"Image files",extensions:"jpg,gif,png"}],multipart_params:{action:"upload-attachment",_wpnonce:_WPNONCE}}),this.uploader.init(),this.uploader.bind("FilesAdded",function(t){return function(e,n){return t.uploader.start(),t.$el.find("#progress").show()}}(this)),this.uploader.bind("UploadProgress",function(t){return function(e,n){return console.log(n),t.$el.find(".progress-bar").css("width",n.percent+"%")}}(this)),this.uploader.bind("Error",function(t){return function(t,e){return t.refresh()}}(this)),this.uploader.bind("FileUploaded",function(t){return function(e,n,o){return t.$el.find(".progress-bar").css("width","0%"),t.$el.find("#progress").hide(),o=JSON.parse(o.response),o.success?i.execute("new:media:added",o.data):void 0}}(this))},o.prototype.onClose=function(){return this.uploader.destroy()},o}(Marionette.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media/upload/controller",["app","controllers/region-controller","apps/media/upload/views"],function(t,e){return t.module("Media.Upload",function(t,n){return t.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(){var t;return t=this._getView(),this.show(t)},n.prototype._getView=function(e){return new t.Views.UploadView},n}(e),n.commands.setHandler("start:media:upload:app",function(e){return function(e){return new t.Controller({region:e.region})}}(this))})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media/youtube-video/controller",["app","controllers/region-controller"],function(t,e){return t.module("Media.Youtube",function(t,n){var i;return i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row"> <div class="col-md-6"> <input type="text" class="form-control youtubeUrl" placeholder="http://www.youtube.com/watch?v=xW_AsV7k42o"> <i class="text-danger hidden">Your URL should be something like http://www.youtube.com/watch?v=xW_AsV7k42o</i> </div> <div class="col-md-4"> <button class="pull-left btn btn-info btn-small">Add Video</button> </div> </div>',e.prototype.events=function(){return{"click button":function(){var t;return t=$(".youtubeUrl").val(),this.$el.find(".text-danger").addClass("hidden"),this.$el.find(".youtubeUrl").removeClass("error"),_.str.contains(t,"http://www.youtube.com/watch?v=")||_.str.contains(t,"https://www.youtube.com/watch?v=")?this.trigger("youtube:url:selected",t):(this.$el.find(".text-danger").removeClass("hidden"),this.$el.find(".youtubeUrl").addClass("error"))}}},e}(Marionette.ItemView),t.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return t=this._getView(),this.show(t),this.listenTo(t,"youtube:url:selected",function(t){return this.region.trigger("youtube:url:selected",t)})},e.prototype._getView=function(t){return new i},e}(e),n.commands.setHandler("start:youtube:video:app",function(e){return function(e){return new t.Controller({region:e.region})}}(this))})}),define("text!apps/media/grid/templates/media.html",[],function(){return'{{#imagePreview}}\n    <a class="thumbnail">\n        <div class="imgthumb"><img src="{{imageUrl}}" class="img-responsive"/></div>\n        <div class="imaTitle"><span>{{title}}</span></div>\n        <div class="ticker">\n            <span class="glyphicon glyphicon-ok"></span>\n            <span class="glyphicon glyphicon-minus"></span>\n        </div>\n    </a>\n    <div class="edit-image clearfix">\n    <div><span>{{title_show}}</span></div>\n    <span class="glyphicon glyphicon-edit edit"></span> Edit\n    </div>\n{{/imagePreview}}\n{{#videoPreview}}\n<a class="thumbnail">\n    <div class="imaTitle"><span>{{title_show}}</span></div>\n    <div class="ticker">\n        <span class="glyphicon glyphicon-ok"></span>\n        <span class="glyphicon glyphicon-minus"></span>\n    </div>\n</a>\n{{/videoPreview}}\n{{#audioPreview}}\n<a class="thumbnail">\n    <div class="imaTitle"><span>{{title_show}}</span></div>\n    <div class="ticker">\n        <span class="glyphicon glyphicon-ok"></span>\n        <span class="glyphicon glyphicon-minus"></span>\n    </div>\n</a>\n{{/audioPreview}}'}),define("text!apps/media/grid/templates/layout-tpl.html",[],function(){return'<div id="show-image">\n<div class="row b-b b-grey m-b-10">\n    <div class="btn-group">\n        <a id="list" class="btn btn-default btn-sm btn-small">\n            <span class="glyphicon glyphicon-th-list"></span> List\n        </a>\n        <a id="grid" class="btn btn-default btn-sm btn-small">\n            <span class="glyphicon glyphicon-th"></span> Grid\n        </a>\n    </div>\n    <div class="input-with-icon right pull-right mediaSearch m-b-10">\n        <i class="fa fa-search"></i>\n        <input type="text" class="form-control" placeholder="Search">\n    </div>\n</div>\n<div class="clearfix"></div>\n<div class="row">\n    <div id="placeholder-video-txt" class="text-center m-t-40 m-b-40">\n        <h4 class="semi-bold muted">\n            Looking for\n                {{#video}}a video{{/video}}\n                {{#audio}}an audio{{/audio}}?\n            Use the Search box above</h4>\n        <h1 class="semi-bold muted"><span class="fa fa-search"></span></h1>\n    </div>\n    <div id="selectable-images"></div>\n    \n</div>\n</div>\n<div id="edit-image-view"></div>\n'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/media/grid/views",["app","text!apps/media/grid/templates/media.html","text!apps/media/grid/templates/layout-tpl.html"],function(t,e,n){return t.module("Media.Grid.Views",function(t,i){var o;return o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.className="col-sm-2 single-img",n.prototype.events={"click a":function(t){return t.preventDefault()},click:"_whenImageClicked","click .edit-image":function(){return this.trigger("show:image:editor",this.model)}},n.prototype.modelEvents={change:"render"},n.prototype.mixinTemplateHelpers=function(t){return t=n.__super__.mixinTemplateHelpers.call(this,t),t.imagePreview=!1,t.videoPreview=!1,t.audioPreview=!1,"image"===t.type&&t.sizes&&(t.sizes.thumbnail&&t.sizes.thumbnail.url?t.imageUrl=t.sizes.thumbnail.url:t.sizes.full&&t.sizes.full.url&&(t.imageUrl=t.sizes.full.url)),t.imageUrl&&(t.imagePreview=!0),"video"===t.type&&(t.videoPreview=!0,t.title_show=_.prune(t.title,50)),"audio"===t.type&&(t.audioPreview=!0,t.title_show=_.prune(t.title,50)),"image"===t.type&&(t.title_show=_.prune(t.title,22)),t},n.prototype._whenImageClicked=function(t){var e;return e=$(t.target).hasClass("single-img")?$(t.target):$(t.target).closest(".single-img"),this.trigger("media:element:selected")},n}(Marionette.ItemView),t.GridView=function(t){function e(){return this.onMediaCollectionFetched=bind(this.onMediaCollectionFetched,this),this.searchMedia=bind(this.searchMedia,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e.prototype.itemView=o,e.prototype.itemViewContainer="#selectable-images",e.prototype.events={"keypress .mediaSearch":"searchMedia","click a#list.btn":function(){return this._changeChildClass("List")},"click a#grid.btn":function(){return this._changeChildClass("Grid")}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.audio=t.video=!1,"video"===Marionette.getOption(this,"mediaType")&&(t.video=!0),"audio"===Marionette.getOption(this,"mediaType")&&(t.audio=!0),t},e.prototype.onRender=function(){var t;return this.$el.find("#no-results-div").hide(),t=Marionette.getOption(this,"mediaType"),this.listenTo(this,"after:item:added",function(t){return function(e){return t.$el.find(".single-img:first").hasClass("col-sm-2")?t._changeChildClass("Grid"):t.$el.find(".single-img:first").hasClass("listView")&&t._changeChildClass("List"),t.$el.closest(".tab-content").siblings(".nav-tabs").find(".all-media-tab").find("a").trigger("click")}}(this)),this.listenTo(this.collection,"media:uploaded",function(t){var e;return e=this.children.findByModel(t),e.$el.find("img").trigger("click"),this.$el.find("#selectable-images").selectSelectableElements(e.$el)}),this.collection.isEmpty()&&"image"!==t||this.$el.find("#placeholder-video-txt").hide(),("video"===t||"audio"===t)&&(this.$el.find("#list, #grid").hide(),this._changeChildClass("List")),this.collection.isEmpty()&&""!==_.trim(this.collection.filters.searchStr)?(this.$el.find("#placeholder-video-txt").hide(),this.$el.find("#no-results-div").show().html("No media files were found for your search: "+this.collection.filters.searchStr+"<br>Add a part of the media title in search."),this.collection.filters.searchStr=""):void 0},e.prototype.onCollectionRendered=function(){return this.multiSelect?this.$el.find("#selectable-images").bind("mousedown",function(t){return t.metaKey=!0}).selectable({cancel:".delete-media-img"}):this.$el.find("#selectable-images").selectable({cancel:".delete-media-img"})},e.prototype._changeChildClass=function(t,e){return this.children.each(_.bind(this._changeClassOfEachChild,this,t))},e.prototype._changeClassOfEachChild=function(t,e){return"List"===t?e.$el.removeClass("col-sm-2").addClass("listView"):"Grid"===t?e.$el.removeClass("listView").addClass("col-sm-2"):void 0},e.prototype.searchMedia=function(t){var e,n;return e=t.which,13===e&&(n=_.trim($(t.target).val()))?this.trigger("search:media",n):void 0},e.prototype.onMediaCollectionFetched=function(t){return this.collection=t,this.render()},e.prototype.onShowEditImage=function(t){return this.$el.find("#show-image").hide(),this.$el.find("#edit-image-view").html(t.render().$el).show(),t.triggerMethod("show")},e.prototype.onImageEditingCancelled=function(){var t;return t=this,this.$el.find("#edit-image-view").fadeOut("fast",function(){return $(this).empty(),t.$el.find("#show-image").show()})},e}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media/grid/controller",["app","controllers/region-controller","apps/media/grid/views"],function(t,e){return t.module("Media.Grid",function(t,n){return t.Controller=function(e){function i(){return this._searchMedia=bind(this._searchMedia,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e;return this.mediaType=t.mediaType,e={mediaType:this.mediaType},"image"===this.mediaType?this.mediaCollection=n.request("fetch:media",e):this.mediaCollection=n.request("get:empty:media:collection"),this.view=this._getView(this.mediaCollection),n.execute("when:fetched",this.mediaCollection,function(t){return function(){return t.show(t.view,{loading:!0})}}(this)),this.listenTo(this.view,"itemview:media:element:selected",function(t){return function(e){return Marionette.triggerMethod.call(t.region,"media:element:selected",Marionette.getOption(e,"model"))}}(this)),this.listenTo(this.view,"itemview:media:element:unselected",function(t){return function(e){return Marionette.triggerMethod.call(t.region,"media:element:unselected",Marionette.getOption(e,"model"))}}(this)),this.listenTo(this.view,"itemview:delete:media:image",function(t){return function(e,n){return t.deleteImage(n)}}(this)),this.listenTo(this.view,"itemview:show:image:editor",function(t){return function(e,i){var o,r;return r=n.currentImageRatio,o=n.request("get:image:editor:view",i,{aspectRatio:r}),t.view.triggerMethod("show:edit:image",o),t.listenTo(o,"image:editing:cancelled",function(){return t.view.triggerMethod("image:editing:cancelled")})}}(this)),n.commands.setHandler("new:media:added",function(t){return function(e){return t.mediaCollection.add(e),t.mediaCollection.trigger("media:uploaded",t.mediaCollection.get(e.id))}}(this)),this.listenTo(this.view,"search:media",this._searchMedia)},i.prototype._searchMedia=function(t){var e;return e={mediaType:this.mediaType,searchStr:t},this.mediaCollection=n.request("fetch:media",e),n.execute("when:fetched",this.mediaCollection,function(t){return function(){return t.view.triggerMethod("media:collection:fetched",t.mediaCollection)}}(this))},i.prototype._getView=function(e){return this.mediaCollection=e,new t.Views.GridView({collection:this.mediaCollection,mediaType:this.mediaType})},i.prototype.deleteImage=function(t){return t.destroy({allData:!1,wait:!0})},i}(e),n.commands.setHandler("start:media:grid:app",function(e){return function(e){return new t.Controller({region:e.region,mediaType:e.mediaType})}}(this))})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media/selected/controller",["app","controllers/region-controller"],function(t,e){return t.module("Media.Selected",function(t,n){var i,o,r;return t.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,n;return null==t&&(t={}),this.region=t.region,e=t.collection,n=this._getView(e),this.show(n)},e.prototype._getView=function(t){return new o({collection:t})},e}(e),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="",e.prototype.className="media",e.prototype.tagName="img",e.prototype.events={"click a":function(t){return t.preventDefault()}},e.prototype.onRender=function(){return console.log("media selected"),console.log(this.model),this.$el.width("50px").height("50px"),this.$el.attr("src",this.model.get("sizes").thumbnail.url)},e}(Marionette.ItemView),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="pick-image",e.prototype.template='<span class="glyphicon glyphicon-hand-left"></span><h4>Select an Image from the library</h4>',e}(Marionette.ItemView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="clearfix",e.prototype.template='<div id="selected-images"></div>',e.prototype.itemView=r,e.prototype.emptyView=i,e.prototype.itemViewContainer="#selected-images",e}(Marionette.CompositeView),t.on("initialize:before",function(){}),n.commands.setHandler("start:media:selected:app",function(e){return function(e){return new t.Controller(e)}}(this))})}),define("text!apps/media/edit-media/templates/form.html",[],function(){return'\n<form action="" method="POST" role="form">\n  <h5>Edit Media</h5>\n  <div class="form-group">\n    <label for="">Title</label>\n    <input type="text" placeholder="" name="title" value="{{title}}" class="form-control"/>\n  </div>\n  <div class="form-group">\n    <label for="">Caption</label>\n    <input type="text" placeholder="" name="caption" value="{{caption}}" class="form-control"/>\n  </div>\n  <div class="form-group">\n    <label for="">Alt Text</label>\n    <input type="text" placeholder="" name="alt" value="{{alt}}" class="form-control"/>\n  </div>\n  <div class="form-group">\n    <label for="">Description</label>\n    <input type="text" placeholder="" name="description" value="{{description}}" class="form-control"/>\n  </div>\n  <button type="button" id="save-media-details" class="btn btn-primary">Save Details</button>\n</form>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media/edit-media/views",["app","text!apps/media/edit-media/templates/form.html"],function(t,e){return t.module("Media.EditMedia.Views",function(t,n){return t.EditMediaView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.events={"click #save-media-details":"_updateImageData"},n.prototype._updateImageData=function(){var t;return t=Backbone.Syphon.serialize(this),this.trigger("update:image:data",t)},n}(Marionette.ItemView)})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media/edit-media/controller",["app","controllers/region-controller","apps/media/edit-media/views"],function(t,e){return t.module("Media.EditMedia",function(t,n){return t.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n;return null==t&&(t={}),e=t.model,n=this._getView(e),this.listenTo(n,"size:select:changed",function(t){return function(e){return Marionette.triggerMethod.call(t.region,"size:select:changed",e)}}(this)),this.listenTo(n,"update:image:data",function(t){return e.set(t),e.save(null,{wait:!0})}),this.show(n)},n.prototype._getView=function(e){return new t.Views.EditMediaView({model:e})},n}(e),n.commands.setHandler("show:edit:media",function(e,n){return new t.Controller({model:e,region:n})})})}),define("apps/media/app",["app","controllers/region-controller","apps/media/upload/controller","apps/media/youtube-video/controller","apps/media/grid/controller","apps/media/selected/controller","apps/media/edit-media/controller"],function(t,e,n){return t.module("Media",function(t,e,n,i,o,r){})}),define("text!apps/media-manager/templates/outer.html",[],function(){return'\n<ul class="nav nav-tabs">\n  <li class="active all-media-tab"><a href="#all-media-region" data-toggle="tab">Gallery</a></li>\n  <li class="upload-tab"><a href="#upload-region" data-toggle="tab">Upload</a></li>\n  <li class="youtube-video"><a href="#youtube-region" data-toggle="tab">Youtube Video</a></li>\n\n  <!--li: a(href="#gallery-region" data-toggle="tab") Gallery-->\n</ul>\n<div class="tab-content">\n\n  <div id="all-media-region" class="tab-pane active">\n    <div id="grid-region" class="col-md-12"></div>\n    <!-- <div id="edit-media-region" class="col-md-3">\n      <div class="pick-image p-t-50">\n        <h4><span class="glyphicon glyphicon-hand-left"></span>Select an item from the library</h4>\n      </div>\n    </div> -->\n  </div>\n  <div id="upload-region" class="tab-pane "></div>\n  <div id="gallery-region" class="tab-pane"></div>\n  <div id="youtube-region" class="tab-pane"></div>\n</div>\n<div class="clearfix">\n  <button class="btn btn-primary media-manager-select">Select</button>\n</div>'});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/media-manager/app",["app","controllers/region-controller","text!apps/media-manager/templates/outer.html"],function(t,e,n){return t.module("MediaManager",function(t,i,o,r,s,a){var l,c,u;return t.Router=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"media-manager/:mediaType":"show"},e}(r.AppRouter),u=function(t){function e(){return this._getLayout=bind(this._getLayout,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return null==t&&(t={}),this.choosedMedia=null,this.mediaType=t.mediaType,this.layout=e=this._getLayout(),this.show(this.layout),this.listenTo(this.layout,"show",function(t){return function(){return i.execute("start:media:upload:app",{region:e.uploadRegion,mediaType:t.mediaType}),i.execute("start:media:grid:app",{region:e.gridRegion,mediaType:t.mediaType}),i.execute("start:youtube:video:app",{region:e.youtubeRegion,mediaType:t.mediaType})}}(this)),this.show(this.layout),this.listenTo(this.layout.gridRegion,"media:element:selected",function(t){return function(e){return t.choosedMedia=e}}(this)),this.listenTo(this.layout.youtubeRegion,"youtube:url:selected",function(t){return function(t){var e,n;return e={id:"youtube_"+a.random(855,1234),title:t,name:t,url:t,type:"video",videoType:"youtubeVideo"},n=i.request("new:media:added",e),i.vent.trigger("media:manager:choosed:media",n)}}(this)),this.listenTo(this.layout,"media:selected",function(t){return function(){return!a.isNull(t.choosedMedia)&&(i.vent.trigger("media:manager:choosed:media",t.choosedMedia),t.region)?t.region.closeDialog():void 0}}(this))},e.prototype.onClose=function(){},e.prototype._getLayout=function(){return new c({mediaType:this.mediaType})},e}(e),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e.prototype.regions={uploadRegion:"#upload-region",gridRegion:"#grid-region",youtubeRegion:"#youtube-region"},e.prototype.dialogOptions={modal_title:"Media Manager",modal_size:"wide-modal"},e.prototype.events={"click button.media-manager-select":function(){return this.trigger("media:selected")}},e.prototype.onShow=function(){var t,e;return("audio"===(t=r.getOption(this,"mediaType"))||"video"===t)&&this.$el.find(".upload-tab").hide(),"audio"===(e=r.getOption(this,"mediaType"))||"image"===e?this.$el.find(".youtube-video").hide():void 0},e.prototype.onClose=function(){return i.vent.trigger("stop:listening:to:media:manager")},e}(r.Layout),l={show:function(t){return new u({region:i.dialogRegion,statApp:"all-media",mediaType:t})},editMedia:function(t,e){}},t.on("start",function(){return new t.Router({controller:l})}),t.on("stop",function(){return i.vent.off("media:element:clicked")}),i.commands.setHandler("show:media:manager:app",function(t){return new u(t)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/breadcrumb/app",["app","controllers/region-controller"],function(t,e){return t.module("BreadcrumbApp.Controller",function(t,n){var i;return t.BreadcrumbController=function(t){function e(){return this.renderbreadcrumb=bind(this.renderbreadcrumb,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return t=n.request("get:breadcrumb:model"),this.listenTo(t,"change:items",this.renderbreadcrumb),this.renderbreadcrumb()},e.prototype.renderbreadcrumb=function(){var t,e;return t=n.request("get:breadcrumb:model"),this.view=e=this._getBreadcrumbView(t),this.show(e)},e.prototype._getBreadcrumbView=function(t){return console.log("new breadcrumb view"),new i({model:t})},e}(e),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='{{#items}} <li> <a href="{{link}}" class="{{active}}">{{label}}</a> </li> {{/items}}',e.prototype.tagName="ul",e.prototype.className="breadcrumb",e.prototype.onShow=function(){return this.$el.append("<p></p>")},e}(Marionette.ItemView),n.commands.setHandler("show:breadcrumbapp",function(e){return null==e&&(e={}),new t.BreadcrumbController(e)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/media-collection-manager/media-list/media-list-views",["app"],function(t){return t.module("MediaCollectionManager.MediaList.Views",function(t){var e,n;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="div",e.prototype.className="panel panel-default moveable",e.prototype.template='<div class="accordion-toggle"> <div class="aj-imp-image-item row"> <div class="col-sm-8"> <div class="thumbnail m-b-5"> <div class="imaTitle"><span>{{title_show}}</span></div> </div> </div> <div class="col-sm-4"> <div class="imgactions"> <a class="remove-media text-error" title="Delete Media"><span class="glyphicon glyphicon-trash"></span>&nbsp;Delete {{mediaType}}</a> </div> </div> </div> </div>',e.prototype.events={"click .remove-media":function(t){return t.preventDefault(),t.stopPropagation(),confirm("Are you sure?")?this.trigger("remove:media",this.model):void 0}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.title_show=_.prune(t.title,50),t.mediaType=Marionette.getOption(this,"mediaType"),t},e.prototype.onRender=function(){return this.$el.attr("data-media-id",this.model.get("id"))},e}(Marionette.ItemView),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="alert">No {{mediaType}} found. Please add {{mediaType}}.</div>',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.mediaType=Marionette.getOption(this,"mediaType"),t},e}(Marionette.ItemView),t.MediaListView=function(t){function i(){return this.mediaSorted=bind(this.mediaSorted,this),i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template='<div class="aj-imp-image-header m-b-10 row"> <div class="col-sm-8"> File Name </div> <div class="col-sm-4"> Actions </div> </div> <div class="panel-group" id="media-accordion"></div>',i.prototype.itemView=e,i.prototype.emptyView=n,i.prototype.itemViewOptions=function(){return{mediaType:Marionette.getOption(this,"mediaType")}},i.prototype.itemViewContainer="#media-accordion",i.prototype.onBeforeRender=function(){return this.collection.sort()},i.prototype.onShow=function(){return this.$el.find("#media-accordion").sortable({start:function(t,e){return e.placeholder.height(e.item.height())},update:this.mediaSorted})},i.prototype.mediaSorted=function(t,e){var n,i;return n=this.$el.find("#media-accordion").sortable("toArray",{attribute:"data-media-id"}),i=_.map(n,function(t,e){return parseInt(t)}),this.trigger("media:order:updated",i)},i.prototype.onClose=function(){return this.$el.find("#media-accordion").sortable("destroy")},i}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media-collection-manager/media-list/media-list-controller",["app","controllers/region-controller","apps/media-collection-manager/media-list/media-list-views"],function(t,e){return t.module("MediaCollectionManager.MediaList",function(t,n){return t.Controller=function(e){function n(){return this.showSuccessMessage=bind(this.showSuccessMessage,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.mediaCollection=t.mediaCollection,this.mediaType=t.mediaType,this.view=this._getListView(),this.listenTo(this.view,"itemview:remove:media",function(t){return function(e,n){return t.mediaCollection.remove(n)}}(this)),this.listenTo(this.view,"media:order:updated",function(t){return function(e){return _.each(e,function(e,n){var i;return i=t.mediaCollection.get(e),i?i.set("order",n+1):void 0}),t.showSuccessMessage()}}(this)),this.show(this.view)},n.prototype._getListView=function(){return new t.Views.MediaListView({collection:this.mediaCollection,mediaType:this.mediaType})},n.prototype.showSuccessMessage=function(){return Marionette.triggerMethod.call(this.region,"show:order:updated:msg")},n}(e),n.commands.setHandler("show:media:list",function(e){return new t.Controller(e)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/media-collection-manager/media-collection-app",["app","controllers/region-controller","apps/media-collection-manager/media-list/media-list-controller"],function(t,e){return t.module("MediaCollectionManager",function(t,n){var i;return t.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){return null==t&&(t={}),this.mediaType=t.mediaType,this.mediaCollection=t.mediaCollection,this.layout=this._getLayout(),this.listenTo(this.layout,"show:add:new:media",function(t){return function(){return n.execute("show:media:manager:app",{region:t.layout.addMediaRegion,mediaType:t.mediaType}),t.listenTo(n.vent,"media:manager:choosed:media",function(e){return t.mediaCollection.add(e),t.stopListening(n.vent,"media:manager:choosed:media"),t.layout.addMediaRegion.close(),t.layout.triggerMethod("show:add:media")}),t.listenTo(n.vent,"stop:listening:to:media:manager",function(){return t.stopListening(n.vent,"media:manager:choosed:media")})}}(this)),this.listenTo(this.layout.mediaListRegion,"show:order:updated:msg",function(){return this.layout.triggerMethod("show:order:updated:msg"),Marionette.triggerMethod.call(this.mediaCollection,"order:updated")}),this.listenTo(this.layout,"show",function(t){return function(){return n.execute("show:media:list",{
region:t.layout.mediaListRegion,mediaCollection:t.mediaCollection,mediaType:t.mediaType})}}(this)),this.show(this.layout)},e.prototype._getLayout=function(){return new i({mediaType:this.mediaType})},e}(e),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row"> <div class="col-sm-7 b-r b-grey"> <div id="media-list-region"></div> </div> <div class="col-sm-5"> <div id="slides-info"> Click the button to select {{mediaType}}s to add to your playlist. You can change the order of the {{mediaType}}s by dragging them up or down in the list to the left. </div> </div> </div> <div class="aj-imp-block-button add-new-media pull-right"> <button class="btn btn-default btn-hg"><span class="bicon icon-uniF10C"></span>&nbsp;&nbsp;Add {{mediaType}}</button> </div> <div class="clearfix"></div> <div id="add-media-region"></div>',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.mediaType=Marionette.getOption(this,"mediaType"),t},e.prototype.regions={mediaListRegion:"#media-list-region",addMediaRegion:"#add-media-region"},e.prototype.events={"click .add-new-media":function(){return this.$el.find(".add-new-media").hide(),this.trigger("show:add:new:media")}},e.prototype.dialogOptions={modal_title:"Playlist Manager",modal_size:"wide-modal"},e.prototype.onShowAddMedia=function(){return this.$el.find(".add-new-media").show()},e.prototype.onShowOrderUpdatedMsg=function(){return this.$el.find(".alert").remove(),this.$el.prepend('<div class="alert alert-success">Updated successfully</div>')},e}(Marionette.Layout),n.commands.setHandler("show:media:collection:manager",function(e){return new t.Controller(e)})})});var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/default-router/default-app",["app"],function(t){return t.module("DefaultApp",function(t,e){var n,i;return i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"route-not-found":"routeNotFound"},e}(Marionette.AppRouter),n={routeNotFound:function(){return e.execute("show:404:app",{region:e.mainContentRegion})}},t.on("start",function(){return new i({controller:n})})})}),define("apps/content-creator-appsloader",["apps/header/headerapp","apps/left-nav/leftnavapp","apps/content-creator/contentcreatorapp","apps/media/app","apps/media-manager/app","apps/breadcrumb/app","apps/media-collection-manager/media-collection-app","apps/default-router/default-app"],function(){}),require.config({urlArgs:"ver="+(new Date).getTime(),baseUrl:"../wp-content/themes/walnut/walnut/dev/js",paths:{jquery:"plugins/jquery",jqueryui:"plugins/jquery.ui",jqueryresize:"plugins/jquery.ba-resize.min",kinetic:"plugins/kinetic",kineticresize:"plugins/kinetic.plugin.resize",jqueryvalidate:"plugins/jquery.validate.min",underscore:"plugins/underscore",backbone:"plugins/backbone",babysitter:"plugins/backbone.babysitter.min",bootstrap:"plugins/bootstrap",bootstrapslider:"plugins/bootstrap-slider",marionette:"plugins/backbone.marionette",text:"plugins/text",mustache:"plugins/mustache",holder:"plugins/holder",app:"content-creator-app",plupload:"plugins/plupload.full",syphon:"plugins/backbone.syphon",underscorestring:"plugins/underscorestring",entitiesloader:"entities/content-creator-entities-loader",checkbox:"plugins/flatui-checkbox",componentloader:"components/builder-component-loader",spin:"plugins/spin",jqueryspin:"plugins/jquery.spin",jquerycolor:"plugins/jquery.minicolors.min",jqueryknob:"plugins/jquery.knob",ckeditor:"plugins/ckeditor/ckeditor",select2:"plugins/select2",tagsinput:"plugins/bootstrap-tagsinput.min",screwbuttons:"plugins/jquery.screwdefaultbuttonsV2",panzer:"plugins/panzer",panzerlist:"plugins/panzerlist",sidr:"plugins/jquery.sidr.min",resizablecolumns:"plugins/jquery.resizableColumns.min",bootbox:"plugins/bootbox.min",moment:"plugins/moment.min",imageareaselect:"../../../../../../wp-includes/js/imgareaselect/jquery.imgareaselect.min",imageedit:"../../../../../../wp-admin/js/image-edit",json2:"../../../../../../wp-includes/js/json2",svgpainter:"../../../../../../wp-admin/js/svg-painter"},shim:{imageedit:["jquery","json2","imageareaselect"],imageareaselect:["jquery"],svgpainter:["jquery"],underscore:{exports:"_"},jquery:["underscore"],jqueryui:["jquery"],jqueryresize:["jquery","jqueryui"],jquerycolor:["jquery"],jqueryknob:["jquery"],kineticresize:["kinetic"],sidr:["jquery"],backbone:{deps:["jquery","underscore"],exports:"Backbone"},babysitter:["backbone"],marionette:{deps:["backbone"],exports:"Marionette"},plupload:{deps:["jquery"],exports:"plupload"},bootstrap:["jquery","jqueryui"],bootstrapslider:["bootstrap"],checkbox:["bootstrap"],jqueryvalidate:["jquery"],underscorestring:["underscore"],syphon:["backbone"],select2:["jquery","bootstrap"],tagsinput:["jquery","bootstrap"],screwbuttons:["jquery"],panzer:["jquery"],panzerlist:["jquery"],resizablecolumns:["jquery"],bootbox:["jquery","bootstrap"],app:["plugins/content-creator-pluginloader","config/content-creator-configloader"]}}),require(["plugins/content-creator-pluginloader","config/content-creator-configloader","app","entitiesloader","componentloader","apps/content-creator-appsloader"],function(t,e,n){return n.start()}),define("content-creator-main",function(){});

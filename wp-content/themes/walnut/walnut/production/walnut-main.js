/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//  Underscore.string
//  (c) 2010 Esa-Matti Suuronen <esa-matti aet suuronen dot org>
//  Underscore.string is freely distributable under the terms of the MIT license.
//  Documentation: https://github.com/epeli/underscore.string
//  Some code is borrowed from MooTools and Alexandru Marasteanu.
//  Version '2.3.2'

// Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>

/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */

/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

//     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.
//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v1.8.5
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

// Backbone.Syphon, v0.4.1
// Copyright (c)2012 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
// http://github.com/derickbailey/backbone.syphon

/**
* @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/requirejs/text for details
*/

/*! jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jörn Zaefferer; Licensed MIT */

/*! Sidr - v1.1.1 - 2013-03-14
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */

/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.0.6
 *
 */

/*
	Breakpoints.js
	version 1.0
	
	Creates handy events for your responsive design breakpoints
	
	Copyright 2011 XOXCO, Inc
	http://xoxco.com/

	Documentation for this plugin lives here:
	http://xoxco.com/projects/code/breakpoints
	
	Licensed under the MIT license:
	http://www.opensource.org/licenses/mit-license.php

*/

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */

/**
* Bootstrap v3.0.0 by @fat and @mdo
* Copyright 2013 Twitter Inc.
* Licensed under http://www.apache.org/licenses/LICENSE-2.0.
*
* Designed and built with all the love in the world by @mdo and @fat.
*/

/*
* MIXITUP - A CSS3 and JQuery Filter & Sort Plugin
* Version: 1.5.4
* License: Creative Commons Attribution-NoDerivs 3.0 Unported - CC BY-ND 3.0
* http://creativecommons.org/licenses/by-nd/3.0/
* This software may be used freely on commercial and non-commercial projects with attribution to the author/copyright holder.
* Author: Patrick Kunka
* Copyright 2012-2013 Patrick Kunka, Barrel LLC, All Rights Reserved
* 
* http://mixitup.io
*/

/**!
* TableSorter 2.17.7 - Client-side table sorting with ease!
* @requires jQuery v1.2.6+
*
* Copyright (c) 2007 Christian Bach
* Examples and docs at: http://tablesorter.com
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
*
* @type jQuery
* @name tablesorter
* @cat Plugins/Tablesorter
* @author Christian Bach/christian.bach@polyester.se
* @contributor Rob Garrison/https://github.com/Mottie/tablesorter
*/

/*!
 * tablesorter pager plugin
 * updated 3/31/2014 (v2.15.12)
 */

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*
Copyright 2012 Igor Vaynberg

Version: 3.5.1 Timestamp: Tue Jul 22 18:58:56 EDT 2014

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/* =========================================================
 * bootstrap-datepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/*
* jQuery listnav plugin
*
* Add a slick "letter-based" navigation bar to all of your lists.
* Click a letter to quickly filter the list to items that match that letter.
*
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
* Version 2.4.3 (02/11/14)
* Author: Eric Steinborn
* Compatibility: jQuery 1.3.x through 1.11.0 and jQuery 2
* Browser Compatibility: IE6+, FF, Chrome & Safari
* CSS is a little wonky in IE6, just set your listnav class to be 100% width and it works fine.
*
*/

/**
 * Bridget makes jQuery widgets
 * v1.0.1
 * MIT license
 */

/*!
 * Isotope PACKAGED v2.0.0
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */

/*! KineticJS v5.0.1 2014-01-21 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/

/*!
 * ScrewDefaultButtons v2.0.6
 * http://screwdefaultbuttons.com/
 *
 * Licensed under the MIT license.
 * Copyright 2013 Matt Solano http://mattsolano.com
 *
 * Date: Mon February 25 2013
 */

/** Abstract base class for collection plugins v1.0.1.
	Written by Keith Wood (kbwood{at}iinet.com.au) December 2013.
	Licensed under the MIT (https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt) license. */

/* http://keith-wood.name/countdown.html
   Countdown for jQuery v2.0.0.
   Written by Keith Wood (kbwood{at}iinet.com.au) January 2008.
   Available under the MIT (https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt) license.
   Please attribute the author if you use it. */

/**
 * bootbox.js v4.3.0
 *
 * http://bootboxjs.com/license.txt
 */

/**
 * jQuery jPages v0.7
 * Client side pagination with jQuery
 * http://luis-almeida.github.com/jPages
 *
 * Licensed under the MIT license.
 * Copyright 2012 Luís Almeida
 * https://github.com/luis-almeida
 */

/**
 * jquery.bookblock.js v2.0.1
 * http://www.codrops.com
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Copyright 2013, Codrops
 * http://www.codrops.com
 */

/*
	* debouncedresize: special jQuery event that happens once after a window resize
	*
	* latest version and complete README available on Github:
	* https://github.com/louisremi/jquery-smartresize
	*
	* Copyright 2012 @louis_remi
	* Licensed under the MIT license.
	*
	* This saved you an hour of work? 
	* Send me music http://www.amazon.co.uk/wishlist/HNTU0468LQON
	*/

/**
 * Detect.js: User-Agent Parser
 * https://github.com/darcyclarke/Detect.js
 * Dual licensed under the MIT and GPL licenses.
 *
 * @version 2.2.0
 * @author Darcy Clarke
 * @url http://darcyclarke.me
 * @createdat Mon Dec 02 2013 14:47:23 GMT+0100 (W. Europe Standard Time)
 *
 * Based on UA-Parser (https://github.com/tobie/ua-parser) by Tobie Langel
 *
 * Example Usage:
 * var agentInfo = detect.parse(navigator.userAgent);
 * console.log(agentInfo.browser.family); // Chrome
 *
 */

/*

Holder - 2.1 - client side image placeholders
(c) 2012-2013 Ivan Malopinsky / http://imsky.co

Provided under the MIT License.
Commercial use requires attribution.

*/

var requirejs,require,define;!function(t){function e(t,e){return v.call(t,e)}function i(t,e){var i,n,o,s,r,a,l,c,u,d,p,h=e&&e.split("/"),f=m.map,g=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(h=h.slice(0,h.length-1),t=t.split("/"),r=t.length-1,m.nodeIdCompat&&_.test(t[r])&&(t[r]=t[r].replace(_,"")),t=h.concat(t),u=0;u<t.length;u+=1)if(p=t[u],"."===p)t.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||g)&&f){for(i=t.split("/"),u=i.length;u>0;u-=1){if(n=i.slice(0,u).join("/"),h)for(d=h.length;d>0;d-=1)if(o=f[h.slice(0,d).join("/")],o&&(o=o[n])){s=o,a=u;break}if(s)break;!l&&g&&g[n]&&(l=g[n],c=u)}!s&&l&&(s=l,a=c),s&&(i.splice(0,a,s),t=i.join("/"))}return t}function n(e,i){return function(){return u.apply(t,y.call(arguments,0).concat([e,i]))}}function o(t){return function(e){return i(e,t)}}function s(t){return function(e){h[t]=e}}function r(i){if(e(f,i)){var n=f[i];delete f[i],g[i]=!0,c.apply(t,n)}if(!e(h,i)&&!e(g,i))throw new Error("No "+i);return h[i]}function a(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var c,u,d,p,h={},f={},m={},g={},v=Object.prototype.hasOwnProperty,y=[].slice,_=/\.js$/;d=function(t,e){var n,s=a(t),l=s[0];return t=s[1],l&&(l=i(l,e),n=r(l)),l?t=n&&n.normalize?n.normalize(t,o(e)):i(t,e):(t=i(t,e),s=a(t),l=s[0],t=s[1],l&&(n=r(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:n}},p={require:function(t){return n(t)},exports:function(t){var e=h[t];return"undefined"!=typeof e?e:h[t]={}},module:function(t){return{id:t,uri:"",exports:h[t],config:l(t)}}},c=function(i,o,a,l){var c,u,m,v,y,_,b=[],w=typeof a;if(l=l||i,"undefined"===w||"function"===w){for(o=!o.length&&a.length?["require","exports","module"]:o,y=0;y<o.length;y+=1)if(v=d(o[y],l),u=v.f,"require"===u)b[y]=p.require(i);else if("exports"===u)b[y]=p.exports(i),_=!0;else if("module"===u)c=b[y]=p.module(i);else if(e(h,u)||e(f,u)||e(g,u))b[y]=r(u);else{if(!v.p)throw new Error(i+" missing "+u);v.p.load(v.n,n(l,!0),s(u),{}),b[y]=h[u]}m=a?a.apply(h[i],b):void 0,i&&(c&&c.exports!==t&&c.exports!==h[i]?h[i]=c.exports:m===t&&_||(h[i]=m))}else i&&(h[i]=a)},requirejs=require=u=function(e,i,n,o,s){if("string"==typeof e)return p[e]?p[e](i):r(d(e,i).f);if(!e.splice){if(m=e,m.deps&&u(m.deps,m.callback),!i)return;i.splice?(e=i,i=n,n=null):e=t}return i=i||function(){},"function"==typeof n&&(n=o,o=s),o?c(t,e,i,n):setTimeout(function(){c(t,e,i,n)},4),u},u.config=function(t){return u(t)},requirejs._defined=h,define=function(t,i,n){i.splice||(n=i,i=[]),e(h,t)||e(f,t)||(f[t]=[t,i,n])},define.amd={jQuery:!0}}(),define("plugins/almond",function(){}),function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=o.toString,u=o.hasOwnProperty,d=n.forEach,p=n.map,h=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,y=n.indexOf,_=n.lastIndexOf,b=Array.isArray,w=Object.keys,x=s.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.5.2";var k=C.each=C.forEach=function(t,e,n){if(null!=t)if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var r=C.keys(t),o=0,s=r.length;s>o;o++)if(e.call(n,t[r[o]],r[o],t)===i)return};C.map=C.collect=function(t,e,i){var n=[];return null==t?n:p&&t.map===p?t.map(e,i):(k(t,function(t,o,s){n.push(e.call(i,t,o,s))}),n)};var S="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return n&&(e=C.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(k(t,function(t,s,r){o?i=e.call(n,i,t,s,r):(i=t,o=!0)}),!o)throw new TypeError(S);return i},C.reduceRight=C.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=C.bind(e,n)),o?t.reduceRight(e,i):t.reduceRight(e);var s=t.length;if(s!==+s){var r=C.keys(t);s=r.length}if(k(t,function(a,l,c){l=r?r[--s]:--s,o?i=e.call(n,i,t[l],l,c):(i=t[l],o=!0)}),!o)throw new TypeError(S);return i},C.find=C.detect=function(t,e,i){var n;return T(t,function(t,o,s){return e.call(i,t,o,s)?(n=t,!0):void 0}),n},C.filter=C.select=function(t,e,i){var n=[];return null==t?n:m&&t.filter===m?t.filter(e,i):(k(t,function(t,o,s){e.call(i,t,o,s)&&n.push(t)}),n)},C.reject=function(t,e,i){return C.filter(t,function(t,n,o){return!e.call(i,t,n,o)},i)},C.every=C.all=function(t,e,n){e||(e=C.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(e,n):(k(t,function(t,s,r){return(o=o&&e.call(n,t,s,r))?void 0:i}),!!o)};var T=C.some=C.any=function(t,e,n){e||(e=C.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,n):(k(t,function(t,s,r){return o||(o=e.call(n,t,s,r))?i:void 0}),!!o)};C.contains=C.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):T(t,function(t){return t===e})},C.invoke=function(t,e){var i=a.call(arguments,2),n=C.isFunction(e);return C.map(t,function(t){return(n?e:t[e]).apply(t,i)})},C.pluck=function(t,e){return C.map(t,function(t){return t[e]})},C.where=function(t,e,i){return C.isEmpty(e)?i?void 0:[]:C[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},C.findWhere=function(t,e){return C.where(t,e,!0)},C.max=function(t,e,i){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&C.isEmpty(t))return-(1/0);var n={computed:-(1/0),value:-(1/0)};return k(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r>n.computed&&(n={value:t,computed:r})}),n.value},C.min=function(t,e,i){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&C.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return k(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r<n.computed&&(n={value:t,computed:r})}),n.value},C.shuffle=function(t){var e,i=0,n=[];return k(t,function(t){e=C.random(i++),n[i-1]=n[e],n[e]=t}),n},C.sample=function(t,e,i){return arguments.length<2||i?t[C.random(t.length-1)]:C.shuffle(t).slice(0,Math.max(0,e))};var M=function(t){return C.isFunction(t)?t:function(e){return e[t]}};C.sortBy=function(t,e,i){var n=M(e);return C.pluck(C.map(t,function(t,e,o){return{value:t,index:e,criteria:n.call(i,t,e,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var z=function(t){return function(e,i,n){var o={},s=null==i?C.identity:M(i);return k(e,function(i,r){var a=s.call(n,i,r,e);t(o,a,i)}),o}};C.groupBy=z(function(t,e,i){(C.has(t,e)?t[e]:t[e]=[]).push(i)}),C.indexBy=z(function(t,e,i){t[e]=i}),C.countBy=z(function(t,e){C.has(t,e)?t[e]++:t[e]=1}),C.sortedIndex=function(t,e,i,n){i=null==i?C.identity:M(i);for(var o=i.call(n,e),s=0,r=t.length;r>s;){var a=s+r>>>1;i.call(n,t[a])<o?s=a+1:r=a}return s},C.toArray=function(t){return t?C.isArray(t)?a.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,i){return null!=t?null==e||i?t[0]:a.call(t,0,e):void 0},C.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},C.last=function(t,e,i){return null!=t?null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0)):void 0},C.rest=C.tail=C.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var D=function(t,e,i){return e&&C.every(t,C.isArray)?l.apply(i,t):(k(t,function(t){C.isArray(t)||C.isArguments(t)?e?r.apply(i,t):D(t,e,i):i.push(t)}),i)};C.flatten=function(t,e){return D(t,e,[])},C.without=function(t){return C.difference(t,a.call(arguments,1))},C.uniq=C.unique=function(t,e,i,n){C.isFunction(e)&&(n=i,i=e,e=!1);var o=i?C.map(t,i,n):t,s=[],r=[];return k(o,function(i,n){(e?n&&r[r.length-1]===i:C.contains(r,i))||(r.push(i),s.push(t[n]))}),s},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var e=a.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.indexOf(e,t)>=0})})},C.difference=function(t){var e=l.apply(n,a.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=C.pluck(arguments,""+i);return e},C.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},C.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=C.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},C.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(_&&t.lastIndexOf===_)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},C.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,s=new Array(n);n>o;)s[o++]=t,t+=i;return s};var P=function(){};C.bind=function(t,e){var i,n;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));P.prototype=t.prototype;var o=new P;P.prototype=null;var s=t.apply(o,i.concat(a.call(arguments)));return Object(s)===s?s:o}},C.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},C.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var i={};return e||(e=C.identity),function(){var n=e.apply(this,arguments);return C.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},C.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(a.call(arguments,1)))},C.throttle=function(t,e,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:new Date,r=null,s=t.apply(n,o)};return function(){var c=new Date;a||i.leading!==!1||(a=c);var u=e-(c-a);return n=this,o=arguments,0>=u?(clearTimeout(r),r=null,a=c,s=t.apply(n,o)):r||i.trailing===!1||(r=setTimeout(l,u)),s}},C.debounce=function(t,e,i){var n,o,s,r,a;return function(){s=this,o=arguments,r=new Date;var l=function(){var c=new Date-r;e>c?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(s,o)))},c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(s,o)),a}},C.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return function(){var i=[t];return r.apply(i,arguments),e.apply(this,i)}},C.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)C.has(t,i)&&e.push(i);return e},C.values=function(t){for(var e=C.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},C.pairs=function(t){for(var e=C.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},C.invert=function(t){for(var e={},i=C.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},C.functions=C.methods=function(t){var e=[];for(var i in t)C.isFunction(t[i])&&e.push(i);return e.sort()},C.extend=function(t){return k(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},C.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return k(i,function(i){i in t&&(e[i]=t[i])}),e},C.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var o in t)C.contains(i,o)||(e[o]=t[o]);return e},C.defaults=function(t){return k(a.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var q=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var o=c.call(t);if(o!=c.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;var r=t.constructor,a=e.constructor;if(r!==a&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var l=0,u=!0;if("[object Array]"==o){if(l=t.length,u=l==e.length)for(;l--&&(u=q(t[l],e[l],i,n)););}else{for(var d in t)if(C.has(t,d)&&(l++,!(u=C.has(e,d)&&q(t[d],e[d],i,n))))break;if(u){for(d in e)if(C.has(e,d)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};C.isEqual=function(t,e){return q(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=b||function(t){return"[object Array]"==c.call(t)},C.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return u.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.times=function(t,e,i){for(var n=Array(Math.max(0,t)),o=0;t>o;o++)n[o]=e.call(i,o);return n},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=C.invert(A.escape);var I={escape:new RegExp("["+C.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(A.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return A[t][e]})}}),C.result=function(t,e){if(null!=t){var i=t[e];return C.isFunction(i)?i.call(t):i}},C.mixin=function(t){k(C.functions(t),function(e){var i=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return r.apply(t,arguments),F.call(this,i.apply(C,t))}})};var R=0;C.uniqueId=function(t){var e=++R+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,i){var n;i=C.defaults({},i,C.templateSettings);var o=new RegExp([(i.escape||E).source,(i.interpolate||E).source,(i.evaluate||E).source].join("|")+"|$","g"),s=0,r="__p+='";t.replace(o,function(e,i,n,o,a){return r+=t.slice(s,a).replace(N,function(t){return"\\"+O[t]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),s=a+e.length,e}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(e)return n(e,C);var l=function(t){return n.call(this,t,C)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},C.chain=function(t){return C(t).chain()};var F=function(t){return this._chain?C(t).chain():t};C.mixin(C),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];C.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],F.call(this,i)}}),k(["concat","join","slice"],function(t){var e=n[t];C.prototype[t]=function(){return F.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(t){return function(){var e;return e||t._}}(this)),!function(t,e){"use strict";function i(t,e){var i,n,o=t.toLowerCase();for(e=[].concat(e),i=0;i<e.length;i+=1)if(n=e[i]){if(n.test&&n.test(t))return!0;if(n.toLowerCase()===o)return!0}}var n=e.prototype.trim,o=e.prototype.trimRight,s=e.prototype.trimLeft,r=function(t){return 1*t||0},a=function(t,e){if(1>e)return"";for(var i="";e>0;)1&e&&(i+=t),e>>=1,t+=t;return i},l=[].slice,c=function(t){return null==t?"\\s":t.source?t.source:"["+f.escapeRegExp(t)+"]"},u={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},d={};for(var p in u)d[u[p]]=p;d["'"]="#39";var h=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var i=a,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,o){var s,r,a,l,c,u,d,p=1,f=n.length,m="",g=[];for(r=0;f>r;r++)if(m=t(n[r]),"string"===m)g.push(n[r]);else if("array"===m){if(l=n[r],l[2])for(s=o[p],a=0;a<l[2].length;a++){if(!s.hasOwnProperty(l[2][a]))throw new Error(h('[_.sprintf] property "%s" does not exist',l[2][a]));s=s[l[2][a]]}else s=l[1]?o[l[1]]:o[p++];if(/[^s]/.test(l[8])&&"number"!=t(s))throw new Error(h("[_.sprintf] expecting number but found %s",t(s)));switch(l[8]){case"b":s=s.toString(2);break;case"c":s=e.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=l[7]?s.toExponential(l[7]):s.toExponential();break;case"f":s=l[7]?parseFloat(s).toFixed(l[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=e(s))&&l[7]?s.substring(0,l[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(l[8])&&l[3]&&s>=0?"+"+s:s,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",d=l[6]-e(s).length,c=l[6]?i(u,d):"",g.push(l[5]?s+c:c+s)}return g.join("")},n.cache={},n.parse=function(t){for(var e=t,i=[],n=[],o=0;e;){if(null!==(i=/^[^\x25]+/.exec(e)))n.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(e)))n.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(i[2]){o|=1;var s=[],r=i[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(r)))throw new Error("[_.sprintf] huh?");for(s.push(a[1]);""!==(r=r.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(r)))s.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(r)))throw new Error("[_.sprintf] huh?");s.push(a[1])}i[2]=s}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(i)}e=e.substring(i[0].length)}return n},n}(),f={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":e(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":e(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,i){return null==t?[]:(t=e(t),i=~~i,i>0?t.match(new RegExp(".{1,"+i+"}","g")):[t])},clean:function(t){return f.strip(t).replace(/\s+/g," ")},count:function(t,i){if(null==t||null==i)return 0;t=e(t),i=e(i);for(var n=0,o=0,s=i.length;;){if(o=t.indexOf(i,o),-1===o)break;n++,o+=s}return n},chars:function(t){return null==t?[]:e(t).split("")},swapCase:function(t){return null==t?"":e(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":e(t).replace(/[&<>"']/g,function(t){return"&"+d[t]+";"})},unescapeHTML:function(t){return null==t?"":e(t).replace(/\&([^;]+);/g,function(t,i){var n;return i in u?u[i]:(n=i.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(n[1],16)):(n=i.match(/^#(\d+)$/))?e.fromCharCode(~~n[1]):t})},escapeRegExp:function(t){return null==t?"":e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,i,n){var o=f.chars(t);return o.splice(~~e,~~i,n),o.join("")},insert:function(t,e,i){return f.splice(t,e,0,i)},include:function(t,i){return""===i?!0:null==t?!1:-1!==e(t).indexOf(i)},join:function(){var t=l.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:e(t).split("\n")},reverse:function(t){return f.chars(t).reverse().join("")},startsWith:function(t,i){return""===i?!0:null==t||null==i?!1:(t=e(t),i=e(i),t.length>=i.length&&t.slice(0,i.length)===i)},endsWith:function(t,i){return""===i?!0:null==t||null==i?!1:(t=e(t),i=e(i),t.length>=i.length&&t.slice(t.length-i.length)===i)},succ:function(t){return null==t?"":(t=e(t),t.slice(0,-1)+e.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":(t=e(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},camelize:function(t){return f.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return f.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return f.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return f.titleize(e(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return f.capitalize(f.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,i){return null==t?"":!i&&n?n.call(t):(i=c(i),e(t).replace(new RegExp("^"+i+"+|"+i+"+$","g"),""))},ltrim:function(t,i){return null==t?"":!i&&s?s.call(t):(i=c(i),e(t).replace(new RegExp("^"+i+"+"),""))},rtrim:function(t,i){return null==t?"":!i&&o?o.call(t):(i=c(i),e(t).replace(new RegExp(i+"+$"),""))},truncate:function(t,i,n){return null==t?"":(t=e(t),n=n||"...",i=~~i,t.length>i?t.slice(0,i)+n:t)},prune:function(t,i,n){if(null==t)return"";if(t=e(t),i=~~i,n=null!=n?e(n):"...",t.length<=i)return t;var o=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},s=t.slice(0,i+1).replace(/.(?=\W*\w*$)/g,o);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):f.rtrim(s.slice(0,s.length-1)),(s+n).length>t.length?t:t.slice(0,s.length)+n},words:function(t,e){return f.isBlank(t)?[]:f.trim(t,e).split(e||/\s+/)},pad:function(t,i,n,o){t=null==t?"":e(t),i=~~i;var s=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",o){case"right":return s=i-t.length,t+a(n,s);case"both":return s=i-t.length,a(n,Math.ceil(s/2))+t+a(n,Math.floor(s/2));default:return s=i-t.length,a(n,s)+t}},lpad:function(t,e,i){return f.pad(t,e,i)},rpad:function(t,e,i){return f.pad(t,e,i,"right")},lrpad:function(t,e,i){return f.pad(t,e,i,"both")},sprintf:h,vsprintf:function(t,e){return e.unshift(t),h.apply(null,e)},toNumber:function(t,e){return t?(t=f.trim(t),t.match(/^-?\d+(?:\.\d+)?$/)?r(r(t).toFixed(~~e)):NaN):0},numberFormat:function(t,e,i,n){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),n="string"==typeof n?n:",";var o=t.split("."),s=o[0],r=o[1]?(i||".")+o[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+r},strRight:function(t,i){if(null==t)return"";t=e(t),i=null!=i?e(i):i;var n=i?t.indexOf(i):-1;return~n?t.slice(n+i.length,t.length):t},strRightBack:function(t,i){if(null==t)return"";t=e(t),i=null!=i?e(i):i;var n=i?t.lastIndexOf(i):-1;return~n?t.slice(n+i.length,t.length):t},strLeft:function(t,i){if(null==t)return"";t=e(t),i=null!=i?e(i):i;var n=i?t.indexOf(i):-1;return~n?t.slice(0,n):t},strLeftBack:function(t,e){if(null==t)return"";t+="",e=null!=e?""+e:e;var i=t.lastIndexOf(e);return~i?t.slice(0,i):t},toSentence:function(t,e,i,n){e=e||", ",i=i||" and ";var o=t.slice(),s=o.pop();return t.length>2&&n&&(i=f.rtrim(e)+i),o.length?o.join(e)+i+s:s},toSentenceSerial:function(){var t=l.call(arguments);return t[3]=!0,f.toSentence.apply(f,t)},slugify:function(t){if(null==t)return"";var i="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",n="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",o=new RegExp(c(i),"g");return t=e(t).toLowerCase().replace(o,function(t){var e=i.indexOf(t);return n.charAt(e)||"-"}),f.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return f.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,i,n){if(null==t)return"";if(i=~~i,null==n)return a(e(t),i);for(var o=[];i>0;o[--i]=t);return o.join(n)},naturalCmp:function(t,i){if(t==i)return 0;if(!t)return-1;if(!i)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,o=e(t).toLowerCase().match(n),s=e(i).toLowerCase().match(n),r=Math.min(o.length,s.length),a=0;r>a;a++){var l=o[a],c=s[a];if(l!==c){var u=parseInt(l,10);if(!isNaN(u)){var d=parseInt(c,10);if(!isNaN(d)&&u-d)return u-d}return c>l?-1:1}}return o.length===s.length?o.length-s.length:i>t?-1:1},levenshtein:function(t,i){if(null==t&&null==i)return 0;if(null==t)return e(i).length;if(null==i)return e(t).length;t=e(t),i=e(i);for(var n,o,s=[],r=0;r<=i.length;r++)for(var a=0;a<=t.length;a++)o=r&&a?t.charAt(a-1)===i.charAt(r-1)?n:Math.min(s[a],s[a-1],n)+1:r+a,n=s[a],s[a]=o;return s.pop()},toBoolean:function(t,e,n){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=f.trim(t),i(t,e||["true","1"])?!0:i(t,n||["false","0"])?!1:void 0)}};f.strip=f.trim,f.lstrip=f.ltrim,f.rstrip=f.rtrim,f.center=f.lrpad,f.rjust=f.lpad,f.ljust=f.rpad,f.contains=f.include,f.q=f.quote,f.toBool=f.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=f),exports._s=f),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return f}),t._=t._||{},t._.string=t._.str=f}(this,String),define("underscorestring",["underscore"],function(){}),function(t,e){function i(t){var e=t.length,i=ut.type(t);return ut.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||"function"!==i&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t){var e=St[t]={};return ut.each(t.match(pt)||[],function(t,i){e[i]=!0}),e}function o(t,i,n,o){if(ut.acceptData(t)){var s,r,a=ut.expando,l=t.nodeType,c=l?ut.cache:t,u=l?t[a]:t[a]&&a;if(u&&c[u]&&(o||c[u].data)||n!==e||"string"!=typeof i)return u||(u=l?t[a]=et.pop()||ut.guid++:a),c[u]||(c[u]=l?{}:{toJSON:ut.noop}),("object"==typeof i||"function"==typeof i)&&(o?c[u]=ut.extend(c[u],i):c[u].data=ut.extend(c[u].data,i)),r=c[u],o||(r.data||(r.data={}),r=r.data),n!==e&&(r[ut.camelCase(i)]=n),"string"==typeof i?(s=r[i],null==s&&(s=r[ut.camelCase(i)])):s=r,s}}function s(t,e,i){if(ut.acceptData(t)){var n,o,s=t.nodeType,r=s?ut.cache:t,l=s?t[ut.expando]:ut.expando;if(r[l]){if(e&&(n=i?r[l]:r[l].data)){ut.isArray(e)?e=e.concat(ut.map(e,ut.camelCase)):e in n?e=[e]:(e=ut.camelCase(e),e=e in n?[e]:e.split(" ")),o=e.length;for(;o--;)delete n[e[o]];if(i?!a(n):!ut.isEmptyObject(n))return}(i||(delete r[l].data,a(r[l])))&&(s?ut.cleanData([t],!0):ut.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function r(t,i,n){if(n===e&&1===t.nodeType){var o="data-"+i.replace(Mt,"-$1").toLowerCase();if(n=t.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Tt.test(n)?ut.parseJSON(n):n}catch(s){}ut.data(t,i,n)}else n=e}return n}function a(t){var e;for(e in t)if(("data"!==e||!ut.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function l(){return!0}function c(){return!1}function u(){try{return Y.activeElement}catch(t){}}function d(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function p(t,e,i){if(ut.isFunction(e))return ut.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ut.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(jt.test(e))return ut.filter(e,t,i);e=ut.filter(e,t)}return ut.grep(t,function(t){return ut.inArray(t,e)>=0!==i})}function h(t){var e=Wt.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function f(t,e){return ut.nodeName(t,"table")&&ut.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function m(t){return t.type=(null!==ut.find.attr(t,"type"))+"/"+t.type,t}function g(t){var e=oe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function v(t,e){for(var i,n=0;null!=(i=t[n]);n++)ut._data(i,"globalEval",!e||ut._data(e[n],"globalEval"))}function y(t,e){if(1===e.nodeType&&ut.hasData(t)){var i,n,o,s=ut._data(t),r=ut._data(e,s),a=s.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,o=a[i].length;o>n;n++)ut.event.add(e,i,a[i][n])}r.data&&(r.data=ut.extend({},r.data))}}function _(t,e){var i,n,o;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ut.support.noCloneEvent&&e[ut.expando]){o=ut._data(e);for(n in o.events)ut.removeEvent(e,n,o.handle);e.removeAttribute(ut.expando)}"script"===i&&e.text!==t.text?(m(e).text=t.text,g(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ut.support.html5Clone&&t.innerHTML&&!ut.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&ee.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function b(t,i){var n,o,s=0,r=typeof t.getElementsByTagName!==G?t.getElementsByTagName(i||"*"):typeof t.querySelectorAll!==G?t.querySelectorAll(i||"*"):e;if(!r)for(r=[],n=t.childNodes||t;null!=(o=n[s]);s++)!i||ut.nodeName(o,i)?r.push(o):ut.merge(r,b(o,i));return i===e||i&&ut.nodeName(t,i)?ut.merge([t],r):r}function w(t){ee.test(t.type)&&(t.defaultChecked=t.checked)}function x(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,o=ke.length;o--;)if(e=ke[o]+i,e in t)return e;return n}function C(t,e){return t=e||t,"none"===ut.css(t,"display")||!ut.contains(t.ownerDocument,t)}function k(t,e){for(var i,n,o,s=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(s[r]=ut._data(n,"olddisplay"),i=n.style.display,e?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&C(n)&&(s[r]=ut._data(n,"olddisplay",z(n.nodeName)))):s[r]||(o=C(n),(i&&"none"!==i||!o)&&ut._data(n,"olddisplay",o?i:ut.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[r]||"":"none"));return t}function S(t,e,i){var n=ve.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function T(t,e,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=ut.css(t,i+Ce[s],!0,o)),n?("content"===i&&(r-=ut.css(t,"padding"+Ce[s],!0,o)),"margin"!==i&&(r-=ut.css(t,"border"+Ce[s]+"Width",!0,o))):(r+=ut.css(t,"padding"+Ce[s],!0,o),"padding"!==i&&(r+=ut.css(t,"border"+Ce[s]+"Width",!0,o)));return r}function M(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,s=ue(t),r=ut.support.boxSizing&&"border-box"===ut.css(t,"boxSizing",!1,s);if(0>=o||null==o){if(o=de(t,e,s),(0>o||null==o)&&(o=t.style[e]),ye.test(o))return o;n=r&&(ut.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+T(t,e,i||(r?"border":"content"),n,s)+"px"}function z(t){var e=Y,i=be[t];return i||(i=D(t,e),"none"!==i&&i||(ce=(ce||ut("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(ce[0].contentWindow||ce[0].contentDocument).document,
e.write("<!doctype html><html><body>"),e.close(),i=D(t,e),ce.detach()),be[t]=i),i}function D(t,e){var i=ut(e.createElement(t)).appendTo(e.body),n=ut.css(i[0],"display");return i.remove(),n}function P(t,e,i,n){var o;if(ut.isArray(e))ut.each(e,function(e,o){i||Te.test(t)?n(t,o):P(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==ut.type(e))n(t,e);else for(o in e)P(t+"["+o+"]",e[o],i,n)}function q(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,s=e.toLowerCase().match(pt)||[];if(ut.isFunction(i))for(;n=s[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function A(t,e,i,n){function o(a){var l;return s[a]=!0,ut.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var s={},r=t===Ve;return o(e.dataTypes[0])||!s["*"]&&o("*")}function I(t,i){var n,o,s=ut.ajaxSettings.flatOptions||{};for(o in i)i[o]!==e&&((s[o]?t:n||(n={}))[o]=i[o]);return n&&ut.extend(!0,t,n),t}function R(t,i,n){for(var o,s,r,a,l=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),s===e&&(s=t.mimeType||i.getResponseHeader("Content-Type"));if(s)for(a in l)if(l[a]&&l[a].test(s)){c.unshift(a);break}if(c[0]in n)r=c[0];else{for(a in n){if(!c[0]||t.converters[a+" "+c[0]]){r=a;break}o||(o=a)}r=r||o}return r?(r!==c[0]&&c.unshift(r),n[r]):void 0}function E(t,e,i,n){var o,s,r,a,l,c={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=u.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(r=c[l+" "+s]||c["* "+s],!r)for(o in c)if(a=o.split(" "),a[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[o]:c[o]!==!0&&(s=a[0],u.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function O(){try{return new t.XMLHttpRequest}catch(e){}}function N(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function F(){return setTimeout(function(){Je=e}),Je=ut.now()}function L(t,e,i){for(var n,o=(oi[e]||[]).concat(oi["*"]),s=0,r=o.length;r>s;s++)if(n=o[s].call(i,e,t))return n}function $(t,e,i){var n,o,s=0,r=ni.length,a=ut.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Je||F(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,s=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(s);return a.notifyWith(t,[c,s,i]),1>s&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:ut.extend({},e),opts:ut.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Je||F(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ut.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(H(u,c.opts.specialEasing);r>s;s++)if(n=ni[s].call(c,t,u,c.opts))return n;return ut.map(u,L,c),ut.isFunction(c.opts.start)&&c.opts.start.call(t,c),ut.fx.timer(ut.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(t,e){var i,n,o,s,r;for(i in t)if(n=ut.camelCase(i),o=e[n],s=t[i],ut.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),r=ut.cssHooks[n],r&&"expand"in r){s=r.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=o)}else e[n]=o}function j(t,e,i){var n,o,s,r,a,l,c=this,u={},d=t.style,p=t.nodeType&&C(t),h=ut._data(t,"fxshow");i.queue||(a=ut._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ut.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ut.css(t,"display")&&"none"===ut.css(t,"float")&&(ut.support.inlineBlockNeedsLayout&&"inline"!==z(t.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ut.support.shrinkWrapBlocks||c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(o=e[n],ti.exec(o)){if(delete e[n],s=s||"toggle"===o,o===(p?"hide":"show"))continue;u[n]=h&&h[n]||ut.style(t,n)}if(!ut.isEmptyObject(u)){h?"hidden"in h&&(p=h.hidden):h=ut._data(t,"fxshow",{}),s&&(h.hidden=!p),p?ut(t).show():c.done(function(){ut(t).hide()}),c.done(function(){var e;ut._removeData(t,"fxshow");for(e in u)ut.style(t,e,u[e])});for(n in u)r=L(p?h[n]:0,n,c),n in h||(h[n]=r.start,p&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function V(t,e,i,n,o){return new V.prototype.init(t,e,i,n,o)}function K(t,e){var i,n={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)i=Ce[o],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function B(t){return ut.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var W,U,G=typeof e,Q=t.location,Y=t.document,X=Y.documentElement,J=t.jQuery,Z=t.$,tt={},et=[],it="1.10.2",nt=et.concat,ot=et.push,st=et.slice,rt=et.indexOf,at=tt.toString,lt=tt.hasOwnProperty,ct=it.trim,ut=function(t,e){return new ut.fn.init(t,e,U)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pt=/\S+/g,ht=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,_t=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,bt=/^-ms-/,wt=/-([\da-z])/gi,xt=function(t,e){return e.toUpperCase()},Ct=function(t){(Y.addEventListener||"load"===t.type||"complete"===Y.readyState)&&(kt(),ut.ready())},kt=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",Ct,!1),t.removeEventListener("load",Ct,!1)):(Y.detachEvent("onreadystatechange",Ct),t.detachEvent("onload",Ct))};ut.fn=ut.prototype={jquery:it,constructor:ut,init:function(t,i,n){var o,s;if(!t)return this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ft.exec(t),!o||!o[1]&&i)return!i||i.jquery?(i||n).find(t):this.constructor(i).find(t);if(o[1]){if(i=i instanceof ut?i[0]:i,ut.merge(this,ut.parseHTML(o[1],i&&i.nodeType?i.ownerDocument||i:Y,!0)),mt.test(o[1])&&ut.isPlainObject(i))for(o in i)ut.isFunction(this[o])?this[o](i[o]):this.attr(o,i[o]);return this}if(s=Y.getElementById(o[2]),s&&s.parentNode){if(s.id!==o[2])return n.find(t);this.length=1,this[0]=s}return this.context=Y,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ut.isFunction(t)?n.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),ut.makeArray(t,this))},selector:"",length:0,toArray:function(){return st.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=ut.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ut.each(this,t,e)},ready:function(t){return ut.ready.promise().done(t),this},slice:function(){return this.pushStack(st.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},map:function(t){return this.pushStack(ut.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ot,sort:[].sort,splice:[].splice},ut.fn.init.prototype=ut.fn,ut.extend=ut.fn.extend=function(){var t,i,n,o,s,r,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||ut.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(s=arguments[l]))for(o in s)t=a[o],n=s[o],a!==n&&(u&&n&&(ut.isPlainObject(n)||(i=ut.isArray(n)))?(i?(i=!1,r=t&&ut.isArray(t)?t:[]):r=t&&ut.isPlainObject(t)?t:{},a[o]=ut.extend(u,r,n)):n!==e&&(a[o]=n));return a},ut.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===ut&&(t.$=Z),e&&t.jQuery===ut&&(t.jQuery=J),ut},isReady:!1,readyWait:1,holdReady:function(t){t?ut.readyWait++:ut.ready(!0)},ready:function(t){if(t===!0?!--ut.readyWait:!ut.isReady){if(!Y.body)return setTimeout(ut.ready);ut.isReady=!0,t!==!0&&--ut.readyWait>0||(W.resolveWith(Y,[ut]),ut.fn.trigger&&ut(Y).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===ut.type(t)},isArray:Array.isArray||function(t){return"array"===ut.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?tt[at.call(t)]||"object":typeof t},isPlainObject:function(t){var i;if(!t||"object"!==ut.type(t)||t.nodeType||ut.isWindow(t))return!1;try{if(t.constructor&&!lt.call(t,"constructor")&&!lt.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ut.support.ownLast)for(i in t)return lt.call(t,i);for(i in t);return i===e||lt.call(t,i)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||Y;var n=mt.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=ut.buildFragment([t],e,o),o&&ut(o).remove(),ut.merge([],n.childNodes))},parseJSON:function(e){return t.JSON&&t.JSON.parse?t.JSON.parse(e):null===e?e:"string"==typeof e&&(e=ut.trim(e),e&&gt.test(e.replace(yt,"@").replace(_t,"]").replace(vt,"")))?new Function("return "+e)():void ut.error("Invalid JSON: "+e)},parseXML:function(i){var n,o;if(!i||"string"!=typeof i)return null;try{t.DOMParser?(o=new DOMParser,n=o.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(s){n=e}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ut.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(e){e&&ut.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(bt,"ms-").replace(wt,xt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,s=0,r=t.length,a=i(t);if(n){if(a)for(;r>s&&(o=e.apply(t[s],n),o!==!1);s++);else for(s in t)if(o=e.apply(t[s],n),o===!1)break}else if(a)for(;r>s&&(o=e.call(t[s],s,t[s]),o!==!1);s++);else for(s in t)if(o=e.call(t[s],s,t[s]),o===!1)break;return t},trim:ct&&!ct.call("\ufeff ")?function(t){return null==t?"":ct.call(t)}:function(t){return null==t?"":(t+"").replace(ht,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ut.merge(n,"string"==typeof t?[t]:t):ot.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(rt)return rt.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var n=i.length,o=t.length,s=0;if("number"==typeof n)for(;n>s;s++)t[o++]=i[s];else for(;i[s]!==e;)t[o++]=i[s++];return t.length=o,t},grep:function(t,e,i){var n,o=[],s=0,r=t.length;for(i=!!i;r>s;s++)n=!!e(t[s],s),i!==n&&o.push(t[s]);return o},map:function(t,e,n){var o,s=0,r=t.length,a=i(t),l=[];if(a)for(;r>s;s++)o=e(t[s],s,n),null!=o&&(l[l.length]=o);else for(s in t)o=e(t[s],s,n),null!=o&&(l[l.length]=o);return nt.apply([],l)},guid:1,proxy:function(t,i){var n,o,s;return"string"==typeof i&&(s=t[i],i=t,t=s),ut.isFunction(t)?(n=st.call(arguments,2),o=function(){return t.apply(i||this,n.concat(st.call(arguments)))},o.guid=t.guid=t.guid||ut.guid++,o):e},access:function(t,i,n,o,s,r,a){var l=0,c=t.length,u=null==n;if("object"===ut.type(n)){s=!0;for(l in n)ut.access(t,i,l,n[l],!0,r,a)}else if(o!==e&&(s=!0,ut.isFunction(o)||(a=!0),u&&(a?(i.call(t,o),i=null):(u=i,i=function(t,e,i){return u.call(ut(t),i)})),i))for(;c>l;l++)i(t[l],n,a?o:o.call(t[l],l,i(t[l],n)));return s?t:u?i.call(t):c?i(t[0],n):r},now:function(){return(new Date).getTime()},swap:function(t,e,i,n){var o,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];o=i.apply(t,n||[]);for(s in e)t.style[s]=r[s];return o}}),ut.ready.promise=function(e){if(!W)if(W=ut.Deferred(),"complete"===Y.readyState)setTimeout(ut.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",Ct,!1),t.addEventListener("load",Ct,!1);else{Y.attachEvent("onreadystatechange",Ct),t.attachEvent("onload",Ct);var i=!1;try{i=null==t.frameElement&&Y.documentElement}catch(n){}i&&i.doScroll&&!function o(){if(!ut.isReady){try{i.doScroll("left")}catch(t){return setTimeout(o,50)}kt(),ut.ready()}}()}return W.promise(e)},ut.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()}),U=ut(Y),function(t,e){function i(t,e,i,n){var o,s,r,a,l,c,u,d,f,m;if((e?e.ownerDocument||e:$)!==A&&q(e),e=e||A,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(R&&!n){if(o=_t.exec(t))if(r=o[1]){if(9===a){if(s=e.getElementById(r),!s||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(r))&&F(e,s)&&s.id===r)return i.push(s),i}else{if(o[2])return tt.apply(i,e.getElementsByTagName(t)),i;if((r=o[3])&&C.getElementsByClassName&&e.getElementsByClassName)return tt.apply(i,e.getElementsByClassName(r)),i}if(C.qsa&&(!E||!E.test(t))){if(d=u=L,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=p(t),(u=e.getAttribute("id"))?d=u.replace(xt,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+h(c[l]);f=ht.test(t)&&e.parentNode||e,m=c.join(",")}if(m)try{return tt.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{u||e.removeAttribute("id")}}}return w(t.replace(ct,"$1"),e,i,n)}function n(){function t(i,n){return e.push(i+=" ")>S.cacheLength&&delete t[e.shift()],t[i]=n}var e=[];return t}function o(t){return t[L]=!0,t}function s(t){var e=A.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var i=t.split("|"),n=t.length;n--;)S.attrHandle[i[n]]=e}function a(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Q)-(~t.sourceIndex||Q);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function l(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function c(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function u(t){return o(function(e){return e=+e,o(function(i,n){for(var o,s=t([],i.length,e),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))})})}function d(){}function p(t,e){var n,o,s,r,a,l,c,u=K[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=S.preFilter;a;){(!n||(o=dt.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=pt.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(ct," ")}),a=a.slice(n.length));for(r in S.filter)!(o=vt[r].exec(a))||c[r]&&!(o=c[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return e?a.length:a?i.error(t):K(t,l).slice(0)}function h(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,o=i&&"parentNode"===n,s=j++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,s)}:function(e,i,r){var a,l,c,u=H+" "+s;if(r){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(c=e[L]||(e[L]={}),(l=c[n])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=c[n]=[u],l[1]=t(e,i,r)||k,l[1]===!0)return!0}}function m(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function g(t,e,i,n,o){for(var s,r=[],a=0,l=t.length,c=null!=e;l>a;a++)(s=t[a])&&(!i||i(s,n,o))&&(r.push(s),c&&e.push(a));return r}function v(t,e,i,n,s,r){return n&&!n[L]&&(n=v(n)),s&&!s[L]&&(s=v(s,r)),o(function(o,r,a,l){var c,u,d,p=[],h=[],f=r.length,m=o||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?m:g(m,p,t,a,l),y=i?s||(o?t:f||n)?[]:r:v;if(i&&i(v,y,a,l),n)for(c=g(y,h),n(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[h[u]]=!(v[h[u]]=d));if(o){if(s||t){if(s){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(v[u]=d);s(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=s?it.call(o,d):p[u])>-1&&(o[c]=!(r[c]=d))}}else y=g(y===r?y.splice(f,y.length):y),s?s(null,r,y,l):tt.apply(r,y)})}function y(t){for(var e,i,n,o=t.length,s=S.relative[t[0].type],r=s||S.relative[" "],a=s?1:0,l=f(function(t){return t===e},r,!0),c=f(function(t){return it.call(e,t)>-1},r,!0),u=[function(t,i,n){return!s&&(n||i!==D)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];o>a;a++)if(i=S.relative[t[a].type])u=[f(m(u),i)];else{if(i=S.filter[t[a].type].apply(null,t[a].matches),i[L]){for(n=++a;o>n&&!S.relative[t[n].type];n++);return v(a>1&&m(u),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ct,"$1"),i,n>a&&y(t.slice(a,n)),o>n&&y(t=t.slice(n)),o>n&&h(t))}u.push(i)}return m(u)}function _(t,e){var n=0,s=e.length>0,r=t.length>0,a=function(o,a,l,c,u){var d,p,h,f=[],m=0,v="0",y=o&&[],_=null!=u,b=D,w=o||r&&S.find.TAG("*",u&&a.parentNode||a),x=H+=null==b?1:Math.random()||.1;for(_&&(D=a!==A&&a,k=n);null!=(d=w[v]);v++){if(r&&d){for(p=0;h=t[p++];)if(h(d,a,l)){c.push(d);break}_&&(H=x,k=++n)}s&&((d=!h&&d)&&m--,o&&y.push(d))}if(m+=v,s&&v!==m){for(p=0;h=e[p++];)h(y,f,a,l);if(o){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=J.call(c));f=g(f)}tt.apply(c,f),_&&!o&&f.length>0&&m+e.length>1&&i.uniqueSort(c)}return _&&(H=x,D=b),y};return s?o(a):a}function b(t,e,n){for(var o=0,s=e.length;s>o;o++)i(t,e[o],n);return n}function w(t,e,i,n){var o,s,r,a,l,c=p(t);if(!n&&1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&C.getById&&9===e.nodeType&&R&&S.relative[s[1].type]){if(e=(S.find.ID(r.matches[0].replace(Ct,kt),e)||[])[0],!e)return i;t=t.slice(s.shift().value.length)}for(o=vt.needsContext.test(t)?0:s.length;o--&&(r=s[o],!S.relative[a=r.type]);)if((l=S.find[a])&&(n=l(r.matches[0].replace(Ct,kt),ht.test(s[0].type)&&e.parentNode||e))){if(s.splice(o,1),t=n.length&&h(s),!t)return tt.apply(i,n),i;break}}return z(t,c)(n,e,!R,i,ht.test(t)),i}var x,C,k,S,T,M,z,D,P,q,A,I,R,E,O,N,F,L="sizzle"+-new Date,$=t.document,H=0,j=0,V=n(),K=n(),B=n(),W=!1,U=function(t,e){return t===e?(W=!0,0):0},G=typeof e,Q=1<<31,Y={}.hasOwnProperty,X=[],J=X.pop,Z=X.push,tt=X.push,et=X.slice,it=X.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ot="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=st.replace("w","w#"),at="\\["+ot+"*("+st+")"+ot+"*(?:([*^$|!~]?=)"+ot+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+rt+")|)|)"+ot+"*\\]",lt=":("+st+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+at.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+ot+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ot+"+$","g"),dt=new RegExp("^"+ot+"*,"+ot+"*"),pt=new RegExp("^"+ot+"*([>+~]|"+ot+")"+ot+"*"),ht=new RegExp(ot+"*[+~]"),ft=new RegExp("="+ot+"*([^\\]'\"]*)"+ot+"*\\]","g"),mt=new RegExp(lt),gt=new RegExp("^"+rt+"$"),vt={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+lt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ot+"*(even|odd|(([+-]|)(\\d*)n|)"+ot+"*(?:([+-]|)"+ot+"*(\\d+)|))"+ot+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+ot+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ot+"*((?:-\\d)?\\d*)"+ot+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/^(?:input|select|textarea|button)$/i,wt=/^h\d$/i,xt=/'|\\/g,Ct=new RegExp("\\\\([\\da-f]{1,6}"+ot+"?|("+ot+")|.)","ig"),kt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{tt.apply(X=et.call($.childNodes),$.childNodes),X[$.childNodes.length].nodeType}catch(St){tt={apply:X.length?function(t,e){Z.apply(t,et.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}M=i.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},C=i.support={},q=i.setDocument=function(t){var e=t?t.ownerDocument||t:$,i=e.defaultView;return e!==A&&9===e.nodeType&&e.documentElement?(A=e,I=e.documentElement,R=!M(e),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){q()}),C.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=s(function(t){return t.appendChild(e.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),C.getById=s(function(t){return I.appendChild(t).id=L,!e.getElementsByName||!e.getElementsByName(L).length}),C.getById?(S.find.ID=function(t,e){if(typeof e.getElementById!==G&&R){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},S.filter.ID=function(t){var e=t.replace(Ct,kt);return function(t){return t.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(t){var e=t.replace(Ct,kt);return function(t){var i=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return i&&i.value===e}}),S.find.TAG=C.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==G?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},S.find.CLASS=C.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==G&&R?e.getElementsByClassName(t):void 0},O=[],E=[],(C.qsa=yt.test(e.querySelectorAll))&&(s(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||E.push("\\["+ot+"*(?:value|"+nt+")"),t.querySelectorAll(":checked").length||E.push(":checked")}),s(function(t){var i=e.createElement("input");i.setAttribute("type","hidden"),t.appendChild(i).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&E.push("[*^$]="+ot+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||E.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),E.push(",.*:")})),(C.matchesSelector=yt.test(N=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&s(function(t){C.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),O.push("!=",lt)}),E=E.length&&new RegExp(E.join("|")),O=O.length&&new RegExp(O.join("|")),F=yt.test(I.contains)||I.compareDocumentPosition?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=I.compareDocumentPosition?function(t,i){if(t===i)return W=!0,0;var n=i.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(i);return n?1&n||!C.sortDetached&&i.compareDocumentPosition(t)===n?t===e||F($,t)?-1:i===e||F($,i)?1:P?it.call(P,t)-it.call(P,i):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,i){var n,o=0,s=t.parentNode,r=i.parentNode,l=[t],c=[i];if(t===i)return W=!0,0;if(!s||!r)return t===e?-1:i===e?1:s?-1:r?1:P?it.call(P,t)-it.call(P,i):0;if(s===r)return a(t,i);for(n=t;n=n.parentNode;)l.unshift(n);for(n=i;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===$?-1:c[o]===$?1:0},e):A},i.matches=function(t,e){return i(t,null,null,e)},i.matchesSelector=function(t,e){if((t.ownerDocument||t)!==A&&q(t),e=e.replace(ft,"='$1']"),C.matchesSelector&&R&&(!O||!O.test(e))&&(!E||!E.test(e)))try{var n=N.call(t,e);if(n||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(o){}return i(e,A,null,[t]).length>0},i.contains=function(t,e){return(t.ownerDocument||t)!==A&&q(t),F(t,e)},i.attr=function(t,i){(t.ownerDocument||t)!==A&&q(t);var n=S.attrHandle[i.toLowerCase()],o=n&&Y.call(S.attrHandle,i.toLowerCase())?n(t,i,!R):e;return o===e?C.attributes||!R?t.getAttribute(i):(o=t.getAttributeNode(i))&&o.specified?o.value:null:o},i.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},i.uniqueSort=function(t){var e,i=[],n=0,o=0;if(W=!C.detectDuplicates,P=!C.sortStable&&t.slice(0),t.sort(U),W){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return t},T=i.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=T(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n];n++)i+=T(e);return i},S=i.selectors={cacheLength:50,createPseudo:o,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ct,kt),t[3]=(t[4]||t[5]||"").replace(Ct,kt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||i.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&i.error(t[0]),t},PSEUDO:function(t){var i,n=!t[5]&&t[2];return vt.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:n&&mt.test(n)&&(i=p(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(t[0]=t[0].slice(0,i),t[2]=n.slice(0,i)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ct,kt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+ot+")"+t+"("+ot+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(o){var s=i.attr(o,t);return null==s?"!="===e:e?(s+="","="===e?s===n:"!="===e?s!==n:"^="===e?n&&0===s.indexOf(n):"*="===e?n&&s.indexOf(n)>-1:"$="===e?n&&s.slice(-n.length)===n:"~="===e?(" "+s+" ").indexOf(n)>-1:"|="===e?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,u,d,p,h,f,m=s!==r?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(s){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&y){for(u=g[L]||(g[L]={}),c=u[t]||[],h=c[0]===H&&c[1],p=c[0]===H&&c[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(p=h=0)||f.pop();)if(1===d.nodeType&&++p&&d===e){u[t]=[H,h,p];break}}else if(y&&(c=(e[L]||(e[L]={}))[t])&&c[0]===H)p=c[1];else for(;(d=++h&&d&&d[m]||(p=h=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(y&&((d[L]||(d[L]={}))[t]=[H,p]),d!==e)););return p-=o,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(t,e){var n,s=S.pseudos[t]||S.setFilters[t.toLowerCase()]||i.error("unsupported pseudo: "+t);return s[L]?s(e):s.length>1?(n=[t,t,"",e],S.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,i){for(var n,o=s(t,e),r=o.length;r--;)n=it.call(t,o[r]),t[n]=!(i[n]=o[r])}):function(t){return s(t,0,n)}):s}},pseudos:{not:o(function(t){var e=[],i=[],n=z(t.replace(ct,"$1"));return n[L]?o(function(t,e,i,o){for(var s,r=n(t,null,o,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))}):function(t,o,s){return e[0]=t,n(e,null,s,i),!i.pop()}}),has:o(function(t){return function(e){return i(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:o(function(t){return gt.test(t||"")||i.error("unsupported lang: "+t),t=t.replace(Ct,kt).toLowerCase(),function(e){var i;do if(i=R?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return wt.test(t.nodeName)},input:function(t){return bt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[0>i?i+e:i]}),even:u(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},S.pseudos.nth=S.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})S.pseudos[x]=c(x);d.prototype=S.filters=S.pseudos,S.setFilters=new d,z=i.compile=function(t,e){var i,n=[],o=[],s=B[t+" "];if(!s){for(e||(e=p(t)),i=e.length;i--;)s=y(e[i]),s[L]?n.push(s):o.push(s);s=B(t,_(o,n))}return s},C.sortStable=L.split("").sort(U).join("")===L,C.detectDuplicates=W,q(),C.sortDetached=s(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||r(nt,function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&n.specified?n.value:t[e]===!0?e.toLowerCase():null}),ut.find=i,ut.expr=i.selectors,ut.expr[":"]=ut.expr.pseudos,ut.unique=i.uniqueSort,ut.text=i.getText,ut.isXMLDoc=i.isXML,ut.contains=i.contains}(t);var St={};ut.Callbacks=function(t){t="string"==typeof t?St[t]||n(t):ut.extend({},t);var i,o,s,r,a,l,c=[],u=!t.once&&[],d=function(e){for(o=t.memory&&e,s=!0,a=l||0,l=0,r=c.length,i=!0;c&&r>a;a++)if(c[a].apply(e[0],e[1])===!1&&t.stopOnFalse){o=!1;break}i=!1,c&&(u?u.length&&d(u.shift()):o?c=[]:p.disable())},p={add:function(){if(c){var e=c.length;!function n(e){ut.each(e,function(e,i){var o=ut.type(i);"function"===o?t.unique&&p.has(i)||c.push(i):i&&i.length&&"string"!==o&&n(i)})}(arguments),i?r=c.length:o&&(l=e,d(o))}return this},remove:function(){return c&&ut.each(arguments,function(t,e){for(var n;(n=ut.inArray(e,c,n))>-1;)c.splice(n,1),i&&(r>=n&&r--,a>=n&&a--)}),this},has:function(t){return t?ut.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=u=o=e,this},disabled:function(){return!c},lock:function(){return u=e,o||p.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||s&&!u||(e=e||[],e=[t,e.slice?e.slice():e],i?u.push(e):d(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!s}};return p;
},ut.extend({Deferred:function(t){var e=[["resolve","done",ut.Callbacks("once memory"),"resolved"],["reject","fail",ut.Callbacks("once memory"),"rejected"],["notify","progress",ut.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ut.Deferred(function(i){ut.each(e,function(e,s){var r=s[0],a=ut.isFunction(t[e])&&t[e];o[s[1]](function(){var t=a&&a.apply(this,arguments);t&&ut.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===n?i.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ut.extend(t,n):n}},o={};return n.pipe=n.then,ut.each(e,function(t,s){var r=s[2],a=s[3];n[s[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?n:this,arguments),this},o[s[0]+"With"]=r.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,s=st.call(arguments),r=s.length,a=1!==r||t&&ut.isFunction(t.promise)?r:0,l=1===a?t:ut.Deferred(),c=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?st.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);r>o;o++)s[o]&&ut.isFunction(s[o].promise)?s[o].promise().done(c(o,n,s)).fail(l.reject).progress(c(o,i,e)):--a;return a||l.resolveWith(n,s),l.promise()}}),ut.support=function(e){var i,n,o,s,r,a,l,c,u,d=Y.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*")||[],n=d.getElementsByTagName("a")[0],!n||!n.style||!i.length)return e;s=Y.createElement("select"),a=s.appendChild(Y.createElement("option")),o=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",e.getSetAttribute="t"!==d.className,e.leadingWhitespace=3===d.firstChild.nodeType,e.tbody=!d.getElementsByTagName("tbody").length,e.htmlSerialize=!!d.getElementsByTagName("link").length,e.style=/top/.test(n.getAttribute("style")),e.hrefNormalized="/a"===n.getAttribute("href"),e.opacity=/^0.5/.test(n.style.opacity),e.cssFloat=!!n.style.cssFloat,e.checkOn=!!o.value,e.optSelected=a.selected,e.enctype=!!Y.createElement("form").enctype,e.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,e.inlineBlockNeedsLayout=!1,e.shrinkWrapBlocks=!1,e.pixelPosition=!1,e.deleteExpando=!0,e.noCloneEvent=!0,e.reliableMarginRight=!0,e.boxSizingReliable=!0,o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!a.disabled;try{delete d.test}catch(p){e.deleteExpando=!1}o=Y.createElement("input"),o.setAttribute("value",""),e.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),r=Y.createDocumentFragment(),r.appendChild(o),e.appendChecked=o.checked,e.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){e.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(l="on"+u,"t"),e[u+"Bubbles"]=l in t||d.attributes[l].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ut(e))break;return e.ownLast="0"!==u,ut(function(){var i,n,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=Y.getElementsByTagName("body")[0];r&&(i=Y.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(i).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",e.reliableHiddenOffsets=c&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ut.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===d.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(d,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(d,null)||{width:"4px"}).width,n=d.appendChild(Y.createElement("div")),n.style.cssText=d.style.cssText=s,n.style.marginRight=n.style.width="0",d.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(n,null)||{}).marginRight)),typeof d.style.zoom!==G&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==d.offsetWidth,e.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(i),i=d=o=n=null)}),i=s=r=a=n=o=null,e}({});var Tt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Mt=/([A-Z])/g;ut.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ut.cache[t[ut.expando]]:t[ut.expando],!!t&&!a(t)},data:function(t,e,i){return o(t,e,i)},removeData:function(t,e){return s(t,e)},_data:function(t,e,i){return o(t,e,i,!0)},_removeData:function(t,e){return s(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&ut.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),ut.fn.extend({data:function(t,i){var n,o,s=null,a=0,l=this[0];if(t===e){if(this.length&&(s=ut.data(l),1===l.nodeType&&!ut._data(l,"parsedAttrs"))){for(n=l.attributes;a<n.length;a++)o=n[a].name,0===o.indexOf("data-")&&(o=ut.camelCase(o.slice(5)),r(l,o,s[o]));ut._data(l,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){ut.data(this,t)}):arguments.length>1?this.each(function(){ut.data(this,t,i)}):l?r(l,t,ut.data(l,t)):null},removeData:function(t){return this.each(function(){ut.removeData(this,t)})}}),ut.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ut._data(t,e),i&&(!n||ut.isArray(i)?n=ut._data(t,e,ut.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=ut.queue(t,e),n=i.length,o=i.shift(),s=ut._queueHooks(t,e),r=function(){ut.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete s.stop,o.call(t,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ut._data(t,i)||ut._data(t,i,{empty:ut.Callbacks("once memory").add(function(){ut._removeData(t,e+"queue"),ut._removeData(t,i)})})}}),ut.fn.extend({queue:function(t,i){var n=2;return"string"!=typeof t&&(i=t,t="fx",n--),arguments.length<n?ut.queue(this[0],t):i===e?this:this.each(function(){var e=ut.queue(this,t,i);ut._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ut.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ut.dequeue(this,t)})},delay:function(t,e){return t=ut.fx?ut.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){var n,o=1,s=ut.Deferred(),r=this,a=this.length,l=function(){--o||s.resolveWith(r,[r])};for("string"!=typeof t&&(i=t,t=e),t=t||"fx";a--;)n=ut._data(r[a],t+"queueHooks"),n&&n.empty&&(o++,n.empty.add(l));return l(),s.promise(i)}});var zt,Dt,Pt=/[\t\r\n\f]/g,qt=/\r/g,At=/^(?:input|select|textarea|button|object)$/i,It=/^(?:a|area)$/i,Rt=/^(?:checked|selected)$/i,Et=ut.support.getSetAttribute,Ot=ut.support.input;ut.fn.extend({attr:function(t,e){return ut.access(this,ut.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ut.removeAttr(this,t)})},prop:function(t,e){return ut.access(this,ut.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ut.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,n,o,s,r=0,a=this.length,l="string"==typeof t&&t;if(ut.isFunction(t))return this.each(function(e){ut(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(pt)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Pt," "):" ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i.className=ut.trim(n)}return this},removeClass:function(t){var e,i,n,o,s,r=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(ut.isFunction(t))return this.each(function(e){ut(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(pt)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Pt," "):"")){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");i.className=t?ut.trim(n):""}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ut.isFunction(t)?this.each(function(i){ut(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,o=ut(this),s=t.match(pt)||[];e=s[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(i===G||"boolean"===i)&&(this.className&&ut._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ut._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Pt," ").indexOf(e)>=0)return!0;return!1},val:function(t){var i,n,o,s=this[0];{if(arguments.length)return o=ut.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=o?t.call(this,i,ut(this).val()):t,null==s?s="":"number"==typeof s?s+="":ut.isArray(s)&&(s=ut.map(s,function(t){return null==t?"":t+""})),n=ut.valHooks[this.type]||ut.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==e||(this.value=s))});if(s)return n=ut.valHooks[s.type]||ut.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==e?i:(i=s.value,"string"==typeof i?i.replace(qt,""):null==i?"":i)}}}),ut.extend({valHooks:{option:{get:function(t){var e=ut.find.attr(t,"value");return null!=e?e:t.text}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,s="select-one"===t.type||0>o,r=s?null:[],a=s?o+1:n.length,l=0>o?a:s?o:0;a>l;l++)if(i=n[l],(i.selected||l===o)&&(ut.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ut.nodeName(i.parentNode,"optgroup"))){if(e=ut(i).val(),s)return e;r.push(e)}return r},set:function(t,e){for(var i,n,o=t.options,s=ut.makeArray(e),r=o.length;r--;)n=o[r],(n.selected=ut.inArray(ut(n).val(),s)>=0)&&(i=!0);return i||(t.selectedIndex=-1),s}}},attr:function(t,i,n){var o,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===G?ut.prop(t,i,n):(1===r&&ut.isXMLDoc(t)||(i=i.toLowerCase(),o=ut.attrHooks[i]||(ut.expr.match.bool.test(i)?Dt:zt)),n===e?o&&"get"in o&&null!==(s=o.get(t,i))?s:(s=ut.find.attr(t,i),null==s?e:s):null!==n?o&&"set"in o&&(s=o.set(t,n,i))!==e?s:(t.setAttribute(i,n+""),n):void ut.removeAttr(t,i))},removeAttr:function(t,e){var i,n,o=0,s=e&&e.match(pt);if(s&&1===t.nodeType)for(;i=s[o++];)n=ut.propFix[i]||i,ut.expr.match.bool.test(i)?Ot&&Et||!Rt.test(i)?t[n]=!1:t[ut.camelCase("default-"+i)]=t[n]=!1:ut.attr(t,i,""),t.removeAttribute(Et?i:n)},attrHooks:{type:{set:function(t,e){if(!ut.support.radioValue&&"radio"===e&&ut.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,i,n){var o,s,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!ut.isXMLDoc(t),r&&(i=ut.propFix[i]||i,s=ut.propHooks[i]),n!==e?s&&"set"in s&&(o=s.set(t,n,i))!==e?o:t[i]=n:s&&"get"in s&&null!==(o=s.get(t,i))?o:t[i]},propHooks:{tabIndex:{get:function(t){var e=ut.find.attr(t,"tabindex");return e?parseInt(e,10):At.test(t.nodeName)||It.test(t.nodeName)&&t.href?0:-1}}}}),Dt={set:function(t,e,i){return e===!1?ut.removeAttr(t,i):Ot&&Et||!Rt.test(i)?t.setAttribute(!Et&&ut.propFix[i]||i,i):t[ut.camelCase("default-"+i)]=t[i]=!0,i}},ut.each(ut.expr.match.bool.source.match(/\w+/g),function(t,i){var n=ut.expr.attrHandle[i]||ut.find.attr;ut.expr.attrHandle[i]=Ot&&Et||!Rt.test(i)?function(t,i,o){var s=ut.expr.attrHandle[i],r=o?e:(ut.expr.attrHandle[i]=e)!=n(t,i,o)?i.toLowerCase():null;return ut.expr.attrHandle[i]=s,r}:function(t,i,n){return n?e:t[ut.camelCase("default-"+i)]?i.toLowerCase():null}}),Ot&&Et||(ut.attrHooks.value={set:function(t,e,i){return ut.nodeName(t,"input")?void(t.defaultValue=e):zt&&zt.set(t,e,i)}}),Et||(zt={set:function(t,i,n){var o=t.getAttributeNode(n);return o||t.setAttributeNode(o=t.ownerDocument.createAttribute(n)),o.value=i+="","value"===n||i===t.getAttribute(n)?i:e}},ut.expr.attrHandle.id=ut.expr.attrHandle.name=ut.expr.attrHandle.coords=function(t,i,n){var o;return n?e:(o=t.getAttributeNode(i))&&""!==o.value?o.value:null},ut.valHooks.button={get:function(t,i){var n=t.getAttributeNode(i);return n&&n.specified?n.value:e},set:zt.set},ut.attrHooks.contenteditable={set:function(t,e,i){zt.set(t,""===e?!1:e,i)}},ut.each(["width","height"],function(t,e){ut.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ut.support.hrefNormalized||ut.each(["href","src"],function(t,e){ut.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ut.support.style||(ut.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),ut.support.optSelected||(ut.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ut.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ut.propFix[this.toLowerCase()]=this}),ut.support.enctype||(ut.propFix.enctype="encoding"),ut.each(["radio","checkbox"],function(){ut.valHooks[this]={set:function(t,e){return ut.isArray(e)?t.checked=ut.inArray(ut(t).val(),e)>=0:void 0}},ut.support.checkOn||(ut.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Nt=/^(?:input|select|textarea)$/i,Ft=/^key/,Lt=/^(?:mouse|contextmenu)|click/,$t=/^(?:focusinfocus|focusoutblur)$/,Ht=/^([^.]*)(?:\.(.+)|)$/;ut.event={global:{},add:function(t,i,n,o,s){var r,a,l,c,u,d,p,h,f,m,g,v=ut._data(t);if(v){for(n.handler&&(c=n,n=c.handler,s=c.selector),n.guid||(n.guid=ut.guid++),(a=v.events)||(a=v.events={}),(d=v.handle)||(d=v.handle=function(t){return typeof ut===G||t&&ut.event.triggered===t.type?e:ut.event.dispatch.apply(d.elem,arguments)},d.elem=t),i=(i||"").match(pt)||[""],l=i.length;l--;)r=Ht.exec(i[l])||[],f=g=r[1],m=(r[2]||"").split(".").sort(),f&&(u=ut.event.special[f]||{},f=(s?u.delegateType:u.bindType)||f,u=ut.event.special[f]||{},p=ut.extend({type:f,origType:g,data:o,handler:n,guid:n.guid,selector:s,needsContext:s&&ut.expr.match.needsContext.test(s),namespace:m.join(".")},c),(h=a[f])||(h=a[f]=[],h.delegateCount=0,u.setup&&u.setup.call(t,o,m,d)!==!1||(t.addEventListener?t.addEventListener(f,d,!1):t.attachEvent&&t.attachEvent("on"+f,d))),u.add&&(u.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),s?h.splice(h.delegateCount++,0,p):h.push(p),ut.event.global[f]=!0);t=null}},remove:function(t,e,i,n,o){var s,r,a,l,c,u,d,p,h,f,m,g=ut.hasData(t)&&ut._data(t);if(g&&(u=g.events)){for(e=(e||"").match(pt)||[""],c=e.length;c--;)if(a=Ht.exec(e[c])||[],h=m=a[1],f=(a[2]||"").split(".").sort(),h){for(d=ut.event.special[h]||{},h=(n?d.delegateType:d.bindType)||h,p=u[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=p.length;s--;)r=p[s],!o&&m!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(p.splice(s,1),r.selector&&p.delegateCount--,d.remove&&d.remove.call(t,r));l&&!p.length&&(d.teardown&&d.teardown.call(t,f,g.handle)!==!1||ut.removeEvent(t,h,g.handle),delete u[h])}else for(h in u)ut.event.remove(t,h+e[c],i,n,!0);ut.isEmptyObject(u)&&(delete g.handle,ut._removeData(t,"events"))}},trigger:function(i,n,o,s){var r,a,l,c,u,d,p,h=[o||Y],f=lt.call(i,"type")?i.type:i,m=lt.call(i,"namespace")?i.namespace.split("."):[];if(l=d=o=o||Y,3!==o.nodeType&&8!==o.nodeType&&!$t.test(f+ut.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),a=f.indexOf(":")<0&&"on"+f,i=i[ut.expando]?i:new ut.Event(f,"object"==typeof i&&i),i.isTrigger=s?2:3,i.namespace=m.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=e,i.target||(i.target=o),n=null==n?[i]:ut.makeArray(n,[i]),u=ut.event.special[f]||{},s||!u.trigger||u.trigger.apply(o,n)!==!1)){if(!s&&!u.noBubble&&!ut.isWindow(o)){for(c=u.delegateType||f,$t.test(c+f)||(l=l.parentNode);l;l=l.parentNode)h.push(l),d=l;d===(o.ownerDocument||Y)&&h.push(d.defaultView||d.parentWindow||t)}for(p=0;(l=h[p++])&&!i.isPropagationStopped();)i.type=p>1?c:u.bindType||f,r=(ut._data(l,"events")||{})[i.type]&&ut._data(l,"handle"),r&&r.apply(l,n),r=a&&l[a],r&&ut.acceptData(l)&&r.apply&&r.apply(l,n)===!1&&i.preventDefault();if(i.type=f,!s&&!i.isDefaultPrevented()&&(!u._default||u._default.apply(h.pop(),n)===!1)&&ut.acceptData(o)&&a&&o[f]&&!ut.isWindow(o)){d=o[a],d&&(o[a]=null),ut.event.triggered=f;try{o[f]()}catch(g){}ut.event.triggered=e,d&&(o[a]=d)}return i.result}},dispatch:function(t){t=ut.event.fix(t);var i,n,o,s,r,a=[],l=st.call(arguments),c=(ut._data(this,"events")||{})[t.type]||[],u=ut.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=ut.event.handlers.call(this,t,c),i=0;(s=a[i++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,r=0;(o=s.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,n=((ut.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,l),n!==e&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,i){var n,o,s,r,a=[],l=i.delegateCount,c=t.target;if(l&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==t.type)){for(s=[],r=0;l>r;r++)o=i[r],n=o.selector+" ",s[n]===e&&(s[n]=o.needsContext?ut(n,this).index(c)>=0:ut.find(n,this,null,[c]).length),s[n]&&s.push(o);s.length&&a.push({elem:c,handlers:s})}return l<i.length&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(t){if(t[ut.expando])return t;var e,i,n,o=t.type,s=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Lt.test(o)?this.mouseHooks:Ft.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new ut.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=s.srcElement||Y),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,o,s,r=i.button,a=i.fromElement;return null==t.pageX&&null!=i.clientX&&(o=t.target.ownerDocument||Y,s=o.documentElement,n=o.body,t.pageX=i.clientX+(s&&s.scrollLeft||n&&n.scrollLeft||0)-(s&&s.clientLeft||n&&n.clientLeft||0),t.pageY=i.clientY+(s&&s.scrollTop||n&&n.scrollTop||0)-(s&&s.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?i.toElement:a),t.which||r===e||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ut.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return ut.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=ut.extend(new ut.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?ut.event.trigger(o,null,e):ut.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},ut.removeEvent=Y.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===G&&(t[n]=null),t.detachEvent(n,i))},ut.Event=function(t,e){return this instanceof ut.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?l:c):this.type=t,e&&ut.extend(this,e),this.timeStamp=t&&t.timeStamp||ut.now(),void(this[ut.expando]=!0)):new ut.Event(t,e)},ut.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ut.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ut.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,s=t.handleObj;return(!o||o!==n&&!ut.contains(n,o))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),ut.support.submitBubbles||(ut.event.special.submit={setup:function(){return ut.nodeName(this,"form")?!1:void ut.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,n=ut.nodeName(i,"input")||ut.nodeName(i,"button")?i.form:e;n&&!ut._data(n,"submitBubbles")&&(ut.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),ut._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ut.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ut.nodeName(this,"form")?!1:void ut.event.remove(this,"._submit")}}),ut.support.changeBubbles||(ut.event.special.change={setup:function(){return Nt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ut.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ut.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ut.event.simulate("change",this,t,!0)})),!1):void ut.event.add(this,"beforeactivate._change",function(t){var e=t.target;Nt.test(e.nodeName)&&!ut._data(e,"changeBubbles")&&(ut.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ut.event.simulate("change",this.parentNode,t,!0)}),ut._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ut.event.remove(this,"._change"),!Nt.test(this.nodeName)}}),ut.support.focusinBubbles||ut.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){ut.event.simulate(e,t.target,ut.event.fix(t),!0)};ut.event.special[e]={setup:function(){0===i++&&Y.addEventListener(t,n,!0)},teardown:function(){0===--i&&Y.removeEventListener(t,n,!0)}}}),ut.fn.extend({on:function(t,i,n,o,s){var r,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=e);for(r in t)this.on(r,i,n,t[r],s);return this}if(null==n&&null==o?(o=i,n=i=e):null==o&&("string"==typeof i?(o=n,n=e):(o=n,n=i,i=e)),o===!1)o=c;else if(!o)return this;return 1===s&&(a=o,o=function(t){return ut().off(t),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ut.guid++)),this.each(function(){ut.event.add(this,t,o,n,i)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,i,n){var o,s;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,ut(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(s in t)this.off(s,i,t[s]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=c),this.each(function(){ut.event.remove(this,t,n,i)})},trigger:function(t,e){return this.each(function(){ut.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?ut.event.trigger(t,e,i,!0):void 0}});var jt=/^.[^:#\[\.,]*$/,Vt=/^(?:parents|prev(?:Until|All))/,Kt=ut.expr.match.needsContext,Bt={children:!0,contents:!0,next:!0,prev:!0};ut.fn.extend({find:function(t){var e,i=[],n=this,o=n.length;if("string"!=typeof t)return this.pushStack(ut(t).filter(function(){for(e=0;o>e;e++)if(ut.contains(n[e],this))return!0}));for(e=0;o>e;e++)ut.find(t,n[e],i);return i=this.pushStack(o>1?ut.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},has:function(t){var e,i=ut(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(ut.contains(this,i[e]))return!0})},not:function(t){return this.pushStack(p(this,t||[],!0))},filter:function(t){return this.pushStack(p(this,t||[],!1))},is:function(t){return!!p(this,"string"==typeof t&&Kt.test(t)?ut(t):t||[],!1).length},closest:function(t,e){for(var i,n=0,o=this.length,s=[],r=Kt.test(t)||"string"!=typeof t?ut(t,e||this.context):0;o>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ut.find.matchesSelector(i,t))){i=s.push(i);break}return this.pushStack(s.length>1?ut.unique(s):s)},index:function(t){return t?"string"==typeof t?ut.inArray(this[0],ut(t)):ut.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var i="string"==typeof t?ut(t,e):ut.makeArray(t&&t.nodeType?[t]:t),n=ut.merge(this.get(),i);return this.pushStack(ut.unique(n))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ut.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ut.dir(t,"parentNode")},parentsUntil:function(t,e,i){return ut.dir(t,"parentNode",i)},next:function(t){return d(t,"nextSibling")},prev:function(t){return d(t,"previousSibling")},nextAll:function(t){return ut.dir(t,"nextSibling")},prevAll:function(t){return ut.dir(t,"previousSibling")},nextUntil:function(t,e,i){return ut.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return ut.dir(t,"previousSibling",i)},siblings:function(t){return ut.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ut.sibling(t.firstChild)},contents:function(t){return ut.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ut.merge([],t.childNodes)}},function(t,e){ut.fn[t]=function(i,n){var o=ut.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ut.filter(n,o)),this.length>1&&(Bt[t]||(o=ut.unique(o)),Vt.test(t)&&(o=o.reverse())),this.pushStack(o)}}),ut.extend({filter:function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ut.find.matchesSelector(n,t)?[n]:[]:ut.find.matches(t,ut.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,i,n){for(var o=[],s=t[i];s&&9!==s.nodeType&&(n===e||1!==s.nodeType||!ut(s).is(n));)1===s.nodeType&&o.push(s),s=s[i];return o},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var Wt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ut=/ jQuery\d+="(?:null|\d+)"/g,Gt=new RegExp("<(?:"+Wt+")[\\s/>]","i"),Qt=/^\s+/,Yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Xt=/<([\w:]+)/,Jt=/<tbody/i,Zt=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ee=/^(?:checkbox|radio)$/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^$|\/(?:java|ecma)script/i,oe=/^true\/(.*)/,se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,re={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ut.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ae=h(Y),le=ae.appendChild(Y.createElement("div"));re.optgroup=re.option,re.tbody=re.tfoot=re.colgroup=re.caption=re.thead,re.th=re.td,ut.fn.extend({text:function(t){return ut.access(this,function(t){return t===e?ut.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?ut.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||ut.cleanData(b(i)),i.parentNode&&(e&&ut.contains(i.ownerDocument,i)&&v(b(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ut.cleanData(b(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ut.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ut.clone(this,t,e)})},html:function(t){return ut.access(this,function(t){var i=this[0]||{},n=0,o=this.length;if(t===e)return 1===i.nodeType?i.innerHTML.replace(Ut,""):e;if("string"==typeof t&&!te.test(t)&&(ut.support.htmlSerialize||!Gt.test(t))&&(ut.support.leadingWhitespace||!Qt.test(t))&&!re[(Xt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Yt,"<$1></$2>");try{for(;o>n;n++)i=this[n]||{},1===i.nodeType&&(ut.cleanData(b(i,!1)),i.innerHTML=t);i=0}catch(s){}}i&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=ut.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(i){var n=t[e++],o=t[e++];o&&(n&&n.parentNode!==o&&(n=this.nextSibling),ut(this).remove(),o.insertBefore(i,n))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,i){t=nt.apply([],t);var n,o,s,r,a,l,c=0,u=this.length,d=this,p=u-1,h=t[0],f=ut.isFunction(h);if(f||!(1>=u||"string"!=typeof h||ut.support.checkClone)&&ie.test(h))return this.each(function(n){var o=d.eq(n);f&&(t[0]=h.call(this,n,o.html())),o.domManip(t,e,i)});if(u&&(l=ut.buildFragment(t,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(r=ut.map(b(l,"script"),m),s=r.length;u>c;c++)o=l,c!==p&&(o=ut.clone(o,!0,!0),s&&ut.merge(r,b(o,"script"))),e.call(this[c],o,c);if(s)for(a=r[r.length-1].ownerDocument,ut.map(r,g),c=0;s>c;c++)o=r[c],ne.test(o.type||"")&&!ut._data(o,"globalEval")&&ut.contains(a,o)&&(o.src?ut._evalUrl(o.src):ut.globalEval((o.text||o.textContent||o.innerHTML||"").replace(se,"")));l=n=null}return this}}),ut.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ut.fn[t]=function(t){for(var i,n=0,o=[],s=ut(t),r=s.length-1;r>=n;n++)i=n===r?this:this.clone(!0),
ut(s[n])[e](i),ot.apply(o,i.get());return this.pushStack(o)}}),ut.extend({clone:function(t,e,i){var n,o,s,r,a,l=ut.contains(t.ownerDocument,t);if(ut.support.html5Clone||ut.isXMLDoc(t)||!Gt.test("<"+t.nodeName+">")?s=t.cloneNode(!0):(le.innerHTML=t.outerHTML,le.removeChild(s=le.firstChild)),!(ut.support.noCloneEvent&&ut.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ut.isXMLDoc(t)))for(n=b(s),a=b(t),r=0;null!=(o=a[r]);++r)n[r]&&_(o,n[r]);if(e)if(i)for(a=a||b(t),n=n||b(s),r=0;null!=(o=a[r]);r++)y(o,n[r]);else y(t,s);return n=b(s,"script"),n.length>0&&v(n,!l&&b(t,"script")),n=a=o=null,s},buildFragment:function(t,e,i,n){for(var o,s,r,a,l,c,u,d=t.length,p=h(e),f=[],m=0;d>m;m++)if(s=t[m],s||0===s)if("object"===ut.type(s))ut.merge(f,s.nodeType?[s]:s);else if(Zt.test(s)){for(a=a||p.appendChild(e.createElement("div")),l=(Xt.exec(s)||["",""])[1].toLowerCase(),u=re[l]||re._default,a.innerHTML=u[1]+s.replace(Yt,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!ut.support.leadingWhitespace&&Qt.test(s)&&f.push(e.createTextNode(Qt.exec(s)[0])),!ut.support.tbody)for(s="table"!==l||Jt.test(s)?"<table>"!==u[1]||Jt.test(s)?0:a:a.firstChild,o=s&&s.childNodes.length;o--;)ut.nodeName(c=s.childNodes[o],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(ut.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else f.push(e.createTextNode(s));for(a&&p.removeChild(a),ut.support.appendChecked||ut.grep(b(f,"input"),w),m=0;s=f[m++];)if((!n||-1===ut.inArray(s,n))&&(r=ut.contains(s.ownerDocument,s),a=b(p.appendChild(s),"script"),r&&v(a),i))for(o=0;s=a[o++];)ne.test(s.type||"")&&i.push(s);return a=null,p},cleanData:function(t,e){for(var i,n,o,s,r=0,a=ut.expando,l=ut.cache,c=ut.support.deleteExpando,u=ut.event.special;null!=(i=t[r]);r++)if((e||ut.acceptData(i))&&(o=i[a],s=o&&l[o])){if(s.events)for(n in s.events)u[n]?ut.event.remove(i,n):ut.removeEvent(i,n,s.handle);l[o]&&(delete l[o],c?delete i[a]:typeof i.removeAttribute!==G?i.removeAttribute(a):i[a]=null,et.push(o))}},_evalUrl:function(t){return ut.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ut.fn.extend({wrapAll:function(t){if(ut.isFunction(t))return this.each(function(e){ut(this).wrapAll(t.call(this,e))});if(this[0]){var e=ut(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ut.isFunction(t)?this.each(function(e){ut(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ut(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ut.isFunction(t);return this.each(function(i){ut(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ut.nodeName(this,"body")||ut(this).replaceWith(this.childNodes)}).end()}});var ce,ue,de,pe=/alpha\([^)]*\)/i,he=/opacity\s*=\s*([^)]*)/,fe=/^(top|right|bottom|left)$/,me=/^(none|table(?!-c[ea]).+)/,ge=/^margin/,ve=new RegExp("^("+dt+")(.*)$","i"),ye=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),_e=new RegExp("^([+-])=("+dt+")","i"),be={BODY:"block"},we={position:"absolute",visibility:"hidden",display:"block"},xe={letterSpacing:0,fontWeight:400},Ce=["Top","Right","Bottom","Left"],ke=["Webkit","O","Moz","ms"];ut.fn.extend({css:function(t,i){return ut.access(this,function(t,i,n){var o,s,r={},a=0;if(ut.isArray(i)){for(s=ue(t),o=i.length;o>a;a++)r[i[a]]=ut.css(t,i[a],!1,s);return r}return n!==e?ut.style(t,i,n):ut.css(t,i)},t,i,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){C(this)?ut(this).show():ut(this).hide()})}}),ut.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=de(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ut.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,a,l=ut.camelCase(i),c=t.style;if(i=ut.cssProps[l]||(ut.cssProps[l]=x(c,l)),a=ut.cssHooks[i]||ut.cssHooks[l],n===e)return a&&"get"in a&&(s=a.get(t,!1,o))!==e?s:c[i];if(r=typeof n,"string"===r&&(s=_e.exec(n))&&(n=(s[1]+1)*s[2]+parseFloat(ut.css(t,i)),r="number"),!(null==n||"number"===r&&isNaN(n)||("number"!==r||ut.cssNumber[l]||(n+="px"),ut.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),a&&"set"in a&&(n=a.set(t,n,o))===e)))try{c[i]=n}catch(u){}}},css:function(t,i,n,o){var s,r,a,l=ut.camelCase(i);return i=ut.cssProps[l]||(ut.cssProps[l]=x(t.style,l)),a=ut.cssHooks[i]||ut.cssHooks[l],a&&"get"in a&&(r=a.get(t,!0,n)),r===e&&(r=de(t,i,o)),"normal"===r&&i in xe&&(r=xe[i]),""===n||n?(s=parseFloat(r),n===!0||ut.isNumeric(s)?s||0:r):r}}),t.getComputedStyle?(ue=function(e){return t.getComputedStyle(e,null)},de=function(t,i,n){var o,s,r,a=n||ue(t),l=a?a.getPropertyValue(i)||a[i]:e,c=t.style;return a&&(""!==l||ut.contains(t.ownerDocument,t)||(l=ut.style(t,i)),ye.test(l)&&ge.test(i)&&(o=c.width,s=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=o,c.minWidth=s,c.maxWidth=r)),l}):Y.documentElement.currentStyle&&(ue=function(t){return t.currentStyle},de=function(t,i,n){var o,s,r,a=n||ue(t),l=a?a[i]:e,c=t.style;return null==l&&c&&c[i]&&(l=c[i]),ye.test(l)&&!fe.test(i)&&(o=c.left,s=t.runtimeStyle,r=s&&s.left,r&&(s.left=t.currentStyle.left),c.left="fontSize"===i?"1em":l,l=c.pixelLeft+"px",c.left=o,r&&(s.left=r)),""===l?"auto":l}),ut.each(["height","width"],function(t,e){ut.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&me.test(ut.css(t,"display"))?ut.swap(t,we,function(){return M(t,e,n)}):M(t,e,n):void 0},set:function(t,i,n){var o=n&&ue(t);return S(t,i,n?T(t,e,n,ut.support.boxSizing&&"border-box"===ut.css(t,"boxSizing",!1,o),o):0)}}}),ut.support.opacity||(ut.cssHooks.opacity={get:function(t,e){return he.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,o=ut.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ut.trim(s.replace(pe,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=pe.test(s)?s.replace(pe,o):s+" "+o)}}),ut(function(){ut.support.reliableMarginRight||(ut.cssHooks.marginRight={get:function(t,e){return e?ut.swap(t,{display:"inline-block"},de,[t,"marginRight"]):void 0}}),!ut.support.pixelPosition&&ut.fn.position&&ut.each(["top","left"],function(t,e){ut.cssHooks[e]={get:function(t,i){return i?(i=de(t,e),ye.test(i)?ut(t).position()[e]+"px":i):void 0}}})}),ut.expr&&ut.expr.filters&&(ut.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ut.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ut.css(t,"display"))},ut.expr.filters.visible=function(t){return!ut.expr.filters.hidden(t)}),ut.each({margin:"",padding:"",border:"Width"},function(t,e){ut.cssHooks[t+e]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];4>n;n++)o[t+Ce[n]+e]=s[n]||s[n-2]||s[0];return o}},ge.test(t)||(ut.cssHooks[t+e].set=S)});var Se=/%20/g,Te=/\[\]$/,Me=/\r?\n/g,ze=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;ut.fn.extend({serialize:function(){return ut.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ut.prop(this,"elements");return t?ut.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ut(this).is(":disabled")&&De.test(this.nodeName)&&!ze.test(t)&&(this.checked||!ee.test(t))}).map(function(t,e){var i=ut(this).val();return null==i?null:ut.isArray(i)?ut.map(i,function(t){return{name:e.name,value:t.replace(Me,"\r\n")}}):{name:e.name,value:i.replace(Me,"\r\n")}}).get()}}),ut.param=function(t,i){var n,o=[],s=function(t,e){e=ut.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=ut.ajaxSettings&&ut.ajaxSettings.traditional),ut.isArray(t)||t.jquery&&!ut.isPlainObject(t))ut.each(t,function(){s(this.name,this.value)});else for(n in t)P(n,t[n],i,s);return o.join("&").replace(Se,"+")},ut.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ut.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ut.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Pe,qe,Ae=ut.now(),Ie=/\?/,Re=/#.*$/,Ee=/([?&])_=[^&]*/,Oe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ne=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fe=/^(?:GET|HEAD)$/,Le=/^\/\//,$e=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,He=ut.fn.load,je={},Ve={},Ke="*/".concat("*");try{qe=Q.href}catch(Be){qe=Y.createElement("a"),qe.href="",qe=qe.href}Pe=$e.exec(qe.toLowerCase())||[],ut.fn.load=function(t,i,n){if("string"!=typeof t&&He)return He.apply(this,arguments);var o,s,r,a=this,l=t.indexOf(" ");return l>=0&&(o=t.slice(l,t.length),t=t.slice(0,l)),ut.isFunction(i)?(n=i,i=e):i&&"object"==typeof i&&(r="POST"),a.length>0&&ut.ajax({url:t,type:r,dataType:"html",data:i}).done(function(t){s=arguments,a.html(o?ut("<div>").append(ut.parseHTML(t)).find(o):t)}).complete(n&&function(t,e){a.each(n,s||[t.responseText,e,t])}),this},ut.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ut.fn[e]=function(t){return this.on(e,t)}}),ut.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qe,type:"GET",isLocal:Ne.test(Pe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ut.parseJSON,"text xml":ut.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?I(I(t,ut.ajaxSettings),e):I(ut.ajaxSettings,t)},ajaxPrefilter:q(je),ajaxTransport:q(Ve),ajax:function(t,i){function n(t,i,n,o){var s,d,y,_,w,C=i;2!==b&&(b=2,l&&clearTimeout(l),u=e,a=o||"",x.readyState=t>0?4:0,s=t>=200&&300>t||304===t,n&&(_=R(p,x,n)),_=E(p,_,x,s),s?(p.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ut.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(ut.etag[r]=w)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=_.state,d=_.data,y=_.error,s=!y)):(y=C,(t||!C)&&(C="error",0>t&&(t=0))),x.status=t,x.statusText=(i||C)+"",s?m.resolveWith(h,[d,C,x]):m.rejectWith(h,[x,C,y]),x.statusCode(v),v=e,c&&f.trigger(s?"ajaxSuccess":"ajaxError",[x,p,s?d:y]),g.fireWith(h,[x,C]),c&&(f.trigger("ajaxComplete",[x,p]),--ut.active||ut.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=e),i=i||{};var o,s,r,a,l,c,u,d,p=ut.ajaxSetup({},i),h=p.context||p,f=p.context&&(h.nodeType||h.jquery)?ut(h):ut.event,m=ut.Deferred(),g=ut.Callbacks("once memory"),v=p.statusCode||{},y={},_={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!d)for(d={};e=Oe.exec(a);)d[e[1].toLowerCase()]=e[2];e=d[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=_[i]=_[i]||t,y[t]=e),this},overrideMimeType:function(t){return b||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return u&&u.abort(e),n(0,e),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||qe)+"").replace(Re,"").replace(Le,Pe[1]+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=ut.trim(p.dataType||"*").toLowerCase().match(pt)||[""],null==p.crossDomain&&(o=$e.exec(p.url.toLowerCase()),p.crossDomain=!(!o||o[1]===Pe[1]&&o[2]===Pe[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(Pe[3]||("http:"===Pe[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ut.param(p.data,p.traditional)),A(je,p,i,x),2===b)return x;c=p.global,c&&0===ut.active++&&ut.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Fe.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(Ie.test(r)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Ee.test(r)?r.replace(Ee,"$1_="+Ae++):r+(Ie.test(r)?"&":"?")+"_="+Ae++)),p.ifModified&&(ut.lastModified[r]&&x.setRequestHeader("If-Modified-Since",ut.lastModified[r]),ut.etag[r]&&x.setRequestHeader("If-None-Match",ut.etag[r])),(p.data&&p.hasContent&&p.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ke+"; q=0.01":""):p.accepts["*"]);for(s in p.headers)x.setRequestHeader(s,p.headers[s]);if(p.beforeSend&&(p.beforeSend.call(h,x,p)===!1||2===b))return x.abort();w="abort";for(s in{success:1,error:1,complete:1})x[s](p[s]);if(u=A(Ve,p,i,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},p.timeout));try{b=1,u.send(y,n)}catch(C){if(!(2>b))throw C;n(-1,C)}}else n(-1,"No Transport");return x},getJSON:function(t,e,i){return ut.get(t,e,i,"json")},getScript:function(t,i){return ut.get(t,e,i,"script")}}),ut.each(["get","post"],function(t,i){ut[i]=function(t,n,o,s){return ut.isFunction(n)&&(s=s||o,o=n,n=e),ut.ajax({url:t,type:i,dataType:s,data:n,success:o})}}),ut.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ut.globalEval(t),t}}}),ut.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ut.ajaxTransport("script",function(t){if(t.crossDomain){var i,n=Y.head||ut("head")[0]||Y.documentElement;return{send:function(e,o){i=Y.createElement("script"),i.async=!0,t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||o(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(e,!0)}}}});var We=[],Ue=/(=)\?(?=&|$)|\?\?/;ut.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||ut.expando+"_"+Ae++;return this[t]=!0,t}}),ut.ajaxPrefilter("json jsonp",function(i,n,o){var s,r,a,l=i.jsonp!==!1&&(Ue.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ue.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(s=i.jsonpCallback=ut.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Ue,"$1"+s):i.jsonp!==!1&&(i.url+=(Ie.test(i.url)?"&":"?")+i.jsonp+"="+s),i.converters["script json"]=function(){return a||ut.error(s+" was not called"),a[0]},i.dataTypes[0]="json",r=t[s],t[s]=function(){a=arguments},o.always(function(){t[s]=r,i[s]&&(i.jsonpCallback=n.jsonpCallback,We.push(s)),a&&ut.isFunction(r)&&r(a[0]),a=r=e}),"script"):void 0});var Ge,Qe,Ye=0,Xe=t.ActiveXObject&&function(){var t;for(t in Ge)Ge[t](e,!0)};ut.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&O()||N()}:O,Qe=ut.ajaxSettings.xhr(),ut.support.cors=!!Qe&&"withCredentials"in Qe,Qe=ut.support.ajax=!!Qe,Qe&&ut.ajaxTransport(function(i){if(!i.crossDomain||ut.support.cors){var n;return{send:function(o,s){var r,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(t,o){var a,c,u,d;try{if(n&&(o||4===l.readyState))if(n=e,r&&(l.onreadystatechange=ut.noop,Xe&&delete Ge[r]),o)4!==l.readyState&&l.abort();else{d={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{u=l.statusText}catch(p){u=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(h){o||s(-1,h)}d&&s(a,u,d,c)},i.async?4===l.readyState?setTimeout(n):(r=++Ye,Xe&&(Ge||(Ge={},ut(t).unload(Xe)),Ge[r]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(e,!0)}}}});var Je,Ze,ti=/^(?:toggle|show|hide)$/,ei=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),ii=/queueHooks$/,ni=[j],oi={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=ei.exec(e),s=o&&o[3]||(ut.cssNumber[t]?"":"px"),r=(ut.cssNumber[t]||"px"!==s&&+n)&&ei.exec(ut.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+n||1;do a=a||".5",r/=a,ut.style(i.elem,t,r+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(r=i.start=+r||+n||0,i.unit=s,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};ut.Animation=ut.extend($,{tweener:function(t,e){ut.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;o>n;n++)i=t[n],oi[i]=oi[i]||[],oi[i].unshift(e)},prefilter:function(t,e){e?ni.unshift(t):ni.push(t)}}),ut.Tween=V,V.prototype={constructor:V,init:function(t,e,i,n,o,s){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(ut.cssNumber[i]?"":"px")},cur:function(){var t=V.propHooks[this.prop];return t&&t.get?t.get(this):V.propHooks._default.get(this)},run:function(t){var e,i=V.propHooks[this.prop];return this.options.duration?this.pos=e=ut.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ut.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ut.fx.step[t.prop]?ut.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ut.cssProps[t.prop]]||ut.cssHooks[t.prop])?ut.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ut.each(["toggle","show","hide"],function(t,e){var i=ut.fn[e];ut.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(K(e,!0),t,n,o)}}),ut.fn.extend({fadeTo:function(t,e,i,n){return this.filter(C).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=ut.isEmptyObject(t),s=ut.speed(e,i,n),r=function(){var e=$(this,ut.extend({},t),s);(o||ut._data(this,"finish"))&&e.stop(!0)};return r.finish=r,o||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(t,i,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",s=ut.timers,r=ut._data(this);if(i)r[i]&&r[i].stop&&o(r[i]);else for(i in r)r[i]&&r[i].stop&&ii.test(i)&&o(r[i]);for(i=s.length;i--;)s[i].elem!==this||null!=t&&s[i].queue!==t||(s[i].anim.stop(n),e=!1,s.splice(i,1));(e||!n)&&ut.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ut._data(this),n=i[t+"queue"],o=i[t+"queueHooks"],s=ut.timers,r=n?n.length:0;for(i.finish=!0,ut.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ut.each({slideDown:K("show"),slideUp:K("hide"),slideToggle:K("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ut.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ut.speed=function(t,e,i){var n=t&&"object"==typeof t?ut.extend({},t):{complete:i||!i&&e||ut.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ut.isFunction(e)&&e};return n.duration=ut.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ut.fx.speeds?ut.fx.speeds[n.duration]:ut.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ut.isFunction(n.old)&&n.old.call(this),n.queue&&ut.dequeue(this,n.queue)},n},ut.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ut.timers=[],ut.fx=V.prototype.init,ut.fx.tick=function(){var t,i=ut.timers,n=0;for(Je=ut.now();n<i.length;n++)t=i[n],t()||i[n]!==t||i.splice(n--,1);i.length||ut.fx.stop(),Je=e},ut.fx.timer=function(t){t()&&ut.timers.push(t)&&ut.fx.start()},ut.fx.interval=13,ut.fx.start=function(){Ze||(Ze=setInterval(ut.fx.tick,ut.fx.interval))},ut.fx.stop=function(){clearInterval(Ze),Ze=null},ut.fx.speeds={slow:600,fast:200,_default:400},ut.fx.step={},ut.expr&&ut.expr.filters&&(ut.expr.filters.animated=function(t){return ut.grep(ut.timers,function(e){return t===e.elem}).length}),ut.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){ut.offset.setOffset(this,t,e)});var i,n,o={top:0,left:0},s=this[0],r=s&&s.ownerDocument;if(r)return i=r.documentElement,ut.contains(i,s)?(typeof s.getBoundingClientRect!==G&&(o=s.getBoundingClientRect()),n=B(r),{top:o.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:o.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):o},ut.offset={setOffset:function(t,e,i){var n=ut.css(t,"position");"static"===n&&(t.style.position="relative");var o,s,r=ut(t),a=r.offset(),l=ut.css(t,"top"),c=ut.css(t,"left"),u=("absolute"===n||"fixed"===n)&&ut.inArray("auto",[l,c])>-1,d={},p={};u?(p=r.position(),o=p.top,s=p.left):(o=parseFloat(l)||0,s=parseFloat(c)||0),ut.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+s),"using"in e?e.using.call(t,d):r.css(d)}},ut.fn.extend({position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ut.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ut.nodeName(t[0],"html")||(i=t.offset()),i.top+=ut.css(t[0],"borderTopWidth",!0),i.left+=ut.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ut.css(n,"marginTop",!0),left:e.left-i.left-ut.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||X;t&&!ut.nodeName(t,"html")&&"static"===ut.css(t,"position");)t=t.offsetParent;return t||X})}}),ut.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n=/Y/.test(i);ut.fn[t]=function(o){return ut.access(this,function(t,o,s){var r=B(t);return s===e?r?i in r?r[i]:r.document.documentElement[o]:t[o]:void(r?r.scrollTo(n?ut(r).scrollLeft():s,n?s:ut(r).scrollTop()):t[o]=s)},t,o,arguments.length,null)}}),ut.each({Height:"height",Width:"width"},function(t,i){ut.each({padding:"inner"+t,content:i,"":"outer"+t},function(n,o){ut.fn[o]=function(o,s){var r=arguments.length&&(n||"boolean"!=typeof o),a=n||(o===!0||s===!0?"margin":"border");return ut.access(this,function(i,n,o){var s;return ut.isWindow(i)?i.document.documentElement["client"+t]:9===i.nodeType?(s=i.documentElement,Math.max(i.body["scroll"+t],s["scroll"+t],i.body["offset"+t],s["offset"+t],s["client"+t])):o===e?ut.css(i,n,a):ut.style(i,n,o,a)},i,r?o:e,r,null)}})}),ut.fn.size=function(){return this.length},ut.fn.andSelf=ut.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ut:(t.jQuery=t.$=ut,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ut}))}(window),function(t,e){function i(e,i){var o,s,r,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,s=o.name,e.href&&s&&"map"===o.nodeName.toLowerCase()?(r=t("img[usemap=#"+s+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var o=0,s=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,o,s=t(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(o=parseInt(s.css("zIndex"),10),!isNaN(o)&&0!==o))return o;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(e,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function o(e,i,n,o){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(r,o(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(r,o(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var o,s=t.ui[e].prototype;for(o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(t,e,i){var n,o=t.plugins[e];if(o&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<o.length;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return e[n]>0?!0:(e[n]=1,o=e[n]>0,e[n]=0,o)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(s){}o(e)},t.widget=function(e,i,n){var o,s,r,a,l={},c=e.split(".")[0];e=e.split(".")[1],o=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},s=t[c][e],r=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}()):void(l[e]=n)}),r.prototype=t.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix:e},l,{constructor:r,namespace:c,widgetName:e,widgetFullName:o}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r)},t.widget.extend=function(i){for(var o,s,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(o in r[a])s=r[a][o],r[a].hasOwnProperty(o)&&s!==e&&(t.isPlainObject(s)?i[o]=t.isPlainObject(i[o])?t.widget.extend({},i[o],s):t.widget.extend({},s):i[o]=s);return i},t.widget.bridge=function(i,o){var s=o.prototype.widgetFullName||i;t.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?t.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,o=t.data(this,s);return o?t.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,l),n!==o&&n!==e?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(r||{})._init():t.data(this,s,new o(r,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var o,s,r,a=i;if(0===arguments.length)return t.widget.extend({},this.options);
if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(s=a[i]=t.widget.extend({},this.options[i]),r=0;r<o.length-1;r++)s[o[r]]=s[o[r]]||{},s=s[o[r]];if(i=o.pop(),n===e)return s[i]===e?null:s[i];s[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var o,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,r){function a(){return e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,s,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),r=!t.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){t(this)[e](),s&&s.call(n[0]),i()})}})}(jQuery),function(t,e){var i=!1;t(document).mouseup(function(){i=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,o=1===e.which,s="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return o&&!s&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function o(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var s,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,h=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(s!==e)return s;var i,n,o=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=o.children()[0];return t("body").append(o),i=r.offsetWidth,o.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),s=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,s="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:s?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var s,h,m,g,v,y,_=t(e.of),b=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(b),x=(e.collision||"flip").split(" "),C={};return y=o(_),_[0].preventDefault&&(e.at="left top"),h=y.width,m=y.height,g=y.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",t=d.exec(n[0]),i=d.exec(n[1]),C[this]=[t?t[0]:0,i?i[0]:0],e[this]=[p.exec(n[0])[0],p.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=h:"center"===e.at[0]&&(v.left+=h/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),s=i(C.at,h,m),v.left+=s[0],v.top+=s[1],this.each(function(){var o,c,u=t(this),d=u.outerWidth(),p=u.outerHeight(),f=n(this,"marginLeft"),y=n(this,"marginTop"),k=d+f+n(this,"marginRight")+w.width,S=p+y+n(this,"marginBottom")+w.height,T=t.extend({},v),M=i(C.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?T.left-=d:"center"===e.my[0]&&(T.left-=d/2),"bottom"===e.my[1]?T.top-=p:"center"===e.my[1]&&(T.top-=p/2),T.left+=M[0],T.top+=M[1],t.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),o={marginLeft:f,marginTop:y},t.each(["left","top"],function(i,n){t.ui.position[x[i]]&&t.ui.position[x[i]][n](T,{targetWidth:h,targetHeight:m,elemWidth:d,elemHeight:p,collisionPosition:o,collisionWidth:k,collisionHeight:S,offset:[s[0]+M[0],s[1]+M[1]],my:e.my,at:e.at,within:b,elem:u})}),e.using&&(c=function(t){var i=g.left-T.left,n=i+h-d,o=g.top-T.top,s=o+m-p,l={target:{element:_,left:g.left,top:g.top,width:h,height:m},element:{element:u,left:T.left,top:T.top,width:d,height:p},horizontal:0>n?"left":i>0?"right":"center",vertical:0>s?"top":o>0?"bottom":"middle"};d>h&&a(i+n)<h&&(l.horizontal="center"),p>m&&a(o+s)<m&&(l.vertical="middle"),r(a(i),a(n))>r(a(o),a(s))?l.important="horizontal":l.important="vertical",e.using.call(this,t,l)}),u.offset(t.extend(T,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,c=a+e.collisionWidth-s-o;e.collisionWidth>s?l>0&&0>=c?(i=t.left+l+e.collisionWidth-s-o,t.left+=l-i):c>0&&0>=l?t.left=o:l>c?t.left=o+s-e.collisionWidth:t.left=o:l>0?t.left+=l:c>0?t.left-=c:t.left=r(t.left-a,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,c=a+e.collisionHeight-s-o;e.collisionHeight>s?l>0&&0>=c?(i=t.top+l+e.collisionHeight-s-o,t.top+=l-i):c>0&&0>=l?t.top=o:l>c?t.top=o+s-e.collisionHeight:t.top=o:l>0?t.top+=l:c>0?t.top-=c:t.top=r(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,s=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,d=c+e.collisionWidth-r-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>u?(i=t.left+p+h+f+e.collisionWidth-r-s,(0>i||i<a(u))&&(t.left+=p+h+f)):d>0&&(n=t.left-e.collisionPosition.marginLeft+p+h+f-l,(n>0||a(n)<d)&&(t.left+=p+h+f))},top:function(t,e){var i,n,o=e.within,s=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,d=c+e.collisionHeight-r-l,p="top"===e.my[1],h=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>u?(n=t.top+h+f+m+e.collisionHeight-r-s,t.top+h+f+m>u&&(0>n||n<a(u))&&(t.top+=h+f+m)):d>0&&(i=t.top-e.collisionPosition.marginTop+h+f+m-l,t.top+h+f+m>d&&(i>0||a(i)<d)&&(t.top+=h+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,o,s,r=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)e.style[s]=n[s];e.appendChild(a),i=r||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=t(a).offset().left,t.support.offsetFractions=o>10&&11>o,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=t(o.containment),n=i[0],void(n&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(e){var i,n,o,s,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,c=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o,s=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-r.grid[0]:s+r.grid[0]:s)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("ui-draggable"),o=n.options,s=t.extend({},i,{item:n.element});n.sortables=[],t(o.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,s))})},stop:function(e,i){var n=t(this).data("ui-draggable"),o=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,i){var n=t(this).data("ui-draggable"),o=this;t.each(n.sortables,function(){var s=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(r.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),o=t(this).data("ui-draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),n=i.options,o=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?o=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(o=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?o=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(o=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){var n,o,s,r,a,l,c,u,d,p,h=t(this).data("ui-draggable"),f=h.options,m=f.snapTolerance,g=i.offset.left,v=g+h.helperProportions.width,y=i.offset.top,_=y+h.helperProportions.height;for(d=h.snapElements.length-1;d>=0;d--)a=h.snapElements[d].left,l=a+h.snapElements[d].width,c=h.snapElements[d].top,u=c+h.snapElements[d].height,a-m>v||g>l+m||c-m>_||y>u+m||!t.contains(h.snapElements[d].item.ownerDocument,h.snapElements[d].item)?(h.snapElements[d].snapping&&h.options.snap.release&&h.options.snap.release.call(h.element,e,t.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=Math.abs(c-_)<=m,o=Math.abs(u-y)<=m,s=Math.abs(a-v)<=m,r=Math.abs(l-g)<=m,n&&(i.position.top=h._convertPositionTo("relative",{top:c-h.helperProportions.height,left:0}).top-h.margins.top),o&&(i.position.top=h._convertPositionTo("relative",{top:u,left:0}).top-h.margins.top),s&&(i.position.left=h._convertPositionTo("relative",{top:0,left:a-h.helperProportions.width}).left-h.margins.left),r&&(i.position.left=h._convertPositionTo("relative",{top:0,left:l}).left-h.margins.left)),p=n||o||s||r,"outer"!==f.snapMode&&(n=Math.abs(c-y)<=m,o=Math.abs(u-_)<=m,s=Math.abs(a-g)<=m,r=Math.abs(l-v)<=m,n&&(i.position.top=h._convertPositionTo("relative",{top:c,left:0}).top-h.margins.top),o&&(i.position.top=h._convertPositionTo("relative",{top:u-h.helperProportions.height,left:0}).top-h.margins.top),s&&(i.position.left=h._convertPositionTo("relative",{top:0,left:a}).left-h.margins.left),r&&(i.position.left=h._convertPositionTo("relative",{top:0,left:l-h.helperProportions.width}).left-h.margins.left)),!h.snapElements[d].snapping&&(n||o||s||r||p)&&h.options.snap.snap&&h.options.snap.snap.call(h.element,e,t.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=n||o||s||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,n=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});n.length&&(e=parseInt(t(n[0]).css("zIndex"),10)||0,t(n).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+n.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),o=t(this).data("ui-draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t,e){function i(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];e<i.length;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,o=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){
var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,e,n){if(!e.offset)return!1;var o,s,r=(t.positionAbs||t.position.absolute).left,a=r+t.helperProportions.width,l=(t.positionAbs||t.position.absolute).top,c=l+t.helperProportions.height,u=e.offset.left,d=u+e.proportions.width,p=e.offset.top,h=p+e.proportions.height;switch(n){case"fit":return r>=u&&d>=a&&l>=p&&h>=c;case"intersect":return u<r+t.helperProportions.width/2&&a-t.helperProportions.width/2<d&&p<l+t.helperProportions.height/2&&c-t.helperProportions.height/2<h;case"pointer":return o=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,s=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,i(s,p,e.proportions.height)&&i(o,u,e.proportions.width);case"touch":return(l>=p&&h>=l||c>=p&&h>=c||p>l&&c>h)&&(r>=u&&d>=r||a>=u&&d>=a||u>r&&a>d);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n,o,s=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<s.length;n++)if(!(s[n].options.disabled||e&&!s[n].accept.call(s[n].element[0],e.currentItem||e.element))){for(o=0;o<a.length;o++)if(a[o]===s[n].element[0]){s[n].proportions.height=0;continue t}s[n].visible="none"!==s[n].element.css("display"),s[n].visible&&("mousedown"===r&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions={width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight})}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,s,r=t.ui.intersect(e,this,this.options.tolerance),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===o}),s.length&&(n=t.data(s[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t,e){function i(t){return parseInt(t,10)||0}function n(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,n,o,s,r=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)n=t.trim(e[i]),s="ui-resizable-"+n,o=t("<div class='ui-resizable-handle "+s+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(e){var i,n,o,s;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,s),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(t(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,o=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var n,o,s,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=i(this.helper.css("left")),o=i(this.helper.css("top")),r.containment&&(n+=t(r.containment).scrollLeft()||0,o+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:o},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n=this.helper,o={},s=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=e.pageX-s.left||0,p=e.pageY-s.top||0,h=this._change[r];return h?(i=h.apply(this,[e,d,p]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==c&&(o.width=this.size.width+"px"),this.size.height!==u&&(o.height=this.size.height+"px"),n.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(o)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,n,o,s,r,a,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&t.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,s=n?0:u.sizeDiff.width,r={width:u.helper.width()-s,height:u.helper.height()-o},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(r,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,o,s,r,a=this.options;r={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,o=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),o>r.minHeight&&(r.minHeight=o),i<r.maxWidth&&(r.maxWidth=i),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,o=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===o&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===o&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,o=n(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=n(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=n(t.width)&&e.minWidth&&e.minWidth>t.width,a=n(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),a&&(t.height=e.minHeight),o&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),r&&u&&(t.left=l-e.minWidth),o&&u&&(t.left=l-e.maxWidth),a&&d&&(t.top=c-e.minHeight),s&&d&&(t.top=c-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,o,s=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(o=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);o.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),n=i.options,o=i._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&t.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,o,s,r,a,l,c=t(this).data("ui-resizable"),u=c.options,d=c.element,p=u.containment,h=p instanceof t?p.get(0):/parent/.test(p)?d.parent().get(0):p;h&&(c.containerElement=t(h),/document/.test(p)||p===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(h),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,o){n[t]=i(e.css("padding"+o))}),c.containerOffset=e.offset(),c.containerPosition=e.position(),c.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},o=c.containerOffset,s=c.containerSize.height,r=c.containerSize.width,a=t.ui.hasScroll(h,"left")?h.scrollWidth:r,l=t.ui.hasScroll(h)?h.scrollHeight:s,c.parentData={element:h,left:o.left,top:o.top,width:a,height:l}))},resize:function(e){var i,n,o,s,r=t(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||e.shiftKey,d={top:0,left:0},p=r.containerElement;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-d.left:r.offset.left-d.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-d.top:r.offset.top-l.top)+r.sizeDiff.height),o=r.containerElement.get(0)===r.element.parent().get(0),s=/relative|absolute/.test(r.containerElement.css("position")),o&&s&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.containerOffset,o=e.containerPosition,s=e.containerElement,r=t(e.helper),a=r.offset(),l=r.outerWidth()-e.sizeDiff.width,c=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(s.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(s.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):t.each(i.alsoResize,function(t){n(t)})},resize:function(e,i){var n=t(this).data("ui-resizable"),o=n.options,s=n.originalSize,r=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(e,n){t(e).each(function(){var e=t(this),o=t(this).data("ui-resizable-alsoresize"),s={},r=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,function(t,e){var i=(o[e]||0)+(a[e]||0);i&&i>=0&&(s[e]=i||null)}),e.css(s)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):t.each(o.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size,o=e.originalSize,s=e.originalPosition,r=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,h=o.height+d,f=i.maxWidth&&i.maxWidth<p,m=i.maxHeight&&i.maxHeight<h,g=i.minWidth&&i.minWidth>p,v=i.minHeight&&i.minHeight>h;i.grid=a,g&&(p+=l),v&&(h+=c),f&&(p-=l),m&&(h-=c),/^(se|s|e)$/.test(r)?(e.size.width=p,e.size.height=h):/^(ne)$/.test(r)?(e.size.width=p,e.size.height=h,e.position.top=s.top-d):/^(sw)$/.test(r)?(e.size.width=p,e.size.height=h,e.position.left=s.left-u):(e.size.width=p,e.size.height=h,e.position.top=s.top-d,e.position.left=s.left-u)}})}(jQuery),function(t,e){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,o=t.data(this,"selectable-item");return o?(n=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",e,{selecting:o.element}):i._trigger("unselecting",e,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,s=this.opos[0],r=this.opos[1],a=e.pageX,l=e.pageY;return s>a&&(i=a,a=s,s=i),r>l&&(i=l,l=r,r=i),this.helper.css({left:s,top:r,width:a-s,height:l-r}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===o.tolerance?c=!(i.left>a||i.right<s||i.top>l||i.bottom<r):"fit"===o.tolerance&&(c=i.left>s&&i.right<a&&i.top>r&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t,e){function i(t,e,i){return t>e&&e+i>t}function n(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=null,o=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,s.widgetName+"-item")===s?(n=t(this),!1):void 0}),t.data(e.target,s.widgetName+"-item")===s&&(n=t(e.target)),n&&(!this.options.handle||i||(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(o=!0)}),o))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,i,n){var o,s,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",r.cursor),this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(s)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,o,s,r=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(e.pageY-t(document).scrollTop()<r.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<r.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+r.scrollSpeed)),e.pageX-t(document).scrollLeft()<r.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<r.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+r.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],s=this._intersectsWithPointer(n),s&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],o):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,o=this.placeholder.offset(),s=this.options.axis,r={};s&&"x"!==s||(r.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(r.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=t.left,r=s+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>a&&l>n+c,p="y"===this.options.axis||e+u>s&&r>e+u,h=d&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h:s<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=e&&n,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return o?this.floating?r&&"right"===r||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(t){var e=i(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=i(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:o&&("down"===o&&e||"up"===o&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,o,s,r=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(o=t(l[i]),n=o.length-1;n>=0;n--)s=t.data(o[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&a.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".sortable-box-placeholder"),s]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".sortable-box-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){r.push(this)});return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,o,s,r,a,l,c,u=this.items,d=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(o=t(p[i]),n=o.length-1;n>=0;n--)s=t.data(o[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(d.push([t.isFunction(s.options.items)?s.options.items.call(s.element[0],e,{item:this.currentItem}):t(s.options.items,s.element),s]),this.containers.push(s));for(i=d.length-1;i>=0;i--)for(r=d[i][1],a=d[i][0],n=0,c=a.length;c>n;n++)l=t(a[n]),l.data(this.widgetName+"-item",r),u.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=o.outerWidth(),n.height=o.outerHeight()),s=o.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" sortable-box-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(o)}):"img"===n&&o.attr("src",e.currentItem.attr("src")),o},update:function(t,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var o,s,r,a,l,c,u,d,p,h,f=null,m=null;for(o=this.containers.length-1;o>=0;o--)if(!t.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(f&&t.contains(this.containers[o].element[0],f.element[0]))continue;f=this.containers[o],m=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",e,this._uiHash(this)),this.containers[o].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",e,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,h=f.floating||n(this.currentItem),l=h?"left":"top",c=h?"width":"height",u=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)t.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!h||i(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(d=this.items[s].item.offset()[l],p=!1,Math.abs(d-u)>Math.abs(d+this.items[s][c]-u)&&(p=!0,d+=this.items[s][c]),Math.abs(d-u)<r&&(r=Math.abs(d-u),a=this.items[s],this.direction=p?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(e,a,null,!0):this._rearrange(e,null,this.containers[m].element,!0),this._trigger("change",e,this._uiHash()),this.containers[m]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",e,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],i=t(o.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(e){var i,n,o=this.options,s=e.pageX,r=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/o.grid[1])*o.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/o.grid[0])*o.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i=0,n={},o={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",o.height=o.paddingTop=o.paddingBottom=o.borderTopWidth=o.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,o=this.headers.index(e.target),s=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(t(e.target).attr("tabIndex",-1),t(s).attr("tabIndex",0),s.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var e,n=this.options,o=n.heightStyle,s=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),n=i.attr("id"),o=i.next(),s=o.attr("id");n||(n=r+"-header-"+e,i.attr("id",n)),s||(s=r+"-panel-"+e,o.attr("id",s)),i.attr("aria-controls",s),o.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===o?(e=s.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===o&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,n=this.active,o=t(e.currentTarget),s=o[0]===n[0],r=s&&i.collapsible,a=r?t():o.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:r?t():o,newPanel:a};e.preventDefault(),s&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.headers.index(o),this.active=s?t():o,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),s||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,i){var s,r,a,l=this,c=0,u=t.length&&(!e.length||t.index()<e.index()),d=this.options.animate||{},p=u&&d.down||d,h=function(){l._toggleComplete(i)};return"number"==typeof p&&(a=p),"string"==typeof p&&(r=p),r=r||p.easing||d.easing,a=a||p.duration||d.duration,e.length?t.length?(s=t.show().outerHeight(),e.animate(n,{duration:a,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(o,{duration:a,easing:r,complete:h,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(s-e.outerHeight()-c),c=0)}})):e.animate(n,a,r,h):t.animate(o,a,r,h)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t,e){var i=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,n,o=this.element[0].nodeName.toLowerCase(),s="textarea"===o,r="input"===o;this.isMultiLine=s?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var s=t.ui.keyCode;switch(o.keyCode){case s.PAGE_UP:e=!0,this._move("previousPage",o);break;case s.PAGE_DOWN:e=!0,this._move("nextPage",o);break;case s.UP:e=!0,this._keyEvent("previous",o);break;case s.DOWN:e=!0,this._keyEvent("next",o);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(e=!0,o.preventDefault(),this.menu.select(o));break;case s.TAB:this.menu.active&&this.menu.select(o);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,o){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,e=++i;return function(n){e===i&&t.__response(n),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{
messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t,e){var i,n,o,s,r="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},u=function(e){var i=e.name,n=e.form,o=t([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?t(n).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),o};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,a=this.options,l="checkbox"===this.type||"radio"===this.type,d=l?"":"ui-state-active",p="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===i&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(d)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){e.buttonElement.addClass(p)}).bind("blur"+this.eventNamespace,function(){e.buttonElement.removeClass(p)}),l&&(this.element.bind("change"+this.eventNamespace,function(){s||e.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(s=!1,n=t.pageX,o=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||(n!==t.pageX||o!==t.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||s?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||s)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var i=e.element[0];u(i).not(i).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),i=this,void e.document.one("mouseup",function(){i=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+a+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?u(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(l),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,s=[];n.primary||n.secondary?(this.options.text&&s.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(s.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):s.push("ui-button-text-only"),e.addClass(s.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(s.inline?e.parent()[0]:s.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function o(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var s,r="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return o(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,o,s;n=e.nodeName.toLowerCase(),o="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),s=this._newInst(t(e),o),s.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,s):o&&this._inlineDatepicker(e,s)},_newInst:function(e,i){var o=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:o,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,o,s,r=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[a?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.focus(this._showDatepicker),("button"===n||"both"===n)&&(o=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:s,alt:o,title:o}):t("<button type='button'></button>").addClass(this._triggerClass).html(s?t("<img/>").attr({src:s,alt:o,title:o}):o)),e[a?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,o,s=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,n=0,o=0;o<t.length;o++)t[o].length>i&&(i=t[o].length,n=o);return n},s.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),t.input.attr("size",this._formatDate(t,s).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,s,a){var l,c,u,d,p,h=this._dialogInst;return h||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},t.data(this._dialogInput[0],r,h)),o(h.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(h,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,p=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,u/2-150+p]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,h),this},_destroyDatepicker:function(e){var i,n=t(e),o=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,n,o=t(e),s=t.data(e,r);o.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,o=t(e),s=t.data(e,r);o.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,s){var r,a,l,c,u=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?t.extend({},t.datepicker._defaults):u?"all"===n?t.extend({},u.settings):this._get(u,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=s),void(u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),o(u.settings,r),null!==l&&r.dateFormat!==e&&r.minDate===e&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&r.dateFormat!==e&&r.maxDate===e&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,o,s=t.datepicker._getInst(e.target),r=!0,a=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return o=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",s.dpDiv),o[0]&&t.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,o[0]),i=t.datepicker._get(s,"onSelect"),i?(n=t.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,o=t.datepicker._getInst(e.target);return t.datepicker._get(o,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(o){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,n,s,r,a,l,c;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(i,"beforeShow"),s=n?n.apply(e,[e,i]):{},s!==!1&&(o(i.settings,s),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),a={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),a=t.datepicker._checkOffset(i,a,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,s=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(e),o=n[1],r=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",r*o+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var o=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?o-r:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+s>c&&c>s?Math.abs(s+a):0),i},_findPos:function(e){for(var i,n=this._getInst(e),o=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[o?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,o,s,a=this._curInst;!a||e&&a!==t.data(e,r)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),o=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),n,o):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,s=this._get(a,"onClose"),s&&s.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var o=t(e),s=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(e){var i,n=t(e),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var o=t(e),s=this._getInst(o[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(o)},_selectDay:function(e,i,n,o){var s,r=t(e);t(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(s=this._getInst(r[0]),s.selectedDay=s.currentDay=t("a",o).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,o=t(e),s=this._getInst(o[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),n=this._get(s,"onSelect"),n?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,o,s=this._get(e,"altField");s&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),o=this.formatDate(i,n,this._getFormatConfig(e)),t(s).each(function(){t(this).val(o)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var o,s,r,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,_=!1,b=function(t){var i=o+1<e.length&&e.charAt(o+1)===t;return i&&o++,i},w=function(t){var e=b(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,o=new RegExp("^\\d{1,"+n+"}"),s=i.substring(l).match(o);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},x=function(e,n,o){var s=-1,r=t.map(b(e)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,e){var n=e[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(s=e[0],l+=n.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+l},C=function(){if(i.charAt(l)!==e.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<e.length;o++)if(_)"'"!==e.charAt(o)||b("'")?C():_=!1;else switch(e.charAt(o)){case"d":v=w("d");break;case"D":x("D",d,p);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=x("M",h,f);break;case"y":m=w("y");break;case"@":a=new Date(w("@")),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":b("'")?C():_=!0;break;default:C()}if(l<i.length&&(r=i.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(s=this._getDaysInMonth(m,g-1),s>=v)break;g++,v-=s}if(a=this._daylightSavingAdjust(new Date(m,g-1,v)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},c=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},u=function(t,e,i,n){return l(t)?n[e]:i[e]},d="",p=!1;if(e)for(n=0;n<t.length;n++)if(p)"'"!==t.charAt(n)||l("'")?d+=t.charAt(n):p=!1;else switch(t.charAt(n)){case"d":d+=c("d",e.getDate(),2);break;case"D":d+=u("D",e.getDay(),o,s);break;case"o":d+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",e.getMonth()+1,2);break;case"M":d+=u("M",e.getMonth(),r,a);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":p=!0;break;default:d+=t.charAt(n)}return d},_possibleChars:function(t){var e,i="",n=!1,o=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||o("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),s=o,r=this._getFormatConfig(t);try{s=this.parseDate(i,n,r)||o}catch(a){n=e?"":n}t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),t.currentDay=n?s.getDate():0,t.currentMonth=n?s.getMonth():0,t.currentYear=n?s.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var o=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},s=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(n){}for(var o=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=o.getFullYear(),r=o.getMonth(),a=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(c[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(s,r))}c=l.exec(i)}return new Date(s,r,a)},r=null==i||""===i?n:"string"==typeof i?s(i):"number"==typeof i?isNaN(i)?n:o(i):new Date(i.getTime());return r=r&&"Invalid Date"===r.toString()?n:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,o=t.selectedMonth,s=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));
t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),o===t.selectedMonth&&s===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,o,s,r,a,l,c,u,d,p,h,f,m,g,v,y,_,b,w,x,C,k,S,T,M,z,D,P,q,A,I,R,E,O,N,F,L,$=new Date,H=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth(),$.getDate())),j=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),K=this._get(t,"hideIfNoPrevNext"),B=this._get(t,"navigationAsDateFormat"),W=this._getNumberOfMonths(t),U=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),Q=1!==W[0]||1!==W[1],Y=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-U,tt=t.drawYear;if(0>Z&&(Z+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-W[0]*W[1]+1,J.getDate())),e=X&&X>e?X:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)Z--,0>Z&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=B?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-G,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>":K?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>",o=this._get(t,"nextText"),o=B?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,Z+G,1)),this._getFormatConfig(t)):o,s=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+o+"</span></a>":K?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+o+"</span></a>",r=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?Y:H,r=B?this.formatDate(r,a,this._getFormatConfig(t)):r,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=V?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(j?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(j?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(t,"showWeek"),p=this._get(t,"dayNames"),h=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),_=this._getDefaultDate(t),b="",x=0;x<W[0];x++){for(C="",this.maxRows=4,k=0;k<W[1];k++){if(S=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),T=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",W[1]>1)switch(k){case 0:M+=" ui-datepicker-group-first",T=" ui-corner-"+(j?"right":"left");break;case W[1]-1:M+=" ui-datepicker-group-last",T=" ui-corner-"+(j?"left":"right");break;default:M+=" ui-datepicker-group-middle",T=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?j?s:n:"")+(/all|right/.test(T)&&0===x?j?n:s:"")+this._generateMonthYearHeader(t,Z,tt,X,J,x>0||k>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",z=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)D=(w+u)%7,z+="<th"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[D]+"'>"+h[D]+"</span></th>";for(M+=z+"</tr></thead><tbody>",P=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),q=(this._getFirstDayOfMonth(tt,Z)-u+7)%7,A=Math.ceil((q+P)/7),I=Q&&this.maxRows>A?this.maxRows:A,this.maxRows=I,R=this._daylightSavingAdjust(new Date(tt,Z,1-q)),E=0;I>E;E++){for(M+="<tr>",O=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(R)+"</td>":"",w=0;7>w;w++)N=g?g.apply(t.input?t.input[0]:null,[R]):[!0,""],F=R.getMonth()!==Z,L=F&&!y||!N[0]||X&&X>R||J&&R>J,O+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(R.getTime()===S.getTime()&&Z===t.selectedMonth&&t._keyEvent||_.getTime()===R.getTime()&&_.getTime()===S.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+N[1]+(R.getTime()===Y.getTime()?" "+this._currentClass:"")+(R.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+R.getMonth()+"' data-year='"+R.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+R.getDate()+"</span>":"<a class='ui-state-default"+(R.getTime()===H.getTime()?" ui-state-highlight":"")+(R.getTime()===Y.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+R.getDate()+"</a>")+"</td>",R.setDate(R.getDate()+1),R=this._daylightSavingAdjust(R);M+=O+"</tr>"}Z++,Z>11&&(Z=0,tt++),M+="</tbody></table>"+(Q?"</div>"+(W[0]>0&&k===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=M}b+=C}return b+=c,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,i,n,o,s,r,a){var l,c,u,d,p,h,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(s||!g)b+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=n.getMonth())&&(!c||u<=o.getMonth())&&(b+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");b+="</select>"}if(y||(_+=b+(!s&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",s||!v)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(t,"yearRange").split(":"),p=(new Date).getFullYear(),h=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?p+parseInt(t,10):parseInt(t,10);return isNaN(e)?p:e},f=h(d[0]),m=Math.max(f,h(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",_+=t.yearshtml,t.yearshtml=null}return _+=this._get(t,"yearSuffix"),y&&(_+=(!s&&g&&v?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),o=t.drawMonth+("M"===i?e:0),s=Math.min(t.selectedDay,this._getDaysInMonth(n,o))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,o,s)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=i&&i>e?i:e;return n&&o>n?n:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var o=this._getNumberOfMonths(t),s=this._daylightSavingAdjust(new Date(i,n+(0>e?e:o[0]*o[1]),1));return 0>e&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(t,s)},_isInRange:function(t,e){var i,n,o=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),r=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||e.getTime()>=o.getTime())&&(!s||e.getTime()<=s.getTime())&&(!r||e.getFullYear()>=r)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t,e){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");e.target!==o[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(o.focus(1),e.preventDefault()):(n.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,n){var o,s;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(e.element[0],arguments)},s={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,t("<button></button>",n).button(s).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,e(o))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(o,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,e(s))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=this.options,o=n.resizable,s=this.uiDialog.css("position"),r="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,o){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,e(o))},resize:function(t,n){i._trigger("resize",t,e(n))},stop:function(o,s){n.height=t(this).height(),n.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,e(s))}}).css("position",s)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var o=this,s=!1,r={};t.each(e,function(t,e){o._setOption(t,e),t in i&&(s=!0),t in n&&(r[t]=e)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,e){var i,n,o=this.uiDialog;"dialogClass"===t&&o.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=o.is(":data(ui-draggable)"),i&&!e&&o.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(n=o.is(":data(ui-resizable)"),n&&!e&&o.resizable("destroy"),n&&"string"==typeof e&&o.resizable("option","handles",e),n||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){e._allowInteraction(n)||(n.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,n=[],o=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),t.each(["left","top"],function(t,e){+n[t]===n[t]&&(o[t]=n[t],n[t]=e)}),i={my:n[0]+(o[0]<0?o[0]:"+"+o[0])+" "+n[1]+(o[1]<0?o[1]:"+"+o[1]),at:n.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t,e){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,o,s,r,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,o=this.previousFilter||"",s=String.fromCharCode(e.keyCode),r=!1,clearTimeout(this.filterTimer),s===o?r=!0:s=o+s,a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(e.keyCode),a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),n.length?(this.focus(e,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev("a"),o=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(o),e.attr("aria-labelledby",n.attr("id"))}),e=n.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,o,s,r,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=e.height(),0>o?this.activeMenu.scrollTop(s+o):o+a>r&&this.activeMenu.scrollTop(s+o-r+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n-o<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,n,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+o>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),
this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t,e){var i=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),e=o.length;i>e;e++)r.push(s);this.handles=o.add(t(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,o,s,r,a,l,c,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-u.values(e));(o>i||o===i&&(e===u._lastChangedValue||u.values(e)===d.min))&&(o=i,s=t(this),r=e)}),a=this._start(e,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,s.addClass("ui-state-active").focus(),l=s.offset(),c=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:e.pageX-l.left-s.width()/2,top:e.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o,s;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),s=this._valueMin()+n*o,this._trimAlignValue(s)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,o,s;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(o=this.values(),o[e]=i,s=this._trigger("slide",t,{handle:this.handles[e],value:i,values:o}),n=this.values(e?0:1),s!==!1&&this.values(e,i,!0))):i!==this.value()&&(s=this._trigger("slide",t,{handle:this.handles[e],value:i}),s!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,o,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,o=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(o[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,i){var n,o=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,o,s,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),o=this._valueMin(),s=this._valueMax(),i=s!==o?(n-o)/(s-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(e){var n,o,s,r,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),n=this._start(e,a),n===!1))return}switch(r=this.options.step,o=s=this.options.values&&this.options.values.length?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/i);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/i);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(o===this._valueMax())return;s=this._trimAlignValue(o+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(o===this._valueMin())return;s=this._trimAlignValue(o-r)}this._slide(e,a,s)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,n){var o=i.attr(n);void 0!==o&&o.length&&(e[n]=o)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return e=null!==n.min?n.min:0,i=t-e,i=Math.round(i/n.step)*n.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++o}function n(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var o=0,s=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(i.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each(function(i,o){return t(o).attr("aria-controls")===n?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=this.tabs.length?0:!1)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=i?!1:0)),!i&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n===this.options.active?!1:n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),e.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function n(){return e>o&&(e=0),0>e&&(e=o),e}for(var o=this.tabs.length-1;-1!==t.inArray(n(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){return"active"===t?void this._activate(e):"disabled"===t?void this._setupDisabled(e):(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,o){var s,r,a,l=t(o).uniqueId().attr("id"),c=t(o).closest("li"),u=c.attr("aria-controls");n(o)?(s=o.hash,r=e.element.find(e._sanitizeSelector(s))):(a=e._tabId(c),s="#"+a,r=e.element.find(s),r.length||(r=e._createPanel(a),r.insertAfter(e.panels[i-1]||e.tablist)),r.attr("aria-live","polite")),r.length&&(e.panels=e.panels.add(r)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)e===!0||-1!==t.inArray(n,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,o=t(e.currentTarget),s=o.closest("li"),r=s[0]===n[0],a=r&&i.collapsible,l=a?t():this._getPanelForTab(s),c=n.length?this._getPanelForTab(n):t(),u={oldTab:n,oldPanel:c,newTab:a?t():s,newPanel:l};e.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",e,u)===!1||(i.active=a?!1:this.tabs.index(s),this.active=r?t():s,this.xhr&&this.xhr.abort(),c.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),e),this._toggle(e,u))},_toggle:function(e,i){function n(){s.running=!1,s._trigger("activate",e,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.options.show?s._show(r,s.options.show,n):(r.show(),n())}var s=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===e?n=!1:(i=this._getIndex(i),n=t.isArray(n)?t.map(n,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===e)n=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,n))return;n=t.isArray(n)?t.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(e,i){e=this._getIndex(e);var o=this,s=this.tabs.eq(e),r=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),l={tab:s,panel:a};n(r[0])||(this.xhr=t.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){a.html(t),o._trigger("load",i,l)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&o.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===o.xhr&&delete o.xhr},1)})))},_ajaxSettings:function(e,i,n){var o=this;return{url:e.attr("href"),beforeSend:function(e,s){return o._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:s},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){function e(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),o=t.inArray(i,n);-1!==o&&n.splice(o,1),e.removeData("ui-tooltip-id"),n=t.trim(n.join(" ")),n?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}var n=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var n=this;return"disabled"===e?(this[i?"_disable":"_enable"](),void(this.options[e]=i)):(this._super(e,i),void("content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e)})))},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var o=t.Event("blur");o.target=o.currentTarget=n[0],e.close(o,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,o=this,s=e?e.type:null;return"string"==typeof n?this._open(e,t,n):(i=n.call(t[0],function(i){t.data("ui-tooltip-open")&&o._delay(function(){e&&(e.type=s),this._open(e,t,i)})}),void(i&&this._open(e,t,i)))},_open:function(i,n,o){function s(t){c.of=t,r.is(":hidden")||r.position(c)}var r,a,l,c=t.extend({},this.options.position);
if(o){if(r=this._find(n),r.length)return void r.find(".ui-tooltip-content").html(o);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),e(n,r.attr("id")),r.find(".ui-tooltip-content").html(o),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:s}),s(i)):r.position(t.extend({of:n},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){r.is(":visible")&&(s(c.of),clearInterval(l))},t.fx.interval)),this._trigger("open",i,{tooltip:r}),a={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(r)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(e){var n=this,o=t(e?e.currentTarget:this.element),s=this._find(o);this.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title")),i(o),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(t(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:s}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+n++,o=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(o),o.appendTo(this.document[0].body),this.tooltips[i]=e,o},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var o=t.Event("blur");o.target=o.currentTarget=n[0],e.close(o,!0),t("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var n=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function n(e){var i=c(),n=i._rgba=[];return e=e.toLowerCase(),f(l,function(t,o){var s,r=o.re.exec(e),a=r&&o.parse(r),l=o.space||"rgba";return a?(s=i[l](a),i[u[l].cache]=s[u[l].cache],n=i._rgba=s._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&t.extend(n,s.transparent),i):s[e]}function o(t,e,i){return i=(i+1)%1,1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t}var s,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=t.Color=function(e,i,n,o){return new t.Color.fn.parse(e,i,n,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=c.support={},h=t("<p>")[0],f=t.each;h.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=h.style.backgroundColor.indexOf("rgba")>-1,f(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(o,r,a,l){if(o===e)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(r),r=e);var d=this,p=t.type(o),h=this._rgba=[];return r!==e&&(o=[o,r,a,l],p="array"),"string"===p?this.parse(n(o)||s._default):"array"===p?(f(u.rgba.props,function(t,e){h[e.idx]=i(o[e.idx],e)}),this):"object"===p?(o instanceof c?f(u,function(t,e){o[e.cache]&&(d[e.cache]=o[e.cache].slice())}):f(u,function(e,n){var s=n.cache;f(n.props,function(t,e){if(!d[s]&&n.to){if("alpha"===t||null==o[t])return;d[s]=n.to(d._rgba)}d[s][e.idx]=i(o[t],e,!0)}),d[s]&&t.inArray(null,d[s].slice(0,3))<0&&(d[s][3]=1,n.from&&(d._rgba=n.from(d[s])))}),this):void 0},is:function(t){var e=c(t),i=!0,n=this;return f(u,function(t,o){var s,r=e[o.cache];return r&&(s=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,e){return null!=r[e.idx]?i=r[e.idx]===s[e.idx]:void 0})),i}),i},_space:function(){var t=[],e=this;return f(u,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=c(t),o=n._space(),s=u[o],r=0===this.alpha()?c("transparent"):this,a=r[s.cache]||s.to(r._rgba),l=a.slice();return n=n[s.cache],f(s.props,function(t,o){var s=o.idx,r=a[s],c=n[s],u=d[o.type]||{};null!==c&&(null===r?l[s]=c:(u.mod&&(c-r>u.mod/2?r+=u.mod:r-c>u.mod/2&&(r-=u.mod)),l[s]=i((c-r)*e+r,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(e)._rgba;return c(t.map(i,function(t,e){return(1-n)*o[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,s=t[2]/255,r=t[3],a=Math.max(n,o,s),l=Math.min(n,o,s),c=a-l,u=a+l,d=.5*u;return e=l===a?0:n===a?60*(o-s)/c+360:o===a?60*(s-n)/c+120:60*(n-o)/c+240,i=0===c?0:.5>=d?c/u:c/(2-u),[Math.round(e)%360,i,d,null==r?1:r]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],s=t[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*o(a,r,e+1/3)),Math.round(255*o(a,r,e)),Math.round(255*o(a,r,e-1/3)),s]},f(u,function(n,o){var s=o.props,r=o.cache,l=o.to,u=o.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===e)return this[r].slice();var o,a=t.type(n),d="array"===a||"object"===a?n:arguments,p=this[r].slice();return f(s,function(t,e){var n=d["object"===a?t:e.idx];null==n&&(n=p[e.idx]),p[e.idx]=i(n,e)}),u?(o=c(u(p)),o[r]=p,o):c(p)},f(s,function(e,i){c.fn[e]||(c.fn[e]=function(o){var s,r=t.type(o),l="alpha"===e?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===r?u:("function"===r&&(o=o.call(this,u),r=t.type(o)),null==o&&i.empty?this:("string"===r&&(s=a.exec(o),s&&(o=u+parseFloat(s[2])*("+"===s[1]?1:-1))),c[i.idx]=o,this[l](c)))})})}),c.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,o){var s,r,a="";if("transparent"!==o&&("string"!==t.type(o)||(s=n(o)))){if(o=c(s||o),!p.rgba&&1!==o._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&r&&r.style;)try{a=t.css(r,"backgroundColor"),r=r.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[i]=o}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=c(e.elem,i),e.end=c(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},c.hook(r),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},s=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,n,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,s={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(s[t.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(s[i]=o[i]);return s}function n(e,i){var n,o,r={};for(n in i)o=i[n],e[n]!==o&&(s[n]||(t.fx.step[n]||!isNaN(parseFloat(o)))&&(r[n]=o));return r}var o=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,s,r,a){var l=t.speed(s,r,a);return this.queue(function(){var s,r=t(this),a=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var e=t(this);return{el:e,start:i(this)}}),s=function(){t.each(o,function(t,i){e[i]&&r[i+"Class"](e[i])})},s(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,c.get()).done(function(){s(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(r[0])})})},t.fn.extend({addClass:function(e){return function(i,n,o,s){return n?t.effects.animateClass.call(this,{add:i},n,o,s):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,o,s){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,o,s):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(n,o,s,r,a){return"boolean"==typeof o||o===e?s?t.effects.animateClass.call(this,o?{add:n}:{remove:n},s,r,a):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},o,s,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,o,s){return t.effects.animateClass.call(this,{add:i,remove:e},n,o,s)}})}(),function(){function n(e,i,n,o){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(o=n,n=i,i={}),t.isFunction(n)&&(o=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=o||i.complete,e}function o(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var n=0;n<e.length;n++)null!==e[n]&&t.data(i+e[n],t[0].style[e[n]])},restore:function(t,n){var o,s;for(s=0;s<n.length;s++)null!==n[s]&&(o=t.data(i+n[s]),o===e&&(o=""),t.css(n[s],o))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},s=document.activeElement;try{s.id}catch(r){s=document.body}return e.wrap(n),(e[0]===s||t.contains(e[0],s))&&t(s).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,o){return o=o||{},t.each(i,function(t,i){var s=e.cssUnit(i);s[0]>0&&(o[i]=s[0]*n+s[1])}),o}}),t.fn.extend({effect:function(){function e(e){function n(){t.isFunction(s)&&s.call(o[0]),t.isFunction(e)&&e()}var o=t(this),s=i.complete,a=i.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),n()):r.call(o[0],i,n)}var i=n.apply(this,arguments),o=i.mode,s=i.queue,r=t.effects.effect[i.effect];return t.fx.off||!r?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):s===!1?this.each(e):this.queue(s||"fx",e)},show:function(t){return function(e){if(o(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(o(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(o(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t,e){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;t.effects.effect.blind=function(e,o){var s,r,a,l=t(this),c=["position","top","bottom","left","right","height","width"],u=t.effects.setMode(l,e.mode||"hide"),d=e.direction||"up",p=i.test(d),h=p?"height":"width",f=p?"top":"left",m=n.test(d),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),c):t.effects.save(l,c),l.show(),s=t.effects.createWrapper(l).css({overflow:"hidden"}),r=s[h](),a=parseFloat(s.css(f))||0,g[h]=v?r:0,m||(l.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:r+a),v&&(s.css(h,0),m||s.css(f,a+r)),s.animate(g,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),t.effects.restore(l,c),t.effects.removeWrapper(l),o()}})}}(jQuery),function(t,e){t.effects.effect.bounce=function(e,i){var n,o,s,r=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(r,e.mode||"effect"),c="hide"===l,u="show"===l,d=e.direction||"up",p=e.distance,h=e.times||5,f=2*h+(u||c?1:0),m=e.duration/f,g=e.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,_=r.queue(),b=_.length;for((u||c)&&a.push("opacity"),t.effects.save(r,a),r.show(),t.effects.createWrapper(r),p||(p=r["top"===v?"outerHeight":"outerWidth"]()/3),u&&(s={opacity:1},s[v]=0,r.css("opacity",0).css(v,y?2*-p:2*p).animate(s,m,g)),c&&(p/=Math.pow(2,h-1)),s={},s[v]=0,n=0;h>n;n++)o={},o[v]=(y?"-=":"+=")+p,r.animate(o,m,g).animate(s,m,g),p=c?2*p:p/2;c&&(o={opacity:0},o[v]=(y?"-=":"+=")+p,r.animate(o,m,g)),r.queue(function(){c&&r.hide(),t.effects.restore(r,a),t.effects.removeWrapper(r),i()}),b>1&&_.splice.apply(_,[1,0].concat(_.splice(b,f+1))),r.dequeue()}}(jQuery),function(t,e){t.effects.effect.clip=function(e,i){var n,o,s,r=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(r,e.mode||"hide"),c="show"===l,u=e.direction||"vertical",d="vertical"===u,p=d?"height":"width",h=d?"top":"left",f={};t.effects.save(r,a),r.show(),n=t.effects.createWrapper(r).css({overflow:"hidden"}),o="IMG"===r[0].tagName?n:r,s=o[p](),c&&(o.css(p,0),o.css(h,s/2)),f[p]=c?s:0,f[h]=c?0:s/2,o.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){c||r.hide(),t.effects.restore(r,a),t.effects.removeWrapper(r),i()}})}}(jQuery),function(t,e){t.effects.effect.drop=function(e,i){var n,o=t(this),s=["position","top","bottom","left","right","opacity","height","width"],r=t.effects.setMode(o,e.mode||"hide"),a="show"===r,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};t.effects.save(o,s),o.show(),t.effects.createWrapper(o),n=e.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-n:n),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&o.hide(),t.effects.restore(o,s),t.effects.removeWrapper(o),i()}})}}(jQuery),function(t,e){t.effects.effect.explode=function(e,i){function n(){_.push(this),_.length===d*p&&o()}function o(){h.css({visibility:"visible"}),t(_).remove(),m||h.hide(),i()}var s,r,a,l,c,u,d=e.pieces?Math.round(Math.sqrt(e.pieces)):3,p=d,h=t(this),f=t.effects.setMode(h,e.mode||"hide"),m="show"===f,g=h.show().css("visibility","hidden").offset(),v=Math.ceil(h.outerWidth()/p),y=Math.ceil(h.outerHeight()/d),_=[];for(s=0;d>s;s++)for(l=g.top+s*y,u=s-(d-1)/2,r=0;p>r;r++)a=g.left+r*v,c=r-(p-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-s*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?c*v:0),top:l+(m?u*y:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*y),opacity:m?1:0},e.duration||500,e.easing,n)}}(jQuery),function(t,e){t.effects.effect.fade=function(e,i){var n=t(this),o=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t,e){t.effects.effect.fold=function(e,i){var n,o,s=t(this),r=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(s,e.mode||"hide"),l="show"===a,c="hide"===a,u=e.size||15,d=/([0-9]+)%/.exec(u),p=!!e.horizFirst,h=l!==p,f=h?["width","height"]:["height","width"],m=e.duration/2,g={},v={};t.effects.save(s,r),s.show(),n=t.effects.createWrapper(s).css({overflow:"hidden"}),o=h?[n.width(),n.height()]:[n.height(),n.width()],d&&(u=parseInt(d[1],10)/100*o[c?0:1]),l&&n.css(p?{height:0,width:u}:{height:u,width:0}),g[f[0]]=l?o[0]:u,v[f[1]]=l?o[1]:0,n.animate(g,m,e.easing).animate(v,m,e.easing,function(){c&&s.hide(),t.effects.restore(s,r),t.effects.removeWrapper(s),i()})}}(jQuery),function(t,e){t.effects.effect.highlight=function(e,i){var n=t(this),o=["backgroundImage","backgroundColor","opacity"],s=t.effects.setMode(n,e.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===s&&(r.opacity=0),t.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&n.hide(),t.effects.restore(n,o),i()}})}}(jQuery),function(t,e){t.effects.effect.pulsate=function(e,i){var n,o=t(this),s=t.effects.setMode(o,e.mode||"show"),r="show"===s,a="hide"===s,l=r||"hide"===s,c=2*(e.times||5)+(l?1:0),u=e.duration/c,d=0,p=o.queue(),h=p.length;for((r||!o.is(":visible"))&&(o.css("opacity",0).show(),d=1),n=1;c>n;n++)o.animate({opacity:d},u,e.easing),d=1-d;o.animate({opacity:d},u,e.easing),o.queue(function(){a&&o.hide(),i()}),h>1&&p.splice.apply(p,[1,0].concat(p.splice(h,c+1))),o.dequeue()}}(jQuery),function(t,e){t.effects.effect.puff=function(e,i){var n=t(this),o=t.effects.setMode(n,e.mode||"hide"),s="hide"===o,r=parseInt(e.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:o,complete:i,percent:s?r:100,from:s?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(e)},t.effects.effect.scale=function(e,i){var n=t(this),o=t.extend(!0,{},e),s=t.effects.setMode(n,e.mode||"effect"),r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===s?0:100),a=e.direction||"both",l=e.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==a?r/100:1,x:"vertical"!==a?r/100:1};o.effect="size",o.queue=!1,o.complete=i,"effect"!==s&&(o.origin=l||["middle","center"],o.restore=!0),o.from=e.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===s&&(o.from.opacity=0,o.to.opacity=1),"hide"===s&&(o.from.opacity=1,o.to.opacity=0)),n.effect(o)},t.effects.effect.size=function(e,i){var n,o,s,r=t(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],p=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=t.effects.setMode(r,e.mode||"effect"),f=e.restore||"effect"!==h,m=e.scale||"both",g=e.origin||["middle","center"],v=r.css("position"),y=f?a:l,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===e.mode&&"show"===h?(r.from=e.to||_,r.to=e.from||n):(r.from=e.from||("show"===h?_:n),r.to=e.to||("hide"===h?_:n)),s={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},("box"===m||"both"===m)&&(s.from.y!==s.to.y&&(y=y.concat(d),r.from=t.effects.setTransition(r,d,s.from.y,r.from),r.to=t.effects.setTransition(r,d,s.to.y,r.to)),s.from.x!==s.to.x&&(y=y.concat(p),r.from=t.effects.setTransition(r,p,s.from.x,r.from),r.to=t.effects.setTransition(r,p,s.to.x,r.to))),("content"===m||"both"===m)&&s.from.y!==s.to.y&&(y=y.concat(u).concat(c),r.from=t.effects.setTransition(r,u,s.from.y,r.from),r.to=t.effects.setTransition(r,u,s.to.y,r.to)),t.effects.save(r,y),r.show(),t.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(o=t.effects.getBaseline(g,n),r.from.top=(n.outerHeight-r.outerHeight())*o.y,r.from.left=(n.outerWidth-r.outerWidth())*o.x,r.to.top=(n.outerHeight-r.to.outerHeight)*o.y,r.to.left=(n.outerWidth-r.to.outerWidth)*o.x),r.css(r.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),p=p.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(p),r.find("*[width]").each(function(){var i=t(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,c),i.from={height:n.height*s.from.y,width:n.width*s.from.x,outerHeight:n.outerHeight*s.from.y,outerWidth:n.outerWidth*s.from.x},i.to={height:n.height*s.to.y,width:n.width*s.to.x,outerHeight:n.height*s.to.y,outerWidth:n.width*s.to.x},s.from.y!==s.to.y&&(i.from=t.effects.setTransition(i,d,s.from.y,i.from),i.to=t.effects.setTransition(i,d,s.to.y,i.to)),s.from.x!==s.to.x&&(i.from=t.effects.setTransition(i,p,s.from.x,i.from),i.to=t.effects.setTransition(i,p,s.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,c)})})),r.animate(r.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===h&&r.hide(),t.effects.restore(r,y),f||("static"===v?r.css({position:"relative",top:r.to.top,left:r.to.left}):t.each(["top","left"],function(t,e){r.css(e,function(e,i){var n=parseInt(i,10),o=t?r.to.left:r.to.top;return"auto"===i?o+"px":n+o+"px"})})),t.effects.removeWrapper(r),i()}})}}(jQuery),function(t,e){t.effects.effect.shake=function(e,i){var n,o=t(this),s=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"effect"),a=e.direction||"left",l=e.distance||20,c=e.times||3,u=2*c+1,d=Math.round(e.duration/u),p="up"===a||"down"===a?"top":"left",h="up"===a||"left"===a,f={},m={},g={},v=o.queue(),y=v.length;for(t.effects.save(o,s),o.show(),t.effects.createWrapper(o),f[p]=(h?"-=":"+=")+l,m[p]=(h?"+=":"-=")+2*l,g[p]=(h?"-=":"+=")+2*l,o.animate(f,d,e.easing),n=1;c>n;n++)o.animate(m,d,e.easing).animate(g,d,e.easing);o.animate(m,d,e.easing).animate(f,d/2,e.easing).queue(function(){"hide"===r&&o.hide(),t.effects.restore(o,s),t.effects.removeWrapper(o),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),o.dequeue()}}(jQuery),function(t,e){t.effects.effect.slide=function(e,i){var n,o=t(this),s=["position","top","bottom","left","right","width","height"],r=t.effects.setMode(o,e.mode||"show"),a="show"===r,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};t.effects.save(o,s),o.show(),n=e.distance||o["top"===c?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&o.hide(),t.effects.restore(o,s),t.effects.removeWrapper(o),i()}})}}(jQuery),function(t,e){t.effects.effect.transfer=function(e,i){var n=t(this),o=t(e.to),s="fixed"===o.css("position"),r=t("body"),a=s?r.scrollTop():0,l=s?r.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=n.offset(),p=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){p.remove(),i()})}}(jQuery),define("jqueryui",["jquery"],function(){}),function(){var t,e=this,i=e.Backbone,n=[],o=(n.push,n.slice);n.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.1.0";var s=e._;s||"undefined"==typeof require||(s=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var r=t.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var n=this,o=s.once(function(){n.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,i)},off:function(t,e,i){var n,o,r,a,c,u,d,p;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:s.keys(this._events),c=0,u=a.length;u>c;c++)if(t=a[c],r=this._events[t]){if(this._events[t]=n=[],e||i)for(d=0,p=r.length;p>d;d++)o=r[d],(e&&e!==o.callback&&e!==o.callback._callback||i&&i!==o.context)&&n.push(o);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,i){var n=this._listeningTo;if(!n)return this;var o=!e&&!i;i||"object"!=typeof e||(i=this),t&&((n={})[t._listenId]=t);for(var r in n)t=n[r],t.off(e,i,this),(o||s.isEmpty(t._events))&&delete this._listeningTo[r];return this}},a=/\s+/,l=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)t[e].apply(t,[o,i[o]].concat(n));return!1}if(a.test(i)){for(var s=i.split(a),r=0,l=s.length;l>r;r++)t[e].apply(t,[s[r]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,o=t.length,s=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e)}},u={listenTo:"on",listenToOnce:"once"};s.each(u,function(t,e){r[e]=function(e,i,n){var o=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=s.uniqueId("l"));return o[r]=e,n||"object"!=typeof i||(n=this),e[t](i,n,this),this}}),r.bind=r.on,r.unbind=r.off,s.extend(t,r);var d=t.Model=function(t,e){var i=t||{};e||(e={}),this.cid=s.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=s.defaults({},i,s.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};s.extend(d.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return s.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,o,r,a,l,c,u,d;if(null==t)return this;if("object"==typeof t?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;r=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)e=o[n],s.isEqual(d[n],e)||a.push(n),s.isEqual(u[n],e)?delete this.changed[n]:this.changed[n]=e,r?delete d[n]:d[n]=e;if(!l){a.length&&(this._pending=!0);for(var p=0,h=a.length;h>p;p++)this.trigger("change:"+a[p],this,d[a[p]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in t)s.isEqual(n[o],e=t[o])||((i||(i={}))[o]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},O(this,t),this.sync("read",this,t)},save:function(t,e,i){var n,o,r,a=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,i=s.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=s.extend({},a,n)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;
return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=s.extend(n||{},e)),s.isObject(e)&&!l.set(e,i)?!1:(c&&c(l,t,i),void l.trigger("sync",l,t,i))},O(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=n),r=this.sync(o,this,i),n&&i.wait&&(this.attributes=a),r},destroy:function(t){t=t?s.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(o){(t.wait||e.isNew())&&n(),i&&i(e,o,t),e.isNew()||e.trigger("sync",e,o,t)},this.isNew())return t.success(),!1;O(this,t);var o=this.sync("delete",this,t);return t.wait||n(),o},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||E();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,s.extend(e,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];s.each(p,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),s[t].apply(s,e)}});var h=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))},f={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};s.extend(h.prototype,r,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,s.extend({merge:!1},e,m))},remove:function(t,e){var i=!s.isArray(t);t=i?[t]:s.clone(t),e||(e={});var n,o,r,a;for(n=0,o=t.length;o>n;n++)a=t[n]=this.get(t[n]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a));return i?t[0]:t},set:function(t,e){e=s.defaults({},e,f),e.parse&&(t=this.parse(t,e));var i=!s.isArray(t);t=i?t?[t]:[]:s.clone(t);var n,o,r,a,l,c,u,p=e.at,h=this.model,m=this.comparator&&null==p&&e.sort!==!1,g=s.isString(this.comparator)?this.comparator:null,v=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,C=!m&&b&&x?[]:!1;for(n=0,o=t.length;o>n;n++){if(l=t[n],r=l instanceof d?a=l:l[h.prototype.idAttribute],c=this.get(r))x&&(_[c.cid]=!0),w&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),m&&!u&&c.hasChanged(g)&&(u=!0)),t[n]=c;else if(b){if(a=t[n]=this._prepareModel(l,e),!a)continue;v.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}C&&C.push(c||a)}if(x){for(n=0,o=this.length;o>n;++n)_[(a=this.models[n]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||C&&C.length)if(m&&(u=!0),this.length+=v.length,null!=p)for(n=0,o=v.length;o>n;n++)this.models.splice(p+n,0,v[n]);else{C&&(this.models.length=0);var k=C||v;for(n=0,o=k.length;o>n;n++)this.models.push(k[n])}if(u&&this.sort({silent:!0}),!e.silent){for(n=0,o=v.length;o>n;n++)(a=v[n]).trigger("add",a,this,e);(u||C&&C.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),t=this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,s.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,s.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null!=t?this._byId[t.id]||this._byId[t.cid]||this._byId[t]:void 0},at:function(t){return this.models[t]},where:function(t,e){return s.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return s.invoke(this.models,"get",t)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},O(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?s.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(t,e,o){o.wait&&i.add(t,o),n&&n(t,e,o)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t.collection||(t.collection=this),t;e=e?s.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(g,function(t){h.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),s[t].apply(s,e)}});var v=["groupBy","countBy","sortBy"];s.each(v,function(t){h.prototype[t]=function(e,i){var n=s.isFunction(e)?e:function(t){return t.get(e)};return s[t](this.models,n,i)}});var y=t.View=function(t){this.cid=s.uniqueId("view"),t||(t={}),s.extend(this,s.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];s.extend(y.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(s.isFunction(i)||(i=this[t[e]]),i){var n=e.match(_),o=n[1],r=n[2];i=s.bind(i,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,i):this.$el.on(o,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var e=s.extend({},s.result(this,"attributes"));this.id&&(e.id=s.result(this,"id")),this.className&&(e["class"]=s.result(this,"className"));var i=t.$("<"+s.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,n){var o=x[e];s.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:o,dataType:"json"};if(n.url||(r.url=s.result(i,"url")||E()),null!=n.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",n.emulateJSON&&(r.data._method=o);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"===r.type&&w&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=t.ajax(s.extend(r,n));return i.trigger("request",i,l,n),l};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,T=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(C.prototype,r,{initialize:function(){},route:function(e,i,n){s.isRegExp(e)||(e=this._routeToRegExp(e)),s.isFunction(i)&&(n=i,i=""),n||(n=this[i]);var o=this;return t.history.route(e,function(s){var r=o._extractParameters(e,s);n&&n.apply(o,r),o.trigger.apply(o,["route:"+i].concat(r)),o.trigger("route",i,r),t.history.trigger("route",o,i,r)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var t,e=s.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(k,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return s.map(i,function(t){return t?decodeURIComponent(t):null})}});var z=t.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,q=/msie [\w.]+/,A=/\/$/,I=/[?#].*$/;z.started=!1,s.extend(z.prototype,r,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(A,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(D,"")},start:function(e){if(z.started)throw new Error("Backbone.history has already been started");z.started=!0,this.options=s.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,o=q.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(P,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),z.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),s.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!z.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(I,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),t.history=new z;var R=function(t,e){var i,n=this;i=t&&s.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},s.extend(i,n,e);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,t&&s.extend(i.prototype,t),i.__super__=n.prototype,i};d.extend=h.extend=C.extend=y.extend=z.extend=R;var E=function(){throw new Error('A "url" property or function must be specified')},O=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}}}.call(this),define("backbone",["jquery","underscore"],function(t){return function(){var e;return e||t.Backbone}}(this));var Marionette=function(t,e,i){"use strict";function n(t,e){var i=new Error(t);throw i.name=e||"Error",i}!function(t,e){var i=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(t,e),t.ChildViewContainer.VERSION="0.1.4",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=i,this},t.ChildViewContainer}(e,i),function(t,e){var i=t.Wreqr,n=t.Wreqr={};return t.Wreqr.VERSION="1.3.1",t.Wreqr.noConflict=function(){return t.Wreqr=i,this},n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,e),n.CommandStorage=function(){var i=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),i}(),n.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,i)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,i,n){var o=this.storage.getCommands(t);e.each(o.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.hasHandler(t)?this.getHandler(t).apply(this,e):void 0}})}(n),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,e),n.Channel=function(i){var n=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,i,n){if(i){n=n||this;var o="vent"===t?"on":"setHandler";e.each(i,function(i,s){this[t][o](s,e.bind(i,n))},this)}}}),n}(n),n.radio=function(t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t)throw new Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];return i||(i=new t.Channel(e),this._channels[e]=i),i},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(n[t],function(e){this[t][e]=o(this,t,e)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(t,e,i){return function(n){var o=t._getChannel(n)[e],s=Array.prototype.slice.call(arguments,1);return o[i].apply(o,s)}};return new i}(n),t.Wreqr}(e,i);var o={};e.Marionette=o,o.$=e.$;var s=Array.prototype.slice;return o.extend=e.Model.extend,o.getOption=function(t,e){if(t&&e){var i;return i=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},o.normalizeMethods=function(t){var e,n={};return i.each(t,function(t,o){e=t,i.isFunction(e)||(e=this[e]),e&&(n[o]=e)},this),n},o.normalizeUIKeys=function(t,e){return"undefined"!=typeof t?(i.each(i.keys(t),function(i){var n=/@ui.[a-zA-Z_$0-9]*/g;i.match(n)&&(t[i.replace(n,function(t){return e[t.slice(4)]})]=t[i],delete t[i])}),t):void 0},o.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e)),o=[t].concat(i.toArray(arguments));return i[n].apply(i,o)}})},o.triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi,n=function(n){var o="on"+n.replace(e,t),s=this[o];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(s)?s.apply(this,i.tail(arguments)):void 0};return n}(),o.MonitorDOMRefresh=function(t){function e(t){t._isShown=!0,o(t)}function n(t){t._isRendered=!0,o(t)}function o(t){t._isShown&&t._isRendered&&s(t)&&i.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function s(e){return t.contains(e.el)}return function(t){t.listenTo(t,"show",function(){e(t)}),t.listenTo(t,"render",function(){n(t)})}}(document.documentElement),function(t){function e(t,e,o,s){var r=s.split(/\s+/);i.each(r,function(i){var s=t[i];s||n("Method '"+i+"' was configured as an event handler, but does not exist."),t.listenTo(e,o,s)})}function o(t,e,i,n){t.listenTo(e,i,n)}function s(t,e,n,o){var s=o.split(/\s+/);i.each(s,function(i){var o=t[i];t.stopListening(e,n,o)})}function r(t,e,i,n){t.stopListening(e,i,n)}function a(t,e,n,o,s){e&&n&&(i.isFunction(n)&&(n=n.call(t)),i.each(n,function(n,r){i.isFunction(n)?o(t,e,r,n):s(t,e,r,n)}))}t.bindEntityEvents=function(t,i,n){a(t,i,n,o,e)},t.unbindEntityEvents=function(t,e,i){a(t,e,i,r,s)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(i,n){e&&(i=e),t.call(i,n)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),o.Controller=function(t){this.triggerMethod=o.triggerMethod,this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,e.Events,{close:function(){this.stopListening();var t=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(t)),this.off()}}),o.Region=function(t){if(this.options=t||{},this.el=o.getOption(this,"el"),this.el||n("An 'el' must be specified for a region.","NoElError"),this.initialize){var e=Array.prototype.slice.apply(arguments);this.initialize.apply(this,e)}},i.extend(o.Region,{buildRegion:function(t,e){var o=i.isString(t),s=i.isString(t.selector),r=i.isUndefined(t.regionType),a=i.isFunction(t);a||o||s||n("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;o&&(l=t),t.selector&&(l=t.selector,delete t.selector),a&&(c=t),!a&&r&&(c=e),t.regionType&&(c=t.regionType,delete t.regionType),(o||a)&&(t={}),t.el=l;var u=new c(t);return t.parentEl&&(u.getEl=function(e){var n=t.parentEl;return i.isFunction(n)&&(n=n()),n.find(e)}),u}}),i.extend(o.Region.prototype,e.Events,{show:function(t,e){this.ensureEl();var n=e||{},s=t.isClosed||i.isUndefined(t.$el),r=t!==this.currentView,a=!!n.preventClose,l=!a&&r;l&&this.close(),t.render(),o.triggerMethod.call(this,"before:show",t),o.triggerMethod.call(t,"before:show"),(r||s)&&this.open(t),this.currentView=t,o.triggerMethod.call(this,"show",t),o.triggerMethod.call(t,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return o.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),o.triggerMethod.call(this,"close",t),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,e){var n={};return i.each(t,function(t,o){i.isString(t)&&(t={selector:t}),t.selector&&(t=i.defaults({},t,e));var s=this.addRegion(o,t);n[o]=s},this),n},addRegion:function(e,n){var o,s=i.isObject(n),r=i.isString(n),a=!!n.selector;return o=r||s&&a?t.Region.buildRegion(n,t.Region):i.isFunction(n)?t.Region.buildRegion(n,t.Region):n,this._store(e,o),this.triggerMethod("region:add",e,o),o},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){i.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){i.each(this._regions,function(t,e){t.close()},this)},close:function(){this.removeRegions(),t.Controller.prototype.close.apply(this,arguments)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),e.stopListening(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=i.size(this._regions)}});return t.actAsCollection(e.prototype,"_regions"),e}(o),o.TemplateCache=function(t){this.templateId=t},i.extend(o.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new o.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=s.call(arguments),i=e.length;if(i>0)for(t=0;i>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=o.$(t).html();return e&&0!==e.length||n("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return i.template(t)}}),o.Renderer={render:function(t,e){t||n("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var i;return(i="function"==typeof t?t:o.TemplateCache.get(t))(e)}},o.View=e.View.extend({constructor:function(t){i.bindAll(this,"render"),this.options=i.extend({},i.result(this,"options"),i.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(i.result(this,"events")),i.isObject(this.behaviors)&&new o.Behaviors(this),e.View.prototype.constructor.apply(this,arguments),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:o.triggerMethod,normalizeMethods:o.normalizeMethods,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var e=o.getOption(this,"templateHelpers");return i.isFunction(e)&&(e=e.call(this)),i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"ui");return o.normalizeUIKeys(t,e)},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(e,function(e,n){var o=i.isObject(e),s=o?e.event:e;t[n]=function(t){if(t){var i=t.preventDefault,n=t.stopPropagation,r=o?e.preventDefault:i,a=o?e.stopPropagation:n;r&&i&&i.apply(t),a&&n&&n.apply(t)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,l)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,i.isFunction(t)&&(t=t.call(this));var n={},o=i.result(this,"behaviorEvents")||{},s=this.configureTriggers();i.extend(n,o,t,s),e.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=Array.prototype.slice.call(arguments),e=this.triggerMethod.apply(this,["before:close"].concat(t));e!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(t)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),i=o.Renderer.render(e,t);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(t){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(t){o.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(t,e,i){this.closeEmptyView();var n=this.getItemView(t),o=this.collection.indexOf(t);this.addItemView(t,n,o)},onShowCalled:function(){this.children.each(function(t){o.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getItemView(e),this.addItemView(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new e.Model;this.addItemView(i,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return o.getOption(this,"emptyView")},getItemView:function(t){var e=o.getOption(this,"itemView");return e||n("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(t,e,n){var s=o.getOption(this,"itemViewOptions");i.isFunction(s)&&(s=s.call(this,t,n));var r=this.buildItemView(t,e,s);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),
this.renderItemView(r,n),this._isShown&&!this.isBuffering&&o.triggerMethod.call(r,"show"),this.triggerMethod("after:item:added",r),r},addChildViewEventForwarding:function(t){var e=o.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var n=s.call(arguments),r=n[0],a=this.normalizeMethods(this.getItemEvents());n[0]=e+":"+r,n.splice(1,0,t),"undefined"!=typeof a&&i.isFunction(a[r])&&a[r].apply(this,n),o.triggerMethod.apply(this,n)},this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,e,n){var o=i.extend({model:t},n);return new e(o)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(t.close?t.close():t.remove&&t.remove(),this.stopListening(t),this.children.remove(t)),this.triggerMethod("item:removed",t)},isEmpty:function(t){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(t,e){t.$el.append(e)},appendHtml:function(t,e,i){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(t){var e=o.getOption(this,"itemView")||this.constructor;return e||n("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return o.Renderer.render(e,t)},appendBuffer:function(t,e){var i=this.getItemViewContainer(t);i.append(e)},appendHtml:function(t,e,i){if(t.isBuffering)t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e);else{var n=this.getItemViewContainer(t);n.append(e.el)}},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var e,s=o.getOption(t,"itemViewContainer");if(s){var r=i.isFunction(s)?s.call(t):s;e="@"===r.charAt(0)&&t.ui?t.ui[r.substr(4)]:t.$(r),e.length<=0&&n("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else e=t.$el;return t.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),o.ItemView.prototype.constructor.call(this,t)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),o.ItemView.prototype.close.apply(this,arguments))},addRegion:function(t,e){var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},_buildRegions:function(t){var e=this,i={regionType:o.getOption(this,"regionType"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,i)},_initializeRegions:function(t){var e;this._initRegionManager(),e=i.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),o.Behavior=function(t,e){function i(e,i){this.view=i,this.defaults=t.result(this,"defaults")||{},this.options=t.extend({},this.defaults,e),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return t.extend(i.prototype,e.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:o.triggerMethod}),i.extend=o.extend,i}(i,e),o.Behaviors=function(t,e){function i(t){this.behaviors=i.parseBehaviors(t,e.result(t,"behaviors")),i.wrap(t,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement","close"])}var n={setElement:function(t,i){t.apply(this,e.tail(arguments,2)),e.each(i,function(t){t.$el=this.$el},this)},close:function(t,i){var n=e.tail(arguments,2);t.apply(this,n),e.invoke(i,"close",n)},onShow:function(i,n){var o=e.tail(arguments,2);e.each(n,function(e){t.triggerMethod.apply(e,["show"].concat(o))}),e.isFunction(i)&&i.apply(this,o)},onClose:function(i,n){var o=e.tail(arguments,2);e.each(n,function(e){t.triggerMethod.apply(e,["close"].concat(o))}),e.isFunction(i)&&i.apply(this,o)},bindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},unbindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},triggerMethod:function(t,i){var n=e.tail(arguments,2);t.apply(this,n),e.each(i,function(e){t.apply(e,n)})},delegateEvents:function(i,n){var o=e.tail(arguments,2);i.apply(this,o),e.each(n,function(e){t.bindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.bindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},undelegateEvents:function(i,n){var o=e.tail(arguments,2);i.apply(this,o),e.each(n,function(e){t.unbindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.unbindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},behaviorEvents:function(i,n){var o={},s=e.result(this,"ui");return e.each(n,function(i,n){var r={},a=e.result(i,"events")||{},l=e.result(i,"ui"),c=e.extend({},s,l);a=t.normalizeUIKeys(a,c),e.each(e.keys(a),function(t){var o=new Array(n+2).join(" "),s=t+o,l=e.isFunction(a[t])?a[t]:i[a[t]];r[s]=e.bind(l,i)}),o=e.extend(o,r)}),o}};return e.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(t,n){return e.map(n,function(e,n){var o=i.getBehaviorClass(e,n);return new o(e,t)})},wrap:function(t,i,o){e.each(o,function(o){t[o]=e.partial(n[o],t[o],i)})}}),i}(o,i),o.AppRouter=e.Router.extend({constructor:function(t){e.Router.prototype.constructor.apply(this,arguments),this.options=t||{};var i=o.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){var n=i.invert(this.appRoutes)[t];i.isFunction(this.onRoute)&&this.onRoute(t,n,e)},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return o.getOption(this,"controller")},_addAppRoute:function(t,e,o){var s=t[o];s||n("Method '"+o+"' was not found on the controller"),this.route(e,o,i.bind(s,t))}}),o.Application=function(t){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new e.Wreqr.EventAggregator,this.commands=new e.Wreqr.Commands,this.reqres=new e.Wreqr.RequestResponse,this.submodules={},i.extend(this,t),this.triggerMethod=o.triggerMethod},i.extend(o.Application.prototype,e.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},module:function(t,e){var i=o.Module.getClass(e),n=s.call(arguments);return n.unshift(this),i.create.apply(i,n)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t,e){delete this[t]})}}),o.Application.extend=o.extend,o.Module=function(t,e,n){this.moduleName=t,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=o.triggerMethod,i.isFunction(this.initialize)&&this.initialize(this.options,t,e)},o.Module.extend=o.extend,i.extend(o.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var s=i.flatten([this,this.app,e,o,o.$,i,n]);t.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),i.extend(o.Module,{create:function(t,e,n){var o=t,r=s.call(arguments);r.splice(0,3),e=e.split(".");var a=e.length,l=[];return l[a-1]=n,i.each(e,function(e,i){var s=o;o=this._getModule(s,e,t,n),this._addModuleDefinition(s,o,l[i],r)},this),o},_getModule:function(t,e,n,o,s){var r=i.extend({},o),a=this.getClass(o),l=t[e];return l||(l=new a(e,n,r),t[e]=l,t.submodules[e]=l),l},getClass:function(t){var e=o.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,i,n){var o=this._getDefine(i),s=this._getStartWithParent(i,e);o&&e.addDefinition(o,n),this._addStartWithParent(t,e,s)},_getStartWithParent:function(t,e){var n;return i.isFunction(t)&&t.prototype instanceof o.Module?(n=e.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(t)?(n=t.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(t){return!i.isFunction(t)||t.prototype instanceof o.Module?i.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),o}(this,Backbone,_);if(define("marionette",["backbone"],function(t){return function(){var e;return e||t.Marionette}}(this)),Backbone.Syphon=function(t,e,i){var n={};n.ignoredTypes=["button","submit","reset","fieldset"],n.serialize=function(t,n){var r={},c=a(n),u=o(t,c);return i.each(u,function(t){var i=e(t),n=s(i),o=c.keyExtractors.get(n),a=o(i),u=c.inputReaders.get(n),d=u(i),p=c.keyAssignmentValidators.get(n);if(p(i,a,d)){var h=c.keySplitter(a);r=l(r,h,d)}}),r},n.deserialize=function(t,n,r){var l=a(r),u=o(t,l),d=c(l,n);i.each(u,function(t){var i=e(t),n=s(i),o=l.keyExtractors.get(n),r=o(i),a=l.inputWriters.get(n),c=d[r];a(i,c)})};var o=function(t,n){var o=r(t),a=o.elements;return a=i.reject(a,function(t){var o,r=s(t),a=n.keyExtractors.get(r),l=a(e(t)),c=i.include(n.ignoredTypes,r),u=i.include(n.include,l),d=i.include(n.exclude,l);return o=u?!1:n.include?!0:d||c})},s=function(t){var i,n=e(t),o=n[0].tagName,s=o;return"input"===o.toLowerCase()&&(i=n.attr("type"),s=i?i:"text"),s.toLowerCase()},r=function(t){return i.isUndefined(t.$el)&&"form"===t.tagName.toLowerCase()?t:t.$el.is("form")?t.el:t.$("form")[0]},a=function(t){var e=i.clone(t)||{};return e.ignoredTypes=i.clone(n.ignoredTypes),e.inputReaders=e.inputReaders||n.InputReaders,e.inputWriters=e.inputWriters||n.InputWriters,e.keyExtractors=e.keyExtractors||n.KeyExtractors,e.keySplitter=e.keySplitter||n.KeySplitter,e.keyJoiner=e.keyJoiner||n.KeyJoiner,e.keyAssignmentValidators=e.keyAssignmentValidators||n.KeyAssignmentValidators,e},l=function(t,e,n){if(!e)return t;var o=e.shift();return t[o]||(t[o]=i.isArray(o)?[]:{}),0===e.length&&(i.isArray(t[o])?t[o].push(n):t[o]=n),e.length>0&&l(t[o],e,n),t},c=function(t,e,n){var o={};return i.each(e,function(e,s){var r={};n&&(s=t.keyJoiner(n,s)),i.isArray(e)?(s+="[]",r[s]=e):i.isObject(e)?r=c(t,e,s):r[s]=e,i.extend(o,r)}),o};return n}(Backbone,jQuery,_),Backbone.Syphon.TypeRegistry=function(){this.registeredTypes={}},Backbone.Syphon.TypeRegistry.extend=Backbone.Model.extend,_.extend(Backbone.Syphon.TypeRegistry.prototype,{get:function(t){var e=this.registeredTypes[t];return e||(e=this.registeredTypes["default"]),e},register:function(t,e){this.registeredTypes[t]=e},registerDefault:function(t){this.registeredTypes["default"]=t},unregister:function(t){this.registeredTypes[t]&&delete this.registeredTypes[t]}}),Backbone.Syphon.KeyExtractorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyExtractors=new Backbone.Syphon.KeyExtractorSet,Backbone.Syphon.KeyExtractors.registerDefault(function(t){return t.prop("name")}),Backbone.Syphon.InputReaderSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputReaders=new Backbone.Syphon.InputReaderSet,Backbone.Syphon.InputReaders.registerDefault(function(t){return t.val()}),Backbone.Syphon.InputReaders.register("checkbox",function(t){var e=t.prop("checked");return e}),Backbone.Syphon.InputWriterSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputWriters=new Backbone.Syphon.InputWriterSet,Backbone.Syphon.InputWriters.registerDefault(function(t,e){t.val(e)}),Backbone.Syphon.InputWriters.register("checkbox",function(t,e){t.prop("checked",e)}),Backbone.Syphon.InputWriters.register("radio",function(t,e){t.prop("checked",t.val()===e)}),Backbone.Syphon.KeyAssignmentValidatorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyAssignmentValidators=new Backbone.Syphon.KeyAssignmentValidatorSet,Backbone.Syphon.KeyAssignmentValidators.registerDefault(function(){return!0}),Backbone.Syphon.KeyAssignmentValidators.register("radio",function(t,e,i){return t.prop("checked")}),Backbone.Syphon.KeySplitter=function(t){var e=t.match(/[^\[\]]+/g);return t.indexOf("[]")===t.length-2&&(lastKey=e.pop(),e.push([lastKey])),e},Backbone.Syphon.KeyJoiner=function(t,e){return t+"["+e+"]"},define("syphon",["backbone"],function(){}),define("text",["module"],function(t){"use strict";var e,i,n,o,s,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,p=c&&(location.port||void 0),h={},f=t.config&&t.config()||{};return e={version:"2.0.10",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){i=r[e];try{t=new ActiveXObject(i)}catch(n){}if(t){r=[i];break}}return t},parseName:function(t){var e,i,n,o=!1,s=t.indexOf("."),r=0===t.indexOf("./")||0===t.indexOf("../");return-1!==s&&(!r||s>1)?(e=t.substring(0,s),i=t.substring(s+1,t.length)):e=t,n=i||e,s=n.indexOf("!"),-1!==s&&(o="strip"===n.substring(s+1),n=n.substring(0,s),i?i=n:e=n),{moduleName:e,ext:i,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,n,o){var s,r,a,l=e.xdRegExp.exec(t);return l?(s=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(s&&s!==i||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==o)):!0},finishLoad:function(t,i,n,o){n=i?e.strip(n):n,f.isBuild&&(h[t]=n),o(n)},load:function(t,i,n,o){if(o.isBuild&&!o.inlineText)return void n();f.isBuild=o.isBuild;var s=e.parseName(t),r=s.moduleName+(s.ext?"."+s.ext:""),a=i.toUrl(r),l=f.useXhr||e.useXhr;return 0===a.indexOf("empty:")?void n():void(!c||l(a,u,d,p)?e.get(a,function(i){e.finishLoad(t,s.strip,i,n)},function(t){n.error&&n.error(t)}):i([r],function(t){e.finishLoad(s.moduleName+"."+s.ext,s.strip,t,n)}))},write:function(t,i,n,o){if(h.hasOwnProperty(i)){var s=e.jsEscape(h[i]);n.asModule(t+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,i,n,o,s){var r=e.parseName(i),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";e.load(l,n,function(i){var n=function(t){return o(c,t)};n.asModule=function(t,e){return o.asModule(t,c,e)},e.write(t,l,n,s)},s)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),e.get=function(t,e,n){try{var o=i.readFileSync(t,"utf8");0===o.indexOf("\ufeff")&&(o=o.substring(1)),e(o)}catch(s){n(s)}}):"xhr"===f.env||!f.env&&e.createXhr()?e.get=function(t,i,n,o){var s,r=e.createXhr();if(r.open("GET",t,!0),o)for(s in o)o.hasOwnProperty(s)&&r.setRequestHeader(s.toLowerCase(),o[s]);f.onXhr&&f.onXhr(r,t),r.onreadystatechange=function(e){var o,s;4===r.readyState&&(o=r.status,o>399&&600>o?(s=new Error(t+" HTTP status: "+o),s.xhr=r,n(s)):i(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,t))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,n,o="utf-8",s=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),o)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}e(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in n,e.get=function(t,e){var i,r,a,l={};s&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),r=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),r.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),e(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),e}),function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n;return i.settings.submitHandler?(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e=e&&i.element(this)}),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n=this[0];if(e){var o=t.data(n.form,"validator").settings,s=o.rules,r=t.validator.staticRules(n);switch(e){case"add":t.extend(r,t.validator.normalizeRule(i)),delete r.messages,s[n.name]=r,i.messages&&(o.messages[n.name]=t.extend(o.messages[n.name],i.messages));break;case"remove":if(!i)return delete s[n.name],r;var a={};return t.each(i.split(/\s/),function(t,e){a[e]=r[e],delete r[e]}),a}}var l=t.validator.normalizeRules(t.extend({},t.validator.classRules(n),t.validator.attributeRules(n),t.validator.dataRules(n),t.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=t.extend({required:c},l)}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})});var n=this.settings.rules;t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e)!==!1;return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),n=t(e).val();return"radio"===i||"checkbox"===i?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n=t(e).rules(),o=!1,s=this.elementValue(e);for(var r in n){var a={method:r,parameters:n[r]};try{if(i=t.validator.methods[r].call(this,s,e,a.parameters),"dependency-mismatch"===i){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,a),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+a.method+"' method.",l),l}}return o?void 0:(this.objectLength(n)&&this.successList.push(e),!0)},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),o=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):o.test(n)&&(n=t.validator.format(n.replace(o,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n=this.errorsFor(e);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(i||""),
this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},n=t(e),o=n[0].getAttribute("type");for(var s in t.validator.methods){var r;"required"===s?(r=n.get(0).getAttribute(s),""===r&&(r=!0),r=!!r):r=n.attr(s),/min|max/.test(s)&&(null===o||/number|range|text/.test(o))&&(r=Number(r)),r?i[s]=r:o===s&&"range"!==o&&(i[s]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,n,o={},s=t(e);for(i in t.validator.methods)n=s.data("rule-"+i.toLowerCase()),void 0!==n&&(o[i]=n);return o},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,o){if(o===!1)return void delete e[n];if(o.param||o.depends){var s=!0;switch(typeof o.depends){case"string":s=!!t(o.depends,i.form).length;break;case"function":s=o.depends.call(i,i)}s?e[n]=void 0!==o.param?o.param:!0:delete e[n]}}),t.each(e,function(n,o){e[n]=t.isFunction(o)?o(i):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],3>i.length&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var o=t(i).val();return o&&o.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(""+new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,n=0,o=!1;t=t.replace(/\D/g,"");for(var s=t.length-1;s>=0;s--){var r=t.charAt(s);n=parseInt(r,10),o&&(n*=2)>9&&(n-=9),i+=n,o=!o}return 0===i%10},minlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||o>=n},maxlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||n>=o},rangelength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||o>=n[0]&&n[1]>=o},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&i[1]>=t},equalTo:function(e,i,n){var o=t(n);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===o.val()},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var o=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=o.message,n="string"==typeof n&&{url:n}||n,o.old===e)return o.valid;o.old=e;var s=this;this.startRequest(i);var r={};return r[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,success:function(n){s.settings.messages[i.name].remote=o.originalMessage;var r=n===!0||"true"===n;if(r){var a=s.formSubmitted;s.prepareElement(i),s.formSubmitted=a,s.successList.push(i),delete s.invalid[i.name],s.showErrors()}else{var l={},c=n||s.defaultMessage(i,"remote");l[i.name]=o.message=t.isFunction(c)?c(e):c,s.invalid[i.name]=!0,s.showErrors(l)}o.valid=r,s.stopRequest(i,r)}},n)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,n){var o=t.port;"abort"===t.mode&&(e[o]&&e[o].abort(),e[o]=n)});else{var i=t.ajax;t.ajax=function(n){var o=("mode"in n?n:t.ajaxSettings).mode,s=("port"in n?n:t.ajaxSettings).port;return"abort"===o?(e[s]&&e[s].abort(),e[s]=i.apply(this,arguments),e[s]):i.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var o=t(i.target);return o.is(e)?n.apply(o,arguments):void 0})}})}(jQuery),define("jqueryvalidate",["jquery"],function(){}),function(t){var e=!1,i=!1,n={isUrl:function(t){var e=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)?!0:!1},loadContent:function(t,e){t.html(e)},addPrefix:function(t){var e=t.attr("id"),i=t.attr("class");"string"==typeof e&&""!==e&&t.attr("id",e.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof i&&""!==i&&"sidr-inner"!==i&&t.attr("class",i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),t.removeAttr("style")},execute:function(n,s,r){"function"==typeof s?(r=s,s="sidr"):s||(s="sidr");var a,l,c,u=t("#"+s),d=t(u.data("body")),p=t("html"),h=u.outerWidth(!0),f=u.data("speed"),m=u.data("side");if("open"===n||"toogle"===n&&!u.is(":visible")){if(u.is(":visible")||e)return;if(i!==!1)return void o.close(i,function(){o.open(s)});e=!0,"left"===m?(a={left:h+"px"},l={left:"0px"}):(a={right:h+"px"},l={right:"0px"}),c=p.scrollTop(),p.css("overflow-x","hidden").scrollTop(c),d.css({width:d.width(),position:"absolute"}).animate(a,f),u.css("display","block").animate(l,f,function(){e=!1,i=s,"function"==typeof r&&r(s)})}else{if(!u.is(":visible")||e)return;e=!0,"left"===m?(a={left:0},l={left:"-"+h+"px"}):(a={right:0},l={right:"-"+h+"px"}),c=p.scrollTop(),p.removeAttr("style").scrollTop(c),d.animate(a,f),u.animate(l,f,function(){u.removeAttr("style"),d.removeAttr("style"),t("html").removeAttr("style"),e=!1,i=!1,"function"==typeof r&&r(s)})}}},o={open:function(t,e){n.execute("open",t,e)},close:function(t,e){n.execute("close",t,e)},toogle:function(t,e){n.execute("toogle",t,e)}};t.sidr=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof e&&"string"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sidr"):o.toogle.apply(this,arguments)},t.fn.sidr=function(e){var i=t.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body"},e),s=i.name,r=t("#"+s);if(0===r.length&&(r=t("<div />").attr("id",s).appendTo(t("body"))),r.addClass("sidr").addClass(i.side).data({speed:i.speed,side:i.side,body:i.body}),"function"==typeof i.source){var a=i.source(s);n.loadContent(r,a)}else if("string"==typeof i.source&&n.isUrl(i.source))t.get(i.source,function(t){n.loadContent(r,t)});else if("string"==typeof i.source){var l="",c=i.source.split(",");if(t.each(c,function(e,i){l+='<div class="sidr-inner">'+t(i).html()+"</div>"}),i.renaming){var u=t("<div />").html(l);u.find("*").each(function(e,i){var o=t(i);n.addPrefix(o)}),l=u.html()}n.loadContent(r,l)}else null!==i.source&&t.error("Invalid Sidr Source");return this.each(function(){var e=t(this),i=e.data("sidr");i||(e.data("sidr",s),e.click(function(t){t.preventDefault(),o.toogle(s)}))})}}(jQuery),define("sidr",["jquery"],function(){}),function(t){jQuery.fn.extend({slimScroll:function(e){var i=t.extend({wheelStep:20,width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:"0.2",railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,scroll:0,touchScrollStep:200},e);return this.each(function(){function n(t,e,n){var o=t,a=v.outerHeight()-_.outerHeight();e&&(o=parseInt(_.css("top"))+t*parseInt(i.wheelStep)/100*_.outerHeight(),o=Math.min(Math.max(o,0),a),_.css({top:o+"px"})),h=parseInt(_.css("top"))/(v.outerHeight()-_.outerHeight()),o=h*(v[0].scrollHeight-v.outerHeight()),n&&(o=t,t=o/v[0].scrollHeight*v.outerHeight(),t=Math.min(Math.max(t,0),a),_.css({top:t+"px"})),v.scrollTop(o),s(),r()}function o(){p=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),m),_.css({height:p+"px"})}function s(){o(),clearTimeout(u),h==~~h&&(g=i.allowPageScroll,f!=h&&v.trigger("slimscroll",0==~~h?"top":"bottom")),f=h,p>=v.outerHeight()?g=!0:(_.stop(!0,!0).fadeIn("fast"),i.railVisible&&b.stop(!0,!0).fadeIn("fast"))}function r(){i.alwaysVisible||(u=setTimeout(function(){i.disableFadeOut&&a||l||c||(_.fadeOut("slow"),b.fadeOut("slow"))},1e3))}var a,l,c,u,d,p,h,f,m=30,g=!1,v=t(this);if(v.parent().hasClass("slimScrollDiv")){var y=v.scrollTop(),_=v.parent().find(".slimScrollBar"),b=v.parent().find(".slimScrollRail");o(),e&&("scrollTo"in e?y=parseInt(i.scrollTo):"scrollBy"in e&&(y+=parseInt(i.scrollBy)),n(y,!1,!0))}else{i.height="auto"==i.height?v.parent().innerHeight():i.height,y=t("<div></div>").addClass(i.wrapperClass).css({position:"relative",overflow:"hidden",width:i.width,height:i.height}),v.css({overflow:"hidden",width:i.width,height:i.height});var b=t("<div></div>").addClass(i.railClass).css({width:i.size,height:"100%",position:"absolute",top:0,display:i.alwaysVisible&&i.railVisible?"block":"none","border-radius":i.size,background:i.railColor,opacity:i.railOpacity,zIndex:90}),_=t("<div></div>").addClass(i.barClass).css({background:i.color,width:i.size,position:"absolute",top:0,opacity:i.opacity,display:i.alwaysVisible?"block":"none","border-radius":i.size,BorderRadius:i.size,MozBorderRadius:i.size,WebkitBorderRadius:i.size,zIndex:99}),w="right"==i.position?{right:i.distance}:{left:i.distance};b.css(w),_.css(w),v.wrap(y),v.parent().append(_),v.parent().append(b),_.draggable({axis:"y",containment:"parent",start:function(){c=!0},stop:function(){c=!1,r()},drag:function(){n(0,t(this).position().top,!1)}}),b.hover(function(){s()},function(){r()}),_.hover(function(){l=!0},function(){l=!1}),v.hover(function(){a=!0,s(),r()},function(){a=!1,r()}),v.bind("touchstart",function(t){t.originalEvent.touches.length&&(d=t.originalEvent.touches[0].pageY)}),v.bind("touchmove",function(t){t.originalEvent.preventDefault(),t.originalEvent.touches.length&&n((d-t.originalEvent.touches[0].pageY)/i.touchScrollStep,!0)});var x=function(t){if(a){t=t||window.event;var e=0;t.wheelDelta&&(e=-t.wheelDelta/120),t.detail&&(e=t.detail/3),n(e,!0),t.preventDefault&&!g&&t.preventDefault(),g||(t.returnValue=!1)}};!function(){window.addEventListener?(this.addEventListener("DOMMouseScroll",x,!1),this.addEventListener("mousewheel",x,!1)):document.attachEvent("onmousewheel",x)}(),o(),"bottom"==i.start?(_.css({top:v.outerHeight()-_.outerHeight()}),n(0,!0)):"object"==typeof i.start&&(n(t(i.start).position().top,null,!0),i.alwaysVisible||_.hide())}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),define("slimroll",["jquery"],function(){}),function(t){var e=0,i=null;t.fn.resetBreakpoints=function(){t(window).unbind("resize"),i&&clearInterval(i),e=0},t.fn.setBreakpoints=function(n){var o=jQuery.extend({distinct:!0,breakpoints:new Array(320,480,768,1024)},n);i=setInterval(function(){var i=t(window).width(),n=!1;for(var s in o.breakpoints.sort(function(t,e){return e-t})){if(!n&&i>=o.breakpoints[s]&&e<o.breakpoints[s]){if(o.distinct){for(var r in o.breakpoints.sort(function(t,e){return e-t}))t("body").hasClass("breakpoint-"+o.breakpoints[r])&&(t("body").removeClass("breakpoint-"+o.breakpoints[r]),t(window).trigger("exitBreakpoint"+o.breakpoints[r]));n=!0}t("body").addClass("breakpoint-"+o.breakpoints[s]),t(window).trigger("enterBreakpoint"+o.breakpoints[s])}i<o.breakpoints[s]&&e>=o.breakpoints[s]&&(t("body").removeClass("breakpoint-"+o.breakpoints[s]),t(window).trigger("exitBreakpoint"+o.breakpoints[s])),o.distinct&&i>=o.breakpoints[s]&&i<o.breakpoints[s-1]&&e>i&&e>0&&!t("body").hasClass("breakpoint-"+o.breakpoints[s])&&(t("body").addClass("breakpoint-"+o.breakpoints[s]),t(window).trigger("enterBreakpoint"+o.breakpoints[s]))}e!=i&&(e=i)},250)}}(jQuery),define("breakpoints",["jquery"],function(){}),function(t,e){if("object"==typeof exports&&exports)e(exports);else{var i={};e(i),"function"==typeof define&&define.amd?define("mustache",i):t.Mustache=i}}(this,function(t){function e(t,e){return h.call(t,e)}function i(t){return!e(f,t)}function n(t){return"function"==typeof t}function o(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(t){return String(t).replace(/[&<>"'\/]/g,function(t){return v[t]})}function r(t){if(!g(t)||2!==t.length)throw new Error("Invalid tags: "+t);return[new RegExp(o(t[0])+"\\s*"),new RegExp("\\s*"+o(t[1]))]}function a(e,n){function s(){if(T&&!M)for(;S.length;)delete k[S.pop()];else S=[];T=!1,M=!1}n=n||t.tags,e=e||"","string"==typeof n&&(n=n.split(_));for(var a,d,p,h,f,m,g=r(n),v=new u(e),C=[],k=[],S=[],T=!1,M=!1;!v.eos();){if(a=v.pos,p=v.scanUntil(g[0]))for(var z=0,D=p.length;D>z;++z)h=p.charAt(z),i(h)?S.push(k.length):M=!0,k.push(["text",h,a,a+1]),a+=1,"\n"===h&&s();if(!v.scan(g[0]))break;if(T=!0,d=v.scan(x)||"name",v.scan(y),"="===d?(p=v.scanUntil(b),v.scan(b),v.scanUntil(g[1])):"{"===d?(p=v.scanUntil(new RegExp("\\s*"+o("}"+n[1]))),v.scan(w),v.scanUntil(g[1]),d="&"):p=v.scanUntil(g[1]),!v.scan(g[1]))throw new Error("Unclosed tag at "+v.pos);if(f=[d,p,a,v.pos],k.push(f),"#"===d||"^"===d)C.push(f);else if("/"===d){if(m=C.pop(),!m)throw new Error('Unopened section "'+p+'" at '+a);if(m[1]!==p)throw new Error('Unclosed section "'+m[1]+'" at '+a)}else"name"===d||"{"===d||"&"===d?M=!0:"="===d&&(g=r(n=p.split(_)))}if(m=C.pop())throw new Error('Unclosed section "'+m[1]+'" at '+v.pos);return c(l(k))}function l(t){for(var e,i,n=[],o=0,s=t.length;s>o;++o)e=t[o],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function c(t){for(var e,i,n=[],o=n,s=[],r=0,a=t.length;a>r;++r)switch(e=t[r],e[0]){case"#":case"^":o.push(e),s.push(e),o=e[4]=[];break;case"/":i=s.pop(),i[5]=e[2],o=s.length>0?s[s.length-1][4]:n;break;default:o.push(e)}return n}function u(t){this.string=t,this.tail=t,this.pos=0}function d(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function p(){this.cache={}}var h=RegExp.prototype.test,f=/\S/,m=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===m.call(t)},v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},y=/\s*/,_=/\s+/,b=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(t){var e=this.tail.match(t);if(e&&0===e.index){var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i}return""},u.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},d.prototype.push=function(t){return new d(t,this)},d.prototype.lookup=function(t){var e;if(t in this.cache)e=this.cache[t];else{for(var i=this;i;){if(t.indexOf(".")>0){e=i.view;for(var o=t.split("."),s=0;null!=e&&s<o.length;)e=e[o[s++]]}else e=i.view[t];if(null!=e)break;i=i.parent}this.cache[t]=e}return n(e)&&(e=e.call(this.view)),e},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=a(t,e)),n},p.prototype.render=function(t,e,i){var n=this.parse(t),o=e instanceof d?e:new d(e);return this.renderTokens(n,o,i,t)},p.prototype.renderTokens=function(e,i,o,s){function r(t){return u.render(t,i,o)}for(var a,l,c="",u=this,d=0,p=e.length;p>d;++d)switch(a=e[d],a[0]){case"#":if(l=i.lookup(a[1]),!l)continue;if(g(l))for(var h=0,f=l.length;f>h;++h)c+=this.renderTokens(a[4],i.push(l[h]),o,s);else if("object"==typeof l||"string"==typeof l)c+=this.renderTokens(a[4],i.push(l),o,s);else if(n(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,s.slice(a[3],a[5]),r),null!=l&&(c+=l)}else c+=this.renderTokens(a[4],i,o,s);break;case"^":l=i.lookup(a[1]),(!l||g(l)&&0===l.length)&&(c+=this.renderTokens(a[4],i,o,s));break;case">":if(!o)continue;l=n(o)?o(a[1]):o[a[1]],null!=l&&(c+=this.renderTokens(this.parse(l),i,o,l));break;case"&":l=i.lookup(a[1]),null!=l&&(c+=l);break;case"name":l=i.lookup(a[1]),null!=l&&(c+=t.escape(l));break;case"text":c+=a[1]}return c},t.name="mustache.js",t.version="0.8.1",t.tags=["{{","}}"];var C=new p;t.clearCache=function(){return C.clearCache()},t.parse=function(t,e){return C.parse(t,e)},t.render=function(t,e,i){return C.render(t,e,i)},t.to_html=function(e,i,o,s){var r=t.render(e,i,o);return n(s)?void s(r):r},t.escape=s,t.Scanner=u,t.Context=d,t.Writer=p}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("spin",e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var o=["opacity",e,~~(100*t),i,n].join("-"),s=.01+i/n*100,r=Math.max(1-(1-t)/e*(100-s),t),a=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return p[o]||(h.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+r+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",h.cssRules.length),p[o]=1),o}function n(t,e){var i,n,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<d.length;n++)if(i=d[n]+e,void 0!==o[i])return i;return void 0!==o[e]?e:void 0}function o(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function s(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function r(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=s(t||{},l.defaults,f))}function c(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}h.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,n){function s(){return o(i("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function r(t,r,l){e(p,e(o(s(),{rotation:360/n.lines*t+"deg",left:~~r}),e(o(i("roundrect",{arcsize:n.corners}),{width:c,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),i("fill",{color:a(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l,c=n.length+n.width,u=2*c,d=2*-(n.width+n.length)+"px",p=o(s(),{position:"absolute",top:d,left:d});if(n.shadow)for(l=1;l<=n.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)r(l);return e(t,p)},l.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=o.childNodes[e+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var u,d=["webkit","Moz","ms","O"],p={},h=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},s(l.prototype,{spin:function(e){this.stop();var i,n,s=this,a=s.opts,l=s.el=o(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),c=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),n=r(e),i=r(l),o(l,{left:("auto"==a.left?n.x-i.x+(e.offsetWidth>>1):parseInt(a.left,10)+c)+"px",top:("auto"==a.top?n.y-i.y+(e.offsetHeight>>1):parseInt(a.top,10)+c)+"px"})),l.setAttribute("role","progressbar"),s.lines(l,s.opts),!u){var d,p=0,h=(a.lines-1)*(1-a.direction)/2,f=a.fps,m=f/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;!function y(){p++;for(var t=0;t<a.lines;t++)d=Math.max(1-(p+(a.lines-t)*v)%m*g,a.opacity),s.opacity(l,t*a.direction+h,d,a);s.timeout=s.el&&setTimeout(y,~~(1e3/f))}()}return s},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,s){function r(e,i){return o(t(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*c+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var l,c=0,d=(s.lines-1)*(1-s.direction)/2;c<s.lines;c++)l=o(t(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:u&&i(s.opacity,s.trail,d+c*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&e(l,o(r("#000","0 0 4px #000"),{top:"2px"})),e(n,e(l,r(a(s.color,c),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var m=o(t("group"),{behavior:"url(#default#VML)"});return!n(m,"transform")&&m.adj?c():u=n(m,"animation"),l}),function(t){if("object"==typeof exports)t(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define("jqueryspin",["jquery","spin"],t);else{if(!window.Spinner)throw new Error("Spin.js not present");t(window.jQuery,window.Spinner)}}(function(t,e){t.fn.spin=function(i,n){return this.each(function(){var o=t(this),s=o.data();s.spinner&&(s.spinner.stop(),delete s.spinner),i!==!1&&(i=t.extend({color:n||o.css("color")},t.fn.spin.presets[i]||i),s.spinner=new e(i).spin(this))})},t.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),!jQuery)throw new Error("Bootstrap requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]}}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e()})}(window.jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){function i(){s.trigger("closed.bs.alert").remove()}var n=t(this),o=n.attr("data-target");o||(o=n.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=t(o);e&&e.preventDefault(),s.length||(s=n.hasClass("alert")?n:n.parent()),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one(t.support.transition.end,i).emulateTransitionEnd(150):i())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(window.jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n)};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.is("input")?"val":"html",o=i.data();t+="Text",o.resetText||i.data("resetText",i[n]()),i[n](o[t]||this.options[t]),setTimeout(function(){"loadingText"==t?i.addClass(e).attr(e,e):i.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var e=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===e.prop("type")&&t.find(".active").removeClass("active")}this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var n=t(this),o=n.data("bs.button"),s="object"==typeof i&&i;o||n.data("bs.button",o=new e(this,s)),"toggle"==i?o.toggle():i&&o.setState(i)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle"),e.preventDefault()})}(window.jQuery),+function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var i=this,n=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),o=i||n[e](),s=this.interval,r="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[a]()}this.sliding=!0,s&&this.pause();var c=t.Event("slide.bs.carousel",{relatedTarget:o[0],direction:r});if(!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(c),c.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,n.addClass(r),o.addClass(r),n.one(t.support.transition.end,function(){o.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(c),c.isDefaultPrevented())return;n.removeClass("active"),o.addClass("active"),this.sliding=!1,
this.$element.trigger("slid")}return s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),s=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i),r="string"==typeof i?i:s.slide;o||n.data("bs.carousel",o=new e(this,s)),"number"==typeof i?o.to(i):r?o[r]():s.interval&&o.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var i,n=t(this),o=t(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),s=t.extend({},o.data(),n.data()),r=n.attr("data-slide-to");r&&(s.interval=!1),o.carousel(s),(r=n.attr("data-slide-to"))&&o.data("bs.carousel").to(r),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(window.jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var n=i.data("bs.collapse");if(n&&n.transitioning)return;i.collapse("hide"),n||i.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var r=t.camelCase(["scroll",o].join("-"));this.$element.one(t.support.transition.end,t.proxy(s,this)).emulateTransitionEnd(350)[o](this.$element[0][r])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one(t.support.transition.end,t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),s=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);o||n.data("bs.collapse",o=new e(this,s)),"string"==typeof i&&o[i]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var i,n=t(this),o=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=t(o),r=s.data("bs.collapse"),a=r?"toggle":n.data(),l=n.attr("data-parent"),c=l&&t(l);r&&r.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(n).addClass("collapsed"),n[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(a)})}(window.jQuery),+function(t){"use strict";function e(){t(n).remove(),t(o).each(function(e){var n=i(t(this));n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown")),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown"))})}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}var n=".dropdown-backdrop",o="[data-toggle=dropdown]",s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var s=i(o),r=s.hasClass("open");if(e(),!r){if("ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),s.trigger(n=t.Event("show.bs.dropdown")),n.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown"),o.focus()}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),r=s.hasClass("open");if(!r||r&&27==e.keyCode)return 27==e.which&&s.find(o).focus(),n.click();var a=t("[role=menu] li:not(.divider):visible a",s);if(a.length){var l=a.index(a.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus()}}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu]",s.prototype.keydown)}(window.jQuery),+function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show(),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one(t.support.transition.end,function(){i.$element.focus().trigger(o)}).emulateTransitionEnd(300):i.$element.focus().trigger(o)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var i=t.fn.modal;t.fn.modal=function(i,n){return this.each(function(){var o=t(this),s=o.data("bs.modal"),r=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i);s||o.data("bs.modal",s=new e(this,r)),"string"==typeof i?s[i](n):r.show&&s.show(n)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),o=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},o.data(),i.data());e.preventDefault(),o.modal(s,this).one("hide",function(){i.is(":visible")&&i.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n);for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focus",l="hover"==r?"mouseleave":"blur";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var n="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,s=o.test(n);s&&(n=n.replace(o,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(n),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),a=i[0].offsetWidth,l=i[0].offsetHeight;if(s){var c=this.$element.parent(),u=n,d=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:c.outerWidth(),h="body"==this.options.container?window.innerHeight:c.outerHeight(),f="body"==this.options.container?0:c.offset().left;n="bottom"==n&&r.top+r.height+l-d>h?"top":"top"==n&&r.top-d-l<0?"bottom":"right"==n&&r.right+a>p?"left":"left"==n&&r.left-a<f?"right":n,i.removeClass(u).addClass(n)}var m=this.getCalculatedOffset(n,r,a,l);this.applyPlacement(m,n),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var i,n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),t.top=t.top+r,t.left=t.left+a,n.offset(t).addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;if("top"==e&&c!=s&&(i=!0,t.top=t.top+s-c),/bottom|top/.test(e)){var u=0;t.left<0&&(u=-2*t.left,t.left=0,n.offset(t),l=n[0].offsetWidth,c=n[0].offsetHeight),this.replaceArrow(u-o+l,l,"left")}else this.replaceArrow(c-s,c,"top");i&&n.offset(t)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach()}var i=this,n=this.tip(),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof i&&i;o||n.data("bs.tooltip",o=new e(this,s)),"string"==typeof i&&o[i]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),o=n.data("bs.popover"),s="object"==typeof i&&i;o||n.data("bs.popover",o=new e(this,s)),"string"==typeof i&&o[i]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(window.jQuery),+function(t){"use strict";function e(i,n){var o,s=t.proxy(this.process,this);this.$element=t(t(i).is("body")?window:i),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||(o=t(i).attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);var i=this;this.$body.find(this.selector).map(function(){var n=t(this),o=n.data("target")||n.attr("href"),s=/^#\w/.test(o)&&t(o);return s&&s.length&&[[s[e]().top+(!t.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(e>=n)return r!=(t=s.last()[0])&&this.activate(t);for(t=o.length;t--;)r!=s[t]&&e>=o[t]&&(!o[t+1]||e<=o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parents(".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),s="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,s)),"string"==typeof i&&o[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.attr("data-target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a")[0],s=t.Event("show.bs.tab",{relatedTarget:o});if(e.trigger(s),!s.isDefaultPrevented()){var r=t(n);this.activate(e.parent("li"),i),this.activate(r,r.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:o})})}}},e.prototype.activate=function(e,i,n){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var s=i.find("> .active"),r=n&&t.support.transition&&s.hasClass("fade");r?s.one(t.support.transition.end,o).emulateTransitionEnd(150):o(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new e(this)),"string"==typeof i&&o[i]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),+function(t){"use strict";var e=function(i,n){this.options=t.extend({},e.DEFAULTS,n),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=this.unpin=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=t(document).height(),n=this.$window.scrollTop(),o=this.$element.offset(),s=this.options.offset,r=s.top,a=s.bottom;"object"!=typeof s&&(a=r=s),"function"==typeof r&&(r=s.top()),"function"==typeof a&&(a=s.bottom());var l=null!=this.unpin&&n+this.unpin<=o.top?!1:null!=a&&o.top+this.$element.height()>=i-a?"bottom":null!=r&&r>=n?"top":!1;this.affixed!==l&&(this.unpin&&this.$element.css("top",""),this.affixed=l,this.unpin="bottom"==l?o.top-n:null,this.$element.removeClass(e.RESET).addClass("affix"+(l?"-"+l:"")),"bottom"==l&&this.$element.offset({top:document.body.offsetHeight-a-this.$element.height()}))}};var i=t.fn.affix;t.fn.affix=function(i){return this.each(function(){var n=t(this),o=n.data("bs.affix"),s="object"==typeof i&&i;o||n.data("bs.affix",o=new e(this,s)),"string"==typeof i&&o[i]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),function(t){function e(e,o,s,r,a){function l(){f.unbind("webkitTransitionEnd transitionend otransitionend oTransitionEnd"),o&&i(o,s,r,a),a.startOrder=[],a.newOrder=[],a.origSort=[],a.checkSort=[],h.removeStyle(a.prefix+"filter, filter, "+a.prefix+"transform, transform, opacity, display").css(a.clean).removeAttr("data-checksum"),window.atob||h.css({display:"none",opacity:"0"}),f.removeStyle(a.prefix+"transition, transition, "+a.prefix+"perspective, perspective, "+a.prefix+"perspective-origin, perspective-origin, "+(a.resizeContainer?"height":"")),"list"==a.layoutMode?(m.css({display:a.targetDisplayList,opacity:"1"}),a.origDisplay=a.targetDisplayList):(m.css({display:a.targetDisplayGrid,opacity:"1"}),a.origDisplay=a.targetDisplayGrid),a.origLayout=a.layoutMode,setTimeout(function(){if(h.removeStyle(a.prefix+"transition, transition"),a.mixing=!1,"function"==typeof a.onMixEnd){var t=a.onMixEnd.call(this,a);a=t?t:a}})}if(clearInterval(a.failsafe),a.mixing=!0,a.filter=e,"function"==typeof a.onMixStart){var c=a.onMixStart.call(this,a);a=c?c:a}for(var u=a.transitionSpeed,c=0;2>c;c++){var d=0==c?d=a.prefix:"";a.transition[d+"transition"]="all "+u+"ms linear",a.transition[d+"transform"]=d+"translate3d(0,0,0)",a.perspective[d+"perspective"]=a.perspectiveDistance+"px",a.perspective[d+"perspective-origin"]=a.perspectiveOrigin}var p=a.targetSelector,h=r.find(p);h.each(function(){this.data={}});var f=h.parent();f.css(a.perspective),a.easingFallback="ease-in-out","smooth"==a.easing&&(a.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)"),"snap"==a.easing&&(a.easing="cubic-bezier(0.77, 0, 0.175, 1)"),"windback"==a.easing&&(a.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",a.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)"),"windup"==a.easing&&(a.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",a.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)"),c="list"==a.layoutMode&&null!=a.listEffects?a.listEffects:a.effects,Array.prototype.indexOf&&(a.fade=-1<c.indexOf("fade")?"0":"",a.scale=-1<c.indexOf("scale")?"scale(.01)":"",a.rotateZ=-1<c.indexOf("rotateZ")?"rotate(180deg)":"",a.rotateY=-1<c.indexOf("rotateY")?"rotateY(90deg)":"",a.rotateX=-1<c.indexOf("rotateX")?"rotateX(90deg)":"",a.blur=-1<c.indexOf("blur")?"blur(8px)":"",a.grayscale=-1<c.indexOf("grayscale")?"grayscale(100%)":"");var m=t(),g=t(),v=[],y=!1;"string"==typeof e?v=n(e):(y=!0,t.each(e,function(t){v[t]=n(this)})),"or"==a.filterLogic?(""==v[0]&&v.shift(),1>v.length?g=g.add(r.find(p+":visible")):h.each(function(){var e=t(this);if(y){var i=0;t.each(v,function(){this.length?e.is("."+this.join(", ."))&&i++:i>0&&i++}),i==v.length?m=m.add(e):g=g.add(e)}else e.is("."+v.join(", ."))?m=m.add(e):g=g.add(e)})):(m=m.add(f.find(p+"."+v.join("."))),g=g.add(f.find(p+":not(."+v.join(".")+"):visible"))),e=m.length;var _=t(),b=t(),w=t();if(g.each(function(){var e=t(this);"none"!=e.css("display")&&(_=_.add(e),w=w.add(e))}),m.filter(":visible").length==e&&!_.length&&!o){if(a.origLayout==a.layoutMode)return l(),!1;if(1==m.length)return"list"==a.layoutMode?(r.addClass(a.listClass),r.removeClass(a.gridClass),w.css("display",a.targetDisplayList)):(r.addClass(a.gridClass),r.removeClass(a.listClass),w.css("display",a.targetDisplayGrid)),l(),!1}if(a.origHeight=f.height(),m.length){if(r.removeClass(a.failClass),m.each(function(){var e=t(this);"none"==e.css("display")?b=b.add(e):w=w.add(e)}),a.origLayout!=a.layoutMode&&0==a.animateGridList)return"list"==a.layoutMode?(r.addClass(a.listClass),r.removeClass(a.gridClass),w.css("display",a.targetDisplayList)):(r.addClass(a.gridClass),r.removeClass(a.listClass),w.css("display",a.targetDisplayGrid)),l(),!1;if(!window.atob)return l(),!1;if(h.css(a.clean),w.each(function(){this.data.origPos=t(this).offset()}),"list"==a.layoutMode?(r.addClass(a.listClass),r.removeClass(a.gridClass),b.css("display",a.targetDisplayList)):(r.addClass(a.gridClass),r.removeClass(a.listClass),b.css("display",a.targetDisplayGrid)),b.each(function(){this.data.showInterPos=t(this).offset()}),_.each(function(){this.data.hideInterPos=t(this).offset()}),w.each(function(){this.data.preInterPos=t(this).offset()}),"list"==a.layoutMode?w.css("display",a.targetDisplayList):w.css("display",a.targetDisplayGrid),o&&i(o,s,r,a),e=o)t:if(e=a.origSort,c=a.checkSort,e.length!=c.length)e=!1;else{for(d=0;d<c.length;d++)if(e[d].compare&&!e[d].compare(c[d])||e[d]!==c[d]){e=!1;break t}e=!0}if(e)return l(),!1;for(_.hide(),b.each(function(){this.data.finalPos=t(this).offset()}),w.each(function(){this.data.finalPrePos=t(this).offset()}),a.newHeight=f.height(),o&&i("reset",null,r,a),b.hide(),w.css("display",a.origDisplay),"block"==a.origDisplay?(r.addClass(a.listClass),b.css("display",a.targetDisplayList)):(r.removeClass(a.listClass),b.css("display",a.targetDisplayGrid)),a.resizeContainer&&f.css("height",a.origHeight+"px"),e={},c=0;2>c;c++)d=0==c?d=a.prefix:"",e[d+"transform"]=a.scale+" "+a.rotateX+" "+a.rotateY+" "+a.rotateZ,e[d+"filter"]=a.blur+" "+a.grayscale;b.css(e),w.each(function(){var e=this.data,i=t(this);i.hasClass("mix_tohide")?(e.preTX=e.origPos.left-e.hideInterPos.left,e.preTY=e.origPos.top-e.hideInterPos.top):(e.preTX=e.origPos.left-e.preInterPos.left,e.preTY=e.origPos.top-e.preInterPos.top);for(var n={},o=0;2>o;o++){var s=0==o?s=a.prefix:"";n[s+"transform"]="translate("+e.preTX+"px,"+e.preTY+"px)"}i.css(n)}),"list"==a.layoutMode?(r.addClass(a.listClass),r.removeClass(a.gridClass)):(r.addClass(a.gridClass),r.removeClass(a.listClass)),setTimeout(function(){if(a.resizeContainer){for(var e={},i=0;2>i;i++){var n=0==i?n=a.prefix:"";e[n+"transition"]="all "+u+"ms ease-in-out",e.height=a.newHeight+"px"}f.css(e)}for(_.css("opacity",a.fade),b.css("opacity",1),b.each(function(){var e=this.data;e.tX=e.finalPos.left-e.showInterPos.left,e.tY=e.finalPos.top-e.showInterPos.top;for(var i={},n=0;2>n;n++){var o=0==n?o=a.prefix:"";i[o+"transition-property"]=o+"transform, "+o+"filter, opacity",i[o+"transition-timing-function"]=a.easing+", linear, linear",i[o+"transition-duration"]=u+"ms",i[o+"transition-delay"]="0",i[o+"transform"]="translate("+e.tX+"px,"+e.tY+"px)",i[o+"filter"]="none"}t(this).css("-webkit-transition","all "+u+"ms "+a.easingFallback).css(i)}),w.each(function(){var e=this.data;e.tX=0!=e.finalPrePos.left?e.finalPrePos.left-e.preInterPos.left:0,e.tY=0!=e.finalPrePos.left?e.finalPrePos.top-e.preInterPos.top:0;for(var i={},n=0;2>n;n++){var o=0==n?o=a.prefix:"";i[o+"transition"]="all "+u+"ms "+a.easing,i[o+"transform"]="translate("+e.tX+"px,"+e.tY+"px)"}t(this).css("-webkit-transition","all "+u+"ms "+a.easingFallback).css(i)}),e={},i=0;2>i;i++)n=0==i?n=a.prefix:"",e[n+"transition"]="all "+u+"ms "+a.easing+", "+n+"filter "+u+"ms linear, opacity "+u+"ms linear",e[n+"transform"]=a.scale+" "+a.rotateX+" "+a.rotateY+" "+a.rotateZ,e[n+"filter"]=a.blur+" "+a.grayscale,e.opacity=a.fade;_.css(e),f.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(e){(-1<e.originalEvent.propertyName.indexOf("transform")||-1<e.originalEvent.propertyName.indexOf("opacity"))&&(-1<p.indexOf(".")?t(e.target).hasClass(p.replace(".",""))&&l():t(e.target).is(p)&&l())})},10),a.failsafe=setTimeout(function(){a.mixing&&l()},u+400)}else{if(a.resizeContainer&&f.css("height",a.origHeight+"px"),!window.atob)return l(),!1;_=g,setTimeout(function(){if(f.css(a.perspective),a.resizeContainer){for(var t={},e=0;2>e;e++){var i=0==e?i=a.prefix:"";t[i+"transition"]="height "+u+"ms ease-in-out",t.height=a.minHeight+"px"}f.css(t)}if(h.css(a.transition),g.length){for(t={},e=0;2>e;e++)i=0==e?i=a.prefix:"",t[i+"transform"]=a.scale+" "+a.rotateX+" "+a.rotateY+" "+a.rotateZ,t[i+"filter"]=a.blur+" "+a.grayscale,t.opacity=a.fade;_.css(t),f.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(t){(-1<t.originalEvent.propertyName.indexOf("transform")||-1<t.originalEvent.propertyName.indexOf("opacity"))&&(r.addClass(a.failClass),l())})}else a.mixing=!1},10)}}function i(e,i,n,o){function s(t,i){var n=isNaN(1*t.attr(e))?t.attr(e).toLowerCase():1*t.attr(e),o=isNaN(1*i.attr(e))?i.attr(e).toLowerCase():1*i.attr(e);return o>n?-1:n>o?1:0}function r(t){"asc"==i?a.prepend(t).prepend(" "):a.append(t).append(" ")}n.find(o.targetSelector).wrapAll('<div class="mix_sorter"/>');var a=n.find(".mix_sorter");if(o.origSort.length||a.find(o.targetSelector+":visible").each(function(){t(this).wrap("<s/>"),o.origSort.push(t(this).parent().html().replace(/\s+/g,"")),t(this).unwrap()}),a.empty(),"reset"==e)t.each(o.startOrder,function(){a.append(this).append(" ")});else if("default"==e)t.each(o.origOrder,function(){r(this)});else if("random"==e){if(!o.newOrder.length){for(var l=o.startOrder.slice(),c=l.length,u=c;u--;){var d=parseInt(Math.random()*c),p=l[u];l[u]=l[d],l[d]=p}o.newOrder=l}t.each(o.newOrder,function(){a.append(this).append(" ")})}else if("custom"==e)t.each(i,function(){r(this)});else{if("undefined"==typeof o.origOrder[0].attr(e))return console.log("No such attribute found. Terminating"),!1;o.newOrder.length||(t.each(o.origOrder,function(){o.newOrder.push(t(this))}),o.newOrder.sort(s)),t.each(o.newOrder,function(){r(this)})}o.checkSort=[],a.find(o.targetSelector+":visible").each(function(e){var i=t(this);0==e&&i.attr("data-checksum","1"),i.wrap("<s/>"),o.checkSort.push(i.parent().html().replace(/\s+/g,"")),i.unwrap()}),n.find(o.targetSelector).unwrap()}function n(e){e=e.replace(/\s{2,}/g," ");var i=e.split(" ");return t.each(i,function(t){"all"==this&&(i[t]="mix_all")}),""==i[0]&&i.shift(),i}var o={init:function(n){return this.each(function(){var o={targetSelector:".mix",filterSelector:".filter",
sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};n&&t.extend(o,n),this.config=o,t.support.touch="ontouchend"in document,t.support.touch&&(o.isTouch=!0,o.resetDelay=350),o.container=t(this);var s,r=o.container;t:{s=r[0];for(var a=["Webkit","Moz","O","ms"],l=0;l<a.length;l++)if(a[l]+"Transition"in s.style){s=a[l];break t}s="transition"in s.style?"":!1}if(o.prefix=s,o.prefix=o.prefix?"-"+o.prefix.toLowerCase()+"-":"",r.find(o.targetSelector).each(function(){o.origOrder.push(t(this))}),o.sortOnLoad){var c;t.isArray(o.sortOnLoad)?(s=o.sortOnLoad[0],c=o.sortOnLoad[1],t(o.sortSelector+"[data-sort="+o.sortOnLoad[0]+"][data-order="+o.sortOnLoad[1]+"]").addClass("active")):(t(o.sortSelector+"[data-sort="+o.sortOnLoad+"]").addClass("active"),s=o.sortOnLoad,o.sortOnLoad="desc"),i(s,c,r,o)}for(c=0;2>c;c++)s=0==c?s=o.prefix:"",o.transition[s+"transition"]="all "+o.transitionSpeed+"ms ease-in-out",o.perspective[s+"perspective"]=o.perspectiveDistance+"px",o.perspective[s+"perspective-origin"]=o.perspectiveOrigin;for(c=0;2>c;c++)s=0==c?s=o.prefix:"",o.clean[s+"transition"]="none";"list"==o.layoutMode?(r.addClass(o.listClass),o.origDisplay=o.targetDisplayList):(r.addClass(o.gridClass),o.origDisplay=o.targetDisplayGrid),o.origLayout=o.layoutMode,c=o.showOnLoad.split(" "),t.each(c,function(){t(o.filterSelector+'[data-filter="'+this+'"]').addClass("active")}),r.find(o.targetSelector).addClass("mix_all"),"all"==c[0]&&(c[0]="mix_all",o.showOnLoad="mix_all");var u=t();t.each(c,function(){u=u.add(t("."+this))}),u.each(function(){var e=t(this);"list"==o.layoutMode?e.css("display",o.targetDisplayList):e.css("display",o.targetDisplayGrid),e.css(o.transition)}),setTimeout(function(){o.mixing=!0,u.css("opacity","1"),setTimeout(function(){if("list"==o.layoutMode?u.removeStyle(o.prefix+"transition, transition").css({display:o.targetDisplayList,opacity:1}):u.removeStyle(o.prefix+"transition, transition").css({display:o.targetDisplayGrid,opacity:1}),o.mixing=!1,"function"==typeof o.onMixLoad){var t=o.onMixLoad.call(this,o);o=t?t:o}},o.transitionSpeed)},10),o.filter=o.showOnLoad,t(o.sortSelector).bind(o.buttonEvent,function(){if(!o.mixing){var i=t(this),n=i.attr("data-sort"),s=i.attr("data-order");if(i.hasClass("active")){if("random"!=n)return!1}else t(o.sortSelector).removeClass("active"),i.addClass("active");r.find(o.targetSelector).each(function(){o.startOrder.push(t(this))}),e(o.filter,n,s,r,o)}}),t(o.filterSelector).bind(o.buttonEvent,function(){if(!o.mixing){var i=t(this);if(0==o.multiFilter)t(o.filterSelector).removeClass("active"),i.addClass("active"),o.filter=i.attr("data-filter"),t(o.filterSelector+'[data-filter="'+o.filter+'"]').addClass("active");else{var n=i.attr("data-filter");i.hasClass("active")?(i.removeClass("active"),o.filter=o.filter.replace(RegExp("(\\s|^)"+n),"")):(i.addClass("active"),o.filter=o.filter+" "+n)}e(o.filter,null,null,r,o)}})})},toGrid:function(){return this.each(function(){var i=this.config;"grid"!=i.layoutMode&&(i.layoutMode="grid",e(i.filter,null,null,t(this),i))})},toList:function(){return this.each(function(){var i=this.config;"list"!=i.layoutMode&&(i.layoutMode="list",e(i.filter,null,null,t(this),i))})},filter:function(i){return this.each(function(){var n=this.config;n.mixing||(t(n.filterSelector).removeClass("active"),t(n.filterSelector+'[data-filter="'+i+'"]').addClass("active"),e(i,null,null,t(this),n))})},sort:function(i){return this.each(function(){var n=this.config,o=t(this);if(!n.mixing){if(t(n.sortSelector).removeClass("active"),t.isArray(i)){var s=i[0],r=i[1];t(n.sortSelector+'[data-sort="'+i[0]+'"][data-order="'+i[1]+'"]').addClass("active")}else t(n.sortSelector+'[data-sort="'+i+'"]').addClass("active"),s=i,r="desc";o.find(n.targetSelector).each(function(){n.startOrder.push(t(this))}),e(n.filter,s,r,o,n)}})},multimix:function(i){return this.each(function(){var n=this.config,o=t(this);multiOut={filter:n.filter,sort:null,order:"desc",layoutMode:n.layoutMode},t.extend(multiOut,i),n.mixing||(t(n.filterSelector).add(n.sortSelector).removeClass("active"),t(n.filterSelector+'[data-filter="'+multiOut.filter+'"]').addClass("active"),"undefined"!=typeof multiOut.sort&&(t(n.sortSelector+'[data-sort="'+multiOut.sort+'"][data-order="'+multiOut.order+'"]').addClass("active"),o.find(n.targetSelector).each(function(){n.startOrder.push(t(this))})),n.layoutMode=multiOut.layoutMode,e(multiOut.filter,multiOut.sort,multiOut.order,o,n))})},remix:function(i){return this.each(function(){var n=this.config,o=t(this);n.origOrder=[],o.find(n.targetSelector).each(function(){var e=t(this);e.addClass("mix_all"),n.origOrder.push(e)}),!n.mixing&&"undefined"!=typeof i&&(t(n.filterSelector).removeClass("active"),t(n.filterSelector+'[data-filter="'+i+'"]').addClass("active"),e(i,null,null,o,n))})}};t.fn.mixitup=function(t,e){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:o.init.apply(this,arguments)},t.fn.removeStyle=function(e){return this.each(function(){var i=t(this);e=e.replace(/\s+/g,"");var n=e.split(",");t.each(n,function(){var t=RegExp(this.toString()+"[^;]+;?","g");i.attr("style",function(e,i){return i?i.replace(t,""):void 0})})})}}(jQuery),define("mixitup",["jquery"],function(){}),!function(t){"use strict";t.extend({tablesorter:new function(){function e(){var t=arguments[0],e=arguments.length>1?Array.prototype.slice.call(arguments):t;"undefined"!=typeof console&&"undefined"!=typeof console.log?console[/error/i.test(t)?"error":/warn/i.test(t)?"warn":"log"](e):alert(e)}function i(t,i){e(t+" ("+((new Date).getTime()-i.getTime())+"ms)")}function n(t){for(var e in t)return!1;return!0}function o(e,i,n){if(!i)return"";var o,s=e.config,r=s.textExtraction||"",a="";return a="basic"===r?t(i).attr(s.textAttribute)||i.textContent||i.innerText||t(i).text()||"":"function"==typeof r?r(i,e,n):"function"==typeof(o=x.getColumnData(e,r,n))?o(i,e,n):i.textContent||i.innerText||t(i).text()||"",t.trim(a)}function s(t,i,n,s){for(var r,a=x.parsers.length,l=!1,c="",u=!0;""===c&&u;)n++,i[n]?(l=i[n].cells[s],c=o(t,l,s),t.config.debug&&e("Checking if value was empty on row "+n+", column: "+s+': "'+c+'"')):u=!1;for(;--a>=0;)if(r=x.parsers[a],r&&"text"!==r.id&&r.is&&r.is(c,t,l))return r;return x.getParserById("text")}function r(t){var n,o,r,a,l,c,u,d,p,h,f=t.config,m=f.$tbodies=f.$table.children("tbody:not(."+f.cssInfoBlock+")"),g=0,v="",y=m.length;if(0===y)return f.debug?e("Warning: *Empty table!* Not building a parser cache"):"";for(f.debug&&(h=new Date,e("Detecting parsers for each column")),o={extractors:[],parsers:[]};y>g;){if(n=m[g].rows,n[g])for(r=f.columns,a=0;r>a;a++)l=f.$headers.filter('[data-column="'+a+'"]:last'),c=x.getColumnData(t,f.headers,a),p=x.getParserById(x.getData(l,c,"extractor")),d=x.getParserById(x.getData(l,c,"sorter")),u="false"===x.getData(l,c,"parser"),f.empties[a]=x.getData(l,c,"empty")||f.emptyTo||(f.emptyToBottom?"bottom":"top"),f.strings[a]=x.getData(l,c,"string")||f.stringTo||"max",u&&(d=x.getParserById("no-parser")),p||(p=!1),d||(d=s(t,n,-1,a)),f.debug&&(v+="column:"+a+"; extractor:"+p.id+"; parser:"+d.id+"; string:"+f.strings[a]+"; empty: "+f.empties[a]+"\n"),o.parsers[a]=d,o.extractors[a]=p;g+=o.parsers.length?y:1}f.debug&&(e(v?v:"No parsers detected"),i("Completed detecting parsers",h)),f.parsers=o.parsers,f.extractors=o.extractors}function a(n){var s,r,a,l,c,u,d,p,h,f,m,g,v,y,_=n.config,b=_.$table.children("tbody"),w=_.extractors,C=_.parsers;if(_.cache={},_.totalRows=0,!C)return _.debug?e("Warning: *Empty table!* Not building a cache"):"";for(_.debug&&(m=new Date),_.showProcessing&&x.isProcessing(n,!0),d=0;d<b.length;d++)if(y=[],s=_.cache[d]={normalized:[]},!b.eq(d).hasClass(_.cssInfoBlock)){for(g=b[d]&&b[d].rows.length||0,c=0;g>c;++c)if(v={child:[]},p=t(b[d].rows[c]),h=[new Array(_.columns)],f=[],p.hasClass(_.cssChildRow)&&0!==c)r=s.normalized.length-1,s.normalized[r][_.columns].$row=s.normalized[r][_.columns].$row.add(p),p.prev().hasClass(_.cssChildRow)||p.prev().addClass(x.css.cssHasChild),v.child[r]=t.trim(p[0].textContent||p[0].innerText||p.text()||"");else{for(v.$row=p,v.order=c,u=0;u<_.columns;++u)"undefined"!=typeof C[u]?(r=o(n,p[0].cells[u],u),a="undefined"==typeof w[u].id?r:w[u].format(r,n,p[0].cells[u],u),l="no-parser"===C[u].id?"":C[u].format(a,n,p[0].cells[u],u),f.push(_.ignoreCase&&"string"==typeof l?l.toLowerCase():l),"numeric"===(C[u].type||"").toLowerCase()&&(y[u]=Math.max(Math.abs(l)||0,y[u]||0))):_.debug&&e("No parser found for cell:",p[0].cells[u],"does it have a header?");f[_.columns]=v,s.normalized.push(f)}s.colMax=y,_.totalRows+=s.normalized.length}_.showProcessing&&x.isProcessing(n),_.debug&&i("Building cache for "+g+" rows",m)}function l(e,o){var s,r,a,l,c,u,d,p=e.config,h=p.widgetOptions,f=e.tBodies,m=[],g=p.cache;if(n(g))return p.appender?p.appender(e,m):e.isUpdating?p.$table.trigger("updateComplete",e):"";for(p.debug&&(d=new Date),u=0;u<f.length;u++)if(a=t(f[u]),a.length&&!a.hasClass(p.cssInfoBlock)){for(l=x.processTbody(e,a,!0),s=g[u].normalized,r=s.length,c=0;r>c;c++)m.push(s[c][p.columns].$row),p.appender&&(!p.pager||p.pager.removeRows&&h.pager_removeRows||p.pager.ajax)||l.append(s[c][p.columns].$row);x.processTbody(e,l,!1)}p.appender&&p.appender(e,m),p.debug&&i("Rebuilt table",d),o||p.appender||x.applyWidget(e),e.isUpdating&&p.$table.trigger("updateComplete",e)}function c(t){return/^d/i.test(t)||1===t}function u(n){var o,s,r,a,l,u,d,h=n.config;h.headerList=[],h.headerContent=[],h.debug&&(d=new Date),h.columns=x.computeColumnIndex(h.$table.children("thead, tfoot").children("tr")),a=h.cssIcon?'<i class="'+(h.cssIcon===x.css.icon?x.css.icon:h.cssIcon+" "+x.css.icon)+'"></i>':"",h.$headers=t(n).find(h.selectorHeaders).each(function(e){s=t(this),o=x.getColumnData(n,h.headers,e,!0),h.headerContent[e]=t(this).html(),l=h.headerTemplate.replace(/\{content\}/g,t(this).html()).replace(/\{icon\}/g,a),h.onRenderTemplate&&(r=h.onRenderTemplate.apply(s,[e,l]),r&&"string"==typeof r&&(l=r)),t(this).html('<div class="'+x.css.headerIn+'">'+l+"</div>"),h.onRenderHeader&&h.onRenderHeader.apply(s,[e]),this.column=parseInt(t(this).attr("data-column"),10),this.order=c(x.getData(s,o,"sortInitialOrder")||h.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,u=x.getData(s,o,"lockedOrder")||!1,"undefined"!=typeof u&&u!==!1&&(this.order=this.lockedOrder=c(u)?[1,1,1]:[0,0,0]),s.addClass(x.css.header+" "+h.cssHeader),h.headerList[e]=this,s.parent().addClass(x.css.headerRow+" "+h.cssHeaderRow).attr("role","row"),h.tabIndex&&s.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"}),p(n),h.debug&&(i("Built headers:",d),e(h.$headers))}function d(t,e,i){var n=t.config;n.$table.find(n.selectorRemove).remove(),r(t),a(t),b(n.$table,e,i)}function p(e){var i,n,o,s=e.config;s.$headers.each(function(r,a){n=t(a),o=x.getColumnData(e,s.headers,r,!0),i="false"===x.getData(a,o,"sorter")||"false"===x.getData(a,o,"parser"),a.sortDisabled=i,n[i?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+i),e.id&&(i?n.removeAttr("aria-controls"):n.attr("aria-controls",e.id))})}function h(e){var i,n,o,s=e.config,r=s.sortList,a=r.length,l=x.css.sortNone+" "+s.cssNone,c=[x.css.sortAsc+" "+s.cssAsc,x.css.sortDesc+" "+s.cssDesc],u=["ascending","descending"],d=t(e).find("tfoot tr").children().add(s.$extraHeaders).removeClass(c.join(" "));for(s.$headers.removeClass(c.join(" ")).addClass(l).attr("aria-sort","none"),n=0;a>n;n++)if(2!==r[n][1]&&(i=s.$headers.not(".sorter-false").filter('[data-column="'+r[n][0]+'"]'+(1===a?":last":"")),i.length)){for(o=0;o<i.length;o++)i[o].sortDisabled||i.eq(o).removeClass(l).addClass(c[r[n][1]]).attr("aria-sort",u[r[n][1]]);d.length&&d.filter('[data-column="'+r[n][0]+'"]').removeClass(l).addClass(c[r[n][1]])}s.$headers.not(".sorter-false").each(function(){var e=t(this),i=this.order[(this.count+1)%(s.sortReset?3:2)],n=e.text()+": "+x.language[e.hasClass(x.css.sortAsc)?"sortAsc":e.hasClass(x.css.sortDesc)?"sortDesc":"sortNone"]+x.language[0===i?"nextAsc":1===i?"nextDesc":"nextNone"];e.attr("aria-label",n)})}function f(e){if(e.config.widthFixed&&0===t(e).find("colgroup").length){var i=t("<colgroup>"),n=t(e).width();t(e.tBodies[0]).find("tr:first").children(":visible").each(function(){i.append(t("<col>").css("width",parseInt(t(this).width()/n*1e3,10)/10+"%"))}),t(e).prepend(i)}}function m(e,i){var n,o,s,r,a,l=e.config,c=i||l.sortList;l.sortList=[],t.each(c,function(e,i){if(r=parseInt(i[0],10),s=l.$headers.filter('[data-column="'+r+'"]:last')[0]){switch(o=(""+i[1]).match(/^(1|d|s|o|n)/),o=o?o[0]:""){case"1":case"d":o=1;break;case"s":o=a||0;break;case"o":n=s.order[(a||0)%(l.sortReset?3:2)],o=0===n?1:1===n?0:2;break;case"n":s.count=s.count+1,o=s.order[s.count%(l.sortReset?3:2)];break;default:o=0}a=0===e?o:a,n=[r,parseInt(o,10)||0],l.sortList.push(n),o=t.inArray(n[1],s.order),s.count=o>=0?o:n[1]%(l.sortReset?3:2)}})}function g(t,e){return t&&t[e]?t[e].type||"":""}function v(e,i,n){if(e.isUpdating)return setTimeout(function(){v(e,i,n)},50);var o,s,r,a,c,u=e.config,d=!n[u.sortMultiSortKey],p=u.$table;if(p.trigger("sortStart",e),i.count=n[u.sortResetKey]?2:(i.count+1)%(u.sortReset?3:2),u.sortRestart&&(s=i,u.$headers.each(function(){this===s||!d&&t(this).is("."+x.css.sortDesc+",."+x.css.sortAsc)||(this.count=-1)})),s=i.column,d){if(u.sortList=[],null!==u.sortForce)for(o=u.sortForce,r=0;r<o.length;r++)o[r][0]!==s&&u.sortList.push(o[r]);if(a=i.order[i.count],2>a&&(u.sortList.push([s,a]),i.colSpan>1))for(r=1;r<i.colSpan;r++)u.sortList.push([s+r,a])}else{if(u.sortAppend&&u.sortList.length>1)for(r=0;r<u.sortAppend.length;r++)c=x.isValueInArray(u.sortAppend[r][0],u.sortList),c>=0&&u.sortList.splice(c,1);if(x.isValueInArray(s,u.sortList)>=0)for(r=0;r<u.sortList.length;r++)c=u.sortList[r],a=u.$headers.filter('[data-column="'+c[0]+'"]:last')[0],c[0]===s&&(c[1]=a.order[i.count],2===c[1]&&(u.sortList.splice(r,1),a.count=-1));else if(a=i.order[i.count],2>a&&(u.sortList.push([s,a]),i.colSpan>1))for(r=1;r<i.colSpan;r++)u.sortList.push([s+r,a])}if(null!==u.sortAppend)for(o=u.sortAppend,r=0;r<o.length;r++)o[r][0]!==s&&u.sortList.push(o[r]);p.trigger("sortBegin",e),setTimeout(function(){h(e),y(e),l(e),p.trigger("sortEnd",e)},1)}function y(t){var e,o,s,r,a,l,c,u,d,p,h,f=0,m=t.config,v=m.textSorter||"",y=m.sortList,_=y.length,b=t.tBodies.length;if(!m.serverSideSorting&&!n(m.cache)){for(m.debug&&(a=new Date),o=0;b>o;o++)l=m.cache[o].colMax,c=m.cache[o].normalized,c.sort(function(i,n){for(e=0;_>e;e++){if(r=y[e][0],u=y[e][1],f=0===u,m.sortStable&&i[r]===n[r]&&1===_)return i[m.columns].order-n[m.columns].order;if(s=/n/i.test(g(m.parsers,r)),s&&m.strings[r]?(s="boolean"==typeof m.string[m.strings[r]]?(f?1:-1)*(m.string[m.strings[r]]?-1:1):m.strings[r]?m.string[m.strings[r]]||0:0,d=m.numberSorter?m.numberSorter(i[r],n[r],f,l[r],t):x["sortNumeric"+(f?"Asc":"Desc")](i[r],n[r],s,l[r],r,t)):(p=f?i:n,h=f?n:i,d="function"==typeof v?v(p[r],h[r],f,r,t):"object"==typeof v&&v.hasOwnProperty(r)?v[r](p[r],h[r],f,r,t):x["sortNatural"+(f?"Asc":"Desc")](i[r],n[r],r,t,m)),d)return d}return i[m.columns].order-n[m.columns].order});m.debug&&i("Sorting on "+y.toString()+" and dir "+u+" time",a)}}function _(e,i){var n=e[0];n.isUpdating&&e.trigger("updateComplete"),t.isFunction(i)&&i(e[0])}function b(t,e,i){var n=t[0].config.sortList;e!==!1&&!t[0].isProcessing&&n.length?t.trigger("sorton",[n,function(){_(t,i)},!0]):(_(t,i),x.applyWidget(t[0],!1))}function w(e){var i=e.config,s=i.$table;s.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(i.namespace+" ")).bind("sortReset"+i.namespace,function(n,o){n.stopPropagation(),i.sortList=[],h(e),y(e),l(e),t.isFunction(o)&&o(e)}).bind("updateAll"+i.namespace,function(t,n,o){t.stopPropagation(),e.isUpdating=!0,x.refreshWidgets(e,!0,!0),x.restoreHeaders(e),u(e),x.bindEvents(e,i.$headers,!0),w(e),d(e,n,o)}).bind("update"+i.namespace+" updateRows"+i.namespace,function(t,i,n){t.stopPropagation(),e.isUpdating=!0,p(e),d(e,i,n)}).bind("updateCell"+i.namespace,function(n,r,a,l){n.stopPropagation(),e.isUpdating=!0,s.find(i.selectorRemove).remove();var c,u,d,p,h=s.find("tbody"),f=t(r),m=h.index(t.fn.closest?f.closest("tbody"):f.parents("tbody").filter(":first")),g=t.fn.closest?f.closest("tr"):f.parents("tr").filter(":first");r=f[0],h.length&&m>=0&&(d=h.eq(m).find("tr").index(g),p=f.index(),i.cache[m].normalized[d][i.columns].$row=g,u="undefined"==typeof i.extractors[p].id?o(e,r,p):i.extractors[p].format(o(e,r,p),e,r,p),c="no-parser"===i.parsers[p].id?"":i.parsers[p].format(u,e,r,p),i.cache[m].normalized[d][p]=i.ignoreCase&&"string"==typeof c?c.toLowerCase():c,"numeric"===(i.parsers[p].type||"").toLowerCase()&&(i.cache[m].colMax[p]=Math.max(Math.abs(c)||0,i.cache[m].colMax[p]||0)),b(s,a,l))}).bind("addRows"+i.namespace,function(a,l,c,u){if(a.stopPropagation(),e.isUpdating=!0,n(i.cache))p(e),d(e,c,u);else{l=t(l).attr("role","row");var h,f,m,g,v,y,_,w=l.filter("tr").length,x=s.find("tbody").index(l.parents("tbody").filter(":first"));for(i.parsers&&i.parsers.length||r(e),h=0;w>h;h++){for(m=l[h].cells.length,_=[],y={child:[],$row:l.eq(h),order:i.cache[x].normalized.length},f=0;m>f;f++)g="undefined"==typeof i.extractors[f].id?o(e,l[h].cells[f],f):i.extractors[f].format(o(e,l[h].cells[f],f),e,l[h].cells[f],f),v="no-parser"===i.parsers[f].id?"":i.parsers[f].format(g,e,l[h].cells[f],f),_[f]=i.ignoreCase&&"string"==typeof v?v.toLowerCase():v,"numeric"===(i.parsers[f].type||"").toLowerCase()&&(i.cache[x].colMax[f]=Math.max(Math.abs(_[f])||0,i.cache[x].colMax[f]||0));_.push(y),i.cache[x].normalized.push(_)}b(s,c,u)}}).bind("updateComplete"+i.namespace,function(){e.isUpdating=!1}).bind("sorton"+i.namespace,function(i,o,r,c){var u=e.config;i.stopPropagation(),s.trigger("sortStart",this),m(e,o),h(e),u.delayInit&&n(u.cache)&&a(e),s.trigger("sortBegin",this),y(e),l(e,c),s.trigger("sortEnd",this),x.applyWidget(e),t.isFunction(r)&&r(e)}).bind("appendCache"+i.namespace,function(i,n,o){i.stopPropagation(),l(e,o),t.isFunction(n)&&n(e)}).bind("updateCache"+i.namespace,function(n,o){i.parsers&&i.parsers.length||r(e),a(e),t.isFunction(o)&&o(e)}).bind("applyWidgetId"+i.namespace,function(t,n){t.stopPropagation(),x.getWidgetById(n).format(e,i,i.widgetOptions)}).bind("applyWidgets"+i.namespace,function(t,i){t.stopPropagation(),x.applyWidget(e,i)}).bind("refreshWidgets"+i.namespace,function(t,i,n){t.stopPropagation(),x.refreshWidgets(e,i,n)}).bind("destroy"+i.namespace,function(t,i,n){t.stopPropagation(),x.destroy(e,i,n)}).bind("resetToLoadState"+i.namespace,function(){x.refreshWidgets(e,!0,!0),i=t.extend(!0,x.defaults,i.originalSettings),e.hasInitialized=!1,x.setup(e,i)})}var x=this;x.version="2.17.7",x.parsers=[],x.widgets=[],x.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},x.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},x.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},x.log=e,x.benchmark=i,x.construct=function(e){return this.each(function(){var i=this,n=t.extend(!0,{},x.defaults,e);n.originalSettings=e,!i.hasInitialized&&x.buildTable&&"TABLE"!==this.tagName?x.buildTable(i,n):x.setup(i,n)})},x.setup=function(i,n){if(!i||!i.tHead||0===i.tBodies.length||i.hasInitialized===!0)return n.debug?e("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var o="",s=t(i),l=t.metadata;i.hasInitialized=!1,i.isProcessing=!0,i.config=n,t.data(i,"tablesorter",n),n.debug&&t.data(i,"startoveralltimer",new Date),n.supportsDataObject=function(t){return t[0]=parseInt(t[0],10),t[0]>1||1===t[0]&&parseInt(t[1],10)>=4}(t.fn.jquery.split(".")),n.string={max:1,min:-1,emptyMin:1,emptyMax:-1,zero:0,none:0,"null":0,top:!0,bottom:!1},/tablesorter\-/.test(s.attr("class"))||(o=""!==n.theme?" tablesorter-"+n.theme:""),n.table=i,n.$table=s.addClass(x.css.table+" "+n.tableClass+o).attr("role","grid"),n.$headers=s.find(n.selectorHeaders),n.namespace?n.namespace="."+n.namespace.replace(/\W/g,""):n.namespace=".tablesorter"+Math.random().toString(16).slice(2),n.$table.children().children("tr").attr("role","row"),n.$tbodies=s.children("tbody:not(."+n.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),n.$table.find("caption").length&&n.$table.attr("aria-labelledby","theCaption"),n.widgetInit={},n.textExtraction=n.$table.attr("data-text-extraction")||n.textExtraction||"basic",u(i),f(i),r(i),n.totalRows=0,n.delayInit||a(i),x.bindEvents(i,n.$headers,!0),w(i),n.supportsDataObject&&"undefined"!=typeof s.data().sortlist?n.sortList=s.data().sortlist:l&&s.metadata()&&s.metadata().sortlist&&(n.sortList=s.metadata().sortlist),x.applyWidget(i,!0),n.sortList.length>0?s.trigger("sorton",[n.sortList,{},!n.initWidgets,!0]):(h(i),n.initWidgets&&x.applyWidget(i,!1)),n.showProcessing&&s.unbind("sortBegin"+n.namespace+" sortEnd"+n.namespace).bind("sortBegin"+n.namespace+" sortEnd"+n.namespace,function(t){clearTimeout(n.processTimer),x.isProcessing(i),"sortBegin"===t.type&&(n.processTimer=setTimeout(function(){x.isProcessing(i,!0)},500))}),i.hasInitialized=!0,i.isProcessing=!1,n.debug&&x.benchmark("Overall initialization time",t.data(i,"startoveralltimer")),s.trigger("tablesorter-initialized",i),"function"==typeof n.initialized&&n.initialized(i)},x.getColumnData=function(e,i,n,o){if("undefined"!=typeof i&&null!==i){e=t(e)[0];var s,r,a,l=e.config;if(i[n])return o?i[n]:i[l.$headers.index(l.$headers.filter('[data-column="'+n+'"]:last'))];for(a in i)if("string"==typeof a&&(r=o?l.$headers.eq(n).filter(a):l.$headers.filter('[data-column="'+n+'"]:last').filter(a),r.length))return i[a];return s}},x.computeColumnIndex=function(e){var i,n,o,s,r,a,l,c,u,d,p,h,f,m=[],g={},v=0;for(i=0;i<e.length;i++)for(l=e[i].cells,n=0;n<l.length;n++){for(a=l[n],r=t(a),c=a.parentNode.rowIndex,u=c+"-"+r.index(),d=a.rowSpan||1,p=a.colSpan||1,"undefined"==typeof m[c]&&(m[c]=[]),o=0;o<m[c].length+1;o++)if("undefined"==typeof m[c][o]){h=o;break}for(g[u]=h,v=Math.max(h,v),r.attr({"data-column":h}),o=c;c+d>o;o++)for("undefined"==typeof m[o]&&(m[o]=[]),f=m[o],s=h;h+p>s;s++)f[s]="x"}return v+1},x.isProcessing=function(e,i,n){e=t(e);var o=e[0].config,s=n||e.find("."+x.css.header);i?("undefined"!=typeof n&&o.sortList.length>0&&(s=s.filter(function(){return this.sortDisabled?!1:x.isValueInArray(parseFloat(t(this).attr("data-column")),o.sortList)>=0})),e.add(s).addClass(x.css.processing+" "+o.cssProcessing)):e.add(s).removeClass(x.css.processing+" "+o.cssProcessing)},x.processTbody=function(e,i,n){e=t(e)[0];var o;return n?(e.isProcessing=!0,i.before('<span class="tablesorter-savemyplace"/>'),o=t.fn.detach?i.detach():i.remove()):(o=t(e).find("span.tablesorter-savemyplace"),i.insertAfter(o),o.remove(),void(e.isProcessing=!1))},x.clearTableBody=function(e){t(e)[0].config.$tbodies.children().detach()},x.bindEvents=function(e,i,o){e=t(e)[0];var s,r=e.config;o!==!0&&(r.$extraHeaders=r.$extraHeaders?r.$extraHeaders.add(i):i),i.find(r.selectorSort).add(i.filter(r.selectorSort)).unbind("mousedown mouseup sort keyup ".split(" ").join(r.namespace+" ")).bind("mousedown mouseup sort keyup ".split(" ").join(r.namespace+" "),function(o,l){var c,u=o.type;if(!(1!==(o.which||o.button)&&!/sort|keyup/.test(u)||"keyup"===u&&13!==o.which||"mouseup"===u&&l!==!0&&(new Date).getTime()-s>250)){if("mousedown"===u)return s=(new Date).getTime(),/(input|select|button|textarea)/i.test(o.target.tagName)?"":!r.cancelSelection;r.delayInit&&n(r.cache)&&a(e),c=t.fn.closest?t(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:t(this).parents("th, td")[0],c=r.$headers[i.index(c)],c.sortDisabled||v(e,c,o)}}),r.cancelSelection&&i.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},x.restoreHeaders=function(e){var i=t(e)[0].config;i.$table.find(i.selectorHeaders).each(function(e){t(this).find("."+x.css.headerIn).length&&t(this).html(i.headerContent[e])})},x.destroy=function(e,i,n){if(e=t(e)[0],e.hasInitialized){x.refreshWidgets(e,!0,!0);var o=t(e),s=e.config,r=o.find("thead:first"),a=r.find("tr."+x.css.headerRow).removeClass(x.css.headerRow+" "+s.cssHeaderRow),l=o.find("tfoot:first > tr").children("th, td");i===!1&&t.inArray("uitheme",s.widgets)>=0&&(o.trigger("applyWidgetId",["uitheme"]),o.trigger("applyWidgetId",["zebra"])),r.find("tr").not(a).remove(),o.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState ".split(" ").join(s.namespace+" ")),s.$headers.add(l).removeClass([x.css.header,s.cssHeader,s.cssAsc,s.cssDesc,x.css.sortAsc,x.css.sortDesc,x.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),a.find(s.selectorSort).unbind("mousedown mouseup keypress ".split(" ").join(s.namespace+" ")),x.restoreHeaders(e),o.toggleClass(x.css.table+" "+s.tableClass+" tablesorter-"+s.theme,i===!1),e.hasInitialized=!1,delete e.config.cache,"function"==typeof n&&n(e)}},x.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i},x.sortNatural=function(t,e){if(t===e)return 0;var i,n,o,s,r,a,l,c,u=x.regex;if(u.hex.test(e)){if(n=parseInt(t.match(u.hex),16),s=parseInt(e.match(u.hex),16),s>n)return-1;if(n>s)return 1}for(i=t.replace(u.chunk,"\\0$1\\0").replace(u.chunks,"").split("\\0"),o=e.replace(u.chunk,"\\0$1\\0").replace(u.chunks,"").split("\\0"),c=Math.max(i.length,o.length),l=0;c>l;l++){if(r=isNaN(i[l])?i[l]||0:parseFloat(i[l])||0,a=isNaN(o[l])?o[l]||0:parseFloat(o[l])||0,isNaN(r)!==isNaN(a))return isNaN(r)?1:-1;if(typeof r!=typeof a&&(r+="",a+=""),a>r)return-1;if(r>a)return 1}return 0},x.sortNaturalAsc=function(t,e,i,n,o){if(t===e)return 0;var s=o.string[o.empties[i]||o.emptyTo];return""===t&&0!==s?"boolean"==typeof s?s?-1:1:-s||-1:""===e&&0!==s?"boolean"==typeof s?s?1:-1:s||1:x.sortNatural(t,e)},x.sortNaturalDesc=function(t,e,i,n,o){if(t===e)return 0;var s=o.string[o.empties[i]||o.emptyTo];return""===t&&0!==s?"boolean"==typeof s?s?-1:1:s||1:""===e&&0!==s?"boolean"==typeof s?s?1:-1:-s||-1:x.sortNatural(e,t)},x.sortText=function(t,e){return t>e?1:e>t?-1:0},x.getTextValue=function(t,e,i){if(i){var n,o=t?t.length:0,s=i+e;for(n=0;o>n;n++)s+=t.charCodeAt(n);return e*s}return 0},x.sortNumericAsc=function(t,e,i,n,o,s){if(t===e)return 0;var r=s.config,a=r.string[r.empties[o]||r.emptyTo];return""===t&&0!==a?"boolean"==typeof a?a?-1:1:-a||-1:""===e&&0!==a?"boolean"==typeof a?a?1:-1:a||1:(isNaN(t)&&(t=x.getTextValue(t,i,n)),isNaN(e)&&(e=x.getTextValue(e,i,n)),t-e)},x.sortNumericDesc=function(t,e,i,n,o,s){if(t===e)return 0;var r=s.config,a=r.string[r.empties[o]||r.emptyTo];return""===t&&0!==a?"boolean"==typeof a?a?-1:1:a||1:""===e&&0!==a?"boolean"==typeof a?a?1:-1:-a||-1:(isNaN(t)&&(t=x.getTextValue(t,i,n)),isNaN(e)&&(e=x.getTextValue(e,i,n)),e-t)},x.sortNumeric=function(t,e){return t-e},x.characterEquivalents={a:"áàâãäąå",A:"ÁÀÂÃÄĄÅ",c:"çćč",C:"ÇĆČ",e:"éèêëěę",E:"ÉÈÊËĚĘ",i:"íìİîïı",I:"ÍÌİÎÏ",o:"óòôõö",O:"ÓÒÔÕÖ",ss:"ß",SS:"ẞ",u:"úùûüů",U:"ÚÙÛÜŮ"},x.replaceAccents=function(t){var e,i="[",n=x.characterEquivalents;if(!x.characterRegex){x.characterRegexArray={};for(e in n)"string"==typeof e&&(i+=n[e],x.characterRegexArray[e]=new RegExp("["+n[e]+"]","g"));x.characterRegex=new RegExp(i+"]")}if(x.characterRegex.test(t))for(e in n)"string"==typeof e&&(t=t.replace(x.characterRegexArray[e],e));return t},x.isValueInArray=function(t,e){var i,n=e.length;for(i=0;n>i;i++)if(e[i][0]===t)return i;return-1},x.addParser=function(t){var e,i=x.parsers.length,n=!0;for(e=0;i>e;e++)x.parsers[e].id.toLowerCase()===t.id.toLowerCase()&&(n=!1);n&&x.parsers.push(t)},x.getParserById=function(t){if("false"==t)return!1;var e,i=x.parsers.length;for(e=0;i>e;e++)if(x.parsers[e].id.toLowerCase()===t.toString().toLowerCase())return x.parsers[e];return!1},x.addWidget=function(t){x.widgets.push(t)},x.hasWidget=function(e,i){return e=t(e),e.length&&e[0].config&&e[0].config.widgetInit[i]||!1},x.getWidgetById=function(t){var e,i,n=x.widgets.length;for(e=0;n>e;e++)if(i=x.widgets[e],i&&i.hasOwnProperty("id")&&i.id.toLowerCase()===t.toLowerCase())return i},x.applyWidget=function(e,n){e=t(e)[0];var o,s,r,a=e.config,l=a.widgetOptions,c=[];n!==!1&&e.hasInitialized&&(e.isApplyingWidgets||e.isUpdating)||(a.debug&&(o=new Date),a.widgets.length&&(e.isApplyingWidgets=!0,a.widgets=t.grep(a.widgets,function(e,i){return t.inArray(e,a.widgets)===i}),t.each(a.widgets||[],function(t,e){r=x.getWidgetById(e),r&&r.id&&(r.priority||(r.priority=10),c[t]=r)}),c.sort(function(t,e){return t.priority<e.priority?-1:t.priority===e.priority?0:1}),t.each(c,function(i,o){o&&((n||!a.widgetInit[o.id])&&(a.widgetInit[o.id]=!0,o.hasOwnProperty("options")&&(l=e.config.widgetOptions=t.extend(!0,{},o.options,l)),o.hasOwnProperty("init")&&o.init(e,o,a,l)),!n&&o.hasOwnProperty("format")&&o.format(e,a,l,!1))})),setTimeout(function(){e.isApplyingWidgets=!1},0),a.debug&&(s=a.widgets.length,i("Completed "+(n===!0?"initializing ":"applying ")+s+" widget"+(1!==s?"s":""),o)))},x.refreshWidgets=function(i,n,o){i=t(i)[0];var s,r=i.config,a=r.widgets,l=x.widgets,c=l.length;for(s=0;c>s;s++)l[s]&&l[s].id&&(n||t.inArray(l[s].id,a)<0)&&(r.debug&&e('Refeshing widgets: Removing "'+l[s].id+'"'),l[s].hasOwnProperty("remove")&&r.widgetInit[l[s].id]&&(l[s].remove(i,r,r.widgetOptions),r.widgetInit[l[s].id]=!1));o!==!0&&x.applyWidget(i,n)},x.getData=function(e,i,n){var o,s,r="",a=t(e);return a.length?(o=t.metadata?a.metadata():!1,s=" "+(a.attr("class")||""),"undefined"!=typeof a.data(n)||"undefined"!=typeof a.data(n.toLowerCase())?r+=a.data(n)||a.data(n.toLowerCase()):o&&"undefined"!=typeof o[n]?r+=o[n]:i&&"undefined"!=typeof i[n]?r+=i[n]:" "!==s&&s.match(" "+n+"-")&&(r=s.match(new RegExp("\\s"+n+"-([\\w-]+)"))[1]||""),
t.trim(r)):""},x.formatFloat=function(e,i){if("string"!=typeof e||""===e)return e;var n,o=i&&i.config?i.config.usNumberFormat!==!1:"undefined"!=typeof i?i:!0;return e=o?e.replace(/,/g,""):e.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(e)&&(e=e.replace(/^\s*\(([.\d]+)\)/,"-$1")),n=parseFloat(e),isNaN(n)?t.trim(e):n},x.isDigit=function(t){return isNaN(t)?/^[\-+(]?\d+[)]?$/.test(t.toString().replace(/[,.'"\s]/g,"")):!0}}});var e=t.tablesorter;t.fn.extend({tablesorter:e.construct}),e.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),e.addParser({id:"text",is:function(){return!0},format:function(i,n){var o=n.config;return i&&(i=t.trim(o.ignoreCase?i.toLocaleLowerCase():i),i=o.sortLocaleCompare?e.replaceAccents(i):i),i},type:"text"}),e.addParser({id:"digit",is:function(t){return e.isDigit(t)},format:function(i,n){var o=e.formatFloat((i||"").replace(/[^\w,. \-()]/g,""),n);return i&&"number"==typeof o?o:i?t.trim(i&&n.config.ignoreCase?i.toLocaleLowerCase():i):i},type:"numeric"}),e.addParser({id:"currency",is:function(t){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((t||"").replace(/[+\-,. ]/g,""))},format:function(i,n){var o=e.formatFloat((i||"").replace(/[^\w,. \-()]/g,""),n);return i&&"number"==typeof o?o:i?t.trim(i&&n.config.ignoreCase?i.toLocaleLowerCase():i):i},type:"numeric"}),e.addParser({id:"ipAddress",is:function(t){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(t)},format:function(t,i){var n,o=t?t.split("."):"",s="",r=o.length;for(n=0;r>n;n++)s+=("00"+o[n]).slice(-3);return t?e.formatFloat(s,i):t},type:"numeric"}),e.addParser({id:"url",is:function(t){return/^(https?|ftp|file):\/\//.test(t)},format:function(e){return e?t.trim(e.replace(/(https?|ftp|file):\/\//,"")):e},type:"text"}),e.addParser({id:"isoDate",is:function(t){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(t)},format:function(t,i){return t?e.formatFloat(""!==t?new Date(t.replace(/-/g,"/")).getTime()||t:"",i):t},type:"numeric"}),e.addParser({id:"percent",is:function(t){return/(\d\s*?%|%\s*?\d)/.test(t)&&t.length<15},format:function(t,i){return t?e.formatFloat(t.replace(/%/g,""),i):t},type:"numeric"}),e.addParser({id:"usLongDate",is:function(t){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(t)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(t)},format:function(t,i){return t?e.formatFloat(new Date(t.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||t,i):t},type:"numeric"}),e.addParser({id:"shortDate",is:function(t){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((t||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(t,i,n,o){if(t){var s=i.config,r=s.$headers.filter("[data-column="+o+"]:last"),a=r.length&&r[0].dateFormat||e.getData(r,e.getColumnData(i,s.headers,o),"dateFormat")||s.dateFormat;t=t.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===a?t=t.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===a?t=t.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===a&&(t=t.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return t?e.formatFloat(new Date(t).getTime()||t,i):t},type:"numeric"}),e.addParser({id:"time",is:function(t){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(t)},format:function(t,i){return t?e.formatFloat(new Date("2000/01/01 "+t.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||t,i):t},type:"numeric"}),e.addParser({id:"metadata",is:function(){return!1},format:function(e,i,n){var o=i.config,s=o.parserMetadataName?o.parserMetadataName:"sortValue";return t(n).metadata()[s]},type:"numeric"}),e.addWidget({id:"zebra",priority:90,format:function(i,n,o){var s,r,a,l,c,u,d,p,h=new RegExp(n.cssChildRow,"i"),f=n.$tbodies;for(n.debug&&(u=new Date),d=0;d<f.length;d++)s=f.eq(d),p=s.children("tr").length,p>1&&(l=0,r=s.children("tr:visible").not(n.selectorRemove),r.each(function(){a=t(this),h.test(this.className)||l++,c=l%2===0,a.removeClass(o.zebra[c?1:0]).addClass(o.zebra[c?0:1])}));n.debug&&e.benchmark("Applying Zebra widget",u)},remove:function(e,i,n){var o,s,r=i.$tbodies,a=(n.zebra||["even","odd"]).join(" ");for(o=0;o<r.length;o++)s=t.tablesorter.processTbody(e,r.eq(o),!0),s.children().removeClass(a),t.tablesorter.processTbody(e,s,!1)}})}(jQuery),define("tablesorter",["jquery"],function(){}),function(t){"use strict";var e=t.tablesorter;t.extend({tablesorterPager:new function(){this.defaults={container:null,ajaxUrl:null,customAjaxUrl:function(t,e){return e},ajaxObject:{dataType:"json"},processAjaxOnInit:!0,ajaxProcessing:function(t){return[0,[],null]},output:"{startRow} to {endRow} of {totalRows} rows",updateArrows:!0,page:0,size:10,savePages:!0,storageKey:"tablesorter-pager",fixedHeight:!1,countChildRows:!1,removeRows:!0,cssFirst:".first",cssPrev:".prev",cssNext:".next",cssLast:".last",cssGoto:".gotoPage",cssPageDisplay:".pagedisplay",cssPageSize:".pagesize",cssErrorRow:"tablesorter-errorRow",cssDisabled:"disabled",totalRows:0,totalPages:0,filteredRows:0,filteredPages:0,ajaxCounter:0,currentFilters:[],startRow:0,endRow:0,$size:null,last:{}};var i=this,n=function(t,e){var i="addClass",n="removeClass",o=t.cssDisabled,s=!!e,r=s||0===t.page,a=Math.min(t.totalPages,t.filteredPages),l=s||t.page===a-1||0===t.totalPages;t.updateArrows&&(t.$container.find(t.cssFirst+","+t.cssPrev)[r?i:n](o).attr("aria-disabled",r),t.$container.find(t.cssNext+","+t.cssLast)[l?i:n](o).attr("aria-disabled",l))},o=function(t,i,o){var s,r,a,l,c=t.config,u=c.$table.hasClass("hasFilters")&&!i.ajaxUrl,d=(c.widgetOptions&&c.widgetOptions.filter_filteredRow||"filtered")+","+c.selectorRemove+(i.countChildRows?"":",."+c.cssChildRow),p=i.size||10;if(i.totalPages=Math.ceil(i.totalRows/p),i.filteredRows=u?c.$tbodies.eq(0).children("tr").not("."+d).length:i.totalRows,i.filteredPages=u?Math.ceil(i.filteredRows/p)||1:i.totalPages,Math.min(i.totalPages,i.filteredPages)>=0&&(d=i.size*i.page>i.filteredRows,i.startRow=d?1:0===i.filteredRows?0:i.size*i.page+1,i.page=d?0:i.page,i.endRow=Math.min(i.filteredRows,i.totalRows,i.size*(i.page+1)),l=i.$container.find(i.cssPageDisplay),a=(i.ajaxData&&i.ajaxData.output?i.ajaxData.output||i.output:i.output).replace(/\{page([\-+]\d+)?\}/gi,function(t,e){return i.totalPages?i.page+(e?parseInt(e,10):1):0}).replace(/\{\w+(\s*:\s*\w+)?\}/gi,function(t){var e=t.replace(/[{}\s]/g,""),n=e.split(":"),o=i.ajaxData,s=/(rows?|pages?)$/i.test(e)?0:"";return n.length>1&&o&&o[n[0]]?o[n[0]][n[1]]:i[e]||(o?o[e]:s)||s}),l.length&&(l["INPUT"===l[0].tagName?"val":"html"](a),i.$goto.length))){for(d="",r=Math.min(i.totalPages,i.filteredPages),s=1;r>=s;s++)d+="<option>"+s+"</option>";i.$goto.html(d).val(i.page+1)}n(i),i.initialized&&o!==!1&&(c.$table.trigger("pagerComplete",i),i.savePages&&e.storage&&e.storage(t,i.storageKey,{page:i.page,size:i.size}))},s=function(e,i){var n,o,s=e.config,r=s.$tbodies.eq(0);i.fixedHeight&&(r.find("tr.pagerSavedHeightSpacer").remove(),o=t.data(e,"pagerSavedHeight"),o&&(n=o-r.height(),n>5&&t.data(e,"pagerLastSize")===i.size&&r.children("tr:visible").length<i.size&&r.append('<tr class="pagerSavedHeightSpacer '+s.selectorRemove.replace(/(tr)?\./g,"")+'" style="height:'+n+'px;"></tr>')))},r=function(e,i){var n=e.config.$tbodies.eq(0);n.find("tr.pagerSavedHeightSpacer").remove(),t.data(e,"pagerSavedHeight",n.height()),s(e,i),t.data(e,"pagerLastSize",i.size)},a=function(t,i){if(!i.ajaxUrl){var n,o=0,s=t.config,r=s.$tbodies.eq(0).children(),a=r.length,l=i.page*i.size,c=l+i.size,u=s.widgetOptions&&s.widgetOptions.filter_filteredRow||"filtered",d=0;for(n=0;a>n;n++)r[n].className.match(u)||(d===l&&r[n].className.match(s.cssChildRow)?r[n].style.display="none":(r[n].style.display=d>=l&&c>d?"":"none",d+=r[n].className.match(s.cssChildRow+"|"+s.selectorRemove.slice(1))&&!i.countChildRows?0:1,d===c&&"none"!==r[n].style.display&&r[n].className.match(e.css.cssHasChild)&&(o=n)));if(o>0&&r[o].className.match(e.css.cssHasChild))for(;++o<a&&r[o].className.match(s.cssChildRow);)r[o].style.display=""}},l=function(e,i){i.size=parseInt(i.$size.val(),10)||i.size,t.data(e,"pagerLastSize",i.size),n(i),i.removeRows||(a(e,i),t(e).bind("sortEnd.pager filterEnd.pager",function(){a(e,i)}))},c=function(i,n,r,a,l){if("function"==typeof r.ajaxProcessing){var c,u,d,p,h,f,m,g,v,y,_=n.config,b=_.$table,w="",x=r.ajaxProcessing(i,n)||[0,[]],C=b.find("thead th").length;if(e.showError(n),l)_.debug&&e.log("Ajax Error",a,l),e.showError(n,0===a.status?"Not connected, verify Network":404===a.status?"Requested page not found [404]":500===a.status?"Internal Server Error [500]":"parsererror"===l?"Requested JSON parse failed":"timeout"===l?"Time out error":"abort"===l?"Ajax Request aborted":"Uncaught error: "+a.statusText+" ["+a.status+"]"),_.$tbodies.eq(0).empty(),r.totalRows=0;else{if(t.isArray(x)?(f=isNaN(x[0])&&!isNaN(x[1]),y=x[f?1:0],r.totalRows=isNaN(y)?r.totalRows||0:y,g=0===r.totalRows?[""]:x[f?0:1]||[],m=x[2]):(r.ajaxData=x,r.totalRows=x.total,m=x.headers,g=x.rows),v=g.length,g instanceof jQuery)_.$tbodies.eq(0).empty().append(g);else if(v){for(c=0;v>c;c++){for(w+="<tr>",u=0;u<g[c].length;u++)w+=/^\s*<td/.test(g[c][u])?t.trim(g[c][u]):"<td>"+g[c][u]+"</td>";w+="</tr>"}r.processAjaxOnInit?_.$tbodies.eq(0).html(w):r.processAjaxOnInit=!0}m&&m.length===C&&(d=b.hasClass("hasStickyHeaders"),h=d?_.widgetOptions.$sticky.children("thead:first").children().children():"",p=b.find("tfoot tr:first").children(),_.$headers.filter("th").each(function(i){var n,o=t(this);o.find("."+e.css.icon).length?(n=o.find("."+e.css.icon).clone(!0),o.find(".tablesorter-header-inner").html(m[i]).append(n),d&&h.length&&(n=h.eq(i).find("."+e.css.icon).clone(!0),h.eq(i).find(".tablesorter-header-inner").html(m[i]).append(n))):(o.find(".tablesorter-header-inner").html(m[i]),d&&h.length&&h.eq(i).find(".tablesorter-header-inner").html(m[i])),p.eq(i).html(m[i])}))}_.showProcessing&&e.isProcessing(n),r.totalPages=Math.ceil(r.totalRows/(r.size||10)),r.last.totalRows=r.totalRows,r.last.currentFilters=r.currentFilters,r.last.sortList=(_.sortList||[]).join(","),o(n,r),s(n,r),b.trigger("updateCache",[function(){r.initialized&&b.trigger("applyWidgets").trigger("pagerChange",r)}])}r.initialized||(r.initialized=!0,t(n).trigger("applyWidgets").trigger("pagerInitialized",r))},u=function(i,n){var o,s=d(i,n),r=t(document),a=i.config;""!==s&&(a.showProcessing&&e.isProcessing(i,!0),r.bind("ajaxError.pager",function(t,e,o,s){c(null,i,n,e,s),r.unbind("ajaxError.pager")}),o=++n.ajaxCounter,n.ajaxObject.url=s,n.ajaxObject.success=function(t){o<n.ajaxCounter||(c(t,i,n),r.unbind("ajaxError.pager"),"function"==typeof n.oldAjaxSuccess&&n.oldAjaxSuccess(t))},a.debug&&e.log("ajax initialized",n.ajaxObject),t.ajax(n.ajaxObject))},d=function(i,n){var o=i.config,s=n.ajaxUrl?n.ajaxUrl.replace(/\{page([\-+]\d+)?\}/,function(t,e){return n.page+(e?parseInt(e,10):0)}).replace(/\{size\}/g,n.size):"",r=o.sortList,a=n.currentFilters||t(i).data("lastSearch")||[],l=s.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),c=s.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),u=[];return l&&(l=l[1],t.each(r,function(t,e){u.push(l+"["+e[0]+"]="+e[1])}),s=s.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g,u.length?u.join("&"):l),u=[]),c&&(c=c[1],t.each(a,function(t,e){e&&u.push(c+"["+t+"]="+encodeURIComponent(e))}),s=s.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g,u.length?u.join("&"):c),n.currentFilters=a),"function"==typeof n.customAjaxUrl&&(s=n.customAjaxUrl(i,s)),o.debug&&e.log("Pager ajax url: "+s),s},p=function(i,n,r){var l,c,u=t(i),d=i.config,p=n&&n.length||0,h=r.page*r.size,f=h+r.size;if(!(1>p)){if(r.page>=r.totalPages&&v(i,r),r.isDisabled=!1,r.initialized&&u.trigger("pagerChange",r),r.removeRows){for(f>n.length&&(f=n.length),e.clearTableBody(i),c=e.processTbody(i,d.$tbodies.eq(0),!0),l=h;f>l;l++)c.append(n[l]);e.processTbody(i,c,!1)}else a(i,r);o(i,r),r.isDisabled||s(i,r),u.trigger("applyWidgets"),i.isUpdating&&u.trigger("updateComplete",i)}},h=function(i,o){o.ajax?n(o,!0):(o.isDisabled=!0,t.data(i,"pagerLastPage",o.page),t.data(i,"pagerLastSize",o.size),o.page=0,o.size=o.totalRows,o.totalPages=1,t(i).addClass("pagerDisabled").removeAttr("aria-describedby").find("tr.pagerSavedHeightSpacer").remove(),p(i,i.config.rowsCopy,o),i.config.debug&&e.log("pager disabled")),o.$size.add(o.$goto).each(function(){t(this).attr("aria-disabled","true").addClass(o.cssDisabled)[0].disabled=!0})},f=function(i,n,o){if(!n.isDisabled){var s=i.config,r=t(i),a=n.last,l=Math.min(n.totalPages,n.filteredPages);n.page<0&&(n.page=0),n.page>l-1&&0!==l&&(n.page=l-1),a.currentFilters=""===(a.currentFilters||[]).join("")?[]:a.currentFilters,n.currentFilters=""===(n.currentFilters||[]).join("")?[]:n.currentFilters,(a.page!==n.page||a.size!==n.size||a.totalRows!==n.totalRows||(a.currentFilters||[]).join(",")!==(n.currentFilters||[]).join(",")||a.sortList!==(s.sortList||[]).join(","))&&(s.debug&&e.log("Pager changing to page "+n.page),n.last={page:n.page,size:n.size,sortList:(s.sortList||[]).join(","),totalRows:n.totalRows,currentFilters:n.currentFilters||[]},n.ajax?u(i,n):n.ajax||p(i,s.rowsCopy,n),t.data(i,"pagerLastPage",n.page),n.initialized&&o!==!1&&(r.trigger("pageMoved",n).trigger("applyWidgets"),i.isUpdating&&r.trigger("updateComplete")))}},m=function(e,i,n){n.size=i||n.size||10,n.$size.val(n.size),t.data(e,"pagerLastPage",n.page),t.data(e,"pagerLastSize",n.size),n.totalPages=Math.ceil(n.totalRows/n.size),n.filteredPages=Math.ceil(n.filteredRows/n.size),f(e,n)},g=function(t,e){e.page=0,f(t,e)},v=function(t,e){e.page=Math.min(e.totalPages,e.filteredPages)-1,f(t,e)},y=function(t,e){e.page++,e.page>=Math.min(e.totalPages,e.filteredPages)-1&&(e.page=Math.min(e.totalPages,e.filteredPages)-1),f(t,e)},_=function(t,e){e.page--,e.page<=0&&(e.page=0),f(t,e)},b=function(i,n){h(i,n),n.$container.hide(),i.config.appender=null,n.initialized=!1,t(i).unbind("destroy.pager sortEnd.pager filterEnd.pager enable.pager disable.pager"),e.storage&&e.storage(i,n.storageKey,"")},w=function(i,n,o){var r,a=i.config;n.$size.add(n.$goto).removeClass(n.cssDisabled).removeAttr("disabled").attr("aria-disabled","false"),n.isDisabled=!1,n.page=t.data(i,"pagerLastPage")||n.page||0,n.size=t.data(i,"pagerLastSize")||parseInt(n.$size.find("option[selected]").val(),10)||n.size||10,n.$size.val(n.size),n.totalPages=Math.ceil(Math.min(n.totalRows,n.filteredRows)/n.size),i.id&&(r=i.id+"_pager_info",n.$container.find(n.cssPageDisplay).attr("id",r),a.$table.attr("aria-describedby",r)),o&&(a.$table.trigger("updateRows"),m(i,n.size,n),l(i,n),s(i,n),a.debug&&e.log("pager enabled"))};i.appender=function(e,i){var n=e.config,s=n.pager;s.ajax||(n.rowsCopy=i,s.totalRows=s.countChildRows?n.$tbodies.eq(0).children().length:i.length,s.size=t.data(e,"pagerLastSize")||s.size||10,s.totalPages=Math.ceil(s.totalRows/s.size),p(e,i,s),o(e,s,!1))},i.construct=function(n){return this.each(function(){if(this.config&&this.hasInitialized){var c,u,d,p=this,x=p.config,C=x.pager=t.extend({},t.tablesorterPager.defaults,n),k=x.$table,S=C.$container=t(C.container).addClass("tablesorter-pager").show();x.debug&&e.log("Pager initializing"),C.oldAjaxSuccess=C.oldAjaxSuccess||C.ajaxObject.success,x.appender=i.appender,e.filter&&t.inArray("filter",x.widgets)>=0&&(C.currentFilters=x.$table.data("lastSearch")||e.filter.setDefaults(p,x,x.widgetOptions)||[],e.setFilters(p,C.currentFilters,!1)),C.savePages&&e.storage&&(c=e.storage(p,C.storageKey)||{},C.page=isNaN(c.page)?C.page:c.page,C.size=(isNaN(c.size)?C.size:c.size)||10,t.data(p,"pagerLastSize",C.size)),k.unbind("filterStart filterEnd sortEnd disable enable destroy update updateRows updateAll addRows pageSize ".split(" ").join(".pager ")).bind("filterStart.pager",function(t,e){C.currentFilters=e,C.page=0}).bind("filterEnd.pager sortEnd.pager",function(){C.initialized&&(f(p,C,!1),o(p,C,!1),s(p,C))}).bind("disable.pager",function(t){t.stopPropagation(),h(p,C)}).bind("enable.pager",function(t){t.stopPropagation(),w(p,C,!0)}).bind("destroy.pager",function(t){t.stopPropagation(),b(p,C)}).bind("update updateRows updateAll addRows ".split(" ").join(".pager "),function(t){t.stopPropagation(),a(p,C)}).bind("pageSize.pager",function(t,e){t.stopPropagation(),m(p,parseInt(e,10)||10,C),a(p,C),o(p,C,!1),C.$size.length&&C.$size.val(C.size)}).bind("pageSet.pager",function(t,e){t.stopPropagation(),C.page=(parseInt(e,10)||1)-1,C.$goto.length&&C.$goto.val(C.size),f(p,C),o(p,C,!1)}),u=[C.cssFirst,C.cssPrev,C.cssNext,C.cssLast],d=[g,_,y,v],S.find(u.join(",")).attr("tabindex",0).unbind("click.pager").bind("click.pager",function(e){e.stopPropagation();var i,n=t(this),o=u.length;if(!n.hasClass(C.cssDisabled))for(i=0;o>i;i++)if(n.is(u[i])){d[i](p,C);break}}),C.$goto=S.find(C.cssGoto),C.$goto.length&&C.$goto.unbind("change").bind("change",function(){C.page=t(this).val()-1,f(p,C),o(p,C,!1)}),C.$size=S.find(C.cssPageSize),C.$size.length&&C.$size.unbind("change.pager").bind("change.pager",function(){return C.$size.val(t(this).val()),t(this).hasClass(C.cssDisabled)||(m(p,parseInt(t(this).val(),10),C),r(p,C)),!1}),C.initialized=!1,k.trigger("pagerBeforeInitialized",C),w(p,C,!1),"string"==typeof C.ajaxUrl?(C.ajax=!0,x.widgetOptions.filter_serversideFiltering=!0,x.serverSideSorting=!0,f(p,C)):(C.ajax=!1,t(this).trigger("appendCache",!0),l(p,C)),r(p,C),C.ajax||(C.initialized=!0,t(p).trigger("pagerInitialized",C))}})}}}),e.showError=function(e,i){t(e).each(function(){var e,n=this.config,o=n.pager&&n.pager.cssErrorRow||n.widgetOptions.pager_css&&n.widgetOptions.pager_css.errorRow||"tablesorter-errorRow";n&&("undefined"==typeof i?n.$table.find("thead").find(n.selectorRemove).remove():e=t(/tr\>/.test(i)?i:'<tr><td colspan="'+n.columns+'">'+i+"</td></tr>").click(function(){t(this).remove()}).appendTo(n.$table.find("thead:first")).addClass(o+" "+n.selectorRemove.replace(/^[.#]/,"")).attr({role:"alert","aria-live":"assertive"}))})},t.fn.extend({tablesorterPager:t.tablesorterPager.construct})}(jQuery),define("tablesorter_pager",["jquery","tablesorter"],function(){}),function(t){function e(t,e){return function(i){return l(t.call(this,i),e)}}function i(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function n(){}function o(t){b(t),r(this,t)}function s(t){var e=f(t),i=e.year||0,n=e.month||0,o=e.week||0,s=e.day||0,r=e.hour||0,a=e.minute||0,l=e.second||0,c=e.millisecond||0;this._input=t,this._milliseconds=+c+1e3*l+6e4*a+36e5*r,this._days=+s+7*o,this._months=+n+12*i,this._data={},this._bubble()}function r(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function c(t,e,i,n){var o,s,r=e._milliseconds,a=e._days,l=e._months;r&&t._d.setTime(+t._d+r*i),(a||l)&&(o=t.minute(),s=t.hour()),a&&t.date(t.date()+a*i),l&&t.month(t.month()+l*i),r&&!n&&et.updateOffset(t),(a||l)&&(t.minute(o),t.hour(s))}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function p(t,e,i){var n,o=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&g(t[n])!==g(e[n]))&&r++;return r+s}function h(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Ot[t]||Nt[e]||e}return t}function f(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=h(i),e&&(n[e]=t[i]));return n}function m(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}et[e]=function(o,s){var r,a,l=et.fn._lang[e],c=[];if("number"==typeof o&&(s=o,o=t),a=function(t){var e=et().utc().set(n,t);return l.call(et.fn._lang,e,o||"")},null!=s)return a(s);for(r=0;i>r;r++)c.push(a(r));return c}}function g(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function v(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function y(t){return _(t)?366:365}function _(t){return 0===t%4&&0!==t%100||0===t%400}function b(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[rt]<0||t._a[rt]>11?rt:t._a[at]<1||t._a[at]>v(t._a[st],t._a[rt])?at:t._a[lt]<0||t._a[lt]>23?lt:t._a[ct]<0||t._a[ct]>59?ct:t._a[ut]<0||t._a[ut]>59?ut:t._a[dt]<0||t._a[dt]>999?dt:-1,t._pf._overflowDayOfYear&&(st>e||e>at)&&(e=at),t._pf.overflow=e)}function w(t){t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function x(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function C(t){return t?t.toLowerCase().replace("_","-"):t}function k(t,e){return e.abbr=t,pt[t]||(pt[t]=new n),pt[t].set(e),pt[t]}function S(t){delete pt[t]}function T(t){var e,i,n,o,s=0,r=function(t){if(!pt[t]&&ht)try{require("./lang/"+t)}catch(e){}return pt[t]};if(!t)return et.fn._lang;if(!u(t)){if(i=r(t))return i;t=[t]}for(;s<t.length;){for(o=C(t[s]).split("-"),e=o.length,n=C(t[s+1]),n=n?n.split("-"):null;e>0;){if(i=r(o.slice(0,e).join("-")))return i;if(n&&n.length>=e&&p(o,n,!0)>=e-1)break;e--}s++}return et.fn._lang}function M(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function z(t){var e,i,n=t.match(vt);for(e=0,i=n.length;i>e;e++)n[e]=Ht[n[e]]?Ht[n[e]]:M(n[e]);return function(o){var s="";for(e=0;i>e;e++)s+=n[e]instanceof Function?n[e].call(o,t):n[e];return s}}function D(t,e){return t.isValid()?(e=P(e,t.lang()),Ft[e]||(Ft[e]=z(e)),Ft[e](t)):t.lang().invalidDate()}function P(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(yt.lastIndex=0;n>=0&&yt.test(t);)t=t.replace(yt,i),yt.lastIndex=0,n-=1;return t}function q(t,e){var i;switch(t){case"DDDD":return wt;case"YYYY":case"GGGG":case"gggg":return xt;case"YYYYY":case"GGGGG":case"ggggg":return Ct;case"S":case"SS":case"SSS":case"DDD":return bt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return St;case"a":case"A":return T(e._l)._meridiemParse;case"X":return zt;case"Z":case"ZZ":return Tt;case"T":return Mt;case"SSSS":return kt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return _t;default:return i=new RegExp(L(F(t.replace("\\","")),"i"))}}function A(t){var e=(Tt.exec(t)||[])[0],i=(e+"").match(It)||["-",0,0],n=+(60*i[1])+g(i[2]);return"+"===i[0]?-n:n}function I(t,e,i){var n,o=i._a;switch(t){case"M":case"MM":null!=e&&(o[rt]=g(e)-1);break;case"MMM":case"MMMM":n=T(i._l).monthsParse(e),null!=n?o[rt]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[at]=g(e));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=g(e));break;case"YY":o[st]=g(e)+(g(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":o[st]=g(e);break;case"a":case"A":i._isPm=T(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":o[lt]=g(e);break;case"m":case"mm":o[ct]=g(e);break;case"s":case"ss":o[ut]=g(e);break;case"S":case"SS":case"SSS":case"SSSS":o[dt]=g(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=A(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=e)}}function R(t){var e,i,n,o,s,r,a,l,c,u,d=[];if(!t._d){for(n=O(t),t._w&&null==t._a[at]&&null==t._a[rt]&&(s=function(e){return e?e.length<3?parseInt(e,10)>68?"19"+e:"20"+e:e:null==t._a[st]?et().weekYear():t._a[st]},r=t._w,null!=r.GG||null!=r.W||null!=r.E?a=Q(s(r.GG),r.W||1,r.E,4,1):(l=T(t._l),c=null!=r.d?B(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,u=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&u++,a=Q(s(r.gg),u,c,l._week.doy,l._week.dow)),t._a[st]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(o=null==t._a[st]?n[st]:t._a[st],t._dayOfYear>y(o)&&(t._pf._overflowDayOfYear=!0),i=K(o,0,t._dayOfYear),t._a[rt]=i.getUTCMonth(),t._a[at]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=d[e]=n[e];for(;7>e;e++)t._a[e]=d[e]=null==t._a[e]?2===e?1:0:t._a[e];d[lt]+=g((t._tzm||0)/60),d[ct]+=g((t._tzm||0)%60),t._d=(t._useUTC?K:V).apply(null,d)}}function E(t){var e;t._d||(e=f(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],R(t))}function O(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function N(t){t._a=[],t._pf.empty=!0;var e,i,n,o,s,r=T(t._l),a=""+t._i,l=a.length,c=0;for(n=P(t._f,r).match(vt)||[],e=0;e<n.length;e++)o=n[e],i=(q(o,t).exec(a)||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&t._pf.unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),c+=i.length),Ht[o]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(o),I(o,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-c,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[lt]<12&&(t._a[lt]+=12),t._isPm===!1&&12===t._a[lt]&&(t._a[lt]=0),R(t),b(t)}function F(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o})}function L(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(t){var e,i,n,o,s;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)s=0,e=r({},t),w(e),e._f=t._f[o],N(e),x(e)&&(s+=e._pf.charsLeftOver,s+=10*e._pf.unusedTokens.length,e._pf.score=s,(null==n||n>s)&&(n=s,i=e));r(t,i||e)}function H(t){var e,i=t._i,n=Dt.exec(i);if(n){for(t._pf.iso=!0,e=4;e>0;e--)if(n[e]){t._f=qt[e-1]+(n[6]||" ");break}for(e=0;4>e;e++)if(At[e][1].exec(i)){t._f+=At[e][0];break}Tt.exec(i)&&(t._f+="Z"),N(t)}else t._d=new Date(i)}function j(e){var i=e._i,n=ft.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?H(e):u(i)?(e._a=i.slice(0),R(e)):d(i)?e._d=new Date(+i):"object"==typeof i?E(e):e._d=new Date(i)}function V(t,e,i,n,o,s,r){var a=new Date(t,e,i,n,o,s,r);return 1970>t&&a.setFullYear(t),a}function K(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function B(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function W(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function U(t,e,i){var n=ot(Math.abs(t)/1e3),o=ot(n/60),s=ot(o/60),r=ot(s/24),a=ot(r/365),l=45>n&&["s",n]||1===o&&["m"]||45>o&&["mm",o]||1===s&&["h"]||22>s&&["hh",s]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",ot(r/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=i,W.apply({},l)}function G(t,e,i){var n,o=i-e,s=i-t.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=et(t).add("d",s),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function Q(t,e,i,n,o){var s,r,a=new Date(Date.UTC(t,0)).getUTCDay();return i=null!=i?i:o,s=o-a+(a>n?7:0),r=7*(e-1)+(i-o)+s+1,{year:r>0?t:t-1,dayOfYear:r>0?r:y(t-1)+r}}function Y(t){var e=t._i,i=t._f;return"undefined"==typeof t._pf&&w(t),null===e?et.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=T().preparse(e)),et.isMoment(e)?(t=r({},e),t._d=new Date(+e._d)):i?u(i)?$(t):N(t):j(t),new o(t))}function X(t,e){et.fn[t]=et.fn[t+"s"]=function(t){var i=this._isUTC?"UTC":"";return null!=t?(this._d["set"+i+e](t),et.updateOffset(this),this):this._d["get"+i+e]()}}function J(t){et.duration.fn[t]=function(){return this._data[t]}}function Z(t,e){et.duration.fn["as"+t]=function(){return+this/e}}function tt(t){var e=!1,i=et;"undefined"==typeof ender&&(this.moment=t?function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)}:et)}for(var et,it,nt="2.4.0",ot=Math.round,st=0,rt=1,at=2,lt=3,ct=4,ut=5,dt=6,pt={},ht="undefined"!=typeof module&&module.exports,ft=/^\/?Date\((\-?\d+)/i,mt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,gt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,yt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,_t=/\d\d?/,bt=/\d{1,3}/,wt=/\d{3}/,xt=/\d{1,4}/,Ct=/[+\-]?\d{1,6}/,kt=/\d+/,St=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Tt=/Z|[\+\-]\d\d:?\d\d/i,Mt=/T/i,zt=/[\+\-]?\d+(\.\d{1,3})?/,Dt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Pt="YYYY-MM-DDTHH:mm:ssZ",qt=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],At=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],It=/([\+\-]|\d\d)/gi,Rt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Et={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ot={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Nt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ft={},Lt="DDD w W M D d".split(" "),$t="M D H h m s w W".split(" "),Ht={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return l(g(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(t/60),2)+":"+l(g(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},jt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Lt.length;)it=Lt.pop(),Ht[it+"o"]=i(Ht[it],it);for(;$t.length;)it=$t.pop(),Ht[it+it]=e(Ht[it],2);for(Ht.DDDD=e(Ht.DDD,3),r(n.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=et.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),
this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=et([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return G(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),et=function(e,i,n,o){return"boolean"==typeof n&&(o=n,n=t),Y({_i:e,_f:i,_l:n,_strict:o,_isUTC:!1})},et.utc=function(e,i,n,o){var s;return"boolean"==typeof n&&(o=n,n=t),s=Y({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:i,_strict:o}).utc()},et.unix=function(t){return et(1e3*t)},et.duration=function(t,e){var i,n,o,r=et.isDuration(t),a="number"==typeof t,l=r?t._input:a?{}:t,c=null;return a?e?l[e]=t:l.milliseconds=t:(c=mt.exec(t))?(i="-"===c[1]?-1:1,l={y:0,d:g(c[at])*i,h:g(c[lt])*i,m:g(c[ct])*i,s:g(c[ut])*i,ms:g(c[dt])*i}):(c=gt.exec(t))&&(i="-"===c[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},l={y:o(c[2]),M:o(c[3]),d:o(c[4]),h:o(c[5]),m:o(c[6]),s:o(c[7]),w:o(c[8])}),n=new s(l),r&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},et.version=nt,et.defaultFormat=Pt,et.updateOffset=function(){},et.lang=function(t,e){var i;return t?(e?k(C(t),e):null===e?(S(t),t="en"):pt[t]||T(t),i=et.duration.fn._lang=et.fn._lang=T(t),i._abbr):et.fn._lang._abbr},et.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),T(t)},et.isMoment=function(t){return t instanceof o},et.isDuration=function(t){return t instanceof s},it=jt.length-1;it>=0;--it)m(jt[it]);for(et.normalizeUnits=function(t){return h(t)},et.invalid=function(t){var e=et.utc(NaN);return null!=t?r(e._pf,t):e._pf.userInvalidated=!0,e},et.parseZone=function(t){return et(t).parseZone()},r(et.fn=o.prototype,{clone:function(){return et(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return D(et(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?et.utc(this._a):et(this._a)).toArray())>0:!1},parsingFlags:function(){return r({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=D(this,t||et.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?et.duration(+e,t):et.duration(t,e),c(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?et.duration(+e,t):et.duration(t,e),c(this,i,-1),this},diff:function(t,e,i){var n,o,s=this._isUTC?et(t).zone(this._offset||0):et(t).local(),r=6e4*(this.zone()-s.zone());return e=h(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+s.daysInMonth()),o=12*(this.year()-s.year())+(this.month()-s.month()),o+=(this-et(this).startOf("month")-(s-et(s).startOf("month")))/n,o-=6e4*(this.zone()-et(this).startOf("month").zone()-(s.zone()-et(s).startOf("month").zone()))/n,"year"===e&&(o/=12)):(n=this-s,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-r)/864e5:"week"===e?(n-r)/6048e5:n),i?o:a(o)},from:function(t,e){return et.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(et(),t)},calendar:function(){var t=this.diff(et().zone(this.zone()).startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){return _(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=B(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,i=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+i+"Month"](t),this.date(Math.min(e,this.daysInMonth())),et.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(t){switch(t=h(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=h(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+et(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+et(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+et(t).startOf(e)},min:function(t){return t=et.apply(null,arguments),this>t?this:t},max:function(t){return t=et.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=A(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&c(this,et.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?et(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(t){var e=ot((et(this).startOf("day")-et(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=G(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=G(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=G(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=h(t),this[t]()},set:function(t,e){return t=h(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=T(e),this)}}),it=0;it<Rt.length;it++)X(Rt[it].toLowerCase().replace(/s$/,""),Rt[it]);X("year","FullYear"),et.fn.days=et.fn.day,et.fn.months=et.fn.month,et.fn.weeks=et.fn.week,et.fn.isoWeeks=et.fn.isoWeek,et.fn.toJSON=et.fn.toISOString,r(et.duration.fn=s.prototype,{_bubble:function(){var t,e,i,n,o=this._milliseconds,s=this._days,r=this._months,l=this._data;l.milliseconds=o%1e3,t=a(o/1e3),l.seconds=t%60,e=a(t/60),l.minutes=e%60,i=a(e/60),l.hours=i%24,s+=a(i/24),l.days=s%30,r+=a(s/30),l.months=r%12,n=a(r/12),l.years=n},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)},humanize:function(t){var e=+this,i=U(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=et.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=et.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=h(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=h(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:et.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"}});for(it in Et)Et.hasOwnProperty(it)&&(Z(it,Et[it]),J(it.toLowerCase()));Z("Weeks",6048e5),et.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},et.lang("en",{ordinal:function(t){var e=t%10,i=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),ht?(module.exports=et,tt(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(e,i,n){return n.config().noGlobal!==!0&&tt(n.config().noGlobal===t),et}):tt()}.call(this),function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var i=t([0]),n=-1,o=this.length;++n<o&&(i.context=i[0]=this[n])&&e.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function i(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function n(t){function e(t){return $[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function o(t,e){for(var i=0,n=e.length;n>i;i+=1)if(r(t,e[i]))return i;return-1}function s(){var e=t(L);e.appendTo("body");var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}function r(t,i){return t===i?!0:t===e||i===e?!1:null===t||null===i?!1:t.constructor===String?t+""==i+"":i.constructor===String?i+""==t+"":!1}function a(e,i){var n,o,s;if(null===e||e.length<1)return[];for(n=e.split(i),o=0,s=n.length;s>o;o+=1)n[o]=t.trim(n[o]);return n}function l(t){return t.outerWidth(!1)-t.width()}function c(i){var n="keyup-change-value";i.on("keydown",function(){t.data(i,n)===e&&t.data(i,n,i.val())}),i.on("keyup",function(){var o=t.data(i,n);o!==e&&i.val()!==o&&(t.removeData(i,n),i.trigger("keyup-change"))})}function u(i){i.on("mousemove",function(i){var n=F;(n===e||n.x!==i.pageX||n.y!==i.pageY)&&t(i.target).trigger("mousemove-filtered",i)})}function d(t,i,n){n=n||e;var o;return function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,e)},t)}}function p(t,e){var i=d(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){o(t.target,e.get())>=0&&i(t)})}function h(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],n=t.val().length;t.focus();var o=i.offsetWidth>0||i.offsetHeight>0;o&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(e=i.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var i=0,n=0;if("selectionStart"in e)i=e.selectionStart,n=e.selectionEnd-i;else if("selection"in document){e.focus();var o=document.selection.createRange();n=document.selection.createRange().text.length,o.moveStart("character",-e.value.length),i=o.text.length-n}return{offset:i,length:n}}function m(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!E){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);E=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),E.attr("class","select2-sizer"),t("body").append(E)}return E.text(e.val()),E.width()}function y(e,i,n){var o,s,r=[];o=t.trim(e.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),o=t.trim(i.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(s=n(this),s&&r.push(s))})),e.attr("class",r.join(" "))}function _(t,e,i,o){var s=n(t.toUpperCase()).indexOf(n(e.toUpperCase())),r=e.length;return 0>s?void i.push(o(t)):(i.push(o(t.substring(0,s))),i.push("<span class='select2-match'>"),i.push(o(t.substring(s,s+r))),i.push("</span>"),void i.push(o(t.substring(s+r,t.length))))}function b(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function w(i){var n,o=null,s=i.quietMillis||100,r=i.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,s=r,c=i.transport||t.fn.select2.ajaxDefaults.transport,u={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},d=t.extend({},t.fn.select2.ajaxDefaults.params,u);n=n?n.call(a,l.term,l.page,l.context):null,s="function"==typeof s?s.call(a,l.term,l.page,l.context):s,o&&"function"==typeof o.abort&&o.abort(),i.params&&(t.isFunction(i.params)?t.extend(d,i.params.call(a)):t.extend(d,i.params)),t.extend(d,{url:s,dataType:i.dataType,data:n,success:function(t){var e=i.results(t,l.page,l);l.callback(e)},error:function(t,e,i){var n={hasError:!0,jqXHR:t,textStatus:e,errorThrown:i};l.callback(n)}}),o=c.call(a,d)},s)}}function x(e){var i,n,o=e,s=function(t){return""+t.text};t.isArray(o)&&(n=o,o={results:n}),t.isFunction(o)===!1&&(n=o,o=function(){return n});var r=o();return r.text&&(s=r.text,t.isFunction(s)||(i=r.text,s=function(t){return t[i]})),function(e){var i,n=e.term,r={results:[]};return""===n?void e.callback(o()):(i=function(o,r){var a,l;if(o=o[0],o.children){a={};for(l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],t(o.children).each2(function(t,e){i(e,a.children)}),(a.children.length||e.matcher(n,s(a),o))&&r.push(a)}else e.matcher(n,s(o),o)&&r.push(o)},t(o().results).each2(function(t,e){i(e,r.results)}),void e.callback(r))}}function C(i){var n=t.isFunction(i);return function(o){var s=o.term,r={results:[]},a=n?i(o):i;t.isArray(a)&&(t(a).each(function(){var t=this.text!==e,i=t?this.text:this;(""===s||o.matcher(s,i))&&r.results.push(t?this:{id:this,text:this})}),o.callback(r))}}function k(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function S(e,i){if(t.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return e.apply(i,n)}return e}function T(e){var i=0;return t.each(e,function(t,e){e.children?i+=T(e.children):i++}),i}function M(t,i,n,o){var s,a,l,c,u,d=t,p=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(u=o.tokenSeparators[l],a=t.indexOf(u),!(a>=0));l++);if(0>a)break;if(s=t.substring(0,a),t=t.substring(a+u.length),s.length>0&&(s=o.createSearchChoice.call(this,s,i),s!==e&&null!==s&&o.id(s)!==e&&null!==o.id(s))){for(p=!1,l=0,c=i.length;c>l;l++)if(r(o.id(s),o.id(i[l]))){p=!0;break}p||n(s)}}return d!==t?t:void 0}function z(){var e=this;t.each(arguments,function(t,i){e[i].remove(),e[i]=null})}function D(e,i){var n=function(){};return n.prototype=new e,n.prototype.constructor=n,n.prototype.parent=e.prototype,n.prototype=t.extend(n.prototype,i),n}if(window.Select2===e){var P,q,A,I,R,E,O,N,F={x:0,y:0},P={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case P.LEFT:case P.RIGHT:case P.UP:case P.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case P.SHIFT:case P.CTRL:case P.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},L="<div class='select2-measure-scrollbar'></div>",$={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};O=t(document),R=function(){var t=1;return function(){return t++}}(),q=D(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var n,o,r=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+R()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t("body"),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(S(i.containerCss,this.opts.element)),this.container.addClass(S(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=n=this.container.find(r),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),u(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),p(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&n.mousewheel(function(t,e,i,o){var s=n.scrollTop();o>0&&0>=s-o?(n.scrollTop(0),m(t)):0>o&&n.get(0).scrollHeight-n.scrollTop()+o<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),m(t))}),c(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var a=i.element.prop("disabled");a===e&&(a=!1),this.enable(!a);var l=i.element.prop("readonly");l===e&&(l=!1),this.readonly(l),N=N||s(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2"),n=this;this.close(),t.length&&t[0].detachEvent&&t.each(function(){this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),z.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:r(t.attr("locked"),"locked")||r(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var n,o,s,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=o=i.element),o&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=t.extend({},{populateResults:function(n,o,s){var r,a=this.opts.id,l=this.liveRegion;(r=function(n,o,u){var d,p,h,f,m,g,v,y,_,b;n=i.sortResults(n,o,s);var w=[];for(d=0,p=n.length;p>d;d+=1)h=n[d],m=h.disabled===!0,f=!m&&a(h)!==e,g=h.children&&h.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(h)),v.attr("role","presentation"),y=t(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+R()),y.attr("role","option"),b=i.formatResult(h,y,s,c.opts.escapeMarkup),b!==e&&(y.html(b),v.append(y)),g&&(_=t("<ul></ul>"),_.addClass("select2-result-sub"),r(h.children,_,u+1),v.append(_)),v.data("select2-data",h),w.push(v[0]);o.append(w),l.text(i.formatMatches(n.length))})(o,n,0)}},t.fn.select2.defaults,i),"function"!=typeof i.id&&(s=i.id,i.id=function(t){return t[s]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind(function(t){var i,o,s,r={results:[],more:!1},a=t.term;s=function(e,i){var n;e.is("option")?t.matcher(a,e.text(),e)&&i.push(c.optionToData(e)):e.is("optgroup")&&(n=c.optionToData(e),e.children().each2(function(t,e){s(e,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==e&&i.length>0&&(o=this.getPlaceholderOption(),o&&(i=i.not(o))),i.each2(function(t,e){s(e,r.results)}),t.callback(r)}),i.id=function(t){return t.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=w.call(i.element,i.ajax)):"data"in i?i.query=x(i.data):"tags"in i&&(i.query=C(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,n){var o=[];t(a(e.val(),i.separator)).each(function(){var e={id:this,text:this},n=i.tags;t.isFunction(n)&&(n=n()),t(n).each(function(){return r(this.id,e.id)?(e=this,!1):void 0}),o.push(e)}),n(o)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,o=this;n.on("change.select2",this.bind(function(t){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection();
})),this._sync=this.bind(function(){var t=n.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=n.prop("readonly");i===e&&(i=!1),this.readonly(i),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(S(this.opts.containerCssClass,this.opts.element)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(this.opts.dropdownCssClass,this.opts.element))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",o._sync)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(e){t.each(e,o._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var e,i,n,o,s,r=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),d=t(window),p=d.width(),h=d.height(),f=d.scrollLeft()+p,m=d.scrollTop()+h,g=a.top+l,v=a.left,y=m>=g+u,_=a.top-u>=d.scrollTop(),b=r.outerWidth(!1),w=f>=v+b,x=r.hasClass("select2-drop-above");x?(i=!0,!_&&y&&(n=!0,i=!1)):(i=!1,!y&&_&&(n=!0,i=!0)),n&&(r.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),f=d.scrollLeft()+p,m=d.scrollTop()+h,g=a.top+l,v=a.left,b=r.outerWidth(!1),w=f>=v+b,r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(s=t(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),b=r.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:N.width),b>c?c=b:b=c,u=r.outerHeight(!1),w=f>=v+b):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),g-=e.top,v-=e.left),w||(v=a.left+this.container.outerWidth(!1)-b),o={left:v,width:c},i?(o.top=a.top-u,o.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(o.top=g,o.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),o=t.extend(o,S(this.opts.dropdownCss,this.opts.element)),r.css(o)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),O.on("mousemove.select2Event",function(t){F.x=t.pageX,F.y=t.pageY}),!0):!1},opening:function(){var e,n=this.containerEventName,o="scroll."+n,s="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0==e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(n){i(e);var o,s=t("#select2-drop");s.length>0&&(o=s.data("select2"),o.opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close(),n.preventDefault(),n.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){t(this).on(s+" "+o+" "+r,function(t){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,n="resize."+e,o="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(i).off(n).off(o)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),O.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return S(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,n,o,s,r,a,l,c=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return void c.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),n=t(e[i]),l=(n.offset()||{}).top||0,o=l+n.outerHeight(!0),i===e.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(o=a.offset().top+a.outerHeight(!0))),s=c.offset().top+c.outerHeight(!0),o>s&&c.scrollTop(c.scrollTop()+(o-s)),r=l-c.offset().top,0>r&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=e;var o=t(i[n]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var i,n,s=this.findHighlightableChoices();return 0===arguments.length?o(s.filter(".select2-highlighted")[0],s.get()):(e>=s.length&&(e=s.length-1),0>e&&(e=0),this.removeHighlight(),i=t(s[e]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),n=i.data("select2-data"),void(n&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,i=e.find("li.select2-more-results"),n=this.resultsPage+1,o=this,s=this.search.val(),r=this.context;0!==i.length&&(t=i.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:n,context:r,matcher:this.opts.matcher,callback:this.bind(function(t){o.opened()&&(o.opts.populateResults.call(this,e,t.results,{term:s,page:n,context:r}),o.postprocessResults(t,!1,!1),t.more===!0?(i.detach().appendTo(e).text(S(o.opts.formatLoadMore,o.opts.element,n+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),p.positionDropdown(),u.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?p.liveRegion.text(u.text()):p.liveRegion.text(p.opts.formatMatches(u.find(".select2-result-selectable").length))}function o(t){u.html(t),n()}var s,a,l,c=this.search,u=this.results,d=this.opts,p=this,h=c.val(),f=t.data(this.container,"select2-last-term");if((i===!0||!f||!r(h,f))&&(t.data(this.container,"select2-last-term",h),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(s=this.data(),t.isArray(s)&&s.length>=m&&k(d.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+S(d.formatSelectionTooBig,d.element,m)+"</li>");if(c.val().length<d.minimumInputLength)return o(k(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+S(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void o(k(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+S(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+S(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=e&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(s){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(s.hasError!==e&&k(d.formatAjaxError,"formatAjaxError"))return void o("<li class='select2-ajax-error'>"+S(d.formatAjaxError,d.element,s.jqXHR,s.textStatus,s.errorThrown)+"</li>");if(this.context=s.context===e?null:s.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(p,c.val(),s.results),a!==e&&null!==a&&p.id(a)!==e&&null!==p.id(a)&&0===t(s.results).filter(function(){return r(p.id(this),p.id(a))}).length&&this.opts.createSearchChoicePosition(s.results,a)),0===s.results.length&&k(d.formatNoMatches,"formatNoMatches"))return void o("<li class='select2-no-results'>"+S(d.formatNoMatches,d.element,c.val())+"</li>");u.empty(),p.opts.populateResults.call(this,u,s.results,{term:c.val(),page:this.resultsPage,context:null}),s.more===!0&&k(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+d.escapeMarkup(S(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(s,i),n(),this.opts.element.trigger({type:"select2-loaded",items:s})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(e),this.onSelect(n,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function i(){var i,n,o,s,r,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==e)for(n=i.split(";"),s=0,r=n.length;r>s;s+=1)if(a=n[s].replace(/\s/g,""),o=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),A=D(q,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(n=i.createTextRange(),n.collapse(!1),n.select()):i.setSelectionRange&&(o=this.search.val().length,i.setSelectionRange(o,o))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),z.call(this,"selection","focusser")},initContainer:function(){var e,n,o=this.container,s=this.dropdown,r=R();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=o.find(".select2-choice"),this.focusser=o.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),n=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)return void m(t);switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),void m(t);case P.ENTER:return this.selectHighlighted(),void m(t);case P.TAB:return void this.selectHighlighted({noFocus:!0});case P.ESC:return this.cancel(t),void m(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.ESC){if(this.opts.openOnEnter===!1&&t.which===P.ENTER)return void m(t);if(t.which==P.DOWN||t.which==P.UP||t.which==P.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==P.DELETE||t.which==P.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(n){i(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(n)})),s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var n=t.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(i,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()===e?!1:(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val()},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(n))}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var o=i.val(),s=null;e.query({matcher:function(t,i,n){var a=r(o,e.id(n));return a&&(s=n),a},callback:t.isFunction(n)?function(){n(s)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(t,e){return r(o.id(e.data("select2-data")),o.opts.element.val())?(n=t,!1):void 0}),i!==!1&&(e===!0&&n>=0?this.highlight(n):this.highlight(0)),e===!0){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(T(t.results)>=s)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(i,this.id(t))||this.triggerChange({added:t,removed:n})}},updateSelection:function(t){var i,n,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),o.empty(),null!==t&&(i=this.opts.formatSelection(t,o,this.opts.escapeMarkup)),i!==e&&o.append(i),n=this.opts.formatSelectionCssClass(t,o),n!==e&&o.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,n=null,o=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return n=o.optionToData(e),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:s});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){o.opts.element.val(t?o.id(t):""),o.updateSelection(t),o.setPlaceholder(),i&&o.triggerChange({added:t,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,n=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==e&&(i=null),i):(arguments.length>1&&(n=arguments[1]),void(t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:i})):this.clear(n)))}}),I=D(q,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){n.push(i.optionToData(e))}),e(n)}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var o=a(i.val(),e.separator),s=[];e.query({matcher:function(i,n,a){var l=t.grep(o,function(t){return r(t,e.id(a))}).length;return l&&s.push(a),l},callback:t.isFunction(n)?function(){for(var t=[],i=0;i<o.length;i++)for(var a=o[i],l=0;l<s.length;l++){var c=s[l];if(r(a,e.id(c))){t.push(c),s.splice(l,1);break}}n(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),z.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var n=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){n.search[0].focus(),n.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+R()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),o=i.next(".select2-search-choice:not(.select2-locked)"),s=f(this.search);if(i.length&&(t.which==P.LEFT||t.which==P.RIGHT||t.which==P.BACKSPACE||t.which==P.DELETE||t.which==P.ENTER)){var r=i;return t.which==P.LEFT&&n.length?r=n:t.which==P.RIGHT?r=o.length?o:null:t.which===P.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),r=n.length?n:o):t.which==P.DELETE?this.unselect(i.first())&&(this.search.width(10),r=o.length?o:null):t.which==P.ENTER&&(r=null),this.selectChoice(r),m(t),void(r&&r.length||this.open())}if((t.which===P.BACKSPACE&&1==this.keydowns||t.which==P.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),void m(t);case P.ENTER:return this.selectHighlighted(),void m(t);case P.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case P.ESC:return this.cancel(t),void m(t)}if(t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.BACKSPACE&&t.which!==P.ESC){if(t.which===P.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)&&m(t),t.which===P.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],n=[],s=this;t(e).each(function(){o(s.id(this),i)<0&&(i.push(s.id(this)),n.push(this))}),e=n,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,i){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,o,s=!i.locked,r=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=s?r:a,c=this.id(i),u=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=e&&l.find("div").replaceWith("<div>"+n+"</div>"),o=this.opts.formatSelectionCssClass(i,l.find("div")),o!=e&&l.addClass(o),s&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){
this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(e){var i,n,s=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var r=t.Event("select2-removing");if(r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(n=o(this.id(i),s))>=0;)s.splice(n,1),this.setVal(s),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var n=this.getVal(),s=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;s.each2(function(t,e){var i=a.id(e.data("select2-data"));o(i,n)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+S(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var t,e,i,n,o,s=l(this.search);t=v(this.search)+10,e=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,o=i-(e-n)-s,t>o&&(o=i-s),40>o&&(o=i-s),0>=o&&(o=t),this.search.width(Math.floor(o))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),a(t,this.opts.separator))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){o(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),i=0;i<e.length;i++)for(var n=0;n<t.length;n++)r(this.opts.id(e[i]),this.opts.id(t[n]))&&(e.splice(i,1),i>0&&i--,t.splice(n,1),n--);return{added:e,removed:t}},val:function(i,n){var o,s=this;if(0===arguments.length)return this.getVal();if(o=this.data(),o.length||(o=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t.map(e,s.id);s.setVal(i),s.updateSelection(e),s.clearSearch(),n&&s.triggerChange(s.buildChangeDetails(o,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,i){var n,o,s=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(o=this.data(),e||(e=[]),n=t.map(e,function(t){return s.opts.id(t)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(o,this.data())),void 0)}}),t.fn.select2=function(){var i,n,s,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:t.extend({},l[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.prop("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),n=a?new window.Select2["class"].multi:new window.Select2["class"].single,n.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(o(l[0],c)<0)throw"Unknown method: "+l[0];if(r=e,n=t(this).data("select2"),n===e)return;if(s=l[0],"container"===s?r=n.container:"dropdown"===s?r=n.dropdown:(p[s]&&(s=p[s]),r=n[s].apply(n,l.slice(1))),o(l[0],u)>=0||o(l[0],d)>=0&&1==l.length)return!1}}),r===e?this:r},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,n){var o=[];return _(t.text,i.term,o,n),o.join("")},formatSelection:function(t,i,n){return t?n(t.text):e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,i){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return n(""+e).toUpperCase().indexOf(n(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:b,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,i){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return e&&t.opts.minimumResultsForSearch<0?!1:!0}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,i){return"Loading failed"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:C},util:{debounce:d,markMatch:_,escapeMarkup:b,stripDiacritics:n},"class":{"abstract":q,single:A,multi:I}}}}(jQuery),define("select2",["jquery","bootstrap"],function(){}),function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(e,i){var n,o=t(e).data(),s={},r=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in o)i.test(a)&&(n=a.replace(r,function(t,e){return e.toLowerCase()}),s[n]=o[a]);return s}function n(e){var i={};if(u[e]||(e=e.split("-")[0],u[e])){var n=u[e];return t.each(c,function(t,e){e in n&&(i[e]=n[e])}),i}}var o=t(window),s=function(e,i){this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(d.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};s.prototype={constructor:s,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(u[n]||(n=n.split("-")[0],u[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=d.parseFormat(i.format);i.startDate!==-(1/0)&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=d.parseDate(i.startDate,o,i.language):i.startDate=-(1/0)),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=d.parseDate(i.endDate,o,i.language):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)});var s=String(i.orientation).toLowerCase().split(/\s+/g),r=i.orientation.toLowerCase();if(s=t.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)}),i.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===s.length)switch(s[0]){case"top":case"bottom":i.orientation.y=s[0];break;case"left":case"right":i.orientation.x=s[0]}else r=t.grep(s,function(t){return/^left|right$/.test(t)}),i.orientation.x=r[0]||"auto",r=t.grep(s,function(t){return/^top|bottom$/.test(t)}),i.orientation.y=r[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.on(i)},_unapplyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.date,o=this._utc_to_local(n);this.element.trigger({type:e,date:o,format:t.proxy(function(t){var e=t||this.o.format;return d.formatDate(n,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(t){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(this._local_to_utc(t))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(t){return void 0===t&&(t=this.o.format),d.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),i=this.picker.outerHeight(),n=10,s=o.width(),r=o.height(),a=o.scrollTop(),l=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=c.left,h=c.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=e-d)):(this.picker.addClass("datepicker-orient-left"),c.left<0?p-=c.left-n:c.left+e>s&&(p=s-e-n));var f,m,g=this.o.orientation.y;"auto"===g&&(f=-a+c.top-i,m=a+r-(c.top+u+i),g=Math.max(f,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?h+=u:h-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:h,left:p,zIndex:l})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=new Date(this.date),i=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],t instanceof Date&&(t=this._local_to_utc(t)),i=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=d.parseDate(t,this.o.format,this.o.language),i?this.setValue():t?e.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate"),this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date)),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+u[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+u[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=this.date.valueOf(),r=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()==n&&e.getUTCMonth()<o?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()==n&&e.getUTCMonth()>o)&&i.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==r.getFullYear()&&e.getUTCMonth()==r.getMonth()&&e.getUTCDate()==r.getDate()&&i.push("today"),s&&e.valueOf()==s&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,n=new Date(this.viewDate),o=n.getUTCFullYear(),s=n.getUTCMonth(),r=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),a=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),l=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[s]+" "+o),this.picker.find("tfoot th.today").text(u[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(u[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=e(o,s-1,28,0,0,0,0),h=d.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(h),p.setUTCDate(h-(p.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(p);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];p.valueOf()<f;){if(p.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),y=new Date(+v+(11-v.getUTCDay())%7*864e5),_=new Date(+(_=e(y.getUTCFullYear(),0,1))+(11-_.getUTCDay())%7*864e5),b=(y-_)/864e5/7+1;g.push('<td class="cw">'+b+"</td>")}if(m=this.getClassNames(p),m.push("day"),this.o.beforeShowDay!==t.noop){var w=this.o.beforeShowDay(this._utc_to_local(p));void 0===w?w={}:"boolean"==typeof w?w={enabled:w}:"string"==typeof w&&(w={classes:w}),w.enabled===!1&&m.push("disabled"),w.classes&&(m=m.concat(w.classes.split(/\s+/))),w.tooltip&&(i=w.tooltip)}m=t.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var x=this.date&&this.date.getUTCFullYear(),C=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");x&&x==o&&C.eq(this.date.getUTCMonth()).addClass("active"),(r>o||o>l)&&C.addClass("disabled"),o==r&&C.slice(0,a).addClass("disabled"),o==l&&C.slice(c+1).addClass("disabled"),g="",o=10*parseInt(o/10,10);var k=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var S=-1;11>S;S++)g+='<span class="year'+(-1==S?" old":10==S?" new":"")+(x==o?" active":"")+(r>o||o>l?" disabled":"")+'">'+o+"</span>",o+=1;k.html(g)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var n=t(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=d.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var s=new Date;s=e(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0),this.showMode(-2);var r="linked"==this.o.todayBtn?null:"view";this._setDate(s,r);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),u=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(u,c,l,0,0,0,0))}else{var u=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(u),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(u,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,u=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,u-=1):c-=1:n.is(".new")&&(11==c?(c=0,u+=1):c+=1),this._setDate(e(u,c,l,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!=e||this.hide()},moveMonth:function(t,e){if(!e)return t;var i,n,o=new Date(t.valueOf()),s=o.getUTCDate(),r=o.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1==a)n=-1==e?function(){return o.getUTCMonth()==r}:function(){return o.getUTCMonth()!=i},i=r+e,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)o=this.moveMonth(o,e);i=o.getUTCMonth(),o.setUTCDate(s),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--s),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,o=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(o){this._trigger("changeDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var r=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};r.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){var i=t(e.target).data("datepicker"),n=i.getUTCDate(),o=t.inArray(e.target,this.inputs),s=this.inputs.length;if(-1!=o){if(n<this.dates[o])for(;o>=0&&n<this.dates[o];)this.pickers[o--].setUTCDate(n);else if(n>this.dates[o])for(;s>o&&n>this.dates[o];)this.pickers[o++].setUTCDate(n);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var a=t.fn.datepicker;t.fn.datepicker=function(e){var o=Array.apply(null,arguments);o.shift();var a;return this.each(function(){var c=t(this),u=c.data("datepicker"),d="object"==typeof e&&e;if(!u){var p=i(this,"date"),h=t.extend({},l,p,d),f=n(h.language),m=t.extend({},l,f,p,d);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",u=new r(this,t.extend(m,g)))}else c.data("datepicker",u=new s(this,m))}return"string"==typeof e&&"function"==typeof u[e]&&(a=u[e].apply(u,o),void 0!==a)?!1:void 0}),void 0!==a?a:this};var l=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=s;var u=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,d.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,n,o){if(i instanceof Date)return i;if("string"==typeof n&&(n=d.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var r,a,l=/([\-+]\d+)([dmwy])/,c=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var p=0;p<c.length;p++)switch(r=l.exec(c[p]),a=parseInt(r[1]),r[2]){case"d":i.setUTCDate(i.getUTCDate()+a);break;case"m":i=s.prototype.moveMonth.call(s.prototype,i,a);break;case"w":i.setUTCDate(i.getUTCDate()+7*a);break;case"y":i=s.prototype.moveYear.call(s.prototype,i,a)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var h,f,r,c=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var y=n.parts.slice();if(c.length!=y.length&&(y=t(y).filter(function(e,i){return-1!==t.inArray(i,g)}).toArray()),c.length==y.length){for(var p=0,_=y.length;_>p;p++){if(h=parseInt(c[p],10),r=y[p],isNaN(h))switch(r){case"MM":f=t(u[o].months).filter(function(){var t=this.slice(0,c[p].length),e=c[p].slice(0,t.length);return t==e}),h=t.inArray(f[0],u[o].months)+1;break;case"M":f=t(u[o].monthsShort).filter(function(){var t=this.slice(0,c[p].length),e=c[p].slice(0,t.length);return t==e}),h=t.inArray(f[0],u[o].monthsShort)+1}m[r]=h}for(var b,w,p=0;p<g.length;p++)w=g[p],w in m&&!isNaN(m[w])&&(b=new Date(i),v[w](b,m[w]),isNaN(b)||(i=b))}return i},formatDate:function(e,i,n){"string"==typeof i&&(i=d.parseFormat(i));var o={d:e.getUTCDate(),D:u[n].daysShort[e.getUTCDay()],DD:u[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:u[n].monthsShort[e.getUTCMonth()],MM:u[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m;for(var e=[],s=t.extend([],i.separators),r=0,a=i.parts.length;a>=r;r++)s.length&&e.push(s.shift()),e.push(o[i.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=d,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=a,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),i.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),define("datepicker",["jquery","bootstrap"],function(){}),function(t){t.fn.listnav=function(e){var i=t.extend({},t.fn.listnav.defaults,e),n=["_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-"],o=!1,s=null!==document.ontouchstart?"click":"touchstart";return i.prefixes=t.map(i.prefixes,function(t){return t.toLowerCase()}),this.each(function(){function e(){if(f.append(h()),m=t(".ln-letters",f).slice(0,1),i.showCounts&&(g=t(".ln-letter-count",f).slice(0,1)),a(),u(),p(),i.flagDisabled&&c(),i.includeAll||t(".all",m).remove(),i.includeNums||t("._",m).remove(),i.includeOther||t(".-",m).remove(),i.removeDisabled&&t(".ln-disabled",m).remove(),t(":last",m).addClass("ln-last"),
t.cookie&&null!==i.cookieName){var e=t.cookie(i.cookieName);null!==e&&(i.initLetter=e)}if(""!==i.initLetter)o=!0,t("."+i.initLetter.toLowerCase(),m).slice(0,1).trigger(s);else if(i.includeAll)t(".all",m).addClass("ln-selected");else for(var r=i.includeNums?0:1;r<n.length;r++)if(_[n[r]]>0){o=!0,t("."+n[r],m).slice(0,1).trigger(s);break}}function r(){var e=g.outerHeight();g.css({top:t("a:first",f).slice(0,1).position().top-e})}function a(){var e,n,o="",s=i.prefixes.length>0,r=i.filterSelector.length>0;t(y).children().each(function(){if(n=t(this),e=r?t.trim(n.find(i.filterSelector).text()).toLowerCase():t.trim(n.text()).toLowerCase(),""!==e){if(s){var a=t.map(i.prefixes,function(t){return t.indexOf(" ")<=0?t+" ":t}),c=t.grep(a,function(t){return 0===e.indexOf(t)});if(c.length>0){var u=e.toLowerCase().split(c[0])[1];return o=null!=u?t.trim(u).charAt(0):e.charAt(0),void l(o,n,!0)}}o=e.charAt(0),l(o,n)}})}function l(t,e,i){/\W/.test(t)&&(t="-"),isNaN(t)||(t="_"),e.addClass("ln-"+t),void 0===_[t]&&(_[t]=0),_[t]++,i||b++}function c(){for(var e=0;e<n.length;e++)void 0===_[n[e]]&&t("."+n[e],m).addClass("ln-disabled")}function u(){y.append('<li class="ln-no-match listNavHide">'+i.noMatchText+"</li>")}function d(e){if(t(e).hasClass("all"))return b;var i=_[t(e).attr("class").split(" ")[0]];return void 0!==i?i:0}function p(){i.showCounts&&(f.mouseover(function(){r()}),t(".ln-letters a",f).mouseover(function(){var e=t(this).position().left,i=t(this).outerWidth()+"px",n=d(this);g.css({left:e,width:i}).text(n).addClass("letterCountShow").removeClass("listNavHide")}).mouseout(function(){g.addClass("listNavHide").removeClass("letterCountShow")})),t("a",m).bind(s,function(e){e.preventDefault();var n=t(this),s=n.attr("class").split(" ")[0],r=y.children(".ln-no-match");if(x!==s){if(t("a.ln-selected",m).removeClass("ln-selected"),"all"===s)y.children().addClass("listNavShow").removeClass("listNavHide"),r.addClass("listNavHide").removeClass("listNavShow"),w=!0;else{w?(y.children().addClass("listNavHide").removeClass("listNavShow"),w=!1):""!==x&&y.children(".ln-"+x).addClass("listNavHide").removeClass("listNavShow");var a=d(this);a>0?(y.children(".ln-"+s).addClass("listNavShow").removeClass("listNavHide"),r.addClass("listNavHide").removeClass("listNavShow")):r.addClass("listNavShow").removeClass("listNavHide")}x=s,t.cookie&&null!==i.cookieName&&t.cookie(i.cookieName,s,{expires:999}),n.addClass("ln-selected"),n.blur(),o||null===i.onClick?o=!1:i.onClick(s)}})}function h(){for(var t=[],e=1;e<n.length;e++)0===t.length&&t.push('<a class="all" href="#">ALL</a><a class="_" href="#">0-9</a>'),t.push('<a class="'+n[e]+'" href="#">'+("-"===n[e]?"...":n[e].toUpperCase())+"</a>");return'<div class="ln-letters">'+t.join("")+"</div>"+(i.showCounts?'<div class="ln-letter-count listNavHide">0</div>':"")}var f,m,g,v=this.id,y=t(this),_={},b=0,w=!0,x="";t("#"+v+"-nav").length||t('<div id="'+v+'-nav" class="listNav"/>').insertBefore(y),f=t("#"+v+"-nav"),e()})},t.fn.listnav.defaults={initLetter:"",includeAll:!0,incudeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,cookieName:null,onClick:null,prefixes:[],filterSelector:""}}(jQuery),define("jquery_listnav",["jquery"],function(){}),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var r=n.call(arguments,1),a=0,l=this.length;l>a;a++){var c=this[a],u=t.data(c,e);if(u)if(t.isFunction(u[o])&&"_"!==o.charAt(0)){var d=u[o].apply(u,r);if(void 0!==d)return d}else s("no such method '"+o+"' for "+e+" instance");else s("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n))})}}if(t){var s="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),o(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("bridget",["jquery"],i):i(t.jQuery)}(window),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var r=n.call(arguments,1),a=0,l=this.length;l>a;a++){var c=this[a],u=t.data(c,e);if(u)if(t.isFunction(u[o])&&"_"!==o.charAt(0)){var d=u[o].apply(u,r);if(void 0!==d)return d}else s("no such method '"+o+"' for "+e+" instance");else s("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n))})}}if(t){var s="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),o(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i(t.jQuery)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var o=function(){};i.removeEventListener?o=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(o=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var s={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:t.eventie=s}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():s.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==o.readyState;if(!e.isReady&&!i){e.isReady=!0;for(var n=0,r=s.length;r>n;n++){var a=s[n];a()}}}function n(n){return n.bind(o,"DOMContentLoaded",i),n.bind(o,"readystatechange",i),n.bind(t,"load",i),e}var o=t.document,s=[];e.isReady=!1,"function"==typeof define&&define.amd?(e.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],n)):t.docReady=n(t.eventie)}(this),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,s=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),s="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(s?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,s=this.getListenersAsObject(t);for(o in s)s.hasOwnProperty(o)&&(n=e(s[o],i),-1!==n&&s[o].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)s.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?s.call(this,n,o):r.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,s,r=this.getListenersAsObject(t);for(o in r)if(r.hasOwnProperty(o))for(n=r[o].length;n--;)i=r[o][n],i.once===!0&&this.removeListener(t,i.listener),s=i.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=s,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,s=i.length;s>o;o++)if(e=i[o]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=r.length;i>e;e++){var n=r[e];t[n]=0}return t}function n(t){function n(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var n=s(t);if("none"===n.display)return i();var o={};o.width=t.offsetWidth,o.height=t.offsetHeight;for(var u=o.isBorderBox=!(!c||!n[c]||"border-box"!==n[c]),d=0,p=r.length;p>d;d++){var h=r[d],f=n[h];f=a(t,f);var m=parseFloat(f);o[h]=isNaN(m)?0:m}var g=o.paddingLeft+o.paddingRight,v=o.paddingTop+o.paddingBottom,y=o.marginLeft+o.marginRight,_=o.marginTop+o.marginBottom,b=o.borderLeftWidth+o.borderRightWidth,w=o.borderTopWidth+o.borderBottomWidth,x=u&&l,C=e(n.width);C!==!1&&(o.width=C+(x?0:g+b));var k=e(n.height);return k!==!1&&(o.height=k+(x?0:v+w)),o.innerWidth=o.width-(g+b),o.innerHeight=o.height-(v+w),o.outerWidth=o.width+y,o.outerHeight=o.height+_,o}}function a(t,e){if(o||-1===e.indexOf("%"))return e;var i=t.style,n=i.left,s=t.runtimeStyle,r=s&&s.left;return r&&(s.left=t.currentStyle.left),i.left=e,e=i.pixelLeft,i.left=n,r&&(s.left=r),e}var l,c=t("boxSizing");return function(){if(c){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[c]="border-box";var i=document.body||document.documentElement;i.appendChild(t);var n=s(t);l=200===e(n.width),i.removeChild(t)}}(),n}var o=t.getComputedStyle,s=o?function(t){return o(t,null)}:function(t){return t.currentStyle},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("get-style-property")):t.getSize=n(t.getStyleProperty)}(window),function(t,e){function i(t,e){return t[a](e)}function n(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function o(t,e){n(t);for(var i=t.parentNode.querySelectorAll(e),o=0,s=i.length;s>o;o++)if(i[o]===t)return!0;return!1}function s(t,e){return n(t),i(t,e)}var r,a=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0,n=t.length;n>i;i++){var o=t[i],s=o+"MatchesSelector";if(e[s])return s}}();if(a){var l=document.createElement("div"),c=i(l,"div");r=c?i:s}else r=o;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return r}):window.matchesSelector=r}(this,Element.prototype),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return e=null,!0}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function o(t,o,s){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var l=s("transition"),c=s("transform"),u=l&&c,d=!!s("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],h=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var t={},e=0,i=h.length;i>e;e++){var n=h[e],o=s(n);o&&o!==n&&(t[n]=o)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=o(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){var n=f[i]||i;e[n]=t[i]}},a.prototype.getPosition=function(){var t=r(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,o=parseInt(t[i?"left":"right"],10),s=parseInt(t[n?"top":"bottom"],10);o=isNaN(o)?0:o,s=isNaN(s)?0:s;var a=this.layout.size;o-=i?a.paddingLeft:a.paddingRight,s-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=s},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var m=d?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),s=parseInt(e,10),r=o===this.position.x&&s===this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,l=e-n,c={},u=this.layout.options;a=u.isOriginLeft?a:-a,l=u.isOriginTop?l:-l,c.transform=m(a,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=u?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var g=c&&n(c)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1))},a.prototype.transition=a.prototype[l?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=v[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var o=e.onEnd[n];o.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var y={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(y)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!l||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var s=t.getComputedStyle,r=s?function(t){return s(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o):(t.Outlayer={},t.Outlayer.Item=o(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===d.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,o=t.length;o>n;n++)e.push(t[n]);else e.push(t);return e}function o(t,e){var i=h(e,t);-1!==i&&e.splice(i,1)}function s(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function r(i,r,d,h,f,m){function g(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!p(t))return void(l&&l.error("Bad "+this.constructor.namespace+" element: "+t));this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var n=++v;this.element.outlayerGUID=n,y[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var v=0,y={};return g.namespace="outlayer",g.Item=m,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(g.prototype,d.prototype),g.prototype.option=function(t){e(this.options,t)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0,s=e.length;s>o;o++){var r=e[o],a=new i(r,this);n.push(a)}return n},g.prototype._filterFindItemElements=function(t){t=n(t);for(var e=this.options.itemSelector,i=[],o=0,s=t.length;s>o;o++){var r=t[o];if(p(r))if(e){f(r,e)&&i.push(r);for(var a=r.querySelectorAll(e),l=0,c=a.length;c>l;l++)i.push(a[l])}else i.push(r)}return i},g.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=h(this.element)},g.prototype._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):p(n)&&(i=n),this[t]=i?h(i)[e]:n):this[t]=0},g.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},g.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i];o.isIgnored||e.push(o)}return e},g.prototype._layoutItems=function(t,e){function i(){n.emitEvent("layoutComplete",[n,t])}var n=this;if(!t||!t.length)return void i();this._itemsOn(t,"layout",i);for(var o=[],s=0,r=t.length;r>s;s++){var a=t[s],l=this._getItemLayoutPosition(a);l.item=a,l.isInstant=e||a.isLayoutInstant,o.push(l)}this._processLayoutQueue(o)},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},g.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},g.prototype._getContainerSize=u,g.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},g.prototype._itemsOn=function(t,e,i){function n(){return o++,o===s&&i.call(r),!0}for(var o=0,s=t.length,r=this,a=0,l=t.length;l>a;a++){var c=t[a];c.on(e,n)}},g.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},g.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},g.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var n=t[e];this.ignore(n)}}},g.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var n=t[e];o(n,this.stamps),this.unignore(n)}},g.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n(t)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},g.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},g.prototype._manageStamp=u,g.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=h(t),o={left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom};return o},g.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},g.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var t=h(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},g.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},g.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},g.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.reveal()}},g.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.hide()}},g.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];if(n.element===t)return n}},g.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i],s=this.getItem(o);s&&e.push(s)}return e}},g.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,s=e.length;s>i;i++){var r=e[i];r.remove(),o(r,this.items)}}},g.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];n.destroy()}this.unbindResize(),delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},g.data=function(t){var e=t&&t.outlayerGUID;return e&&y[e]},g.create=function(t,i){function n(){g.apply(this,arguments)}return Object.create?n.prototype=Object.create(g.prototype):e(n.prototype,g.prototype),n.prototype.constructor=n,n.defaults=e({},g.defaults),e(n.defaults,i),n.prototype.settings={},n.namespace=t,n.data=g.data,n.Item=function(){m.apply(this,arguments)},n.Item.prototype=new m,r(function(){for(var e=s(t),i=a.querySelectorAll(".js-"+e),o="data-"+e+"-options",r=0,u=i.length;u>r;r++){var d,p=i[r],h=p.getAttribute(o);try{d=h&&JSON.parse(h)}catch(f){l&&l.error("Error parsing "+o+" on "+p.nodeName.toLowerCase()+(p.id?"#"+p.id:"")+": "+f);continue}var m=new n(p,d);c&&c.data(p,t,m)}}),c&&c.bridget&&c.bridget(t,n),n},g.Item=m,g}var a=t.document,l=t.console,c=t.jQuery,u=function(){},d=Object.prototype.toString,p="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},h=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],r):t.Outlayer=r(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t){function e(){t.Item.apply(this,arguments)}return e.prototype=new t.Item,e.prototype._create=function(){this.id=this.layout.itemGUID++,t.Item.prototype._create.call(this),this.sortData={}},e.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var n=e[i];this.sortData[i]=n(this.element,this)}}},e}"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],e):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window),function(t){function e(t,e){function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}return function(){function t(t){return function(){return e.prototype[t].apply(this.isotope,arguments)}}for(var n=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],o=0,s=n.length;s>o;o++){var r=n[o];i.prototype[r]=t(r)}}(),i.prototype.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!==this.isotope.size.innerHeight},i.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},i.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},i.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},i.prototype.getSegmentSize=function(t,e){var i=t+e,n="outer"+e;if(this._getMeasurement(i,n),!this[i]){var o=this.getFirstItemSize();this[i]=o&&o[n]||this.isotope.size["inner"+e]}},i.prototype.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},i.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},i.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function n(){i.apply(this,arguments)}return n.prototype=new i,e&&(n.options=e),n.prototype.namespace=t,i.modes[t]=n,n},i}"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window),function(t){function e(t,e){var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&1>e?"round":"ceil",o=Math[n](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var s=this._getColGroup(o),r=Math.min.apply(Math,s),a=i(s,r),l={x:this.columnWidth*a,y:r},c=r+t.size.outerHeight,u=this.cols+1-s.length,d=0;u>d;d++)this.colYs[a+d]=c;return l},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var o=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,o)}return e},n.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this.options.isOriginLeft?n.left:n.right,s=o+i.outerWidth,r=Math.floor(o/this.columnWidth);r=Math.max(0,r);var a=Math.floor(s/this.columnWidth);a-=s%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var l=(this.options.isOriginTop?n.top:n.bottom)+i.outerHeight,c=r;a>=c;c++)this.colYs[c]=Math.max(l,this.colYs[c])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},n}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++){var o=t[i];if(o===e)return i}return-1};"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],e):t.Masonry=e(t.Outlayer,t.getSize)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t,i){var n=t.create("masonry"),o=n.prototype._getElementOffset,s=n.prototype.layout,r=n.prototype._getMeasurement;e(n.prototype,i.prototype),n.prototype._getElementOffset=o,n.prototype.layout=s,n.prototype._getMeasurement=r;var a=n.prototype.measureColumns;n.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,
a.call(this)};var l=n.prototype._manageStamp;return n.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,l.apply(this,arguments)},n}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],i):i(t.Isotope.LayoutMode,t.Masonry)}(window),function(t){function e(t){var e=t.create("fitRows");return e.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0},e.prototype._getItemLayoutPosition=function(t){t.getSize(),0!==this.x&&t.size.outerWidth+this.x>this.isotope.size.innerWidth&&(this.x=0,this.y=this.maxY);var e={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=t.size.outerWidth,e},e.prototype._getContainerSize=function(){return{height:this.maxY}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],e):e(t.Isotope.LayoutMode)}(window),function(t){function e(t){var e=t.create("vertical",{horizontalAlignment:0});return e.prototype._resetLayout=function(){this.y=0},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},e.prototype._getContainerSize=function(){return{height:this.y}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],e):e(t.Isotope.LayoutMode)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===u.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,o=t.length;o>n;n++)e.push(t[n]);else e.push(t);return e}function o(t,e){var i=d(e,t);-1!==i&&e.splice(i,1)}function s(t,i,s,l,u){function d(t,e){return function(i,n){for(var o=0,s=t.length;s>o;o++){var r=t[o],a=i.sortData[r],l=n.sortData[r];if(a>l||l>a){var c=void 0!==e[r]?e[r]:e,u=c?1:-1;return(a>l?1:-1)*u}}return 0}}var p=t.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});p.Item=l,p.LayoutMode=u,p.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),t.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var e in u.modes)this._initLayoutMode(e)},p.prototype.reloadItems=function(){this.itemGUID=0,t.prototype.reloadItems.call(this)},p.prototype._itemize=function(){for(var e=t.prototype._itemize.apply(this,arguments),i=0,n=e.length;n>i;i++){var o=e[i];o.id=this.itemGUID++}return this._updateItemsSortData(e),e},p.prototype._initLayoutMode=function(t){var i=u.modes[t],n=this.options[t]||{};this.options[t]=i.options?e(i.options,n):n,this.modes[t]=new i(this)},p.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},p.prototype._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},p.prototype.arrange=function(t){this.option(t),this._getIsInstant(),this.filteredItems=this._filter(this.items),this._sort(),this._layout()},p.prototype._init=p.prototype.arrange,p.prototype._getIsInstant=function(){var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=t,t},p.prototype._filter=function(t){function e(){d.reveal(o),d.hide(s)}var i=this.options.filter;i=i||"*";for(var n=[],o=[],s=[],r=this._getFilterTest(i),a=0,l=t.length;l>a;a++){var c=t[a];if(!c.isIgnored){var u=r(c);u&&n.push(c),u&&c.isHidden?o.push(c):u||c.isHidden||s.push(c)}}var d=this;return this._isInstant?this._noTransition(e):e(),n},p.prototype._getFilterTest=function(t){return r&&this.options.isJQueryFiltering?function(e){return r(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return s(e.element,t)}},p.prototype.updateSortData=function(t){this._getSorters(),t=n(t);var e=this.getItems(t);e=e.length?e:this.items,this._updateItemsSortData(e)},p.prototype._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=h(i)}},p.prototype._updateItemsSortData=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];n.updateSortData()}};var h=function(){function t(t){if("string"!=typeof t)return t;var i=a(t).split(" "),n=i[0],o=n.match(/^\[(.+)\]$/),s=o&&o[1],r=e(s,n),l=p.sortDataParsers[i[1]];return t=l?function(t){return t&&l(r(t))}:function(t){return t&&r(t)}}function e(t,e){var i;return i=t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&c(i)}}return t}();p.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},p.prototype._sort=function(){var t=this.options.sortBy;if(t){var e=[].concat.apply(t,this.sortHistory),i=d(e,this.options.sortAscending);this.filteredItems.sort(i),t!==this.sortHistory[0]&&this.sortHistory.unshift(t)}},p.prototype._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw Error("No layout mode: "+t);return e.options=this.options[t],e},p.prototype._resetLayout=function(){t.prototype._resetLayout.call(this),this._mode()._resetLayout()},p.prototype._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},p.prototype._manageStamp=function(t){this._mode()._manageStamp(t)},p.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},p.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},p.prototype.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},p.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps();var n=this._filterRevealAdded(e);this.layoutItems(i),this.filteredItems=n.concat(this.filteredItems)}},p.prototype._filterRevealAdded=function(t){var e=this._noTransition(function(){return this._filter(t)});return this.layoutItems(e,!0),this.reveal(e),t},p.prototype.insert=function(t){var e=this.addItems(t);if(e.length){var i,n,o=e.length;for(i=0;o>i;i++)n=e[i],this.element.appendChild(n.element);var s=this._filter(e);for(this._noTransition(function(){this.hide(s)}),i=0;o>i;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;o>i;i++)delete e[i].isLayoutInstant;this.reveal(s)}};var f=p.prototype.remove;return p.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(f.call(this,t),e&&e.length)for(var i=0,s=e.length;s>i;i++){var r=e[i];o(r,this.filteredItems)}},p.prototype._noTransition=function(t){var e=this.options.transitionDuration;this.options.transitionDuration=0;var i=t.call(this);return this.options.transitionDuration=e,i},p}var r=t.jQuery,a=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},l=document.documentElement,c=l.textContent?function(t){return t.textContent}:function(t){return t.innerText},u=Object.prototype.toString,d=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("isotope",["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],s):t.Isotope=s(t.Outlayer,t.getSize,t.matchesSelector,t.Isotope.Item,t.Isotope.LayoutMode)}(window);var Kinetic={};!function(){Kinetic={version:"5.0.1",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,UA:function(){var t=navigator.userAgent.toLowerCase(),e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(),Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},Layer:function(t){this.___init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var i=this.names[t];if(void 0!==i){for(var n=0;n<i.length;n++){var o=i[n];o._id===e&&i.splice(n,1)}0===i.length&&delete this.names[t]}}}}}(),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("kinetic",e):t.returnExports=e()}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,i=0;for(this.length=e;e>i;i++)this[i]=t[i];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],i=this.length;for(t=0;i>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,i=new Kinetic.Collection,n=t.length;for(e=0;n>e;e++)i.push(t[e]);return i},Kinetic.Collection.mapMethods=function(t){var e,i=t.prototype;for(e in i)!function(t){Kinetic.Collection.prototype[t]=function(){var e,i=this.length;for(args=[].slice.call(arguments),e=0;i>e;e++)this[e][t].apply(this[e],args);return this}}(e)},Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},scale:function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,o=this.m[1]*e+this.m[3]*i,s=this.m[0]*-i+this.m[2]*e,r=this.m[1]*-i+this.m[3]*e;this.m[0]=n,this.m[1]=o,this.m[2]=s,this.m[3]=r},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,s=this.m[3]+this.m[1]*t;this.m[0]=i,this.m[1]=n,this.m[2]=o,this.m[3]=s},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],r=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=o,this.m[4]=s,this.m[5]=r},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,o=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),r=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=o,this.m[4]=s,this.m[5]=r},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var i=this.m[0],n=this.m[1],o=this.m[2],s=this.m[3],r=this.m[4],a=this.m[5],l=(i*(e-a)-n*(t-r))/(i*s-n*o),c=(t-r-o*l)/i;this.translate(c,l)}};var t="canvas",e="2d",i="[object Array]",n="[object Number]",o="[object String]",s=Math.PI/180,r=180/Math.PI,a="#",l="",c="0",u="Kinetic warning: ",d="Kinetic error: ",p="rgb(",h={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},f=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==i},_isNumber:function(t){return Object.prototype.toString.call(t)==n},_isString:function(t){return Object.prototype.toString.call(t)==o},_hasMethods:function(t){var e,i=[];for(e in t)this._isFunction(t[e])&&i.push(e);return i.length>0},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var e,i,n=[],o=t.length,s=Kinetic.Util;for(e=0;o>e;e++)i=t[e],s._isNumber(i)?i=Math.round(1e3*i)/1e3:s._isString(i)||(i=i.toString()),n.push(i);return n},_getImage:function(i,n){var o,s;i?this._isElement(i)?n(i):this._isString(i)?(o=new Image,o.onload=function(){n(o)},o.src=i):i.data?(s=document.createElement(t),s.width=i.width,s.height=i.height,_context=s.getContext(e),_context.putImageData(i,0,0),this._getImage(s.toDataURL(),n)):n(null):n(null)},_getRGBAString:function(t){var e=t.red||0,i=t.green||0,n=t.blue||0,o=t.alpha||1;return["rgba(",e,",",i,",",n,",",o,")"].join(l)},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(a,l);var e=parseInt(t,16);return{r:255&e>>16,g:255&e>>8,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=c+t;return a+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in h?(e=h[t],{r:e[0],g:e[1],b:e[2]}):t[0]===a?this._hexToRgb(t.substring(1)):t.substr(0,4)===p?(e=f.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var i=this._clone(e);for(var n in t)i[n]=this._isObject(t[n])?this._merge(t[n],i[n]):t[n];return i},cloneObject:function(t){var e={};for(var i in t)e[i]=this._isObject(t[i])?this._clone(t[i]):t[i];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*s},_radToDeg:function(t){return t*r},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error(d+t)},warn:function(t){window.console&&console.warn&&console.warn(u+t)},extend:function(t,e){for(var i in e.prototype)i in t.prototype||(t.prototype[i]=e.prototype[i])},addMethods:function(t,e){var i;for(i in e)t.prototype[i]=e[i]},_getControlPoints:function(t,e,i,n,o,s,r){var a=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(o-i,2)+Math.pow(s-n,2)),c=r*a/(a+l),u=r*l/(a+l),d=i-c*(o-t),p=n-c*(s-e),h=i+u*(o-t),f=n+u*(s-e);return[d,p,h,f]},_expandPoints:function(t,e){var i,n,o=t.length,s=[];for(i=2;o-2>i;i+=2)n=Kinetic.Util._getControlPoints(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),s.push(n[0]),s.push(n[1]),s.push(t[i]),s.push(t[i+1]),s.push(n[2]),s.push(n[3]);return s},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,o=i/n;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.pixelRatio||Kinetic.pixelRatio||o;this.pixelRatio=e,this._canvas=document.createElement("canvas"),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(i){try{return this._canvas.toDataURL()}catch(n){return Kinetic.Util.warn("Unable to get data URL. "+n.message),""}}}},Kinetic.SceneCanvas=function(t){t=t||{};var e=t.width||0,i=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.SceneContext(this),this.setSize(e,i)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),i.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),i.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){t=t||{};var e=t.width||0,i=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.HitContext(this),this.setSize(e,i)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t=",",e="(",i=")",n="([",o="])",s=";",r="()",a="=",l=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(l){var c,u,d,p,h=this.traceArr,f=h.length,m="";for(c=0;f>c;c++)u=h[c],d=u.method,d?(p=u.args,m+=d,m+=l?r:Kinetic.Util._isArray(p[0])?n+p.join(t)+o:e+p.join(t)+i):(m+=u.property,l||(m+=a+u.val)),m+=s;return m},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,i=this.traceArr;i.push(t),e=i.length,e>=Kinetic.traceArrMax&&i.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},_applyTransform:function(t){var e,i=t.getTransformsEnabled();"all"===i?(e=t.getAbsoluteTransform().getMatrix(),this.transform(e[0],e[1],e[2],e[3],e[4],e[5])):"position"===i&&this.translate(t.getX(),t.getY())},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,i=this,n=l.length,o=Kinetic.Util._simplifyArray,s=this.setAttr;for(t=0;n>t;t++)!function(t){var n,s=i[t];i[t]=function(){return e=o(Array.prototype.slice.call(arguments,0)),n=s.apply(i,arguments),i._trace({method:t,args:e}),n}}(l[t]);i.setAttr=function(){s.apply(i,arguments),i._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),i=t.getFillPatternX(),n=t.getFillPatternY(),o=t.getFillPatternScale(),s=t.getFillPatternRotation(),r=t.getFillPatternOffset(),a=t.getFillPatternRepeat();(i||n)&&this.translate(i||0,n||0),s&&this.rotate(s),o&&this.scale(o.x,o.y),r&&this.translate(-1*r.x,-1*r.y),this.setAttr("fillStyle",this.createPattern(e,a||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),i=t.getFillLinearGradientEndPoint(),n=t.getFillLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,i.x,i.y);if(n){for(var s=0;s<n.length;s+=2)o.addColorStop(n[s],n[s+1]);this.setAttr("fillStyle",o),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),i=t.getFillRadialGradientEndPoint(),n=t.getFillRadialGradientStartRadius(),o=t.getFillRadialGradientEndRadius(),s=t.getFillRadialGradientColorStops(),r=this.createRadialGradient(e.x,e.y,n,i.x,i.y,o),a=0;a<s.length;a+=2)r.addColorStop(s[a],s[a+1]);this.setAttr("fillStyle",r),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),i=t.getFillPatternImage(),n=t.getFillLinearGradientColorStops(),o=t.getFillRadialGradientColorStops(),s=t.getFillPriority();e&&"color"===s?this._fillColor(t):i&&"pattern"===s?this._fillPattern(t):n&&"linear-gradient"===s?this._fillLinearGradient(t):o&&"radial-gradient"===s?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):n?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),i=t.getStrokeScaleEnabled();t.hasStroke()&&(i||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),i||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,i=t.getAbsoluteOpacity(),n=e.get(t.getShadowColor(),"black"),o=e.get(t.getShadowBlur(),5),s=e.get(t.getShadowOpacity(),0),r=e.get(t.getShadowOffset(),{x:0,y:0});s&&this.setAttr("globalAlpha",s*i),this.setAttr("shadowColor",n),this.setAttr("shadowBlur",o),this.setAttr("shadowOffsetX",r.x),this.setAttr("shadowOffsetY",r.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var t="get",e="set";Kinetic.Factory={addGetterSetter:function(t,e,i,n,o){this.addGetter(t,e,i),this.addSetter(t,e,n,o),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,i,n){var o=t+Kinetic.Util._capitalize(i);e.prototype[o]=function(){var t=this.attrs[i];return void 0===t?n:t}},addSetter:function(t,i,n,o){var s=e+Kinetic.Util._capitalize(i);t.prototype[s]=function(t){return n&&(t=n.call(this,t)),this._setAttr(i,t),o&&o.call(this),this}},addComponentsGetterSetter:function(i,n,o,s,r){var a,l,c=o.length,u=Kinetic.Util._capitalize,d=t+u(n),p=e+u(n);i.prototype[d]=function(){var t={};for(a=0;c>a;a++)l=o[a],t[l]=this.getAttr(n+u(l));return t},i.prototype[p]=function(t){var e,i=this.attrs[n];s&&(t=s.call(this,t));for(e in t)this._setAttr(n+u(e),t[e]);return this._fireChangeEvent(n,i,t),r&&r.call(this),this},this.addOverloadedGetterSetter(i,n)},addOverloadedGetterSetter:function(i,n){var o=Kinetic.Util._capitalize(n),s=e+o,r=t+o;i.prototype[n]=function(){return arguments.length?(this[s](arguments[0]),this):this[r]()}},backCompat:function(t,e){var i;for(i in e)t.prototype[i]=t.prototype[e[i]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return t>255?255:0>t?0:Math.round(t)},alphaComponent:function(t){return t>1?1:1e-4>t?1e-4:t}}}(),function(){var t="absoluteOpacity",e="absoluteTransform",i="before",n="Change",o="children",s=".",r="",a="get",l="id",c="kinetic",u="listening",d="mouseenter",p="mouseleave",h="name",f="set",m="Shape",g=" ",v="stage",y="transform",_="Stage",b="visible",w=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(g);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(i){var n=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(i),this.on(w,function(){this._clearCache(y),n._clearSelfAndDescendantCache(e)}),this.on("visibleChange.kinetic",function(){n._clearSelfAndDescendantCache(b)}),this.on("listeningChange.kinetic",function(){n._clearSelfAndDescendantCache(u)}),this.on("opacityChange.kinetic",function(){n._clearSelfAndDescendantCache(t)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var i=this._cache[t];return void 0===i&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e,i=t||{},n=i.x||0,o=i.y||0,s=i.width||this.width(),r=i.height||this.height(),a=i.drawBorder||!1,l=new Kinetic.SceneCanvas({pixelRatio:1,width:s,height:r}),c=new Kinetic.SceneCanvas({pixelRatio:1,width:s,height:r}),u=new Kinetic.HitCanvas({width:s,height:r}),d=this.transformsEnabled(),p=this.x(),h=this.y();return this.clearCache(),this.transformsEnabled("position"),this.x(-1*n),this.y(-1*o),this.drawScene(l),this.drawHit(u),a&&(e=l.getContext(),e.save(),e.beginPath(),e.rect(0,0,s,r),e.closePath(),e.setAttr("strokeStyle","red"),e.setAttr("lineWidth",5),e.stroke(),e.restore()),this.x(p),this.y(h),this.transformsEnabled(d),this._cache.canvas={scene:l,filter:c,hit:u},this},_drawCachedSceneCanvas:function(t){t.save(),t._applyTransform(this),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,i,n,o=this.filters(),s=this._cache.canvas,r=s.scene,a=s.filter,l=a.getContext();if(o){if(!this._filterUpToDate){try{for(t=o.length,l.clear(),l.drawImage(r._canvas,0,0),e=l.getImageData(0,0,a.getWidth(),a.getHeight()),i=0;t>i;i++)n=o[i],n.call(this,e),l.putImageData(e,0,0)}catch(c){Kinetic.Util.warn("Unable to apply filter. "+c.message)}this._filterUpToDate=!0}return a}return r},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,i=e.hit;t.save(),t._applyTransform(this),t.drawImage(i._canvas,0,0),t.restore()},on:function(t,e){var i,n,o,a,l,c=t.split(g),u=c.length;for(i=0;u>i;i++)n=c[i],o=n.split(s),a=o[0],l=o[1]||r,this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:e});return this},off:function(t){var e,i,n,o,r,a,l=t.split(g),c=l.length;for(e=0;c>e;e++)if(n=l[e],o=n.split(s),r=o[0],a=o[1],r)this.eventListeners[r]&&this._off(r,a);else for(i in this.eventListeners)this._off(i,a);return this},remove:function(){var i=this.getParent();return i&&i.children&&(i.children.splice(this.index,1),i._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(t),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=a+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,i;if(t)for(e in t)e===o||(i=f+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(u,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?e?e.isListening():!0:t},isVisible:function(){return this._getCache(b,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?e?e.isVisible():!0:t},shouldDrawHit:function(){var t=this.getLayer();return t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(l){for(e=[],i=l.length,n=0;i>n;n++)o=l[n],a++,o.nodeType!==m&&(e=e.concat(o.getChildren().toArray())),o._id===r._id&&(n=i);e.length>0&&e[0].getDepth()<=s&&t(e)}var e,i,n,o,s=this.getDepth(),r=this,a=0;return r.nodeType!==_&&t(r.getStage().getChildren()),a},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,i=this.offset();return e.m=t.slice(),e.translate(i.x,i.y),e.getTranslation()},setAbsolutePosition:function(t){var e,i=this._clearTransform();return this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(i),this;
},_setTransform:function(t){var i;for(i in t)this.attrs[i]=t[i];this._clearCache(y),this._clearSelfAndDescendantCache(e)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(y),this._clearSelfAndDescendantCache(e),t},move:function(t){var e=t.x,i=t.y,n=this.getX(),o=this.getY();return void 0!==e&&(n+=e),void 0!==i&&(o+=i),this.setPosition({x:n,y:o}),this},_eachAncestorReverse:function(t,e){var i,n,o=[],s=this.getParent();for(e&&o.unshift(this);s;)o.unshift(s),s=s.parent;for(i=o.length,n=0;i>n;n++)t(o[n])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(t,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,i,n,o=Kinetic.Util,s={},r=this.getAttrs();s.attrs={};for(t in r)e=r[t],o._isFunction(e)||o._isElement(e)||o._isObject(e)&&o._hasMethods(e)||(i=this[t],delete r[t],n=i?i.call(this):null,r[t]=e,n!==e&&(s.attrs[t]=e));return s.className=this.getClassName(),s},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(v,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,i){return i?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(){return this._getCache(e,this._getAbsoluteTransform)},_getAbsoluteTransform:function(){var t,e,i=new Kinetic.Transform;return this._eachAncestorReverse(function(n){t=n.transformsEnabled(),e=n.getTransform(),"all"===t?i.multiply(e):"position"===t&&i.translate(n.x(),n.y())},!0),i},getTransform:function(){return this._getCache(y,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),i=this.getY(),n=this.getRotation()*Math.PI/180,o=this.getScaleX(),s=this.getScaleY(),r=this.getSkewX(),a=this.getSkewY(),l=this.getOffsetX(),c=this.getOffsetY();return(0!==e||0!==i)&&t.translate(e,i),0!==n&&t.rotate(n),(0!==r||0!==a)&&t.skew(r,a),(1!==o||1!==s)&&t.scale(o,s),(0!==l||0!==c)&&t.translate(-1*l,-1*c),t},clone:function(t){var e,i,n,o,s,r=this.getClassName(),a=new Kinetic[r](this.attrs);for(e in this.eventListeners)for(i=this.eventListeners[e],n=i.length,o=0;n>o;o++)s=i[o],s.name.indexOf(c)<0&&(a.eventListeners[e]||(a.eventListeners[e]=[]),a.eventListeners[e].push(s));return a.setAttrs(t),a},toDataURL:function(t){t=t||{};var e=t.mimeType||null,i=t.quality||null,n=this.getStage(),o=t.x||0,s=t.y||0,r=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(n?n.getWidth():0),height:t.height||this.getHeight()||(n?n.getHeight():0),pixelRatio:1}),a=r.getContext();return a.save(),(o||s)&&a.translate(-1*o,-1*s),this.drawScene(r),a.restore(),r.toDataURL(e,i)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var i,n,o=this.eventListeners[t];for(i=0;i<o.length;i++)if(n=o[i].name,!("kinetic"===n&&"kinetic"!==e||e&&n!==e)){if(o.splice(i,1),0===o.length){delete this.eventListeners[t];break}i--}},_fireBeforeChangeEvent:function(t,e,o){this._fire([i,Kinetic.Util._capitalize(t),n].join(r),{oldVal:e,newVal:o})},_fireChangeEvent:function(t,e,i){this._fire(t+n,{oldVal:e,newVal:i})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr(l,t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr(h,t),this},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],i=t[1],n=f+Kinetic.Util._capitalize(e),o=this[n];return Kinetic.Util._isFunction(o)?o.call(this,i):this._setAttr(e,i),this},_setAttr:function(t,e){var i;void 0!==e&&(i=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,i,e))},_setComponentAttr:function(t,e,i){var n;void 0!==i&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,n,i))},_fireAndBubble:function(t,e,i){var n=!0;e&&this.nodeType===m&&(e.targetNode=this),t===d&&i&&this._id===i._id?n=!1:t===p&&i&&this._id===i._id&&(n=!1),n&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var i,n=this.eventListeners[t];if(n)for(i=0;i<n.length;i++)n[i].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var i,n,o,s=Kinetic.Node.prototype.getClassName.call(t),r=t.children;if(e&&(t.attrs.container=e),i=new Kinetic[s](t.attrs),r)for(n=r.length,o=0;n>o;o++)i.add(this._createNode(r[o]));return i},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(t){var e,i,n=t.data,o=n.length;for(e=0;o>e;e+=4)i=.34*n[e]+.5*n[e+1]+.16*n[e+2],n[e]=i,n[e+1]=i,n[e+2]=i}}(),function(){Kinetic.Filters.Brighten=function(t){var e,i=255*this.brightness(),n=t.data,o=n.length;for(e=0;o>e;e+=4)n[e]+=i,n[e+1]+=i,n[e+2]+=i},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(t){var e,i=t.data,n=i.length;for(e=0;n>e;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,o){var s,r,a,l,c,u,d,p,h,f,m,g,v,y,_,b,w,x,C,k,S,T,M,z,D=e.data,P=e.width,q=e.height,A=o+o+1,I=P-1,R=q-1,E=o+1,O=E*(E+1)/2,N=new t,F=null,L=N,$=null,H=null,j=i[o],V=n[o];for(a=1;A>a;a++)L=L.next=new t,a==E&&(F=L);for(L.next=N,d=u=0,r=0;q>r;r++){for(b=w=x=C=p=h=f=m=0,g=E*(k=D[u]),v=E*(S=D[u+1]),y=E*(T=D[u+2]),_=E*(M=D[u+3]),p+=O*k,h+=O*S,f+=O*T,m+=O*M,L=N,a=0;E>a;a++)L.r=k,L.g=S,L.b=T,L.a=M,L=L.next;for(a=1;E>a;a++)l=u+((a>I?I:a)<<2),p+=(L.r=k=D[l])*(z=E-a),h+=(L.g=S=D[l+1])*z,f+=(L.b=T=D[l+2])*z,m+=(L.a=M=D[l+3])*z,b+=k,w+=S,x+=T,C+=M,L=L.next;for($=N,H=F,s=0;P>s;s++)D[u+3]=M=m*j>>V,0!==M?(M=255/M,D[u]=(p*j>>V)*M,D[u+1]=(h*j>>V)*M,D[u+2]=(f*j>>V)*M):D[u]=D[u+1]=D[u+2]=0,p-=g,h-=v,f-=y,m-=_,g-=$.r,v-=$.g,y-=$.b,_-=$.a,l=d+((l=s+o+1)<I?l:I)<<2,b+=$.r=D[l],w+=$.g=D[l+1],x+=$.b=D[l+2],C+=$.a=D[l+3],p+=b,h+=w,f+=x,m+=C,$=$.next,g+=k=H.r,v+=S=H.g,y+=T=H.b,_+=M=H.a,b-=k,w-=S,x-=T,C-=M,H=H.next,u+=4;d+=P}for(s=0;P>s;s++){for(w=x=C=b=h=f=m=p=0,u=s<<2,g=E*(k=D[u]),v=E*(S=D[u+1]),y=E*(T=D[u+2]),_=E*(M=D[u+3]),p+=O*k,h+=O*S,f+=O*T,m+=O*M,L=N,a=0;E>a;a++)L.r=k,L.g=S,L.b=T,L.a=M,L=L.next;for(c=P,a=1;o>=a;a++)u=c+s<<2,p+=(L.r=k=D[u])*(z=E-a),h+=(L.g=S=D[u+1])*z,f+=(L.b=T=D[u+2])*z,m+=(L.a=M=D[u+3])*z,b+=k,w+=S,x+=T,C+=M,L=L.next,R>a&&(c+=P);for(u=s,$=N,H=F,r=0;q>r;r++)l=u<<2,D[l+3]=M=m*j>>V,M>0?(M=255/M,D[l]=(p*j>>V)*M,D[l+1]=(h*j>>V)*M,D[l+2]=(f*j>>V)*M):D[l]=D[l+1]=D[l+2]=0,p-=g,h-=v,f-=y,m-=_,g-=$.r,v-=$.g,y-=$.b,_-=$.a,l=s+((l=r+E)<R?l:R)*P<<2,p+=b+=$.r=D[l],h+=w+=$.g=D[l+1],f+=x+=$.b=D[l+2],m+=C+=$.a=D[l+3],$=$.next,g+=k=H.r,v+=S=H.g,y+=T=H.b,_+=M=H.a,b-=k,w-=S,x-=T,C-=M,H=H.next,u+=P}}var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var i=0|this.blurRadius();i>0&&e(t,i)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,i){var n=4*(i*t.width+e),o=[];return o.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),o}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function i(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function n(n,o){var s=t(n,0,0),r=t(n,n.width-1,0),a=t(n,0,n.height-1),l=t(n,n.width-1,n.height-1),c=o||10;if(e(s,r)<c&&e(r,l)<c&&e(l,a)<c&&e(a,s)<c){for(var u=i([r,s,l,a]),d=[],p=0;p<n.width*n.height;p++){var h=e(u,[n.data[4*p],n.data[4*p+1],n.data[4*p+2]]);d[p]=c>h?0:255}return d}}function o(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}function s(t,e,i){for(var n=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(n.length)),s=Math.floor(o/2),r=[],a=0;i>a;a++)for(var l=0;e>l;l++){for(var c=a*e+l,u=0,d=0;o>d;d++)for(var p=0;o>p;p++){var h=a+d-s,f=l+p-s;if(h>=0&&i>h&&f>=0&&e>f){var m=h*e+f,g=n[d*o+p];u+=t[m]*g}}r[c]=2040===u?255:0}return r}function r(t,e,i){for(var n=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(n.length)),s=Math.floor(o/2),r=[],a=0;i>a;a++)for(var l=0;e>l;l++){for(var c=a*e+l,u=0,d=0;o>d;d++)for(var p=0;o>p;p++){var h=a+d-s,f=l+p-s;if(h>=0&&i>h&&f>=0&&e>f){var m=h*e+f,g=n[d*o+p];u+=t[m]*g}}r[c]=u>=1020?255:0}return r}function a(t,e,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(n.length)),s=Math.floor(o/2),r=[],a=0;i>a;a++)for(var l=0;e>l;l++){for(var c=a*e+l,u=0,d=0;o>d;d++)for(var p=0;o>p;p++){var h=a+d-s,f=l+p-s;if(h>=0&&i>h&&f>=0&&e>f){var m=h*e+f,g=n[d*o+p];u+=t[m]*g}}r[c]=u}return r}Kinetic.Filters.Mask=function(t){var e=this.threshold(),i=n(t,e);return i&&(i=s(i,t.width,t.height),i=r(i,t.width,t.height),i=a(i,t.width,t.height),o(t,i)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(t){var e,i,n=t.data,o=n.length,s=this.red(),r=this.green(),a=this.blue();for(e=0;o>e;e+=4)i=(.34*n[e]+.5*n[e+1]+.16*n[e+2])/255,n[e]=i*s,n[e+1]=i*r,n[e+2]=i*a,n[e+3]=n[e+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(t){var e,i,n,o,s,r=t.data,a=r.length,l=this.value(),c=this.saturation(),u=Math.abs(this.hue()+360)%360,d=l*c*Math.cos(u*Math.PI/180),p=l*c*Math.sin(u*Math.PI/180),h=.299*l+.701*d+.167*p,f=.587*l-.587*d+.33*p,m=.114*l-.114*d-.497*p,g=.299*l-.299*d-.328*p,v=.587*l+.413*d+.035*p,y=.114*l-.114*d+.293*p,_=.299*l-.3*d+1.25*p,b=.587*l-.586*d-1.05*p,w=.114*l+.886*d-.2*p;for(e=0;a>e;e+=4)i=r[e+0],n=r[e+1],o=r[e+2],s=r[e+3],r[e+0]=h*i+f*n+m*o,r[e+1]=g*i+v*n+y*o,r[e+2]=_*i+b*n+w*o,r[e+3]=s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",1,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",1,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),o=this.embossBlend(),s=0,r=0,a=t.data,l=t.width,c=t.height,u=4*l,d=c;switch(n){case"top-left":s=-1,r=-1;break;case"top":s=-1,r=0;break;case"top-right":s=-1,r=1;break;case"right":s=0,r=1;break;case"bottom-right":s=1,r=1;break;case"bottom":s=1,r=0;break;case"bottom-left":s=1,r=-1;break;case"left":s=0,r=-1}do{var p=(d-1)*u,h=s;1>d+h&&(h=0),d+h>c&&(h=0);var f=4*(d-1+h)*l,m=l;do{var g=p+4*(m-1),v=r;1>m+v&&(v=0),m+v>l&&(v=0);var y=f+4*(m-1+v),_=a[g]-a[y],b=a[g+1]-a[y+1],w=a[g+2]-a[y+2],x=_,C=x>0?x:-x,k=b>0?b:-b,S=w>0?w:-w;if(k>C&&(x=b),S>C&&(x=w),x*=e,o){var T=a[g]+x,M=a[g+1]+x,z=a[g+2]+x;a[g]=T>255?255:0>T?0:T,a[g+1]=M>255?255:0>M?0:M,a[g+2]=z>255?255:0>z?0:z}else{var D=i-x;0>D?D=0:D>255&&(D=255),a[g]=a[g+1]=a[g+2]=D}}while(--m)}while(--d)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,i,n,o){var s,r=i-e,a=o-n;return 0===r?n+a/2:0===a?n:(s=(t-e)/r,s=a*s+n)}Kinetic.Filters.Enhance=function(e){var i,n,o,s,r=e.data,a=r.length,l=r[0],c=l,u=r[1],d=u,p=r[2],h=p,f=r[3],m=f,g=this.enhance();if(0!==g){for(s=0;a>s;s+=4)i=r[s+0],l>i?l=i:i>c&&(c=i),n=r[s+1],u>n?u=n:n>d&&(d=n),o=r[s+2],p>o?p=o:o>h&&(h=o);c===l&&(c=255,l=0),d===u&&(d=255,u=0),h===p&&(h=255,p=0),m===f&&(m=255,f=0);var v,y,_,b,w,x,C,k,S,T,M,z;for(g>0?(y=c+g*(255-c),_=l-g*(l-0),w=d+g*(255-d),x=u-g*(u-0),k=h+g*(255-h),z=p-g*(p-0),M=m+g*(255-m),S=f-g*(f-0)):(v=.5*(c+l),y=c+g*(c-v),_=l+g*(l-v),b=.5*(d+u),w=d+g*(d-b),x=u+g*(u-b),C=.5*(h+p),k=h+g*(h-C),z=p+g*(p-C),T=.5*(m+f),M=m+g*(m-T),S=f+g*(f-T)),s=0;a>s;s+=4)r[s+0]=t(r[s+0],l,c,_,y),r[s+1]=t(r[s+1],u,d,x,w),r[s+2]=t(r[s+2],p,h,z,k)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(t){var e,i=Math.round(254*this.levels())+1,n=t.data,o=n.length,s=255/i;for(e=0;o>e;e+=1)n[e]=Math.floor(n[e]/s)*s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(t){var e,i=255*this.noise(),n=t.data,o=n.length,s=i/2;for(e=0;o>e;e+=4)n[e+0]+=s-2*s*Math.random(),n[e+1]+=s-2*s*Math.random(),n[e+2]+=s-2*s*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(t){var e,i,n,o,s,r,a,l,c,u,d,p,h,f,m=Math.ceil(this.pixelSize()),g=t.width,v=t.height,t=t.data,y=Math.ceil(g/m),_=Math.ceil(v/m);for(p=0;y>p;p+=1)for(h=0;_>h;h+=1){for(o=0,s=0,r=0,a=0,l=p*m,c=l+m,u=h*m,d=u+m,f=0,e=l;c>e;e+=1)if(!(e>=g))for(i=u;d>i;i+=1)i>=v||(n=4*(g*i+e),o+=t[n+0],s+=t[n+1],r+=t[n+2],a+=t[n+3],f+=1);for(o/=f,s/=f,r/=f,alphas=a/f,e=l;c>e;e+=1)if(!(e>=g))for(i=u;d>i;i+=1)i>=v||(n=4*(g*i+e),t[n+0]=o,t[n+1]=s,t[n+2]=r,t[n+3]=a)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(t){var e,i=255*this.threshold(),n=t.data,o=n.length;for(e=0;o>e;e+=1)n[e]=n[e]<i?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(t){var e,i,n,o,s,r,a,l,c,u=t.data,d=t.width,p=t.height,h=4*d;do{e=(p-1)*h,i=d;do n=e+4*(i-1),o=u[n],s=u[n+1],r=u[n+2],a=.393*o+.769*s+.189*r,l=.349*o+.686*s+.168*r,c=.272*o+.534*s+.131*r,u[n]=a>255?255:a,u[n+1]=l>255?255:l,u[n+2]=c>255?255:c,u[n+3]=u[n+3];while(--i)}while(--p)}}(),function(){Kinetic.Filters.Solarize=function(t){var e=t.data,i=t.width,n=t.height,o=4*i,s=n;do{var r=(s-1)*o,a=i;do{var l=r+4*(a-1),c=e[l],u=e[l+1],d=e[l+2];c>127&&(c=255-c),u>127&&(u=255-u),d>127&&(d=255-d),e[l]=c,e[l+1]=u,e[l+2]=d}while(--a)}while(--s)}}(),function(){var t=function(t,e,i){var n,o,s,r,a=t.data,l=e.data,c=t.width,u=t.height,d=i.polarCenterX||c/2,p=i.polarCenterY||u/2,h=0,f=0,m=0,g=0,v=Math.sqrt(d*d+p*p);o=c-d,s=u-p,r=Math.sqrt(o*o+s*s),v=r>v?r:v;var y,_,b,w,x,C,k,S,T,M,z,D,P,q=u,A=c,I=360/A*Math.PI/180;for(_=0;A>_;_+=1)for(b=Math.sin(_*I),w=Math.cos(_*I),y=0;q>y;y+=1)o=d+v*y/q*w,s=p+v*y/q*b,1>=o&&(o=1),o>=c-.5&&(o=c-1),1>=s&&(s=1),s>=u-.5&&(s=u-1),x=o-.5,C=o+.5,k=Math.floor(x),S=Math.floor(C),T=s-.5,M=s+.5,z=Math.floor(T),D=Math.floor(M),P=(1-(x-k))*(1-(T-z)),n=4*(z*c+k),h=a[n+0]*P,f=a[n+1]*P,m=a[n+2]*P,g=a[n+3]*P,P=(1-(x-k))*(M-D),n=4*(D*c+k),h+=a[n+0]*P,f+=a[n+1]*P,m+=a[n+2]*P,g+=a[n+3]*P,P=(C-S)*(M-D),n=4*(D*c+S),h+=a[n+0]*P,f+=a[n+1]*P,m+=a[n+2]*P,g+=a[n+3]*P,P=(C-S)*(1-(T-z)),n=4*(z*c+S),h+=a[n+0]*P,f+=a[n+1]*P,m+=a[n+2]*P,g+=a[n+3]*P,n=4*(_+y*c),l[n+0]=h,l[n+1]=f,l[n+2]=m,l[n+3]=g},e=function(t,e,i){var n,o,s,r,a,l,c=t.data,u=e.data,d=t.width,p=t.height,h=i.polarCenterX||d/2,f=i.polarCenterY||p/2,m=0,g=0,v=0,y=0,_=Math.sqrt(h*h+f*f);o=d-h,s=p-f,l=Math.sqrt(o*o+s*s),_=l>_?l:_;var b,w,x=p,C=d,k=i.polarRotation||0;180*(C/360)/Math.PI;var S,T,M,z,D,P,q,A,I;for(o=0;d>o;o+=1)for(s=0;p>s;s+=1)r=o-h,a=s-f,b=Math.sqrt(r*r+a*a)*x/_,w=(180*Math.atan2(a,r)/Math.PI+360+k)%360,w=w*C/360,S=w-.5,T=w+.5,M=Math.floor(S),z=Math.floor(T),D=b-.5,P=b+.5,q=Math.floor(D),A=Math.floor(P),I=(1-(S-M))*(1-(D-q)),n=4*(q*d+M),m=c[n+0]*I,g=c[n+1]*I,v=c[n+2]*I,y=c[n+3]*I,I=(1-(S-M))*(P-A),n=4*(A*d+M),m+=c[n+0]*I,g+=c[n+1]*I,v+=c[n+2]*I,y+=c[n+3]*I,I=(T-z)*(P-A),n=4*(A*d+z),m+=c[n+0]*I,g+=c[n+1]*I,v+=c[n+2]*I,y+=c[n+3]*I,I=(T-z)*(1-(D-q)),n=4*(q*d+z),m+=c[n+0]*I,g+=c[n+1]*I,v+=c[n+2]*I,y+=c[n+3]*I,n=4*(s*d+o),u[n+0]=m,u[n+1]=g,u[n+2]=v,u[n+3]=y},i=document.createElement("canvas");Kinetic.Filters.Kaleidoscope=function(n){var o=n.width,s=n.height,r=Math.round(this.kaleidoscopePower()),a=Math.round(this.kaleidoscopeAngle()),l=Math.floor(o*(a%360)/360);if(!(1>r)){i.width=o,i.height=s;var c=i.getContext("2d").getImageData(0,0,o,s);t(n,c,{polarCenterX:o/2,polarCenterY:s/2});for(var u=o/Math.pow(2,r);8>=u;)u=2*u,r-=1;u=Math.ceil(u);var d=u,p=0,h=d,f=1;for(l+u>o&&(p=d,h=0,f=-1),g=0;s>g;g+=1)for(m=p;m!==h;m+=f)v=Math.round(m+l)%o,C=4*(o*g+v),_=c.data[C+0],b=c.data[C+1],w=c.data[C+2],x=c.data[C+3],k=4*(o*g+m),c.data[k+0]=_,c.data[k+1]=b,c.data[k+2]=w,c.data[k+3]=x;var m,g,v,y,_,b,w,x,C,k;for(g=0;s>g;g+=1)for(d=Math.floor(u),y=0;r>y;y+=1){for(m=0;d+1>m;m+=1)C=4*(o*g+m),_=c.data[C+0],b=c.data[C+1],w=c.data[C+2],x=c.data[C+3],k=4*(o*g+2*d-m-1),c.data[k+0]=_,c.data[k+1]=b,c.data[k+2]=w,c.data[k+3]=x;d*=2}e(c,n,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){window.setTimeout(t,1e3/60)}var e=500;Kinetic.Animation=function(t,e){this.func=t,this.setLayers(e),this.id=Kinetic.Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,i,n=this.layers;if(n){for(e=n.length,i=0;e>i;i++)if(n[i]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){for(var t=Kinetic.Animation,e=t.animations,i=0;i<e.length;i++)if(e[i].id===this.id)return!0;return!1},start:function(){this.stop(),this.frame.timeDiff=0,this.frame.lastTime=(new Date).getTime(),Kinetic.Animation._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){for(var e=t.id,i=this.animations,n=i.length,o=0;n>o;o++)if(i[o].id===e){this.animations.splice(o,1);break}},Kinetic.Animation._runFrames=function(){var t,e,i,n,o,s,r,a,l={},c=this.animations;for(n=0;n<c.length;n++){for(t=c[n],e=t.layers,i=t.func,t._updateFrameObject((new Date).getTime()),s=e.length,o=0;s>o;o++)r=e[o],void 0!==r._id&&(l[r._id]=r);i&&i.call(t,t.frame)}for(a in l)l[a].draw()},Kinetic.Animation._animationLoop=function(){var t=this;this.animations.length>0?(this._runFrames(),Kinetic.Animation.requestAnimFrame(function(){t._animationLoop()})):this.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t}();Kinetic.Animation.requestAnimFrame=function(e){var n=Kinetic.isDragging?t:i;n(e)};var n=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){n.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this;this.batchAnim||(this.batchAnim=new Kinetic.Animation(function(){t.lastBatchDrawTime&&(new Date).getTime()-t.lastBatchDrawTime>e&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=(new Date).getTime(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}(),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,i=2,n=3,o=0;Kinetic.Tween=function(e){var i,n=this,r=e.node,a=r._id,l=e.duration||1,c=e.easing||Kinetic.Easings.Linear,u=!!e.yoyo;this.node=r,this._id=o++,this.anim=new Kinetic.Animation(function(){n.tween.onEnterFrame()},r.getLayer()||r.getLayers()),this.tween=new s(i,function(t){n._tweenFunc(t)},c,0,1,1e3*l,u),this._addListeners(),Kinetic.Tween.attrs[a]||(Kinetic.Tween.attrs[a]={}),Kinetic.Tween.attrs[a][this._id]||(Kinetic.Tween.attrs[a][this._id]={}),Kinetic.Tween.tweens[a]||(Kinetic.Tween.tweens[a]={});for(i in e)void 0===t[i]&&this._addAttr(i,e[i]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var i,n,o,s,r,a=this.node,l=a._id;if(o=Kinetic.Tween.tweens[l][t],o&&delete Kinetic.Tween.attrs[l][o][t],i=a.getAttr(t),Kinetic.Util._isArray(e))for(n=[],r=e.length,s=0;r>s;s++)n.push(e[s]-i[s]);else n=e-i;Kinetic.Tween.attrs[l][this._id][t]={start:i,diff:n},Kinetic.Tween.tweens[l][t]=this._id},_tweenFunc:function(t){var e,i,n,o,s,r,a,l=this.node,c=Kinetic.Tween.attrs[l._id][this._id];for(e in c){if(i=c[e],n=i.start,o=i.diff,Kinetic.Util._isArray(n))for(s=[],a=n.length,r=0;a>r;r++)s.push(n[r]+o[r]*t);else s=n+o*t;l.setAttr(e,s)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){var t=this.node;return this.tween.reset(),(t.getLayer()||t.getLayers()).draw(),this},seek:function(t){var e=this.node;return this.tween.seek(1e3*t),(e.getLayer()||e.getLayers()).draw(),this},pause:function(){return this.tween.pause(),this},finish:function(){var t=this.node;return this.tween.finish(),(t.getLayer()||t.getLayers()).draw(),this},destroy:function(){var t,e=this.node._id,i=this._id,n=Kinetic.Tween.tweens[e];this.pause();for(t in n)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][i]}};var s=function(t,e,i,n,o,s,r){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=r,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=o-this.begin,this.pause()};s.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=i,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=n,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===i?this.setTime(t):this.state===n&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,i,n){var o=1.70158;return i*(t/=n)*t*((o+1)*t-o)+e},BackEaseOut:function(t,e,i,n){var o=1.70158;return i*((t=t/n-1)*t*((o+1)*t+o)+1)+e},BackEaseInOut:function(t,e,i,n){var o=1.70158;return(t/=n/2)<1?i/2*t*t*(((o*=1.525)+1)*t-o)+e:i/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e},ElasticEaseIn:function(t,e,i,n,o,s){var r=0;return 0===t?e:1==(t/=n)?e+i:(s||(s=.3*n),!o||o<Math.abs(i)?(o=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s))+e)},ElasticEaseOut:function(t,e,i,n,o,s){var r=0;return 0===t?e:1==(t/=n)?e+i:(s||(s=.3*n),!o||o<Math.abs(i)?(o=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*n-r)*Math.PI/s)+i+e)},ElasticEaseInOut:function(t,e,i,n,o,s){var r=0;return 0===t?e:2==(t/=n/2)?e+i:(s||(s=.3*n*1.5),!o||o<Math.abs(i)?(o=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)+e:.5*o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)+i+e)},BounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,n){return i-Kinetic.Easings.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut:function(t,e,i,n){return n/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,i,n)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-n,0,i,n)+.5*i+e},EaseIn:function(t,e,i,n){return i*(t/=n)*t+e},EaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,n){return i*t/n+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,i=e.node;i&&(i._setDragPosition(t),e.isDragging||(e.isDragging=!0,i.fire("dragstart",t,!0)),i.fire("dragmove",t,!0))},_endDragBefore:function(t){var e,i,n=Kinetic.DD,o=n.node;o&&(e=o.nodeType,i=o.getLayer(),n.anim.stop(),n.isDragging&&(n.isDragging=!1,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=o)),delete n.node,(i||o).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",t,!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),i=this.getLayer(),n=e.getPointerPosition(),o=this.getAbsolutePosition();n&&(t.node&&t.node.stopDrag(),t.node=this,t.offset.x=n.x-o.x,t.offset.y=n.y-o.y,t.anim.setLayers(i||this.getLayers()),t.anim.start(),this._setDragPosition());
},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,i=this.getStage().getPointerPosition(),n=this.getDragBoundFunc(),o={x:i.x-e.offset.x,y:i.y-e.offset.y};void 0!==n&&(o=n.call(this,o,t)),this.setAbsolutePosition(o)},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)}):this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(){return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=this.children;e.length>0;)t=e[0],t.hasChildren()&&t.removeChildren(),t.remove();return this},destroyChildren:function(){for(var t=this.children;t.length>0;)t[0].destroy();return this},add:function(t){var e=this.children;return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,i,n,o,s,r,a,l=[],c=t.replace(/ /g,"").split(","),u=c.length;for(e=0;u>e;e++)if(n=c[e],"#"===n.charAt(0))s=this._getNodeById(n.slice(1)),s&&l.push(s);else if("."===n.charAt(0))o=this._getNodesByName(n.slice(1)),l=l.concat(o);else for(r=this.getChildren(),a=r.length,i=0;a>i;i++)l=l.concat(r[i]._get(n));return Kinetic.Collection.toCollection(l)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),i=this.getChildren(),n=i.length,o=0;n>o;o++)e=e.concat(i[o]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),i=e.length,n=0;i>n;n++){var o=e[n];t.children.push(o.toObject())}return t},_getDescendants:function(t){for(var e=[],i=t.length,n=0;i>n;n++){var o=t[n];this.isAncestorOf(o)&&e.push(o)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(i){i.isVisible()&&i.intersects(t)&&e.push(i)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t){var e=this.getLayer(),i=t||e&&e.getCanvas(),n=i&&i.getContext(),o=this._cache.canvas,s=o&&o.scene;return this.isVisible()&&(s?this._drawCachedSceneCanvas(n):this._drawChildren(i,"drawScene")),this},drawHit:function(t){var e=this.getLayer(),i=t||e&&e.hitCanvas,n=i&&i.getContext(),o=this._cache.canvas,s=o&&o.hit;return this.shouldDrawHit()&&(s?this._drawCachedHitCanvas(n):this._drawChildren(i,"drawHit")),this},_drawChildren:function(t,e){var i,n,o=t&&t.getContext(),s=this.getClipWidth(),r=this.getClipHeight(),a=s&&r;a&&(i=this.getClipX(),n=this.getClipY(),o.save(),o._applyTransform(this),o.beginPath(),o.rect(i,n,s,r),o.clip(),o.reset()),this.children.each(function(i){i[e](t)}),a&&o.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function i(t){t.fill()}function n(t){t.stroke()}function o(){this._clearCache(s)}var s="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(s){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=i,this._strokeFuncHit=n;for(var r,a=Kinetic.shapes;r=Kinetic.Util.getRandomColor(),!r||r in a;);this.colorKey=r,a[r]=this,Kinetic.Node.call(this,s),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChanged.kinetic",o)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(s,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(t){var e,i=this.getStage(),n=i.bufferHitCanvas;return n.getContext().clear(),this.drawScene(n),e=n.context.getImageData(0|t.x,0|t.y,1,1).data,e[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()},drawScene:function(t){var e,i,n,o=t||this.getLayer().getCanvas(),s=o.getContext(),r=this._cache.canvas,a=this.sceneFunc(),l=this.hasShadow();return this.isVisible()&&(r?this._drawCachedSceneCanvas(s):a&&(s.save(),this._useBufferCanvas()?(e=this.getStage(),i=e.bufferCanvas,n=i.getContext(),n.clear(),n.save(),n._applyLineJoin(this),n._applyTransform(this),a.call(this,n),n.restore(),l&&(s.save(),s._applyShadow(this),s.drawImage(i._canvas,0,0),s.restore()),s._applyOpacity(this),s.drawImage(i._canvas,0,0)):(s._applyLineJoin(this),s._applyTransform(this),l&&(s.save(),s._applyShadow(this),a.call(this,s),s.restore()),s._applyOpacity(this),a.call(this,s)),s.restore())),this},drawHit:function(t){var e=t||this.getLayer().hitCanvas,i=e.getContext(),n=this.hitFunc()||this.sceneFunc(),o=this._cache.canvas,s=o&&o.hit;return this.shouldDrawHit()&&(s?this._drawCachedHitCanvas(i):n&&(i.save(),i._applyLineJoin(this),i._applyTransform(this),n.call(this,i),i.restore())),this},drawHitFromCache:function(t){var e,i,n,o,s,r,a,l,c=t||0,u=this._cache.canvas,d=this._getCachedSceneCanvas(),p=d.getContext(),h=u.hit,f=h.getContext(),m=d.getWidth(),g=d.getHeight();f.clear();try{for(e=p.getImageData(0,0,m,g),i=e.data,n=f.getImageData(0,0,m,g),o=n.data,s=i.length,r=Kinetic.Util._hexToRgb(this.colorKey),a=0;s>a;a+=4)l=i[a+3],l>c&&(o[a]=r.r,o[a+1]=r.g,o[a+2]=r.b,o[a+3]=255);f.putImageData(n,0,0)}catch(v){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function t(t,e){t.content.addEventListener(e,function(i){t[R+e](i)},!1)}var e="Stage",i="string",n="px",o="mouseout",s="mouseleave",r="mouseover",a="mouseenter",l="mousemove",c="mousedown",u="mouseup",d="click",p="dblclick",h="touchstart",f="touchend",m="tap",g="dbltap",v="touchmove",y="contentMouseout",_="contentMouseover",b="contentMousemove",w="contentMousedown",x="contentMouseup",C="contentClick",k="contentDblclick",S="contentTouchstart",T="contentTouchend",M="contentDbltap",z="contentTouchmove",D="div",P="relative",q="inline-block",A="kineticjs-content",I=" ",R="_",E="container",O="",N=[c,l,u,o,h,v,f,r],F=N.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){return typeof t===i&&(t=document.getElementById(t)),this._setAttr(E,t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,i=e.length;for(t=0;i>t;t++)e[t].clear();return this},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(o){var s=l[o],c=s.toDataURL(),u=new Image;u.onload=function(){a.drawImage(u,0,0),o<l.length-1?e(o+1):t.callback(r.toDataURL(i,n))},u.src=c}t=t||{};var i=t.mimeType||null,n=t.quality||null,o=t.x||0,s=t.y||0,r=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),a=r.getContext()._context,l=this.children;(o||s)&&a.translate(-1*o,-1*s),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,i,n=this.getChildren(),o=n.length,s=o-1;for(e=s;e>=0;e--)if(i=n[e].getIntersection(t))return i;return null},_resizeDOM:function(){if(this.content){var t,e,i=this.getWidth(),o=this.getHeight(),s=this.getChildren(),r=s.length;for(this.content.style.width=i+n,this.content.style.height=o+n,this.bufferCanvas.setSize(i,o),this.bufferHitCanvas.setSize(i,o),t=0;r>t;t++)e=s[t],e.getCanvas().setSize(i,o),e.hitCanvas.setSize(i,o),e.draw()}},add:function(t){return Kinetic.Container.prototype.add.call(this,t),t.canvas.setSize(this.attrs.width,this.attrs.height),t.hitCanvas.setSize(this.attrs.width,this.attrs.height),t.draw(),this.content.appendChild(t.canvas._canvas),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){var e;for(e=0;F>e;e++)t(this,N[e])},_mouseover:function(t){this._fire(_,t)},_mouseout:function(t){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(o,t),e._fireAndBubble(s,t),this.targetShape=null),this.pointerPos=void 0,this._fire(y,t)},_mousemove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===i._id?i._fireAndBubble(l,t):(this.targetShape&&(this.targetShape._fireAndBubble(o,t,i),this.targetShape._fireAndBubble(s,t,i)),i._fireAndBubble(r,t,this.targetShape),i._fireAndBubble(a,t,this.targetShape),this.targetShape=i):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(o,t),this.targetShape._fireAndBubble(s,t),this.targetShape=null),this._fire(b,t),e&&e._drag(t),t.preventDefault&&t.preventDefault()},_mousedown:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e,e._fireAndBubble(c,t)),this._fire(w,t),t.preventDefault&&t.preventDefault()},_mouseup:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=this.clickStartShape,n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(u,t),Kinetic.listenClickTap&&i&&i._id===e._id&&(e._fireAndBubble(d,t),n&&e._fireAndBubble(p,t))),this._fire(x,t),Kinetic.listenClickTap&&(this._fire(C,t),n&&this._fire(k,t)),Kinetic.listenClickTap=!1,t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.tapStartShape=e,e._fireAndBubble(h,t),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(S,t)},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());fireDblClick=!1,Kinetic.inDblClickWindow?(fireDblClick=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(f,t),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble(m,t),fireDblClick&&e._fireAndBubble(g,t)),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire(T,t),fireDblClick&&this._fire(M,t)),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,i=this.getIntersection(this.getPointerPosition());i&&i.isListening()&&(i._fireAndBubble(v,t),i.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(z,t),e&&e._drag(t)},_setPointerPosition:function(t){var e,t=t?t:window.event,i=this._getContentPosition(),n=t.offsetX,o=t.clientX,s=null,r=null;void 0!==t.touches?1===t.touches.length&&(e=t.touches[0],s=e.clientX-i.left,r=e.clientY-i.top):void 0!==n?(s=n,r=t.offsetY):"mozilla"===Kinetic.UA.browser?(s=t.layerX,r=t.layerY):void 0!==o&&i&&(s=o-i.left,r=t.clientY-i.top),null!==s&&null!==r&&(this.pointerPos={x:s,y:r})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();t.innerHTML=O,this.content=document.createElement(D),this.content.style.position=P,this.content.style.display=q,this.content.className=A,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var i,n,o=t.split(I),s=o.length;for(i=0;s>i;i++)n=o[i],this.content.addEventListener(n,e,!1)}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){var t="#",e="beforeDraw",i="draw",n=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],o=n.length;Kinetic.Util.addMethods(Kinetic.Layer,{___init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,i,s,r;if(!this.isVisible())return null;for(i=0;o>i;i++){if(s=n[i],e=this._getIntersection({x:t.x+s.x,y:t.y+s.y}),r=e.shape)return r;if(!e.antialiased)return null}},_getIntersection:function(e){var i,n,o=this.hitCanvas.context._context.getImageData(e.x,e.y,1,1).data,s=o[3];return 255===s?(i=Kinetic.Util._rgbToHex(o[0],o[1],o[2]),n=Kinetic.shapes[t+i],{shape:n}):s>0?{antialiased:!0}:{}},drawScene:function(t){var n=this.getLayer(),o=t||n&&n.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&o.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,o),this._fire(i,{node:this}),this},drawHit:function(t){var e=this.getLayer(),i=t||e&&e.hitCanvas;return e&&e.getClearBeforeDraw()&&e.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,i),this},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){var e=this.getContext(),i=this.getHitCanvas().getContext();return e.clear(t),i.clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getStage(),e=this.getCanvas(),i=e._canvas;return Kinetic.Node.prototype.remove.call(this),t&&i&&Kinetic.Util._isInDocument(i)&&t.content.removeChild(i),this},getStage:function(){return this.parent},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"clearBeforeDraw",!0),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),i=this.getWidth(),n=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(i-e,0),t.arc(i-e,e,e,3*Math.PI/2,0,!1),t.lineTo(i,n-e),t.arc(i-e,n-e,e,0,Math.PI/2,!1),t.lineTo(e,n),t.arc(e,n-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,t,!1),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var i=this.getRadius(),n=i.x,o=i.y;e.beginPath(),e.save(),n!==o&&e.scale(1,o/n),e.arc(0,0,n,0,t,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var t=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getInnerRadius(),0,t,!1),e.moveTo(this.getOuterRadius(),0),e.arc(0,0,this.getOuterRadius(),t,0,!0),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setOuterRadius(t/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,this.getAngle()*Math.PI/180,this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.angle()*Math.PI/180,i=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,i),t.arc(0,0,this.getInnerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var t="Image";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(t){var e,i,n,o,s=this.getWidth(),r=this.getHeight(),a=this.getImage();a&&(e=this.getCrop(),i=e.width,n=e.height,o=i&&n?[a,e.x,e.y,i,n,0,0,s,r]:[a,0,0,s,r]),t.beginPath(),t.rect(0,0,s,r),t.closePath(),t.fillStrokeShape(this),a&&t.drawImage.apply(t,o)},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="auto",n="canvas",o="center",s="Change.kinetic",r="2d",a="-",l="",c="left",u="text",d="Text",p="middle",h="normal",f="px ",m=" ",g="right",v="word",y="char",_="none",b=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height","wrap"],w=b.length,x=document.createElement(n).getContext(r);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(n){var o=this;void 0===n.width&&(n.width=i),void 0===n.height&&(n.height=i),Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this.className=d;for(var r=0;w>r;r++)this.on(b[r]+s,o._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,i=this.getPadding(),n=this.getTextHeight(),s=this.getLineHeight()*n,r=this.textArr,a=r.length,l=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",p),t.setAttr("textAlign",c),
t.save(),t.translate(i,0),t.translate(0,i+n/2),e=0;a>e;e++){var u=r[e],d=u.text,h=u.width;t.save(),this.getAlign()===g?t.translate(l-h-2*i,0):this.getAlign()===o&&t.translate((l-h-2*i)/2,0),this.partialText=d,t.fillStrokeShape(this),t.restore(),t.translate(0,s)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr(u,e),this},getWidth:function(){return this.attrs.width===i?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===i?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,i=x,n=this.getFontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:parseInt(n,10)}},_getContextFont:function(){return this.getFontStyle()+m+this.getFontSize()+f+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return x.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),n=0,o=this.getLineHeight()*e,s=this.attrs.width,r=this.attrs.height,l=s!==i,c=r!==i,u=this.getPadding(),d=s-2*u,p=r-2*u,h=0,g=this.getWrap(),v=g!==_,b=g!==y&&v;this.textArr=[],x.save(),x.font=this.getFontStyle()+m+e+f+this.getFontFamily();for(var w=0,C=t.length;C>w;++w){var k=t[w],S=this._getTextWidth(k);if(l&&S>d)for(;k.length>0;){for(var T=0,M=k.length,z="",D=0;M>T;){var P=T+M>>>1,q=k.slice(0,P+1),A=this._getTextWidth(q);d>=A?(T=P+1,z=q,D=A):M=P}if(!z)break;if(b){var I=Math.max(z.lastIndexOf(m),z.lastIndexOf(a))+1;I>0&&(T=I,z=z.slice(0,T),D=this._getTextWidth(z))}if(this._addTextLine(z,D),h+=o,!v||c&&h+o>p)break;if(k=k.slice(T),k.length>0&&(S=this._getTextWidth(k),d>=S)){this._addTextLine(k,S),h+=o;break}}else this._addTextLine(k,S),h+=o,n=Math.max(n,S);if(c&&h+o>p)break}x.restore(),this.textHeight=e,this.textWidth=n}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",h),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",c),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",v),Kinetic.Factory.addGetter(Kinetic.Text,"text",l),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,o=this.getPoints(),s=o.length,r=this.getTension(),a=this.getClosed();if(t.beginPath(),t.moveTo(o[0],o[1]),0!==r&&s>4){for(e=this.getTensionPoints(),i=e.length,n=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i-2>n;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);a||t.quadraticCurveTo(e[i-2],e[i-1],o[s-2],o[s-1])}else for(n=2;s>n;n+=2)t.lineTo(o[n],o[n+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,i=this.getTension(),n=Kinetic.Util,o=n._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),s=n._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),r=Kinetic.Util._expandPoints(t,i),a=[o[2],o[3]].concat(r).concat([s[0],s[1],t[e-2],t[e-1],s[2],s[3],o[0],o[1],t[0],t[1]]);return a}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,o=this.getAnimations()[e],s=o[n+0],r=o[n+1],a=o[n+2],l=o[n+3],c=this.getImage();c&&t.drawImage(c,s,r,a,l,0,0,a,l)},_hitFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,o=this.getAnimations()[e],s=o[n+2],r=o[n+3];t.beginPath(),t.rect(0,0,s,r),t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},start:function(){var t=this,e=this.getLayer();this.anim.setLayers(e),this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate()),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),i=this.getAnimations(),n=i[e],o=n.length/4;o-1>t?this.frameIndex(t+1):this.frameIndex(0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,i=!1;t.beginPath();for(var n=0;n<e.length;n++){var o=e[n].command,s=e[n].points;switch(o){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var r=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],p=s[6],h=s[7],f=l>c?l:c,m=l>c?1:l/c,g=l>c?c/l:1;t.translate(r,a),t.rotate(p),t.scale(m,g),t.arc(0,0,f,u,u+d,1-h),t.scale(1/m,1/g),t.rotate(-p),t.translate(-r,-a);break;case"z":t.closePath(),i=!0}}i?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},Kinetic.Path.getPointOnLine=function(t,e,i,n,o,s,r){void 0===s&&(s=e),void 0===r&&(r=i);var a=(o-i)/(n-e+1e-8),l=Math.sqrt(t*t/(1+a*a));e>n&&(l*=-1);var c,u=a*l;if(n===e)c={x:s,y:r+u};else if((r-i)/(s-e+1e-8)===a)c={x:s+l,y:r+u};else{var d,p,h=this.getLineLength(e,i,n,o);if(1e-8>h)return;var f=(s-e)*(n-e)+(r-i)*(o-i);f/=h*h,d=e+f*(n-e),p=i+f*(o-i);var m=this.getLineLength(s,r,d,p),g=Math.sqrt(t*t-m*m);l=Math.sqrt(g*g/(1+a*a)),e>n&&(l*=-1),u=a*l,c={x:d+l,y:p+u}}return c},Kinetic.Path.getPointOnCubicBezier=function(t,e,i,n,o,s,r,a,l){function c(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function d(t){return 3*t*(1-t)*(1-t)}function p(t){return(1-t)*(1-t)*(1-t)}var h=a*c(t)+s*u(t)+n*d(t)+e*p(t),f=l*c(t)+r*u(t)+o*d(t)+i*p(t);return{x:h,y:f}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,i,n,o,s,r){function a(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}var u=s*a(t)+n*l(t)+e*c(t),d=r*a(t)+o*l(t)+i*c(t);return{x:u,y:d}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,i,n,o,s){var r=Math.cos(s),a=Math.sin(s),l={x:i*Math.cos(o),y:n*Math.sin(o)};return{x:t+(l.x*r-l.y*a),y:e+(l.x*a+l.y*r)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<i.length;n++)e=e.replace(new RegExp(i[n],"g"),"|"+i[n]);var o=e.split("|"),s=[],r=0,a=0;for(n=1;n<o.length;n++){var l=o[n],c=l.charAt(0);l=l.slice(1),l=l.replace(new RegExp(",-","g"),"-"),l=l.replace(new RegExp("-","g"),",-"),l=l.replace(new RegExp("e,-","g"),"e-");var u=l.split(",");u.length>0&&""===u[0]&&u.shift();for(var d=0;d<u.length;d++)u[d]=parseFloat(u[d]);for(;u.length>0&&!isNaN(u[0]);){var p,h,f,m,g,v,y,_,b,w,x=null,C=[],k=r,S=a;switch(c){case"l":r+=u.shift(),a+=u.shift(),x="L",C.push(r,a);break;case"L":r=u.shift(),a=u.shift(),C.push(r,a);break;case"m":var T=u.shift(),M=u.shift();if(r+=T,a+=M,x="M",s.length>2&&"z"===s[s.length-1].command)for(var z=s.length-2;z>=0;z--)if("M"===s[z].command){r=s[z].points[0]+T,a=s[z].points[1]+M;break}C.push(r,a),c="l";break;case"M":r=u.shift(),a=u.shift(),x="M",C.push(r,a),c="L";break;case"h":r+=u.shift(),x="L",C.push(r,a);break;case"H":r=u.shift(),x="L",C.push(r,a);break;case"v":a+=u.shift(),x="L",C.push(r,a);break;case"V":a=u.shift(),x="L",C.push(r,a);break;case"C":C.push(u.shift(),u.shift(),u.shift(),u.shift()),r=u.shift(),a=u.shift(),C.push(r,a);break;case"c":C.push(r+u.shift(),a+u.shift(),r+u.shift(),a+u.shift()),r+=u.shift(),a+=u.shift(),x="C",C.push(r,a);break;case"S":h=r,f=a,p=s[s.length-1],"C"===p.command&&(h=r+(r-p.points[2]),f=a+(a-p.points[3])),C.push(h,f,u.shift(),u.shift()),r=u.shift(),a=u.shift(),x="C",C.push(r,a);break;case"s":h=r,f=a,p=s[s.length-1],"C"===p.command&&(h=r+(r-p.points[2]),f=a+(a-p.points[3])),C.push(h,f,r+u.shift(),a+u.shift()),r+=u.shift(),a+=u.shift(),x="C",C.push(r,a);break;case"Q":C.push(u.shift(),u.shift()),r=u.shift(),a=u.shift(),C.push(r,a);break;case"q":C.push(r+u.shift(),a+u.shift()),r+=u.shift(),a+=u.shift(),x="Q",C.push(r,a);break;case"T":h=r,f=a,p=s[s.length-1],"Q"===p.command&&(h=r+(r-p.points[0]),f=a+(a-p.points[1])),r=u.shift(),a=u.shift(),x="Q",C.push(h,f,r,a);break;case"t":h=r,f=a,p=s[s.length-1],"Q"===p.command&&(h=r+(r-p.points[0]),f=a+(a-p.points[1])),r+=u.shift(),a+=u.shift(),x="Q",C.push(h,f,r,a);break;case"A":m=u.shift(),g=u.shift(),v=u.shift(),y=u.shift(),_=u.shift(),b=r,w=a,r=u.shift(),a=u.shift(),x="A",C=this.convertEndpointToCenterParameterization(b,w,r,a,y,_,m,g,v);break;case"a":m=u.shift(),g=u.shift(),v=u.shift(),y=u.shift(),_=u.shift(),b=r,w=a,r+=u.shift(),a+=u.shift(),x="A",C=this.convertEndpointToCenterParameterization(b,w,r,a,y,_,m,g,v)}s.push({command:x||c,points:C,start:{x:k,y:S},pathLength:this.calcLength(k,S,x||c,C)})}("z"===c||"Z"===c)&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},Kinetic.Path.calcLength=function(e,i,n,o){var s,r,a,l=Kinetic.Path;switch(n){case"L":return l.getLineLength(e,i,o[0],o[1]);case"C":for(s=0,r=l.getPointOnCubicBezier(0,e,i,o[0],o[1],o[2],o[3],o[4],o[5]),t=.01;1>=t;t+=.01)a=l.getPointOnCubicBezier(t,e,i,o[0],o[1],o[2],o[3],o[4],o[5]),s+=l.getLineLength(r.x,r.y,a.x,a.y),r=a;return s;case"Q":for(s=0,r=l.getPointOnQuadraticBezier(0,e,i,o[0],o[1],o[2],o[3]),t=.01;1>=t;t+=.01)a=l.getPointOnQuadraticBezier(t,e,i,o[0],o[1],o[2],o[3]),s+=l.getLineLength(r.x,r.y,a.x,a.y),r=a;return s;case"A":s=0;var c=o[4],u=o[5],d=o[4]+u,p=Math.PI/180;if(Math.abs(c-d)<p&&(p=Math.abs(c-d)),r=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],c,0),0>u)for(t=c-p;t>d;t-=p)a=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],t,0),s+=l.getLineLength(r.x,r.y,a.x,a.y),r=a;else for(t=c+p;d>t;t+=p)a=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],t,0),s+=l.getLineLength(r.x,r.y,a.x,a.y),r=a;return a=l.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],d,0),s+=l.getLineLength(r.x,r.y,a.x,a.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,i,n,o,s,r,a,l){var c=l*(Math.PI/180),u=Math.cos(c)*(t-i)/2+Math.sin(c)*(e-n)/2,d=-1*Math.sin(c)*(t-i)/2+Math.cos(c)*(e-n)/2,p=u*u/(r*r)+d*d/(a*a);p>1&&(r*=Math.sqrt(p),a*=Math.sqrt(p));var h=Math.sqrt((r*r*a*a-r*r*d*d-a*a*u*u)/(r*r*d*d+a*a*u*u));o==s&&(h*=-1),isNaN(h)&&(h=0);var f=h*r*d/a,m=h*-a*u/r,g=(t+i)/2+Math.cos(c)*f-Math.sin(c)*m,v=(e+n)/2+Math.sin(c)*f+Math.cos(c)*m,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},w=b([1,0],[(u-f)/r,(d-m)/a]),x=[(u-f)/r,(d-m)/a],C=[(-1*u-f)/r,(-1*d-m)/a],k=b(x,C);return _(x,C)<=-1&&(k=Math.PI),_(x,C)>=1&&(k=0),0===s&&k>0&&(k-=2*Math.PI),1==s&&0>k&&(k+=2*Math.PI),[g,v,r,a,w,k,c,s]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="",n="normal";Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(i){var n=this;this.dummyCanvas=document.createElement("canvas"),this.dataArray=[],Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=t,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){n.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",n._setTextData),n._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,i=0;i<e.length;i++){t.save();var n=e[i].p0;t.translate(n.x,n.y),t.rotate(e[i].rotation),this.partialText=e[i].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,i=e.getContext("2d");i.save(),i.font=this._getContextFont();var n=i.measureText(t);return i.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var i,n,o,s=this.attrs.text.split(""),r=-1,a=0,l=function(){a=0;for(var e=t.dataArray,n=r+1;n<e.length;n++){if(e[n].pathLength>0)return r=n,e[n];"M"==e[n].command&&(i={x:e[n].points[0],y:e[n].points[1]})}return{}},c=function(e){var s=t._getTextSize(e).width,r=0,c=0;for(n=void 0;Math.abs(s-r)/s>.01&&25>c;){c++;for(var u=r;void 0===o;)o=l(),o&&u+o.pathLength<s&&(u+=o.pathLength,o=void 0);if(o==={}||void 0===i)return;var d=!1;switch(o.command){case"L":Kinetic.Path.getLineLength(i.x,i.y,o.points[0],o.points[1])>s?n=Kinetic.Path.getPointOnLine(s,i.x,i.y,o.points[0],o.points[1],i.x,i.y):o=void 0;break;case"A":var p=o.points[4],h=o.points[5],f=o.points[4]+h;0===a?a=p+1e-8:s>r?a+=Math.PI/180*h/Math.abs(h):a-=Math.PI/360*h/Math.abs(h),(0>h&&f>a||h>=0&&a>f)&&(a=f,d=!0),n=Kinetic.Path.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],a,o.points[6]);break;case"C":0===a?a=s>o.pathLength?1e-8:s/o.pathLength:s>r?a+=(s-r)/o.pathLength:a-=(r-s)/o.pathLength,a>1&&(a=1,d=!0),n=Kinetic.Path.getPointOnCubicBezier(a,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case"Q":0===a?a=s/o.pathLength:s>r?a+=(s-r)/o.pathLength:a-=(r-s)/o.pathLength,a>1&&(a=1,d=!0),n=Kinetic.Path.getPointOnQuadraticBezier(a,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3])}void 0!==n&&(r=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y)),d&&(d=!1,o=void 0)}},u=0;u<s.length&&(c(s[u]),void 0!==i&&void 0!==n);u++){var d=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y),p=0,h=Kinetic.Path.getPointOnLine(p+d/2,i.x,i.y,n.x,n.y),f=Math.atan2(n.y-i.y,n.x-i.x);this.glyphInfo.push({transposeX:h.x,transposeY:h.y,text:s[u],rotation:f,p0:i,p1:n}),i=n}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",n),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",i),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,o=this.attrs.sides,s=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-s),e=1;o>e;e++)i=s*Math.sin(2*e*Math.PI/o),n=-1*s*Math.cos(2*e*Math.PI/o),t.lineTo(i,n);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var o=1;2*n>o;o++){var s=0===o%2?i:e,r=s*Math.sin(o*Math.PI/n),a=-1*s*Math.cos(o*Math.PI/n);t.lineTo(r,a)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",i="none",n="up",o="right",s="down",r="left",a="Label",l=t.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;this.className=a,Kinetic.Group.call(this,t),this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(i){var n,o=this,s=function(){o._sync()};for(n=0;l>n;n++)i.on(t[n]+e,s)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,i,a,l,c,u=this.getText(),d=this.getTag();if(u&&d){switch(t=u.getWidth(),e=u.getHeight(),i=d.getPointerDirection(),a=d.getPointerWidth(),pointerHeight=d.getPointerHeight(),l=0,c=0,i){case n:l=t/2,c=-1*pointerHeight;break;case o:l=t+a,c=e/2;break;case s:l=t/2,c=e+pointerHeight;break;case r:l=-1*a,c=e/2}d.setAttrs({x:-1*l,y:-1*c,width:t,height:e}),u.setAttrs({x:-1*l,y:-1*c})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),i=this.getHeight(),a=this.getPointerDirection(),l=this.getPointerWidth(),c=this.getPointerHeight();this.getCornerRadius(),t.beginPath(),t.moveTo(0,0),a===n&&(t.lineTo((e-l)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+l)/2,0)),t.lineTo(e,0),a===o&&(t.lineTo(e,(i-c)/2),t.lineTo(e+l,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i),a===s&&(t.lineTo((e+l)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-l)/2,i)),t.lineTo(0,i),a===r&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*l,i/2),t.lineTo(0,(i-c)/2)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",i),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),dragBoundRect=function(t,e,i){var n=i.getX(),o=i.getX()+i.getWidth()-e.getWidth(),s=i.getY(),r=i.getY()+i.getHeight()-e.getHeight(),a=t.x,l=t.y;return a<n-e.getX()&&(a=n-e.getX()),a>o-e.getX()&&(a=o-e.getX()),l<s-e.getY()&&(l=s-e.getY()),l>r-e.getY()&&(l=r-e.getY()),{x:a,y:l}},resizeCircle=function(t,e){var i=0,n=5,o=t.radius(),s=t.getAbsolutePosition().x,r=t.getAbsolutePosition().y,a=new Kinetic.Group({draggable:!0}),l=new Kinetic.Circle({x:s+o+i,y:r,radius:n,stroke:"#666",fill:"#ddd",strokeWidth:2,draggable:!0,dragBoundFunc:function(t){return{x:t.x,y:this.getAbsolutePosition().y}}});return l.on("dragmove",function(){var e=this.getAbsolutePosition().x,n=this.getAbsolutePosition().y,o=t.getAbsolutePosition().x,s=t.getAbsolutePosition().y,r=e-o,a=n-s,l=Math.sqrt(r*r+a*a)-i;l=Math.max(5,l),t.resize(l)}),l.on("mouseover",function(){var t=this.getLayer();document.body.style.cursor="pointer",this.strokeWidth(4),t.draw()}),l.on("mouseout",function(){var t=this.getLayer();document.body.style.cursor="default",this.strokeWidth(2),t.draw()}),t.resize=function(t){this.radius(t)},a.add(t),a.add(l),e.add(a),a},resizeRect=function(t,e){var i=t.getAbsolutePosition().x,n=t.getAbsolutePosition().y,o=(t.getAbsolutePosition(),t.width()),s=t.height(),r=e.getStage(),a=new Kinetic.Group({x:i,y:n,draggable:!0,dragBoundFunc:function(t){return dragBoundRect(t,this.getChildren()[0],r)}});e.add(a),a.add(t);var l=addAnchor(a,0,0,"topLeft");return addAnchor(a,o,0,"topRight"),addAnchor(a,o,s,"bottomRight"),addAnchor(a,0,s,"bottomLeft"),t.setPosition(l.getPosition()),a},addAnchor=function(t,e,i,n){var o=t.getLayer(),s=new Kinetic.Circle({x:e,y:i,stroke:"#666",fill:"#ddd",strokeWidth:2,radius:5,name:n,draggable:!0,dragOnTop:!1});return s.on("dragmove",function(){update(this),o.draw()}),s.on("mousedown touchstart",function(){t.draggable(!1),this.moveToTop()}),s.on("dragend",function(){t.draggable(!0),o.draw(),update(this)}),s.on("mouseover",function(){var t=this.getLayer();document.body.style.cursor="pointer",this.strokeWidth(4),t.draw()}),s.on("mouseout",function(){var t=this.getLayer();document.body.style.cursor="default",this.strokeWidth(2),t.draw()}),t.add(s),"topLeft"==n?s:void 0},update=function(t){var e=t.getParent(),i=e.get(".topLeft")[0],n=e.get(".topRight")[0],o=e.get(".bottomRight")[0],s=e.get(".bottomLeft")[0],r=e.getChildren()[0],a=t.getX(),l=t.getY();switch(t.getName()){case"topLeft":n.setY(l),s.setX(a);break;case"topRight":i.setY(l),o.setX(a);break;case"bottomRight":s.setY(l),n.setX(a);break;case"bottomLeft":o.setY(l),i.setX(a)}r.setPosition(i.getPosition());var c=n.getX()-i.getX(),u=s.getY()-i.getY();c&&u&&r.setSize({width:c,height:u})},define("kineticresize",["kinetic"],function(){}),!function(t){var e=function(t,e){this.init(t,e)};e.prototype={constructor:e,init:function(e,i){var n=this.$element=t(e);this.options=t.extend({},t.fn.checkbox.defaults,i),n.before(this.options.template),this.setState()},setState:function(){var t=this.$element,e=t.closest(".checkbox");t.prop("disabled")&&e.addClass("disabled"),t.prop("checked")&&e.addClass("checked")},toggle:function(){var e="checked",i=this.$element,n=i.closest(".checkbox"),o=i.prop(e),s=t.Event("toggle");0==i.prop("disabled")&&(n.toggleClass(e)&&o?i.removeAttr(e):i.prop(e,e),i.trigger(s).trigger("change"))},setCheck:function(e){var i="checked",n=this.$element,o=n.closest(".checkbox"),s="check"==e?!0:!1,r=t.Event(e);o[s?"addClass":"removeClass"](i)&&s?n.prop(i,i):n.removeAttr(i),n.trigger(r).trigger("change")}};var i=t.fn.checkbox;t.fn.checkbox=function(i){return this.each(function(){var n=t(this),o=n.data("checkbox"),s=t.extend({},t.fn.checkbox.defaults,n.data(),"object"==typeof i&&i);o||n.data("checkbox",o=new e(this,s)),"toggle"==i&&o.toggle(),"check"==i||"uncheck"==i?o.setCheck(i):i&&o.setState()})},t.fn.checkbox.defaults={},t.fn.checkbox.noConflict=function(){return t.fn.checkbox=i,this},t(document).on("click.checkbox.data-api","[data-toggle^=checkbox], .checkbox",function(e){var i=t(e.target);"A"!=e.target.tagName&&(e&&e.preventDefault()&&e.stopPropagation(),i.hasClass("checkbox")||(i=i.closest(".checkbox")),i.find(":checkbox").checkbox("toggle"))}),t(function(){t('[data-toggle="checkbox"]').each(function(){var e=t(this);e.checkbox()})})}(window.jQuery),define("checkbox",["bootstrap"],function(){}),function(t,e,i,n){var o={init:function(e){var i=t.extend({image:null,width:50,height:50,disabled:!1},e);return this.each(function(){var e=t(this),n=i.image,o=e.data("sdb-image");o&&(n=o),n||t.error("There is no image assigned for ScrewDefaultButtons"),e.wrap("<div >").css({display:"none"});var s=e.attr("class"),r=e.attr("onclick"),a=e.parent("div");a.addClass(s),a.attr("onclick",r),a.css({"background-image":n,width:i.width,height:i.height,cursor:"pointer"});var l=0,c=-i.height;if(e.is(":disabled")&&(l=-(2*i.height),c=-(3*i.height)),e.on("disableBtn",function(){e.attr("disabled","disabled"),l=-(2*i.height),c=-(3*i.height),e.trigger("resetBackground")}),e.on("enableBtn",function(){e.removeAttr("disabled"),l=0,c=-i.height,e.trigger("resetBackground")}),e.on("resetBackground",function(){e.is(":checked")?a.css({backgroundPosition:"0 "+c+"px"}):a.css({backgroundPosition:"0 "+l+"px"})}),e.trigger("resetBackground"),e.is(":checkbox"))a.on("click",function(){e.is(":disabled")||e.change()}),a.addClass("styledCheckbox"),e.on("change",function(){e.prop("checked")?(e.prop("checked",!1),a.css({backgroundPosition:"0 "+l+"px"})):(e.prop("checked",!0),a.css({backgroundPosition:"0 "+c+"px"}))});else if(e.is(":radio")){a.addClass("styledRadio");var u=e.attr("name");a.on("click",function(){e.prop("checked")||e.is(":disabled")||e.change()}),e.on("change",function(){if(e.prop("checked"))e.prop("checked",!1),a.css({backgroundPosition:"0 "+l+"px"});else{e.prop("checked",!0),a.css({backgroundPosition:"0 "+c+"px"});var i=t('input[name="'+u+'"]').not(e);i.trigger("radioSwitch")}}),e.on("radioSwitch",function(){a.css({backgroundPosition:"0 "+l+"px"})});var d=t(this).attr("id"),p=t('label[for="'+d+'"]');p.on("click",function(){a.trigger("click")})}if(!t.support.leadingWhitespace){var d=t(this).attr("id"),p=t('label[for="'+d+'"]');p.on("click",function(){a.trigger("click")})}})},check:function(){return this.each(function(){var e=t(this);o.isChecked(e)||e.change()})},uncheck:function(){return this.each(function(){var e=t(this);o.isChecked(e)&&e.change()})},toggle:function(){return this.each(function(){var e=t(this);e.change()})},disable:function(){return this.each(function(){var e=t(this);e.trigger("disableBtn")})},enable:function(){return this.each(function(){var e=t(this);e.trigger("enableBtn")})},isChecked:function(t){return t.prop("checked")?!0:!1}};return t.fn.screwDefaultButtons=function(e,i){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.screwDefaultButtons"):o.init.apply(this,arguments)},this}(jQuery),define("screwbuttons",["jquery"],function(){}),function(t){var e=navigator.userAgent.toLowerCase(),i=e.match(/(iphone|ipod|ipad)/),n={init:function(e){return this.each(function(){function n(t,e){var i=t.offset(),n=e.pageX-i.left,o=100*n/(t.width()+1);0>o&&(o=0),o>100&&(o=100),a=t.parents(".panzer").data("panzer"),a.audio.volume=o/100}var o=t(this);if(o.is("audio")){var s=t.extend({layout:"mini",theme:"dark",expanded:!1,cover:"",pauseothers:!0,showduration:!1,showvolume:!1,volume:100,title:""},e);s.volume<0&&(s.volume=0),s.volume>100&&(s.volume=100);var o=t(this),r=o.get(0),a=o.data("panzer");if(!a){var l="";if("big"==s.layout&&(l=" panzer-big"),l+="light"==s.theme?" panzer-light":"dark"==s.theme?" panzer-dark":" panzer-custom",s.expanded&&(l+=" panzer-expand"),s.pauseothers&&(l+=" pause-others"),this.canPlayType){if(controls='<div class="controls"><span class="play"><em></em></span></div><div class="progress-wrapper"><div class="progress"><div class="elapsed" style="width:0;display:none"></div></div></div>',s.showduration){var c,u;c=Math.floor(r.duration/60),c=isNaN(c)?"00":c>=10?c:"0"+c,u=Math.floor(r.duration%60),u=isNaN(u)?"00":u>=10?u:"0"+u,c>100?controls+='<span class="duration small">'+c+":"+u+"</span>":controls+='<span class="duration">'+c+":"+u+"</span>",l+=" show-duration"}s.showvolume&&(controls+='<div class="volume-wrapper"><span></span><div class="volume"><div class="set" style="width:'+s.volume+'%"></div></div></div>',l+=" show-volume")}else{var d=o.attr("src");"undefined"==typeof d&&(d=o.children("source:first").attr("src")),"undefined"==typeof d?(controls='<strong class="alert">Please specify an audio source file.</strong>',l+=" panzer-unsupported"):(controls='<div class="controls"><a class="download" href="'+d+'" title="Download File"><em></em></a></div><strong class="alert">Download Audio</strong>',l+=" panzer-download")}if(""!=s.cover?album_cover='<div class="cover"><img src="'+s.cover+'" alt="" /></div>':album_cover="",s.title&&0!==s.title.length?song_title='<div class="title">'+s.title+"</div>":song_title=o.attr("title")?'<div class="title">'+o.attr("title")+"</div>":"",$player=t('<div class="panzer'+l+'">'+album_cover+'<div class="player">'+controls+"</div>"+song_title+"</div>"),o.after($player).data("panzer",{target:o,audio:r,player:$player,loc:o.prev()}),i?o.css({position:"absolute",top:-9999,width:0,height:0,display:"none",visibility:"hidden",overflow:"hidden"}):o.detach(),$player.data("panzer",{audio:r}),this.canPlayType){if(t(".play",$player).click(function(e){t(this).hasClass("play")&&(t(".panzer.pause-others").each(function(){var e=t(this).data("panzer");e&&!e.audio.paused&&e.audio.pause()}),t(".panzerlist.pause-others").each(function(){var e=t(this).find("a.active").data("panzerlist");e&&!e.audio.paused&&e.audio.pause()})),a=t(this).parents(".panzer").data("panzer"),a.audio.paused?a.audio.play():a.audio.pause()}),r.addEventListener("play",function(){a=t(this).data("panzer"),t(".play",a.player).toggleClass("play pause")}),r.addEventListener("pause",function(){a=t(this).data("panzer"),t(".pause",a.$player).toggleClass("play pause")}),r.addEventListener("ended",function(){a=t(this).data("panzer"),a.audio.pause()}),r.addEventListener("timeupdate",function(){a=t(this).data("panzer");var e=100*a.audio.currentTime/a.audio.duration;if(!isNaN(e)){var i,n,o;i=Math.floor(a.audio.currentTime/60),n=isNaN(i)?"00":i>=10?i:"0"+i,o=Math.floor(a.audio.currentTime%60),o=isNaN(o)?"00":o>=10?o:"0"+o,!isNaN(i)&&i>99&&t("span.duration",a.player).addClass("small"),t("span.duration",a.player).html(n+":"+o),0==e?t(".elapsed",a.player).hide().css("width",0):t(".elapsed",a.player).show().css("width",e+"%")}}),s.showvolume){r.addEventListener("volumechange",function(){a=t(this).data("panzer");var e=100*a.audio.volume;0==e?t(".volume .set",a.player).hide().css("width",0):t(".volume .set",a.player).show().css("width",e+"%")}),r.volume=s.volume/100;var p=!1;t(".volume",$player).mousedown(function(e){1===e.which&&(p=!0,n(t(this),e))}).mouseup(function(t){1===t.which&&(p=!1)}).mousemove(function(e){(e.which=p)&&n(t(this),e)})}t(".progress").click(function(e){var i=t(this).offset(),n=e.pageX-i.left,o=100*n/(t(this).width()+1);0>o&&(o=0),o>100&&(o=100),a=t(this).parents(".panzer").data("panzer");var s=Math.round(a.audio.duration/100*o);0===a.audio.readyState?a.audio.addEventListener("canplay",function(){a=t(this).data("panzer"),a.audio.currentTime=s}):a.audio.currentTime=s})}}}})},destroy:function(){return this.each(function(){var e=t(this),n=e.data("panzer");n&&(i?e.removeAttr("style"):n.loc&&n.loc.after(e),n.player.remove(),e.removeData("panzer").removeAttr("style"));
})}};t.fn.panzer=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.panzer"):n.init.apply(this,arguments)}}(jQuery),define("panzer",["jquery"],function(){}),function(t){var e=navigator.userAgent.toLowerCase(),i=e.match(/(iphone|ipod|ipad)/),n={init:function(e){function n(e,i){var n=e.offset(),o=i.pageX-n.left,s=100*o/(e.width()+1);0>s&&(s=0),s>100&&(s=100),$elems=e.parents(".panzerlist").find(".list a"),$elems.each(function(){data=t(this).data("panzerlist"),data.audio.volume=s/100})}function o(){data=t(this).data("panzerlist"),t(".play",data.player).toggleClass("play pause")}function s(){data=t(this).data("panzerlist"),t(".pause",data.$player).toggleClass("play pause")}function r(){if(data=t(this).data("panzerlist"),data.audio.pause(),data.player.hasClass("auto-advance")){if($active=data.player.find(".list a.active"),$active.is(":last-child")){if(!data.player.hasClass("repeat-all"))return;$next=data.player.find(".list a:first")}else $next=$active.next("a");$next.trigger("click")}}function a(){data=t(this).data("panzerlist");var e=100*data.audio.currentTime/data.audio.duration;if(!isNaN(e)){var i,n,o;i=Math.floor(data.audio.currentTime/60),n=isNaN(i)?"00":i>=10?i:"0"+i,o=Math.floor(data.audio.currentTime%60),o=isNaN(o)?"00":o>=10?o:"0"+o,!isNaN(i)&&i>99&&t("span.duration",data.player).addClass("small"),t("span.duration",data.player).html(n+":"+o),0==e?t(".elapsed",data.player).hide().css("width",0):t(".elapsed",data.player).show().css("width",e+"%")}}function l(){data=t(this).data("panzerlist");var e=100*data.audio.volume;0==e?t(".volume .set",data.player).hide().css("width",0):t(".volume .set",data.player).show().css("width",e+"%")}function c(e){if(e.preventDefault(),$this=t(this),t(".panzerlist.pause-others .list a.active").not($this).each(function(){var e=t(this).data("panzerlist");e&&(e.audio.paused||e.audio.pause())}),data=t(this).parents(".panzerlist").find(".list a.active").data("panzerlist"),$isactive=t(this).hasClass("active"),data.audio.paused||($isactive||data.audio.pause(),data.audio.currentTime=0),$isactive)data.audio.play();else{try{data.audio.currentTime=0}catch(i){}data=t(this).data("panzerlist"),t(this).parents(".panzerlist").find(".list a").removeClass("active"),t(this).addClass("active"),data.audio.play()}}var u=t.extend({layout:"mini",theme:"dark",expanded:!1,title:"",cover:"",volume:100,show_prev_next:!1,show_list:!0,pause_others:!0,auto_start:!1,auto_advance:!0,repeat_all:!1,outdated_text:"Browser is outdated, but you can still download and listen to the audio files on your computer.",auto_numbering:!1},e);u.volume<0&&(u.volume=0),u.volume>100&&(u.volume=100);var d="";"big"==u.layout&&(d=" panzerlist-big"),d+=" panzerlist-"+u.theme,u.expanded&&(d+=" panzerlist-expand"),u.show_prev_next||(d+=" hide-prev-next"),u.show_list||(d+=" hide-list"),u.pause_others&&(d+=" pause-others"),u.auto_advance&&(d+=" auto-advance"),u.repeat_all&&(d+=" repeat-all");var p=document.createElement("audio");if(p.canPlayType){controls='<div class="controls"><span class="play"><em></em></span><div class="prev-next"><span class="prev"></span><span class="next"></span></div></div><div class="progress-wrapper"><div class="progress"><div class="elapsed" style="width:0;display:none"></div></div></div><span class="duration">00:00</span><div class="volume-wrapper"><span></span><div class="volume"><div class="set" style="width:'+u.volume+'%"></div></div></div>',u.title&&0!==u.title.length?song_title='<div class="title">'+u.title+"</div>":song_title="",""!=u.cover?(album_cover='<div class="cover"><img src="'+u.cover+'" alt="" /></div>',u.show_list&&(d+=" hide-list")):album_cover="",$player=t('<div class="panzerlist'+d+'">'+song_title+album_cover+'<div class="list"></div><div class="player">'+controls+"</div></div>"),t(".play",$player).click(function(e){t(this).hasClass("play")&&(t(".panzerlist.pause-others").each(function(){var e=t(this).find("a.active").data("panzerlist");e&&!e.audio.paused&&e.audio.pause()}),t(".panzer.pause-others").each(function(){var e=t(this).data("panzer");e&&!e.audio.paused&&e.audio.pause()})),data=t(this).parents(".panzerlist").find(".list a.active").data("panzerlist"),data.audio.paused?data.audio.play():data.audio.pause()}),t(".prev,.next",$player).click(function(e){if($active=t(this).parents(".panzerlist").find(".list a.active"),data=$active.data("panzerlist"),t(this).hasClass("prev"))if($active.is(":first-child")){if(!data.player.hasClass("repeat-all"))return;$next=data.player.find(".list a:last")}else $next=$active.prev("a");else if($active.is(":last-child")){if(!data.player.hasClass("repeat-all"))return;$next=data.player.find(".list a:first")}else $next=$active.next("a");data.audio.pause(),data.audio.currentTime=0,$next.trigger("click")});var h=!1;t(".volume",$player).mousedown(function(e){1===e.which&&(h=!0,n(t(this),e))}).mouseup(function(t){1===t.which&&(h=!1)}).mousemove(function(e){1===e.which&&h&&n(t(this),e)}),t(".progress",$player).click(function(e){var i=t(this).offset(),n=e.pageX-i.left,o=100*n/(t(this).width()+1);0>o&&(o=0),o>100&&(o=100),$audio_el=t(this).parents(".panzerlist").find(".list a.active"),data=$audio_el.data("panzerlist");var s=Math.round(data.audio.duration/100*o);0===data.audio.readyState?data.audio.addEventListener("canplay",function(){data=t(this).data("panzerlist"),data.audio.currentTime=s}):data.audio.currentTime=s}),$i=0,this.each(function(){var e=t(this),n=e.get(0);e.is("audio")&&(e.data("panzerlist")||(n.volume=u.volume/100,n.addEventListener("play",o),n.addEventListener("pause",s),n.addEventListener("ended",r),n.addEventListener("timeupdate",a),n.addEventListener("volumechange",l),$i++,$el=t('<a href="'+e.children("source:first").attr("src")+'"'+(1==$i?' class="active"':"")+">"+(u.auto_numbering?$i+". ":"")+e.attr("title")+"</a>").data("panzerlist",{audio:n,player:$player}).click(c),t(".list",$player).append($el),e.after($player).data("panzerlist",{audio:n,player:$player,elem:$el,loc:e.prev()}),i?e.css({position:"absolute",top:-9999,width:0,height:0,display:"none",visibility:"hidden",overflow:"hidden"}):e.detach()))}),u.auto_start&&t(".list a:first",$player).trigger("click")}else d=" panzerlist-unsupported","big"==u.layout&&(d+=" panzerlist-big"),d+=" panzerlist-"+u.theme,u.expanded&&(d+=" panzerlist-expand"),u.title&&0!==u.title.length?song_title='<div class="title">'+u.title+"</div>":song_title="",""!=u.cover?(album_cover='<div class="cover"><img src="'+u.cover+'" alt="" /></div>',u.show_list&&(d+=" hide-list")):album_cover="",$player=t('<div class="panzerlist'+d+'">'+song_title+album_cover+'<div class="list"></div><div class="player"><strong class="alert">'+u.outdated_text+"</strong></div></div>"),$i=0,this.each(function(){var e=t(this);e.is("audio")&&(e.data("panzerlist")||($i++,$el=t('<a href="'+e.children("source:first").attr("src")+'">'+$i+". "+e.attr("title")+"</a>").data("panzerlist",{player:$player}),t(".list",$player).append($el),e.after($player).data("panzerlist",{player:$player,elem:$el,loc:e.prev()}).detach()))});return this},destroy:function(){return this.each(function(){var e=t(this),n=e.data("panzerlist");n&&(i?e.removeAttr("style"):n.loc&&n.loc.after(e),n.player.remove(),e.removeData("panzerlist").removeAttr("style"),n=null)})}};t.fn.panzerlist=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.panzerlist"):n.init.apply(this,arguments)}}(jQuery),define("panzerlist",["jquery"],function(){}),function(){var t=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function e(i){function n(){!t&&this._init&&this._init.apply(this,arguments)}var o=this.prototype;t=!0;var s=new this;t=!1;for(var r in i)s[r]="function"==typeof i[r]&&"function"==typeof o[r]?function(t,e){return function(){var i=this._super;this._super=function(e){return o[t].apply(this,e||[])};var n=e.apply(this,arguments);return this._super=i,n}}(r,i[r]):i[r];return n.prototype=s,n.prototype.constructor=n,n.extend=e,n}}(),function($){function camelCase(t){return t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var t=camelCase(this.name);$[t]=this,$.fn[t]=function(e){var i=Array.prototype.slice.call(arguments,1);return $[t]._isNotChained(e,i)?$[t][e].apply($[t],[this[0]].concat(i)):this.each(function(){if("string"==typeof e){if("_"===e[0]||!$[t][e])throw"Unknown method: "+e;$[t][e].apply($[t],[this].concat(i))}else $[t]._attach(this,e)})}},setDefaults:function(t){$.extend(this.defaultOptions,t||{})},_isNotChained:function(t,e){return"option"===t&&(0===e.length||1===e.length&&"string"==typeof e[0])?!0:$.inArray(t,this._getters)>-1},_attach:function(t,e){if(t=$(t),!t.hasClass(this._getMarker())){t.addClass(this._getMarker()),e=$.extend({},this.defaultOptions,this._getMetadata(t),e||{});var i=$.extend({name:this.name,elem:t,options:e},this._instSettings(t,e));t.data(this.name,i),this._postAttach(t,i),this.option(t,e)}},_instSettings:function(t,e){return{}},_postAttach:function(t,e){},_getMetadata:function(d){try{var f=d.data(this.name.toLowerCase())||"";f=f.replace(/'/g,'"'),f=f.replace(/([a-zA-Z0-9]+):/g,function(t,e,i){var n=f.substring(0,i).match(/"/g);return n&&n.length%2!==0?e+":":'"'+e+'":'}),f=$.parseJSON("{"+f+"}");for(var g in f){var h=f[g];"string"==typeof h&&h.match(/^new Date\((.*)\)$/)&&(f[g]=eval(h))}return f}catch(e){return{}}},_getInst:function(t){return $(t).data(this.name)||{}},option:function(t,e,i){t=$(t);var n=t.data(this.name);if(!e||"string"==typeof e&&null==i){var o=(n||{}).options;return o&&e?o[e]:o}if(t.hasClass(this._getMarker())){var o=e||{};"string"==typeof e&&(o={},o[e]=i),this._optionsChanged(t,n,o),$.extend(n.options,o)}},_optionsChanged:function(t,e,i){},destroy:function(t){t=$(t),t.hasClass(this._getMarker())&&(this._preDestroy(t,this._getInst(t)),t.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(t,e){}}),$.JQPlugin={createPlugin:function(t,e){"object"==typeof t&&(e=t,t="JQPlugin"),t=camelCase(t);var i=camelCase(e.name);JQClass.classes[i]=JQClass.classes[t].extend(e),new JQClass.classes[i]}}}(jQuery),define("timerplugin",["jquery"],function(){}),function(t){var e="countdown",i=0,n=1,o=2,s=3,r=4,a=5,l=6;t.JQPlugin.createPlugin({name:e,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1}},_getters:["getTimes"],_rtlClass:e+"-rtl",_sectionClass:e+"-section",_amountClass:e+"-amount",_periodClass:e+"-period",_rowClass:e+"-row",_holdingClass:e+"-holding",_showClass:e+"-show",_descrClass:e+"-descr",_timerElems:[],_init:function(){function e(t){var a=1e12>t?o?performance.now()+performance.timing.navigationStart:n():t||n();a-r>=1e3&&(i._updateElems(),r=a),s(e)}var i=this;this._super(),this._serverSyncs=[];var n="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},o=window.performance&&"function"==typeof window.performance.now,s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,r=0;!s||t.noRequestAnimationFrame?(t.noRequestAnimationFrame=null,setInterval(function(){i._updateElems()},980)):(r=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||n(),s(e))},UTCDate:function(t,e,i,n,o,s,r,a){"object"==typeof e&&e.constructor==Date&&(a=e.getMilliseconds(),r=e.getSeconds(),s=e.getMinutes(),o=e.getHours(),n=e.getDate(),i=e.getMonth(),e=e.getFullYear());var l=new Date;return l.setUTCFullYear(e),l.setUTCDate(1),l.setUTCMonth(i||0),l.setUTCDate(n||1),l.setUTCHours(o||0),l.setUTCMinutes((s||0)-(Math.abs(t)<30?60*t:t)),l.setUTCSeconds(r||0),l.setUTCMilliseconds(a||0),l},periodsToSeconds:function(t){return 31557600*t[0]+2629800*t[1]+604800*t[2]+86400*t[3]+3600*t[4]+60*t[5]+t[6]},_instSettings:function(t,e){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(t){this._hasElem(t)||this._timerElems.push(t)},_hasElem:function(e){return t.inArray(e,this._timerElems)>-1},_removeElem:function(e){this._timerElems=t.map(this._timerElems,function(t){return t==e?null:t})},_updateElems:function(){for(var t=this._timerElems.length-1;t>=0;t--)this._updateCountdown(this._timerElems[t])},_optionsChanged:function(e,i,n){n.layout&&(n.layout=n.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(i.options,n);var o=i.options.timezone!=n.timezone;t.extend(i.options,n),this._adjustSettings(e,i,null!=n.until||null!=n.since||o);var s=new Date;(i._since&&i._since<s||i._until&&i._until>s)&&this._addElem(e[0]),this._updateCountdown(e,i)},_updateCountdown:function(e,i){if(e=e.jquery?e:t(e),i=i||e.data(this.name)){if(e.html(this._generateHTML(i)).toggleClass(this._rtlClass,i.options.isRTL),t.isFunction(i.options.onTick)){var n="lap"!=i._hold?i._periods:this._calculatePeriods(i,i._show,i.options.significant,new Date);(1==i.options.tickInterval||this.periodsToSeconds(n)%i.options.tickInterval==0)&&i.options.onTick.apply(e[0],[n])}var o="pause"!=i._hold&&(i._since?i._now.getTime()<i._since.getTime():i._now.getTime()>=i._until.getTime());if(o&&!i._expiring){if(i._expiring=!0,this._hasElem(e[0])||i.options.alwaysExpire){if(this._removeElem(e[0]),t.isFunction(i.options.onExpiry)&&i.options.onExpiry.apply(e[0],[]),i.options.expiryText){var s=i.options.layout;i.options.layout=i.options.expiryText,this._updateCountdown(e[0],i),i.options.layout=s}i.options.expiryUrl&&(window.location=i.options.expiryUrl)}i._expiring=!1}else"pause"==i._hold&&this._removeElem(e[0])}},_resetExtraLabels:function(t,e){var i=!1;for(var n in e)if("whichLabels"!=n&&n.match(/[Ll]abels/)){i=!0;break}if(i)for(var n in t)n.match(/[Ll]abels[02-9]|compactLabels1/)&&(t[n]=null)},_adjustSettings:function(e,i,n){for(var o,s=0,r=null,a=0;a<this._serverSyncs.length;a++)if(this._serverSyncs[a][0]==i.options.serverSync){r=this._serverSyncs[a][1];break}if(null!=r)s=i.options.serverSync?r:0,o=new Date;else{var l=t.isFunction(i.options.serverSync)?i.options.serverSync.apply(e[0],[]):null;o=new Date,s=l?o.getTime()-l.getTime():0,this._serverSyncs.push([i.options.serverSync,s])}var c=i.options.timezone;c=null==c?-o.getTimezoneOffset():c,(n||!n&&null==i._until&&null==i._since)&&(i._since=i.options.since,null!=i._since&&(i._since=this.UTCDate(c,this._determineTime(i._since,null)),i._since&&s&&i._since.setMilliseconds(i._since.getMilliseconds()+s)),i._until=this.UTCDate(c,this._determineTime(i.options.until,o)),s&&i._until.setMilliseconds(i._until.getMilliseconds()+s)),i._show=this._determineShow(i)},_preDestroy:function(t,e){this._removeElem(t[0]),t.empty()},pause:function(t){this._hold(t,"pause")},lap:function(t){this._hold(t,"lap")},resume:function(t){this._hold(t,null)},toggle:function(e){var i=t.data(e,this.name)||{};this[i._hold?"resume":"pause"](e)},toggleLap:function(e){var i=t.data(e,this.name)||{};this[i._hold?"resume":"lap"](e)},_hold:function(e,i){var n=t.data(e,this.name);if(n){if("pause"==n._hold&&!i){n._periods=n._savePeriods;var o=n._since?"-":"+";n[n._since?"_since":"_until"]=this._determineTime(o+n._periods[0]+"y"+o+n._periods[1]+"o"+o+n._periods[2]+"w"+o+n._periods[3]+"d"+o+n._periods[4]+"h"+o+n._periods[5]+"m"+o+n._periods[6]+"s"),this._addElem(e)}n._hold=i,n._savePeriods="pause"==i?n._periods:null,t.data(e,this.name,n),this._updateCountdown(e,n)}},getTimes:function(e){var i=t.data(e,this.name);return i?"pause"==i._hold?i._savePeriods:i._hold?this._calculatePeriods(i,i._show,i.options.significant,new Date):i._periods:null},_determineTime:function(t,e){var i=this,n=function(t){var e=new Date;return e.setTime(e.getTime()+1e3*t),e},o=function(t){t=t.toLowerCase();for(var e=new Date,n=e.getFullYear(),o=e.getMonth(),s=e.getDate(),r=e.getHours(),a=e.getMinutes(),l=e.getSeconds(),c=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,u=c.exec(t);u;){switch(u[2]||"s"){case"s":l+=parseInt(u[1],10);break;case"m":a+=parseInt(u[1],10);break;case"h":r+=parseInt(u[1],10);break;case"d":s+=parseInt(u[1],10);break;case"w":s+=7*parseInt(u[1],10);break;case"o":o+=parseInt(u[1],10),s=Math.min(s,i._getDaysInMonth(n,o));break;case"y":n+=parseInt(u[1],10),s=Math.min(s,i._getDaysInMonth(n,o))}u=c.exec(t)}return new Date(n,o,s,r,a,l,0)},s=null==t?e:"string"==typeof t?o(t):"number"==typeof t?n(t):t;return s&&s.setMilliseconds(0),s},_getDaysInMonth:function(t,e){return 32-new Date(t,e,32).getDate()},_normalLabels:function(t){return t},_generateHTML:function(e){var c=this;e._periods=e._hold?e._periods:this._calculatePeriods(e,e._show,e.options.significant,new Date);for(var u=!1,d=0,p=e.options.significant,h=t.extend({},e._show),f=i;l>=f;f++)u|="?"==e._show[f]&&e._periods[f]>0,h[f]="?"!=e._show[f]||u?e._show[f]:null,d+=h[f]?1:0,p-=e._periods[f]>0?1:0;for(var m=[!1,!1,!1,!1,!1,!1,!1],f=l;f>=i;f--)e._show[f]&&(e._periods[f]?m[f]=!0:(m[f]=p>0,p--));var g=e.options.compact?e.options.compactLabels:e.options.labels,v=e.options.whichLabels||this._normalLabels,y=function(t){var i=e.options["compactLabels"+v(e._periods[t])];return h[t]?c._translateDigits(e,e._periods[t])+(i?i[t]:g[t])+" ":""},_=e.options.padZeroes?2:1,b=function(t){var i=e.options["labels"+v(e._periods[t])];return!e.options.significant&&h[t]||e.options.significant&&m[t]?'<span class="'+c._sectionClass+'"><span class="'+c._amountClass+'">'+c._minDigits(e,e._periods[t],_)+'</span><span class="'+c._periodClass+'">'+(i?i[t]:g[t])+"</span></span>":""};return e.options.layout?this._buildLayout(e,h,e.options.layout,e.options.compact,e.options.significant,m):(e.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(e._hold?" "+this._holdingClass:"")+'">'+y(i)+y(n)+y(o)+y(s)+(h[r]?this._minDigits(e,e._periods[r],2):"")+(h[a]?(h[r]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[a],2):"")+(h[l]?(h[r]||h[a]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[l],2):""):'<span class="'+this._rowClass+" "+this._showClass+(e.options.significant||d)+(e._hold?" "+this._holdingClass:"")+'">'+b(i)+b(n)+b(o)+b(s)+b(r)+b(a)+b(l))+"</span>"+(e.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+e.options.description+"</span>":"")},_buildLayout:function(e,c,u,d,p,h){for(var f=e.options[d?"compactLabels":"labels"],m=e.options.whichLabels||this._normalLabels,g=function(t){return(e.options[(d?"compactLabels":"labels")+m(e._periods[t])]||f)[t]},v=function(t,i){return e.options.digits[Math.floor(t/i)%10]},y={desc:e.options.description,sep:e.options.timeSeparator,yl:g(i),yn:this._minDigits(e,e._periods[i],1),ynn:this._minDigits(e,e._periods[i],2),ynnn:this._minDigits(e,e._periods[i],3),y1:v(e._periods[i],1),y10:v(e._periods[i],10),y100:v(e._periods[i],100),y1000:v(e._periods[i],1e3),ol:g(n),on:this._minDigits(e,e._periods[n],1),onn:this._minDigits(e,e._periods[n],2),onnn:this._minDigits(e,e._periods[n],3),o1:v(e._periods[n],1),o10:v(e._periods[n],10),o100:v(e._periods[n],100),o1000:v(e._periods[n],1e3),wl:g(o),wn:this._minDigits(e,e._periods[o],1),wnn:this._minDigits(e,e._periods[o],2),wnnn:this._minDigits(e,e._periods[o],3),w1:v(e._periods[o],1),w10:v(e._periods[o],10),w100:v(e._periods[o],100),w1000:v(e._periods[o],1e3),dl:g(s),dn:this._minDigits(e,e._periods[s],1),dnn:this._minDigits(e,e._periods[s],2),dnnn:this._minDigits(e,e._periods[s],3),d1:v(e._periods[s],1),d10:v(e._periods[s],10),d100:v(e._periods[s],100),d1000:v(e._periods[s],1e3),hl:g(r),hn:this._minDigits(e,e._periods[r],1),hnn:this._minDigits(e,e._periods[r],2),hnnn:this._minDigits(e,e._periods[r],3),h1:v(e._periods[r],1),h10:v(e._periods[r],10),h100:v(e._periods[r],100),h1000:v(e._periods[r],1e3),ml:g(a),mn:this._minDigits(e,e._periods[a],1),mnn:this._minDigits(e,e._periods[a],2),mnnn:this._minDigits(e,e._periods[a],3),m1:v(e._periods[a],1),m10:v(e._periods[a],10),m100:v(e._periods[a],100),m1000:v(e._periods[a],1e3),sl:g(l),sn:this._minDigits(e,e._periods[l],1),snn:this._minDigits(e,e._periods[l],2),snnn:this._minDigits(e,e._periods[l],3),s1:v(e._periods[l],1),s10:v(e._periods[l],10),s100:v(e._periods[l],100),s1000:v(e._periods[l],1e3)},_=u,b=i;l>=b;b++){var w="yowdhms".charAt(b),x=new RegExp("\\{"+w+"<\\}([\\s\\S]*)\\{"+w+">\\}","g");_=_.replace(x,!p&&c[b]||p&&h[b]?"$1":"")}return t.each(y,function(t,e){var i=new RegExp("\\{"+t+"\\}","g");_=_.replace(i,e)}),_},_minDigits:function(t,e,i){return e=""+e,e.length>=i?this._translateDigits(t,e):(e="0000000000"+e,this._translateDigits(t,e.substr(e.length-i)))},_translateDigits:function(t,e){return(""+e).replace(/[0-9]/g,function(e){return t.options.digits[e]})},_determineShow:function(t){var e=t.options.format,c=[];return c[i]=e.match("y")?"?":e.match("Y")?"!":null,c[n]=e.match("o")?"?":e.match("O")?"!":null,c[o]=e.match("w")?"?":e.match("W")?"!":null,c[s]=e.match("d")?"?":e.match("D")?"!":null,c[r]=e.match("h")?"?":e.match("H")?"!":null,c[a]=e.match("m")?"?":e.match("M")?"!":null,c[l]=e.match("s")?"?":e.match("S")?"!":null,c},_calculatePeriods:function(t,e,c,u){t._now=u,t._now.setMilliseconds(0);var d=new Date(t._now.getTime());t._since?u.getTime()<t._since.getTime()?t._now=u=d:u=t._since:(d.setTime(t._until.getTime()),u.getTime()>t._until.getTime()&&(t._now=u=d));var p=[0,0,0,0,0,0,0];if(e[i]||e[n]){var h=this._getDaysInMonth(u.getFullYear(),u.getMonth()),f=this._getDaysInMonth(d.getFullYear(),d.getMonth()),m=d.getDate()==u.getDate()||d.getDate()>=Math.min(h,f)&&u.getDate()>=Math.min(h,f),g=function(t){return 60*(60*t.getHours()+t.getMinutes())+t.getSeconds()},v=Math.max(0,12*(d.getFullYear()-u.getFullYear())+d.getMonth()-u.getMonth()+(d.getDate()<u.getDate()&&!m||m&&g(d)<g(u)?-1:0));p[i]=e[i]?Math.floor(v/12):0,p[n]=e[n]?v-12*p[i]:0,u=new Date(u.getTime());var y=u.getDate()==h,_=this._getDaysInMonth(u.getFullYear()+p[i],u.getMonth()+p[n]);u.getDate()>_&&u.setDate(_),u.setFullYear(u.getFullYear()+p[i]),u.setMonth(u.getMonth()+p[n]),y&&u.setDate(_)}var b=Math.floor((d.getTime()-u.getTime())/1e3),w=function(t,i){p[t]=e[t]?Math.floor(b/i):0,b-=p[t]*i};if(w(o,604800),w(s,86400),w(r,3600),w(a,60),w(l,1),b>0&&!t._since)for(var x=[1,12,4.3482,7,24,60,60],C=l,k=1,S=l;S>=i;S--)e[S]&&(p[C]>=k&&(p[C]=0,b=1),b>0&&(p[S]++,b=0,C=S,k=1)),k*=x[S];if(c)for(var S=i;l>=S;S++)c&&p[S]?c--:c||(p[S]=0);return p}})}(jQuery),define("countdowntimer",["jquery","timerplugin"],function(){}),jQuery.fn.mousehold=function(t){var e=100;if(t&&"function"==typeof t){var i=0,n=!1,o=void 0;return this.each(function(){$(this).mousedown(function(){n=!0;var o=0,s=this;i=setInterval(function(){o++,t.call(s,o),n=!1},e)}),o=function(){clearInterval(i),n&&t.call(this,1),n=!1},$(this).mouseout(o),$(this).mouseup(o)})}},!function(t){var e=function(e,n){this.element=t(e),this.element.addClass("spinedit"),this.element.addClass("noSelect"),this.intervalId=void 0;var o="object"==typeof n;this.minimum=t.fn.spinedit.defaults.minimum,o&&"number"==typeof n.minimum&&this.setMinimum(n.minimum),this.maximum=t.fn.spinedit.defaults.maximum,o&&"number"==typeof n.maximum&&this.setMaximum(n.maximum),this.numberOfDecimals=t.fn.spinedit.defaults.numberOfDecimals,o&&"number"==typeof n.numberOfDecimals&&this.setNumberOfDecimals(n.numberOfDecimals);var s=t.fn.spinedit.defaults.value;if(o&&"number"==typeof n.value)s=n.value;else if(this.element.val()){var r=parseFloat(this.element.val());isNaN(r)||(s=r.toFixed(this.numberOfDecimals))}this.setValue(s),this.step=t.fn.spinedit.defaults.step,o&&"number"==typeof n.step&&this.setStep(n.step);var a=t(i.template);this.element.after(a),t(a).each(function(e,i){t(i).bind("selectstart click mousedown",function(){return!1})}),a.find(".fa.fa-chevron-up").mousehold(t.proxy(this.increase,this)),a.find(".fa.fa-chevron-down").mousehold(t.proxy(this.decrease,this)),this.element.on("keypress",t.proxy(this._keypress,this)),this.element.on("blur",t.proxy(this._checkConstraints,this))};e.prototype={constructor:e,setMinimum:function(t){this.minimum=parseFloat(t)},setMaximum:function(t){this.maximum=parseFloat(t)},setStep:function(t){this.step=parseFloat(t)},setNumberOfDecimals:function(t){this.numberOfDecimals=parseInt(t)},setValue:function(t){t=parseFloat(t),isNaN(t)&&(t=this.minimum),this.value!=t&&(t<this.minimum&&(t=this.minimum),t>this.maximum&&(t=this.maximum),this.value=t,this.element.val(this.value.toFixed(this.numberOfDecimals)),this.element.change(),this.element.trigger({type:"valueChanged",value:parseFloat(this.value.toFixed(this.numberOfDecimals))}))},increase:function(){var t=this.value+this.step;this.setValue(t)},decrease:function(){var t=this.value-this.step;this.setValue(t)},_keypress:function(t){var e=t.keyCode||t.charCode;if(45!=e&&!(this.numberOfDecimals>0&&46==e)){for(var i=[],n=48;58>n;n++)i.push(n);i.indexOf(e)>=0||t.preventDefault()}},_checkConstraints:function(e){var i=t(e.target);this.setValue(i.val())}},t.fn.spinedit=function(i){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var o=t(this),s=o.data("spinedit"),r="object"==typeof i&&i;s||(o.data("spinedit",new e(this,t.extend({},t.fn.spinedit().defaults,r))),s=o.data("spinedit")),"string"==typeof i&&"function"==typeof s[i]&&s[i].apply(s,n)})},t.fn.spinedit.defaults={value:0,minimum:0,maximum:100,step:1,numberOfDecimals:0},t.fn.spinedit.Constructor=e;var i={};i.template='<div class="spinedit"><i class="fa fa-chevron-up"></i><i class="fa fa-chevron-down"></i></div>'}(window.jQuery),define("spinedit",["jquery","bootstrap"],function(){}),!function(t,e){"use strict";"function"==typeof define&&define.amd?define("bootbox",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.bootbox=e(t.jQuery)}(this,function e(t,i){"use strict";function n(t){var e=g[f.locale];return e?e[t]:g.en[t]}function o(e,i,n){e.stopPropagation(),e.preventDefault();var o=t.isFunction(n)&&n(e)===!1;o||i.modal("hide")}function s(t){var e,i=0;for(e in t)i++;return i}function r(e,i){var n=0;t.each(e,function(t,e){i(t,e,n++)})}function a(e){var i,n;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},f,e),e.buttons||(e.buttons={}),e.backdrop=e.backdrop?"static":!1,i=e.buttons,n=s(i),r(i,function(e,o,s){if(t.isFunction(o)&&(o=i[e]={callback:o}),"object"!==t.type(o))throw new Error("button with key "+e+" must be an object");o.label||(o.label=e),o.className||(o.className=2>=n&&s===n-1?"btn-primary":"btn-default")}),e}function l(t,e){var i=t.length,n={};if(1>i||i>2)throw new Error("Invalid argument length");return 2===i||"string"==typeof t[0]?(n[e[0]]=t[0],n[e[1]]=t[1]):n=t[0],n}function c(e,i,n){return t.extend(!0,{},e,l(i,n))}function u(t,e,i,n){var o={className:"bootbox-"+t,buttons:d.apply(null,e)};return p(c(o,n,i),e)}function d(){for(var t={},e=0,i=arguments.length;i>e;e++){var o=arguments[e],s=o.toLowerCase(),r=o.toUpperCase();t[s]={label:n(r)}}return t}function p(t,e){var n={};return r(e,function(t,e){n[e]=!0}),r(t.buttons,function(t){if(n[t]===i)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var h={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var e;if(e=u("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback():!0},m.dialog(e)},m.confirm=function(){var e;if(e=u("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback(!1)},e.buttons.confirm.callback=function(){return e.callback(!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return m.dialog(e)},m.prompt=function(){var e,n,o,s,a,l,u;if(s=t(h.form),n={className:"bootbox-prompt",buttons:d("cancel","confirm"),value:"",inputType:"text"},e=p(c(n,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===i?!0:e.show,e.message=s,e.buttons.cancel.callback=e.onEscape=function(){return e.callback(null)},e.buttons.confirm.callback=function(){var i;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":i=a.val();break;case"checkbox":var n=a.find("input:checked");i=[],r(n,function(e,n){i.push(t(n).val())})}return e.callback(i)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!h.inputs[e.inputType])throw new Error("invalid prompt type");switch(a=t(h.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":a.val(e.value);break;case"select":var f={};if(u=e.inputOptions||[],!u.length)throw new Error("prompt with select requires options");r(u,function(e,n){var o=a;if(n.value===i||n.text===i)throw new Error("given options in wrong format");n.group&&(f[n.group]||(f[n.group]=t("<optgroup/>").attr("label",n.group)),o=f[n.group]),o.append("<option value='"+n.value+"'>"+n.text+"</option>")}),r(f,function(t,e){a.append(e)}),a.val(e.value);break;case"checkbox":var g=t.isArray(e.value)?e.value:[e.value];if(u=e.inputOptions||[],!u.length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");a=t("<div/>"),r(u,function(i,n){var o=t(h.inputs[e.inputType]);o.find("input").attr("value",n.value),o.find("label").append(n.text),r(g,function(t,e){e===n.value&&o.find("input").prop("checked",!0)}),a.append(o)})}return e.placeholder&&a.attr("placeholder",e.placeholder),e.pattern&&a.attr("pattern",e.pattern),s.append(a),s.on("submit",function(t){t.preventDefault(),t.stopPropagation(),o.find(".btn-primary").click()}),o=m.dialog(e),o.off("shown.bs.modal"),o.on("shown.bs.modal",function(){a.focus()}),l===!0&&o.modal("show"),
o},m.dialog=function(e){e=a(e);var i=t(h.dialog),n=i.find(".modal-dialog"),s=i.find(".modal-body"),l=e.buttons,c="",u={onEscape:e.onEscape};if(r(l,function(t,e){c+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",u[t]=e.callback}),s.find(".bootbox-body").html(e.message),e.animate===!0&&i.addClass("fade"),e.className&&i.addClass(e.className),"large"===e.size&&n.addClass("modal-lg"),"small"===e.size&&n.addClass("modal-sm"),e.title&&s.before(h.header),e.closeButton){var d=t(h.closeButton);e.title?i.find(".modal-header").prepend(d):d.css("margin-top","-10px").prependTo(s)}return e.title&&i.find(".modal-title").html(e.title),c.length&&(s.after(h.footer),i.find(".modal-footer").html(c)),i.on("hidden.bs.modal",function(t){t.target===this&&i.remove()}),i.on("shown.bs.modal",function(){i.find(".btn-primary:first").focus()}),i.on("escape.close.bb",function(t){u.onEscape&&o(t,i,u.onEscape)}),i.on("click",".modal-footer button",function(e){var n=t(this).data("bb-handler");o(e,i,u[n])}),i.on("click",".bootbox-close-button",function(t){o(t,i,u.onEscape)}),i.on("keyup",function(t){27===t.which&&i.trigger("escape.close.bb")}),t(e.container).append(i),i.modal({backdrop:e.backdrop,keyboard:!1,show:!1}),e.show&&i.modal("show"),i},m.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(f,e)},m.hideAll=function(){return t(".bootbox").modal("hide"),m};var g={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.init=function(i){return e(i||t)},m}),function(t,e,i,n){function o(n,o){this.options=t.extend({},a,o),this._container=t("#"+this.options.containerID),this._container.length&&(this.jQwindow=t(e),this.jQdocument=t(i),this._holder=t(n),this._nav={},this._first=t(this.options.first),this._previous=t(this.options.previous),this._next=t(this.options.next),this._last=t(this.options.last),this._items=this._container.children(":visible"),this._itemsShowing=t([]),this._itemsHiding=t([]),this._numPages=Math.ceil(this._items.length/this.options.perPage),this._currentPageNum=this.options.startPage,this._clicked=!1,this._cssAnimSupport=this.getCSSAnimationSupport(),this.init())}var s="jPages",r=null,a={containerID:"",first:!1,previous:"← previous",next:"next →",last:!1,links:"numeric",startPage:1,perPage:10,midRange:5,startRange:1,endRange:1,keyBrowse:!1,scrollBrowse:!1,pause:0,clickStop:!1,delay:50,direction:"forward",animation:"",fallback:400,minHeight:!0,callback:n};o.prototype={constructor:o,getCSSAnimationSupport:function(){var t=!1,e="animation",i="",o="Webkit Moz O ms Khtml".split(" "),s="",r=this._container.get(0);if(r.style.animationName&&(t=!0),t===!1)for(var a=0;a<o.length;a++)if(r.style[o[a]+"AnimationName"]!==n){s=o[a],e=s+"Animation",i="-"+s.toLowerCase()+"-",t=!0;break}return t},init:function(){this.setStyles(),this.setNav(),this.paginate(this._currentPageNum),this.setMinHeight()},setStyles:function(){var e="<style>.jp-invisible { visibility: hidden !important; } .jp-hidden { display: none !important; }</style>";t(e).appendTo("head"),this._cssAnimSupport&&this.options.animation.length?this._items.addClass("animated jp-hidden"):this._items.hide()},setNav:function(){var e=this.writeNav();this._holder.each(this.bind(function(i,n){var o=t(n);o.html(e),this.cacheNavElements(o,i),this.bindNavHandlers(i),this.disableNavSelection(n)},this)),this.options.keyBrowse&&this.bindNavKeyBrowse(),this.options.scrollBrowse&&this.bindNavScrollBrowse()},writeNav:function(){var t,e=1;for(t=this.writeBtn("first")+this.writeBtn("previous");e<=this._numPages;e++){switch(1===e&&0===this.options.startRange&&(t+="<span>...</span>"),t+=e>this.options.startRange&&e<=this._numPages-this.options.endRange?"<a href='#' class='jp-hidden'>":"<a>",this.options.links){case"numeric":t+=e;break;case"blank":break;case"title":var i=this._items.eq(e-1).attr("data-title");t+=i!==n?i:""}t+="</a>",(e===this.options.startRange||e===this._numPages-this.options.endRange)&&(t+="<span>...</span>")}return t+=this.writeBtn("next")+this.writeBtn("last")+"</div>"},writeBtn:function(e){return this.options[e]===!1||t(this["_"+e]).length?"":"<a class='jp-"+e+"'>"+this.options[e]+"</a>"},cacheNavElements:function(e,i){this._nav[i]={},this._nav[i].holder=e,this._nav[i].first=this._first.length?this._first:this._nav[i].holder.find("a.jp-first"),this._nav[i].previous=this._previous.length?this._previous:this._nav[i].holder.find("a.jp-previous"),this._nav[i].next=this._next.length?this._next:this._nav[i].holder.find("a.jp-next"),this._nav[i].last=this._last.length?this._last:this._nav[i].holder.find("a.jp-last"),this._nav[i].fstBreak=this._nav[i].holder.find("span:first"),this._nav[i].lstBreak=this._nav[i].holder.find("span:last"),this._nav[i].pages=this._nav[i].holder.find("a").not(".jp-first, .jp-previous, .jp-next, .jp-last"),this._nav[i].permPages=this._nav[i].pages.slice(0,this.options.startRange).add(this._nav[i].pages.slice(this._numPages-this.options.endRange,this._numPages)),this._nav[i].pagesShowing=t([]),this._nav[i].currentPage=t([])},bindNavHandlers:function(e){var i=this._nav[e];i.holder.bind("click.jPages",this.bind(function(e){var n=this.getNewPage(i,t(e.target));this.validNewPage(n)&&(this._clicked=!0,this.paginate(n)),e.preventDefault()},this)),this._first.length&&this._first.bind("click.jPages",this.bind(function(){this.validNewPage(1)&&(this._clicked=!0,this.paginate(1))},this)),this._previous.length&&this._previous.bind("click.jPages",this.bind(function(){var t=this._currentPageNum-1;this.validNewPage(t)&&(this._clicked=!0,this.paginate(t))},this)),this._next.length&&this._next.bind("click.jPages",this.bind(function(){var t=this._currentPageNum+1;this.validNewPage(t)&&(this._clicked=!0,this.paginate(t))},this)),this._last.length&&this._last.bind("click.jPages",this.bind(function(){this.validNewPage(this._numPages)&&(this._clicked=!0,this.paginate(this._numPages))},this))},disableNavSelection:function(t){"undefined"!=typeof t.onselectstart?t.onselectstart=function(){return!1}:"undefined"!=typeof t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},bindNavKeyBrowse:function(){this.jQdocument.bind("keydown.jPages",this.bind(function(t){var e=t.target.nodeName.toLowerCase();if(this.elemScrolledIntoView()&&"input"!==e&&"textarea"!=e){var i=this._currentPageNum;37==t.which&&(i=this._currentPageNum-1),39==t.which&&(i=this._currentPageNum+1),this.validNewPage(i)&&(this._clicked=!0,this.paginate(i))}},this))},elemScrolledIntoView:function(){var t,e,i,n;return t=this.jQwindow.scrollTop(),e=t+this.jQwindow.height(),i=this._container.offset().top,n=i+this._container.height(),n>=t&&e>=i},bindNavScrollBrowse:function(){this._container.bind("mousewheel.jPages DOMMouseScroll.jPages",this.bind(function(t){var e=(t.originalEvent.wheelDelta||-t.originalEvent.detail)>0?this._currentPageNum-1:this._currentPageNum+1;return this.validNewPage(e)&&(this._clicked=!0,this.paginate(e)),t.preventDefault(),!1},this))},getNewPage:function(t,e){return e.is(t.currentPage)?this._currentPageNum:e.is(t.pages)?t.pages.index(e)+1:e.is(t.first)?1:e.is(t.last)?this._numPages:e.is(t.previous)?t.pages.index(t.currentPage):e.is(t.next)?t.pages.index(t.currentPage)+2:void 0},validNewPage:function(t){return t!==this._currentPageNum&&t>0&&t<=this._numPages},paginate:function(e){var i,n;i=this.updateItems(e),n=this.updatePages(e),this._currentPageNum=e,t.isFunction(this.options.callback)&&this.callback(e,i,n),this.updatePause()},updateItems:function(t){var e=this.getItemRange(t);return this._itemsHiding=this._itemsShowing,this._itemsShowing=this._items.slice(e.start,e.end),this._cssAnimSupport&&this.options.animation.length?this.cssAnimations(t):this.jQAnimations(t),e},getItemRange:function(t){var e={};return e.start=(t-1)*this.options.perPage,e.end=e.start+this.options.perPage,e.end>this._items.length&&(e.end=this._items.length),e},cssAnimations:function(t){clearInterval(this._delay),this._itemsHiding.removeClass(this.options.animation+" jp-invisible").addClass("jp-hidden"),this._itemsShowing.removeClass("jp-hidden").addClass("jp-invisible"),this._itemsOriented=this.getDirectedItems(t),this._index=0,this._delay=setInterval(this.bind(function(){this._index===this._itemsOriented.length?clearInterval(this._delay):this._itemsOriented.eq(this._index).removeClass("jp-invisible").addClass(this.options.animation),this._index=this._index+1},this),this.options.delay)},jQAnimations:function(t){clearInterval(this._delay),this._itemsHiding.addClass("jp-hidden"),this._itemsShowing.fadeTo(0,0).removeClass("jp-hidden"),this._itemsOriented=this.getDirectedItems(t),this._index=0,this._delay=setInterval(this.bind(function(){this._index===this._itemsOriented.length?clearInterval(this._delay):this._itemsOriented.eq(this._index).fadeTo(this.options.fallback,1),this._index=this._index+1},this),this.options.delay)},getDirectedItems:function(e){var i;switch(this.options.direction){case"backwards":i=t(this._itemsShowing.get().reverse());break;case"random":i=t(this._itemsShowing.get().sort(function(){return Math.round(Math.random())-.5}));break;case"auto":i=e>=this._currentPageNum?this._itemsShowing:t(this._itemsShowing.get().reverse());break;default:i=this._itemsShowing}return i},updatePages:function(t){var e,i,n;e=this.getInterval(t);for(i in this._nav)this._nav.hasOwnProperty(i)&&(n=this._nav[i],this.updateBtns(n,t),this.updateCurrentPage(n,t),this.updatePagesShowing(n,e),this.updateBreaks(n,e));return e},getInterval:function(t){var e,i,n,o;return e=Math.ceil(this.options.midRange/2),i=this._numPages-this.options.midRange,n=t>e?Math.max(Math.min(t-e,i),0):0,o=t>e?Math.min(t+e-(this.options.midRange%2>0?1:0),this._numPages):Math.min(this.options.midRange,this._numPages),{start:n,end:o}},updateBtns:function(t,e){1===e&&(t.first.addClass("jp-disabled"),t.previous.addClass("jp-disabled")),e===this._numPages&&(t.next.addClass("jp-disabled"),t.last.addClass("jp-disabled")),1===this._currentPageNum&&e>1&&(t.first.removeClass("jp-disabled"),t.previous.removeClass("jp-disabled")),this._currentPageNum===this._numPages&&e<this._numPages&&(t.next.removeClass("jp-disabled"),t.last.removeClass("jp-disabled"))},updateCurrentPage:function(t,e){t.currentPage.removeClass("jp-current"),t.currentPage=t.pages.eq(e-1).addClass("jp-current")},updatePagesShowing:function(t,e){var i=t.pages.slice(e.start,e.end).not(t.permPages);t.pagesShowing.not(i).addClass("jp-hidden"),i.not(t.pagesShowing).removeClass("jp-hidden"),t.pagesShowing=i},updateBreaks:function(t,e){e.start>this.options.startRange||0===this.options.startRange&&e.start>0?t.fstBreak.removeClass("jp-hidden"):t.fstBreak.addClass("jp-hidden"),e.end<this._numPages-this.options.endRange?t.lstBreak.removeClass("jp-hidden"):t.lstBreak.addClass("jp-hidden")},callback:function(t,e,i){var n={current:t,interval:i,count:this._numPages},o={showing:this._itemsShowing,oncoming:this._items.slice(e.start+this.options.perPage,e.end+this.options.perPage),range:e,count:this._items.length};n.interval.start=n.interval.start+1,o.range.start=o.range.start+1,this.options.callback(n,o)},updatePause:function(){if(this.options.pause&&this._numPages>1){if(clearTimeout(this._pause),this.options.clickStop&&this._clicked)return;this._pause=setTimeout(this.bind(function(){this.paginate(this._currentPageNum!==this._numPages?this._currentPageNum+1:1)},this),this.options.pause)}},setMinHeight:function(){this.options.minHeight&&!this._container.is("table, tbody")&&setTimeout(this.bind(function(){this._container.css({"min-height":this._container.css("height")})},this),1e3)},bind:function(t,e){return function(){return t.apply(e,arguments)}},destroy:function(){this.jQdocument.unbind("keydown.jPages"),this._container.unbind("mousewheel.jPages DOMMouseScroll.jPages"),this.options.minHeight&&this._container.css("min-height",""),this._cssAnimSupport&&this.options.animation.length?this._items.removeClass("animated jp-hidden jp-invisible "+this.options.animation):this._items.removeClass("jp-hidden").fadeTo(0,1),this._holder.unbind("click.jPages").empty()}},t.fn[s]=function(e){var i=t.type(e);return"object"===i?(this.length&&!t.data(this,s)&&(r=new o(this,e),this.each(function(){t.data(this,s,r)})),this):"string"===i&&"destroy"===e?(r.destroy(),this.each(function(){t.removeData(this,s)}),this):"number"===i&&e%1===0?(r.validNewPage(e)&&r.paginate(e),this):this}}(jQuery,window,document),define("jPages",["jquery"],function(){}),window.Modernizr=function(t,e,i){function n(t){y.cssText=t}function o(t,e){return typeof t===e}function s(t,e){return!!~(""+t).indexOf(e)}function r(t,e){for(var n in t){var o=t[n];if(!s(o,"-")&&y[o]!==i)return"pfx"==e?o:!0}return!1}function a(t,e,n){for(var s in t){var r=e[t[s]];if(r!==i)return n===!1?t[s]:o(r,"function")?r.bind(n||e):r}return!1}function l(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),s=(t+" "+w.join(n+" ")+n).split(" ");return o(e,"string")||o(e,"undefined")?r(s,e):(s=(t+" "+x.join(n+" ")+n).split(" "),a(s,e,i))}var c,u,d,p="2.6.2",h={},f=!0,m=e.documentElement,g="modernizr",v=e.createElement(g),y=v.style,_=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),b="Webkit Moz O ms",w=b.split(" "),x=b.toLowerCase().split(" "),C={},k=[],S=k.slice,T=function(t,i,n,o){var s,r,a,l,c=e.createElement("div"),u=e.body,d=u||e.createElement("body");if(parseInt(n,10))for(;n--;)a=e.createElement("div"),a.id=o?o[n]:g+(n+1),c.appendChild(a);return s=["&#173;",'<style id="s',g,'">',t,"</style>"].join(""),c.id=g,(u?c:d).innerHTML+=s,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(d)),r=i(c,t),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),m.style.overflow=l),!!r},M={}.hasOwnProperty;d=o(M,"undefined")||o(M.call,"undefined")?function(t,e){return e in t&&o(t.constructor.prototype[e],"undefined")}:function(t,e){return M.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=S.call(arguments,1),n=function(){if(this instanceof n){var o=function(){};o.prototype=e.prototype;var s=new o,r=e.apply(s,i.concat(S.call(arguments)));return Object(r)===r?r:s}return e.apply(t,i.concat(S.call(arguments)))};return n}),C.csstransforms3d=function(){var t=!!l("perspective");return t&&"webkitPerspective"in m.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e,i){t=9===e.offsetLeft&&3===e.offsetHeight}),t},C.csstransitions=function(){return l("transition")};for(var z in C)d(C,z)&&(u=z.toLowerCase(),h[u]=C[z](),k.push((h[u]?"":"no-")+u));return h.addTest=function(t,e){if("object"==typeof t)for(var n in t)d(t,n)&&h.addTest(n,t[n]);else{if(t=t.toLowerCase(),h[t]!==i)return h;e="function"==typeof e?e():e,"undefined"!=typeof f&&f&&(m.className+=" "+(e?"":"no-")+t),h[t]=e}return h},n(""),v=c=null,function(t,e){function i(t,e){var i=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return i.innerHTML="x<style>"+e+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function o(t){var e=g[t[f]];return e||(e={},m++,t[f]=m,g[m]=e),e}function s(t,i,n){if(i||(i=e),u)return i.createElement(t);n||(n=o(i));var s;return s=n.cache[t]?n.cache[t].cloneNode():h.test(t)?(n.cache[t]=n.createElem(t)).cloneNode():n.createElem(t),s.canHaveChildren&&!p.test(t)?n.frag.appendChild(s):s}function r(t,i){if(t||(t=e),u)return t.createDocumentFragment();i=i||o(t);for(var s=i.frag.cloneNode(),r=0,a=n(),l=a.length;l>r;r++)s.createElement(a[r]);return s}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(i){return v.shivMethods?s(i,t,e):e.createElem(i)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function l(t){t||(t=e);var n=o(t);return v.shivCSS&&!c&&!n.hasCSS&&(n.hasCSS=!!i(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),u||a(t,n),t}var c,u,d=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",m=0,g={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",c="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(i){c=!0,u=!0}}();var v={elements:d.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:d.shivCSS!==!1,supportsUnknownElements:u,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:l,createElement:s,createDocumentFragment:r};t.html5=v,l(e)}(this,e),h._version=p,h._prefixes=_,h._domPrefixes=x,h._cssomPrefixes=w,h.testProp=function(t){return r([t])},h.testAllProps=l,h.testStyles=T,h.prefixed=function(t,e,i){return e?l(t,e,i):l(t,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+k.join(" "):""),h}(this,this.document),function(t,e,i){function n(t){return"[object Function]"==g.call(t)}function o(t){return"string"==typeof t}function s(){}function r(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=v.shift();y=1,t?t.t?f(function(){("c"==t.t?p.injectCss:p.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):y=0}function l(t,i,n,o,s,l,c){function u(e){if(!h&&r(d.readyState)&&(_.r=h=1,!y&&a(),d.onload=d.onreadystatechange=null,e)){"img"!=t&&f(function(){w.removeChild(d)},50);for(var n in T[i])T[i].hasOwnProperty(n)&&T[i][n].onload()}}var c=c||p.errorTimeout,d=e.createElement(t),h=0,g=0,_={t:n,s:i,e:s,a:l,x:c};1===T[i]&&(g=1,T[i]=[]),"object"==t?d.data=i:(d.src=i,d.type=t),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,g)},v.splice(o,0,_),"img"!=t&&(g||2===T[i]?(w.insertBefore(d,b?null:m),f(u,c)):T[i].push(d))}function c(t,e,i,n,s){return y=0,e=e||"j",o(t)?l("c"==e?C:x,t,e,this.i++,i,n,s):(v.splice(this.i++,0,t),1==v.length&&a()),this}function u(){var t=p;return t.loader={load:c,i:0},t}var d,p,h=e.documentElement,f=t.setTimeout,m=e.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,_="MozAppearance"in h.style,b=_&&!!e.createRange().compareNode,w=b?h:m.parentNode,h=t.opera&&"[object Opera]"==g.call(t.opera),h=!!e.attachEvent&&!h,x=_?"object":h?"script":"img",C=h?"script":x,k=Array.isArray||function(t){return"[object Array]"==g.call(t)},S=[],T={},M={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};p=function(t){function e(t){var e,i,n,t=t.split("!"),o=S.length,s=t.pop(),r=t.length,s={url:s,origUrl:s,prefixes:t};for(i=0;r>i;i++)n=t[i].split("="),(e=M[n.shift()])&&(s=e(s,n));for(i=0;o>i;i++)s=S[i](s);return s}function r(t,o,s,r,a){var l=e(t),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=n(o)?o:o[t]||o[r]||o[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,o,s,r,a):(T[l.url]?l.noexec=!0:T[l.url]=1,s.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":i,l.noexec,l.attrs,l.timeout),(n(o)||n(c))&&s.load(function(){u(),o&&o(l.origUrl,a,r),c&&c(l.origUrl,a,r),T[l.url]=2})))}function a(t,e){function i(t,i){if(t){if(o(t))i||(d=function(){var t=[].slice.call(arguments);p.apply(this,t),h()}),r(t,d,e,0,c);else if(Object(t)===t)for(l in a=function(){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i}(),t)t.hasOwnProperty(l)&&(!i&&!--a&&(n(d)?d=function(){var t=[].slice.call(arguments);p.apply(this,t),h()}:d[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),h()}}(p[l])),r(t[l],d,e,l,c))}else!i&&h()}var a,l,c=!!t.test,u=t.load||t.both,d=t.callback||s,p=d,h=t.complete||s;i(c?t.yep:t.nope,!!u),u&&i(u)}var l,c,d=this.yepnope.loader;if(o(t))r(t,0,d,0);else if(k(t))for(l=0;l<t.length;l++)c=t[l],o(c)?r(c,0,d,0):k(c)?p(c):Object(c)===c&&a(c,d);else Object(t)===t&&a(t,d)},p.addPrefix=function(t,e){M[t]=e},p.addFilter=function(t){S.push(t)},p.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",d=function(){e.removeEventListener("DOMContentLoaded",d,0),e.readyState="complete"},0)),t.yepnope=u(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,i,n,o,l,c){var u,d,h=e.createElement("script"),o=o||p.errorTimeout;h.src=t;for(d in n)h.setAttribute(d,n[d]);i=c?a:i||s,h.onreadystatechange=h.onload=function(){!u&&r(h.readyState)&&(u=1,i(),h.onload=h.onreadystatechange=null)},f(function(){u||(u=1,i(1))},o),l?h.onload():m.parentNode.insertBefore(h,m)},t.yepnope.injectCss=function(t,i,n,o,r,l){var c,o=e.createElement("link"),i=l?a:i||s;o.href=t,o.rel="stylesheet",o.type="text/css";for(c in n)o.setAttribute(c,n[c]);r||(m.parentNode.insertBefore(o,m),f(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},define("modenizr",function(){}),function(){var t=jQuery.event,e=function(t,e,i,n){var o,s,r,a,l,c,u,d,p;for(o=0;o<e.length;o++)for(s=e[o],a=s.indexOf(".")<0,a||(u=s.split("."),s=u.shift(),d=new RegExp("(^|\\.)"+u.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),r=(t[s]||[]).slice(0),l=0;l<r.length;l++)c=r[l],p=a||d.test(c.namespace),p&&(n?c.selector===n&&i(s,c.origHandler||c.handler):null===n?i(s,c.origHandler||c.handler,c.selector):c.selector||i(s,c.origHandler||c.handler))};t.find=function(t,i,n){var o=($._data(t)||{}).events,s=[];return o?(e(o,i,function(t,e){s.push(e)},n),s):s},t.findBySelector=function(t,i){var n=$._data(t).events,o={},s=function(t,e,i){var n=o[t]||(o[t]={}),s=n[e]||(n[e]=[]);s.push(i)};return n?(e(n,i,function(t,e,i){s(i||"",t,e)},null),o):o},t.supportTouch="ontouchend"in document,$.fn.respondsTo=function(e){return this.length?t.find(this[0],$.isArray(e)?e:[e]).length>0:!1},$.fn.triggerHandled=function(t,e){return t="string"==typeof t?$.Event(t):t,this.trigger(t,e),t.handled},t.setupHelper=function(e,i,n){n||(n=i,i=null);var o=function(o){var s,r=o.selector||"";r?(s=t.find(this,e,r),s.length||$(this).delegate(r,i,n)):t.find(this,e,r).length||t.add(this,i,n,{selector:r,delegate:this})},s=function(o){var s,r=o.selector||"";r?(s=t.find(this,e,r),s.length||$(this).undelegate(r,i,n)):t.find(this,e,r).length||t.remove(this,i,n,{selector:r,delegate:this})};$.each(e,function(){t.special[this]={add:o,remove:s,setup:function(){},teardown:function(){}}})}}(jQuery),function(t){var e=/Phantom/.test(navigator.userAgent),i=!e&&"ontouchend"in document,n=i?"touchstart":"mousedown",o=i?"touchend":"mouseup",s=i?"touchmove":"mousemove",r=function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:t(e.target)}},a=t.event.swipe={delay:500,max:75,min:30};t.event.setupHelper(["swipe","swipeleft","swiperight","swipeup","swipedown"],n,function(e){function i(t){l&&(n=r(t),Math.abs(l.coords[0]-n.coords[0])>10&&t.preventDefault())}var n,l=r(e),c=e.delegateTarget||e.currentTarget,u=e.handleObj.selector,d=this;t(document.documentElement).bind(s,i).one(o,function(o){if(t(this).unbind(s,i),l&&n){var r=Math.abs(l.coords[0]-n.coords[0]),p=Math.abs(l.coords[1]-n.coords[1]),h=Math.sqrt(r*r+p*p);if(n.time-l.time<a.delay&&h>=a.min){var f=["swipe"];r>=a.min&&p<a.min?f.push(l.coords[0]>n.coords[0]?"swipeleft":"swiperight"):p>=a.min&&r<a.min&&f.push(l.coords[1]<n.coords[1]?"swipedown":"swipeup"),t.each(t.event.find(c,f,u),function(){this.call(d,e,{start:l,end:n})})}}l=n=void 0})})}(jQuery),define("jquerypp",["jquery"],function(){}),function(t,e,i){"use strict";var n=t(e),o=e.Modernizr;o.addTest("csstransformspreserve3d",function(){var t,i=o.prefixed("transformStyle"),n="preserve-3d";return i?(i=i.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"),o.testStyles("#modernizr{"+i+":"+n+";}",function(n,o){t=e.getComputedStyle?getComputedStyle(n,null).getPropertyValue(i):""}),t===n):!1});var s,r,a=t.event;s=a.special.debouncedresize={setup:function(){t(this).on("resize",s.handler)},teardown:function(){t(this).off("resize",s.handler)},handler:function(t,e){var i=this,n=arguments,o=function(){t.type="debouncedresize",a.dispatch.apply(i,n)};r&&clearTimeout(r),e?o():r=setTimeout(o,s.threshold)},threshold:150},t.BookBlock=function(e,i){this.$el=t(i),this._init(e)},t.BookBlock.defaults={orientation:"vertical",direction:"ltr",speed:1e3,easing:"ease-in-out",shadows:!0,shadowSides:.2,shadowFlip:.1,circular:!1,nextEl:"",prevEl:"",autoplay:!1,interval:3e3,onEndFlip:function(t,e,i){return!1},onBeforeFlip:function(t){return!1}},t.BookBlock.prototype={_init:function(e){this.options=t.extend(!0,{},t.BookBlock.defaults,e),this.$el.addClass("bb-"+this.options.orientation),this.$items=this.$el.children(".bb-item").hide(),this.itemsCount=this.$items.length,this.current=0,this.previous=-1,this.$current=this.$items.eq(this.current).show(),this.elWidth=this.$el.width();var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=i[o.prefixed("transition")]+".bookblock",this.support=o.csstransitions&&o.csstransforms3d&&o.csstransformspreserve3d,this._initEvents(),this.options.autoplay&&(this.options.circular=!0,this._startSlideshow())},_initEvents:function(){var e=this;""!==this.options.nextEl&&t(this.options.nextEl).on("click.bookblock touchstart.bookblock",function(){return e._action("next"),!1}),""!==this.options.prevEl&&t(this.options.prevEl).on("click.bookblock touchstart.bookblock",function(){return e._action("prev"),!1}),n.on("debouncedresize",function(){e.elWidth=e.$el.width()})},_action:function(t,e){this._stopSlideshow(),this._navigate(t,e)},_navigate:function(t,e){return this.isAnimating?!1:(this.options.onBeforeFlip(this.current),this.isAnimating=!0,this.$current=this.$items.eq(this.current),e!==i?this.current=e:"next"===t&&"ltr"===this.options.direction||"prev"===t&&"rtl"===this.options.direction?this.options.circular||this.current!==this.itemsCount-1?(this.previous=this.current,this.current=this.current<this.itemsCount-1?this.current+1:0):this.end=!0:("prev"===t&&"ltr"===this.options.direction||"next"===t&&"rtl"===this.options.direction)&&(this.options.circular||0!==this.current?(this.previous=this.current,this.current=this.current>0?this.current-1:this.itemsCount-1):this.end=!0),this.$nextItem=!this.options.circular&&this.end?this.$current:this.$items.eq(this.current),void(this.support?this._layout(t):this._layoutNoSupport(t)))},_layoutNoSupport:function(t){this.$items.hide(),this.$nextItem.show(),this.end=!1,this.isAnimating=!1;var e="next"===t&&this.current===this.itemsCount-1||"prev"===t&&0===this.current;this.options.onEndFlip(this.previous,this.current,e)},_layout:function(e){var i=this,n=this._addSide("left",e),o=this._addSide("middle",e),s=this._addSide("right",e),r=n.find("div.bb-overlay"),a=o.find("div.bb-flipoverlay:first"),l=o.find("div.bb-flipoverlay:last"),c=s.find("div.bb-overlay"),u=this.end?400:this.options.speed;if(this.$items.hide(),this.$el.prepend(n,o,s),o.css({transitionDuration:u+"ms",transitionTimingFunction:this.options.easing}).on(this.transEndEventName,function(n){if(t(n.target).hasClass("bb-page")){i.$el.children(".bb-page").remove(),i.$nextItem.show(),i.end=!1,i.isAnimating=!1;var o="next"===e&&i.current===i.itemsCount-1||"prev"===e&&0===i.current;i.options.onEndFlip(i.previous,i.current,o)}}),"prev"===e&&o.addClass("bb-flip-initial"),this.options.shadows&&!this.end){var d="next"===e?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"}:{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides},p="next"===e?{transition:"opacity "+this.options.speed/2+"ms linear"}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip},h="next"===e?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip}:{transition:"opacity "+this.options.speed/2+"ms linear"},f="next"===e?{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"};a.css(p),l.css(h),r.css(d),c.css(f)}setTimeout(function(){o.addClass(i.end?"bb-flip-"+e+"-end":"bb-flip-"+e),i.options.shadows&&!i.end&&(a.css({opacity:"next"===e?i.options.shadowFlip:0}),l.css({opacity:"next"===e?0:i.options.shadowFlip}),r.css({opacity:"next"===e?i.options.shadowSides:0}),c.css({opacity:"next"===e?0:i.options.shadowSides}))},25)},_addSide:function(e,i){var n;switch(e){case"left":n=t('<div class="bb-page"><div class="bb-back"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+("next"===i?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",102);break;case"middle":n=t('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+("next"===i?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-flipoverlay"></div></div></div><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+("next"===i?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-flipoverlay"></div></div></div></div>').css("z-index",103);break;case"right":n=t('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+("next"===i?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",101)}return n},_startSlideshow:function(){var t=this;this.slideshow=setTimeout(function(){t._navigate("next"),t.options.autoplay&&t._startSlideshow()},this.options.interval)},_stopSlideshow:function(){this.options.autoplay&&(clearTimeout(this.slideshow),this.options.autoplay=!1)},next:function(){this._action("ltr"===this.options.direction?"next":"prev")},prev:function(){this._action("ltr"===this.options.direction?"prev":"next")},jump:function(t){if(t-=1,t===this.current||t>=this.itemsCount||0>t)return!1;var e;e="ltr"===this.options.direction?t>this.current?"next":"prev":t>this.current?"prev":"next",this._action(e,t)},last:function(){this.jump(this.itemsCount)},first:function(){this.jump(1)},isActive:function(){return this.isAnimating;
},update:function(){var t=this.$items.eq(this.current);this.$items=this.$el.children(".bb-item"),this.itemsCount=this.$items.length,this.current=t.index()},destroy:function(){this.options.autoplay&&this._stopSlideshow(),this.$el.removeClass("bb-"+this.options.orientation),this.$items.show(),""!==this.options.nextEl&&t(this.options.nextEl).off(".bookblock"),""!==this.options.prevEl&&t(this.options.prevEl).off(".bookblock"),n.off("debouncedresize")}};var l=function(t){e.console&&e.console.error(t)};t.fn.bookblock=function(e){if("string"==typeof e){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var n=t.data(this,"bookblock");return n?t.isFunction(n[e])&&"_"!==e.charAt(0)?void n[e].apply(n,i):void l("no such method '"+e+"' for bookblock instance"):void l("cannot call methods on bookblock prior to initialization; attempted to call method '"+e+"'")})}else this.each(function(){var i=t.data(this,"bookblock");i?i._init():i=t.data(this,"bookblock",new t.BookBlock(e,this))});return this}}(jQuery,window),define("bookblock",["jquery"],function(){}),define("plugins/walnut-pluginloader",["underscore","underscorestring","jquery","jqueryui","backbone","marionette","syphon","text","jqueryvalidate","sidr","slimroll","breakpoints","mustache","spin","jqueryspin","bootstrap","mixitup","tablesorter","tablesorter_pager","moment","select2","datepicker","jquery_listnav","bridget","isotope","kinetic","kineticresize","checkbox","screwbuttons","panzer","panzerlist","timerplugin","countdowntimer","spinedit","bootbox","jPages","modenizr","jquerypp","bookblock"],function(){}),define("config/marionette",["marionette","mustache"],function(t,e){return _.extend(t.Application.prototype,{navigate:function(t,e){return null==e&&(e={}),Backbone.history.navigate(t,e)},getCurrentRoute:function(){var t;return t=Backbone.history.fragment,_.isEmpty(t)?null:t},startHistory:function(){return Backbone.history?Backbone.history.start():void 0},register:function(t,e){return null==this._registry&&(this._registry={}),this._registry[e]=t},unregister:function(t,e){return delete this._registry[e]},resetRegistry:function(){var t,e,i,n,o;n=this.getRegistrySize(),o=this._registry;for(e in o)t=o[e],t.region.close();return i="There were "+n+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(i,this._registry):console.log(i)},getRegistrySize:function(){return _.size(this._registry)},registerElement:function(t,e){return null==this._elementRegistry&&(this._elementRegistry={}),this._elementRegistry[e]=t},unregisterElement:function(t,e){return delete this._elementRegistry[e]},resetElementRegistry:function(){var t,e,i,n,o;n=this.getElementRegistrySize(),o=this._elementRegistry;for(e in o)t=o[e],t.layout.close();return i="There were "+n+" controllers in the registry, there are now "+this.getElementRegistrySize(),this.getElementRegistrySize()>0?console.warn(i,this._elementRegistry):console.log(i)},getElementRegistrySize:function(){return _.size(this._elementRegistry)},createEventObject:function(){return{vent:new Backbone.Wreqr.EventAggregator,command:new Backbone.Wreqr.Commands,reqres:new Backbone.Wreqr.RequestResponse}}}),_.extend(t.Region.prototype,{hide:function(){return this.$el.hide()},unhide:function(){return this.$el.show()}}),t.Renderer.render=function(t,i){return t||(t=""),"function"==typeof t&&(t=t()),e.to_html(t,i)},t.TemplateCache.prototype.loadTemplate=function(t){var e,i,n;if(n=t,!n||0===n.length)throw i="Could not find template: '"+t+"'",e=new Error(i),e.name="NoTemplateError",e;return n}}),define("config/backbone",["backbone"],function(t){var e;return _.extend(t.Model.prototype,{sync:function(e,i,n){var o,s,r,a,l,c,u,d;if(!this.name)throw new Error("'name' property not set for the model");switch(l={type:"POST",dataType:"json",data:{}},l.url=AJAXURL,o=e+"-"+this.name,l.data.action=o,e){case"read":l.type="GET",r=i.idAttribute,l.data[r]=i.get(r);break;case"create":l.data=_.defaults(i.toJSON(),l.data);break;case"update":a=null!=(c=n.onlyChanged)?c:!1,a?i.hasChanged()&&(l.data.changes={},_.each(i.changed,function(t,e){return l.data.changes[t]=this.get(t)},this)):l.data=_.defaults(i.toJSON(),l.data);break;case"delete":s=null!=(u=n.allData)?u:!0,s?l.data=_.defaults(i.toJSON(),l.data):(r=i.idAttribute,l.data[r]=i.get(r))}return d=n.xhr=t.ajax(_.extend(l,n)),i.trigger("request",i,d,n),("read"===e||"create"===e)&&(i._fetch=d),d},parse:function(t){return"OK"===t.code?t.data:t}}),_.extend(t.Collection.prototype,{parse:function(t){return"OK"===t.code?t.data:t}}),e=t.sync,t.sync=function(t,i,n){var o;return null==n&&(n={}),o=e(t,i,n),(!i._fetch&&"read"===t||!i._fetch&&"create"===t)&&(i._fetch=o),o}}),define("config/jquery-validate",["jquery","jqueryvalidate"],function(t){return t.validator.setDefaults({errorElement:"span",errorClass:"error",focusInvalid:!1,ignore:[],errorPlacement:function(e,i){var n,o;return t(i).prev(".select2-container").find(".select2-choice").addClass("error"),n=t(i).parent(".input-with-icon").children("i"),o=t(i).parent(".input-with-icon"),n.removeClass("icon-ok").addClass("icon-exclamation"),o.removeClass("success-control").addClass("error-control")},success:function(e,i){var n,o;return t(i).prev(".select2-container").find(".select2-choice").removeClass("error"),n=t(i).parent(".input-with-icon").children("i"),o=t(i).parent(".input-with-icon"),n.removeClass("icon-exclamation").addClass("icon-ok"),o.removeClass("error-control").addClass("success-control")}})});var slice=[].slice;define("config/underscore",["underscore","underscorestring"],function(t){return t.templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g},t.mixin(t.str.exports()),t.mixin({logAppMsg:function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],t.each(arguments,function(t,e){return console.log(t)})},logAppErr:function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],t.each(arguments,function(t,e){return console.log(t)})},idOrder:function(e){var i;return i=[],t.each(e,function(t,e){var n;return n=t.split("-"),i.push(parseInt(n[1]))}),i},stripslashes:function(t){return(t+"").replace(/\\(.?)/g,function(t,e){switch(e){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return e}})},convertHex:function(t,e){var i,n,o,s;return null==e&&(e=1),t=t.replace("#",""),o=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16),s="rgba("+o+","+n+","+i+","+e+")"},getOrdinal:function(e){var i,n;return parseFloat(e)!==parseInt(e)||t.isNaN(e)?e:(i=["th","st","nd","rd"],n=e%100,e+(i[(n-20)%10]||i[n]||i[0]))}})}),function(t,e){Array.prototype.map||(Array.prototype.map=function(t,e){var i,n,o;if(null==this)throw new TypeError(" this is null or not defined");var s=Object(this),r=s.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(i=e),n=new Array(r),o=0;r>o;){var a,l;o in s&&(a=s[o],l=t.call(i,a,o,s),n[o]=l),o++}return n});var i=t.detect=function(){var t=function(){},e={browser_parsers:[{regex:"^(Opera)/(\\d+)\\.(\\d+) \\(Nintendo Wii",family_replacement:"Wii",manufacturer:"Nintendo"},{regex:"(SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Camino",other:!0},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)",other:!0},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacment:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB",tablet:!0},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)",family_replacement:"Flock",other:!0},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Rockmelt",other:!0},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser",other:!0},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera Tablet",tablet:!0},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera Mini)/att/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(webOSBrowser)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(webOS)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(wOSBrowser).+TouchPad/(\\d+)\\.(\\d+)",family_replacement:"webOS TouchPad"},{regex:"(luakit)",family_replacement:"LuaKit",other:!0},{regex:"(Lightning)/(\\d+)\\.(\\d+)([ab]?\\d+[a-z]*)",family_replacement:"Lightning",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"rekonq",family_replacement:"Rekonq",other:!0},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror",other:!0},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror",other:!0},{regex:"(WeTab)-Browser",family_replacement:"WeTab",other:!0},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon",other:!0},{regex:"(YottaaMonitor)",family_replacement:"Yottaa Monitor",other:!0},{regex:"(Kindle)/(\\d+)\\.(\\d+)",family_replacement:"Kindle"},{regex:"(Symphony) (\\d+).(\\d+)",family_replacement:"Symphony",other:!0},{regex:"Minimo",family_replacement:"Minimo",other:!0},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UC Browser)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser",other:!0},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser",other:!0},{regex:"(Epiphany)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Epiphany",other:!0},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer",other:!0},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot",other:!0},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Android) Donut",v2_replacement:"2",v1_replacement:"1"},{regex:"(Android) Eclair",v2_replacement:"1",v1_replacement:"2"},{regex:"(Android) Froyo",v2_replacement:"2",v1_replacement:"2"},{regex:"(Android) Gingerbread",v2_replacement:"3",v1_replacement:"2"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(Obigo)InternetBrowser",other:!0},{regex:"(Obigo)\\-Browser",other:!0},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",other:!0},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon",other:!0},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0",other:!0},{regex:"(PLAYSTATION) (\\d+)",family_replacement:"PlayStation",manufacturer:"Sony"},{regex:"(PlayStation Portable)[^\\d]+(\\d+).(\\d+)",manufacturer:"Sony"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Bon Echo",other:!0},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(AvantGo) (\\d+).(\\d+)",other:!0},{regex:"(Avant)",v1_replacement:"1",other:!0},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/5\\.0",v2_replacement:"0",v1_replacement:"7",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser",manufacturer:"Nokia"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Nokia Series 40 Ovi Browser",manufacturer:"Nokia"},{regex:"(Nokia)[EN]?(\\d+)",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",tablet:!0,manufacturer:"Nokia"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",manufacturer:"RIM"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"Blackberry",manufacturer:"RIM"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)",other:!0},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer",manufacturer:"Palm"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Links) \\((\\d+)\\.(\\d+)",other:!0},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)",other:!0},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",other:!0,tablet:!0},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)",other:!0},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0",other:!0},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Teleca)",family_replacement:"Teleca Browser",other:!0},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Android) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android)\\-(\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v2_replacement:"2",os_v1_replacement:"1"},{regex:"(Android) Eclair",os_v2_replacement:"1",os_v1_replacement:"2"},{regex:"(Android) Froyo",os_v2_replacement:"2",os_v1_replacement:"2"},{regex:"(Android) Gingerbread",os_v2_replacement:"3",os_v1_replacement:"2"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(Windows Phone 6\\.5)"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(XBLWP7)",os_replacement:"Windows Phone OS"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows Phone 8)",os_replacement:"Windows Phone 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(Windows Phone OS) (\\d+)\\.(\\d+)"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Tizen)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"},{regex:"(CPU OS|iPhone OS) (\\d+)_(\\d+)(?:_(\\d+))?",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPad); Opera",tablet:!0,manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"(Debian)-(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Linux Mint)(?:/(\\d+))?",other:!0},{regex:"(Mandriva)(?: Linux)?/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Symbian[Oo][Ss])/(\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"(Series 60|SymbOS|S60)",os_replacement:"Symbian OS"},{regex:"(MeeGo)",other:!0},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry)",os_replacement:"Blackberry OS",manufacturer:"RIM"},{regex:"(webOS|hpwOS)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\d+)\\.(\\d+)"},{regex:"(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)"},{regex:"(Linux|BSD)",other:!0}],mobile_os_families:["Windows Phone 6.5","Windows CE","Symbian OS"],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",manufacturer:"HTC"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",manufacturer:"HTC"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC-([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(HTC)",manufacturer:"HTC"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",other:!0,manufacturer:"Sony"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; WOWMobile (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",manufacturer:"Nokia"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",manufacturer:"Nokia"},{regex:"Symbian",device_replacement:"Nokia",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"Blackberry Playbook",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry [0-9]+);",manufacturer:"RIM"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",manufacturer:"RIM"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",manufacturer:"Palm"},{regex:"(Touchpad)/(\\d+)\\.(\\d+)",device_replacement:"HP Touchpad",manufacturer:"HP"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",manufacturer:"HP"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",manufacturer:"Palm"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",manufacturer:"Palm"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",manufacturer:"HP"},{regex:"(Kindle Fire)",manufacturer:"Amazon"},{regex:"(Kindle)",manufacturer:"Amazon"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",tablet:!0,manufacturer:"Amazon"},{regex:"(iPad) Simulator;",manufacturer:"Apple"},{regex:"(iPad);",manufacturer:"Apple"},{regex:"(iPod);",manufacturer:"Apple"},{regex:"(iPhone) Simulator;",manufacturer:"Apple"},{regex:"(iPhone);",manufacturer:"Apple"},{regex:"Nexus\\ ([A-Za-z0-9\\-]+)",device_replacement:"Nexus $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",manufacturer:"Dell"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\_W\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",other:!0},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",other:!0},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Lenovo"},{regex:"Lenovo\\_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Levovo"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",manufacturer:"Motorola"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly\\_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc\\_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda\\_)",device_replacement:"Generic Feature Phone"},{regex:"(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks)",device_replacement:"Spider"}],mobile_browser_families:["Firefox Mobile","Opera Mobile","Opera Mini","Mobile Safari","webOS","IE Mobile","Playstation Portable","Nokia","Blackberry","Palm","Silk","Android","Maemo","Obigo","Netfront","AvantGo","Teleca","SEMC-Browser","Bolt","Iris","UP.Browser","Symphony","Minimo","Bunjaloo","Jasmine","Dolfin","Polaris","BREW","Chrome Mobile","Chrome Mobile iOS","UC Browser","Tizen Browser"]};t.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"],t.types=["browser","os","device"],t.regexes=e||function(){var e={};return t.parsers.map(function(t){e[t]=[]}),e}(),t.families=function(){var e={};return t.types.map(function(t){e[t]=[]}),e}();var i=Array.prototype,n=(Object.prototype,Function.prototype,i.forEach),o=(i.indexOf,function(t,e){for(var i={},n=0;n<e.length&&!(i=e[n](t));n++);return i}),s=function(t,e){r(t,function(t){r(e,function(e){delete t[e]})})},r=forEach=function(t,e,i){if(null!=t)if(n&&t.forEach===n)t.forEach(e,i);else if(t.length===+t.length)for(var o=0,s=t.length;s>o;o++)e.call(i,t[o],o,t);else for(var r in t)_.has(t,r)&&e.call(i,t[r],r,t)},a=function(t){return!(!t||"undefined"==typeof t||null==t)},l=function(t){var e="";return t=t||{},a(t)&&a(t.major)&&(e+=t.major,a(t.minor)&&(e+="."+t.minor,a(t.patch)&&(e+="."+t.patch))),e},c=function(t){t=t||{};var e=l(t);return e&&(e=" "+e),t&&a(t.family)?t.family+e:""};return t.parse=function(e){var i=function(e){return t.regexes[e+"_parsers"].map(function(t){function i(e){var i=e.match(n);if(!i)return null;var r={};return r.family=(o?o.replace("$1",i[1]):i[1])||"other",r.major=parseInt(s?s:i[2])||null,r.minor=i[3]?parseInt(i[3]):null,r.patch=i[4]?parseInt(i[4]):null,r.tablet=t.tablet,r.man=t.manufacturer||null,r}var n=new RegExp(t.regex),o=t[("browser"===e?"family":e)+"_replacement"],s=t.major_version_replacement;return i})},n=function(){},r=i("browser"),u=i("os"),d=i("device"),p=new n;p.source=e,p.browser=o(e,r),a(p.browser)?(p.browser.name=c(p.browser),p.browser.version=l(p.browser)):p.browser={},p.os=o(e,u),a(p.os)?(p.os.name=c(p.os),p.os.version=l(p.os)):p.os={},p.device=o(e,d),a(p.device)?(p.device.name=c(p.device),p.device.version=l(p.device)):p.device={tablet:!1,family:"Other"};var h={};t.regexes.mobile_browser_families.map(function(t){
h[t]=!0}),t.regexes.mobile_os_families.map(function(t){h[t]=!0});return"Spider"===p.browser.family?p.device.type="Spider":p.browser.tablet||p.os.tablet||p.device.tablet?p.device.type="Tablet":h.hasOwnProperty(p.browser.family)?p.device.type="Mobile":p.device.type="Desktop",p.device.manufacturer=p.browser.man||p.os.man||p.device.man||null,s([p.browser,p.os,p.device],["tablet","man"]),p},t}();"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.detect=i):t.detect=i,"function"==typeof define&&define.amd&&define("detect",["require"],function(t){return i})}(window),define("config/middle-layer",["detect","jquery"],function(t,e){function i(){}function n(){}var o,s,r;return r=0,s=function(){var e;return e=t.parse(navigator.userAgent),"Android"===e.os.family||"iOS"===e.os.family?"Mobile":"Desktop"},"Desktop"===s()&&e.getScript("wp-content/themes/walnut/walnut/dev/js/plugins/online.js"),window.onLineHandler=function(){r=1},window.offLineHandler=function(){r=0},window.isOnline=function(){return 1===r?!0:!0},o=function(){return _.isUndefined(navigator.connection)?!0:!0},document.addEventListener("online",i,!1),document.addEventListener("offline",n,!1),e.middle_layer=function(t,i,n){switch(s()){case"Desktop":return isOnline()?e.post(t,i,n,"json"):"connection_error";case"Mobile":return o()?e.post(t,i,n,"json"):"connection_error"}}});var indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};define("config/jquery",["jquery","underscore"],function(t,e){var i;return t(document).on("click",".grid .tools .collapse, .grid .tools .expand, .grid-body-toggle",function(e){var i,n;return i=t(e.target).parents(".grid").children(".grid-body"),i.slideToggle(200),n=t(e.target).parents(".grid").find(".tools a"),t(n).hasClass("collapse")?t(n).removeClass("collapse").addClass("expand"):t(n).removeClass("expand").addClass("collapse")}),t(document).on("click",".goto-prev-page",function(){return window.history.back()}),t.fn.isEmptyColumn=function(t){return null==t&&(t={}),0===this.children(".element-wrapper").length},t.fn.canBeDeleted=function(){var i,n;return i=this.children(".column"),n=!0,e.each(i,function(e){return function(e,i){return t(e).isEmptyColumn()?void 0:n=!1}}(this)),n},t.showHeaderAndLeftNav=function(){return e.isEmpty(App.headerRegion.$el)&&App.execute("show:headerapp",{region:App.headerRegion}),e.isEmpty(App.leftNavRegion.$el)&&App.execute("show:leftnavapp",{region:App.leftNavRegion}),t(".page-content").removeClass("expand-page")},t.fn.removeAllAttr=function(){var i;return i=["class","tabindex","contenteditable","id","spellcheck","role","aria-label","title","aria-describedby","style"],e.each(this,function(n){return e.each(i,function(e){return t(n).removeAttr(e)})})},t.fn.center=function(e){return e=e?this.parent():window,this.css({position:"fixed",top:(t(e).height()-this.outerHeight())/2+t(e).scrollTop()+"px",left:(t(e).width()-this.outerWidth())/2+t(e).scrollLeft()+"px"}),t(window).on("scroll",function(i){return function(){return i.css({top:(t(e).height()-i.outerHeight())/2+t(e).scrollTop()+"px"})}}(this)),this},t.timeMinSecs=function(t){var e,i,n,o,s;return i=0,s=t,n=parseInt(t/60),n>59&&(i=parseInt(n/60),n=parseInt(n%60)),o=parseInt(s%60),e="",i>0&&(e=i+"h "),e+=n+"m "+o+"s"},t(document).on("keyup",".autogrow",function(e){return function(e){var i;return i=t(e.target),t(i).prop("clientHeight")<t(i).prop("scrollHeight")&&t(i).css({height:t(i).prop("scrollHeight")+"px"}),t(i).prop("clientHeight")<t(i).prop("scrollHeight")?t(i).css({height:2*t(i).prop("scrollHeight")-t(i).prop("clientHeight")+"px"}):void 0}}(this)),t.fn.selectSelectableElements=function(e){return t(".ui-selected",this).not(e).removeClass("ui-selected"),t(e).not(".ui-selected").addClass("ui-selected")},i=e.debounce(function(){var e,i;return e=t(window).height(),i=e-40,t(".aj-upper-content").css("min-height",i),t(".aj-upper-content").children().css("min-height",i)},30),t(document).ready(function(){return i()}),t(window).resize(i),t.toggleCheckAll=function(e,i){var n,o,s,r,a,l;if(null==i&&(i=[]),e.find("#check_all").is(":checked")){for(o=e.find(".tab_checkbox"),l=[],s=0,r=o.length;r>s;s++)n=o[s],a=parseInt(n.value),indexOf.call(i,a)<0?l.push(t(n).trigger("click").prop("checked",!0)):l.push(void 0);return l}return e.find(".tab_checkbox").removeAttr("checked")},t.getCheckedItems=function(i){var n;return n=e.chain(i.find(".tab_checkbox")).map(function(e){return t(e).is(":checked")?t(e).val():void 0}).compact().value()},t.allowRoute=function(t){var e;if(e=App.request("get:user:model"),"textbooks"===t||"content-pieces"===t||"add-module"===t||"edit-module"===t||"view-module"===t||"module-list"===t||"dummy-module"===t||"view-quiz"===t||"create-quiz"===t||"edit-quiz"===t||"quiz-list"===t||"dummy-quiz"===t||"quiz-report"===t||"dashboard"===t||"users"===t)return e.get("ID")?!0:(App.navigate("login",!0),!1);switch(t){case"login":if(!e.get("ID"))return!0;break;case"admin/view-all-modules":if(App.request("current:user:can","administrator")||App.request("current:user:can","school-admin"))return!0}}}),define("config/textbook-filters",["jquery","underscore"],function(t,e){return t.showTextbookFilters=function(t){var e,i,n;return null==t&&(t={}),i="",t.textbooks&&(n="",t.textbooks.each(function(t){return n+="<option value="+t.get("term_id")+">"+t.get("name")+"</option>"}),i+='<select class="textbook-filter select2-filters" id="textbooks-filter"> <option value="">All Textbooks</option>'+n+'</select> <select class="textbook-filter select2-filters" id="chapters-filter"> <option value="">All Chapters</option> </select>'),t.chapters&&(e="",t.chapters.each(function(t){return e+="<option value="+t.get("term_id")+">"+t.get("name")+"</option>"}),i+='<select class="textbook-filter select2-filters" id="chapters-filter"> <option value="">All Chapters</option>'+e+"</select>"),i+='<select class="textbook-filter select2-filters" id="sections-filter"> <option value="">All Sections</option> </select> <select class="textbook-filter select2-filters" id="subsections-filter"> <option value="">All Sub Sections</option> </select>'},t.populateTextbooks=function(t,i){var n,o;return i.find("#textbooks-filter, #chapters-filter,#sections-filter,#subsections-filter").html(""),o=i.find("#textbooks-filter"),n=i.find("#chapters-filter"),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0?(e.each(t,function(t){return function(t,e){var i,n;return console.log(t.get("name")),i=t.get("name"),i=i.split("("),n=i[0],console.log(t.get("name")),o.append('<option value="'+t.get("term_id")+'">'+n+"</option>")}}(this)),o.select2().select2("val",e.first(t).get("term_id"))):o.select2("data",null)},t.populateChapters=function(t,i,n){var o,s,r;return null==n&&(n=""),i.find("#chapters-filter,#sections-filter,#subsections-filter").html(""),o=i.find("#chapters-filter"),s=i.find("#textbooks-filter").val(),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0&&s?(o.select2("data",{text:"Select Chapter"}),o.append('<option value="">All Chapters</option>'),e.each(t,function(t){return function(t,e){return o.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),n?o.select2().select2("val",n):void 0):(r="All",o.select2("data",{text:r+" chapters"}),i.find("#sections-filter").select2("data",{text:r+" Sections"}),i.find("#subsections-filter").select2("data",{text:r+" Sub Sections"}))},t.populateSections=function(t,i,n){var o,s,r;return null==n&&(n=[]),i.find("#sections-filter,#subsections-filter").html(""),o=i.find("#sections-filter"),s=i.find("#chapters-filter").val(),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0&&s?(o.select2("data",{text:"Select Section"}),o.append('<option value="">All Sections</option>'),e.each(t,function(t){return function(t,e){return o.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),e.isArray(n)&&(n=e.flatten(e.compact(n))),e.isEmpty(n)?void 0:o.select2().select2("val",n)):(r="All",o.select2("data",{text:r+" Sections"}),i.find("#subsections-filter").select2("data",{text:r+" Sub Sections"}))},t.populateSubSections=function(t,i,n){var o,s,r;return null==n&&(n=[]),s=i.find("#subsections-filter"),s.html(""),o=i.find("#sections-filter").val(),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0&&o?(s.select2("data",{text:"Select Sub Section"}),s.append('<option value="">All Sections</option>'),e.each(t,function(t){return function(t,e){return s.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),e.isArray(n)&&(n=e.flatten(e.compact(n))),e.isEmpty(n)?void 0:s.select2().select2("val",n)):(r="All",s.select2("data",{text:r+" Sub Sections"}))},t.populateChaptersOrSections=function(t,i,n){return null==n&&(n=[]),i.html(""),t instanceof Backbone.Collection&&(t=t.models),e.size(t)>0?(e.each(t,function(t){return function(t,e){return i.append('<option value="'+t.get("term_id")+'">'+t.get("name")+"</option>")}}(this)),e.isArray(n)&&(n=e.flatten(e.compact(n))),i.select2().select2("val",n)):void 0},t.filterTableByTextbooks=function(i,n){var o,s,r,a,l,c,u,d,p,h;return c=i.$el.find("select.textbook-filter"),"teaching-modules"===n?l=App.request("get:content:modules:repository"):"student-training"===n?l=App.request("get:student:training:modules:repository"):"quiz"===n?(l=App.request("get:quiz:repository"),console.log(l)):l=App.request("get:content:pieces:repository"),u=e.map(c,function(t,e){var i;return i="",isNaN(t.value)||(i=t.value),i}),u=e.compact(u),u=t("#textbooks-filter").val(),console.log(u),r=i.$el.find("#content-type-filter").val(),s=i.$el.find("#content-status-filter").val(),o=i.$el.find("#content-post-status-filter").val(),"any"===o&&(o=""),h=i.$el.find("#quiz-type-filter").val(),console.log(h),a=parseInt(i.$el.find("#difficulty-level-filter").val()),r&&(console.log("content_type"),l.reset(l.where({content_type:r}))),s&&(console.log("content_status"),l.reset(l.where({status:s}))),o&&(console.log("content_post_status"),l.reset(l.where({post_status:o}))),h&&(console.log("quiz_type"),l.reset(l.where({quiz_type:h}))),a&&(console.log("difficulty_level"),l.reset(l.where({difficulty_level:a}))),p=l.models,e.size(u)>0?(d=e.filter(p,function(t){return function(t){var i,n;return i="",n=e.flatten(t.get("term_ids")),console.log(u),i=t}}(this)),console.log(d)):d=p,d}}),define("text!config/marionette/templates/modal.html",[],function(){return'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" data-dismiss="modal" aria-hidden="true" class="close">&times;</button>\n      <h4 class="modal-title">{{&modal_title}}</h4>\n    </div>\n    <div class="modal-body"></div>\n  </div>\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("config/marionette/dialog-region",["marionette","mustache","text!config/marionette/templates/modal.html"],function(t,e,i){return t.Region.Dialog=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=i,n.prototype.open=function(t){var n,o;return n=t.dialogOptions?t.dialogOptions:{},n=this._getOptions(n),o=e.to_html(i,n),this.$el.html(o),this.$el.find(".modal-body").append(t.el),this.$el.addClass(n.modal_size+" modal")},n.prototype.onShow=function(t){return this.setupBindings(t),this.$el.modal(),this.$el.modal("show"),this.$el.on("hidden.bs.modal",function(t){return function(){return t.clearDialog()}}(this))},n.prototype.closeDialog=function(){return this.$el.modal("hide")},n.prototype._getOptions=function(t){return _.defaults(t,{modal_title:"",modal_size:"wide-modal"})},n.prototype.setupBindings=function(t){return this.listenTo(t,"dialog:close",this.closeDialog),this.listenTo(t,"dialog:resize",this.resizeDialog)},n.prototype.clearDialog=function(){return this.close(),this.$el.empty()},n}(t.Region)}),define("config/walnut-configloader",["config/marionette","config/backbone","config/jquery-validate","config/underscore","config/middle-layer","config/jquery","config/textbook-filters","config/marionette/dialog-region"],function(){}),define("app",["marionette"],function(t){return window.App=new t.Application,App.addRegions({leftNavRegion:"#left-nav-region",headerRegion:"#header-region",mainContentRegion:"#main-content-region",popupRegion:"#dialog-region",dialogRegion:t.Region.Dialog.extend({el:"#dialog-region"}),loginRegion:"#login-region",breadcrumbRegion:"#breadcrumb-region"}),App.rootRoute="",App.loginRoute="login",App.reqres.setHandler("default:region",function(){return App.mainContentRegion}),App.commands.setHandler("when:fetched",function(t,e){var i;return i=_.chain([t]).flatten().pluck("_fetch").value(),$.when.apply($,i).done(function(){return e()})}),App.commands.setHandler("register:instance",function(t,e){return App.register(t,e)}),App.commands.setHandler("unregister:instance",function(t,e){return App.unregister(t,e)}),App.on("initialize:after",function(t){var e;return App.startHistory(),"undefined"!=typeof USER&&null!==USER&&USER.ID?(e=App.request("get:user:model"),App.execute("show:headerapp",{region:App.headerRegion}),App.execute("show:leftnavapp",{region:App.leftNavRegion}),App.execute("show:breadcrumbapp",{region:App.breadcrumbRegion}),"login"===this.getCurrentRoute()&&App.vent.trigger("show:dashboard"),App.loginRegion.close()):App.vent.trigger("show:login")}),App.vent.on("show:dashboard",function(t){return function(t){return(App.request("current:user:can","administrator")||App.request("current:user:can","school-admin")||App.request("current:user:can","content-creator"))&&App.navigate("textbooks",{trigger:!0}),App.request("current:user:can","teacher")&&App.navigate("teachers/dashboard",{trigger:!0}),App.request("current:user:can","student")?($("body").hide(),window.location.href=SITEURL+"/dashboard-student",!1):(App.execute("show:breadcrumbapp",{region:App.breadcrumbRegion}),App.execute("show:headerapp",{region:App.headerRegion}),App.execute("show:leftnavapp",{region:App.leftNavRegion}),Pace.on("hide",function(){return $("#site_main_container").addClass("showAll")}))}}(this)),App.vent.on("show:login",function(){return App.leftNavRegion.close(),App.headerRegion.close(),App.mainContentRegion.close(),App.breadcrumbRegion.close(),this.rootRoute="login",App.navigate(this.rootRoute,{trigger:!0})}),App});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,slice=[].slice;define("controllers/region-controller",["marionette","app"],function(t,e){var i;return i=function(t){function i(t){null==t&&(t={}),this.region=t.region||e.request("default:region"),this._instance_id=_.uniqueId("controller"),e.commands.execute("register:instance",this,this._instance_id),i.__super__.constructor.call(this,t)}return extend(i,t),i.prototype.close=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],delete this.region,delete this.options,e.commands.execute("unregister:instance",this,this._instance_id),i.__super__.close.call(this,t)},i.prototype.show=function(t,e){return null==e&&(e={}),_.defaults(e,{loading:!1,region:this.region}),this._setMainView(t),this._manageView(t,e)},i.prototype._setMainView=function(t){return this._mainView?void 0:(this._mainView=t,this.listenTo(t,"close",this.close))},i.prototype._manageView=function(t,i){return i.loading?e.commands.execute("show:loading",t,i):i.region?i.region.show(t):void 0},i}(t.Controller)}),define("text!apps/login/templates/login.html",[],function(){return'<link rel="stylesheet" href="/wp-content/themes/walnut/walnut_student_assets/dev/css/bootstrap.min.css">\n<link rel="stylesheet" href="/wp-content/themes/walnut/walnut_student_assets/dev/css/style.css">\n<link rel="stylesheet" href="/wp-content/themes/walnut/walnut_student_assets/dev/css/font-awesome.min.css">\n\n<header>\n    <nav class="navbar navbar-default wallnut-nav">\n        <div class="container-fluid signin-header">\n            <div class="logo">\n                <img src="/wp-content/themes/walnut/walnut_student_assets/dev/images/walnut-logo.png" class="img-responsive center-block" alt="">\n            </div>\n            <div class="slogan">\n                <img src="/wp-content/themes/walnut/walnut_student_assets/dev/images/walnut-tagline.png" class="img-responsive center-block" alt="">\n            </div>\n        </div>\n    </nav>\n</header>\n<div class="create-ac-card">\n    <div class="create-ac-wrapper">\n        <div class="container-fluid">\n            <div class="row">\n                <div class="col-sm-10 col-sm-offset-1 col-lg-6 col-lg-offset-3">\n                    <form id="login-form" class="login-form" action="" method="post" novalidate="novalidate">\n                        <div class="school-login">\n                            <h4>Login to your account</h4>\n                            <hr>\n                            <div class="wrapper">\n                            <div class="school-username">\n                                <h5>Username :</h5>\n                                <div class="mat-holder">\n                                    <label for="username" class="mat-label">Username</label>\n                                    <input type="text" name="txtusername" id="txtusername"  class="mat-input" required>\n                                </div>\n                            </div>\n                            <div class="school-password">\n                                <h5>Password :</h5>\n                                <div class="mat-holder">\n                                    <label for="password" class="mat-label">Password</label>\n                                    <input name="txtpassword" id="txtpassword"  type="password" class="mat-input" required>\n                                </div>\n                            </div>\n                            </div>\n                            <div class="update">\n                            <a class="reset-password">Trouble logging in?</a>\n                                <button id="login-submit" type="submit" class="btn">\n                                Login\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<style>\n  .create-ac-card .create-ac-wrapper {\n    top: -30px;\n  }\n  .page-content .content {\n    padding-top:0px;\n}\n</style>\n<!--kapil-->'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/login/resetpasswordapp",["app","controllers/region-controller"],function(t,e){return t.module("RestPasswordApp",function(t,i){var n;return t.Controller=function(t){function e(){return this._getRestPasswordView=bind(this._getRestPasswordView,this),this.resetUserPassword=bind(this.resetUserPassword,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){return this.view=this._getRestPasswordView(),this.show(this.view),this.listenTo(this.view,"close:popup:dialog",function(){return this.region.closeDialog()}),this.listenTo(this.view,"reset:user:password",this.resetUserPassword)},e.prototype.resetUserPassword=function(t){var e;return console.log(t),e=$.middle_layer(AJAXURL+"?action=reset-user-password",{email:t},function(e){return function(i){return i.error?e.view.triggerMethod("reset:error",i.error):e.view.triggerMethod("reset:mail:sent",t)}}(this)),"connection_error"===e?this.view.triggerMethod("connection:fail"):void 0},e.prototype._getRestPasswordView=function(){return new n},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row"> <div id="reset-password-form"> <form> <div class="col-md-12"> <label for="name">Your Email Address:</label> <input required="required" id="email" name="email" type="email" class="form-control"> <div class="error"></div> <button id="reset-password" class="btn btn-success btn-cons pull-right m-t-10" type="submit">Reset Password </button> </div> </form> </div> <div id="success-div" class="none"> <div class="col-md-12"> <div id="success_msg"></div> <button data-dismiss="modal" class="btn btn-success btn-cons pull-right m-t-10">OK</button> </div> </div> </div>',e.prototype.initialize=function(){return this.dialogOptions={modal_title:"Reset Password",modal_size:"small"}},e.prototype.events=function(){return{"click #reset-password":"validateEmail"}},e.prototype.validateEmail=function(t){var e;return t.preventDefault(),this.$el.find("form").valid()?(e=this.$el.find("#email").val(),this.$el.find(".error").html(""),this.trigger("reset:user:password",e)):this.$el.find(".error").html("Please enter a valid email address")},e.prototype.onResetMailSent=function(t){return this.$el.find("#reset-password-form").remove(),this.$el.find("#success-div").show(),this.$el.find("#success_msg").html("Successfully sent password reset link to "+t)},e.prototype.onResetError=function(t){return this.$el.find(".error").html(t)},e}(Marionette.CompositeView),i.commands.setHandler("show:reset:password:popup",function(e){return new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/login/logincontroller",["app","controllers/region-controller","text!apps/login/templates/login.html","bootbox","apps/login/resetpasswordapp"],function(t,e,i,n){return t.module("LoginApp.Controller",function(t,n){var o;return t.LoginController=function(t){function e(){return this.authenticateUser=bind(this.authenticateUser,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.view=t=this._getLoginView(),n.leftNavRegion.close(),n.headerRegion.close(),n.mainContentRegion.close(),n.breadcrumbRegion.close(),this.listenTo(t,"authenticate:user",this.authenticateUser),this.listenTo(t,"reset:password",function(){return n.execute("show:reset:password:popup",{region:n.dialogRegion})}),this.show(t,{loading:!0})},e.prototype._getLoginView=function(){return new o},e.prototype.authenticateUser=function(t){var e;return e=$.middle_layer(AJAXURL+"?action=get-user-profile",{data:t},function(t){return function(e){var i;return e.error?t.view.triggerMethod("login:fail",e):(i=n.request("get:user:model"),i.set(e.login_details),e.blog_details.site_url!==SITEURL?window.location=e.blog_details.site_url:(t.view.close(),n.vent.trigger("show:dashboard"),i.attributes.caps.student?($("body").hide(),window.location.href=SITEURL+"/dashboard-student"):void 0))}}(this)),"connection_error"===e?this.view.triggerMethod("connection:fail"):void 0},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.className="",e.prototype.events={"click #login-submit":"submitLogin","click .reset-password":function(){return this.trigger("reset:password")}},e.prototype.onShow=function(){return $(".mat-input").focus(function(){$(this).parent().addClass("is-active is-completed")}),$(".mat-input").focusout(function(){""===$(this).val()&&$(this).parent().removeClass("is-completed"),$(this).parent().removeClass("is-active")}),$(".mat-input").each(function(t){""!==$(this).val()&&$(this).parent().addClass("is-active is-completed")}),$("body").addClass("error-body no-top"),$(".page-content").addClass("condensed")},e.prototype.submitLogin=function(t){var e;return t.preventDefault(),this.$el.find("form").valid()?(this.$el.find("#checking_login").remove(),this.$el.find("#login-submit").append('<i id="checking_login" class="fa fa-spinner fa fa-1x fa-spin"></i>'),e=Backbone.Syphon.serialize(this),this.trigger("authenticate:user",e)):void 0},e.prototype.onLoginFail=function(t){return this.$el.find("#checking_login, #invalid_login").remove(),this.$el.find("#login-form").before('<div id="invalid_login" class="alert alert-error"><span class="fa fa-warning"></span> '+t.error+"</div>")},e.prototype.onConnectionFail=function(){var t;return t="Connection could not be established. Please try again.",this.$el.find("#checking_login, #invalid_login").remove(),this.$el.find("#login-form").before('<div id="invalid_login" class="alert alert-error">'+t+"</div>")},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/login/loginapp",["app","apps/login/logincontroller"],function(t){return t.module("LoginApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={login:"showLogin"},e}(Marionette.AppRouter),i={showLogin:function(){return $.allowRoute("login")?new t.Controller.LoginController({region:e.loginRegion}):void 0}},t.on("start",function(){return new n({controller:i})})})}),define("text!apps/header/left/templates/left.html",[],function(){return'<!-- BEGIN HEADER LEFT SIDE SECTION -->\n	<!-- BEGIN SLIM NAVIGATION TOGGLE -->\n	<ul class="nav quick-section">\n		<li class="quicklinks">\n			<a id="layout-condensed-toggle" class="" style="cursor:pointer" >\n				<div class="iconset top-menu-toggle-dark"></div>\n			</a>\n		</li>\n	</ul>\n	<!-- BEGIN HEADER QUICK LINKS -->\n	<ul class="nav quick-section">\n\n	</ul>\n	<!-- BEGIN HEADER QUICK LINKS -->\n									\n			<!-- END HEADER LEFT SIDE SECTION -->'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/header/left/leftapp",["app","controllers/region-controller","text!apps/header/left/templates/left.html"],function(t,e,i){return t.module("LeftHeaderApp.Controller",function(t,n){var o;return t.LeftHeaderController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.view=t=this._getLeftHeaderView(),this.show(t)},e.prototype._getLeftHeaderView=function(){return new o},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.className="pull-left",e.prototype.events={"click #layout-condensed-toggle":"toggleLeftSidebar"},e.prototype.toggleLeftSidebar=function(){return"1"===$("#main-menu").attr("data-inner-menu")?console.log("Menu is already condensed"):$("#main-menu").hasClass("mini")?($("body").removeClass("grey"),$("#main-menu").removeClass("mini"),$(".page-content").removeClass("condensed"),$(".scrollup").removeClass("to-edge"),$(".header-seperation").css("width","250px"),$(".header-seperation").css("height","61px"),$(".footer-widget").show()):($("body").addClass("grey"),$("#main-menu").addClass("mini"),$(".page-content").addClass("condensed"),$(".scrollup").addClass("to-edge"),$(".header-seperation").css("width","0"),$(".footer-widget").hide())},e}(Marionette.ItemView),n.commands.setHandler("show:leftheaderapp",function(e){return null==e&&(e={}),new t.LeftHeaderController(e)})})}),define("text!apps/header/right/templates/right.html",[],function(){return'<!-- BEGIN HEADER RIGHT SIDE SECTION -->\n	<!-- BEGIN HEADER NAV BUTTONS -->\n	<ul class="nav quick-section2" id="gears-pc">\n		<!-- BEGIN SETTINGS -->\n		<li class="quicklinks"> \n			<a id="user-options" href="#" class="dropdown-toggle pull-right" data-toggle="dropdown">						\n				<div class="iconset top-settings-dark"></div> 	\n			</a>\n			<ul aria-labelledby="user-options" role="menu" class="dropdown-menu pull-right">\n				{{#syncUrl}}\n                	<li><a href="{{syncUrl}}"><span class="fa fa-refresh"></span>&nbsp;&nbsp;Sync</a></li>\n                {{/syncUrl}}\n				<li><a id="user_logout" href="javascript://"><i class="fa fa-power-off"></i>&nbsp;&nbsp;Log Out</a></li>\n			</ul>\n		</li>\n		<!-- END SETTINGS -->\n		 \n	</ul>\n	<!-- END HEADER NAV BUTTONS -->\n<!-- END HEADER RIGHT SIDE SECTION -->\n\n<ul class="nav pull-right notifcation-center">\n\n    <!-- BEGIN MOBILE CHAT TOGGLER -->\n    <li style="display:none" id="portrait-chat-toggler" class="dropdown">\n        <a class="chat-menu-toggle" href="#sidr">\n            <div class="iconset top-chat-white"></div>\n        </a>\n    </li>\n    <!-- END MOBILE CHAT TOGGLER -->\n</ul>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/header/right/rightapp",["app","controllers/region-controller","text!apps/header/right/templates/right.html"],function(t,e,i){return t.module("RightHeaderApp.Controller",function(t,n){var o;return t.RightHeaderController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.view=t=this._getRightHeaderView(),this.show(t),this.listenTo(this.view,{"user:logout":function(){return this.region.trigger("user:logout")}})},e.prototype._getRightHeaderView=function(){return new o},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.className="pull-right",e.prototype.events={"click #user_logout":function(){return this.trigger("user:logout")}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),"undefined"!=typeof IS_STANDALONE_SITE&&null!==IS_STANDALONE_SITE&&IS_STANDALONE_SITE===!0&&n.request("current:user:can","sync_site_content")&&(t.syncUrl=SITEURL+"/sync-site-content"),t},e}(Marionette.ItemView),n.commands.setHandler("show:rightheaderapp",function(e){return null==e&&(e={}),new t.RightHeaderController(e)})})}),define("text!apps/header/templates/header.html",[],function(){return'<div class="header navbar navbar-inverse"> \n	<!-- BEGIN TOP NAVIGATION BAR -->\n	<div class="navbar-inner">\n		<!-- BEGIN NAVIGATION HEADER -->\n		<div class="header-seperation"> \n			<!-- BEGIN MOBILE HEADER -->\n\n			<ul style="display:none" id="mobile-menu-toggle-wrapper" class="nav pull-left notifcation-center">	\n				<li class="dropdown">\n					<a class="btn btn-small btn-primary" href="#teachers/dashboard" id="main-menu-toggle"><span class="small-text">Dashboard</span>\n					</a>\n				</li>		 \n			</ul>\n\n\n			<!-- END MOBILE HEADER -->\n			<!-- BEGIN LOGO -->	\n			<a href="#">\n				<img width="192" height="38" data-src-retina="{{logourl}}" data-src="{{logourl}}" alt="" class="logo" src="{{logourl}}">\n			</a>\n			<!-- END LOGO --> \n\n			<ul class="nav quick-section2 pull-right notifcation-center" id="gears-mob">\n				<li class="quicklinks"> \n					<a id="user-options" href="#" class="dropdown-toggle pull-right" data-toggle="dropdown">	\n						<span class="fa fa-gears"></span>	\n					</a>\n					<ul aria-labelledby="user-options" role="menu" class="dropdown-menu pull-right">\n						<li><a href="#sync"><span class="fa fa-refresh"></span>&nbsp;&nbsp;Sync</a></li>\n						<li class="divider"></li>                \n						<li><a id="user_logout" href="javascript://"><span class="fa fa-power-off"></span>&nbsp;&nbsp;Log Out</a></li>\n					</ul>\n				</li>\n			</ul>\n			<!-- END LOGO NAV BUTTONS -->\n		</div>\n		<!-- END NAVIGATION HEADER -->\n		<!-- BEGIN CONTENT HEADER -->\n		<div class="header-quick-nav"> \n			<div id="header-left"></div>\n			<div id="header-right"></div>\n			\n		</div> \n		<!-- END CONTENT HEADER --> \n	</div>\n	<!-- END TOP NAVIGATION BAR --> \n</div>';
});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/header/headerapp",["app","controllers/region-controller","apps/header/left/leftapp","apps/header/right/rightapp","text!apps/header/templates/header.html"],function(t,e,i,n,o){return t.module("HeaderApp.Controller",function(t,i){var n;return t.HeaderController=function(t){function e(){return this._getHeaderView=bind(this._getHeaderView,this),this._showLeftRightViews=bind(this._showLeftRightViews,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.layout=t=this._getHeaderView(),this.listenTo(t,"show",this._showLeftRightViews),this.show(t),this.listenTo(this.layout.rightRegion,"user:logout",this._logoutCurrentUser),this.listenTo(t,"user:logout",this._logoutCurrentUser)},e.prototype._logoutCurrentUser=function(){return $.post(AJAXURL+"?action=logout_user",function(t){return function(t){var e;return t.error?console.log(t):(e=i.request("get:user:model"),e.clear(),location.href=MAIN_SITE+"/login")}}(this))},e.prototype._showLeftRightViews=function(){return i.execute("show:leftheaderapp",{region:this.layout.leftRegion}),i.execute("show:rightheaderapp",{region:this.layout.rightRegion})},e.prototype._getHeaderView=function(){return new n({templateHelpers:{show_user_name:function(){var t,e;return t=i.request("get:user:model"),e=t.get("display_name")}}})},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=o,e.prototype.className="header navbar navbar-inverse",e.prototype.regions={leftRegion:"#header-left",rightRegion:"#header-right"},e.prototype.events={"click #logout":function(){return $.sidr("close","walnutProfile"),this.trigger("user:logout")}},e.prototype.serializeData=function(){var t;return t=e.__super__.serializeData.call(this),t.logourl=SITEURL+"/wp-content/themes/walnut/images/synapse_logo.png",t},e.prototype.onShow=function(){return $(window).width()>1024&&$("#gears-mob").remove(),$(window).width()<1025&&$("#gears-pc").remove(),$(".creator").length>0?($(".page-content").addClass("condensed"),$(".header-seperation").css("display","none")):void 0},e}(Marionette.Layout),i.commands.setHandler("show:headerapp",function(e){return null==e&&(e={}),new t.HeaderController(e)})})}),define("text!apps/left-nav/templates/leftnav.html",[],function(){return'\n  <div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 697.5px;"><div id="main-menu-wrapper" class="page-sidebar-wrapper" style="overflow: hidden; width: auto; height: 697.5px;">\n\n<ul class="menu-items">	\n\n	<!-- BEGIN ONE LEVEL MENU -->\n	\n	<!-- END ONE LEVEL MENU -->\n\n</ul>\n<!-- END SIDEBAR MENU -->\n<!-- BEGIN SIDEBAR WIDGETS -->\n<div class="side-bar-widgets">\n\n</div>\n<div class="clearfix"></div>\n<!-- END SIDEBAR WIDGETS --> \n</div><div class="slimScrollBar ui-draggable" style="background: none repeat scroll 0% 0% rgb(161, 178, 189); width: 4px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 4px; z-index: 99; right: 1px; height: 698px;"></div><div class="slimScrollRail" style="width: 4px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 4px; background: none repeat scroll 0% 0% rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div></div>\n'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/left-nav/views",["app","text!apps/left-nav/templates/leftnav.html"],function(t,e){return t.module("LeftNavApp.Controller.Views",function(t,i){var n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="li",e.prototype.template='<a href="javascript:;"> <i class="{{iconClass}}"></i> <span class="title">{{post_title}}</span> <span class="arrow"></span> </a> <ul class="sub-menu"> {{#submenu}} <li><a href="{{menu_item_link}}">{{post_title}}</a></li> {{/submenu}} </ul>',e.prototype.serializeData=function(){var t,i;return t=e.__super__.serializeData.call(this),i="icon-custom-ui","Content Management"===this.model.get("post_title")&&(i="fa fa-pencil-square-o"),"Training Management"===this.model.get("post_title")&&(i="fa fa-book"),"Quiz Management"===this.model.get("post_title")&&(i="fa fa-puzzle-piece"),t.iconClass=i,t},e}(Marionette.ItemView),t.LeftNavView=function(t){function i(){return this.clickMenu=bind(this.clickMenu,this),i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.id="main-menu",i.prototype.className="page-sidebar",i.prototype.itemView=n,i.prototype.itemViewContainer="ul.menu-items",i.prototype.events={"click li":"clickMenu","click .sub-menu li":"closeNav"},i.prototype.onShow=function(){var t;return $(".creator").length>0?($("#main-menu").addClass("mini"),$(".start").removeClass("active open"),$(".arrow").removeClass("open"),$(".page-content").addClass("condensed"),$(".header-seperation").hide()):$(".page-content").removeClass("condensed"),$(".page-sidebar").hasClass("mini")?(t=$(".page-sidebar ul"),t.children("li.open").children("a").children(".arrow").removeClass("open"),t.children("li.open").children("a").children(".arrow").removeClass("active"),t.children("li.open").children(".sub-menu").slideUp(200),t.children("li").removeClass("open")):void 0},i.prototype.clickMenu=function(t){var e,i,n;return e=$(t.target).closest("li").find("a"),e.next().hasClass("sub-menu")!==!1?(i=e.parent().parent(),i.children("li.open").children("a").children(".arrow").removeClass("open"),i.children("li.open").children("a").children(".arrow").removeClass("active"),i.children("li.open").children(".sub-menu").slideUp(200),i.children("li").removeClass("open"),n=e.next(),n.is(":visible")?($(".arrow",e).removeClass("open"),e.parent().removeClass("active"),n.slideUp(200,function(t){return function(){return t.handleSidenarAndContentHeight()}}(this))):($(".arrow",e).addClass("open"),e.parent().addClass("open"),n.slideDown(200,function(t){return function(){return t.handleSidenarAndContentHeight()}}(this))),t.preventDefault()):void 0},i.prototype.handleSidenarAndContentHeight=function(){var t,e;return t=$(".page-content"),e=$(".page-sidebar"),t.attr("data-height")||t.attr("data-height",t.height()),e.height()>t.height()?t.css("min-height",e.height()+120):t.css("min-height",t.attr("data-height"))},i.prototype.closeNav=function(){return this.$el.hasClass("mini")?(this.$el.find(".menu-items li").removeClass("open"),this.$el.find(".sub-menu").slideUp()):void 0},i}(Marionette.CompositeView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/left-nav/leftnavapp",["app","controllers/region-controller","apps/left-nav/views"],function(t,e){return t.module("LeftNavApp.Controller",function(t,i){return t.LeftNavController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(){var t,e;return t=i.request("get:site:menus"),this.view=e=this._getLeftNavView(t),this.show(e,{loading:!0})},n.prototype._getLeftNavView=function(e){return new t.Views.LeftNavView({collection:e})},n}(e),i.commands.setHandler("show:leftnavapp",function(e){return null==e&&(e={}),new t.LeftNavController(e)})})}),define("text!apps/teachers-dashboard/dashboard/templates/teachers-dashboard.html",[],function(){return'<div id="teacherOptns">\n    <h3><a href="#take-class-region" class="active">Take a Class</a></h3>\n    <h3 class=""><a href="#start-training-region">Start Training</a></h3>\n</div>\n\n<div id="tab-content" class="tab-content" style="background: none">\n    <div class="tab-pane active" id="take-class-region"></div>\n    <div class="tab-pane" id="start-training-region"></div>\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/teachers-dashboard/dashboard/dashboard-take-class-app",["app","controllers/region-controller"],function(t,e){return t.module("DashboardTakeClassApp.Controller",function(t,i){var n;return t.DashboardTakeClassController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.view=e=this._getTakeClassView(t.divisionsCollection),this.show(e,{loading:!0})},e.prototype._getTakeClassView=function(t){return new n({collection:t})},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<h1 class="text-center muted m-b-20">Select a <span class="bold">class</span> to begin</h1> <ul class="classes"> {{#divisions}} {{#.}} <li><a href="#teachers/take-class/{{class_id}}/{{id}}"><div class="classesWrap">{{division}}</div></a></li> {{/.}} {{/divisions}} </ul>',e.prototype.className="animated fadeInUp",e.prototype.mixinTemplateHelpers=function(){var t;return t=e.__super__.mixinTemplateHelpers.call(this,t),t.divisions=_.chain(this.collection.toJSON()).groupBy("class_id").toArray().value(),t},e.prototype.changeTab=function(t){return t.preventDefault(),this.$el.find("#teacherOptns a").removeClass("active"),$(t.target).addClass("active").tab("show")},e}(Marionette.ItemView),i.commands.setHandler("show:dashboard:takeclass:app",function(e){return null==e&&(e={}),new t.DashboardTakeClassController(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/teachers-dashboard/dashboard/dashboard-start-training-app",["app","controllers/region-controller"],function(t,e){return t.module("DashboardStartTrainingApp.Controller",function(t,i){var n;return t.DashboardStartTrainingController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.view=e=this._getStartTrainingView(t.divisionsCollection),this.show(e,{loading:!0})},e.prototype._getStartTrainingView=function(t){return new n({collection:t})},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<h1 class="text-center muted m-b-20">Select a <span class="bold">class</span> to begin</h1> <ul class="classes"> {{#classes}} <li><a href="#teachers/start-training/{{id}}"><div class="classesWrap">{{label}}</div></a></li> {{/classes}} </ul>',e.prototype.className="animated fadeInUp",e.prototype.mixinTemplateHelpers=function(){var t,i,n,o,s,r,a;for(s=e.__super__.mixinTemplateHelpers.call(this,s),o=[],n=_.unique(this.collection.pluck("class_id")),r=0,a=n.length;a>r;r++)i=n[r],t=[],t.id=i,t.label=CLASS_LABEL[i],o.push(t);return s.classes=o,s},e}(Marionette.ItemView),i.commands.setHandler("show:dashboard:start:training:app",function(e){return null==e&&(e={}),new t.DashboardStartTrainingController(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/teachers-dashboard/dashboard/dashboard-controller",["app","controllers/region-controller","text!apps/teachers-dashboard/dashboard/templates/teachers-dashboard.html","apps/teachers-dashboard/dashboard/dashboard-take-class-app","apps/teachers-dashboard/dashboard/dashboard-start-training-app"],function(t,e,i){return t.module("TeachersDashboardApp.View",function(t,n){var o;return t.DashboardController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(){var t;return this.divisionsCollection=n.request("get:divisions"),t={items:[{label:"Dashboard",link:"javascript://"}]},n.execute("update:breadcrumb:model",t),this.layout=this._getTeachersDashboardLayout(),this.show(this.layout,{loading:!0}),this.listenTo(this.layout,"show",function(t){return function(){return n.execute("show:dashboard:takeclass:app",{region:t.layout.take_class_region,divisionsCollection:t.divisionsCollection}),n.execute("show:dashboard:start:training:app",{region:t.layout.start_training_region,divisionsCollection:t.divisionsCollection})}}(this))},e.prototype._getTeachersDashboardLayout=function(){return new o},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.className="teacher-app",e.prototype.regions={take_class_region:"#take-class-region",start_training_region:"#start-training-region"},e.prototype.events={"click #teacherOptns a":"changeTab"},e.prototype.changeTab=function(t){return t.preventDefault(),this.$el.find("#teacherOptns a").removeClass("active"),$(t.target).addClass("active").tab("show")},e}(Marionette.Layout)})}),define("text!apps/teachers-dashboard/take-class/templates/class-description.html",[],function(){return'<div class="tiles white grid simple vertical green">\n	<div class="grid-title">\n		<h4 class="no-margin">{{showClassLabel}}</h4>\n		<!-- <div class="tools">\n			<a href="javascript:;" class="collapse"></a>\n		</div> -->\n		</div>\n		<div class="grid-body" style="overflow: hidden; display: block;">\n		<div class="row ">\n			{{^trainingMode}}\n			<div class="col-md-3">\n					<label class="form-label">Number of Students</label>\n					{{showNoOfStudents}}\n			</div>\n			{{/trainingMode}}\n			<div class="col-md-4">\n					<!-- <label class="form-label">Physical Requirements</label>\n					Lorem Ipsum is simply dummy text of the printing and typesetting industry. -->\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("text!apps/teachers-dashboard/take-class/templates/textbooks-list.html",[],function(){return'<div class="list" id="textbooks">\n	<!-- "TABLE" HEADER CONTAINING SORT BUTTONS (HIDDEN IN GRID MODE)-->\n	<div class="list_header">\n		<div class="meta name active desc" id="SortByName">\n			Name &nbsp;\n			<span class="sort anim150 asc active" data-sort="data-name" data-order="desc"></span>\n			<span class="sort anim150 desc" data-sort="data-name" data-order="asc"></span>\n		</div>\n\n		{{^take_quiz}}\n		<div class="meta rec">Status\n			<span class="sort anim150 asc" data-sort="data-modules" data-order="desc"></span>\n			<span class="sort anim150 desc" data-sort="data-modules" data-order="asc"></span>\n		</div>\n		{{/take_quiz}}\n\n		{{#take_quiz}}\n			<div class="meta rec"> Quizzes</div>\n			<div class="meta modules rec">Lectures/e-Book</div>\n		{{/take_quiz}}\n\n	</div>\n\n	<div class="fail_element anim250">Sorry &mdash; we could not find any Textbooks matching matching these criteria</div>\n	<!-- BEGIN LIST OF textbooks (MANY OF THESE ELEMENTS ARE VISIBLE ONLY IN LIST MODE)-->\n	<ul class="textbooks_list">\n	</ul>\n</div>\n'}),define("text!apps/teachers-dashboard/take-class/templates/list-item.html",[],function(){return'<div class="meta name">\n    <div class="img_wrapper">\n      {{&thumbnail}}\n    </div>\n    <div class="titles">\n      <h3 class="normal">\n        {{#take_quiz}}\n          {{&name}}\n        {{/take_quiz}}\n        {{^take_quiz}}\n          <a class="textbook_titles" data-id="{{term_id}}" href="{{url}}">{{&name}}</a>\n        {{/take_quiz}}\n      </h3>\n      <p class="small-text">{{author}}</p>\n    </div>\n</div>\n\n{{#take_quiz}}\n    <div class="meta modules rec">\n        <a href="{{quizzes_url}}" class="btn btn-default">View Quizzes</a>\n    </div>\n    <div class="meta modules rec">\n        <a href="{{training_modules_url}}" class="btn btn-default">View Lectures/e-Book</a>\n    </div>\n\n{{/take_quiz}}\n\n{{^take_quiz}}\n  <div class="meta modules rec">\n\n      {{#training_mode}}\n        <p>Total Chapters: {{chapter_count}}</p>\n      {{/training_mode}}\n\n      {{^training_mode}}\n        <h4 class="b-grey b-b p-b-10 m-t-20 m-b-10">Total Chapters: {{chapter_count}}</h4>\n        <div class="chapStatus text-success"><h5 class="no-margin">Completed</h5> {{chapters_completed}}</div>\n        <div class="chapStatus text-info"><h5 class="no-margin">In Progress</h5> {{chapters_in_progress}}</div>\n        <div class="chapStatus text-error"><h5 class="no-margin">Not Started</h5> {{chapters_not_started}}</div>\n      {{/training_mode}}\n\n  </div>\n{{/take_quiz}}\n<div class="clearfix"></div>\n'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/teachers-dashboard/take-class/views",["app","text!apps/teachers-dashboard/take-class/templates/textbooks-list.html","text!apps/teachers-dashboard/take-class/templates/list-item.html"],function(t,e,i){return t.module("TeachersDashboardApp.View.TakeClass",function(t,n){var o,s;return s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="li",e.prototype.className="txtbook mix mix_all",e.prototype.template=i,e.prototype.onShow=function(){return"take-quiz"===Marionette.getOption(this,"mode")&&this.$el.addClass("noCursor"),this.$el.attr("data-name",this.model.get("name")),this.$el.attr("data-modules",this.model.get("modules_count")),this.$el.attr("data-subjects",this.model.get("subjects"))},e.prototype.serializeData=function(){var t,i,o;return t=e.__super__.serializeData.call(this),o=n.getCurrentRoute(),i=Marionette.getOption(this,"mode"),"take-quiz"===i&&(t.take_quiz=!0),"training"===i&&(t.training_mode=!0),t.url="#"+o+"/textbook/"+this.model.get("term_id"),t.take_quiz&&(t.quizzes_url=t.url,t.training_modules_url="#students/training-modules/textbook/"+this.model.get("term_id")),t},e}(Marionette.ItemView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="fail_element anim250">Sorry &mdash; we could not find any Textbooks matching matching these criteria</div>',e}(Marionette.ItemView),t.TextbooksListView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.itemView=s,i.prototype.emptyView=o,i.prototype.itemViewContainer="ul.textbooks_list",i.prototype.itemViewOptions=function(){var t;return t={mode:Marionette.getOption(this,"mode")}},i.prototype.serializeData=function(){var t,e;return t=i.__super__.serializeData.call(this),e=Marionette.getOption(this,"mode"),"take-quiz"===e&&(t.take_quiz=!0),"training"===e&&(t.training_mode=!0),t},i.prototype.onShow=function(){return"take-quiz"===Marionette.getOption(this,"mode")?this.$el.find("#textbooks").addClass("myClass"):this.$el.find("#textbooks").addClass("takeClass"),this.$el.find("#textbooks").mixitup({layoutMode:"list",listClass:"list",gridClass:"grid",effects:["fade","blur"],listEffects:["fade","rotateX"]}),this.dimensions={status:"all"},"take-quiz"!==Marionette.getOption(this,"mode")?$("li.txtbook").click(function(){return window.location=$(this).find("a").attr("href"),!1}):void 0},i}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/teachers-dashboard/take-class/take-class-controller",["app","controllers/region-controller","text!apps/teachers-dashboard/take-class/templates/class-description.html","apps/teachers-dashboard/take-class/views"],function(t,e,i){return t.module("TeachersDashboardApp.View",function(t,n){var o,s,r,a;return r=null,a=null,t.TakeClassController=function(e){function i(){return this._showTextbooksListView=bind(this._showTextbooksListView,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i,o,s;return this.classID=t.classID,this.division=t.division,this.mode=t.mode,i="Start Training",console.log(this.mode),"take-class"===(s=this.mode)||"take-quiz"===s?(r=n.request("get:division:by:id",this.division),i="Take Class"):r="",e={items:[{label:"Dashboard",link:"#teachers/dashboard"},{label:i,link:"javascript://"}]},n.execute("update:breadcrumb:model",e),a="take-quiz"===this.mode?n.request("get:textbooks",{user_id:n.request("get:user:data","ID")}):n.request("get:textbooks",{class_id:this.classID,division:this.division}),this.layout=o=this._getTrainingModuleLayout(),n.execute("when:fetched",[r,a],function(t){return function(){return t.show(o,{loading:!0})}}(this)),this.listenTo(o,"show",this._showTextbooksListView)},i.prototype._showTextbooksListView=function(){return n.execute("when:fetched",a,function(e){return function(){var i,n;return n=new t.TakeClass.TextbooksListView({collection:a,mode:e.mode}),i=new o({templateHelpers:{showSubjectsList:function(){var t;return t=_.uniq(_.compact(_.flatten(a.pluck("subjects"))))},showClassLabel:function(){return"training"===e.mode?CLASS_LABEL[e.classID]:r.get("division")},showNoOfStudents:function(){return"training"===e.mode?"N/A":r.get("students_count")},trainingMode:function(){return"training"===e.mode?!0:void 0}}}),e.layout.textbooksListRegion.show(n),e.layout.classDetailsRegion.show(i)}}(this))},i.prototype._getTrainingModuleLayout=function(){return new s},i}(e),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div id="class-details-region"></div> <div id="textbooks-list-region"></div>',e.prototype.regions={classDetailsRegion:"#class-details-region",textbooksListRegion:"#textbooks-list-region"},e}(Marionette.Layout),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e}(Marionette.ItemView),n.commands.setHandler("show:take:class:textbooks:app",function(e){return null==e&&(e={}),new t.TakeClassController(e)})})}),define("text!apps/teaching-modules/templates/content-modules-list.html",[],function(){return'<div class="tiles white grid simple  animated fadeIn">\n    <div class="grid-title">\n        <h3 class="m-t-5 m-b-5">Textbook <span class="semi-bold">{{&showTextbookName}}</span></h3>\n    </div>\n\n    <div class="grid-body contentSelect" style="overflow: hidden; display: block;">\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="filters">\n                <div class="table-tools-actions">\n                    <span id="textbook-filters"></span>\n                    <select class="select2-filters" id="content-status-filter" style="width:150px">\n                        <option value="">All Status</option>\n                        <option value="started">In Progress</option>\n                        <option value="not started">Not Started</option>\n                        <option value="completed">Completed</option>\n                    </select>\n                    {{#take_quiz}}\n                        <select class="select2-filters" id="quiz-type-filter" style="width:150px">\n                        <option value="">All Types</option>\n                            <option value="practice">Practice Quiz</option>\n                            <option value="test">Take at Home</option>\n                            <option value="class_test">Class Test</option>\n                        </select>\n                    {{/take_quiz}}\n                    </div>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n        <div class="col-sm-12"></div>\n    </div>\n    <div class="row m-t-15">\n    	<div class="col-lg-12">\n    		<!--<h4>{{&showModulesHeading}}</h4>-->\n    		<table class="table table-condensed table-fixed-layout table-bordered takeClass" id="take-class-modules">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n    		        <th>Chapter</th>\n                    {{#take_quiz}}\n                        <th class="v-align-middle">Quiz Type</th>\n                    {{/take_quiz}}\n                    <th class="{sorter:\\\'minutesSort\\\'} duration">Duration</th>\n                    <th class="statusColmn"><div id="status_header">Status</div></th>\n                    <th>{{#take_quiz}}Taken On{{/take_quiz}}\n                    {{^take_quiz}}Schedule Date{{/take_quiz}}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                </tbody>\n            </table>\n        <div id="pager" class="pager">\n    <i class="fa fa-chevron-left prev"></i>\n    							<span style="padding:0 15px"  class="pagedisplay"></span>\n    <i class="fa fa-chevron-right next"></i>\n    							<select class="pagesize">\n    								  <option value="25" selected>25</option>\n    <option value="50">50</option>\n                    	<option value="100">100</option>\n    </select>\n    						</div>\n\n    </div>\n    </div>\n    </div>\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/teaching-modules/textbook-modules-views",["app","text!apps/teaching-modules/templates/content-modules-list.html"],function(t,e){return t.module("TeachersDashboardApp.View.TakeClassTextbookModules",function(t,i){var n,o;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<td class="v-align-middle">{{name}}</td> <td class="v-align-middle">{{chapterName}}</td> {{#take_quiz}} <td class="v-align-middle">{{quiz_type}}</td> {{/take_quiz}} <td class="v-align-middle"><span style="display: none;">{{total_minutes}}</span> <span class="muted">{{duration}} {{minshours}}</span></td> <td> {{#practice_quiz}} {{#attempts}} <span class="label label-info">Attempts: <strong>{{attempts}}</strong></span> {{/attempts}} {{^attempts}} <span class="label label-important">Not Started</span> {{/attempts}} {{/practice_quiz}} {{^practice_quiz}} {{&status_str}} {{/practice_quiz}} </td> <td> <button data-id="{{id}}" type="button" class="btn btn-success btn-small pull-right action start-training"> View {{moduleType}} </button> {{#schedule_button}} <button type="button" data-target="#schedule" data-toggle="modal" class="btn btn-white btn-small pull-left m-r-10 training-date"> <i class="fa fa-calendar"></i> {{taken_on}} </button> {{/schedule_button}} {{^schedule_button}} {{#taken_on}} <div class="alert alert-success inline pull-left m-b-0 m-r-10 dateInfo">{{taken_on}}</div> {{/taken_on}} {{^taken_on}} {{#classTest}} {{#schedule}} <div class="schedule_dates alert alert-info inline pull-left m-b-0 m-r-10"> Scheduled<br> From: {{scheduleFrom}}<br> To: {{scheduleTo}} </div> {{/schedule}} {{^schedule}} Not Scheduled {{/schedule}} {{/classTest}} {{/taken_on}} {{/schedule_button}} </td>',e.prototype.tagName="tr",e.prototype.onShow=function(){return this.$el.attr("id","row-"+this.model.get("id")),this.$el.attr("data-id",this.model.get("id")),"class_test"===this.model.get("quiz_type")&&(this.model.get("schedule")?((this.model.get("schedule").is_expired||!this.model.get("schedule").is_active)&&this.$el.find(".start-training").hide(),this.model.get("schedule").is_expired&&this.$el.find(".schedule_dates").removeClass("alert-info").addClass("alert-error")):this.$el.find(".start-training").hide(),"completed"===this.model.get("status"))?this.$el.find(".start-training").show():void 0},e.prototype.serializeData=function(){var t,i,n;return t=e.__super__.serializeData.call(this),t.chapterName=function(e){return function(){var i;return i=_.chain(e.chapters.findWhere({term_id:t.term_ids.chapter})).pluck("name").compact().value()}}(this),"teaching-module"===this.model.get("type")?(t.moduleType="Module",n=this.model.get("training_date"),n=n?moment(n).format("Do MMM YYYY"):"Schedule"):(t.moduleType="Quiz","class_test"===t.quiz_type&&(t.classTest=!0),n=this.model.get("taken_on"),n=n?moment(n).format("Do MMM YYYY"):null,"class_test"===t.quiz_type&&"completed"!==t.status&&(n=null)),i=this.model.get("status"),null!=this.model.get("post_status")&&"archive"===this.model.get("post_status")?t.status_str='<span class="label label-success">Archived</span>':"started"===i||"resumed"===i?t.status_str='<span class="label label-info">In Progress</span>':"completed"===i?t.status_str='<span class="label label-success">Completed</span>':(t.status_str='<span class="label label-important">Not Started</span>',"take-quiz"!==Marionette.getOption(this,"mode")&&(t.schedule_button=!0)),t.taken_on=n,"take-quiz"===Marionette.getOption(this,"mode")&&(t.take_quiz=!0,t.quiz_type=this.model.getQuizTypeLabel(),t.schedule&&(t.scheduleFrom=moment(t.schedule.from).format("Do MMM YYYY"),t.scheduleTo=moment(t.schedule.to).format("Do MMM YYYY"))),"practice"===this.model.get("quiz_type")&&(t.practice_quiz=!0),t},e.prototype.initialize=function(t){return this.chapters=t.chaptersCollection},e}(Marionette.ItemView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="No Modules Available",e.prototype.tagName="td",e.prototype.onShow=function(){return"take-quiz"===Marionette.getOption(this,"mode")?this.$el.attr("colspan",5):this.$el.attr("colspan",4)},e}(Marionette.ItemView),t.ContentGroupsView=function(t){function s(){return this.onShow=bind(this.onShow,this),this.startTraining=bind(this.startTraining,this),s.__super__.constructor.apply(this,arguments)}return extend(s,t),s.prototype.template=e,s.prototype.itemView=n,s.prototype.itemViewContainer="tbody",s.prototype.itemViewOptions=function(){return{chaptersCollection:Marionette.getOption(this,"chaptersCollection"),mode:Marionette.getOption(this,"mode")}},s.prototype.emptyView=o,s.prototype.className="teacher-app moduleList",s.prototype.events={"change .textbook-filter":function(t){return this.trigger("fetch:chapters:or:sections",$(t.target).val(),t.target.id)},"change #content-status-filter":"setFilteredContent","change #quiz-type-filter":"setFilteredContent","click .start-training":"startTraining","click .training-date":"scheduleTraining"},s.prototype.serializeData=function(){var t;return t=s.__super__.serializeData.call(this),"take-quiz"===Marionette.getOption(this,"mode")&&(t.take_quiz=!0),t},s.prototype.startTraining=function(t){var e,n,o;return n=$(t.currentTarget).attr("data-id"),e=i.getCurrentRoute(),("training"===(o=Marionette.getOption(this,"mode"))||"take-class"===o)&&i.navigate(e+"/module/"+n,!0),"take-quiz"===Marionette.getOption(this,"mode")?i.navigate(e+"/quiz/"+n,!0):void 0},s.prototype.onScheduledModule=function(t,e){return this.$el.find("tr#row-"+t+" .training-date").html('<i class="fa fa-calendar"></i> '+moment(e).format("Do MMM YYYY"))},s.prototype.scheduleTraining=function(t){var e;return e=$(t.target).closest("tr").attr("data-id"),this.trigger("schedule:training",e)},s.prototype.onShow=function(){var t,e;return"training"===Marionette.getOption(this,"mode")&&this.$el.find(".status_label, .training-date, #status_header, .dateInfo").remove(),e=$.showTextbookFilters({chapters:Marionette.getOption(this,"chaptersCollection")}),this.fullCollection=Marionette.getOption(this,"fullCollection"),
console.log(this.fullCollection),this.$el.find("#textbook-filters").html(e),this.$el.find(".select2-filters").select2(),$("#take-class-modules").tablesorter(),t={container:$(".pager"),output:"{startRow} to {endRow} of {totalRows}"},$("#take-class-modules").tablesorterPager(t)},s.prototype.onFetchChaptersOrSectionsCompleted=function(t,e){switch(e){case"textbooks-filter":$.populateChapters(t,this.$el);break;case"chapters-filter":$.populateSections(t,this.$el);break;case"sections-filter":$.populateSubSections(t,this.$el)}return this.setFilteredContent()},s.prototype.setFilteredContent=function(){var t,e,i;return t="take-quiz"===Marionette.getOption(this,"mode")?"quiz":"teaching-modules",e=$.filterTableByTextbooks(this,t),this.collection.set(e),$("#take-class-modules").trigger("updateCache"),i={container:$(".pager"),output:"{startRow} to {endRow} of {totalRows}"},$("#take-class-modules").tablesorterPager(i)},s}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/teaching-modules/textbook-modules-controller",["app","controllers/region-controller","apps/teaching-modules/textbook-modules-views"],function(t,e){return t.module("TeachersDashboardApp.View",function(t,i){var n;return t.textbookModulesController=function(e){function o(){return this._showScheduleModal=bind(this._showScheduleModal,this),this._getContentGroupsListingView=bind(this._getContentGroupsListingView,this),this._saveSchedule=bind(this._saveSchedule,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){var e;return e=t.textbookID,this.classID=t.classID,this.division=t.division,this.mode=t.mode,$.showHeaderAndLeftNav(),$(window).off("beforeunload"),i.vent.trigger("closed:quiz"),this.textbook=i.request("get:textbook:by:id",e),"training"===this.mode?this.contentGroupsCollection=i.request("get:content:groups",{textbook:e,division:this.division}):"take-class"===this.mode?this.contentGroupsCollection=i.request("get:content:groups",{textbook:e,division:this.division}):"take-quiz"===this.mode&&(this.contentGroupsCollection=i.request("get:quizes",{textbook:e,user_id:i.request("get:user:data","ID")})),this.chaptersCollection=i.request("get:chapters",{parent:e}),i.execute("when:fetched",[this.chaptersCollection,this.contentGroupsCollection,this.textbook],function(t){return function(){var e;return t.view=e=t._getContentGroupsListingView(t.contentGroupsCollection),t.show(t.view,{loading:!0}),t.listenTo(t.view,{"schedule:training":function(e){var n;return t.singleModule=t.contentGroupsCollection.get(e),n=t._showScheduleModal(t.singleModule),t.show(n,{region:i.popupRegion}),t.listenTo(n,"save:scheduled:date",t._saveSchedule)}}),t.listenTo(t.view,"fetch:chapters:or:sections",function(e,n){var o;return o=i.request("get:chapters",{parent:e}),i.execute("when:fetched",o,function(){return t.view.triggerMethod("fetch:chapters:or:sections:completed",o,n)})})}}(this))},o.prototype._saveSchedule=function(t,e){var n,o,s;return s=this.contentGroupsCollection.get(t),o=_.first(s.get("content_pieces")),n={collection_id:t,content_piece_id:o,start_date:e,division:this.division,status:"scheduled"},i.request("schedule:content:group",n),this.view.triggerMethod("scheduled:module",t,e)},o.prototype._getContentGroupsListingView=function(e){return new t.TakeClassTextbookModules.ContentGroupsView({collection:e,mode:this.mode,chaptersCollection:this.chaptersCollection,fullCollection:e.clone(),templateHelpers:{showTextbookName:function(t){return function(){return t.textbook.get("name")}}(this),showModulesHeading:function(t){return function(){var e;return e='<span class="semi-bold">All</span> Modules',"training"===t.mode&&(e='<span class="semi-bold">Practice</span> Modules'),e}}(this)}})},o.prototype._showScheduleModal=function(t){return new n({model:t})},o}(e),n=function(t){function e(){return this.saveScheduledDate=bind(this.saveScheduledDate,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="modal fade" id="schedule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> <h4 class="modal-title" id="myModalLabel">Schedule Module</h4> </div> <div class="modal-body"> <div data-date-format="yyyy-mm-dd" class="input-append success date"> <input id="scheduled-date" type="text" value="{{training_date}}" placeholder="Select Date" class="span12"> <span class="add-on"><span class="arrow"></span><i class="fa fa-calendar"></i></span> </div> <button type="button" class="btn btn-success" data-dismiss="modal">Save</button> </div> </div> </div> </div>',e.prototype.events={"click .btn-success":"saveScheduledDate"},e.prototype.onShow=function(){var t,e;return t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),$(".input-append.date").datepicker({autoclose:!0,todayHighlight:!0,startDate:e})},e.prototype.serializeData=function(){var t,i;return t=e.__super__.serializeData.call(this),i=this.model.get("training_date"),""!==i&&(t.training_date=moment(i).format("YYYY-MM-DD")),t},e.prototype.saveScheduledDate=function(t){var e,i;return e=this.model.get("id"),i=this.$el.find("#scheduled-date").val(),""!==i?this.trigger("save:scheduled:date",e,i):void 0},e}(Marionette.ItemView),i.commands.setHandler("show:teaching:modules:app",function(e){return null==e&&(e={}),new t.textbookModulesController(e)})})}),define("text!apps/content-modules/view-single-module/module-description/templates/module-description.html",[],function(){return'<button type="button" id="go-back-button" class="btn btn-white btn-cons m-t-10">\n    <h4 class="bold  text-info no-margin">\n        <span class="fa fa-arrow-circle-left"></span>\n        List of Modules\n    </h4>\n</button>\n{{#isTraining}}\n<div class="well text-center">\n    <h4><span class="bold">This is a practice mode.\n            It is designed to help you train for the class</span></h4>\n</div>\n{{/isTraining}}\n<div class=\'tiles white grid simple animated fadeIn\'>\n    <div class="grid-title">\n        <div class="row">\n            <div class="col-md-6">\n                <h3 class="no-margin semi-bold">{{name}}</h3>\n            </div>\n            <div class="col-md-6 b-l b-grey small-text">\n                <div class="row">\n                    <div class="col-md-6">\n                        <label class="form-label text-grey">Textbook</label>\n                            {{getTextbookName}}\n                        </div>\n                    <div class="col-md-6">\n                        <label class="form-label text-grey">Chapter</label>\n                            {{getChapterName}}\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- <div class="tools">\n            <a href="javascript:;" class="collapse"></a>\n        </div> -->\n    </div>\n    <div class="grid-body" style="overflow: hidden; display: block;">\n        <div class="row m-b-10">\n            <div class="col-md-6 b-r b-grey">\n                    <label class="form-label">Objective</label>\n                    {{description.objective}}\n            </div>\n            <div class="col-md-6">\n                    <label class="form-label">Description</label>\n                    {{description.description}}\n            </div>\n            \n        </div>\n        <div class="row">\n            <div class="col-md-6 b-r b-grey">\n                    <label class="form-label">Physical Requirements</label>\n                    {{description.physical_requirements}}\n            </div>\n            <div class="col-md-6">\n                    <label class="form-label">Electronic Requirements</label>\n                    {{description.electionic_requirements}}\n            </div>\n            <!-- <div class="col-md-4">\n                    <label class="form-label">Duration</label>\n                    {{duration}} {{minshours}}\n            </div> -->\n        </div>\n    </div>\n\n    {{#takeClassModule}}\n    <div class="tiles grey text-grey p-t-10 p-l-15 p-r-10 p-b-10 b-grey b-b">\n        <div class="modTimes no-margin">\n            <div class="text-center b-r b-grey">\n                <p class="bold small-text muted no-margin"> Module Time</p>\n                <h3 class="bold text-grey no-margin">\n                    <span class="animate-number" data-animation-duration="1200">{{total_minutes}} mins</span>\n                </h3>\n            </div>\n\n            <div class="text-center b-r b-grey">\n                <div class="{{^isTraining}}modProgress{{/isTraining}}" >\n                    <p class="bold small-text muted m-t-10 m-b-5">Progress</p>\n                    {{^isTraining}}\n                    <div class="progress progress-large">\n                        <div data-percentage="{{getProgressPercentage}}%" style="width:{{getProgressPercentage}}%;"\n                             class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="{{getProgressPercentage}}" aria-valuemin="0"\n                             aria-valuemax="100">{{getProgressData}}\n                        </div>\n                    </div>\n                    {{/isTraining}}\n                    {{#isTraining}}\n                    <p class="small-text muted"> This will display the progress of training module in class mode.</p>\n                    {{/isTraining}}\n\n                </div>\n            </div>\n            \n            <div class="text-center b-r b-grey">\n                <p class="bold small-text muted no-margin"> Elapsed Module Time</p>\n                {{^isTraining}}\n                <h3 class="bold text-grey no-margin">\n                    <span class="animate-number" data-animation-duration="1200">\n                        {{showElapsedTime}}\n                    </span>\n                </h3>\n                {{/isTraining}}\n                {{#isTraining}}\n                <p class="small-text muted">This will display what is the elapsed module\n                    time of the training module in class mode.</p>\n                {{/isTraining}}\n            </div>\n\n            <div class="">\n                {{&startScheduleButton}}\n            </div>\n        </div>\n        <div class="row no-margin p-t-10">\n            <div class="col-sm-6">\n                \n            </div>\n            <div class="col-sm-6">\n                <div class="timedisplay"></div>\n\n                \n\n\n            </div>\n        </div>\n    </div>\n    {{/takeClassModule}}\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/content-modules/view-single-module/module-description/description-app",["app","controllers/region-controller","text!apps/content-modules/view-single-module/module-description/templates/module-description.html"],function(t,e,i){return t.module("CollecionDetailsApp.Controller",function(t,n){var o;return t.ViewCollecionDetailsController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.model=t.model,this.mode=t.mode,this.questionResponseCollection=t.questionResponseCollection,this.textbookNames=t.textbookNames,this.view=e=this._getCollectionDetailsView(),this.listenTo(e,"start:teaching:module",function(t){return function(){return t.region.trigger("start:teaching:module")}}(this)),this.listenTo(e,"goto:previous:route",this._gotoPreviousRoute),this.show(e,{loading:!0,entities:[this.textbookNames]})},e.prototype._gotoPreviousRoute=function(){var t,e;return t=n.getCurrentRoute(),e=_(t).strLeft("/module"),n.navigate(e,!0)},e.prototype._getCollectionDetailsView=function(){var t,e,i;return e=this.model.get("term_ids"),t=_.size(this.questionResponseCollection.where({status:"completed"})),i=_.size(this.model.get("content_pieces")),new o({model:this.model,mode:this.mode,templateHelpers:this._getTemplateHelpers({terms:e,numOfQuestionsCompleted:t,totalNumofQuestions:i})})},e.prototype._getTemplateHelpers=function(t){return{showElapsedTime:function(t){return function(){var e,i,n;return i=t.questionResponseCollection.pluck("time_taken"),n=0,_.size(i)>0&&(n=_.reduce(i,function(t,e){return parseInt(t+parseInt(e))})),e=$.timeMinSecs(n)}}(this),getProgressData:function(){return t.numOfQuestionsCompleted+"/"+t.totalNumofQuestions},getProgressPercentage:function(){return parseInt(t.numOfQuestionsCompleted/t.totalNumofQuestions*100)},getTextbookName:function(e){return function(){var i,n;return n=e.textbookNames.get(t.terms.textbook),null!=n?i=n.get("name"):void 0}}(this),getChapterName:function(e){return function(){var i,n;return i=e.textbookNames.get(t.terms.chapter),null!=i?n=i.get("name"):void 0}}(this),startScheduleButton:function(t){return function(){var e,i,n,o,s;return e="",i=t.model.get("content_pieces"),i=_.map(i,function(t){return parseInt(t)}),o=t.questionResponseCollection.where({status:"completed"}),o&&(n=_.chain(o).map(function(t){return t.toJSON()}).pluck("content_piece_id").value()),o=t.questionResponseCollection.pluck("content_piece_id"),s=_.difference(i,n),_.size(s)>0&&"training"!==t.mode&&"archive"!==t.model.get("post_status")&&(e='<button type="button" id="start-module" class="btn btn-success action btn-block m-t-10"> <i class="fa fa-play"></i> Start </button>'),e}}(this)}},e}(e),o=function(t){function e(){return this.startModule=bind(this.startModule,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.events=function(){return{"click #start-module":"startModule","click #go-back-button":function(){return this.trigger("goto:previous:route")}}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.takeClassModule=this.mode,t.isTraining="training"===this.mode?!0:!1,t},e.prototype.initialize=function(){return this.mode=Marionette.getOption(this,"mode")},e.prototype.startModule=function(){var t;return t=n.getCurrentRoute(),this.trigger("start:teaching:module")},e}(Marionette.ItemView),n.commands.setHandler("show:viewgroup:content:group:detailsapp",function(e){return null==e&&(e={}),new t.ViewCollecionDetailsController(e)})})}),define("text!apps/content-modules/view-single-module/content-display/templates/content-display-item.html",[],function(){return'\n<div class="contentPiece" data-id="{{ID}}">\n	<time class="cbp_tmtime" datetime="">\n	    <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n	</time>\n	<div class="cbp_tmicon info animated bounceIn"> <span class="fa"></span> </div>\n	<div class="cbp_tmlabel view" style="cursor:auto">\n		<div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n		  <h4 class="m-t-5 m-b-5"><a class="text-grey semi-bold question_link">{{&post_excerpt}}</a> </h4>\n		</div>\n		<div class="clearfix"></div>\n        <div class="tiles grey p-t-10 p-b-10 p-l-20">\n            <div class="muted">\n                <span class="bold question-type-div">Question Type:</span> <span class="question-type-div"> {{question_type}},</span>\n                <span class="bold">Date Completed:</span> {{dateCompleted}}\n\n                {{#responseStatus}}\n                <div id="correct-answer-div">\n                    <span class="bold">Correct Answer:</span> {{correctAnswer}}\n                </div>\n                <div>\n                    <span class="bold">Taken By:</span> {{teacherName}}\n                </div>\n                {{/responseStatus}}\n            </div>\n            <div class="clearfix"></div>\n        </div>\n	</div>\n    {{#responseStatus}}\n    <div class="qstnStatus p-t-10"><i class="fa fa-check-circle"></i> Completed\n        <div>\n            <label class="form-label small-text text-grey inline">Time Taken: <span class="bold">{{timeTaken}}</span></label></div>\n    </div>\n    {{/responseStatus}}\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-modules/view-single-module/content-display/content-display-app",["app","controllers/region-controller","text!apps/content-modules/view-single-module/content-display/templates/content-display-item.html"],function(t,e,i){return t.module("CollectionContentDisplayApp.Controller",function(t,n){var o,s;return t.CollectionContentDisplayController=function(t){function e(){return this._getCollectionContentDisplayView=bind(this._getCollectionContentDisplayView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,i,n,o;return i=t.model,this.mode=t.mode,n=t.questionResponseCollection,e=t.groupContentCollection,this.studentCollection=t.studentCollection,this.view=o=this._getCollectionContentDisplayView(i,e,n),this.show(o,{loading:!0,entities:[e,n]}),this.listenTo(this.view,"view:question:readonly",function(t){return function(e){return t.region.trigger("goto:question:readonly",e)}}(this))},e.prototype._getCollectionContentDisplayView=function(t,e,i){return new o({model:t,collection:e,responseCollection:i,studentCollection:this.studentCollection,mode:this.mode})},e}(e),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.tagName="li",e.prototype.className="",e.prototype.mixinTemplateHelpers=function(t){var e;return e=Marionette.getOption(this,"additionalData"),t.dateCompleted=e.dateCompleted,"multiple_eval"===t.question_type&&(t.question_type="multiple Evaluation"),t.question_type=_.str.capitalize(t.question_type),e.responseStatus&&(t.responseStatus=e.responseStatus,t.timeTaken=e.timeTaken,t.correctAnswer=e.correctAnswer,t.teacherName=e.teacherName),t},e.prototype.onShow=function(){var t;return t="fa-question",this.model.get(!1)&&(t="fa-youtube-play"),this.$el.find(".cbp_tmicon .fa").addClass(t),"content_piece"===this.model.get("content_type")?this.$el.find("#correct-answer-div, .question-type-div").remove():void 0},e}(Marionette.ItemView),o=function(t){function e(){return this.viewQuestionReadOnly=bind(this.viewQuestionReadOnly,this),this.getResults=bind(this.getResults,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div id="myCanvas-miki" class="col-md-10"><ul class="cbp_tmtimeline"></ul></div>',e.prototype.itemView=s,e.prototype.itemViewContainer="ul.cbp_tmtimeline",e.prototype.itemViewOptions=function(t,e){var i,n,o,s,r,a,l;for(r=Marionette.getOption(this,"responseCollection"),l=r.where({content_piece_id:t.get("ID")}),o=0,s=l.length;s>o;o++)a=l[o],a=a;return i={},i.dateCompleted="N/A",a&&("completed"===a.get("status")&&(i.responseStatus=a.get("status"),i.timeTaken=$.timeMinSecs(a.get("time_taken")),i.dateCompleted=moment(a.get("end_date")).format("Do MMM YYYY"),i.correctAnswer=this.getResults(t,a.get("question_response")),i.teacherName=a.get("teacher_name")),console.log(i)),n={model:t,additionalData:i}},e.prototype.getResults=function(t,e){var i,n,o,s,r,a,l,c,u,d,p,h;if(o="No One",u=[],p=Marionette.getOption(this,"studentCollection"),"chorus"===t.get("question_type"))e&&(o=CHORUS_OPTIONS[e]);else if("individual"===t.get("question_type")){for(s=0,a=e.length;a>s;s++){for(d=e[s],n=p.where({ID:d}),r=0,l=n.length;l>r;r++)i=n[r],c=i.get("display_name");u.push(c)}_.size(u)>0&&(h=u.join(", "),o=_.size(u)+" Students ("+h+")")}else o=_.size(_.pluck(e,"id"))+" Students";return o},e.prototype.events={"click .cbp_tmlabel.completed":"viewQuestionReadOnly"},e.prototype.onShow=function(){var t,e,i,n,o,s,r,a,l,c,u,d;if(l=Marionette.getOption(this,"responseCollection"),t=l.where({status:"completed"}),c=_.chain(t).map(function(t){return t.toJSON()}).pluck("content_piece_id").value(),"training"===Marionette.getOption(this,"mode")){for(r=this.$el.find(".contentPiece"),u=[],e=0,n=r.length;n>e;e++)s=r[e],u.push($(s).find(".cbp_tmlabel").addClass("completed").css("cursor","pointer"));return u}for(a=this.$el.find(".contentPiece"),d=[],i=0,o=a.length;o>i;i++)s=a[i],_.contains(c,parseInt($(s).attr("data-id")))?d.push($(s).find(".cbp_tmlabel").addClass("done completed").css("cursor","pointer")):d.push(void 0);return d},e.prototype.viewQuestionReadOnly=function(t){var e;return e=$(t.target).closest(".contentPiece").attr("data-id"),this.trigger("view:question:readonly",e)},e}(Marionette.CompositeView),n.commands.setHandler("show:viewgroup:content:displayapp",function(e){return null==e&&(e={}),new t.CollectionContentDisplayController(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-modules/view-single-module/single-module-controller",["app","controllers/region-controller","apps/content-modules/view-single-module/module-description/description-app","apps/content-modules/view-single-module/content-display/content-display-app"],function(t,e){return t.module("ContentModulesApp.View",function(t,i){var n;return t.GroupController=function(t){function e(){return this._getContentGroupViewLayout=bind(this._getContentGroupViewLayout,this),this.showContentGroupViews=bind(this.showContentGroupViews,this),this.gotoTrainingModule=bind(this.gotoTrainingModule,this),this.startTeachingModule=bind(this.startTeachingModule,this),e.__super__.constructor.apply(this,arguments)}var o,s;return extend(e,t),s=null,o=null,e.prototype.initialize=function(t){return $.showHeaderAndLeftNav(),s=t.model,this.classID=t.classID,this.mode=t.mode,this.division=t.division,this.studentCollection=t.studentCollection,this.questionResponseCollection=t.questionResponseCollection,this.questionResponseCollection||(this.questionResponseCollection=i.request("get:question:response:collection",{division:this.division,collection_id:s.get("id")})),this.studentCollection||("training"===this.mode?this.studentCollection=i.request("get:dummy:students"):this.studentCollection=i.request("get:user:collection",{role:"student",division:this.division})),i.execute("when:fetched",s,function(t){return function(){var e;return"ERROR"===s.get("code")?(i.execute("show:no:permissions:app",{region:i.mainContentRegion,error_header:"Unauthorized Training Module",error_msg:s.get("error_msg")}),!1):(o=i.request("get:content:pieces:by:ids",s.get("content_pieces")),t.layout=e=t._getContentGroupViewLayout(),t.show(t.layout,{loading:!0,entities:[s,t.questionResponseCollection,o,t.textbookNames,t.studentCollection]}),t.listenTo(t.layout,"show",t.showContentGroupViews),t.listenTo(t.layout.collectionDetailsRegion,"start:teaching:module",t.startTeachingModule),t.listenTo(t.layout.contentDisplayRegion,"goto:question:readonly",function(e){return t.gotoTrainingModule(e,"readonly")}))}}(this))},e.prototype.startTeachingModule=function(){var t,e,i,n,o;return n=this.questionResponseCollection.where({status:"completed"}),window.f=n,o=_.chain(n).map(function(t){return t.toJSON()}).pluck("content_piece_id").value(),e=s.get("content_pieces"),e&&(t=_.map(e,function(t){return parseInt(t)})),i=_.first(_.difference(t,o)),"archive"===s.get("post_status")?this.gotoTrainingModule(i,"readonly"):this.gotoTrainingModule(i,"class_mode")},e.prototype.gotoTrainingModule=function(t,e){return"training"===this.mode&&(e="training"),i.execute("start:teacher:teaching:app",{region:i.mainContentRegion,division:this.division,contentPiece:o.get(t),questionResponseCollection:this.questionResponseCollection,contentGroupModel:s,questionsCollection:o,classID:this.classID,studentCollection:this.studentCollection,display_mode:e})},e.prototype.showContentGroupViews=function(){var t;return t=_.flatten(s.get("term_ids")),this.textbookNames=i.request("get:textbook:names:by:ids",t),i.execute("when:fetched",this.textbookNames,function(t){return function(){return i.execute("show:viewgroup:content:group:detailsapp",{region:t.layout.collectionDetailsRegion,model:s,mode:t.mode,questionResponseCollection:t.questionResponseCollection,textbookNames:t.textbookNames}),_.size(s.get("content_pieces"))>0?i.execute("show:viewgroup:content:displayapp",{region:t.layout.contentDisplayRegion,model:s,mode:t.mode,questionResponseCollection:t.questionResponseCollection,groupContentCollection:o,studentCollection:t.studentCollection}):void 0}}(this))},e.prototype._getContentGroupViewLayout=function(){return new n},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="teacher-app"> <div id="collection-details-region"></div> </div> <div id="content-display-region"></div>',e.prototype.className="",e.prototype.regions={collectionDetailsRegion:"#collection-details-region",contentDisplayRegion:"#content-display-region"},e}(Marionette.Layout),i.commands.setHandler("show:single:module:app",function(e){return null==e&&(e={}),new t.GroupController(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/teachers-dashboard/teachers-dashboard-app",["app","apps/teachers-dashboard/dashboard/dashboard-controller","apps/teachers-dashboard/take-class/take-class-controller","apps/teaching-modules/textbook-modules-controller","apps/content-modules/view-single-module/single-module-controller"],function(t){return t.module("TeachersDashboardApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"":"dashboardRedirect","teachers/dashboard":"teachersDashboard","teachers/take-class/:classID/:div":"takeClass","teachers/take-class/:classID/:div/textbook/:tID":"takeClassTextbookModules","teachers/start-training/:classID":"startTraining","teachers/start-training/:classID/textbook/:tID":"startTrainingTextbookModules","students/dashboard":"studentsDashboard","students/dashboard/textbook/:tID":"studentsQuizModules"},e}(Marionette.AppRouter),i={dashboardRedirect:function(){return $.allowRoute("dashboard")&&(e.request("current:user:can","view_all_textbooks")&&e.navigate("textbooks",{trigger:!0}),e.request("current:user:can","teacher")&&(e.navigate("teachers/dashboard"),this.teachersDashboard()),e.request("current:user:can","student"))?($("body").hide(),window.location.href=SITEURL+"/dashboard-student"):void 0},teachersDashboard:function(){return $.allowRoute("dashboard")?new t.View.DashboardController({region:e.mainContentRegion}):void 0},takeClass:function(i,n){return $.allowRoute("dashboard")?new t.View.TakeClassController({region:e.mainContentRegion,classID:i,division:n,mode:"take-class"}):void 0},startTraining:function(i){return $.allowRoute("dashboard")?new t.View.TakeClassController({region:e.mainContentRegion,classID:i,mode:"training"}):void 0},takeClassTextbookModules:function(i,n,o){return $.allowRoute("dashboard")?new t.View.textbookModulesController({region:e.mainContentRegion,textbookID:o,classID:i,division:n,mode:"take-class"}):void 0},startTrainingTextbookModules:function(i,n){return $.allowRoute("dashboard")?new t.View.textbookModulesController({region:e.mainContentRegion,textbookID:n,classID:i,mode:"training"}):void 0},studentsDashboard:function(){var t;return $.allowRoute("dashboard")?(t=e.request("get:user:data","division"),e.execute("show:take:class:textbooks:app",{region:e.mainContentRegion,division:t,mode:"take-quiz"})):void 0},studentsQuizModules:function(i){var n;return $.allowRoute("dashboard")?(n=e.request("get:user:data","division"),new t.View.textbookModulesController({region:e.mainContentRegion,textbookID:i,division:n,mode:"take-quiz"})):void 0}},t.on("start",function(){return new n({controller:i})})})}),define("text!apps/quiz-reports/class-report/templates/class-report-layout.html",[],function(){return'<div class="grid-title no-border">\n    <h4 class="">Get your class <span class="semi-bold">Quiz Reports</span></h4>\n    <div class="tools">\n        <a href="javascript:;" class="collapse"></a>\n    </div>\n</div>\n\n<div class="grid-body no-border contentSelect" style="overflow: hidden; display: block;">\n    <div class="row m-b-20">\n        <div class="col-md-3"><span class="small">Number of Students :</span> <span id="students-count"></span></div>\n        <div class="col-md-9" id="students-filter-region"></div>\n    </div>\n    <div id="filters-region" class="m-b-10"></div>\n\n    <ul class="nav nav-tabs b-grey b-l b-r b-t" id="addContent">\n      <li class="active"><a href="#all-content-region"><span class="semi-bold">All</span> Quizzes</a></li>\n      <li><a href="#search-results-region"><span class="semi-bold">Search</span> Quiz</a></li>\n    </ul>\n\n    <div id="tab-content" class="tab-content" >\n        <div id="all-content-region" class="tab-pane active"></div>\n        <div id="search-results-region" class="tab-pane"></div>\n    </div>\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/class-report-layout",["app","controllers/region-controller","text!apps/quiz-reports/class-report/templates/class-report-layout.html"],function(t,e,i){return t.module("ClassReportApp.Layout",function(t,e){return t.ContentPiecesLayout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.className="tiles white grid simple vertical green",e.prototype.regions={studentFilterRegion:"#students-filter-region",filtersRegion:"#filters-region",allContentRegion:"#all-content-region",searchResultsRegion:"#search-results-region"},e.prototype.events={"click #addContent a":"changeTab"},e.prototype.onShow=function(){return this.onChangeDivision(Marionette.getOption(this,"students"))},e.prototype.onChangeDivision=function(t){return this.$el.find("#students-count").html(_.size(t))},e.prototype.changeTab=function(t){return t.preventDefault(),this.$el.find("#addContent a").removeClass("active"),$(t.target).closest("a").addClass("active").tab("show")},e}(Marionette.Layout)})}),define("text!apps/quiz-reports/class-report/modules-listing/templates/outer-template.html",[],function(){return'<style>\n    \n.flexContainer{\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n}\n.flexContainer .flexChild{\n    margin: 0 5px;\n}\n\n</style>\n\n<div class="col-lg-12">\n\n        <div class="flexContainer">\n            <div class="flexChild">\n                <button class="send-email none btn btn-success m-b-10 m-r-10" type="submit">\n                        <i class="fa fa-check"></i> Send Email\n                </button>\n            </div>\n\n            <div class="flexChild">\n                <div class="input-append success date">\n                    <input type="text" name="start_date" id="start_date" class="input-small span12" placeholder="start date">\n                    <span class="add-on">\n                    <span class="arrow"></span>\n                    <i class="fa fa-calendar"></i>\n                    </span>\n                </div>\n            </div>\n\n            <div class="flexChild">\n                <div class="input-append success date">\n                <input placeholder="end date" type="text" name="end_date" id="end_date" class="input-small span12">\n                <span class="add-on">\n                <span class="arrow"></span>\n                <i class="fa fa-calendar"></i>\n                </span>                            \n                </div>\n            </div>\n\n            <div class="flexChild">\n                <button class="send-summary btn btn-success m-b-10 m-r-10" type="submit">\n                        Send Summary\n                </button>\n            </div>\n\n        </div>\n\n\n    <table class="table table-bordered m-t-10" id="content-pieces-table" >\n        <thead>\n            <tr>\n                <th style="width:4%">\n                    <div id="check_all_div" class="checkbox check-default" style="margin-right:auto;margin-left:auto;">\n                        <input id="check_all" type="checkbox">\n                        <label for="check_all"></label>\n                    </div>\n                </th>\n                <th>Quiz Name</th>\n                <th>Textbook</th>\n                <th>Chapter</th>\n                <th>Duration</th>\n                <th>Type</th>\n                <th>Taken By</th>\n                {{#can_schedule}}\n                    <th>Schedule</th>\n                {{/can_schedule}}\n                <th></th>\n            </tr>\n        </thead>\n\n        <tbody id="list-content-pieces" aria-relevant="all" aria-live="polite" role="alert" data-link="row" class="rowlink">\n\n\n        </tbody>\n    </table>\n    <div id="pager" class="pager">\n        <i class="cursor fa fa-chevron-left prev"></i>\n        <span style="padding:0 15px"  class="pagedisplay"></span>\n        <i class="cursor fa fa-chevron-right next"></i>\n        <select class="pagesize">\n            <option selected value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n        </select>\n    </div>\n\n    <button class="send-email none btn btn-success pull-left m-t-10 m-r-10" type="submit">\n        <i class="fa fa-check"></i> Send Email\n    </button>\n\n    <!--button class="send-summary btn btn-success m-b-10 m-r-10" type="submit" style="margin-top: 0.8%;">\n        <i class="fa fa-check"></i> Send Summary\n    </button-->\n    <!--\n    <button id="send-sms" class="none btn btn-info btn-cons2 right pull-left m-t-10" type="submit">\n        <i class="fa fa-check"></i> Send SMS\n    </button>-->\n\n</div>';
});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/modules-listing/item-views",["app","bootbox"],function(t,e){return t.module("ClassQuizReportListing.Views",function(t,i,n,o,s,r){return t.ListItemView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.tagName="tr",n.prototype.className="gradeX odd",n.prototype.template='<td class="v-align-middle"><div class="checkbox check-default"> <input class="tab_checkbox" type="checkbox" value="{{id}}" id="checkbox{{id}}"> <label for="checkbox{{id}}"></label> </div> </td> <td>{{name}}</td> <td>{{&textbookName}}</td> <td>{{&chapterName}}</td> <td>{{duration}} mins</td> <td>{{quiz_type}}</td> <td>{{taken_by}}</td> {{#can_schedule}} <td> {{#class_test}} <div class="schedule_dates none"> From: <span id="schedule-from-date"> {{scheduleFrom}} </span> <br> To: <span id="schedule-to-date"> {{scheduleTo}} </span><br> <span class="schedule-quiz">change</a></span> | <span class="clear-schedule">clear</a> </div> <button id="schedule-button" type="button" class="btn btn-white btn-small pull-left m-r-10 schedule-quiz"> <i class="fa fa-calendar"></i> Schedule </button> {{/class_test}} </td> {{/can_schedule}} <td><button class="btn btn-small btn-success view-report">view report</button></td>',n.prototype.mixinTemplateHelpers=function(t){var e,n,s;return s=o.getOption(this,"textbookNamesCollection"),n=t.term_ids,t.textbookName=s.getTextbookName(n),t.chapterName=s.getChapterName(n),"class_test"===t.quiz_type&&(t.class_test=!0),t.quiz_type=this.model.getQuizTypeLabel(),t.taken_by=function(){switch(t.taken_by){case 0:return"None";case 1:return"1 Student";default:return parseInt(t.taken_by)===parseInt(t.totalStudents)?"All":t.taken_by+" Students"}}(),"class_test"===this.model.get("quiz_type")&&this.model.get("schedule")&&(e=this.model.get("schedule"),t.scheduleFrom=e.from,t.scheduleTo=e.to),i.request("current:user:can","schedule_quiz")&&(t.can_schedule=!0),t},n.prototype.events={"click .view-report":function(){return this.trigger("view:quiz:report",this.model.id)},"click .schedule-quiz":function(){return this.trigger("schedule:quiz",this.model.id)},"click .clear-schedule":"clearSchedule"},n.prototype.modelEvents={"change:schedule":"changeScheduleDates"},n.prototype.onShow=function(){return"class_test"===this.model.get("quiz_type")&&this.model.get("schedule")?(this.$el.find(".schedule_dates").show(),this.$el.find("#schedule-button").hide()):void 0},n.prototype.changeScheduleDates=function(){var t,e,i;return e=this.model.get("schedule"),t=e.from,i=e.to,console.log(t),console.log(i),console.log(e),t&&i?(this.$el.find("#schedule-from-date").html(t),this.$el.find("#schedule-to-date").html(i),this.$el.find(".schedule_dates").show(),this.$el.find("#schedule-button").hide()):(this.$el.find(".schedule_dates").hide(),this.$el.find("#schedule-button").show())},n.prototype.clearSchedule=function(){return e.confirm("Are you sure you want to clear the scheduled date?",function(t){return function(e){return e?t.trigger("clear:schedule",t.model.id):void 0}}(this))},n}(o.ItemView),t.EmptyView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="No Content Available",e.prototype.tagName="td",e.prototype.onShow=function(){return this.$el.attr("colspan",7)},e}(o.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/modules-listing/composite-view",["app","text!apps/quiz-reports/class-report/modules-listing/templates/outer-template.html","apps/quiz-reports/class-report/modules-listing/item-views"],function(t,e){return t.module("ClassQuizReportListing.Views",function(i){return i.ModulesListingView=function(n){function o(){return this.onResetTextbookNames=bind(this.onResetTextbookNames,this),o.__super__.constructor.apply(this,arguments)}return extend(o,n),o.prototype.template=e,o.prototype.className="row",o.prototype.itemView=i.ListItemView,o.prototype.emptyView=i.EmptyView,o.prototype.itemViewContainer="#list-content-pieces",o.prototype.itemViewOptions=function(){return{textbookNamesCollection:this.textbookNamesCollection}},o.prototype.events={"change #check_all_div":function(){return $.toggleCheckAll(this.$el.find("#content-pieces-table"))},"change .tab_checkbox,#check_all_div ":"showSubmitButton","click .send-email, .send-sms":"saveCommunications","click .send-summary":"saveSummaryCommunication"},o.prototype.initialize=function(){return this.textbookNamesCollection=Marionette.getOption(this,"textbookNamesCollection")},o.prototype.mixinTemplateHelpers=function(e){return t.request("current:user:can","schedule_quiz")&&(e.can_schedule=!0),e},o.prototype.onShow=function(){return this.$el.find("#start_date").datetimepicker({useCurrent:!1,format:"YYYY-MM-DD"}),this.$el.find("#end_date").datetimepicker({useCurrent:!1,format:"YYYY-MM-DD"}),this.$el.find("#start_date").on("dp.change",function(t){return function(t){return $("#end_date").data("DateTimePicker").minDate(t.date)}}(this)),this.$el.find("#content-pieces-table").tablesorter(),this.onUpdatePager()},o.prototype.onUpdatePager=function(){var t;return this.$el.find(".communication_sent").remove(),this.$el.find("#content-pieces-table").trigger("updateCache"),t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("#content-pieces-table").tablesorterPager(t)},o.prototype.onResetTextbookNames=function(t){return this.textbookNamesCollection.reset(t.models),this.collection.trigger("reset"),this.onUpdatePager()},o.prototype.showSubmitButton=function(){return this.$el.find(".tab_checkbox").is(":checked")?this.$el.find(".send-email, .send-sms").show():this.$el.find(".send-email, .send-sms, .communication_sent").hide()},o.prototype.saveSummaryCommunication=function(t){var e,i,n,o,s;return this.$el.find(".communication_sent").hide(),this.$el.find(".input-small").removeClass("error"),i=this.$el.find("#start_date").val(),e=this.$el.find("#end_date").val(),""===i||""===e?(this.$el.find(".communication_sent").hide(),this.$el.find(".input-small").addClass("error")):(console.log(i),console.log(e),console.log("summary"),o=[],this.$el.find(".communication-sent").remove(),n=_.map($.getAllItems(this.$el.find("#content-pieces-table")),function(t){return parseInt(t)}),console.log(n),s=_.chain(this.collection.where({taken_by:0})).pluck("id").value(),o.quizIDs=_.difference(n,s),console.log(o.quizIDs),o.division=this.$el.find("#divisions-filter").val(),console.log(o.division),$(t.target).hasClass("send-summary")?o.communication_mode="email":o.communication_mode="sms",o.start_date=i,o.end_date=e,_.isEmpty(o.quizIDs)?this.$el.find(".send-summary").after('<span class="m-l-40 text-error small communication_sent"> Selected quizzes have not been taken by any student</span>'):(console.log(o),this.trigger("summary:communication",o)))},o.prototype.saveCommunications=function(t){var e,i,n;return i=[],this.$el.find(".communication_sent").remove(),e=_.map($.getCheckedItems(this.$el.find("#content-pieces-table")),function(t){return parseInt(t)}),n=_.chain(this.collection.where({taken_by:0})).pluck("id").value(),i.quizIDs=_.difference(e,n),console.log(i.quizIDs),i.division=this.$el.find("#divisions-filter").val(),console.log(i.division),$(t.target).hasClass("send-email")?i.communication_mode="email":i.communication_mode="sms",_.isEmpty(i.quizIDs)?this.$el.find(".send-email").after('<span class="text-error small communication_sent"> Selected quizzes have not been taken by any student</span>'):this.trigger("save:communications",i)},o}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/modules-listing/controller",["app","controllers/region-controller","apps/quiz-reports/class-report/modules-listing/composite-view"],function(t,e){return t.module("ClassQuizReportListing",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getContentModulessListingView=bind(this._getContentModulessListingView,this),this._getAllTermIDs=bind(this._getAllTermIDs,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.contentModulesCollection=t.contentModulesCollection,this.textbooksCollection=t.textbooksCollection,this.textbookNamesCollection=null,i.execute("when:fetched",[this.contentModulesCollection,this.textbooksCollection],function(t){return function(){var e;return e=t._getAllTermIDs(),t.textbookNamesCollection=i.request("get:textbook:names:by:ids",e),i.execute("when:fetched",t.textbookNamesCollection,function(){var n;return t.view=n=t._getContentModulessListingView(),t.show(n,{loading:!0,entities:[t.contentModulesCollection,t.textbooksCollection]}),t.listenTo(t.region,"update:pager",function(){var n;return e=t._getAllTermIDs(),n=i.request("get:textbook:names:by:ids",e),i.execute("when:fetched",n,function(){return t.view.triggerMethod("reset:textbook:names",n)})}),t.listenTo(t.view,"itemview:view:quiz:report",t._showQuizReportApp),t.listenTo(t.view,"itemview:clear:schedule",function(t,e){return this.region.trigger("clear:schedule",this.contentModulesCollection.get(e))}),t.listenTo(t.view,"itemview:schedule:quiz",function(t,e){return this.region.trigger("schedule:quiz",this.contentModulesCollection.get(e))}),t.listenTo(t.view,"save:communications",function(e){return t.region.trigger("save:communications",e)}),t.listenTo(t.view,"summary:communication",function(e){return t.region.trigger("summary:communication",e)})})}}(this))},n.prototype._getAllTermIDs=function(){return r.chain(this.contentModulesCollection.pluck("term_ids")).map(function(t){return r.values(t)}).flatten().unique().compact().value()},n.prototype._showQuizReportApp=function(t,e){return this.region.trigger("show:quiz:report",this.contentModulesCollection.get(e))},n.prototype._getContentModulessListingView=function(){return new t.Views.ModulesListingView({collection:this.contentModulesCollection,textbookNamesCollection:this.textbookNamesCollection})},n}(e),i.commands.setHandler("show:list:quiz:report:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/student-filter/views",["app","controllers/region-controller"],function(t,e){return t.module("StudentsFilterApp",function(t,e,i,n,o,s){return t.StudentsFilterView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<span class="small">View quizzes taken by:</span> <select id="student-name" class="textbook-filter select-student"> <option value="">-student name-</option> {{#students}} <option value="{{ID}}">{{display_name}}</option> {{/students}} </select> <span class="small">or:</span> <select class="textbook-filter select-student"> <option value="">-roll number-</option> {{#students}} <option value="{{ID}}">{{roll_no}}</option> {{/students}} </select> <button class="btn btn-success btn-small view-student">View Student</button> </div>',e.prototype.events={"change .select-student":function(t){return this.$el.find(".select-student").select2("val",o(t.target).val())},"click .view-student":function(){var t;return t=this.$el.find("#student-name").val(),t?this.trigger("view:student:report",t):void 0}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.students=this.students.toJSON(),t},e.prototype.initialize=function(){return this.students=n.getOption(this,"students")},e.prototype.onShow=function(){return this.$el.find("select").select2()},e}(n.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/student-filter/student-filter-app",["app","controllers/region-controller","apps/quiz-reports/student-filter/views"],function(t,e){return t.module("StudentsFilterApp",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.students=t.students,this.view=this._getStudentsFilterView(),this.show(this.view,{loading:!0}),this.listenTo(this.region,"change:division",function(t){return this.students.reset(t.models),this.show(this.view)}),this.listenTo(this.view,"view:student:report",function(t){return i.navigate("quiz-report/student/"+t),i.execute("show:student:report:app",{region:i.mainContentRegion,students:this.students,student_id:t})})},n.prototype._getStudentsFilterView=function(){return new t.StudentsFilterView({students:this.students})},n}(e),i.commands.setHandler("show:student:filter:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/search-results-app",["app","controllers/region-controller"],function(t,e){return t.module("ClassReportApp.SearchResults",function(t,i,n,o,s,r){var a;return t.Controller=function(t){function e(){return this._searchContent=bind(this._searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.textbooksCollection=t.textbooksCollection,this.selectedFilterParamsObject=t.selectedFilterParamsObject,this.layout=e=this._getSearchResultsLayout(),this.searchCollection=i.request("empty:content:modules:collection"),this.show(e,{loading:!0}),this.listenTo(this.layout,"show",function(t){return function(){return i.execute("show:list:quiz:report:app",{region:t.layout.contentSelectionRegion,contentModulesCollection:t.searchCollection,textbooksCollection:t.textbooksCollection})}}(this)),this.listenTo(this.layout,"search:content",this._searchContent),this.listenTo(this.layout.contentSelectionRegion,"show:quiz:report",function(t){return this.region.trigger("show:quiz:report",t)})},e.prototype._searchContent=function(t){var e;return e=this.selectedFilterParamsObject.request("get:parameters:for:search"),this.newCollection=i.request("get:quizes",{search_str:t,textbook:null!=e.term_id?e.term_id:void 0,division:null!=e.division?e.division:void 0}),i.execute("when:fetched",this.newCollection,function(t){return function(){return t.searchCollection.reset(t.newCollection.models),t.layout.contentSelectionRegion.trigger("update:pager"),t.layout.$el.find(".progress-spinner").hide()}}(this))},e.prototype._getSearchResultsLayout=function(){return new a},e}(e),a=function(t){function e(){return this.searchContent=bind(this.searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='Search: <input type="text" class="search-box" id="search-box"> <button class="btn btn-success btn-cons2" id="search-btn"> <i class="none progress-spinner fa fa-spinner fa-spin"></i> Search </button> <label id="error-div" class="none"><span class="small text-error">Please enter the search keyword</span></label> <div id="content-selection-region"></div>',e.prototype.regions={contentSelectionRegion:"#content-selection-region"},e.prototype.events={"click #search-btn":"searchContent","keypress .search-box":function(t){return 13===t.which?this.searchContent():void 0}},e.prototype.searchContent=function(){var t;return t=r.trim(this.$el.find("#search-box").val()),t?(this.$el.find("#error-div").hide(),this.$el.find(".progress-spinner").show(),this.trigger("search:content",t)):this.$el.find("#error-div").show()},e}(o.Layout)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/schedule-quiz-app",["app","controllers/region-controller"],function(t,e){return t.module("ScheduleQuizPopup",function(t,i){var n;return t.Controller=function(t){function e(){return this._getScheduleQuizView=bind(this._getScheduleQuizView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){return this.division=t.division,this.quizModel=t.quizModel,this.view=this._getScheduleQuizView(),this.show(this.view),this.listenTo(this.view,"close:popup:dialog",function(){return this.region.closeDialog()}),this.listenTo(this.view,"save:quiz:schedule",function(t,e){var n,o;return this.quizModel.set({schedule:{from:t,to:e}}),n={quiz_id:this.quizModel.id,division:this.division,schedule:{from:t,to:e}},o=i.request("save:quiz:schedule",n),o.done(function(t){return function(e){return t.view.triggerMethod("schedule:saved",e)}}(this))})},e.prototype._getScheduleQuizView=function(){return new n({model:this.quizModel})},e}(e),n=function(t){function e(){return this.saveScheduled=bind(this.saveScheduled,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<form> <div class="row"> <div class="input-daterange"> <div class="col-md-6"> From: <br> <div class="input-append success date"> <input id="scheduleFrom" name="scheduleFrom" type="text" required="required" value="{{schedule.from}}" placeholder="Select Date" class="input-small span12"> <span class="add-on"><span class="arrow"></span><i class="fa fa-calendar"></i></span> </div> </div> <div class="col-md-6"> To:  <br> <div class="input-append success date"> <input id="scheduleTo" name="scheduleTo" type="text" required="required" value="{{schedule.to}}" placeholder="Select Date" class="input-small span12"> <span class="add-on"><span class="arrow"></span><i class="fa fa-calendar"></i></span> </div> </div> </div> <div class="row"> <div class="col-md-12"> <button type="button" class="clear btn btn-success m-t-20 pull-left">Schedule Quiz</button> <div class=" p-l-10 p-t-30 pull-left success-msg"></div> </div> </div> </div> </form>',e.prototype.events={"click .btn-success":"saveScheduled"},e.prototype.initialize=function(){return this.dialogOptions={modal_title:"Schedule Quiz",modal_size:"small"}},e.prototype.onShow=function(){var t;return t=new Date,this.$el.find(".input-daterange").datepicker({todayHighlight:!0,startDate:t,format:"yyyy-mm-dd"}).on("hide",function(t){return function(e){return"scheduleFrom"===e.target.id?t.$el.find("#scheduleTo").datepicker("setStartDate",e.date):void 0}}(this))},e.prototype.saveScheduled=function(t){var e,i;return this.$el.find("form").valid()?(e=this.$el.find("#scheduleFrom").val(),i=this.$el.find("#scheduleTo").val(),this.trigger("save:quiz:schedule",e,i)):void 0},e.prototype.onScheduleSaved=function(t){return this.$el.find(".success-msg").html("").removeClass("text-success, text-error"),"ERROR"===t.code?this.$el.find(".success-msg").html("Failed to save schedule").addClass("text-error"):(this.$el.find(".success-msg").html("Saved Successfully").addClass("text-success"),setTimeout(function(t){return function(){return t.trigger("close:popup:dialog")}}(this),500))},e}(Marionette.ItemView),i.commands.setHandler("show:schedule:quiz:popup",function(e){return new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/recipients-popup/item-view",["app","bootbox","apps/quiz-reports/class-report/recipients-popup/item-view"],function(t,e){return t.module("QuizRecipientsPopup.Views",function(t){return t.RecipientsItemView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="tr",e.prototype.className="gradeX odd",e.prototype.template=' <td class="v-align-middle"><div class="checkbox check-default"> <input class="tab_checkbox" type="checkbox" value="{{id}}"> <label for="checkbox{{id}}"></label> </div> </td> <td>{{parent_name}}</td> <td>{{parent_email}}</td> <td>{{student_name}}</td> {{#quiz_component}} <td>{{quiz_name}}</td> {{/quiz_component}} <td><button class="btn btn-info pull-left email-preview"> <i class="progress-spinner fa fa-spinner fa-spin none"></i> Preview</button> </td>',e.prototype.events={"click .email-preview":function(t){return $(t.target).find("i").removeClass("none"),this.trigger("preview:email",this.model.id)}},e.prototype.onShowPreview=function(t){var e;return this.$el.find(".email-preview i").addClass("none"),e=window.open("","Test","width=650,height=800,scrollbars=1,resizable=1"),e.document.writeln(t)},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/recipients-popup/composite-view",["app","apps/quiz-reports/class-report/recipients-popup/item-view"],function(t){return t.module("QuizRecipientsPopup.Views",function(t,e,i,n,o,s){return t.RecipientsView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.template='<table class="table table-bordered tiles white"> <thead> <tr> <th><div id="check_all_div" class="checkbox check-default" style="margin-right:auto;margin-left:auto;"> <input id="check_all" type="checkbox"> <label for="check_all"></label> </div></th> <th>Recipient Name (Parents)</th> <th>Recipient Email</th> <th>Student Name</th> {{#quiz_component}} <th>Quiz</th> {{/quiz_component}} <th></th> </tr> </thead> <tbody id="list-recipients" class="rowlink"></tbody> </table> <button class="send-email pull-left m-l-20 none btn btn-success m-t-10" type="submit"> <i class="fa fa-check"></i> Send Email </button> <p class="email_specific m-l-40 text-default" style="font-size:15px;">&nbsp;</p>',i.prototype.itemView=t.RecipientsItemView,i.prototype.itemViewContainer="#list-recipients",i.prototype.className="row",i.prototype.events={"change #check_all_div":function(){return o.toggleCheckAll(this.$el.find("table"))},"change .tab_checkbox,#check_all_div ":"showSubmitButton","click .send-email":"sendEmail"},i.prototype.initialize=function(){return"quiz_published_parent_mail"===this.model.get("communication_type")?this.dialogOptions={modal_title:"New Quizzes"}:"quiz_summary_parent_mail"===this.model.get("communication_type")?this.dialogOptions={modal_title:"Summary Report"}:this.dialogOptions={modal_title:"Confirm Recipients"}},i.prototype.onShow=function(){return"quiz_published_parent_mail"===this.model.get("communication_type")||"quiz_summary_parent_mail"===this.model.get("communication_type")?(this.$el.find(".email_specific").text("*The Emails will be sent to the entire class. One student is randomly picked for email preview"),this.$el.find("#check_all_div").trigger("click"),this.$el.find("#check_all").prop("disabled",!0),this.$el.find(".checkbox").prop("disabled",!0)):this.$el.find("#check_all_div").trigger("click")},i.prototype.mixinTemplateHelpers=function(t){var e;return t=i.__super__.mixinTemplateHelpers.call(this,t),console.log(t),console.log(this.model.get("communication_type")),"quiz_completed_parent_mail"===this.model.get("communication_type")?e=!0:void 0},i.prototype.showSubmitButton=function(){return this.$el.find(".tab_checkbox").is(":checked")?this.$el.find(".send-email").show():this.$el.find(".send-email").hide()},i.prototype.sendEmail=function(){var t,e,i,n,r,a,l,c;return console.log(this.model),console.log(this.model.get("additional_data")),t=this.model.get("additional_data"),a=t.quiz_ids,r=t.division,this.$el.find(".communication_sent").remove(),e=s.map(o.getCheckedItems(this.$el.find("table")),function(t){return parseInt(t)}),l=s.map(e,function(t){return function(e,i){return t.collection.get(e).toJSON()}}(this)),console.log(l),null===r&&(r=l[0].student_division,console.log(r)),("quiz_published_parent_mail"===this.model.get("communication_type")||"quiz_summary_parent_mail"===this.model.get("communication_type"))&&(i={component:"quiz",communication_type:this.model.get("communication_type"),communication_mode:this.model.get("communication_mode"),priority:0,recipients:[],additional_data:{quiz_ids:a,division:r},status:"OK"},console.log(i),c=AJAXURL+"?action=get-communication-recipients",n=o.Deferred(),o.ajax({type:"POST",url:c,data:i,dataType:"json",async:!0,success:function(r){return function(u,d,p){var h;return e=s.map(o.getCheckedItems(r.$el.find("table")),function(t){return parseInt(t)}),l=s.map(e,function(t,e){return r.collection.get(t).toJSON()}),console.log(l),console.log(l),t=r.model.get("additional_data"),console.log(t),t.raw_recipients=l,h=r.model.get("communication_id"),t.raw_recipients=u,console.log(r.model),r.model.save(),"quiz_published_parent_mail"===r.model.get("communication_type")&&(i={component:"quiz",communication_type:"quiz_published_parent_mail",communication_mode:"email",priority:0,recipients:[],additional_data:{quiz_ids:a,division:null,raw_recipients:u}},c=AJAXURL+"?action=create-communications",o.post(c,i,function(t,e){return console.log(t),n.resolve(t)},"json"),n.promise()),r.$el.find(".send-email").after('<p class="m-l-40 text-success small communication_sent"> &nbsp;Your Emails have been queued successfully</p>')}}(this)})),"quiz_summary_parent_mail"!==this.model.get("communication_type")&&"quiz_published_parent_mail"!==this.model.get("communication_type")?s.isEmpty(l)?this.$el.find(".send-email").after('<p class="m-l-40 text-error small communication_sent"> &nbsp;No Recipients Selected</p>'):(t=this.model.get("additional_data"),console.log(t),console.log(l),t.raw_recipients=l,console.log(this.odel),this.model.save(),console.log(this.model),this.$el.find(".send-email").after('<p class="m-l-40 text-success small communication_sent"> &nbsp;Your Emails have been queued successfully</p>')):void 0},i}(n.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/recipients-popup/controller",["app","controllers/region-controller","apps/quiz-reports/class-report/recipients-popup/composite-view"],function(t,e){return t.module("QuizRecipientsPopup",function(t,i){return t.Controller=function(e){function i(){return this._getSelectRecipientsView=bind(this._getSelectRecipientsView,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i;return console.log(t),this.communicationModel=t.communicationModel,i=this.communicationModel.getRecipients(),e=i,i.done(function(e){return function(i){var n;return n=new Backbone.Collection(i),("quiz_published_parent_mail"===t.communicationModel.attributes.communication_type||"quiz_summary_parent_mail"===t.communicationModel.attributes.communication_type)&&(n=new Backbone.Collection(i[0])),n.each(function(t,e){return t.set({id:e+1})}),console.log(n),e.view=e._getSelectRecipientsView(n),e.show(e.view),e.listenTo(e.view,"close:popup:dialog",function(){return this.region.closeDialog()}),e.listenTo(e.view,"itemview:preview:email",function(t,e){var i,o;return o=n.get(e),i=this.communicationModel.getPreview(o),i.done(function(e){return function(e){return t.triggerMethod("show:preview",e.html)}}(this))})}}(this))},i.prototype._getSelectRecipientsView=function(e,i){return new t.Views.RecipientsView({model:this.communicationModel,collection:e,data:i})},i}(e),i.commands.setHandler("show:quiz:select:recipients:popup",function(e){return new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/class-report/class-report-app",["app","controllers/region-controller","apps/quiz-reports/class-report/class-report-layout","apps/quiz-reports/class-report/modules-listing/controller","apps/quiz-reports/student-filter/student-filter-app","apps/quiz-reports/class-report/search-results-app","apps/quiz-reports/class-report/schedule-quiz-app","apps/quiz-reports/class-report/recipients-popup/controller"],function(t,e){return t.module("ClassReportApp",function(t,i){return t.Controller=function(e){function n(){return this._showViews=bind(this._showViews,this),this._fetchQuizzes=bind(this._fetchQuizzes,this),this._fetchTextbooks=bind(this._fetchTextbooks,this),this._fetchDivisions=bind(this._fetchDivisions,this),n.__super__.constructor.apply(this,arguments)}var o,s,r,a,l;return extend(n,e),a=null,l=null,o=null,r=null,s=null,n.prototype.initialize=function(){return this.division=0,r=i.request("get:all:schools"),i.execute("when:fetched",r,this._fetchDivisions)},n.prototype._fetchDivisions=function(){return o=i.request("get:divisions"),i.execute("when:fetched",o,this._fetchTextbooks)},n.prototype._fetchTextbooks=function(){var t,e;return t=o.first().get("class_id"),e=o.first().get("id"),l=i.request("get:textbooks",{class_id:t}),i.execute("when:fetched",l,function(t){return function(){}}(this)),i.execute("when:fetched",l,this._fetchQuizzes)},n.prototype._fetchQuizzes=function(){var t,e;return e=l.first(),this.division=o.first().get("id"),t={textbook:e.id,division:this.division},s=i.request("get:quizes",t),a=i.request("get:students:by:division",o.first().get("id")),i.execute("when:fetched",[s,a],this._showViews)},n.prototype._showViews=function(){return this.selectedFilterParamsObject=new Backbone.Wreqr.RequestResponse,this.layout=this._getContentPiecesLayout(),i.execute("when:fetched",a,function(t){return function(){return t.show(t.layout,{loading:!0})}}(this)),this.listenTo(this.layout,"show",function(e){return function(){return i.execute("show:textbook:filters:app",{region:e.layout.filtersRegion,collection:s,textbooksCollection:l,selectedFilterParamsObject:e.selectedFilterParamsObject,divisionsCollection:o,dataType:"quiz",filters:["divisions","textbooks","chapters","post_status_report"]},i.execute("when:fetched",a,function(){return i.execute("show:student:filter:app",{region:e.layout.studentFilterRegion,students:a}),i.execute("show:list:quiz:report:app",{region:e.layout.allContentRegion,contentModulesCollection:s,textbooksCollection:l}),new t.SearchResults.Controller({region:e.layout.searchResultsRegion,textbooksCollection:l,selectedFilterParamsObject:e.selectedFilterParamsObject})})),e.listenTo(e.layout.filtersRegion,"update:pager",function(){return e.layout.allContentRegion.trigger("update:pager")}),e.listenTo(e.layout.filtersRegion,"division:changed",function(t){return e.division=t,a=i.request("get:students:by:division",t),i.execute("when:fetched",a,function(){return e.layout.studentFilterRegion.trigger("change:division",a),
e.layout.triggerMethod("change:division",a)})}),e.listenTo(e.layout.allContentRegion,"show:quiz:report",e._showQuiz),e.listenTo(e.layout.searchResultsRegion,"show:quiz:report",e._showQuiz),e.listenTo(e.layout.allContentRegion,"save:communications",function(t){var n;return t={component:"quiz",communication_type:"quiz_completed_parent_mail",communication_mode:t.communication_mode,additional_data:{quiz_ids:t.quizIDs,division:e.division}},n=i.request("create:communication",t),e._showSelectRecipientsApp(n)}),e.listenTo(e.layout.allContentRegion,"summary:communication",function(t){var n;return t={component:"quiz",communication_type:"quiz_summary_parent_mail",communication_mode:t.communication_mode,additional_data:{quiz_ids:t.quizIDs,division:e.division,start_date:t.start_date,end_date:t.end_date}},console.log(t),n=i.request("create:communication",t),e._showSelectRecipientsApp(n)}),e.listenTo(e.layout.allContentRegion,"schedule:quiz",e._showScheduleQuizApp),e.listenTo(e.layout.allContentRegion,"clear:schedule",function(t){var n;return n=i.request("clear:quiz:schedule",t.id,e.division),n.done(function(e){return"OK"===e.code?t.set({schedule:!1}):void 0})})}}(this))},n.prototype._showScheduleQuizApp=function(t){return i.execute("show:schedule:quiz:popup",{region:i.dialogRegion,division:this.division,quizModel:t})},n.prototype._showSelectRecipientsApp=function(t){return console.log(t),i.execute("show:quiz:select:recipients:popup",{region:i.dialogRegion,communicationModel:t})},n.prototype._showQuiz=function(t){return i.navigate("quiz-report/div/"+this.division+"/quiz/"+t.id),i.execute("show:quiz:report:app",{region:i.mainContentRegion,division:o.get(this.division),students:a,quiz:t})},n.prototype._getContentPiecesLayout=function(){return new t.Layout.ContentPiecesLayout({students:a})},n}(e),i.commands.setHandler("show:class:report:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/quiz-report/quiz-report-layout",["app","controllers/region-controller"],function(t,e){return t.module("QuizReportApp.Layout",function(t,e){return t.QuizReportLayout=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template='<button type="button" id="go-back-button" class="btn btn-white btn-cons m-t-10"> <h4 class="bold  text-info no-margin"> <span class="fa fa-arrow-circle-left"></span> Back to List of Quizzes </h4> </button> <div class="tiles white grid simple vertical green"> <div class="grid-title no-border"> <h4 class="">Quiz<span class="semi-bold"> Report</span></h4> <div class="tools"> <a href="javascript:;" class="collapse"></a> </div> </div> <div class="grid-body no-border contentSelect" style="overflow: hidden; display: block;"> <div id="quiz-details-region"></div> <div class="row m-t-20 small"> <div class="col-md-4"> <span class="small">Taken By {{takenBy}} out of {{totalStudents}} students</span> </div> <div class="col-md-8" id="students-filter-region"></div> </div> <div id="students-list-region"></div> </div> </div>',i.prototype.regions={quizDetailsRegion:"#quiz-details-region",studentFilterRegion:"#students-filter-region",studentsListRegion:"#students-list-region"},i.prototype.events={"click #addContent a":"changeTab","click #go-back-button":function(){return e.navigate("quiz-report",!0)}},i.prototype.mixinTemplateHelpers=function(t){return t.totalStudents=_.size(Marionette.getOption(this,"students")),t.takenBy=Marionette.getOption(this,"takenBy"),t},i}(Marionette.Layout)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/quiz-report/quiz-details/quiz-details-app",["app","controllers/region-controller"],function(t,e){return t.module("QuizReportApp.QuizDetails",function(t,i){var n;return t.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.model=t.model,this.textbookNames=t.textbookNames,this.divisionModel=t.divisionModel,this.view=e=this._getQuizDescriptionView(),this.show(e)},e.prototype._getQuizDescriptionView=function(){var t;return t=this.model.get("term_ids"),new n({model:this.model,divisionModel:this.divisionModel,textbookNames:this.textbookNames})},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row m-b-10 p-t-10 b-grey b-t"> <div class="col-md-3"> Quiz Name: {{name}} </div> <div class="col-md-3"> Division: {{division}} </div> <div class="col-md-3"> Duration: {{duration}} min </div> <div class="col-md-3"> Total Marks: {{marks}} </div> </div> <div class="row m-b-10 p-b-10 b-grey b-b"> <div class="col-md-3"> Textbook: {{textbookName}} </div> <div class="col-md-3"> Chapter: {{chapterName}} </div> <div class="col-md-3"> Section: {{sectionNames}} </div> <div class="col-md-3"> Subsection: {{subSectionNames}} </div> </div>',e.prototype.className="small",e.prototype.mixinTemplateHelpers=function(t){var e,i,n;return n=Marionette.getOption(this,"textbookNames"),e=Marionette.getOption(this,"divisionModel"),i=t.term_ids,t.textbookName=n.getTextbookName(i),t.chapterName=n.getChapterName(i),t.sectionNames=n.getSectionsNames(i),t.subSectionNames=n.getSubSectionsNames(i),t.division=e.get("division"),t},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/quiz-report/students-list/item-views",["app","controllers/region-controller"],function(t,e){return t.module("QuizReportApp.StudentsList.Views",function(t,e){return t.ListItemView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="tr",e.prototype.className="gradeX odd",e.prototype.template='<td>{{roll_no}}</td> <td>{{display_name}}</td> <td>{{#answered}} Marks Scored: {{marks_scored}}<br> Negative Marks: {{negative_scored}}<br> Total Marks Scored: {{total_marks_scored}} {{/answered}} {{^answered}}N/A{{/answered}} </td> <td>{{#answered}}{{time_taken}}{{/answered}} {{^answered}}N/A{{/answered}} </td> <td>{{#answered}}Attempted: {{attempts}} <span class="view-attempts fa fa-plus-circle"></span>{{/answered}} {{^answered}}N/A{{/answered}} </td> <td>{{#answered}} <button class="btn btn-success btn-small replay_quiz" data-summary-id={{summary_id}}>Replay</button> {{/answered}} {{#not_taken}}Not Taken{{/not_taken}} {{#started}}Started{{/started}} </td>',e.prototype.mixinTemplateHelpers=function(t){var e,i,n;return n=Marionette.getOption(this,"summaries"),_.isEmpty(n)?t.not_taken=!0:(i=_.map(n,function(t){return"started"===t.get("status")?!0:!1}),i[0]?t.started=!0:(e=_.map(n,function(t){return"completed"===t.get("status")?t.toJSON():void 0}),t.answered=!0,t=_.extend(t,_.last(e)),t.attempts=_.size(n),t.time_taken=$.timeMinSecs(t.total_time_taken))),t},e.prototype.events={"click .replay_quiz":function(t){var e;return e=$(t.target).attr("data-summary-id"),this.trigger("replay:quiz",this.model.id,e)},"click .view-attempts":function(t){return this.trigger("view:attempts",this.model.id)}},e}(Marionette.ItemView),t.EmptyView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="No students registered to this class",e.prototype.tagName="td",e.prototype.onShow=function(){return this.$el.attr("colspan",6)},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/quiz-report/students-list/composite-view",["app","controllers/region-controller","apps/quiz-reports/quiz-report/students-list/item-views"],function(t,e){return t.module("QuizReportApp.StudentsList.Views",function(t,e){return t.StudentsDetailsView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.template='<div class="col-lg-12"> <table class="table table-bordered m-t-15" id="students-table" > <thead> <tr> <th>Roll No.</th> <th>Student Name</th> <th>Last Marks Obtained</th> <th>Time Taken</th> <th>Attempts</th> <th></th> </tr> </thead> <tbody id="list-students" class="rowlink"></tbody> </table> <div id="pager" class="pager"> <i class="cursor fa fa-chevron-left prev"></i> <span style="padding:0 15px"  class="pagedisplay"></span> <i class="cursor fa fa-chevron-right next"></i> <select class="pagesize"> <option selected value="25">25</option> <option value="50">50</option> <option value="100">100</option> </select> </div> </div>',i.prototype.className="row",i.prototype.itemView=t.ListItemView,i.prototype.emptyView=t.EmptyView,i.prototype.itemViewContainer="#list-students",i.prototype.itemViewOptions=function(t,e){var i,n;return i=Marionette.getOption(this,"quizResponseSummaries"),n=i.where({student_id:t.get("ID")}),{summaries:n}},i.prototype.onShow=function(){var t;return t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("#students-table").tablesorter().tablesorterPager(t)},i}(Marionette.CompositeView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/attempts/item-views",["app","controllers/region-controller"],function(t,e){return t.module("AttemptsPopupApp.Views",function(t,e){return t.AttemptsItemView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="tr",e.prototype.className="gradeX odd",e.prototype.template='<td>{{taken_on}}</td> <td>Marks Scored: {{marks_scored}}<br> Negative Marks: {{negative_scored}}<br> Total Marks Scored: {{total_marks_scored}}</td> <td>{{time_taken}}</td> <td><button class="btn btn-success btn-small replay_quiz" data-dismiss="modal">Replay</button></td>',e.prototype.mixinTemplateHelpers=function(t){return t.taken_on=moment(t.taken_on).format("Do MMM YYYY"),t.time_taken=$.timeMinSecs(t.total_time_taken),t},e.prototype.events={"click .replay_quiz":function(t){return this.trigger("replay:quiz",this.model.id)}},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/attempts/composite-view",["app","controllers/region-controller","apps/quiz-reports/attempts/item-views"],function(t,e){return t.module("AttemptsPopupApp.Views",function(t,e){return t.AttemptsMainView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.template='<table class="table table-bordered tiles white" id="attempts-list-table" > <thead> <tr> <th>Attempted On</th> <th>Marks Obtained</th> <th>Time Taken</th> <th></th> </tr> </thead> <tbody id="list-attempts" class="rowlink"></tbody> </table>',i.prototype.className="row col-lg-12",i.prototype.itemView=t.AttemptsItemView,i.prototype.itemViewContainer="#list-attempts",i.prototype.events={"click #confirm-yes":function(){return this.trigger("confirm:yes")},"click #alert-ok":function(){return this.trigger("alert:ok")},"click .comment-close":"_closeComment"},i.prototype.initialize=function(t){var e,i,n,o,s;return o=Marionette.getOption(this,"student"),s=o.get("display_name"),i=Marionette.getOption(this,"quiz"),n=i.get("name"),e="List of Attempts by "+s+" <span class='m-l-20'>Quiz Name : "+n+"</span>",this.dialogOptions={modal_title:e}},i}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/attempts/attempts-app",["app","controllers/region-controller","apps/quiz-reports/attempts/composite-view"],function(t,e){return t.module("AttemptsPopupApp",function(t,i){return t.Controller=function(e){function n(){return this._getAttemptsView=bind(this._getAttemptsView,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n,o;return n=t.student,e=t.quiz,o=t.summaries,this.studentModel=this._getStudentModel(n),this.quizModel=this._getQuizModel(e),this.summariesCollection=this._getSummaryCollection(o,e,n),i.execute("when:fetched",[this.studentModel,this.quizModel,this.summariesCollection],function(t){return function(){return t.view=t._getAttemptsView(),t.show(t.view),t.listenTo(t.view,"close:popup:dialog",function(){return this.region.closeDialog()}),t.listenTo(t.view,"itemview:replay:quiz",t._replay_quiz)}}(this))},n.prototype._replay_quiz=function(t,e){var n;return this.studentModel.id===i.request("get:loggedin:user:id")?i.navigate("view-quiz/"+this.quizModel.id):(i.navigate("quiz-report/student/"+this.studentModel.id+"/quiz/"+this.quizModel.id),n="quiz_report"),i.execute("show:single:quiz:app",{region:i.mainContentRegion,quizModel:this.quizModel,quizResponseSummary:this.summariesCollection.get(e),quizResponseSummaryCollection:this.summariesCollection,display_mode:n,student:this.studentModel})},n.prototype._getStudentModel=function(t){var e;return e=t instanceof Backbone.Model?t:i.request("get:user:by:id",t)},n.prototype._getQuizModel=function(t){var e;return e=t instanceof Backbone.Model?t:i.request("get:quiz:by:id",t)},n.prototype._getSummaryCollection=function(t,e,n){var o,s,r;return t?r=t instanceof Backbone.Collection?t:i.request("create:quiz:response:summary:collection",t):(o=_.isNumber(e)?e:e.id,s=_.isNumber(n)?n:n.id,r=i.request("get:quiz:response:summary",{collection_id:o,student_id:s})),r},n.prototype._getAttemptsView=function(){return new t.Views.AttemptsMainView({student:this.studentModel,quiz:this.quizModel,collection:this.summariesCollection})},n}(e),i.commands.setHandler("show:attempts:popup",function(e){return new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/quiz-report/students-list/student-list-app",["app","controllers/region-controller","apps/quiz-reports/quiz-report/students-list/composite-view","apps/quiz-reports/attempts/attempts-app"],function(t,e){return t.module("QuizReportApp.StudentsList",function(t,i){return t.Controller=function(e){function n(){return this._show_attempts_popup=bind(this._show_attempts_popup,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e;return this.students=t.students,this.quizModel=t.quizModel,this.quizResponseSummaries=t.quizResponseSummaries,this.view=e=this._getStudentsListView(this.students,this.quizModel,this.quizResponseSummaries),this.show(e),this.listenTo(this.view,"itemview:replay:quiz",this._replay_quiz),this.listenTo(this.view,"itemview:view:attempts",this._show_attempts_popup)},n.prototype._show_attempts_popup=function(t,e){return i.execute("show:attempts:popup",{region:i.dialogRegion,student:this.students.get(e),quiz:this.quizModel,summaries:this.quizResponseSummaries.where({student_id:e})})},n.prototype._replay_quiz=function(t,e,n){return i.execute("show:single:quiz:app",{region:i.mainContentRegion,quizModel:this.quizModel,quizResponseSummary:this.quizResponseSummaries.get(n),quizResponseSummaryCollection:this.quizResponseSummaries,display_mode:"quiz_report",student:this.students.get(e)})},n.prototype._getStudentsListView=function(e,i,n){return new t.Views.StudentsDetailsView({collection:e,quizModel:i,quizResponseSummaries:n})},n}(e)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/quiz-report/quiz-report-app",["app","controllers/region-controller","apps/quiz-reports/quiz-report/quiz-report-layout","apps/quiz-reports/quiz-report/quiz-details/quiz-details-app","apps/quiz-reports/student-filter/student-filter-app","apps/quiz-reports/quiz-report/students-list/student-list-app"],function(t,e){return t.module("QuizReportApp",function(t,i){return t.Controller=function(e){function n(){return this._showViews=bind(this._showViews,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n;return e=t.division,n=t.quiz,this.students=t.students,this.divisionModel=e instanceof Backbone.Model?e:i.request("get:division:by:id",e),this.quizModel=n instanceof Backbone.Model?n:i.request("get:quiz:by:id",n),i.execute("when:fetched",[this.divisionModel,this.quizModel],function(t){return function(){return t.students instanceof Backbone.Collection?t._showViews(t.students):(t.students=i.request("get:students:by:division",t.divisionModel.id),i.execute("when:fetched",t.students,function(){return t._showViews(t.students)}))}}(this))},n.prototype._showViews=function(e){var n;return n={student_ids:this.students.pluck("ID"),collection_id:this.quizModel.id},this.quizResponseSummaries=i.request("get:quiz:response:summary",n),i.execute("when:fetched",this.quizResponseSummaries,function(n){return function(){var o;return o=_.size(_.uniq(n.quizResponseSummaries.pluck("student_id"))),n.layout=n._getQuizReportLayout(e,o),n.show(n.layout,{loading:!0}),n.listenTo(n.layout,"show",function(){var o;return i.execute("show:student:filter:app",{region:n.layout.studentFilterRegion,students:e}),o=_.flatten(n.quizModel.get("term_ids")),n.textbookNames=i.request("get:textbook:names:by:ids",o),i.execute("when:fetched",n.textbookNames,function(){return new t.QuizDetails.Controller({region:n.layout.quizDetailsRegion,model:n.quizModel,textbookNames:n.textbookNames,divisionModel:n.divisionModel})}),new t.StudentsList.Controller({region:n.layout.studentsListRegion,students:e,quizModel:n.quizModel,quizResponseSummaries:n.quizResponseSummaries})})}}(this))},n.prototype._getQuizReportLayout=function(e,i){return new t.Layout.QuizReportLayout({students:e,takenBy:i})},n}(e),i.commands.setHandler("show:quiz:report:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/student-report/student-report-layout",["app","controllers/region-controller"],function(t,e){return t.module("StudentReportApp",function(t,e){return t.Layout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='{{#ownReport}} <div class="tiles white grid simple vertical green"> <div class="grid-title no-border"> <h4 class="">Quizzes Taken</h4> <div class="tools"> <a href="javascript:;" class="collapse"></a> </div> </div> {{/ownReport}} {{^ownReport}} <button type="button" class="btn btn-white btn-cons m-t-10 goto-prev-page"> <h4 class="bold  text-info no-margin"> <span class="fa fa-arrow-circle-left"></span> Back to List of Quizzes </h4> </button> <div class="tiles white grid simple vertical green"> <div class="grid-title no-border"> <h4 class="">Taken By: {{display_name}} <span class="m-l-20">Roll Number: {{roll_no}}</span></h4> <div class="tools"> <a href="javascript:;" class="collapse"></a> </div> </div> {{/ownReport}} <div class="grid-body no-border contentSelect"> {{^ownReport}} <div id="students-filter-region"></div> {{/ownReport}} <div id="quiz-list-region"></div> </div> </div>',e.prototype.regions={studentFilterRegion:"#students-filter-region",quizListRegion:"#quiz-list-region"},e.prototype.mixinTemplateHelpers=function(t){return"ownReport"===Marionette.getOption(this,"display_mode")&&(t.ownReport=!0),t},e}(Marionette.Layout)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/student-report/quiz-list/item-views",["app","controllers/region-controller"],function(t,e){return t.module("StudentReportApp.QuizList.Views",function(t,e){return t.ListItemView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="tr",e.prototype.className="gradeX odd",e.prototype.template='{{#allowResetQuiz}} <td class="v-align-middle"><div class="checkbox check-default"> <input class="tab_checkbox" type="checkbox" value="{{id}}" id="checkbox{{id}}"> <label for="checkbox{{id}}"></label> </div> </td> {{/allowResetQuiz}} <td>{{name}}</td> <td>{{textbookName}}</td> <td>{{chapterName}}</td> <td>Quiz Time: {{total_minutes}}m<br> Time Taken: {{time_taken}} </td> <td>{{quiz_type}} </td> <td>Marks Scored: {{marks_scored}}<br> Negative Marks: {{negative_scored}}<br> Total Marks Scored: {{total_marks_scored}} </td> <td>Attempted: {{attempts}} <span class="view-attempts fa fa-plus-circle"></span> </td> <td><button class="btn btn-success btn-small replay_quiz" data-summary-id={{summary_id}}>Replay</button></td>',e.prototype.mixinTemplateHelpers=function(t){var e,i,n;return i=Marionette.getOption(this,"summaries"),n=Marionette.getOption(this,"textbookNames"),_.isEmpty(i)||(e=_.map(i,function(t){return"completed"===t.get("status")?t.toJSON():void 0}),t.answered=!0,t=_.extend(t,_.last(e)),t.quiz_type=this.model.getQuizTypeLabel(),t.time_taken=$.timeMinSecs(t.total_time_taken),t.attempts=_.size(i)),t.textbookName=n.getTextbookName(t.term_ids),t.chapterName=n.getChapterName(t.term_ids),Marionette.getOption(this,"allowResetQuiz")&&(t.allowResetQuiz=!0),t},e.prototype.events={"click .replay_quiz":function(t){var e;return e=$(t.target).attr("data-summary-id"),this.trigger("replay:quiz",this.model.id,e)},"click .view-attempts":function(t){return this.trigger("view:attempts",this.model.id)}},e}(Marionette.ItemView),t.EmptyView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="This student hasn't taken any quizzes yet",e.prototype.tagName="td",e.prototype.onShow=function(){return this.$el.attr("colspan",7)},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/student-report/quiz-list/composite-view",["app","controllers/region-controller","bootbox","apps/quiz-reports/student-report/quiz-list/item-views"],function(t,e,i){return t.module("StudentReportApp.QuizList.Views",function(t,e){return t.QuizListView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.template='<div class="col-lg-12"> <button class="reset-quiz none btn btn-success m-b-10 m-r-10" type="submit"> <i class="fa fa-check"></i> Reset Quiz </button> <table class="table table-bordered m-t-15" id="quiz-table" > <thead> <tr> {{#allowResetQuiz}} <th style="width:4%"> <div id="check_all_div" class="checkbox check-default" style="margin-right:auto;margin-left:auto;"> <input id="check_all" type="checkbox"> <label for="check_all"></label> </div> </th> {{/allowResetQuiz}} <th>Quiz Name</th> <th>Textbook</th> <th>Chapter</th> <th>Time Taken</th> <th>Type</th> <th>Last Marks Obtained</th> <th>Attempt</th> <th></th> </tr> </thead> <tbody id="list-students" class="rowlink"></tbody> </table> <div id="pager" class="pager"> <i class="cursor fa fa-chevron-left prev"></i> <span style="padding:0 15px"  class="pagedisplay"></span> <i class="cursor fa fa-chevron-right next"></i> <select class="pagesize"> <option selected value="25">25</option> <option value="50">50</option> <option value="100">100</option> </select> </div> <button class="reset-quiz none btn btn-success pull-left m-t-10 m-r-10" type="submit"> <i class="fa fa-check"></i> Reset Quiz </button> </div>',n.prototype.className="row",n.prototype.itemView=t.ListItemView,n.prototype.emptyView=t.EmptyView,n.prototype.itemViewContainer="#list-students",n.prototype.itemViewOptions=function(t,e){var i,n,o,s;return n=Marionette.getOption(this,"quizResponseSummaries"),o=n.where({collection_id:t.id}),s=Marionette.getOption(this,"textbookNames"),i={summaries:o,textbookNames:s,allowResetQuiz:Marionette.getOption(this,"allowResetQuiz")}},n.prototype.mixinTemplateHelpers=function(t){return Marionette.getOption(this,"allowResetQuiz")&&(t.allowResetQuiz=!0),t},n.prototype.events={"change #check_all_div":function(){return $.toggleCheckAll(this.$el.find("#quiz-table"))},"change .tab_checkbox,#check_all_div ":"showClearResponseButton","click .reset-quiz":"clearQuizResponse"},n.prototype.onShow=function(){var t;return t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("#quiz-table").tablesorter().tablesorterPager(t)},n.prototype.showClearResponseButton=function(){return this.$el.find(".tab_checkbox").is(":checked")?this.$el.find(".reset-quiz").show():this.$el.find(".reset-quiz").hide()},n.prototype.clearQuizResponse=function(){var t,e,n;return n=$.getCheckedItems(this.$el.find("#quiz-table")),n=_.map(n,function(t){return parseInt(t)}),e=this.collection.where({quiz_type:"practice"}),this.clearResponse=!0,_.isEmpty(_.intersection(n,_.pluck(e,"id")))?(t="All the previous attempts for practice quiz only will also be resetted. Are you sure you want to continue?",i.confirm(t,function(t){return function(t){}}(this)),this.deleteSelectedResponses(n)):(t="All the previous attempts for practice quiz only will also be resetted. Are you sure you want to continue?",i.confirm(t,function(t){return function(e){return e?t.deleteSelectedResponses(n):void 0}}(this)))},n.prototype.deleteSelectedResponses=function(t){var e,i,n;if(!_.isEmpty(t))for(e=0,i=t.length;i>e;e++)n=t[e],this.deleteResponse(n);return this.$el.find("#check_all").attr("checked",!1),this.$el.find("#reset-quiz").hide()},n.prototype.deleteResponse=function(t){var e,i,n,o,s;for(n=Marionette.getOption(this,"quizResponseSummaries"),s=n.where({collection_id:parseInt(t)}),e=0,i=s.length;i>e;e++)o=s[e],o.destroy();return this.collection.remove(t),this.updateTableSorter(),this.showResetSuccessMsg()},n.prototype.updateTableSorter=function(){return this.$el.find("#quiz-table").trigger("update"),this.$el.find("#quiz-table").trigger("updateCache")},n.prototype.showResetSuccessMsg=function(){return this.$el.find(".reset-success-msg").remove(),this.$el.find("#pager").after('<div class="reset-success-msg text-success small">Quiz Reset Successful</div>')},n}(Marionette.CompositeView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/student-report/quiz-list/quiz-list-app",["app","controllers/region-controller","apps/quiz-reports/student-report/quiz-list/composite-view","apps/quiz-reports/attempts/attempts-app"],function(t,e){return t.module("StudentReportApp.QuizList",function(t,i){return t.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.student_id=t.student_id,this.quizResponseSummaries=i.request("get:quiz:response:summary",{student_id:this.student_id}),i.request("current:user:can","reset_quiz")&&(this.allowResetQuiz=!0),i.execute("when:fetched",this.quizResponseSummaries,function(t){return function(){var e;return t.quizResponseSummaries.remove(t.quizResponseSummaries.where({status:"started"})),e=t.quizResponseSummaries.pluck("collection_id"),e&&(e=_.uniq(e)),t.quizzes=_.isEmpty(e)?i.request("empty:content:modules:collection"):i.request("get:quizes",{quiz_ids:e}),i.execute("when:fetched",t.quizzes,function(){var e;return e=_.flatten(t.quizzes.pluck("term_ids")),e=_.chain(e).map(function(t){return _.flatten(t)}).flatten().uniq().compact().value(),t.textbookNames=i.request("get:textbook:names:by:ids",e),i.execute("when:fetched",t.textbookNames,function(){return t._showViews(t.quizzes,t.textbookNames)})})}}(this))},n.prototype._showViews=function(t,e){var i;return this.view=i=this._getQuizListView(t,e),this.show(i),this.listenTo(this.view,"itemview:replay:quiz",this._replay_quiz),this.listenTo(this.view,"itemview:view:attempts",this._show_attempts_popup)},n.prototype._show_attempts_popup=function(t,e){return i.execute("show:attempts:popup",{region:i.dialogRegion,student:this.student_id,quiz:this.quizzes.get(e),summaries:this.quizResponseSummaries.where({collection_id:e})})},n.prototype._replay_quiz=function(t,e,n){var o;return this.student_id===i.request("get:loggedin:user:id")?i.navigate("view-quiz/"+e):(i.navigate("quiz-report/student/"+this.student_id+"/quiz/"+e),o="quiz_report"),i.execute("show:single:quiz:app",{region:i.mainContentRegion,quizModel:this.quizzes.get(e),quizResponseSummary:this.quizResponseSummaries.get(n),quizResponseSummaryCollection:this.quizResponseSummaries,display_mode:o,student:this.student_id})},n.prototype._getQuizListView=function(e,i){return new t.Views.QuizListView({collection:e,quizResponseSummaries:this.quizResponseSummaries,textbookNames:i,allowResetQuiz:this.allowResetQuiz})},n}(e)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/student-report/student-report-app",["app","controllers/region-controller","apps/quiz-reports/student-report/student-report-layout","apps/quiz-reports/student-filter/student-filter-app","apps/quiz-reports/student-report/quiz-list/quiz-list-app"],function(t,e){return t.module("StudentReportApp",function(t,i){return t.Controller=function(e){function n(){return this._showViews=bind(this._showViews,this),n.__super__.constructor.apply(this,arguments)}var o;return extend(n,e),o=null,n.prototype.initialize=function(t){var e,i;return i=t.students,this.student_id=t.student_id,this.display_mode=t.display_mode,$.showHeaderAndLeftNav(),e=this._fetchStudents(i),e.done(function(t){return function(){var e;return e=o.get(t.student_id),t._showViews(e)}}(this))},n.prototype._fetchStudents=function(t){var e;return this.defer=$.Deferred(),t instanceof Backbone.Collection?(o=t,this.defer.resolve()):(e=i.request("get:user:by:id",this.student_id),i.execute("when:fetched",e,function(t){return function(){return o=i.request("get:students:by:division",e.get("division")),i.execute("when:fetched",o,function(){return t.defer.resolve()})}}(this))),this.defer.promise()},n.prototype._showViews=function(e){return this.layout=this._getStudentReportLayout(e),this.show(this.layout,{loading:!0}),this.listenTo(this.layout,"show",function(n){return function(){return i.execute("show:student:filter:app",{region:n.layout.studentFilterRegion,
students:o}),new t.QuizList.Controller({region:n.layout.quizListRegion,student_id:e.id})}}(this))},n.prototype._getStudentReportLayout=function(e){return new t.Layout({model:e,display_mode:this.display_mode})},n}(e),i.commands.setHandler("show:student:report:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-reports/app",["app","apps/quiz-reports/class-report/class-report-app","apps/quiz-reports/quiz-report/quiz-report-app","apps/quiz-reports/student-report/student-report-app"],function(t){return t.module("QuizReportsApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"quiz-report":"classReports","quiz-report/div/:div/quiz/:quiz":"quizReport","quiz-report/student/:id":"studentReport",myreport:"studentReport"},e}(Marionette.AppRouter),i={classReports:function(){return $.allowRoute("quiz-report")?e.execute("show:class:report:app",{region:e.mainContentRegion}):void 0},quizReport:function(t,i){return $.allowRoute("quiz-report")?e.execute("show:quiz:report:app",{region:e.mainContentRegion,division:t,quiz:i}):void 0},studentReport:function(t){var i;return $.allowRoute("quiz-report")?(t||(t=e.request("get:loggedin:user:id"),i="ownReport"),e.execute("show:student:report:app",{region:e.mainContentRegion,student_id:t,display_mode:i})):void 0}},t.on("start",function(){return new n({controller:i})})})}),define("text!apps/content-modules/modules-listing/templates/content-modules-list-tmpl.html",[],function(){return'\n<div class="col-lg-12">\n    <!-- <h4><span class="semi-bold">All</span> Modules</h4> -->\n\n    <div class="change-status none small">\n        Change status to: \n        <select class="form-control inline small">\n            <option value="publish">Publish</option>\n            <option value="archive">Archive</option>\n        </select>\n        <button class="btn btn-info btn-small"><i class="fa"></i> Change Status</button>\n    </div>\n    {{#isQuiz}}\n    <div class="send-email-to-stud none small">\n    <button class="send-email btn btn-success btn-small"><i class="fa"></i> Send Email</button>\n    </div>\n    {{/isQuiz}}\n    <table class="table table-bordered m-t-10" id="content-pieces-table" >\n        <thead>\n        <tr>\n            <th style="width:4%"><div id="check_all_div" class="checkbox check-default" style="margin-right:auto;margin-left:auto;">\n                <input id="check_all" type="checkbox">\n                <label for="check_all"></label>\n            </div>\n            <th style="width:30%">Name</th>\n            {{#isQuiz}}<th>Type</th>{{/isQuiz}}\n            <th>Textbook</th>\n            <th>Chapter</th>\n            <th>Duration</th>\n            {{#isQuiz}}<th>Marks</th>{{/isQuiz}}\n            <th>Status</th>\n            <th>Action</th>\n        </tr>\n        </thead>\n\n        <tbody id="list-content-pieces" aria-relevant="all" aria-live="polite" role="alert" data-link="row" class="rowlink">\n\n\n        </tbody>\n    </table>\n    <div class="change-status none small">\n        Change status to: \n        <select class="form-control inline small">\n            <option value="publish">Publish</option>\n            <option value="archive">Archive</option>\n        </select>\n        <button class="btn btn-info btn-small"><i class="fa"></i> Change Status</button>\n    </div>\n    {{#isQuiz}}\n    <div class="send-email-to-stud none small">\n    <button class="send-email btn btn-success btn-small"><i class="fa"></i> Send Email</button>\n    </div>\n    {{/isQuiz}}\n    <div id="pager" class="pager">\n        <i class="cursor fa fa-chevron-left prev"></i>\n        <span style="padding:0 15px"  class="pagedisplay"></span>\n        <i class="cursor fa fa-chevron-right next"></i>\n        <select class="pagesize">\n            <option selected value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n        </select>\n    </div>\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-modules/modules-listing/modules-listing-views",["app","text!apps/content-modules/modules-listing/templates/content-modules-list-tmpl.html","bootbox"],function(t,e,i){return t.module("ContentModulesApp.ModulesListing.Views",function(t,n,o,s,r,a){var l,c;return c=function(t){function e(){return this.removeSpinner=bind(this.removeSpinner,this),this.successUpdateFn=bind(this.successUpdateFn,this),this.successSaveFn=bind(this.successSaveFn,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="tr",e.prototype.className="gradeX odd",e.prototype.template='<td class="v-align-middle"><div class="checkbox check-default"> <input class="tab_checkbox" type="checkbox" value="{{id}}" id="checkbox{{id}}"> <label for="checkbox{{id}}"></label> </div> </td> <td>{{name}}</td> {{#isQuiz}}<td>{{quiz_type}}</td>{{/isQuiz}} <td>{{textbookName}}</td> <td>{{chapterName}}</td> <td>{{durationRounded}} {{minshours}}</td> {{#isQuiz}}<td>{{marks}}</td>{{/isQuiz}} <td>{{&statusMessage}}</td> <td><a target="_blank" class="view-content-piece" href="{{view_url}}">View</a> {{#is_editable}} <span class="editLinkSpan nonDevice">|</span> <a target="_blank" href="{{edit_url}}" class="editLink nonDevice">Edit</a> {{/is_editable}} {{#is_under_review}} <span class="nonDevice publishModuleSpan">|</span> <a target="_blank" class="nonDevice publishModule">Publish</a> {{/is_under_review}} {{#is_published}} <span class="nonDevice archiveModuleSpan">|</span> <a target="_blank" class="nonDevice archiveModule"> Archive</a> {{/is_published}} <span class="nonDevice">|</span><a target="_blank" class="nonDevice cloneModule"> Clone</a> <i class="fa spinner"></i> </td>',e.prototype.serializeData=function(){var t;return console.log("serializeData"),t=e.__super__.serializeData.call(this),t.view_url=SITEURL+("/#view-group/"+t.id),t.edit_url=SITEURL+("/#edit-module/"+t.id),console.log(t),t.textbookName=function(e){return function(){var i;return console.log(t.term_ids.textbook),i=a.findWhere(e.textbooks,{id:parseInt(t.term_ids.textbook)}),null!=i?i.name:void 0}}(this),console.log(t.textbookName),t.chapterName=function(e){return function(){var i;return i=a.chain(e.chapters.findWhere({id:t.term_ids.chapter})).pluck("name").compact().value()}}(this),t.durationRounded=function(){return"hrs"===t.minshours?a.numberFormat(parseFloat(t.duration),2):t.duration},"quiz"===this.groupType&&(t.quiz_type=this.model.getQuizTypeLabel(),t.view_url=SITEURL+("/#view-quiz/"+t.id),t.edit_url=SITEURL+("/#edit-quiz/"+t.id)),"student-training"===this.groupType&&(t.view_url=SITEURL+("/#view-student-training-module/"+t.id),t.edit_url=SITEURL+("/#edit-student-training-module/"+t.id)),t.statusMessage=function(){return"underreview"===t.post_status?'<span class="post-status label label-important">Under Review</span>':"publish"===t.post_status?'<span class="post-status label label-info">Published</span>':"archive"===t.post_status?'<span class="post-status label label-success">Archived</span>':void 0},"publish"===t.post_status&&(t.is_published=!0),"underreview"===t.post_status&&(t.is_under_review=!0),"underreview"===t.post_status&&(t.is_editable=!0),t},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),"quiz"===this.groupType&&(t.isQuiz=!0),t},e.prototype.events={"click a.cloneModule":"cloneModule","click a.publishModule":function(){return this.changeModuleStatus("publish")},"click a.archiveModule":function(){return this.changeModuleStatus("archive")}},e.prototype.initialize=function(t){return console.log("here"),this.textbooks=t.textbooksCollection,this.chapters=t.chaptersCollection,this.groupType=t.groupType},e.prototype.cloneModule=function(){return i.confirm("Are you sure you want to clone '"+this.model.get("name")+"' ?",function(t){return function(e){var i;return e?(t.addSpinner(),t.cloneModel=function(){switch(this.groupType){case"teaching-module":return n.request("new:content:group");case"quiz":return n.request("new:quiz");case"student-training":return n.request("new:student:training:module")}}.call(t),i=t.model.toJSON(),t.clonedData=a.omit(i,["id","last_modified_on","last_modified_by","created_on","created_by"]),t.clonedData.name=""+t.clonedData.name,t.clonedData.post_status="underreview",n.execute("when:fetched",t.cloneModel,function(){return t.cloneModel.save(t.clonedData,{wait:!0,success:t.successSaveFn,error:t.errorFn,complete:t.removeSpinner})})):void 0}}(this))},e.prototype.successSaveFn=function(t){return t.set("content_pieces",this.clonedData.content_pieces),t.save({changed:"content_pieces"},{wait:!0,success:this.successUpdateFn,error:this.errorFn})},e.prototype.successUpdateFn=function(t){var e;return e=function(){switch(this.groupType){case"teaching-module":return"edit-module";case"quiz":return"edit-quiz";case"student-training":return"edit-student-training-module"}}.call(this),n.navigate(e+"/"+t.id,!0)},e.prototype.errorFn=function(){return console.log("error")},e.prototype.addSpinner=function(){return this.$el.find(".spinner").addClass("fa-spin fa-spinner")},e.prototype.removeSpinner=function(){return this.$el.find(".spinner").removeClass("fa-spin fa-spinner")},e.prototype.changeModuleStatus=function(t){return i.confirm("Are you sure you want to "+t+" '"+this.model.get("name")+"' ?",function(e){return function(i){return i?(e.addSpinner(),e.model.save({post_status:t,changed:"module_details"},{success:function(){return e.changeStatusLabel(t)},error:function(t){return console.log(t)},complete:e.removeSpinner})):void 0}}(this))},e.prototype.changeStatusLabel=function(t){switch(t){case"archive":return this.$el.find(".post-status").removeClass("label-info").addClass("label-success").html("Archived"),this.$el.find(".archiveModule, .archiveModuleSpan").remove();case"publish":return this.$el.find(".post-status").removeClass("label-important").addClass("label-info").html("Published"),this.$el.find(".view-content-piece").after('<span class="nonDevice archiveModuleSpan">|</span> <a target="_blank" class="nonDevice archiveModule">Archive</a>'),this.$el.find(".publishModule, .publishModuleSpan, .editLink, .editLinkSpan").remove()}},e}(s.ItemView),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="No Content Available",e.prototype.tagName="td",e.prototype.onShow=function(){return console.log("empty view"),this.$el.attr("colspan",9)},e}(s.ItemView),t.ModulesListingView=function(t){function n(){return this.changeStatus=bind(this.changeStatus,this),n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template=e,n.prototype.className="row",n.prototype.itemView=c,n.prototype.emptyView=l,n.prototype.itemViewContainer="#list-content-pieces",n.prototype.itemViewOptions=function(){return{textbooksCollection:this.textbooks,chaptersCollection:s.getOption(this,"chaptersCollection"),groupType:this.groupType}},n.prototype.mixinTemplateHelpers=function(t){return t=n.__super__.mixinTemplateHelpers.call(this,t),"quiz"===this.groupType&&(t.isQuiz=!0),t.type=a.titleize(a.humanize(t.type)),console.log(this.groupType),t},n.prototype.events={"change .textbook-filter":function(t){return this.trigger("fetch:chapters:or:sections",r(t.target).val(),t.target.id),console.log(t.target.id)},"change #check_all_div":function(){return r.toggleCheckAll(this.$el.find("table"))},"change .tab_checkbox,#check_all_div ":"showSubmitButton","change #content-post-status-filter":"setFilteredContent","click .change-status button":"changeStatus","click .send-email-to-stud button":"sendEmailStud"},n.prototype.initialize=function(){return this.textbooksCollection=s.getOption(this,"textbooksCollection"),this.groupType=s.getOption(this,"groupType"),this.textbooks=new Array,this.textbooksCollection.each(function(t){return function(e,i){return t.textbooks.push({name:e.get("name"),id:e.get("term_id")})}}(this))},n.prototype.onShow=function(){var t,e;return t=this.$el.find("#s2id_divisions-filter").html(),console.log(t),e=r.showTextbookFilters({textbooks:this.textbooksCollection}),this.fullCollection=s.getOption(this,"fullCollection"),this.$el.find("#textbook-filters").html(e),this.$el.find("#content-pieces-table").tablesorter(),this.onUpdatePager()},n.prototype.sendEmailStud=function(t){var e,i,n;return console.log("email sent module executed"),i=[],this.$el.find(".communication_sent").remove(),e=a.map(r.getCheckedItems(this.$el.find("#content-pieces-table")),function(t){return parseInt(t)}),n=a.chain(this.collection.where({taken_by:0})).pluck("id").value(),i.quizIDs=e,console.log(i.quizIDs),i.division=this.$el.find("#divisions-filter").val(),r(t.target).hasClass("send-email")?i.communication_mode="email":i.communication_mode="sms",a.isEmpty(i.quizIDs)?this.$el.find(".send-email").after('<span class="m-l-40 text-error small communication_sent"> No quiz has been selected</span>'):(console.log(i),this.trigger("save:communications",i))},n.prototype.onFetchChaptersOrSectionsCompleted=function(t,e){switch(e){case"textbooks-filter":r.populateChapters(t,this.$el);break;case"chapters-filter":r.populateSections(t,this.$el);break;case"sections-filter":r.populateSubSections(t,this.$el)}return this.setFilteredContent()},n.prototype.setFilteredContent=function(){var t;return t=r.filterTableByTextbooks(this),this.collection.set(t),this.onUpdatePager()},n.prototype.onUpdatePager=function(){var t;return this.$el.find("#content-pieces-table").trigger("updateCache"),t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("#content-pieces-table").tablesorterPager(t)},n.prototype.showSubmitButton=function(){return this.$el.find(".tab_checkbox").is(":checked")?(this.$el.find(".change-status").show(),this.$el.find(".send-email-to-stud").show()):(this.$el.find(".change-status").hide(),this.$el.find(".send-email-to-stud").hide())},n.prototype.changeStatus=function(t){var e,n;return e={},e.IDs=r.getCheckedItems(this.$el.find("table")),e.status=r(t.target).closest(".change-status").find("select").val(),n="Are you sure you want to "+e.status+" the selected modules ?","publish"===e.status&&(e.IDs=a.filter(e.IDs,function(t){return function(e){return"underreview"===t.collection.get(e).get("post_status")?e:void 0}}(this)),n+="<div class='small m-t-10'> Note: Only modules with status 'Under Review' will be changed to publish </div>",0===a.size(e.IDs))?void i.alert("None of the selected modules can be published"):i.confirm(n,function(i){return function(n){return n?(r(t.target).find(".fa").addClass("fa-spin fa-spinner"),e.action="update-content-module-status",r.post(AJAXURL,e).success(function(t){return i.updateStatusValues(e.IDs,e.status)}).fail(function(t){return console.log("some error occurred"),console.log(t)}).done(function(){return r(t.target).find(".fa").removeClass("fa-spin fa-spinner").addClass("fa-check")})):void 0}}(this))},n.prototype.updateStatusValues=function(t,e){return a.each(t,function(t){return function(i){var n;return n=t.collection.get(parseInt(i)),n.set({post_status:e})}}(this)),this.collection.reset(this.collection.models),this.onUpdatePager()},n}(s.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-modules/modules-listing/modules-listing-controller",["app","controllers/region-controller","apps/content-modules/modules-listing/modules-listing-views"],function(t,e){return t.module("ContentModulesApp.ModulesListing",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getContentModulessListingView=bind(this._getContentModulessListingView,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e;return console.log("here ModulesListing"),this.contentModulesCollection=t.contentModulesCollection,this.textbooksCollection=t.textbooksCollection,this.groupType=t.groupType,console.log(t),this.allChaptersCollection=null,e={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"View All Content Moduless",link:"javascript:;",active:"active"}]},i.execute("update:breadcrumb:model",e),i.execute("when:fetched",[this.contentModulesCollection,this.textbooksCollection],function(t){return function(){var e;return e=r.chain(t.contentModulesCollection.pluck("term_ids")).pluck("chapter").unique().compact().value(),t.allChaptersCollection=i.request("get:textbook:names:by:ids",e),t.fullCollection=t.contentModulesCollection.clone(),i.execute("when:fetched",t.allChaptersCollection,function(){var e;return t.view=e=t._getContentModulessListingView(),t.show(e,{loading:!0,entities:[t.contentModulesCollection,t.textbooksCollection,t.fullCollection]}),t.listenTo(t.view,"fetch:chapters:or:sections",function(e,n){var o;return o=i.request("get:chapters",{parent:e}),i.execute("when:fetched",o,function(){return t.view.triggerMethod("fetch:chapters:or:sections:completed",o,n)})}),t.listenTo(t.region,"update:pager",function(){return t.view.triggerMethod("update:pager")}),t.listenTo(t.view,"save:communications",function(e){var n;return console.log("save:communication"),e={component:"quiz",communication_type:"quiz_published_parent_mail",communication_mode:e.communication_mode,additional_data:{quiz_ids:e.quizIDs,division:null}},console.log(e),n=i.request("create:communication",e),t._showSelectRecipientsApp(n)})})}}(this))},n.prototype._getContentModulessListingView=function(){return new t.Views.ModulesListingView({collection:this.contentModulesCollection,fullCollection:this.fullCollection,textbooksCollection:this.textbooksCollection,chaptersCollection:this.allChaptersCollection,groupType:this.groupType})},n.prototype._showSelectRecipientsApp=function(t){return console.log(t),i.execute("show:quiz:select:recipients:popup",{region:i.dialogRegion,communicationModel:t})},n}(e),i.commands.setHandler("show:list:all:modules:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-modules/modules-listing/search-results-app",["app","controllers/region-controller"],function(t,e){return t.module("ContentModulesApp.ModulesListing.SearchResults",function(t,i,n,o,s,r){var a;return t.Controller=function(t){function e(){return this._searchContent=bind(this._searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.textbooksCollection=t.textbooksCollection,this.selectedFilterParamsObject=t.selectedFilterParamsObject,this.groupType=t.groupType,this.layout=e=this._getSearchResultsLayout(),this.searchCollection=i.request("empty:content:modules:collection"),this.show(e,{loading:!0}),this.listenTo(this.layout,"show",function(t){return function(){return i.execute("show:list:all:modules:app",{region:t.layout.contentSelectionRegion,contentModulesCollection:t.searchCollection,textbooksCollection:t.textbooksCollection})}}(this)),this.listenTo(this.layout,"search:content",this._searchContent)},e.prototype._searchContent=function(t,e){var n;return n={},e&&(n=this.selectedFilterParamsObject.request("get:parameters:for:search")),n.post_status||(n.post_status="any"),"teaching-module"===this.groupType&&(this.newCollection=i.request("get:content:groups",{post_status:"any",search_str:t,textbook:null!=n.term_id?n.term_id:void 0,post_status:null!=n.post_status?n.post_status:void 0})),"quiz"===this.groupType&&(this.newCollection=i.request("get:quizes",{post_status:"any",search_str:t,textbook:null!=n.term_id?n.term_id:void 0,post_status:null!=n.post_status?n.post_status:void 0})),i.execute("when:fetched",this.newCollection,function(t){return function(){return t.searchCollection.reset(t.newCollection.models),t.layout.contentSelectionRegion.trigger("update:pager"),t.layout.$el.find(".progress-spinner").hide()}}(this))},e.prototype._getSearchResultsLayout=function(){return new a},e}(e),a=function(t){function e(){return this.searchContent=bind(this.searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='Search: <input type="text" class="search-box" id="search-box"> <input id="use-filters" type="checkbox"> <span class="small"> Search with filters</span> <button class="btn btn-success btn-cons2" id="search-btn"> <i class="none progress-spinner fa fa-spinner fa-spin"></i> Search </button> <label id="error-div" class="none"><span class="small text-error">Please enter the search keyword</span></label> <div id="content-selection-region"></div>',e.prototype.regions={contentSelectionRegion:"#content-selection-region"},e.prototype.events={"click #search-btn":"searchContent","keypress .search-box":function(t){return 13===t.which?this.searchContent():void 0}},e.prototype.searchContent=function(){var t,e;return t=r.trim(this.$el.find("#search-box").val()),e=this.$el.find("#use-filters").is(":checked")?!0:!1,t?(this.$el.find("#error-div").hide(),this.$el.find(".progress-spinner").show(),this.trigger("search:content",t,e)):this.$el.find("#error-div").show()},e}(o.Layout)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/textbook-filters/views",["app"],function(t){return t.module("TextbookFiltersApp.Views",function(t,e,i,n,o,s){return t.TextbookFiltersView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="col-xs-11"> <div class="filters"> <div class="table-tools-actions"> {{#divisions_filter}} <select class="select2-filters" id="divisions-filter"> {{#divisions}} <option value="{{id}}">{{&name}}</option> {{/divisions}} </select> {{/divisions_filter}} {{#textbooks_multi_filter}} <select id="textbooks-filter" class="textbook-filter select2-filters" multiple="multiple" data-placeholder="Select Textbook"> <!--option value="-1" selected>Select Textbook</option--> {{#textbooks}} <option value="{{id}}">{{&name}}</option> <{{/textbooks}} </select> {{/textbooks_multi_filter}} {{#textbooks_filter}} <select class="textbook-filter select2-filters" id="textbooks-filter"> {{#textbooks}} <option value="{{id}}" >{{&name}}</option> {{/textbooks}} </select> {{/textbooks_filter}} {{#chapters_filter}} <select class="textbook-filter select2-filters" id="chapters-filter"> <option value="">All Chapters</option> </select> {{/chapters_filter}} {{#sections_filter}} <select class="textbook-filter select2-filters" id="sections-filter"> <option value="">All Sections</option> </select> {{/sections_filter}} {{#subsections_filter}} <select class="textbook-filter select2-filters" id="subsections-filter"> <option value="">All Sub Sections</option> </select> {{/subsections_filter}} {{#post_status_filter}} <select class="select2-filters selectFilter" id="content-post-status-filter"> <option value="any">All Status</option> <option value="pending">Under Review</option> <option value="publish">Published</option> <option value="archive">Archived</option> </select> {{/post_status_filter}} {{#post_status_report_filter}} <select class="select2-filters selectFilter" id="content-post-status-filter"> <option value="any">All Status</option> <!--option value="pending">Under Review</option--> <option value="publish" selected>Published</option> <option value="archive">Archived</option> </select> {{/post_status_report_filter}} {{#module_status_filter}} <select class="select2-filters selectFilter" id="content-post-status-filter"> <option value="any">All Status</option> <option value="underreview">Under Review</option> <option value="publish">Published</option> <option value="archive">Archived</option> </select> {{/module_status_filter}} {{#content_type_filter}} <select class="content-type-filter select2-filters selectFilter" id="content-type-filter"> <option value="">All Types</option> {{#teacher_question}} <option value="teacher_question">Teacher Question</option> {{/teacher_question}} {{#student_question}} <option value="student_question">Student Question</option> {{/student_question}} <option value="content_piece">Content Piece</option> </select> {{/content_type_filter}} <select class="select2-filters selectFilter difficulty-level-filter" style="display: none;" id="difficulty-level-filter"> <option value="">All Levels</option> <option value="1">Level 1</option> <option value="2">Level 2</option> <option value="3">level 3</option> </select> </div> </div> </div> <div class="col-xs-1"></div> <div class="clearfix"></div> <div class="col-sm-12"></div>',e.prototype.className="row",e.prototype.events={"change #textbooks-filter":function(t){return console.log(o(t.target).val()),this.trigger("fetch:new:content",o(t.target).val())},"change #divisions-filter":function(t){return this.trigger("fetch:textbooks:by:division",o(t.target).val())},"change .filters":function(t){return"divisions-filter"!==t.target.id?(this.$el.find(".filters .table-tools-actions").append('<span class="loading-collection small">Loading... <i class="fa fa-spinner fa-spin"> </i></span>'),this.trigger("fetch:chapters:or:sections",o(t.target).val(),t.target.id)):void 0},"change .content-type-filter":function(t){return"student_question"===o(t.target).val()?this.$el.find(".difficulty-level-filter").show():this.$el.find(".difficulty-level-filter").hide(),this.setFilteredContent(),this.trigger("update:pager")}},e.prototype.mixinTemplateHelpers=function(){var t,i,o,r;return t=e.__super__.mixinTemplateHelpers.call(this,t),r=n.getOption(this,"textbooksCollection"),i=n.getOption(this,"divisionsCollection"),t.textbooks=r.map(function(t){var e,i;return i=[],i.id=t.get("term_id"),e=t.get("name"),e=e.split("("),i.name=e[0],console.log(i.name),i}),i&&(t.divisions=i.map(function(t){var e;return e=[],e.id=t.get("id"),e.name=t.get("division"),e})),o=n.getOption(this,"filters"),s.contains(o,"divisions")&&(t.divisions_filter=!0),s.contains(o,"multi_textbooks")&&(t.textbooks_multi_filter=!0),s.contains(o,"textbooks")&&(t.textbooks_filter=!0),s.contains(o,"chapters")&&(t.chapters_filter=!0),s.contains(o,"sections")&&(t.sections_filter=!0),s.contains(o,"subsections")&&(t.subsections_filter=!0),s.contains(o,"post_status")&&(t.post_status_filter=!0),s.contains(o,"post_status_report")&&(t.post_status_report_filter=!0),s.contains(o,"module_status")&&(t.module_status_filter=!0),s.contains(o,"content_type")&&(t.content_type_filter=!0),s.contains(o,"student_question")&&(t.student_question=!0),s.contains(o,"teacher_question")&&(t.teacher_question=!0),s.contains(o,"status")&&(t.status_filter=!0),t},e.prototype.onShow=function(){var t;return console.log("onShow"),o(".filters select").select2(),this.contentGroupModel=n.getOption(this,"contentGroupModel"),this.contentGroupModel?(t=this.contentGroupModel.get("term_ids"),o("#textbooks-filter").select2().select2("val",t.textbook),this.setFilteredContent()):void 0},e.prototype.onFetchChaptersOrSectionsCompleted=function(t,e,i){switch(console.log(i),e){case"divisions-filter":o.populateTextbooks(t,this.$el,i);break;case"textbooks-filter":o.populateChapters(t,this.$el,i);break;case"chapters-filter":o.populateSections(t,this.$el,i);break;case"sections-filter":o.populateSubSections(t,this.$el,i)}return"divisions-filter"!==e&&"textbooks-filter"!==e?this.setFilteredContent():void 0},e.prototype.setFilteredContent=function(){var t,e;return console.log(this),t=n.getOption(this,"dataType"),e=o.filterTableByTextbooks(this,t),console.log(e),this.collection.reset(e),this.trigger("update:pager"),this.$el.find(".loading-collection").remove()},e.prototype.onNewContentFetched=function(){return this.setFilteredContent()},e.prototype.onDivisionChanged=function(t){},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/textbook-filters/textbook-filters-app",["app","controllers/region-controller","apps/textbook-filters/views"],function(t,e){return t.module("TextbookFiltersApp",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getTextbookFiltersView=bind(this._getTextbookFiltersView,this),this.fetchSectionOrSubsection=bind(this.fetchSectionOrSubsection,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n;return this.collection=t.collection,this.model=t.model,this.filters=t.filters,this.selectedFilterParamsObject=t.selectedFilterParamsObject,this.dataType=t.dataType,this.contentSelectionType=t.contentSelectionType,this.divisionsCollection=t.divisionsCollection,this.post_status=t.post_status,this.filters||(this.filters=["multi_textbooks","divisions","textbooks","chapters","sections","subsections"]),"student-training"===this.contentSelectionType&&this.filters.push("student_question"),"teaching-module"===this.contentSelectionType&&this.filters.push("teacher_question"),this.divisionsCollection?(e=this.divisionsCollection.first().get("class_id"),e&&(n={class_id:e})):n={fetch_all:!0},this.textbooksCollection=i.request("get:textbooks",n),this.selectedFilterParamsObject.setHandler("get:selected:parameters",function(t){return function(){var e,i,n,o,r,a;for(a=s(t.view.el).find("select.textbook-filter"),o=[],i=0,n=a.length;n>i;i++)e=a[i],null!=s(e).val()?o.push(r={id:s(e).val(),text:s(e).find(":selected").text()}):o.push(void 0);return o}}(this)),this.selectedFilterParamsObject.setHandler("get:parameters:for:search",function(t){return function(){var e,i,o,r,a;return o=s(t.view.el).find("#textbooks-filter"),s(o).val()&&(a=s(o).val()),o=s(t.view.el).find("#textbooks-multi-filter"),s(o).val()&&(a=s(o).val()),o=s(t.view.el).find("#chapters-filter"),s(o).val()&&(a=s(o).val()),o=s(t.view.el).find("#sections-filter"),s(o).val()&&(a=s(o).val()),o=s(t.view.el).find("#subsections-filter"),s(o).val()&&(a=s(o).val()),o=s(t.view.el).find("#content-post-status-filter"),r=s(o).val(),o=s(t.view.el).find("#content-type-filter"),e=s(o).val(),o=s(t.view.el).find("#divisions-filter"),i=s(o).val(),n={term_id:a,post_status:r,content_type:e,division:i}}}(this)),i.execute("when:fetched",this.textbooksCollection,function(t){return function(){var o;return t.view=o=t._getTextbookFiltersView(t.collection),t.show(t.view,{loading:!0}),t.listenTo(t.view,"update:pager",function(){return t.region.trigger("update:pager")}),t.listenTo(t.view,"show",function(){var e,i,n,o,s,a,l;return t.model&&(a=t.model.get("term_ids"))?(l=a.textbook,null!=a.chapter&&(e=a.chapter),null!=a.sections&&(o=r.first(r.flatten(a.sections))),null!=a.subsections&&(s=r.first(r.flatten(a.subsections))),null!=l&&(i=t.fetchSectionOrSubsection(l,"textbooks-filter",e)),null!=e&&(n=t.fetchSectionOrSubsection(e,"chapters-filter",o)),i.done(function(){return null!=e&&t.fetchSectionOrSubsection(e,"chapters-filter",o),n.done(function(){return null!=o?t.fetchSectionOrSubsection(o,"sections-filter",s):void 0;
})})):void 0}),t.listenTo(t.view,"fetch:chapters:or:sections",t.fetchSectionOrSubsection),t.listenTo(t.view,"fetch:new:content",function(e,o){var s,r;return o||(o=t.post_status),s=t.view.$el.find("#divisions-filter").val(),n={textbook:e,post_status:o?o:void 0,division:s?s:void 0},console.log(n.textbook),"quiz"===t.contentSelectionType?n.content_type=["student_question"]:"teaching-module"===t.contentSelectionType?n.content_type=["teacher_question","content_piece"]:"student-training"===t.contentSelectionType&&(n.content_type=["student_question","content_piece"]),r="teaching-modules"===t.dataType?i.request("get:content:groups",n):"student-training"===t.dataType?i.request("get:student:training:modules",n):"quiz"===t.dataType?i.request("get:quizes",n):i.request("get:content:pieces",n),i.execute("when:fetched",r,function(){return console.log(r),t.view.triggerMethod("new:content:fetched")})}),t.listenTo(t.view,"fetch:textbooks:by:division",function(n){var o,s;return o=t.divisionsCollection.get(n),e=o.get("class_id"),s=i.request("get:textbooks",{class_id:e}),i.execute("when:fetched",s,function(){return t.view.triggerMethod("fetch:chapters:or:sections:completed",s,"divisions-filter"),t.view.$el.find("#textbooks-filter").trigger("change"),t.region.trigger("division:changed",n)})})}}(this))},n.prototype.fetchSectionOrSubsection=function(t,e,n){var o,r;return r=s.Deferred(),o=i.request("get:chapters",{parent:t}),i.execute("when:fetched",o,function(t){return function(){return t.view.triggerMethod("fetch:chapters:or:sections:completed",o,e,n),r.resolve()}}(this)),r.promise()},n.prototype._getTextbookFiltersView=function(e){return new t.Views.TextbookFiltersView({collection:e,contentGroupModel:this.model,textbooksCollection:this.textbooksCollection,divisionsCollection:this.divisionsCollection,filters:this.filters,dataType:this.dataType})},n}(e),i.commands.setHandler("show:textbook:filters:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-modules/modules-listing/app",["app","controllers/region-controller","apps/content-modules/modules-listing/modules-listing-controller","apps/content-modules/modules-listing/search-results-app","apps/textbook-filters/textbook-filters-app"],function(t,e){return t.module("ContentModulesApp.ModulesListing",function(t,i){var n;return t.ListController=function(e){function o(){return this._fetchQuizzes=bind(this._fetchQuizzes,this),this._fetchTextbooks=bind(this._fetchTextbooks,this),o.__super__.constructor.apply(this,arguments)}var s,r,a;return extend(o,e),a=null,s=null,r=null,o.prototype.initialize=function(t){return this.groupType=t.groupType,this.division=0,s=i.request("get:divisions"),i.execute("when:fetched",s,this._fetchTextbooks)},o.prototype._fetchTextbooks=function(){var t,e;return t=s.first().get("class_id"),e=s.first().get("id"),a=i.request("get:textbooks",{class_id:t}),i.execute("when:fetched",a,function(t){return function(){}}(this)),i.execute("when:fetched",a,this._fetchQuizzes)},o.prototype._fetchQuizzes=function(){var e,n;return n=a.first(),this.division=s.first().get("id"),e={post_status:"any",textbook:n.id,division:this.division},"teaching-module"===this.groupType?this.contentModulesCollection=i.request("get:content:groups",e):"student-training"===this.groupType?this.contentModulesCollection=i.request("get:student:training:modules",e):(console.log(e),this.contentModulesCollection=i.request("get:quizes",e)),this.selectedFilterParamsObject=new Backbone.Wreqr.RequestResponse,this.layout=this._getContentPiecesLayout(),i.execute("when:fetched",[this.contentModulesCollection,a],function(e){return function(){return e.show(e.layout,{loading:!0}),e.listenTo(e.layout,"show",function(){var n;return n=function(){switch(this.groupType){case"teaching-module":return"teaching-modules";case"student-training":return"student-training";default:return"quiz"}}.call(e),i.execute("show:textbook:filters:app",{region:e.layout.filtersRegion,collection:e.contentModulesCollection,textbooksCollection:a,selectedFilterParamsObject:e.selectedFilterParamsObject,divisionsCollection:s,dataType:n,post_status:"any",filters:["divisions","multi_textbooks","module_status"]}),i.execute("show:list:all:modules:app",{region:e.layout.allContentRegion,contentModulesCollection:e.contentModulesCollection,textbooksCollection:a,groupType:e.groupType,division:e.division}),new t.SearchResults.Controller({region:e.layout.searchResultsRegion,textbooksCollection:a,selectedFilterParamsObject:e.selectedFilterParamsObject,division:e.division,groupType:e.groupType})}),e.listenTo(e.layout.filtersRegion,"update:pager",function(){return e.layout.allContentRegion.trigger("update:pager")})}}(this))},o.prototype._getContentPiecesLayout=function(){return console.log("_getContentPiecesLayout"),new n({groupType:this.groupType})},o}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="grid-title no-border"> <h4 class="">List of <span class="semi-bold">{{type}}</span></h4> <div class="tools"> <a href="javascript:;" class="collapse"></a> </div> </div> <div class="grid-body no-border contentSelect" style="overflow: hidden; display: block;"> <div id="filters-region" class="m-b-10"></div> <ul class="nav nav-tabs b-grey b-l b-r b-t" id="addContent"> <li class="active"><a href="#all-content-region"><span class="semi-bold">All</span> Modules</a></li> <li><a href="#search-results-region"><span class="semi-bold">Search</span> Modules</a></li> </ul> <div id="tab-content" class="tab-content" > <div id="all-content-region" class="tab-pane active"></div> <div id="search-results-region" class="tab-pane"></div> </div> </div>',e.prototype.className="tiles white grid simple vertical green",e.prototype.regions={filtersRegion:"#filters-region",allContentRegion:"#all-content-region",searchResultsRegion:"#search-results-region"},e.prototype.events={"click #addContent a":"changeTab"},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.type=_.titleize(_.humanize(Marionette.getOption(this,"groupType"))),t},e.prototype.changeTab=function(t){return t.preventDefault(),this.$el.find("#addContent a").removeClass("active"),$(t.target).closest("a").addClass("active").tab("show")},e}(Marionette.Layout),i.commands.setHandler("show:module:listing:app",function(e){return new t.ListController(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-modules/content-modules-app",["app","apps/content-modules/view-single-module/single-module-controller","apps/content-modules/modules-listing/app"],function(t){return t.module("ContentModulesApp",function(t,e){var i,n;return i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"add-module":"addModule","view-group/:id":"viewModule","edit-module/:id":"editModule","module-list":"modulesListing","teachers/take-class/:classID/:div/textbook/:tID/module/:mID":"takeClassSingleModule","teachers/start-training/:classID/textbook/:tID/module/:mID":"startTrainingSingleModule","dummy-module/:content_piece_id":"showDummyModule"},e}(Marionette.AppRouter),n={addModule:function(){return $.allowRoute("add-module")?e.execute("show:edit:module:controller",{region:e.mainContentRegion,groupType:"teaching-module"}):void 0},editModule:function(t){return $.allowRoute("edit-module")?e.execute("show:edit:module:controller",{region:e.mainContentRegion,group_id:t,groupType:"teaching-module"}):void 0},viewModule:function(i){var n;return $.allowRoute("view-module")?(this.contentGroupModel=e.request("get:content:group:by:id",i),n={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"View Content Group",link:"javascript:;",active:"active"}]},e.execute("update:breadcrumb:model",n),new t.View.GroupController({region:e.mainContentRegion,model:this.contentGroupModel})):void 0},modulesListing:function(){return $.allowRoute("module-list")?new t.ModulesListing.ListController({region:e.mainContentRegion,groupType:"teaching-module"}):void 0},takeClassSingleModule:function(t,e,i,n){var o;return o={classID:t,div:e,tID:i,mID:n,mode:"take-class"},this.gotoTakeSingleQuestionModule(o)},startTrainingSingleModule:function(t,e,i){var n;return n={classID:t,tID:e,mID:i,mode:"training"},this.gotoTakeSingleQuestionModule(n)},gotoTakeSingleQuestionModule:function(i){var n,o,s,r,a;return n=i.classID,o=i.div,a=i.tID,s=i.mID,r=i.mode,this.textbook=e.request("get:textbook:by:id",a),this.contentGroupModel=e.request("get:content:group:by:id",s),e.execute("when:fetched",this.textbook,function(t){return function(){return e.execute("when:fetched",t.contentGroupModel,function(){var i,s,r;return r=t.textbook.get("name"),s=t.contentGroupModel.get("name"),i={items:[{label:"Dashboard",link:"#teachers/dashboard"},{label:"Take Class",link:"#teachers/take-class/"+n+"/"+o},{label:r,link:"#teachers/take-class/"+n+"/"+o+"/textbook/"+a},{label:s,link:"javascript:;",active:"active"}]},e.execute("update:breadcrumb:model",i)})}}(this)),new t.View.GroupController({region:e.mainContentRegion,model:this.contentGroupModel,mode:r,division:o,classID:n})},showDummyModule:function(t){return $.allowRoute("dummy-module")?(this.contentPiece=e.request("get:content:piece:by:id",t),e.execute("when:fetched",this.contentPiece,function(i){return function(){var n,o;return n=e.request("empty:content:pieces:collection"),n.add(i.contentPiece),"student_question"!==i.contentPiece.get("content_type")?(o=i.contentPiece.get("term_ids").textbook,i.textbook=e.request("get:textbook:by:id",o),e.execute("when:fetched",i.textbook,function(){var o;return o=e.request("create:dummy:content:module",t),console.log(i.textbook),e.execute("start:teacher:teaching:app",{region:e.mainContentRegion,division:3,contentPiece:i.contentPiece,questionResponseCollection:e.request("get:empty:question:response:collection"),contentGroupModel:o,questionsCollection:n,classID:_.first(i.textbook.get("classes")),studentCollection:e.request("get:dummy:students"),display_mode:"class_mode"})})):void 0}}(this))):void 0}},t.on("start",function(){return new i({controller:n})})})}),define("text!apps/quiz-modules/view-single-quiz/templates/quiz-layout.html",[],function(){return'<div class="teacher-app">\n    {{#quiz_report}}\n        <div class="row tiles white simple m-b-10">\n            <div class="col-md-4">\n                <h4><span class="bold">Student Name: {{studentName}}</span>\n                </h4>\n            </div>\n            <div class="col-md-4">\n                <h4><span class="bold">Roll Number: {{rollNumber}}</span>\n                </h4>\n            </div>\n        </div>\n    {{/quiz_report}}\n    \n    {{^quiz_report}}\n        {{#practice_mode}}\n            <div class="well text-center">\n                <h4><span class="bold">This is a practice quiz.\n                    It is designed to help you train for the class tests.</span></h4>\n            </div>\n        {{/practice_mode}}\n        {{^practice_mode}}\n            <div class="well text-center">\n                <h4><span class="bold">This is a class test and can be attempted just once, therefore ensure you have answered all questions before ending the quiz.</span></h4>\n            </div>\n        {{/practice_mode}}\n\n    {{/quiz_report}}\n    {{^studentTrainingModule}}\n        <div class="direction text-center">\n                <div class="icon goto-prev-page"><a href="javascript:" class="btn fab-content"><i class="fa fa-hand-o-left"></i></a></div>\n                <p class="welcome-text">It\'s time to take a quiz</p>\n        </div>\n    {{/studentTrainingModule}}\n    {{#studentTrainingModule}}\n    <button type="button" class="btn btn-white btn-cons pull-right continue-student-training-module">\n        <h4 class="bold text-info no-margin">\n            <span class="fa fa-arrow-circle-right pull-right p-t-5"></span>\n            Continue Training Module\n        </h4>\n    </button>\n    {{/studentTrainingModule}}\n    <div id="attempts-region" class="col-lg-10 col-lg-offset-1"></div>\n    <div id="quiz-details-region" class="col-lg-10 col-lg-offset-1"></div>\n</div>\n<div id="content-display-region"></div>\n\n    {{^studentTrainingModule}}\n        <div class="text-center">\n            <div class="col-lg-12">\n                <div class="all-d-best">\n                    <i class="fa fa-thumbs-o-up fa-2x"></i> <span>All the Best ...</span>\n                </div>\n            </div>        \n        </div>    \n    {{/studentTrainingModule}}\n\n'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/view-single-quiz/layout",["app","controllers/region-controller","text!apps/quiz-modules/view-single-quiz/templates/quiz-layout.html"],function(t,e,i){return t.module("QuizModuleApp.ViewQuiz.LayoutView",function(t,e){return t.QuizViewLayout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.regions={attemptsRegion:"#attempts-region",quizDetailsRegion:"#quiz-details-region",contentDisplayRegion:"#content-display-region"},e.prototype.mixinTemplateHelpers=function(t){var e,i,n;return e=Marionette.getOption(this,"display_mode"),n=Marionette.getOption(this,"studentTrainingModule"),n&&(t.studentTrainingModule=!0),"quiz_report"===e&&(i=Marionette.getOption(this,"student"),t.studentName=i.get("display_name"),t.rollNumber=i.get("roll_no"),t.quiz_report=!0),"practice"===this.model.get("quiz_type")&&(t.practice_mode=!0),t},e.prototype.events=function(){return{"click .continue-student-training-module":function(){return this.trigger("goto:next:item:student:training:module")}}},e}(Marionette.Layout)})}),define("text!apps/quiz-modules/view-single-quiz/quiz-description/templates/quiz-description.html",[],function(){return'<div class="tiles white grid simple animated fadeIn\'">\n    <div class="grid-title">\n        <div class="row">\n            <div class="col-md-4 b-r b-grey">\n                <h3 class="no-margin semi-bold">\n                    <label class="form-label text-grey">Quiz Name</label>\n                    {{name}} \n<!--                     {{#responseSummary}} \n                        <span class="small text-info semi-bold block m-t-5">Taken on: <span class="bold">{{taken_on_date}}</span></span>\n                    {{/responseSummary}}  -->\n                </h3>\n            </div>\n            <div class="col-md-4 b-r b-grey">\n                <h3 class="no-margin semi-bold">\n                    <label class="form-label text-grey">Textbook</label>\n                        {{getTextbookName}}\n                </h3>        \n            </div>\n            <div class="col-md-4">\n                <h3 class="no-margin semi-bold">\n                    <label class="form-label text-grey">Chapter</label>\n                        {{getChapterName}}\n                </h3>        \n            </div>\n \n        </div>        \n    </div>\n    \n    <div class="grid-body" style="overflow: hidden; display: block;">\n        <div class="row p-b-15">\n            <div class="col-md-4">\n                    <label class="form-label no-margin">No. of Questions: <h4 class="inline semi-bold no-margin">{{getQuestionsCount}}</h4> </label>\n                    \n                    {{#responseSummary}} \n                        <h3 class="semi-bold no-margin quizSummRespnse">\n                            <span class="text-info small no-margin inline">You attempted: <span class="bold">{{num_questions_answered}}</span></span></h3>\n                    {{/responseSummary}}\n            </div>\n            <div class="col-md-4">\n                    <label class="form-label no-margin">Duration: <h4 class="inline semi-bold no-margin">{{total_minutes}} mins</h4></label>\n                    \n                    {{#incompleteQuiz}}\n                        <h3 class="semi-bold no-margin quizSummRespnse">\n                            <span class="text-info small no-margin inline">Current Elapsed Time: \n                            <span class="bold">\n                                {{total_time_taken}}\n                            </span></span><br> \n                            <span class="text-info small no-margin inline">Time remaining: \n                            <span class="bold">\n                                {{time_remaining}}\n                            </span></span>\n                        </h3>\n                    {{/incompleteQuiz}}\n                    {{#responseSummary}} \n                        <h3 class="semi-bold no-margin quizSummRespnse"><span class="text-info small no-margin">Completed in: <span class="bold">{{total_time_taken}}</span></span></h3>\n                    {{/responseSummary}}\n            </div>\n            <div class="col-md-4">\n                    <label class="form-label no-margin">Marks: <h4 class="inline semi-bold no-margin">{{marks}}</h4></label>\n                    \n                    {{#display_marks}} \n                        <h3 class="semi-bold no-margin quizSummRespnse">\n                            {{#negMarksEnable}}\n                                <span class="text-success small no-margin">You scored: <span class="bold">{{marks_scored}}</span></span><br>\n                                <span class="text-error small no-margin">Negative marks: <span class="bold">{{negative_scored}}</span></span><br> \n                                <span class="text-info small no-margin">Total scored: <span class="bold">{{total_marks_scored}}</span></span>\n                            {{/negMarksEnable}}\n                            {{^negMarksEnable}}\n                                <span class="text-info small no-margin">You scored: <span class="bold">{{total_marks_scored}}</span></span>\n                            {{/negMarksEnable}}\n                        </h3>\n                    {{/display_marks}}\n            </div>\n            <!--div class="col-md-3 ">\n                {{#negMarksEnable}}\n                    <label class="form-label no-margin">Negative Marking: <h4 class="inline semi-bold no-margin">{{negMarks}}%</h4> </label>\n                {{/negMarksEnable}}\n            </div-->\n        </div>\n        {{#description.instruction}}\n        <div class="row b-grey b-t">\n            <div class="col-sm-12">\n                <h3 class="semi-bold"><label class="form-label text-grey">Quiz Instructions</label></h3>\n                    {{&description.instruction}}\n            </div>\n        </div>\n        {{/description.instruction}}\n    </div>\n    \n</div>\n\n\n<div class="text-center">\n    {{^takeQuizError}}\n        <button type="button" class="btn btn-success btn-lg btn-large btn-cons2 m-r-10" id="take-quiz"> Start Quiz</button>\n        {{#try_again}}\n            <button type="button" class="btn btn-success btn-lg btn-large btn-cons2 m-r-10" id="try-again"> Try Again</button>\n        {{/try_again}}\n    {{/takeQuizError}}\n    {{#takeQuizError}}\n        {{takeQuizError}}\n    {{/takeQuizError}}\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/view-single-quiz/quiz-description/quiz-description-app",["app","controllers/region-controller","text!apps/quiz-modules/view-single-quiz/quiz-description/templates/quiz-description.html","bootbox"],function(t,e,i,n){return t.module("QuizModuleApp.Controller",function(t,o){var s;return t.ViewCollecionDetailsController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,i,o,s,r,a;if($(".navbar .container-fluid").css("visibility","visible"),this.model=t.model,this.textbookNames=t.textbookNames,this.display_mode=t.display_mode,this.quizResponseSummary=t.quizResponseSummary,"replay"!==(s=Marionette.getOption(this,"display_mode"))&&"quiz_report"!==s&&void 0!==this.model._fetch.responseJSON.data.content_pieces){for(o=this.model._fetch.responseJSON.data.content_layout,console.log(this.model._fetch.responseJSON.data),e=this.model._fetch.responseJSON.data.content_pieces.length,r=0,i=0;i<o.length;)void 0!==o[i].data?(r+=parseInt(o[i].data.lvl1)+parseInt(o[i].data.lvl2)+parseInt(o[i].data.lvl3),i++):(r++,i++);r>e&&n.confirm("Quiz could not be generated as there are less number of questions!",function(t){return function(t){return t?$("#take-quiz").hide():$("#take-quiz").hide()}}(this))}return this.view=a=this._getQuizDescriptionView(),this.listenTo(a,"start:quiz:module",function(t){return function(){return t.region.trigger("start:quiz:module")}}(this)),this.listenTo(a,"try:again",function(t){return function(){return t.region.trigger("try:again")}}(this)),this.listenTo(a,"goto:previous:route",this._gotoPreviousRoute),this.show(a)},e.prototype._getQuizDescriptionView=function(){var t;return t=this.model.get("term_ids"),new s({model:this.model,display_mode:this.display_mode,quizResponseSummary:this.quizResponseSummary,templateHelpers:{getTextbookName:function(e){return function(){return e.textbookNames.getTextbookName(t)}}(this),getChapterName:function(e){return function(){return e.textbookNames.getChapterName(t)}}(this),getQuestionsCount:function(t){return function(){return _.size(t.model.get("content_pieces"))}}(this)}})},e}(e),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.events={"click #take-quiz":function(){return this.trigger("start:quiz:module")},"click #try-again":function(){return this.trigger("try:again")},"click #go-back-button":function(){return this.trigger("goto:previous:route")}},e.prototype.serializeData=function(){var t,i,n,s,r;return t=e.__super__.serializeData.call(this,t),i=Marionette.getOption(this,"display_mode"),"quiz_report"===i&&(t.quiz_report=!0),"practice"===this.model.get("quiz_type")&&(t.practice_mode=!0),s=Marionette.getOption(this,"quizResponseSummary"),t.total_time_taken=$.timeMinSecs(s.get("total_time_taken")),t.negMarksEnable=_.toBool(t.negMarksEnable),_.isEmpty(t.content_pieces)?t.takeQuizError="Sorry this quiz has no questions in it.":("completed"===!t.status||o.request("current:user:can","view_all_quizzes"))&&("class_test"!==t.quiz_type||IS_STANDALONE_SITE||(t.takeQuizError="Class tests can be taken from school site only")),"completed"===s.get("status")&&(t.responseSummary=!0,t.num_questions_answered=_.size(t.content_pieces)-s.get("num_skipped"),this.model.hasPermission("display_answer")&&(t.display_marks=!0),t.negMarksEnable&&(t.marks_scored=parseFloat(s.get("marks_scored")),t.negative_scored=parseFloat(s.get("negative_scored"))),t.total_marks_scored=parseFloat(s.get("total_marks_scored")),s.get("taken_on")?t.taken_on_date=moment(s.get("taken_on")).format("Do MMM YYYY"):t.taken_on_date=moment().format("Do MMM YYYY"),t.practice_mode&&"quiz_report"!==i&&(t.try_again=!0)),"started"===s.get("status")&&(t.incompleteQuiz=!0,r=60*this.model.get("total_minutes"),n=s.get("total_time_taken"),t.time_remaining=$.timeMinSecs(r-n)),t},e.prototype.onShow=function(){var t,e;return e=Marionette.getOption(this,"quizResponseSummary"),"started"===e.get("status")&&this.$el.find("#take-quiz").html("Continue"),"replay"===(t=Marionette.getOption(this,"display_mode"))||"quiz_report"===t?this.model.hasPermission("disable_quiz_replay")?this.$el.find("#take-quiz").remove():this.$el.find("#take-quiz").html("Replay"):void 0},e}(Marionette.ItemView),o.commands.setHandler("show:view:quiz:detailsapp",function(e){return null==e&&(e={}),new t.ViewCollecionDetailsController(e)})})}),define("text!apps/quiz-modules/view-single-quiz/content-display/templates/content-display-item.html",[],function(){return'\n<div class="contentPiece new-design" data-id="{{ID}}">\n\n    <div class="cbp_tmicon info animated bounceIn">\n        <time class="cbp_tmtime" datetime="">\n            <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n        </time>\n     </div>\n    <div class="cbp_tmlabel view" style="cursor:auto">\n        <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n          <h4 class="m-t-5 m-b-5"><a class="text-grey semi-bold question_link">{{&post_excerpt}}</a> </h4>\n        </div>\n        <div class="clearfix"></div>\n        <div class="tiles grey show p-t-10 p-b-10 p-l-20">\n            <div class="muted">\n                <span class="bold question-type-div">Difficulty Level:</span> <span class="question-type-div"> {{difficulty_level}}</span>\n            </div>\n            <div class="clearfix"></div>\n        </div>\n    </div>\n    {{#responseStatus}}\n        <div class="qstnStatus {{statusUI.divClass}} p-t-10">\n            {{#display_answer}}\n                <i class="fa"></i>\n                <!-- <label>\n                    {{&statusUI.text}} \n                </label> -->\n            {{/display_answer}}\n\n            {{#display_answer}}\n                <label class="text-info">\n                    Marks: <span class="bold">{{marks_obtained}}/{{total_marks}}</span>\n                </label>\n            {{/display_answer}}\n            <label class="small-text text-grey">Time Taken: <span class="bold">{{timeTaken}}</span></label>\n            {{#hint}}\n                <label class="small-text text-grey ">Viewed Hint: <span class="bold">{{hint_viewed}}<span></label>\n            {{/hint}}\n        </div>\n    {{/responseStatus}}\n</div>\n\n\n\n<div class="contentPiece admin-side" data-type="content-piece" data-id="{{ID}}">\n\n    <time class="cbp_tmtime" datetime="">\n        <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n    </time>\n    <div class="cbp_tmicon info animated bounceIn"> <span class="fa"></span> </div>\n    <div class="cbp_tmlabel view" style="cursor:auto">\n        <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n          <h4 class="m-t-5 m-b-5"><a class="text-grey semi-bold question_link">{{&post_excerpt}}</a> </h4>\n        </div>\n        <div class="clearfix"></div>\n        <div class="tiles grey p-t-10 p-b-10 p-l-20">\n            <div class="muted">\n                <span class="bold question-type-div">Difficulty Level:</span> <span class="question-type-div"> {{difficulty_level}}</span>\n            </div>\n            <div class="clearfix"></div>\n        </div>\n    </div>\n    {{#responseStatus}}\n        <div class="qstnStatus {{statusUI.divClass}} p-t-10">\n            {{#display_answer}}\n                <label>\n                    {{&statusUI.text}} <span class="fa  {{statusUI.icon}}"></span>  \n                </label>\n            {{/display_answer}}\n\n            {{#display_answer}}\n                <label class="text-info">\n                    Marks: <span class="bold">{{marks_obtained}}/{{total_marks}}</span>\n                </label>\n            {{/display_answer}}\n            <label class="small-text text-grey">Time Taken: <span class="bold">{{timeTaken}}</span></label>\n            {{#hint}}\n                <label class="small-text text-grey ">Viewed Hint: <span class="bold">{{hint_viewed}}<span></label>\n            {{/hint}}\n        </div>\n    {{/responseStatus}}\n\n    <div class="cbp_tmlabel view" style="cursor:pointer">\n            <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n              <h4 class="m-t-5 m-b-5"><a class="text-grey semi-bold question_link">{{&post_excerpt}}</a> </h4>\n            </div>\n            <div class="clearfix"></div>\n    <div class="tiles grey p-t-10 p-b-10 p-l-20">\n        <div class="muted">\n            <span class="bold question-type-div">Question Type:</span> <span class="question-type-div"> {{question_type}}</span>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n    </div>\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/view-single-quiz/content-display/item-view",["app","controllers/region-controller","text!apps/quiz-modules/view-single-quiz/content-display/templates/content-display-item.html"],function(t,e,i){return t.module("QuizItemsDisplayApp.ContentCompositeView.ContentItemView",function(t,e){return t.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.tagName="li",e.prototype.mixinTemplateHelpers=function(t){var e,i,n,o;return n=Marionette.getOption(this,"responseModel"),i=Marionette.getOption(this,"quizModel"),t.dateCompleted="N/A",n&&(t.dateCompleted=moment(n.get("end_date")).format("Do MMM YYYY"),t.timeTaken=$.timeMinSecs(n.get("time_taken")),t.responseStatus=n.get("status"),t.display_answer=i.hasPermission("display_answer"),e=n.get("marks_scored"),t.marks_obtained=parseFloat(parseFloat(e).toFixed(1)),o=this.model.get("marks"),t.total_marks=parseFloat(o.toFixed(1)),t.hint_viewed=n.get("question_response").hint_viewed?"Yes":"No",i.hasPermission("allow_hint")||(t.hint=!1),t.statusUI=function(){switch(t.responseStatus){case"correct_answer":return{divClass:"text-success",text:"Correct",icon:"fa-check"};case"partially_correct":return{divClass:"text-success",text:"Partially Correct",icon:"fa-check-square"};case"skipped":return{divClass:"text-warning",text:"Skipped",icon:"fa-share-square"};case"wrong_answer":return{divClass:"text-error",text:"Wrong",icon:"fa-times"}}}()),t},e.prototype.onShow=function(){var t;return t="fa-question",this.model.get(!1)&&(t="fa-youtube-play"),this.$el.find(".cbp_tmicon .fa").addClass(t),"content_piece"===this.model.get("content_type")?this.$el.find("#correct-answer-div, .question-type-div").remove():void 0},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/view-single-quiz/content-display/composite-view",["app","controllers/region-controller","apps/quiz-modules/view-single-quiz/content-display/item-view"],function(t,e){return t.module("QuizItemsDisplayApp.ContentCompositeView",function(t,e){return t.View=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.template='<div style="display:none" class="tiles grey m-t-20 text-grey p-t-10 p-l-15 p-r-10 p-b-10 b-grey b-b" id="teacher-check"> Your answers are sent for evaluation. You will be notified as soon as the results are out on your registered email and phone number </div> <div id="myCanvas-miki" class="col-md-10"><ul class="cbp_tmtimeline"></ul></div>',i.prototype.itemView=t.ContentItemView.View,i.prototype.itemViewContainer="ul.cbp_tmtimeline",i.prototype.itemViewOptions=function(t,e){var i,n,o;return n=Marionette.getOption(this,"responseCollection"),n&&(o=n.findWhere({content_piece_id:t.get("ID")})),i={quizModel:this.model,responseModel:null!=o?o:void 0}},i}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){
function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/view-single-quiz/content-display/content-display-app",["app","controllers/region-controller","apps/quiz-modules/view-single-quiz/content-display/composite-view"],function(t,e){return t.module("QuizItemsDisplayApp",function(t,i){return t.Controller=function(e){function i(){return this._getCollectionContentDisplayView=bind(this._getCollectionContentDisplayView,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i,n,o;return i=t.model,this.mode=t.mode,n=t.questionResponseCollection,e=t.groupContentCollection,this.view=o=this._getCollectionContentDisplayView(i,e,n),this.show(o,{loading:!0,entities:[e]}),this.listenTo(this.view,"view:question:readonly",function(t){return function(e){return t.region.trigger("goto:question:readonly",e)}}(this))},i.prototype._getCollectionContentDisplayView=function(e,i,n){return new t.ContentCompositeView.View({model:e,collection:i,responseCollection:n,mode:this.mode})},i}(e),i.commands.setHandler("show:quiz:items:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/view-single-quiz/attempts/app",["app","controllers/region-controller"],function(t,e){return t.module("QuizModuleApp.AttemptsController",function(t,i){var n,o;return t.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.model=t.model,this.quizResponseSummaryCollection=t.quizResponseSummaryCollection,this.view=e=this._getAttemptsView(this.model,this.quizResponseSummaryCollection),this.show(e),this.listenTo(this.view,"view:summary",function(t){return this.region.trigger("view:summary",t)})},e.prototype._getAttemptsView=function(t,e){return new o({model:t,collection:e})},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="col-md-4"> <h5 class="semi-bold">{{taken_on}}</h5> </div> <div class="col-md-4"> <h5 class="semi-bold">{{total_marks_scored}}</h5> </div> <div class="col-md-3"> <h5 class="semi-bold">{{time_taken}}</h5> </div> <div class="col-md-1 p-b-5"> <button data-id={{summary_id}} type="button" class="pull-right view-summary btn btn-info btn-small m-t-5">view &nbsp; <i></i></button> <div class="clearfix"></div> </div>',e.prototype.className="row b-t b-grey",e.prototype.mixinTemplateHelpers=function(t){return t.taken_on=moment(t.taken_on).format("Do MMM YYYY"),t.time_taken=$.timeMinSecs(t.total_time_taken),t},e}(Marionette.ItemView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tiles white grid simple vertical blue"> <div class="grid-title no-border"> <h4 class="grid-body-toggle pointer">List of <span class="semi-bold">Attempts</span></h4> <div class="tools"> <a href="javascript:;" class="expand"></a> </div> </div> <div class="none grid-body no-border contentSelect"> <div class="row"> <div class="col-md-4"> <label class="text-grey">Attempted On </label> </div> <div class="col-md-4"> <label class="text-grey">Marks Scored (out of {{marks}}) </label> </div> <div class="col-md-3"> <label class="text-grey">Time Taken (out of {{total_minutes}}m) </label> </div> </div> <div id="attempts_list"> </div> </div> </div>',e.prototype.itemView=n,e.prototype.itemViewContainer="#attempts_list",e.prototype.events={"click .view-summary":function(t){return $(t.target).find("i").addClass("fa fa-spinner fa-spin"),this.trigger("view:summary",$(t.target).attr("data-id"))}},e}(Marionette.CompositeView),i.commands.setHandler("show:quiz:attempts:app",function(e){return null==e&&(e={}),new t.Controller(e)})})}),define("text!apps/quiz-modules/take-quiz-module/quiz-description/templates/quiz-description-tpl.html",[],function(){return'\n<div class="quiz-info m-b-5">\n    <h3>Quiz Information</h3>\n    <a id="accordionToggle" data-toggle="collapse" href="#collapseView" aria-expanded="true" aria-controls="collapseView" style="display:block; color:#000" class="h6">\n    Expand        \n    </a>\n</div>\n\n<div id="collapseView" class="panel-collapse collapse">\n       \n    <div class="admin-side">\n    {{#practice_mode}}\n        <div class="well text-center">\n            <h4><span class="bold">This is a practice quiz.\n                It is designed to help you train for the class tests.</span></h4>\n        </div>\n    {{/practice_mode}}\n\n    <div class="moduleInfo quizHeader">\n        <div class="detailsStrip">Quiz Details</div>\n    	<div class="b-grey b-b no-margin p-l-15 p-r-15 p-b-5 p-t-10">\n            <div class="modTime pause">\n                <a class="btn btn-small btn-block btn-white m-t-10"><h4 class="semi-bold text-info no-margin">{{name}}</h4></a>\n            </div>\n\n            <div class="pull-left b-grey b-l " style="width:80%;">\n                <div class="row m-l-0 m-r-0">\n                    <div class="col-xs-6 b-grey b-r">\n                        <p class="bold small-text muted no-margin inline">Textbook: </p>\n                        {{getTextbookName}}\n                    </div>\n                    <div class="col-xs-6">\n                        <p class="bold small-text muted no-margin inline">Chapter: </p>\n                        {{getChapterName}}\n                    </div>\n                </div>\n                <div class="row m-l-0 m-r-0">\n                    <div class="col-xs-6 b-grey b-r">\n                        <p class="bold small-text muted no-margin inline">Section: </p>\n                        {{getSectionsNames}}\n                    </div>\n                    <div class="col-xs-6">\n                        <p class="bold small-text muted no-margin inline">Sub-Section: </p>\n                        {{getSubSectionsNames}}\n                    </div>\n                </div>\n                <div class="row m-l-0 m-r-0 m-t-5">\n                    <div class="col-xs-6 b-grey b-r">\n                        <p class="bold small-text muted no-margin inline">Advised time for current question:</p>\n                        <i class="fa fa-clock-o"></i> <span id="time-on-question">{{getQuestionDuration}}</span> m\n                    </div>\n                    <div class="col-xs-3 b-grey b-r">\n                        <p class="bold small-text muted no-margin inline">Marks for question:</p>\n                        <span id="marks-for-question">{{getQuestionMarks}}</span>\n                    </div>\n                    <div class="col-xs-3">\n                        <p class="bold small-text muted no-margin inline">Total Quiz Marks:</p>\n                        <span>{{marks}}</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="clearfix"></div>\n    		<div class="row">\n        	</div>\n    	</div>\n    </div> \n</div>\n\n<!-- Added external code as per latest design and commented old code used -->\n\n<div class="quiz-stats">\n    <div class="quiz-data">\n        <div>\n            <div class="icon-data">\n                <div class="marks">\n                    <h3>10</h3>\n                </div>\n            </div>\n            <h4>Marks for one question</h4>\n        </div>\n        <div>\n            <div class="icon-data">\n                <div class="time">\n                    <h3>1 <span>MIN</span></h3>\n                </div>\n            </div>\n            <h4>Advised time for current question</h4>\n        </div>\n        <div>\n            <div class="icon-data">\n                <div class="quiz">\n                    <h3>10</h3>\n                </div>\n            </div>\n            <h4>Total quiz marks</h4>\n        </div>\n    </div>\n</div>\n\n\n\n\n<!-- <div class="container-grey"> \n<div class="timerStrip">\n<span class="fa fa-clock-o"></span>\n</div> \n<div class="bold small-text text-center p-t-10"> \nQuiz Time</div>\n {{#completed_quiz}} \n<div class="b-grey m-b-10 p-b-5" id="completed-quiz">\n <div class="qstnStatus text-center">\n <i class="fa fa-check-circle"></i> Quiz Completed</div>\n  </div> \n  <div class="endQuiz b-grey b-t p-t-10 p-b-10">\n   <button type="button" id="end-replay" class="btn btn-white block h-center"> End Replay\n    </button> </div> {{/completed_quiz}} {{^completed_quiz}} \n    <div id="downUpTimer" timerdirection=""></div>\n     <div class="endQuiz b-grey b-t p-t-10 p-b-10"> \n     <button type="button" id="end-quiz" class="btn btn-white block h-center">\n      End Quiz </button> </div> {{/completed_quiz}} </div> -->\n'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/take-quiz-module/quiz-description/app",["app","controllers/region-controller","text!apps/quiz-modules/take-quiz-module/quiz-description/templates/quiz-description-tpl.html"],function(t,e,i){return t.module("TakeQuizApp.QuizDescription",function(t,n){var o;return t.Controller=function(t){function e(){return this._showQuizDescriptionView=bind(this._showQuizDescriptionView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,i,o,s;return i=t.model,e=t.currentQuestion,this.textbookNames=t.textbookNames,this.display_mode=t.display_mode,this.view=s=this._showQuizDescriptionView(i,e),o=i.get("term_ids").textbook,this.textbookModel=n.request("get:textbook:by:id",o),n.execute("when:fetched",[this.textbookNames,this.textbookModel],function(t){return function(){return t.show(t.view,{loading:!0})}}(this)),this.listenTo(this.region,"question:changed",function(t){return this.view.triggerMethod("question:change",t)})},e.prototype._showQuizDescriptionView=function(t,e){var i;return i=t.get("term_ids"),new o({model:t,display_mode:this.display_mode,templateHelpers:{getQuestionDuration:e.get("duration"),getQuestionMarks:parseFloat(e.get("marks")).toFixed(1),getClass:function(t){return function(){return t.textbookModel.getClasses()}}(this),getTextbookName:function(t){return function(){return t.textbookNames.getTextbookName(i)}}(this),getChapterName:function(t){return function(){return t.textbookNames.getChapterName(i)}}(this),getSectionsNames:function(t){return function(){return t.textbookNames.getSectionsNames(i)}}(this),getSubSectionsNames:function(t){return function(){return t.textbookNames.getSubSectionsNames(i)}}(this)}})},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="pieceWrapper",e.prototype.template=i,e.prototype.serializeData=function(){var t;return t=e.__super__.serializeData.call(this),"quiz_report"!==Marionette.getOption(this,"display_mode")&&"practice"===this.model.get("quiz_type")&&(t.practice_mode=!0),t},e.prototype.onShow=function(){return $("#collapseView").on("hidden.bs.collapse",function(){return $("#accordionToggle").removeClass("updown"),$("#accordionToggle").text("Expand"),$(".submit2").removeClass("submit-pushed")}),$("#collapseView").on("shown.bs.collapse",function(){return $("#accordionToggle").addClass("updown"),$("#accordionToggle").text("Collapse"),$(".submit2").addClass("submit-pushed")})},e.prototype.onQuestionChange=function(t){return this.$el.find("#time-on-question").html(t.get("duration")),this.$el.find("#marks-for-question").html(parseFloat(t.get("marks")).toFixed(1))},e}(Marionette.ItemView)})}),define("text!apps/quiz-modules/take-quiz-module/quiz-progress/templates/quiz-progress-tpl.html",[],function(){return'<div class="progressStrip"><span class="fa fa-question"></span></div>\n<div class="modProgress h-center">\n	<p class="bold small-text m-b-5 p-t-10 text-center">Questions Answered</p>\n		<div class="progress progress-large m-b-10">\n		<div id="quiz-progress-bar" data-percentage="0%" style="width: 0%;" class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><span id="answered-questions">0</span>/{{totalQuestions}}</div>\n	</div>\n</div>\n{{#showSkipped}}\n	<div class="text-center small-text p-t-10 m-t-5 p-b-10 b-grey b-t skipped">\n		Questions Skipped: <span id="skipped-questions">0</span>\n	</div>\n{{/showSkipped}}\n<div class="quizSteps p-b-10">\n	<ul id="quiz-items">\n	</ul>\n	<div class="clearfix"></div>\n</div>\n<div class="customButtons">\n	<span class="fa fa-chevron-left pull-left"></span>\n	<span class="fa fa-chevron-right pull-right"></span>\n	<div class="holder">\n	</div>\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/take-quiz-module/quiz-progress/app",["app","controllers/region-controller","text!apps/quiz-modules/take-quiz-module/quiz-progress/templates/quiz-progress-tpl.html"],function(t,e,i){return t.module("TakeQuizApp.QuizProgress",function(t,n){var o,s;return t.Controller=function(t){function e(){return this._showQuizProgressView=bind(this._showQuizProgressView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,i;return this.questionsCollection=t.questionsCollection,e=t.currentQuestion,this.questionResponseCollection=t.questionResponseCollection,this.quizModel=t.quizModel,this.view=i=this._showQuizProgressView(this.questionsCollection,e),this.show(i,{loading:!0}),this.listenTo(i,"change:question",function(t){return this.region.trigger("change:question",t)}),this.listenTo(this.region,"question:changed",function(t){return this.view.triggerMethod("question:change",t)}),this.listenTo(this.region,"question:submitted",function(t){return this.view.triggerMethod("question:submitted",t)})},e.prototype._showQuizProgressView=function(t,e){return new s({collection:t,currentQuestion:e,questionResponseCollection:this.questionResponseCollection,quizModel:this.quizModel})},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<a id="{{ID}}">{{itemNumber}}</a>',e.prototype.tagName="li",e.prototype.mixinTemplateHelpers=function(t){return t.itemNumber=Marionette.getOption(this,"itemNumber"),t},e}(Marionette.ItemView),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="quizProgress",e.prototype.template=i,e.prototype.itemView=o,e.prototype.itemViewContainer="#quiz-items",e.prototype.itemViewOptions=function(t,e){return{itemNumber:e+1}},e.prototype.events={"click #quiz-items a":"changeQuestion"},e.prototype.mixinTemplateHelpers=function(t){return t.totalQuestions=this.collection.length,this.quizModel.hasPermission("single_attempt")&&(t.showSkipped=!0),t},e.prototype.initialize=function(){return $(".navbar .container-fluid").css("visibility","hidden"),this.questionResponseCollection=Marionette.getOption(this,"questionResponseCollection"),this.quizModel=Marionette.getOption(this,"quizModel")},e.prototype.onShow=function(){var t;return $(".progressStrip").click(function(){$(".quizProgress").toggleClass("progress-expand")}),this.$el.find("div.holder").jPages({containerID:"quiz-items",perPage:9,keyBrowse:!0,animation:"fadeIn",previous:".fa-chevron-left",next:".fa-chevron-right",midRange:15,links:"blank"}),this.collection.length<10&&this.$el.find(".customButtons").remove(),t=Marionette.getOption(this,"currentQuestion"),this.questionResponseCollection.each(function(t){return function(e){return t.quizModel.hasPermission("display_answer")||"skipped"===e.get("status")?t.changeClassName(e):void 0}}(this)),this.onQuestionChange(t),this.updateProgressBar(),this.updateSkippedCount()},e.prototype.changeQuestion=function(t){var e;return e=parseInt($(t.target).attr("id")),_.contains(this.questionResponseCollection.pluck("content_piece_id"),e)||!this.quizModel.hasPermission("single_attempt")?this.trigger("change:question",e):void 0},e.prototype.onQuestionChange=function(t){return this.$el.find("#quiz-items li").removeClass("current"),this.$el.find("#quiz-items a#"+t.id).closest("li").addClass("current")},e.prototype.onQuestionSubmitted=function(t){return this.updateProgressBar(),this.updateSkippedCount(),"skipped"!==t.get("status")||this.quizModel.hasPermission("single_attempt")?this.quizModel.hasPermission("display_answer")||"skipped"===t.get("status")?this.changeClassName(t):void 0:!1},e.prototype.changeClassName=function(t){var e,i;return i=t.get("status"),e=function(){switch(i){case"correct_answer":return"right";case"partially_correct":return"partiallyCorrect";case"wrong_answer":return"wrong";case"skipped":return"skip"}}(),this.$el.find("a#"+t.get("content_piece_id")).closest("li").removeClass("right wrong skip partiallyCorrect").addClass(e)},e.prototype.updateProgressBar=function(){var t,e,i;return i=_.size(this.questionResponseCollection.where({status:"skipped"})),t=this.questionResponseCollection.length-i,e=t/this.collection.length*100,this.$el.find("#quiz-progress-bar").attr("data-percentage",e+"%").attr("aria-valuenow",e).css({width:e+"%"}),this.$el.find("#answered-questions").html(t)},e.prototype.updateSkippedCount=function(){var t;return t=_.size(this.questionResponseCollection.where({status:"skipped"})),this.$el.find("#skipped-questions").html(t)},e}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/take-quiz-module/quiz-timer/app",["app","controllers/region-controller","bootbox"],function(t,e,i){return t.module("TakeQuizApp.QuizTimer",function(t,n){var o;return t.Controller=function(t){function e(){return this._showQuizTimerView=bind(this._showQuizTimerView,this),this._timeLeftOrElapsed=bind(this._timeLeftOrElapsed,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,i,n;return this.model=t.model,this.display_mode=t.display_mode,this.timerObject=t.timerObject,this.quizResponseSummary=t.quizResponseSummary,this.quizResponseSummary&&(e=parseInt(this.quizResponseSummary.get("total_time_taken"))),e||(e=0),i=60*parseInt(this.model.get("duration")),this.durationInSeconds=i-e,this.timerObject.setHandler("get:elapsed:time",function(t){return function(){var e,i,n,o;return o=$(t.view.el).find("#downUpTimer").countdown("getTimes"),o?(n=$.countdown.periodsToSeconds(o),i=$(t.view.el).find("#downUpTimer").attr("timerdirection"),e="countDown"===i?t.durationInSeconds-n:t.durationInSeconds+n):void 0}}(this)),this.view=n=this._showQuizTimerView(this.model),this.show(n,{loading:!0}),this.listenTo(n,"end:quiz",function(){return this.region.trigger("end:quiz")}),this.listenTo(n,"show:single:quiz:app",function(){return this.region.trigger("show:single:quiz:app")})},e.prototype._timeLeftOrElapsed=function(){var t,e,i;return e=0,this.questionResponseModel&&(t=this.questionResponseModel.get("time_taken")),t&&"NaN"!==t&&(e=t),i=this.durationInSeconds-e},e.prototype._showQuizTimerView=function(t){return new o({model:t,display_mode:this.display_mode,timeLeftOrElapsed:this._timeLeftOrElapsed()})},e}(e),o=function(t){function e(){return this.quizTimedOut=bind(this.quizTimedOut,this),this.countDown=bind(this.countDown,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="timerBox",e.prototype.template='<div class="container-grey"> <div class="timerStrip"><span class="fa fa-clock-o"></span></div> <div class="bold small-text text-center p-t-10"> Quiz Time</div> {{#completed_quiz}} <div class="b-grey m-b-10 p-b-5" id="completed-quiz"> <div class="qstnStatus text-center"><i class="fa fa-check-circle"></i> Completed</div> </div> <div class="endQuiz b-grey b-t p-t-10 p-b-10"> <button type="button" id="end-replay" class="btn btn-white block h-center"> End Replay </button> </div> {{/completed_quiz}} {{^completed_quiz}} <div id="downUpTimer" timerdirection=""></div> <div class="endQuiz b-grey b-t p-t-10 p-b-10"> <button type="button" id="end-quiz" class="btn btn-white block h-center"> End Quiz </button> </div> {{/completed_quiz}} </div> <div class="container-grey m-b-5 m-t-5 p-t-10 p-r-10 p-b-10 p-l-20"> <label class="form-label bold small-text muted no-margin inline">Question Info: </label> <p class="inline text-grey small">Testing Question instruction. with hints and comment.</p> </div>',e.prototype.events={"click #end-quiz":"endQuiz","click #end-replay":"endReplay"},e.prototype.mixinTemplateHelpers=function(t){var e;return this.display_mode=Marionette.getOption(this,"display_mode"),("replay"===(e=this.display_mode)||"quiz_report"===e)&&(t.completed_quiz=!0),t},e.prototype.onShow=function(){var t,e;return e=Marionette.getOption(this,"timeLeftOrElapsed"),this.display_mode=Marionette.getOption(this,"display_mode"),"replay"!==(t=this.display_mode)&&"quiz_report"!==t&&e>=0?this.countDown(e):void 0},e.prototype.countDown=function(t){return this.$el.find("#downUpTimer").attr("timerdirection","countDown").countdown("destroy").countdown({until:t,format:"MS",onExpiry:this.quizTimedOut})},e.prototype.quizTimedOut=function(){var t;return this.trigger("end:quiz"),t=this.model.getMessageContent("quiz_time_up"),i.alert(t,function(t){return function(){return t.trigger("show:single:quiz:app")}}(this))},e.prototype.endQuiz=function(){var t;return t=this.model.getMessageContent("end_quiz"),i.confirm(t,function(t){return function(e){return e?(t.trigger("end:quiz"),t.trigger("show:single:quiz:app")):void 0}}(this))},e.prototype.endReplay=function(){return this.trigger("show:single:quiz:app")},e}(Marionette.ItemView)})}),define("text!apps/quiz-modules/take-quiz-module/single-question/templates/question-area-tpl.html",[],function(){return'<!--<div class="container-grey m-b-5  qstnInfo">\n    <label class="form-label bold small-text muted no-margin inline">Question Info: </label>\n    <p class="inline text-grey small">{{&instructions}}</p>\n</div>-->\n\n<div id="content-board" class="quizContent"></div>\n\n\n<!--Admin side code reverted-->\n\n<div class="admin-side container-grey m-b-10 p-l-10 p-r-10 p-t-10 p-b-10 h-center quizActions"> \n    <span class="pull-left small" id="first_question"></span>\n    <button type="button" id="previous-question" class="btn btn-info pull-left"> \n        <i class="fa fa-backward"></i> Previous \n    </button>\n    {{#allow_submit_answer}}\n   <button type="button" id="submit-question" class="btn btn-success pull-right">\n        Submit <i class="fa fa-forward"></i> \n    </button>\n    {{/allow_submit_answer}}\n\n    <span class="pull-right small" id="last_question"></span>\n    <button type="button" id="next-question" class="none btn btn-info pull-right">\n        Next <i class="fa fa-forward"></i> \n    </button>\n\n    <div class="text-center">\n        {{#show_hint}}\n        <button type="button" id="show-hint" class="btn btn-default btn-sm btn-small m-r-10">\n            <i class="fa fa-lightbulb-o"></i> Hint\n        </button>\n        {{/show_hint}}\n        {{#show_skip}}\n            <button type="button" id="skip-question" class="btn btn-default btn-sm btn-small">\n                Skip <i class="fa fa-step-forward"></i>\n            </button>\n        {{/show_skip}}\n        {{#show_skip_helper_text}}\n            <div><i class="small">(questions once skipped cannot be answered later)</i></div>\n        {{/show_skip_helper_text}}\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<!--New design code-->\n\n\n<div class="container-grey m-b-10 p-l-10 p-r-10 p-t-10 p-b-10 h-center quizActions new-design"> \n    <!-- <span class="pull-left small" id="first_question"></span> -->\n  \n        {{#show_skip}}\n            <button type="button" id="skip-question" class="btn btn-default btn-sm btn-small">\n                Skip <i class="fa fa-step-forward"></i>\n            </button>\n        {{/show_skip}}\n\n        {{^replay}}\n        {{^allow_submit_answer}} \n        <button type="button" id="next-question" class="btn btn-default btn-sm btn-small" style="color:#AFABAB;border: 2px solid #AFABAB;">\n                Next <i class="fa fa-step-forward"></i>\n            </button>\n        {{/allow_submit_answer}} \n        {{/replay}}\n\n\n \n    \n\n    {{#allow_submit_answer}}   \n   <button type="button" id="submit-question" class="btn btn-success">\n        Submit <i class="fa fa-forward"></i> \n    </button>\n    {{/allow_submit_answer}}\n        <div class="submit2">\n        {{#allow_submit_answer}}   \n           <button type="button" id="submit-question" class="btn btn-success">\n                Submit <i class="fa fa-forward"></i> \n            </button>\n        {{/allow_submit_answer}}        \n        </div>\n\n\n    <!-- <span class="pull-right small" id="last_question"></span> -->\n\n\n    <!-- <div class="text-center"> -->\n        {{#show_hint}}\n        <button type="button" id="show-hint" class="btn btn-default btn-sm btn-small m-r-10">\n            <i class="fa fa-lightbulb-o"></i> Hint\n        </button>\n        {{/show_hint}}\n\n            <!-- <div><i class="small">(questions once skipped cannot be answered later)</i></div> -->\n \n\n        {{#replay}}\n        <div class="replay-actions">\n \n        <div>\n        <button type="button" id="previous-question" class="btn btn-info"> \n             <h4>Previous</h4>\n        </button>\n        </div>\n \n        <div>\n        <button type="button" id="next-question" class="none btn btn-info">\n            <h4>Next</h4>\n        </button>\n        </div>\n \n        </div>\n        {{/replay}}\n\n    <!-- </div> -->\n    <div class="clearfix"></div>\n</div>\n\n\n\n\n\n\n\n{{#showComment}}\n    <div class="container-grey m-b-5 quizComment">\n        <label class="form-label bold small-text muted no-margin inline">Comment: </label>\n        <p class="inline text-grey small">{{&comment}}</p>\n    </div>\n{{/showComment}}'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/take-quiz-module/single-question/views",["app","controllers/region-controller","bootbox","text!apps/quiz-modules/take-quiz-module/single-question/templates/question-area-tpl.html"],function(t,e,i,n){return t.module("TakeQuizApp.SingleQuestion",function(t,e){return t.SingleQuestionLayout=function(t){function e(){return this.mixinTemplateHelpers=bind(this.mixinTemplateHelpers,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e.prototype.regions={contentBoardRegion:"#content-board"},e.prototype.events={"click #submit-question":function(){return this.trigger("validate:answer")},"click #previous-question":function(){return this.trigger("goto:previous:question")},"click #skip-question":function(){return this.trigger("skip:question")},"click #show-hint":function(){return i.alert(this.model.get("hint")),this.trigger("show:hint:dialog")},"click #next-question":function(){return this.trigger("goto:next:question")}},e.prototype.mixinTemplateHelpers=function(t){var e,i,n;return n=Marionette.getOption(this,"questionResponseModel"),e=Marionette.getOption(this,"display_mode"),"replay"===e?(t.showComment=!0,t.replay=!0):(t.replay=!1,t.show_skip=!0,t.allow_submit_answer=!0,this.quizModel.hasPermission("allow_hint")&&_.trim(t.hint)&&(t.show_hint=!0),this.quizModel.hasPermission("single_attempt")&&!this.quizModel.hasPermission("allow_resubmit")&&(t.show_skip_helper_text=!0),n&&("skipped"!==n.get("status")&&(t.allow_submit_answer=!1),this.quizModel.hasPermission("single_attempt")&&(t.allow_submit_answer=!1,t.show_skip=!1),this.quizModel.hasPermission("allow_resubmit")&&(t.allow_submit_answer=!0),"paused"===n.get("status")&&(t.allow_submit_answer=!0),"skipped"!==(i=n.get("status"))&&"paused"!==i&&(t.show_skip=!1)),t.allow_submit_answer||(t.allow_skip=!1)),t},e.prototype.initialize=function(){return this.quizModel=Marionette.getOption(this,"quizModel")},e.prototype.onShow=function(){return 0===this.$el.find("#submit-question").length&&(this.model.id===parseInt(_.last(this.quizModel.get("content_pieces")))?(this.$el.find("#last_question").html("This is the last question"),this.$el.find("#next-question").hide()):this.$el.find("#next-question").show()),parseInt(this.model.id)===parseInt(_.first(this.quizModel.get("content_pieces")))?(this.$el.find("#first_question").html("This is the first question"),this.$el.find("#previous-question").hide()):void 0},e.prototype.onSubmitQuestion=function(){return this.$el.find("#submit-question").hide(),this.model.id===parseInt(_.last(this.quizModel.get("content_pieces")))?(this.$el.find("#last_question").html("This is the last question"),i.alert("You have completed the quiz. Now click on end quiz to view your quiz summary")):(this.$el.find("#next-question").show(),setTimeout(function(t){return function(){return t.trigger("goto:next:question")}}(this),3e3)),this.$el.find("#skip-question").hide()},e}(Marionette.Layout)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/take-quiz-module/single-question/app",["app","controllers/region-controller","bootbox","apps/quiz-modules/take-quiz-module/single-question/views"],function(t,e,i){return t.module("TakeQuizApp.SingleQuestion",function(t,n){var o,s;return o=null,s=null,t.Controller=function(e){function r(){return this._showSingleQuestionLayout=bind(this._showSingleQuestionLayout,this),this._showContentBoard=bind(this._showContentBoard,this),r.__super__.constructor.apply(this,arguments)}return extend(r,e),r.prototype.initialize=function(t){var e,r;return this.model=t.model,this.quizModel=t.quizModel,this.questionResponseCollection=t.questionResponseCollection,this.display_mode=t.display_mode,this.direction=t.direction,this.questionResponseModel=this.questionResponseCollection.findWhere({content_piece_id:this.model.id}),e=this.quizModel.hasPermission("display_answer"),this.answerWreqrObject=new Backbone.Wreqr.RequestResponse,this.answerWreqrObject.displayAnswer=e,this.answerWreqrObject.multiplicationFactor=this.model.get("multiplicationFactor"),this.layout=r=this._showSingleQuestionLayout(this.model,this.direction),this.answerModel=n.request("create:new:answer"),this.questionResponseModel&&"paused"!==this.questionResponseModel.get("status")&&("class_mode"!==this.display_mode||this.quizModel.hasPermission("single_attempt")||(this.answerWreqrObject.displayAnswer=!1),s=this.questionResponseModel.get("question_response"),_.isEmpty(s)&&(s={}),s.status=this.questionResponseModel.get("status"),s.marks=this.questionResponseModel.get("marks_scored"),this.answerModel=n.request("create:new:answer",s)),this.show(r,{loading:!0}),this.listenTo(r,"show",this._showContentBoard(this.model,this.answerWreqrObject,this.direction)),this.listenTo(this.region,"silent:save:question",function(t){
return function(){var e;return s=t.answerWreqrObject.request("get:question:answer"),o=s.answerModel,t.answerWreqrObject.request("submit:answer"),e=t._getAnswerStatus(o.get("marks"),s.totalMarks),o.set({status:e}),"wrong_answer"===o.get("status")&&_.toBool(t.quizModel.get("negMarksEnable"))&&o.set({marks:-s.totalMarks*t.quizModel.get("negMarks")/100}),t.region.trigger("submit:question",o)}}(this)),this.listenTo(r,"validate:answer",function(){return s=this.answerWreqrObject.request("get:question:answer"),o=s.answerModel,"sort"!==s.questionType&&"empty"===s.emptyOrIncomplete?i.confirm(this.quizModel.getMessageContent("submit_without_attempting"),function(t){return function(e){return e?t._triggerSubmit():void 0}}(this)):this._triggerSubmit()}),this.listenTo(r,"goto:next:question",function(){return this.region.trigger("goto:next:question")}),this.listenTo(r,"goto:previous:question",function(){return this.region.trigger("goto:previous:question")}),this.listenTo(r,"skip:question",function(){return this.answerModel.set({status:"skipped"}),this.region.trigger("skip:question",this.answerModel)}),this.listenTo(r,"show:hint:dialog",function(t){return function(){return t.answerModel.set({hint_viewed:!0})}}(this)),this.listenTo(this.region,"trigger:submit",function(t){return function(){return t._triggerSubmit()}}(this))},r.prototype._triggerSubmit=function(){return this.layout.triggerMethod("submit:question"),_.contains(_.pluck(this.model.get("layout"),"element"),"BigAnswer")?o.set({status:"teacher_check"}):(this.answerWreqrObject.request("submit:answer"),o.set({status:this._getAnswerStatus(o.get("marks"),s.totalMarks)}),"wrong_answer"===o.get("status")&&_.toBool(this.quizModel.get("negMarksEnable"))&&o.set({marks:-s.totalMarks*this.quizModel.get("negMarks")/100})),this.region.trigger("submit:question",o)},r.prototype._getAnswerStatus=function(t,e){var i;return i="wrong_answer",t=parseFloat(t),e=parseFloat(e),t===e&&(i="correct_answer"),t>0&&e>t&&(i="partially_correct"),i},r.prototype._showContentBoard=function(t,e,i){return null==i&&(i="ltr"),n.execute("show:content:board",{region:this.layout.contentBoardRegion,model:t,answerWreqrObject:e,answerModel:this.answerModel,quizModel:this.quizModel,direction:i})},r.prototype._showSingleQuestionLayout=function(e){return new t.SingleQuestionLayout({model:e,questionResponseModel:this.questionResponseModel,quizModel:this.quizModel,display_mode:this.display_mode})},r}(e)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/take-quiz-module/take-quiz-app",["app","controllers/region-controller","apps/quiz-modules/take-quiz-module/quiz-description/app","apps/quiz-modules/take-quiz-module/quiz-progress/app","apps/quiz-modules/take-quiz-module/quiz-timer/app","apps/quiz-modules/take-quiz-module/single-question/app"],function(t,e){return t.module("TakeQuizApp",function(t,i){var n,o,s,r,a,l,c,u,d,p;return c=null,u=null,l=null,a=null,r=null,s=null,p=null,o=0,d=null,t.TakeQuizController=function(e){function h(){return this._saveQuizResponseModel=bind(this._saveQuizResponseModel,this),this._changeQuestion=bind(this._changeQuestion,this),this._autosaveQuestionTime=bind(this._autosaveQuestionTime,this),this._startTakeQuiz=bind(this._startTakeQuiz,this),h.__super__.constructor.apply(this,arguments)}return extend(h,e),h.prototype.initialize=function(t){return c=t.quizModel,u=t.quizResponseSummary,l=t.questionsCollection,this.questionResponseCollection=t.questionResponseCollection,this.textbookNames=t.textbookNames,this.display_mode=t.display_mode,d=t.studentTrainingModule,this._startTakeQuiz(),i.vent.bind("closed:quiz",this._autosaveQuestionTime)},h.prototype._startTakeQuiz=function(){var t,e,a,d,h;return this.questionResponseCollection||(this.questionResponseCollection=i.request("create:empty:question:response:collection"),p=0),i.leftNavRegion.reset(),i.headerRegion.reset(),s=l.pluck("ID"),s=_.map(s,function(t){return parseInt(t)}),a=this.questionResponseCollection.findWhere({status:"paused"}),a?(d=a.get("content_piece_id"),o=parseInt(a.get("time_taken"))):(h=this._getUnansweredIDs(),_.isEmpty(h)?d||(d=_.first(s)):d=_.first(this._getUnansweredIDs())),u.isNew()&&(t={status:"started",questions_order:s},c.set({attempts:parseInt(c.get("attempts"))+1}),u.save(t)),r=l.get(d),this.layout=e=new n,this.show(this.layout,{loading:!0}),this.timerObject=new Backbone.Wreqr.RequestResponse,this.listenTo(this.layout,"show",this._showQuizViews),this.listenTo(this.layout.questionDisplayRegion,"goto:next:question",this._gotoNextQuestion),this.listenTo(this.layout.questionDisplayRegion,"submit:question",this._submitQuestion),this.listenTo(this.layout.questionDisplayRegion,"goto:previous:question",this._gotoPreviousQuestion),this.listenTo(this.layout.questionDisplayRegion,"skip:question",this._skipQuestion),this.listenTo(this.layout.quizTimerRegion,"end:quiz",this._endQuiz),this.listenTo(this.layout.quizTimerRegion,"show:single:quiz:app",this._showSingleQuizApp),this.listenTo(this.layout.quizProgressRegion,"change:question",this._changeQuestion),setInterval(function(t){return function(){var e;return e=t.timerObject.request("get:elapsed:time"),e&&"completed"!==u.get("status")?t._autosaveQuestionTime():void 0}}(this),3e4),$(window).on("beforeunload",function(t){return function(){return t._autosaveQuestionTime(),"Quiz in progress"}}(this))},h.prototype._autosaveQuestionTime=function(){var t,e,n,s;return a=this.questionResponseCollection.findWhere({content_piece_id:r.id}),s=this.timerObject.request("get:elapsed:time"),n=s+o-p,a&&"not_started"!==(e=a.get("status"))&&"paused"!==e?a.set({time_taken:n}):(a&&console.log(a.get("status")),t={summary_id:u.id,content_piece_id:r.id,question_response:[],status:"paused",marks_scored:0,time_taken:n},a=i.request("create:quiz:question:response:model",t)),this._saveQuizResponseModel(a)},h.prototype._changeQuestion=function(t){return r=l.get(t),this._showSingleQuestionApp()},h.prototype._submitQuestion=function(t){var e,n,s,a;return a=this.timerObject.request("get:elapsed:time"),s=a+o-p,o=0,p=a,e={summary_id:u.id,content_piece_id:r.id,question_response:_.omit(t.toJSON(),["marks","status"]),status:t.get("status"),marks_scored:t.get("marks"),time_taken:s},n=i.request("create:quiz:question:response:model",e),this._saveQuizResponseModel(n)},h.prototype._saveQuizResponseModel=function(t){var e;return e=this.questionResponseCollection.findWhere({content_piece_id:t.get("content_piece_id")}),e?e.set(t.toJSON()):(e=t,this.questionResponseCollection.add(t)),e.save(),"paused"!==e.get("status")?this.layout.quizProgressRegion.trigger("question:submitted",e):void 0},h.prototype._skipQuestion=function(t){return this._submitQuestion(t),this._gotoNextQuestion()},h.prototype._gotoNextQuestion=function(){var t;return null!=r&&(t=this._getNextItemID()),t?(r=l.get(t),this._showSingleQuestionApp()):this._showSingleQuizApp()},h.prototype._endQuiz=function(){var t,e,n;return a=this.questionResponseCollection.findWhere({content_piece_id:r.id}),"replay"!==(t=this.display_mode)&&"quiz_report"!==t?(a&&"paused"!==(e=a.get("status"))&&"not_attempted"!==e||this.layout.questionDisplayRegion.trigger("silent:save:question"),n=this._getUnansweredIDs(),n&&_.each(n,function(t){return function(e,n){var o;return r=l.get(e),o=i.request("create:new:answer"),o.set({status:"skipped"}),t._submitQuestion(o)}}(this)),u.set({status:"completed",total_time_taken:p,num_skipped:_.size(this.questionResponseCollection.where({status:"skipped"})),marks_scored:this.questionResponseCollection.getMarksScored(),negative_scored:this.questionResponseCollection.getNegativeScored(),total_marks_scored:this.questionResponseCollection.getTotalScored()}),u.save(),this._queueStudentMail()):void 0},h.prototype._showSingleQuizApp=function(){return i.execute("show:single:quiz:app",{region:i.mainContentRegion,quizModel:c,questionsCollection:l,questionResponseCollection:this.questionResponseCollection,quizResponseSummary:u,display_mode:this.display_mode,studentTrainingModule:d})},h.prototype._queueStudentMail=function(){var t;return t={component:"quiz",communication_type:"quiz_completed_student_mail",communication_mode:"email",additional_data:{quiz_id:c.id}},i.request("save:communications",t)},h.prototype._getUnansweredIDs=function(){var t,e,i,n;return i=this.questionResponseCollection.findWhere({status:"paused"}),e=this.questionResponseCollection.pluck("content_piece_id"),i&&(e=_.without(e,i.get("content_piece_id"))),t=_.map(c.get("content_pieces"),function(t){return parseInt(t)}),n=_.difference(t,e)},h.prototype._gotoPreviousQuestion=function(){var t;return null!=r&&(t=this._getPrevItemID()),t?(r=l.get(t),this._showSingleQuestionApp({direction:"rtl"})):void 0},h.prototype._getNextItemID=function(){var t,e,i,n;return i=_.indexOf(s,r.id),e=i+1,e<s.length?t=parseInt(s[e]):(n=this._getUnansweredIDs(),n&&(t=_.first(_.intersection(s,n)))),t},h.prototype._getPrevItemID=function(){var t,e;return t=_.indexOf(s,r.id),t>0?e=parseInt(s[t-1]):void 0},h.prototype._showSingleQuestionApp=function(e){var i;return null==e&&(e="ltr"),i="quiz_report"===this.display_mode?"replay":this.display_mode,r?(new t.SingleQuestion.Controller({region:this.layout.questionDisplayRegion,model:r,quizModel:c,questionResponseCollection:this.questionResponseCollection,display_mode:i,direction:e}),this.layout.quizProgressRegion.trigger("question:changed",r),this.layout.quizDescriptionRegion.trigger("question:changed",r)):void 0},h.prototype._showQuizViews=function(){return new t.QuizDescription.Controller({region:this.layout.quizDescriptionRegion,model:c,currentQuestion:r,textbookNames:this.textbookNames,display_mode:this.display_mode}),new t.QuizProgress.Controller({region:this.layout.quizProgressRegion,questionsCollection:l,currentQuestion:r,quizModel:c,questionResponseCollection:this.questionResponseCollection}),new t.QuizTimer.Controller({region:this.layout.quizTimerRegion,model:c,display_mode:this.display_mode,timerObject:this.timerObject,quizResponseSummary:u}),this._showSingleQuestionApp()},h}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div id="quiz-description-region"></div> <div class="sidebarContainer"> <div id="quiz-timer-region"></div> <div id="quiz-progress-region"></div> </div> <div id="question-display-region"></div>',e.prototype.regions={quizDescriptionRegion:"#quiz-description-region",quizTimerRegion:"#quiz-timer-region",quizProgressRegion:"#quiz-progress-region",questionDisplayRegion:"#question-display-region"},e.prototype.className="content",e.prototype.onShow=function(){return $(".page-content").addClass("condensed expand-page")},e}(Marionette.Layout),i.commands.setHandler("start:take:quiz:app",function(e){return null==e&&(e={}),new t.TakeQuizController(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/view-single-quiz/single-quiz-controller",["app","controllers/region-controller","apps/quiz-modules/view-single-quiz/layout","apps/quiz-modules/view-single-quiz/quiz-description/quiz-description-app","apps/quiz-modules/view-single-quiz/content-display/content-display-app","apps/quiz-modules/view-single-quiz/attempts/app","apps/quiz-modules/take-quiz-module/take-quiz-app"],function(t,e){return t.module("QuizModuleApp.ViewQuiz",function(t,i){return t.Controller=function(e){function n(){return this._showAttemptsRegion=bind(this._showAttemptsRegion,this),this.showQuizViews=bind(this.showQuizViews,this),this.startQuiz=bind(this.startQuiz,this),this._fetchQuestionResponseCollection=bind(this._fetchQuestionResponseCollection,this),this._fetchQuizResponseSummary=bind(this._fetchQuizResponseSummary,this),n.__super__.constructor.apply(this,arguments)}var o,s,r,a,l,c,u;return extend(n,e),r=null,s=null,a=null,l=null,c=null,u=null,o=null,n.prototype.initialize=function(t){var e,n,l;return $(window).off("beforeunload"),l=t.quiz_id,r=t.quizModel,s=t.questionsCollection,this.questionResponseCollection=t.questionResponseCollection,u=t.studentTrainingModule,a=t.quizResponseSummary,this.quizResponseSummaryCollection=t.quizResponseSummaryCollection,o=t.display_mode,this.student=t.student,e=t.d_mode,r||(r=i.request("get:quiz:by:id",l)),e&&(o=e),$.showHeaderAndLeftNav(),this.fetchQuizResponseSummary=this._fetchQuizResponseSummary(),n=this._fetchQuestionResponseCollection(),n.done(function(t){return function(){return i.execute("when:fetched",r,function(){var e;return"ERROR"===r.get("code")?(i.execute("show:no:permissions:app",{region:i.mainContentRegion,error_header:"Unauthorized Quiz",error_msg:r.get("error_msg")}),!1):("quiz_report"!==o&&(o="completed"===a.get("status")?"replay":"class_mode"),e=_.flatten(r.get("term_ids")),t.textbookNames=i.request("get:textbook:names:by:ids",e),_.isEmpty(a.get("questions_order"))||r.set("content_pieces",a.get("questions_order")),s||(s=i.request("get:content:pieces:by:ids",r.get("content_pieces")),i.execute("when:fetched",s,function(){return t._setMarks(),t._randomizeOrder()})),i.execute("when:fetched",[s,t.textbookNames],function(){var e;return e=t._getStudent(),e.done(function(){var e;return t.layout=e=t._getQuizViewLayout(),t.show(t.layout,{loading:!0}),t.listenTo(t.layout,"show",function(){return t.showQuizViews(),t._showAttemptsRegion()}),t.listenTo(t.layout,"goto:next:item:student:training:module",function(){var t;return t={type:"quiz",id:r.id},i.vent.trigger("next:item:student:training:module",t)}),t.listenTo(t.layout.quizDetailsRegion,"start:quiz:module",t.startQuiz),t.listenTo(t.layout.quizDetailsRegion,"try:again",t._tryAgain),t.listenTo(t.layout.attemptsRegion,"view:summary",t._viewSummary)})}))})}}(this))},n.prototype._setMarks=function(){var t,e;return t=0,s.each(function(e){return e.get("marks")?t+=e.get("marks"):void 0}),t>0&&(e=r.get("marks")/t),e?s.each(function(t){return t.setMarks(e)}):void 0},n.prototype._randomizeOrder=function(){return a.isNew()&&r.get("permissions").randomize?(s.each(function(t){return t.unset("order")}),s.reset(s.shuffle()),r.set("content_pieces",s.pluck("ID"))):void 0},n.prototype._getStudent=function(){return this.defer=$.Deferred(),this.student?this.student instanceof Backbone.Model?(c=this.student,this.defer.resolve()):(c=i.request("get:user:by:id",this.student),i.execute("when:fetched",c,function(t){return function(){return t.defer.resolve()}}(this))):this.defer.resolve(),this.defer.promise()},n.prototype._tryAgain=function(){return"practice"!==r.get("quiz_type")?!1:(this.questionResponseCollection=null,r.set({attempts:parseInt(r.get("attempts"))+1}),this.summary_data={collection_id:r.get("id"),student_id:i.request("get:loggedin:user:id"),taken_on:moment().format("YYYY-MM-DD")},a=i.request("create:quiz:response:summary",this.summary_data),l.add(a),o="class_mode",this._randomizeOrder(),this.startQuiz())},n.prototype._viewSummary=function(t){var e;return a=l.get(t),this.questionResponseCollection=null,e=this._fetchQuestionResponseCollection(),e.done(function(t){return function(){var e,i,n,o,l;if(!_.isEmpty(a.get("questions_order"))){for(s.each(function(t){return t.unset("order")}),r.set("content_pieces",a.get("questions_order")),l=[],o=r.get("content_pieces"),e=0,i=o.length;i>e;e++)n=o[e],l.push(s.get(n));s.reset(l)}return t.layout.$el.find("#quiz-details-region,#content-display-region").hide(),t.layout.$el.find("#quiz-details-region,#content-display-region").fadeIn("slow"),t.showQuizViews(),t.layout.attemptsRegion.$el.find(".view-summary i").removeClass("fa fa-spin fa-spinner"),t._scrolltoQuizDetailsRegion()}}(this))},n.prototype._scrolltoQuizDetailsRegion=function(){var t;return t=this.layout.quizDetailsRegion.$el.offset().top,t-=70,$("html,body").animate({scrollTop:t},"slow")},n.prototype._fetchQuizResponseSummary=function(){var t;return t=$.Deferred(),this.quizResponseSummaryCollection&&(l=this.quizResponseSummaryCollection),a?(t.resolve(),t.promise()):(this.summary_data={collection_id:r.get("id"),student_id:i.request("get:loggedin:user:id"),taken_on:moment().format("YYYY-MM-DD")},l=i.request("get:quiz:response:summary",this.summary_data),i.execute("when:fetched",l,function(e){return function(){return l.length>0?(a=l.last(),t.resolve()):(a=i.request("create:quiz:response:summary",e.summary_data),l.add(a),t.resolve())}}(this)),t.promise())},n.prototype._fetchQuestionResponseCollection=function(){var t;return t=$.Deferred(),this.fetchQuizResponseSummary.done(function(e){return function(){return e.questionResponseCollection||a.isNew()?t.resolve():(e.questionResponseCollection=i.request("get:quiz:question:response:collection",{summary_id:a.get("summary_id")}),i.execute("when:fetched",e.questionResponseCollection,function(){return t.resolve()}))}}(this)),t.promise()},n.prototype.startQuiz=function(){return i.execute("start:take:quiz:app",{region:i.mainContentRegion,quizModel:r,quizResponseSummary:a,questionsCollection:s,display_mode:o,questionResponseCollection:this.questionResponseCollection,textbookNames:this.textbookNames,studentTrainingModule:u})},n.prototype.showQuizViews=function(){return i.execute("show:view:quiz:detailsapp",{region:this.layout.quizDetailsRegion,model:r,display_mode:o,quizResponseSummary:a,textbookNames:this.textbookNames,studentTrainingModule:u}),"completed"===a.get("status")?i.execute("show:quiz:items:app",{region:this.layout.contentDisplayRegion,model:r,groupContentCollection:s,questionResponseCollection:this.questionResponseCollection}):void 0},n.prototype._showAttemptsRegion=function(){return"practice"===r.get("quiz_type")&&r.get("attempts")>0?i.execute("show:quiz:attempts:app",{region:this.layout.attemptsRegion,model:r,quizResponseSummaryCollection:l}):void 0},n.prototype._getQuizViewLayout=function(){return new t.LayoutView.QuizViewLayout({model:r,display_mode:o,student:c,studentTrainingModule:u})},n}(e),i.commands.setHandler("show:single:quiz:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/quiz-modules/quiz-module-app",["app","apps/quiz-modules/view-single-quiz/single-quiz-controller"],function(t){return t.module("QuizModuleApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"create-quiz":"createQuiz","edit-quiz/:id":"editQuiz","quiz-list":"showQuizList","view-quiz/:id":"viewQuiz","students/dashboard/textbook/:tID/quiz/:qID":"startQuizClassMode","dummy-quiz/:content_piece_id":"showDummyQuiz","quiz-report/student/:sID/quiz/:qID":"viewStudentsQuiz"},e}(Marionette.AppRouter),i={viewQuiz:function(i){return $.allowRoute("view-quiz")?new t.ViewQuiz.Controller({region:e.mainContentRegion,quiz_id:i}):void 0},viewStudentsQuiz:function(i,n){return $.allowRoute("view-quiz")?new t.ViewQuiz.Controller({region:e.mainContentRegion,quiz_id:n,student:i,d_mode:"quiz_report"}):void 0},startQuizClassMode:function(i,n){return $("#header-region").hide(),$("#left-nav-region").hide(),$.allowRoute("view-quiz")?new t.ViewQuiz.Controller({region:e.mainContentRegion,quiz_id:n}):void 0},createQuiz:function(){return $.allowRoute("create-quiz")?e.execute("show:edit:module:controller",{region:e.mainContentRegion,groupType:"quiz"}):void 0},editQuiz:function(t){return $.allowRoute("edit-quiz")?e.execute("show:edit:module:controller",{region:e.mainContentRegion,group_id:t,groupType:"quiz"}):void 0},showQuizList:function(){return $.allowRoute("quiz-list")?e.execute("show:module:listing:app",{region:e.mainContentRegion,groupType:"quiz"}):void 0},showDummyQuiz:function(t){var i;return $.allowRoute("dummy-quiz")?(this.contentPiece=e.request("get:content:piece:by:id",t),i=e.request("empty:content:pieces:collection"),e.execute("when:fetched",this.contentPiece,function(n){return function(){var o,s,r,a,l;return i.add(n.contentPiece),s=e.request("create:dummy:quiz:module",t),a=n.contentPiece.get("term_ids"),s.set({term_ids:a}),l=e.request("get:textbook:names:by:ids",a),o={student_id:5,collection_id:152},r=e.request("create:quiz:response:summary",o),e.execute("when:fetched",l,function(){return e.execute("start:take:quiz:app",{region:e.mainContentRegion,quizModel:s,quizResponseSummary:r,questionsCollection:i,display_mode:"class-mode",textbookNames:l})})}}(this))):void 0}},t.on("start",function(){return new n({controller:i})})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/edit-module/module-edit-views",["app"],function(t){return t.module("StudentTrainingApp.Edit.Views",function(t,e){var i;return t.EditLayout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="teacher-app" id="teacher-app"> <div id="collection-details-region"></div> <div id="content-selection-region"></div> </div> <div id="content-display-region"></div>',e.prototype.className="",e.prototype.regions={collectionDetailsRegion:"#collection-details-region",contentSelectionRegion:"#content-selection-region",contentDisplayRegion:"#content-display-region"},e}(Marionette.Layout),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="teacher-app"> <div id="collection-details-region"> <div class="tiles white grid simple vertical green animated fadeIn"> <div class="grid-title no-border"> <h3>This module is not editable</h3> <p>Current Status: {{currentStatus}}</p> </div> </div> </div> </div>',e.prototype.mixinTemplateHelpers=function(t){var e;switch(e=Marionette.getOption(this,"status")){case"publish":t.currentStatus="Published";break;case"archive":t.currentStatus="Archived";break;default:t.currentStatus="Not specified!"}return t},e}(Marionette.ItemView)})}),define("text!apps/student-training-module/edit-module/module-description/templates/collection-details.html",[],function(){return'<form name="content-collection-form" id="content-collection-form">\n	<div class="grid-title"><h3 class="m-t-0">{{heading}} <span class="semi-bold">Student Training Module</span>\n    </h3>\n	</div>\n	<div class="grid-body" style="overflow: hidden; display: block;">\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<input id="group_name" class="input-lg" name="name" value="{{name}}" placeholder="Module Name" type="text" required="required" />\n			</div>\n		</div>\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<label class="form-label">Objective<span class="text-error">*</span></label>\n				<textarea id="objective" name="description[objective]" required="required" class="form-control" placeholder="Enter Objective">{{description.objective}}</textarea>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Description</label>\n				<textarea id="description" name="description[description]" rows="4" class="form-control" placeholder="Enter Description">{{description.description}}</textarea>\n			</div>\n		</div>\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<label class="form-label">Physical Requirements</label>\n				<textarea name="description[physical_requirements]" class="form-control" placeholder="Enter Physical Requirements">{{description.physical_requirements}}</textarea>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Electronic Requirements</label>\n				<textarea id="electronic_requirements" name="description[electionic_requirements]" class="form-control" placeholder="Enter Electronic Requirements">{{description.electionic_requirements}}</textarea>\n			</div>										 \n		</div>\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<label required="required" class="form-label">Textbook<span class="text-error">*</span></label>\n				<select name="term_ids[textbook]" id="textbooks" class="form-control select2" >\n					<option value="">--select textbook--</option>\n	                {{#textbooksFilter}}\n	                	<option value="{{id}}" {{textBookSelected}}>{{name}}</option>\n	                {{/textbooksFilter}}\n	            </select>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Chapter<span class="text-error">*</span> <span class="muted small pull-right"> Select a Textbook first</span></label>\n				<select name="term_ids[chapter]" id="chapters" class="form-control select2" >\n					<option value="">--select chapters--</option>\n	            </select>\n			</div>											 \n		</div>\n		<div class="row m-b-10">\n            <div class="col-md-6">\n                <label class="form-label">Section <span class="muted small pull-right"> Select a Chapter first</span></label>\n                <select name="term_ids[sections][]" id="secs" class="form-control select2" multiple="">\n                </select>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Sub-Sections <span class="muted small pull-right"> Select a Chapter first</span></label>\n				<select name="term_ids[subsections][]" id="subsecs" class="form-control select2" multiple="">\n	            </select>\n			</div>											 \n		</div>\n        <div class="row">\n            <div class="col-sm-6">\n                <label class="form-label">Status</label>\n                <select required name="post_status" id="status" class="form-control" >\n                    <option value="underreview">Under Review</option>\n                    <option value="publish">Published</option>\n                    <option value="archive">Archived</option>\n                </select>\n            </div>\n			<div class="col-md-6">\n				<label class="form-label">Duration<span class="text-error">*</span></label>\n		    	<input id="duration" name="duration" value="{{duration}}" class="pull-left" placeholder="Enter Duration" type="text" min="1" /> &nbsp; mins\n		    	<!-- <select style="width:120px; margin-left:10px" name="minshours" id="minshours" class="form-control select2 pull-left">\n		    		<option value="mins" selected="selected">mins</option>\n		    		<option value="hrs">hour(s)</option>\n	            </select> -->\n			</div>\n        </div>\n\n        <div class="row">\n        	<div class="col-sm-12">\n        		<button type="submit" class="btn btn-success btn-cons2 right pull-right m-t-10" id="save-content-collection"> \n                <i class="fa fa-check"></i> \n                Save</button>\n        	</div>\n        </div>\n	</div>\n</form>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/edit-module/module-description/module-description-views",["app","text!apps/student-training-module/edit-module/module-description/templates/collection-details.html"],function(t,e){return t.module("StudentTrainingEditDescription.Views",function(t,i){return t.CollectionDetailsView=function(t){function i(){return this.permissionSelected=bind(this.permissionSelected,this),i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="grid simple vertical green animated fadeIn",i.prototype.events={"change #textbooks":function(t){return this.trigger("fetch:chapters",$(t.target).val())},"change #chapters":function(t){return this.trigger("fetch:sections",$(t.target).val())},"change #secs":function(t){return this.trigger("fetch:subsections",$(t.target).val())},"click #save-content-collection":"save_content","click .customMsgLink":"_openCustomMsgPopup",'change input[name="negMarksEnable"]':function(t){return t.stopPropagation(),this._toggleNegativeMarks($(t.target))},"change #msgs":function(t){return this._showCustomMessages($(t.target))},"click .checkbox.perm":"permissionSelected"},i.prototype.modelEvents={"change:post_status":"statusChanged","change:content_layout":"_changeLayout"},i.prototype.mixinTemplateHelpers=function(t){return t=i.__super__.mixinTemplateHelpers.call(this,t),t.heading=this.model.isNew()?"Create a":"Edit a",t.type=_.titleize(_.humanize(t.type)),t.isQuiz&&t.permissions&&(t.permissions.single_attempt=!t.permissions.single_attempt),t.textBookSelected=function(){return parseInt(this.id)===parseInt(t.term_ids.textbook)?"selected":void 0},t.defaultRandomize=function(e){return function(){return t.isQuiz&&e.model.isNew()?'checked="checked"':void 0}}(this),t},i.prototype.permissionSelected=function(t){var e;switch(e=$(t.target).closest(".checkbox.perm").find("input").attr("id")){case"resubmit":return this.unSelectCheckbox("answer");case"answer":return this.unSelectCheckbox("resubmit")}},i.prototype.unSelectCheckbox=function(t){return this.$el.find("input#"+t).attr("checked",!1)},i.prototype.onShow=function(){return Backbone.Syphon.deserialize(this,this.model.toJSON()),"quiz"===this.model.get("type")&&this.$el.find("#qType").val(this.model.get("quiz_type")),"quiz"===this.model.get("type")&&this._toggleNegativeMarks(this.$el.find('input[name="negMarksEnable"]:checked')),this.$el.find("select:not(#qType,#status)").select2(),this.$el.find("#secs,#subsecs").val([]).select2(),this.model.isNew()&&(this.$el.find('select#status option[value="publish"]').prop("disabled",!0),this.$el.find('select#status option[value="archive"]').prop("disabled",!0)),this.statusChanged(),"quiz"===this.model.get("type")?this._changeLayout():void 0},i.prototype.statusChanged=function(){var t;return"publish"===(t=this.model.get("post_status"))||"archive"===t?(this.$el.find("input, textarea, select").prop("disabled",!0),this.$el.find("select#status").prop("disabled",!1),this.$el.find('select#status option[value="underreview"]').prop("disabled",!0)):void 0},i.prototype.onFetchChaptersComplete=function(t){var e,i,n;return this.$el.find("#chapters, #secs, #subsecs").select2("data",null),this.$el.find("#chapters, #secs, #subsecs").html(""),e=this.$el.find("#chapters"),n=this.model.get("term_ids"),i=n.chapter,$.populateChaptersOrSections(t,e,i)},i.prototype.setChapterValue=function(){return this.model.get("term_ids").chapter?(this.$el.find("#chapters").val(this.model.get("term_ids").chapter),this.$el.find("#chapters").select2(),this.$el.find("#chapters").trigger("change")):void 0},i.prototype.onFetchSectionsComplete=function(t){var e,i,n;return this.$el.find("#secs, #subsecs").select2("data",null),this.$el.find("#secs, #subsecs").html(""),n=this.model.get("term_ids"),null!=n&&(e=n.sections),i=this.$el.find("#secs"),$.populateChaptersOrSections(t,i,e)},i.prototype.onFetchSubsectionsComplete=function(t){var e,i,n;return this.$el.find("#subsecs").select2("data",null),this.$el.find("#subsecs").html(""),n=this.model.get("term_ids"),null!=n&&(e=n.subsections),i=this.$el.find("#subsecs"),$.populateChaptersOrSections(t,i,e)},i.prototype.markSelected=function(t,e){return this.model.isNew()?"":$("#"+t).val(this.model.get("term_ids")[e]).select2()},i.prototype.save_content=function(t){var e,i,n;if(this.$el.find("#saved-success").remove(),t.preventDefault(),$("#s2id_textbooks .select2-choice,#s2id_chapters .select2-choice").removeClass("error"),i=!0,_.isEmpty(this.$el.find("#textbooks").val())&&($("#s2id_textbooks .select2-choice").addClass("error"),i=!1),_.isEmpty(this.$el.find("#chapters").val())&&($("#s2id_chapters .select2-choice").addClass("error"),
i=!1),this.$el.find("form").valid()&&i){if(this.$el.find("#save-content-collection i").addClass("fa-spin fa-spinner"),e=Backbone.Syphon.serialize(this),"quiz"===this.model.get("type")&&(n=e.permissions.single_attempt,e.permissions.single_attempt=!n,"true"===e.negMarksEnable&&""===e.negMarks&&"quiz"===this.model.get("type")&&(e.negMarks=0)),"publish"===e.post_status){if("quiz"===this.model.get("type")&&_.isEmpty(this.model.get("content_layout")))return this._cannotPublish(),!1;if("teaching-module"===this.model.get("type")&&_.isEmpty(this.model.get("content_pieces")))return this._cannotPublish(),!1}return this.trigger("save:content:collection:details",e)}},i.prototype._cannotPublish=function(){var t,e;return t="quiz"===this.model.get("type")?"questions":"Content Pieces",e=_.titleize(_.humanize(this.model.get("type"))),this.$el.find(".grid-title").prepend('<div id="saved-success" class="text-error"> Cannot Publish '+e+". No "+t+" Added. </div>"),$("html, body").animate({scrollTop:0},700),this.$el.find("#save-content-collection i").removeClass("fa-spin fa-spinner")},i.prototype._toggleNegativeMarks=function(t){return"true"===$(t).val()?this.$el.find("#negPercent").removeClass("none").addClass("inline"):this.$el.find("#negPercent").addClass("none").removeClass("inline")},i.prototype._openCustomMsgPopup=function(t){return t.stopPropagation(),this.trigger("show:custom:msg:popup",{slug:$(t.target).closest(".customMsgLink").attr("data-slug")})},i.prototype._changeLayout=function(){},i.prototype.onSavedContentGroup=function(t){var e,i,n;return this.$el.find("#saved-success").remove(),this.$el.find("select#status option").prop("disabled",!1),("publish"===(n=this.model.get("post_status"))||"archive"===n)&&this.$el.find('select#status option[value="underreview"]').prop("disabled",!0),this.$el.find("#save-content-collection i").removeClass("fa-spin fa-spinner").addClass("fa-check"),e=t.changedAttributes(),i=e.id?"saved":"updated",this.$el.find(".grid-title").prepend('<div id="saved-success">Student training module '+i+'. Click here to <a href="#view-student-training-module/'+t.get("id")+'">view module.</a><hr></div>'),$("html, body").animate({scrollTop:0},700)},i}(Marionette.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/edit-module/module-description/module-description-controller",["app","controllers/region-controller","apps/student-training-module/edit-module/module-description/module-description-views"],function(t,e){return t.module("StudentTrainingEditDescription",function(t,i){return t.Controller=function(e){function n(){return this._fetchSubsections=bind(this._fetchSubsections,this),this._fetchSections=bind(this._fetchSections,this),this._fetchChapters=bind(this._fetchChapters,this),this.successFn=bind(this.successFn,this),this.showView=bind(this.showView,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.model=t.model,this.contentGroupCollection=t.contentGroupCollection,this.textbooksCollection=i.request("get:textbooks",{fetch_all:!0}),i.execute("when:fetched",[this.textbooksCollection],this.showView)},n.prototype.showView=function(){var t,e;return this.view=e=this._getCollectionDetailsView(this.model),t=this.model.get("term_ids"),this.listenTo(this.view,"show",function(e){return function(){var i,n,o,s;return _.size(t)>0?(s=t.textbook,null!=t.chapter&&(i=t.chapter),null!=t.sections&&(o=_.flatten(t.sections)),n=e._fetchChapters(s,i),n.done(function(){return null!=i&&e._fetchSections(i),null!=o?e._fetchSubsections(o):void 0})):void 0}}(this)),this.listenTo(this.view,"fetch:chapters",this._fetchChapters),this.listenTo(this.view,"fetch:sections",this._fetchSections),this.listenTo(this.view,"fetch:subsections",this._fetchSubsections),this.listenTo(this.view,"save:content:collection:details",function(t){return function(e){return t.model.set({changed:"module_details"}),t.model.save(e,{wait:!0,success:t.successFn,error:t.errorFn}),"underreview"!==e.post_status?t.region.trigger("close:content:selection:app"):void 0}}(this)),this.show(e,{loading:!0,entities:[this.textbooksCollection]})},n.prototype.successFn=function(t){return i.navigate("edit-student-training-module/"+t.get("id")),this.view.triggerMethod("saved:content:group",t)},n.prototype.errorFn=function(){return console.log("error")},n.prototype._fetchChapters=function(t,e){var n,o;return o=$.Deferred(),n=i.request("get:chapters",{parent:t}),i.execute("when:fetched",n,function(t){return function(){return t.view.triggerMethod("fetch:chapters:complete",n,e),o.resolve()}}(this)),o.promise()},n.prototype._fetchSections=function(t){return this.subSectionsList=null,this.allSectionsCollection=i.request("get:subsections:by:chapter:id",{child_of:t}),i.execute("when:fetched",this.allSectionsCollection,function(e){return function(){var i;return i=e.allSectionsCollection.where({parent:t}),e.subSectionsList=_.difference(e.allSectionsCollection.models,i),e.view.triggerMethod("fetch:sections:complete",i)}}(this))},n.prototype._fetchSubsections=function(t){return i.execute("when:fetched",this.allSectionsCollection,function(e){return function(){var i;return i=null,i=_.filter(e.subSectionsList,function(e){return _.contains(t,e.get("parent"))}),e.view.triggerMethod("fetch:subsections:complete",i)}}(this))},n.prototype._getCollectionDetailsView=function(e){return new t.Views.CollectionDetailsView({model:e,contentGroupCollection:this.contentGroupCollection,templateHelpers:{textbooksFilter:function(t){return function(){var e;return e=[],_.each(t.textbooksCollection.models,function(t,i){return e.push({name:t.get("name"),id:t.get("term_id")})}),e}}(this)}})},n}(e),i.commands.setHandler("show:student:training:edit:description",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/edit-module/module-edit-controller",["app","controllers/region-controller","apps/student-training-module/edit-module/module-edit-views","apps/student-training-module/edit-module/module-description/module-description-controller"],function(t,e){return t.module("StudentTrainingApp.Edit",function(t,i){return t.GroupController=function(e){function n(){return this._showContentSelectionApp=bind(this._showContentSelectionApp,this),this._getModuleEditLayout=bind(this._getModuleEditLayout,this),this.showGroupDetailsApp=bind(this.showGroupDetailsApp,this),this._getContentGroupCollection=bind(this._getContentGroupCollection,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.id=t.id,this.groupType=t.groupType,this.contentLayoutItems=null,this.studentTrainingModel=this.id?i.request("get:student:training:by:id",this.id):i.request("new:student:training:module"),this.studentTrainingModel.set("type","student-training"),i.execute("when:fetched",this.studentTrainingModel,function(t){return function(){return t.contentLayoutItems=t._getContentGroupCollection(),i.execute("when:fetched",t.contentLayoutItems,function(){return t.showContentGroupView()})}}(this))},n.prototype._getContentGroupCollection=function(){return this.contentLayoutItems=new Backbone.Collection,_.each(this.studentTrainingModel.get("content_layout"),function(t){return function(e){var n;return n="content-piece"===e.type?i.request("get:content:piece:by:id",e.id):i.request("get:quiz:by:id",e.id),t.contentLayoutItems.add(n)}}(this)),this.contentLayoutItems},n.prototype.showContentGroupView=function(){var t;return t={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"Create Content Group",link:"javascript:;",active:"active"}]},i.execute("update:breadcrumb:model",t),this.layout=this._getModuleEditLayout(),this.listenTo(this.layout,"show",function(t){return function(){return t.showGroupDetailsApp(),t.id?t._showContentSelectionApp(t.studentTrainingModel):void 0}}(this)),this.listenTo(this.studentTrainingModel,"change:id",this._showContentSelectionApp,this),this.listenTo(this.layout.collectionDetailsRegion,"close:content:selection:app",function(t){return function(){return console.log("close:content:selection:app "),t.layout.contentSelectionRegion.close()}}(this)),this.show(this.layout,{loading:!0})},n.prototype.showGroupDetailsApp=function(){return i.execute("show:student:training:edit:description",{region:this.layout.collectionDetailsRegion,model:this.studentTrainingModel,contentGroupCollection:this.contentLayoutItems})},n.prototype._getModuleEditLayout=function(){return new t.Views.EditLayout},n.prototype._showContentSelectionApp=function(t){return i.execute("when:fetched",this.contentLayoutItems,function(e){return function(){return"underreview"===t.get("post_status")&&i.execute("show:content:selectionapp",{region:e.layout.contentSelectionRegion,model:t,contentGroupCollection:e.contentLayoutItems}),i.execute("show:editgroup:content:displayapp",{region:e.layout.contentDisplayRegion,model:t,contentGroupCollection:e.contentLayoutItems})}}(this))},n}(e),i.commands.setHandler("show:student:training:edit:module:controller",function(e){return new t.GroupController(e)})})}),define("text!apps/student-training-module/view-module/module-description/templates/module-description.html",[],function(){return'<div class=\'tiles white grid simple animated fadeIn\'>\n    <div class="grid-title">\n        <div class="row">\n            <div class="col-md-4">\n                <h3 class="no-margin semi-bold">\n                    <span>Lecture </span>\n                    {{name}}\n                </h3>\n            </div>\n            <div class="col-md-4">\n                <h3 class="no-margin semi-bold">\n                <label class="form-label text-grey">Textbook</label>\n                    {{getTextbookName}}\n                </h3>\n            </div>\n            <div class="col-md-4">\n                 <h3 class="no-margin semi-bold">\n                <label class="form-label text-grey">Chapter</label>\n                    {{getChapterName}}\n                 </h3>   \n            </div>\n        </div>\n\n        <!-- <div class="tools">\n            <a href="javascript:;" class="collapse"></a>\n        </div> -->\n    </div>\n    <div class="grid-body" style="overflow: hidden; display: block;">\n        <div class="row m-b-10">\n            <div class="col-md-6 b-r b-grey">\n                    <label class="form-label">Objective</label>\n                    {{description.objective}}\n            </div>\n            <div class="col-md-6">\n                    <label class="form-label">Description</label>\n                    {{description.description}}\n            </div>\n            \n        </div>\n        <div class="row">\n            <div class="col-md-6 b-r b-grey">\n                    <label class="form-label">Physical Requirements</label>\n                    {{description.physical_requirements}}\n            </div>\n            <div class="col-md-6">\n                    <label class="form-label">Electronic Requirements</label>\n                    {{description.electionic_requirements}}\n            </div>\n            <!-- <div class="col-md-4">\n                    <label class="form-label">Duration</label>\n                    {{duration}} {{minshours}}\n            </div> -->\n        </div>\n    </div>\n\n    <div class="tiles grey text-grey p-t-10 p-l-15 p-r-10 p-b-10 b-grey b-b">\n        <div class="modTimes no-margin">\n            <div class="text-center b-r b-grey">\n                <p class="bold small-text muted no-margin"> Module Time</p>\n                <h3 class="bold text-grey no-margin">\n                    <span class="animate-number" data-animation-duration="1200">{{total_minutes}} mins</span>\n                </h3>\n            </div>\n\n            <div class="pull-right">\n                <button type="button" id="start-module" class="btn btn-success action btn-block m-t-10">Start</button>\n            </div>\n        </div>\n        <div class="row no-margin p-t-10">\n            <div class="col-sm-6">\n                \n            </div>\n            <div class="col-sm-6">\n                <div class="timedisplay"></div>\n\n                \n\n\n            </div>\n        </div>\n    </div>\n</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/student-training-module/view-module/module-description/description-app",["app","controllers/region-controller","text!apps/student-training-module/view-module/module-description/templates/module-description.html"],function(t,e,i){return t.module("StudentTrainingApp.Controller",function(t,n){var o;return t.ViewCollecionDetailsController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.model=t.model,this.mode=t.mode,this.questionResponseCollection=t.questionResponseCollection,this.textbookNames=t.textbookNames,this.view=e=this._getCollectionDetailsView(),this.listenTo(e,"start:training:module",function(t){return function(){return t.region.trigger("start:training:module")}}(this)),this.listenTo(e,"goto:previous:route",this._gotoPreviousRoute),this.show(e,{loading:!0,entities:[this.textbookNames]})},e.prototype._gotoPreviousRoute=function(){var t,e;return t=n.getCurrentRoute(),e=_(t).strLeft("/module"),n.navigate(e,!0)},e.prototype._getCollectionDetailsView=function(){var t,e,i;return e=this.model.get("term_ids"),t=_.size(this.questionResponseCollection.where({status:"completed"})),i=_.size(this.model.get("content_pieces")),new o({model:this.model,mode:this.mode,templateHelpers:this._getTemplateHelpers({terms:e,numOfQuestionsCompleted:t,totalNumofQuestions:i})})},e.prototype._getTemplateHelpers=function(t){return{showElapsedTime:function(t){return function(){var e,i,n;return i=t.questionResponseCollection.pluck("time_taken"),n=0,_.size(i)>0&&(n=_.reduce(i,function(t,e){return parseInt(t+parseInt(e))})),e=$.timeMinSecs(n)}}(this),getProgressData:function(){return t.numOfQuestionsCompleted+"/"+t.totalNumofQuestions},getProgressPercentage:function(){return parseInt(t.numOfQuestionsCompleted/t.totalNumofQuestions*100)},getTextbookName:function(e){return function(){var i,n;return n=e.textbookNames.get(t.terms.textbook),null!=n?i=n.get("name"):void 0}}(this),getChapterName:function(e){return function(){var i,n;return i=e.textbookNames.get(t.terms.chapter),$("#lect_name").html(null!=i?i.get("name"):void 0),null!=i?n=i.get("name"):void 0}}(this)}},e}(e),o=function(t){function e(){return this.startModule=bind(this.startModule,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.events={"click #start-module":"startModule","click #go-back-button":function(){return this.trigger("goto:previous:route")}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.takeClassModule=this.mode,t.isTraining="training"===this.mode?!0:!1,t},e.prototype.initialize=function(){return this.mode=Marionette.getOption(this,"mode")},e.prototype.startModule=function(){var t;return t=n.getCurrentRoute(),this.trigger("start:training:module")},e}(Marionette.ItemView),n.commands.setHandler("show:student:training:content:group:detailsapp",function(e){return null==e&&(e={}),new t.ViewCollecionDetailsController(e)})})}),define("text!apps/student-training-module/view-module/content-display/templates/content-display-item.html",[],function(){return'{{#isContentPiece}}\n<div class="contentPiece new-design" id="timeline_lecture" data-type="content-piece" data-id="{{ID}}">\n\n    <div class="cbp_tmicon info animated bounceIn">     <time class="cbp_tmtime" datetime="">\n        <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n    </time> </div>\n    <div class="cbp_tmlabel view" style="cursor:pointer">\n            <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n              <h4 class="m-t-5 m-b-5"><a class="text-grey semi-bold question_link">{{&post_excerpt}}</a> </h4>\n            </div>\n            <div class="clearfix"></div>\n    <div class="tiles grey p-t-10 p-b-10 p-l-20">\n        <div class="muted">\n            <span class="bold question-type-div">Question Type:</span> <span class="question-type-div"> {{question_type}}</span>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n    </div>\n</div>\n\n\n<div class="contentPiece admin-side" data-type="content-piece" data-id="{{ID}}">\n    <time class="cbp_tmtime" datetime="">\n        <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n    </time>\n    <div class="cbp_tmicon info animated bounceIn"> <span class="fa"></span> </div>\n    <div class="cbp_tmlabel view" style="cursor:pointer">\n            <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n              <h4 class="m-t-5 m-b-5"><a class="text-grey semi-bold question_link">{{&post_excerpt}}</a> </h4>\n            </div>\n            <div class="clearfix"></div>\n    <div class="tiles grey p-t-10 p-b-10 p-l-20">\n        <div class="muted">\n            <span class="bold question-type-div">Question Type:</span> <span class="question-type-div"> {{question_type}}</span>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n    </div>\n</div>\n\n\n{{/isContentPiece}}\n{{^isContentPiece}}\n<div class="contentPiece" data-type="quiz" data-id="{{id}}">\n    <time class="cbp_tmtime" datetime="">\n        <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n    </time>\n    <div class="cbp_tmicon info animated bounceIn"> <i class="fa fa-question"></i> </div>\n    <div class="cbp_tmlabel view" style="cursor:pointer">\n        <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n            <h4 class="m-t-5 m-b-5"><a class="text-grey semi-bold question_link">{{name}}</a> </h4>\n        </div>\n        <div class="clearfix"></div>\n        <div class="tiles grey p-t-10 p-b-10 p-l-20">           \n            <div class="muted">\n                    <span class="bold">Marks: </span>{{marks}},\n                    <span class="bold">Duration:</span> {{duration}} mins\n                    \n            </div> \n            <div class="clearfix"></div>\n        </div>\n    </div>\n</div>\n{{/isContentPiece}}'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/view-module/content-display/content-display-app",["app","controllers/region-controller","text!apps/student-training-module/view-module/content-display/templates/content-display-item.html"],function(t,e,i){return t.module("StudentTrainingApp.Controller",function(t,n){var o,s;return t.CollectionContentDisplayController=function(t){function e(){return this._getCollectionContentDisplayView=bind(this._getCollectionContentDisplayView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,i,n,o;return i=t.model,n=t.questionResponseCollection,e=t.groupContentCollection,this.studentCollection=t.studentCollection,this.mode="training",this.view=o=this._getCollectionContentDisplayView(i,e,n),this.show(o,{loading:!0,entities:[e,n]}),this.listenTo(this.view,"view:item",function(t){return function(e){return t.region.trigger("goto:item",e)}}(this))},e.prototype._getCollectionContentDisplayView=function(t,e,i){return new o({model:t,collection:e,responseCollection:i,studentCollection:this.studentCollection,mode:this.mode})},e}(e),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.tagName="li",e.prototype.className="",e.prototype.mixinTemplateHelpers=function(t){var e;return t.isContentPiece="content-piece"===t.post_type?!0:!1,e=Marionette.getOption(this,"additionalData"),t.dateCompleted=e.dateCompleted,"multiple_eval"===t.question_type&&(t.question_type="multiple Evaluation"),t.question_type=_.str.capitalize(t.question_type),e.responseStatus&&(t.responseStatus=e.responseStatus,t.timeTaken=e.timeTaken,t.correctAnswer=e.correctAnswer,t.teacherName=e.teacherName),t},e.prototype.onShow=function(){var t;return t="fa-question",this.model.get(!1)&&(t="fa-youtube-play"),this.$el.find(".cbp_tmicon .fa").addClass(t),"content_piece"===this.model.get("content_type")?this.$el.find("#correct-answer-div, .question-type-div").remove():void 0},e}(Marionette.ItemView),o=function(t){function e(){return this.viewItem=bind(this.viewItem,this),this.getResults=bind(this.getResults,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div id="myCanvas-miki" class="col-md-10"><ul class="cbp_tmtimeline"></ul></div>',e.prototype.itemView=s,e.prototype.itemViewContainer="ul.cbp_tmtimeline",e.prototype.itemViewOptions=function(t,e){var i,n,o,s,r,a,l;for(r=Marionette.getOption(this,"responseCollection"),l=r.where({content_piece_id:t.get("ID")}),o=0,s=l.length;s>o;o++)a=l[o],a=a;return i={},i.dateCompleted="N/A",a&&"completed"===a.get("status")&&(i.responseStatus=a.get("status"),i.timeTaken=$.timeMinSecs(a.get("time_taken")),i.dateCompleted=moment(a.get("end_date")).format("Do MMM YYYY"),i.correctAnswer=this.getResults(t,a.get("question_response")),i.teacherName=a.get("teacher_name")),n={model:t,additionalData:i}},e.prototype.getResults=function(t,e){var i,n,o,s,r,a,l,c,u,d,p,h;if(o="No One",u=[],p=Marionette.getOption(this,"studentCollection"),"chorus"===t.get("question_type"))e&&(o=CHORUS_OPTIONS[e]);else if("individual"===t.get("question_type")){for(s=0,a=e.length;a>s;s++){for(d=e[s],n=p.where({ID:d}),r=0,l=n.length;l>r;r++)i=n[r],c=i.get("display_name");u.push(c)}_.size(u)>0&&(h=u.join(", "),o=_.size(u)+" Students ("+h+")")}else o=_.size(_.pluck(e,"id"))+" Students";return o},e.prototype.events={"click .cbp_tmlabel.completed":"viewItem"},e.prototype.onShow=function(){var t,e,i,n,o,s,r,a,l,c,u,d;if(l=Marionette.getOption(this,"responseCollection"),t=l.where({status:"completed"}),c=_.chain(t).map(function(t){return t.toJSON()}).pluck("content_piece_id").value(),"training"===Marionette.getOption(this,"mode")){for(r=this.$el.find(".contentPiece"),u=[],e=0,n=r.length;n>e;e++)s=r[e],u.push($(s).find(".cbp_tmlabel").addClass("completed").css("cursor","pointer"));return u}for(a=this.$el.find(".contentPiece"),d=[],i=0,o=a.length;o>i;i++)s=a[i],_.contains(c,parseInt($(s).attr("data-id")))?d.push($(s).find(".cbp_tmlabel").addClass("done completed").css("cursor","pointer")):d.push(void 0);return d},e.prototype.viewItem=function(t){var e,i;return e=$(t.target).closest(".contentPiece").attr("data-id"),i=$(t.target).closest(".contentPiece").attr("data-type"),this.trigger("view:item",{id:e,type:i})},e}(Marionette.CompositeView),n.commands.setHandler("show:student:training:content:displayapp",function(e){return null==e&&(e={}),new t.CollectionContentDisplayController(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/take-module-item/student-list/student-list-views",["app"],function(t){return t.module("SingleQuestionStudentsListApp.Views",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="col-sm-3 m-b-20",e.prototype.template='<div class="row single tiles white no-margin" data-id="{{ID}}"> <div class="col-md-8 col-xs-8 no-padding"> <div class="text-center"> <h4 class="text-primary no-margin p-t-20 p-b-20 p-l-5 p-r-5"><span class="semi-bold">{{display_name}}</span> </h4> <div class="clearfix"></div> </div> </div> <div class="col-md-4 col-xs-4 no-padding"> <div class="tiles unselected active"> <div class="user-profile-pic text-left m-t-0 p-t-10"> <img data-src-retina="{{profile_pic}}" data-src="{{profile_pic}}" src="{{profile_pic}}" alt=""> </div> <div class="bold text-white text-center p-t-5 p-b-5"><i class="fa fa-minus-circle"></i></div> </div> </div> </div>',e}(Marionette.ItemView),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row no-margin"> <div class="col-md-12 no-padding"> <div class="text-center"> <h4 class="text-primary no-margin p-t-20 p-b-20 p-l-5 p-r-5"><span class="semi-bold">No Students in Class</h4> <div class="clearfix"></div> </div> </div> </div>',e}(Marionette.ItemView),t.StudentsList=function(t){function e(){return this.addToCorrectList=bind(this.addToCorrectList,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="studentList m-t-10",e.prototype.template='{{#showButtons}} <div id="select-an-item" class="studentActions p-t-10 p-b-10"> <h3 class="no-margin semi-bold muted">Select a student to grade</h3> </div> <div style="display:none" class="studentActions p-t-10 p-b-10"> <button type="button" class="btn btn-info btn-xs btn-sm m-r-10" id="right-answer"> <i class="fa fa-check-circle"></i> Right Answer </button> <button type="button" class="btn btn-white btn-xs btn-sm" id="wrong-answer"> <i class="fa fa-minus-circle"></i> Unselect Answer </button> </div> {{/showButtons}} <div class="clearfix"></div> <div class="row students m-l-0 m-r-0 m-t-20" id="students-list"> </div>',e.prototype.itemViewContainer="#students-list",e.prototype.itemView=n,e.prototype.emptyView=i,e.prototype.events={"click .tiles.single.selectable":"selectStudent","click #right-answer":"addToCorrectList","click #wrong-answer":"removeFromCorrectList"},e.prototype.serializeData=function(){var t;return t=e.__super__.serializeData.call(this),"readonly"!==Marionette.getOption(this,"display_mode")&&(t.showButtons=!0),t},e.prototype.onShow=function(){var t,e,i,n,o,s,r,a,l;if("readonly"!==Marionette.getOption(this,"display_mode"))for(r=this.$el.find(".tiles.single"),i=0,o=r.length;o>i;i++)t=r[i],$(t).addClass("selectable");else this.$el.find("#select-an-item").hide();for(Marionette.getOption(this,"nextItemID")||this.$el.find("#question-done").html('<i class="fa fa-forward"></i> Finish Module'),this.$el.find(".students").listnav({includeNums:!1}),this.$el.find(".listNav a").removeAttr("href").css("cursor","pointer"),this.correctAnswers=Marionette.getOption(this,"correctAnswers"),this.correctAnswers=_.compact(this.correctAnswers),a=this.$el.find(".tiles.single"),l=[],n=0,s=a.length;s>n;n++)t=a[n],e=parseInt($(t).attr("data-id")),_.contains(this.correctAnswers,e)?l.push(this.markAsCorrectAnswer(t)):l.push(void 0);return l},e.prototype.selectStudent=function(t){return this.$el.find("#select-an-item").remove(),this.$el.find(".studentActions").show(),$(t.target).closest(".tiles.single").toggleClass("selected")},e.prototype.addToCorrectList=function(){var t,e,i,n;for(i=this.$el.find(".tiles.single.selected"),t=0,e=i.length;e>t;t++)n=i[t],this.correctAnswers=_.union(this.correctAnswers,parseInt($(n).attr("data-id"))),this.markAsCorrectAnswer(n);return this.correctAnswers=_.uniq(this.correctAnswers),"class_mode"===Marionette.getOption(this,"display_mode")?this.trigger("save:question:response",this.correctAnswers):void 0},e.prototype.markAsCorrectAnswer=function(t){return $(t).removeClass("selected").find(".unselected").removeClass("unselected").addClass("blue").find("i").removeClass("fa-minus-circle").addClass("fa-check-circle")},e.prototype.removeFromCorrectList=function(){var t,e,i,n;for(i=this.$el.find(".tiles.single.selected"),t=0,e=i.length;e>t;t++)n=i[t],this.correctAnswers=_.without(this.correctAnswers,parseInt($(n).attr("data-id"))),$(n).removeClass("selected").find(".blue").removeClass("blue").addClass("unselected").find("i").removeClass("fa-check-circle").addClass("fa-minus-circle");return this.trigger("save:question:response",this.correctAnswers)},e}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/student-list/student-list-app",["app","controllers/region-controller","apps/take-module-item/student-list/student-list-views"],function(t,e){return t.module("SingleQuestionStudentsListApp",function(t,i){var n;return n=function(e){function i(){return this._saveQuestionResponse=bind(this._saveQuestionResponse,this),this._showStudentsListView=bind(this._showStudentsListView,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e,i,n;return this.questionResponseModel=t.questionResponseModel,i=t.studentCollection,this.display_mode=t.display_mode,this.timerObject=t.timerObject,e=this.questionResponseModel.get("division"),this.view=n=this._showStudentsListView(i),this.show(n,{loading:!0,entities:[i]}),this.listenTo(n,"save:question:response",this._saveQuestionResponse)},i.prototype._showStudentsListView=function(e){return new t.Views.StudentsList({collection:e,correctAnswers:this.questionResponseModel.get("question_response"),display_mode:this.display_mode,nextItemID:this.nextItemID})},i.prototype._saveQuestionResponse=function(t){var e;return e=this.timerObject.request("get:elapsed:time"),this.questionResponseModel.set({question_response:t,status:"paused",time_taken:e}),this.questionResponseModel.save()},i}(e),i.commands.setHandler("show:single:question:student:list:app",function(t){return null==t&&(t={}),new n(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/teacher-training-footer/training-footer-view",["app"],function(t){return t.module("TeacherTrainingFooter.Views",function(t,e){return t.TrainingFooterView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='{{#isChorus}} <h4 class="text-grey semi-bold text-center p-t-15 p-b-20 p-l-5 p-r-5 "> In a chorus question you will be marking a group of students in the class mode </h4> {{/isChorus}} {{#isIndividual}} <h4 class="text-grey semi-bold text-center p-t-15 p-b-20 p-l-5 p-r-5 "> Your individual class students will be displayed in the class mode for marking </h4> {{/isIndividual}}',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.isChorus=t.isIndividual=!1,"content_piece"!==this.model.get("content_type")&&("chorus"===this.model.get("question_type")&&(t.isChorus=!0),"individual"===this.model.get("question_type")&&(t.isIndividual=!0)),t},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,
t},hasProp={}.hasOwnProperty;define("apps/take-module-item/teacher-training-footer/training-footer-controller",["app","controllers/region-controller","apps/take-module-item/teacher-training-footer/training-footer-view"],function(t,e){return t.module("TeacherTrainingFooter",function(t,i){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){var e;return e=t.contentPiece,this.question_type=e.get("question_type"),this.contentPieceId=e.get("ID"),this.view=this._getFooterView(e),this.show(this.view)},i.prototype._getFooterView=function(e){return new t.Views.TrainingFooterView({question_type:this.question_type,model:e})},i}(e),i.commands.setHandler("show:teacher:training:footer:app",function(e){return null==e&&(e={}),new t.Controller(e)})})}),define("text!apps/take-module-item/module-description/templates/module-description-template.html",[],function(){return'<div id="collapseView" class="panel-collapse collapse hide">\n\n    <!--  -->\n    {{#isTraining}}\n        <div class="well text-center m-b-0 p-b-5 p-t-5">\n            <h4><span class="bold">This is practice mode.\n                    It is designed to help you train for the class</span></h4>\n        </div>\n    {{/isTraining}}\n    <div class="moduleInfo" style="border-bottom:none;">\n    	<div class="b-grey b-b no-margin p-l-15 p-r-15 p-b-5 p-t-10">\n                <div class="modTime pause">\n                    <a id="back-to-module" class="btn btn-small btn-block btn-white m-t-10"><h4 class="semi-bold text-info no-margin"><span class="fa fa-pause"></span> {{name}}</h4></a>\n                    \n                    <!-- {{&showPauseButton}} -->\n                </div>\n                <div class="modTime b-grey b-l text-center">\n                    <p class="bold small-text muted no-margin">Module Time</p>\n                    <h3 class="bold text-grey no-margin">\n                        <span class="animate-number" data-animation-duration="1200">{{total_minutes}} mins</span>\n                    </h3>\n                </div>\n                <div class="modTime b-grey b-l text-center">\n                    {{^isTraining}}\n                        <div class="modProgress h-center">\n                            <p class="bold small-text muted">Progress</p>\n                            <div class="progress progress-large w100 m-b-0">\n                                <div data-percentage="{{getProgressPercentage}}%" style="width: {{getProgressPercentage}}%;" class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="{{getProgressPercentage}}" aria-valuemin="0" aria-valuemax="100">{{getProgressData}}</div>\n                            </div>\n                        </div>\n                    {{/isTraining}}\n                </div>\n                <div class="modTime b-grey b-l b-r text-center">\n                    {{^isTraining}}\n                    <p class="bold small-text muted no-margin">Completed Time</p>\n                    <h3 class="bold text-grey no-margin">\n                        <span class="animate-number" data-animation-duration="1200">{{moduleTime}}</span>\n                    </h3>\n                    {{/isTraining}}\n                </div>\n                <!-- <div class="modTime next">\n                    <button type="button" id="question-done"  class="btn btn-block btn-success m-t-10">\n                        <i class="fa fa-forward"></i> Next\n                    </button>\n                </div> -->\n                <div class="clearfix"></div>\n    	</div>\n    </div>\n    <!--  -->\n\n</div>\n\n<div class="text-center m-b-5 hide" style="background-color: #f3f3f3; padding:2px 0;">\n    <a id="accordionToggle" data-toggle="collapse" href="#collapseView" aria-expanded="true" aria-controls="collapseView" style="display:block; color:#000" class="h6">\n        Expand        \n    </a>\n</div>\n\n\n<div class="video-details">\n   <h4>You\'re here to view <span>{{name}}</span> lecture</h4>\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/take-module/module-description/module-description-app",["app","controllers/region-controller","text!apps/take-module-item/module-description/templates/module-description-template.html","bootbox"],function(t,e,i,n){return t.module("StudentTrainingApp.ModuleDescription",function(t,o){var s,r;return s=function(t){function e(){return this._showModuleDescriptionView=bind(this._showModuleDescriptionView,this),this._getNextItemID=bind(this._getNextItemID,this),this._changeQuestion=bind(this._changeQuestion,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.model=t.model,this.questionResponseModel=t.questionResponseModel,this.questionResponseCollection=t.questionResponseCollection,this.timerObject=t.timerObject,this.display_mode=t.display_mode,this.currentItemID=this.questionResponseModel.get("content_piece_id"),this.nextItemID=this._getNextItemID(this.currentItemID),this.view=e=this._showModuleDescriptionView(this.model),this.show(e,{loading:!0,entities:[this.model,this.questionResponseModel]}),this.listenTo(this.view,"goto:previous:route",function(t){return function(){return t.region.trigger("goto:previous:route")}}(this)),this.listenTo(this.region,"top:panel:question:done",function(t){return function(){return t.view.triggerMethod("top:panel:question:done")}}(this)),this.listenTo(this.region,"top:panel:check:last:question",function(t){return function(){return t.view.triggerMethod("top:panel:check:last:question")}}(this)),this.listenTo(e,"question:completed",this._changeQuestion)},e.prototype._changeQuestion=function(){return this.region.trigger("goto:next:question"),this.nextItemID=this._getNextItemID(this.nextItemID),this.view.triggerMethod("question:changed",this.nextItemID)},e.prototype._getNextItemID=function(t){var e,i,n,o;return e=this.model.get("content_layout"),i=_.map(e,function(t){return parseInt(t.id)}),o=_.indexOf(i,t),n=parseInt(i[o+1]),n||(n=!1),n},e.prototype._showModuleDescriptionView=function(t){var e,i,n,o,s;return i=t.get("term_ids"),e=_.size(this.questionResponseCollection.where({status:"completed"})),o=_.size(t.get("content_pieces")),n=this.questionResponseCollection.pluck("time_taken"),s=0,_.size(n)>0&&(s=_.reduce(n,function(t,e){return parseInt(t+parseInt(e))})),new r({model:t,display_mode:this.display_mode,nextItemID:this.nextItemID,templateHelpers:{showPauseButton:function(t){return function(){var e;return e="","class_mode"===t.display_mode&&(e='<button type="button" id="pause-session" class="btn btn-white action h-center block m-t-5"><i class="fa fa-pause"></i> Pause</button>'),e}}(this),getProgressData:function(){return e+"/"+o},getProgressPercentage:function(){return parseInt(e/o*100)},moduleTime:function(){var t;return t=$.timeMinSecs(s)}}})},e}(e),r=function(t){function e(){return this.decidePageFlip=bind(this.decidePageFlip,this),this.questionCompleted=bind(this.questionCompleted,this),this.onTopPanelQuestionDone=bind(this.onTopPanelQuestionDone,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="pieceWrapper",e.prototype.template=i,e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.name=t.name.replace("Lecture -",""),t.isTraining="training"===this.display_mode?!0:!1,t},e.prototype.initialize=function(){return this.display_mode=Marionette.getOption(this,"display_mode"),this.isLastContentPiece=!1},e.prototype.events={"click #back-to-module, #pause-session":function(){return this.trigger("goto:previous:route")},"click #question-done":"questionCompleted"},e.prototype.onShow=function(){var t;return Marionette.getOption(this,"nextItemID")||(this.isLastContentPiece=!0,this.$el.find("#question-done").html('<i class="fa fa-forward"></i> Finish Module')),"archive"===this.model.get("post_status")&&this.$el.find("#question-done").remove(),t=this.$el.find("#module-details-region").height(),$(window).scroll(function(){$(window).scrollTop()>t?($("#module-details-region").addClass("condensed animated slideInDown"),$("#question-details-region").css("margin-top",t+15)):($("#module-details-region").removeClass("condensed slideInDown"),$("#question-details-region").css("margin-top",0))}),$("#collapseView").on("hidden.bs.collapse",function(){return $("#accordionToggle").text("Expand")}),$("#collapseView").on("shown.bs.collapse",function(){return $("#accordionToggle").text("Collapse")})},e.prototype.onTopPanelQuestionDone=function(){return this.questionCompleted()},e.prototype.questionCompleted=function(){return"class_mode"===Marionette.getOption(this,"display_mode")?n.confirm("This item will be marked as complete. Continue?",function(t){return function(e){return e?t.decidePageFlip():void 0}}(this)):this.decidePageFlip()},e.prototype.decidePageFlip=function(){return this.isLastContentPiece?this.trigger("question:completed"):this.trigger("question:completed")},e.prototype.onQuestionChanged=function(t){return t?void 0:(this.isLastContentPiece=!0,this.$el.find("#question-done").html('<i class="fa fa-forward"></i> Finish Module'))},e.prototype.onTopPanelCheckLastQuestion=function(){return this.isLastContentPiece?$("#top-panel-question-done").html("<img src='wp-content/themes/walnut/walnut_student_assets/dev/images/stop.png' class='img-reponsive center-block'/><h4>Finish Module</h4>"):void 0},e}(Marionette.ItemView),o.commands.setHandler("show:student:training:module:description",function(t){return null==t&&(t={}),new s(t)})})}),define("text!apps/take-module-item/chorus-options/templates/chorus-options-template.html",[],function(){return'<h3 id="select-an-item" class="no-margin semi-bold text-center muted">Select an option</h3>\n\n<div class="clearfix"></div>\n<div class="row students m-l-0 m-r-0 m-t-20">\n	<div class="col-sm-2 m-b-20">\n		<div id="few" class="row single tiles white no-margin">    \n            <div class="col-md-7 col-xs-7 no-padding">\n              <div class="text-center">\n                <h4 class="text-primary no-margin p-t-10 p-l-5 p-r-5 p-b-10 semi-bold">Very<br/>Few</h4>\n                <div class="clearfix"></div>\n              </div>\n            </div>\n			 <div class="col-md-5 col-xs-5 no-padding">\n              <div class="tiles unselected active"><h5 class="bold text-white text-center no-margin p-t-30 p-b-35"><5%</h5>\n              </div>\n            </div>\n        </div>\n	</div>\n	<div class="col-sm-2 m-b-20">\n		<div id="one-fourth" class="row single tiles white no-margin">    \n            <div class="col-md-7 col-xs-7 no-padding">\n              <div class="text-center">\n                <h4 class="text-primary no-margin p-t-10 p-b-10 p-l-5 p-r-5 semi-bold">1/4th of the Class</h4>\n                <div class="clearfix"></div>\n              </div>\n            </div>\n			 <div class="col-md-5 col-xs-5 no-padding">\n              <div class="tiles unselected active">\n                <h5 class="bold text-white text-center no-margin p-t-30 p-b-35">5-25%</h5>\n              </div>\n            </div>\n        </div>\n	</div>\n	<div class="col-sm-2 m-b-20">\n		<div id="half" class="row single tiles white no-margin">    \n            <div class="col-md-7 col-xs-7 no-padding">\n              <div class="text-center">\n                <h4 class="text-primary no-margin p-t-10 p-b-10 p-l-5 p-r-5 semi-bold">Half the Class</h4>\n                <div class="clearfix"></div>\n              </div>\n            </div>\n			 <div class="col-md-5 col-xs-5 no-padding">\n              <div class="tiles unselected active">\n                <h5 class="bold text-white text-center no-margin p-t-30 p-b-35">25-50%</h5>\n              </div>\n            </div>\n        </div>\n	</div>\n	<div class="col-sm-2 m-b-20">\n		<div id="three-fourth" class="row single tiles white no-margin">    \n            <div class="col-md-7 col-xs-7 no-padding">\n              <div class="text-center">\n                <h4 class="text-primary no-margin p-t-10 p-b-10 p-l-5 p-r-5 semi-bold">3/4 the Class </h4>\n                <div class="clearfix"></div>\n              </div>\n            </div>\n			 <div class="col-md-5 col-xs-5 no-padding">\n              <div class="tiles unselected active">\n                   <h5 class="bold text-white text-center no-margin p-t-30 p-b-35">50-75%</h5>\n              </div>\n            </div>\n        </div>\n	</div>\n	<div class="col-sm-2 m-b-20">\n		<div id="full" class="row single tiles white no-margin">    \n            <div class="col-md-7 col-xs-7 no-padding">\n              <div class="text-center">\n                <h4 class="text-primary no-margin p-t-10 p-b-10 p-l-5 p-r-5 semi-bold">Full<br/>Class</h4>\n                <div class="clearfix"></div>\n              </div>\n            </div>\n			 <div class="col-md-5 col-xs-5 no-padding">\n              <div class="tiles unselected active">\n                <h5 class="bold text-white text-center no-margin p-t-30 p-b-35">75-100%</h5>\n              </div>\n            </div>\n        </div>\n	</div>\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/chorus-options/chorus-options-app",["app","controllers/region-controller","text!apps/take-module-item/chorus-options/templates/chorus-options-template.html"],function(t,e,i){return t.module("SingleQuestionChorusOptionsApp",function(t,n){var o,s;return o=function(t){function e(){return this._saveQuestionResponse=bind(this._saveQuestionResponse,this),this._showChorusOptionsView=bind(this._showChorusOptionsView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.questionResponseModel=t.questionResponseModel,this.display_mode=t.display_mode,this.timerObject=t.timerObject,this.view=e=this._showChorusOptionsView(this.questionResponseModel),this.show(e,{loading:!0}),this.listenTo(e,"save:question:response",this._saveQuestionResponse)},e.prototype._showChorusOptionsView=function(t){return new s({model:t,responsePercentage:this.questionResponseModel.get("question_response"),display_mode:this.display_mode})},e.prototype._saveQuestionResponse=function(t){var e;return e=this.timerObject.request("get:elapsed:time"),this.questionResponseModel.set({question_response:t,status:"paused",time_taken:e}),this.questionResponseModel.save()},e}(e),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="studentList m-t-35",e.prototype.template=i,e.prototype.events={"click .tiles.single.selectable":"selectStudent"},e.prototype.onShow=function(){var t,e,i,n,o;if("readonly"!==Marionette.getOption(this,"display_mode"))for(n=this.$el.find(".tiles.single"),e=0,i=n.length;i>e;e++)t=n[e],$(t).addClass("selectable");return o=Marionette.getOption(this,"responsePercentage"),_.isString(o)&&o.length>0?this.$el.find("#"+o).find(".unselected").removeClass("unselected").addClass("blue"):void 0},e.prototype.selectStudent=function(t){var e;return this.$el.find("#select-an-item").remove(),this.$el.find(".blue").removeClass("blue").addClass("unselected"),e=$(t.currentTarget).closest(".tiles.single").attr("id"),$(t.target).closest(".tiles.single").find(".unselected").removeClass("unselected").addClass("blue").find("i").removeClass("fa-minus-circle").addClass("fa-check-circle"),"class_mode"===Marionette.getOption(this,"display_mode")?this.trigger("save:question:response",e):void 0},e}(Marionette.ItemView),n.commands.setHandler("show:single:question:chorus:options:app",function(t){return null==t&&(t={}),new o(t)})})}),define("text!apps/student-training-module/take-module/item-description/templates/top-panel.html",[],function(){return'<div class="video-sidebar grid-body no-border">\n    <div class="video-lecture-parts">\n        <div class="lecture-details">\n            <div class="text-books">\n                <h4>Text Book</h4>\n                <h4>{{getTextbookName}}</h4>\n            </div>\n            <div class="chapter">\n                <h4>Chapter</h4>\n                <h4> {{getChapterName}}</h4>\n            </div>\n        </div>\n    </div>\n    <div class="open-sidebar">\n        <i class="fa fa-info-circle"></i>\n    </div>    \n</div>\n\n<div class="contentTime">\n  <!--   <button type="button" id="top-panel-previous"  class="btn btn-block btn-success m-t-10">\n        <i class="fa fa-backward"></i> Previous\n    </button> -->\n\n    <div class="video-lecture-parts">\n                                   \n    <!-- Controls -->\n    <div class="controls">\n        \n        <a href="javascript:" id="top-panel-previous"  class="backward"><img src="wp-content/themes/walnut/walnut_student_assets/dev/images/previous.png" alt="" class="img-reponsive center-block">\n        <h4>Previous</h4>\n        </a>\n        \n        \n    </div>\n    </div>  \n\n</div>\n\n<div class="contentInfo">\n  \n     <div class="video-lecture-parts">\n                                   \n    <!-- Controls -->\n    <div class="controls">\n        \n\n        <a href="javascript:" class="next" id="top-panel-question-done" class="forward"><img src="wp-content/themes/walnut/walnut_student_assets/dev/images/forward.png" alt="" class="img-reponsive center-block">\n        <h4>Next</h4>\n        </a>\n        \n    </div>\n    </div> \n\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/take-module/item-description/view",["app","text!apps/student-training-module/take-module/item-description/templates/top-panel.html"],function(t,e){return t.module("StudentTrainingApp.TopPanel.Views",function(t,i,n,o,s,r){return t.TopPanelView=function(t){function i(){return this.countUp=bind(this.countUp,this),this.countDown=bind(this.countDown,this),i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.events=function(){return{"click #top-panel-question-done":function(t){return function(){return t.trigger("top:panel:question:done")}}(this),"click #top-panel-previous":function(t){return function(){return t.trigger("top:panel:previous")}}(this)}},i.prototype.mixinTemplateHelpers=function(t){return t=i.__super__.mixinTemplateHelpers.call(this,t),"multiple_eval"===t.question_type&&(t.question_type="multiple Evaluation"),t.isTraining="training"===this.mode?!0:!1,t},i.prototype.initialize=function(){return s("header").prepend('<div class="icon is-back go-back"><a onclick="location.reload();" href="javascript:" class="btn fab-content"><i class="fa fa-hand-o-left"></i>Back</a></div>'),s(".navbar .container-fluid").css("visibility","hidden"),this.mode=o.getOption(this,"display_mode")},i.prototype.onShow=function(){var t,e;return s(".open-sidebar").click(function(){s(".video-sidebar").toggleClass("video-is-open")}),"multiple_eval"===this.model.get("question_type")&&this.$el.find("#correct-answer-col").hide(),("content_piece"===(t=this.model.get("content_type"))||"student_question"===t)&&this.$el.find("#question-type-col, #correct-answer-col").hide(),"student_question"!==this.model.get("content_type")&&this.$el.find("#total-marks").hide(),e=o.getOption(this,"timeLeftOrElapsed"),"class_mode"===this.mode&&(0>e?this.countUp(e):this.countDown(e)),this.trigger("top:panel:check:last:question")},i.prototype.countDown=function(t){return this.$el.find("#downUpTimer").attr("timerdirection","countDown").countdown("destroy").countdown({until:t,format:"MS",onExpiry:this.countUp})},i.prototype.countUp=function(t){return null==t&&(t=0),this.$el.find("#downUpTimer").attr("timerdirection","countUp").addClass("negative").countdown("destroy").countdown({since:t,format:"MS"})},i.prototype.onShowTotalMarks=function(t){return console.log(t)},i}(o.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/take-module/item-description/controller",["app","controllers/region-controller","apps/student-training-module/take-module/item-description/view"],function(t,e){return t.module("StudentTrainingApp.TopPanel",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getCompletedSummary=bind(this._getCompletedSummary,this),this._timeLeftOrElapsed=bind(this._timeLeftOrElapsed,this),this.getResults=bind(this.getResults,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n,o;return this.model=t.model,this.questionResponseModel=t.questionResponseModel,this.timerObject=t.timerObject,this.display_mode=t.display_mode,this.classID=t.classID,this.students=t.students,e=t.is_student_training_module,o=r.flatten(this.model.get("term_ids")),this.textbookNames=i.request("get:textbook:names:by:ids",o),this.durationInSeconds=60*this.model.get("duration"),n=this.model.get("term_ids").textbook,this.textbookModel=i.request("get:textbook:by:id",n),this.view=this._showView({is_student_training_module:e}),this.listenTo(this.view,"show",function(){return this.view.triggerMethod("show:total:marks",this.marks)}),this.listenTo(this.view,"top:panel:question:done",function(){return this.region.trigger("top:panel:question:done")}),this.listenTo(this.view,"top:panel:previous",function(){return this.region.trigger("top:panel:previous")}),this.listenTo(this.view,"top:panel:check:last:question",function(){return this.region.trigger("top:panel:check:last:question")}),i.execute("when:fetched",[this.textbookNames,this.textbookModel],function(t){return function(){return t.show(t.view,{loading:!0})}}(this)),"class_mode"===this.display_mode?this.timerObject.setHandler("get:elapsed:time",function(t){return function(){var e,i,n,o;return o=s(t.view.el).find("#downUpTimer").countdown("getTimes"),n=s.countdown.periodsToSeconds(o),i=s(t.view.el).find("#downUpTimer").attr("timerdirection"),e="countDown"===i?t.durationInSeconds-n:t.durationInSeconds+n}}(this)):void 0},n.prototype.getResults=function(){var t,e,i,n,o,s,a,l,c,u,d,p;if(i="No One",c=[],u=this.questionResponseModel.get("question_response"),"chorus"===this.model.get("question_type"))u&&(i=CHORUS_OPTIONS[u]);else if("individual"===this.model.get("question_type")){for(n=0,s=u.length;s>n;n++){for(d=u[n],e=this.students.where({ID:d}),o=0,a=e.length;a>o;o++)t=e[o],l=t.get("display_name");c.push(l)}r.size(c)>0&&(p=c.join(", "),i=r.size(c)+" Students ("+p+")")}else i=!1;return i},n.prototype._showView=function(e){var i;return i=this.model.get("term_ids"),new t.Views.TopPanelView({model:this.model,display_mode:this.display_mode,timeLeftOrElapsed:this._timeLeftOrElapsed(),isStudentTrainingModule:e,templateHelpers:{getClass:function(t){return function(){return CLASS_LABEL[t.classID]}}(this),getTextbookName:function(t){return function(){return t.textbookNames.getTextbookName(i)}}(this),getChapterName:function(t){return function(){return t.textbookNames.getChapterName(i)}}(this),getSectionsNames:function(t){return function(){return t.textbookNames.getSectionsNames(i)}}(this),getSubSectionsNames:function(t){return function(){return t.textbookNames.getSubSectionsNames(i)}}(this),getCompletedSummary:this._getCompletedSummary}})},n.prototype._timeLeftOrElapsed=function(){var t,e,i;return e=0,this.questionResponseModel&&(t=this.questionResponseModel.get("time_taken")),t&&"NaN"!==t&&(e=t),i=this.durationInSeconds-e},n.prototype._getCompletedSummary=function(){var t,e,i,n;return this.questionResponseModel&&"completed"===this.questionResponseModel.get("status")?(e=parseInt(this.questionResponseModel.get("time_taken")/60),i=parseInt(this.questionResponseModel.get("time_taken")%60),n=e+"m "+i+"s",t=this.getResults(),'<div class="p-r-20 p-b-10 p-l-20"> <div class="b-grey b-b m-b-10 p-b-5"> <div class="qstnStatus"><i class="fa fa-check-circle"></i> Completed</div> </div> <div class="b-grey b-b m-b-10 p-b-5"> <label class="form-label bold small-text muted no-margin">Time Alloted:</label>'+this.model.get("duration")+' mins<br> </div> <div class="b-grey b-b m-b-10 p-b-5"> <label class="form-label bold small-text muted no-margin">Time Taken:</label>'+n+'</div> <div id="correct-answer-col"> <div class="b-grey b-b m-b-10 p-b-5"> <label class="form-label bold small-text muted no-margin">Correct Answer:</label>'+t+"</div> </div> </div>"):void 0},n}(e),i.commands.setHandler("show:student:top:panel",function(e){return new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/multiple-evaluation/student-list/student-list-views",["app"],function(t){return t.module("SingleQuestionMultipleEvaluationApp.StudentList.Views",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="col-sm-3 m-b-20",e.prototype.template='<div class="row single tiles white no-margin" data-id="{{ID}}"> <div class="col-md-8 col-xs-8 no-padding"> <div class="text-center"> <h4 class="text-primary no-margin p-t-20 p-b-20 p-l-5 p-r-5"><span class="semi-bold">{{display_name}}</span> </h4> <div class="clearfix"></div> </div> </div> <div class="col-md-4 col-xs-4 no-padding"> <div class="tiles unselected active"> <div class="user-profile-pic text-left m-t-0 p-t-10"> <img data-src-retina="{{profile_pic}}" data-src="{{profile_pic}}" src="{{profile_pic}}" alt=""> </div> <div class="bold text-white text-center p-t-5 p-b-5"><i class="fa fa-minus-circle"></i></div> </div> </div> </div>',e}(Marionette.ItemView),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row no-margin"> <div class="col-md-12 no-padding"> <div class="text-center"> <h4 class="text-primary no-margin p-t-20 p-b-20 p-l-5 p-r-5"><span class="semi-bold">No Students in Class</h4> <div class="clearfix"></div> </div> </div> </div>',e}(Marionette.ItemView),t.StudentsListView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="row students m-l-0 m-r-0 m-t-20",e.prototype.itemView=n,e.prototype.emptyView=i,e.prototype.events={"click .tiles.single.selectable":"selectStudent"},e.prototype.onShow=function(){var t,e,i,n,o,s,r,a,l;for(r=this.$el.find(".tiles.single"),i=0,o=r.length;o>i;i++)t=r[i],$(t).addClass("selectable");for($(".students").listnav({includeNums:!1}),this.correctAnswers=Marionette.getOption(this,"correctAnswers"),console.log(this.correctAnswers),this.correctAnswers=_.pluck(this.correctAnswers,"id"),console.log(this.correctAnswers),a=this.$el.find(".tiles.single"),l=[],n=0,s=a.length;s>n;n++)t=a[n],e=parseInt($(t).attr("data-id")),_.contains(this.correctAnswers,e)?l.push(this.markAsCorrectAnswer(t)):l.push(void 0);return l},e.prototype.markAsCorrectAnswer=function(t){return $(t).removeClass("selected").find(".unselected").removeClass("unselected").addClass("blue").find("i").removeClass("fa-minus-circle").addClass("fa-check-circle")},e.prototype.selectStudent=function(t){return this.$el.find(".tiles.single").removeClass("selected"),$(t.target).closest(".tiles.single").addClass("selected"),this.$el.find(".tiles.single").addClass("light"),this.trigger("student:selected",$(t.target).closest(".tiles.single").attr("data-id"))},e.prototype.onStudentAnswerSaved=function(t){return this.$el.find(".tiles.single[data-id='"+t+"']").find(".unselected").removeClass("unselected").addClass("blue").find("i").removeClass("fa-minus-circle").addClass("fa-check-circle")},e}(Marionette.CollectionView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/multiple-evaluation/student-list/student-list-controller",["app","controllers/region-controller","apps/take-module-item/multiple-evaluation/student-list/student-list-views"],function(t,e){return t.module("SingleQuestionMultipleEvaluationApp.StudentList",function(t,i){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.studentCollection=t.studentCollection,this.questionResponseModel=t.questionResponseModel,this.display_mode=t.display_mode,this.view=this._getStudentListView(),this.listenTo(this.view,"student:selected",this.studentSelected),this.listenTo(this.region,"student:answer:saved",function(t){return function(e){return t.view.triggerMethod("student:answer:saved",e)}}(this)),this.show(this.view,{loading:!0,entities:[this.studentCollection,this.questionResponseModel]})},i.prototype.studentSelected=function(t){return this.region.trigger("student:selected",t)},i.prototype._getStudentListView=function(){return new t.Views.StudentsListView({collection:this.studentCollection,correctAnswers:this.questionResponseModel.get("question_response"),display_mode:this.display_mode})},i}(e)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/multiple-evaluation/evaluation/evaluation-views",["app"],function(t){return t.module("SingleQuestionMultipleEvaluationApp.EvaluationApp.Views",function(t,e){var i;return i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="row m-l-0 m-r-0 m-t-10 b-grey b-b",e.prototype.template='<div class="col-sm-4"><h4 class="semi-bold m-t-5 p-b-5">{{parameter}}</h4></div> {{#attributesArray}} <div class="col-sm-2"><button id="{{index}}" type="button" class="btn btn-white btn-sm btn-small h-center block">{{attr}}</button></div> {{/attributesArray}}',e.prototype.mixinTemplateHelpers=function(t){var i;return t=e.__super__.mixinTemplateHelpers.call(this,t),i=new Array,_.each(t.attributes,function(t,e){return i.push({attr:t,index:e})}),t.attributesArray=i,t},e.prototype.events={"click button":"_buttonClicked"},e.prototype.initialize=function(t){return this.responseObj=t.responseObj,this.display_mode=t.display_mode},e.prototype.onShow=function(){return null!=this.responseObj[this.model.get("id")]?this.$el.find("button#"+this.responseObj[this.model.get("id")]).removeClass("btn-white").addClass("btn-primary"):void 0},e.prototype._buttonClicked=function(t){return"readonly"!==this.display_mode?$(t.target).closest("button").hasClass("btn-primary")?(this.$el.find("button.btn-primary").removeClass("btn-primary").addClass("btn-white"),delete this.responseObj[this.model.get("id")]):(this.$el.find("button.btn-primary").removeClass("btn-primary").addClass("btn-white"),$(t.target).closest("button").removeClass("btn-white").addClass("btn-primary"),this.responseObj[this.model.get("id")]=$(t.target).attr("id")):void 0},e}(Marionette.ItemView),t.EvaluationView=function(t){
function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="parameters animated fadeIn",e.prototype.template='<div class="tiles grey p-t-10 p-b-10 m-b-10"> <div class="row m-l-0 m-r-0"> <div class="pull-right"> <span id="close-parameters" class="fa fa-times text-grey p-r-15 p-l-15 p-t-15 p-b-15 closeEval"></span> </div> <h3 class="text-center text-grey semi-bold">Evaluation for {{studentName}}</h3> </div> <div id="evaluation-collection"> </div> {{#showButtons}} <div class="row m-r-0 m-l-0 p-t-10"> <button class="btn btn-info h-center block" id="saveEval">Save</button> </div> {{/showButtons}} </div>',e.prototype.itemView=i,e.prototype.itemViewContainer="#evaluation-collection",e.prototype.itemViewOptions=function(){return{responseObj:this.responseObj,display_mode:Marionette.getOption(this,"display_mode")}},e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),"readonly"!==Marionette.getOption(this,"display_mode")&&(t.showButtons=!0),t.studentName=this.studentModel.get("display_name"),t},e.prototype.events={"click #saveEval":"_saveEvalParameters","click #close-parameters":"_closeEvalParams"},e.prototype.initialize=function(t){return this.studentModel=Marionette.getOption(this,"studentModel"),this.responseObj=Marionette.getOption(this,"responseObj")},e.prototype.onShow=function(){return $("html, body").animate({scrollTop:this.$el.closest(".studentList").find("#eval-parameters").offset().top-stickyHeaderTop},1e3),this.$el.slideDown()},e.prototype._saveEvalParameters=function(){return _.size(this.responseObj)>1&&"class_mode"===Marionette.getOption(this,"display_mode")?this.trigger("save:eval:parameters"):void 0},e.prototype._closeEvalParams=function(){return this.$el.closest(".studentList").find(".tiles.single").removeClass("light").removeClass("selected"),this.$el.slideUp(700)},e}(Marionette.CompositeView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/multiple-evaluation/evaluation/evaluation-controller",["app","controllers/region-controller","apps/take-module-item/multiple-evaluation/evaluation/evaluation-views"],function(t,e){return t.module("SingleQuestionMultipleEvaluationApp.EvaluationApp",function(t,i){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.evaluationCollection=Marionette.getOption(this,"evaluationCollection"),this.studentModel=Marionette.getOption(this,"studentModel"),this.responseObj=Marionette.getOption(this,"responseObj"),this.display_mode=Marionette.getOption(this,"display_mode"),this.view=this._showEvaluationView(),this.listenTo(this.view,"save:eval:parameters",this._saveEvalParameters),this.show(this.view)},i.prototype._showEvaluationView=function(){return new t.Views.EvaluationView({collection:this.evaluationCollection,studentModel:this.studentModel,responseObj:this.responseObj,display_mode:this.display_mode})},i.prototype._saveEvalParameters=function(){return this.region.trigger("save:eval:parameters",this.responseObj)},i}(e)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/multiple-evaluation/multiple-evaluation-controller",["app","controllers/region-controller","apps/take-module-item/multiple-evaluation/student-list/student-list-controller","apps/take-module-item/multiple-evaluation/evaluation/evaluation-controller"],function(t,e){return t.module("SingleQuestionMultipleEvaluationApp",function(t,i){var n,o;return o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){return this.questionResponseModel=t.questionResponseModel,this.studentCollection=t.studentCollection,this.display_mode=t.display_mode,this.timerObject=t.timerObject,this.evaluationParams=t.evaluationParams,this.questionResponseArray=this.questionResponseModel.get("question_response"),this.layout=this._getMultipleEvaluationLayout(),this.listenTo(this.layout,"show",this._onShowOfLayout),this.listenTo(this.layout.studentListRegion,"student:selected",this.studentSelected),this.listenTo(this.layout.evalParametersRegion,"save:eval:parameters",this._saveEvalParameters),this.show(this.layout,{loading:!0})},o.prototype.studentSelected=function(e){var n,o;return e=parseInt(e),n=i.request("get:grading:parameter:collection",this.evaluationParams),o=_.findWhere(this.questionResponseArray,{id:e}),null==o&&(o={id:e}),new t.EvaluationApp.Controller({region:this.layout.evalParametersRegion,evaluationCollection:n,studentModel:this.studentCollection.findWhere({ID:e}),responseObj:o,display_mode:this.display_mode})},o.prototype._saveEvalParameters=function(t){var e,i;return i=_.findWhere(this.questionResponseArray,{id:t.id}),null!=i?(e=_.indexOf(this.questionResponseArray,i),this.questionResponseArray[e]=t):(""===this.questionResponseArray&&(this.questionResponseArray=new Array),this.questionResponseArray.push(t)),this.questionResponseModel.set("question_response",this.questionResponseArray),this.layout.studentListRegion.trigger("student:answer:saved",t.id)},o.prototype._onShowOfLayout=function(){return new t.StudentList.Controller({region:this.layout.studentListRegion,studentCollection:this.studentCollection,questionResponseModel:this.questionResponseModel,display_mode:this.display_mode})},o.prototype._getMultipleEvaluationLayout=function(){return new n({questionResponseArray:this.questionResponseArray})},o}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="studentList m-t-35",e.prototype.template='<div class="clearfix"></div> <div id="eval-parameters"></div> <div id="students-list"></div>',e.prototype.regions={studentListRegion:"#students-list",evalParametersRegion:"#eval-parameters"},e.prototype.initialize=function(t){return this.questionResponseArray=Marionette.getOption(this,"questionResponseArray")},e.prototype.onClose=function(){return delete this.questionResponseArray},e}(Marionette.Layout),i.commands.setHandler("show:single:question:multiple:evaluation:app",function(t){return null==t&&(t={}),new o(t)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/take-module/take-module-controller",["app","controllers/region-controller","bootbox","apps/take-module-item/student-list/student-list-app","apps/take-module-item/teacher-training-footer/training-footer-controller","apps/student-training-module/take-module/module-description/module-description-app","apps/take-module-item/chorus-options/chorus-options-app","apps/student-training-module/take-module/item-description/controller","apps/take-module-item/multiple-evaluation/multiple-evaluation-controller"],function(t,e,i){return t.module("StudentTrainingApp.TakeModule",function(t,n){var o,s,r,a,l,c;return c=null,l=null,r=null,s=null,a=null,t.Controller=function(t){function e(){return this._showQuiz=bind(this._showQuiz,this),this._showQuestionDisplayView=bind(this._showQuestionDisplayView,this),this._showModuleDescriptionView=bind(this._showModuleDescriptionView,this),this._getOrCreateModel=bind(this._getOrCreateModel,this),this._startViewModuleApp=bind(this._startViewModuleApp,this),this._saveQuestionResponse=bind(this._saveQuestionResponse,this),this._gotoViewModule=bind(this._gotoViewModule,this),this._changeQuestion=bind(this._changeQuestion,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.division=t.division,this.classID=t.classID,this.moduleID=t.moduleID,this.contentGroupModel=t.contentGroupModel,l=t.questionsCollection,s=t.currentItem,this.display_mode=t.display_mode,c=t.studentCollection,n.leftNavRegion.reset(),n.headerRegion.reset(),this.answerWreqrObject=new Backbone.Wreqr.RequestResponse,this.answerWreqrObject.displayAnswer=!0,this.answerWreqrObject.multiplicationFactor=1,this.answerModel=n.request("create:new:answer"),r=n.request("get:empty:question:response:collection"),n.execute("when:fetched",[s],function(t){return function(){return t._getOrCreateModel(s.get("ID"))}}(this)),this.layout=e=this._getTakeSingleQuestionLayout(),"quiz"===s.get("type")?void this._showQuiz():(this.show(this.layout,{loading:!0,entities:[this.contentGroupModel,c,l,r,a,s]}),this.timerObject=new Backbone.Wreqr.RequestResponse,this.listenTo(this.layout,"show",this._showModuleDescriptionView),this.listenTo(this.layout,"show",this._showQuestionDisplayView(s)),this.listenTo(this.layout.moduleDetailsRegion,"goto:previous:route",this._gotoViewModule),this.listenTo(this.layout.studentsListRegion,"goto:previous:route",this._gotoViewModule),this.listenTo(this.layout.moduleDetailsRegion,"goto:next:question",this._changeQuestion),this.listenTo(this.layout.studentsListRegion,"goto:next:question",this._changeQuestion),this.listenTo(this.layout.topPanelRegion,"top:panel:previous",function(t){return function(){return t._showPrevQuestion()}}(this)),this.listenTo(this.layout.topPanelRegion,"top:panel:question:done",function(t){return function(){return t.layout.moduleDetailsRegion.trigger("top:panel:question:done")}}(this)),this.listenTo(this.layout.topPanelRegion,"top:panel:check:last:question",function(t){return function(){return t.layout.moduleDetailsRegion.trigger("top:panel:check:last:question")}}(this)),this.listenTo(this.layout,"validate:answer",function(){return this.answerWreqrObject.request("get:question:answer"),this.answerWreqrObject.request("submit:answer")}))},e.prototype._changeQuestion=function(){var t;return t=this._getNextItem(),t?(this._showQuestionDisplayView(t),this.layout.triggerMethod("change:content:piece",s)):($(".is-back").remove(),this._gotoViewModule())},e.prototype._getNextItem=function(){var t,e,i,n;return t=this.contentGroupModel.get("content_layout"),e=_.filter(t,function(t){return t.type===s.get("post_type")&&parseInt(t.id)===s.id?t:void 0}),n=_.indexOf(t,e[0]),i=t[n+1],i||(i=!1),i},e.prototype._showPrevQuestion=function(){var t;return t=this._getPrevItem(),t?(this._showQuestionDisplayView(t,{direction:"rtl"}),this.layout.triggerMethod("change:content:piece",s)):($(".is-back").remove(),this._gotoViewModule())},e.prototype._getPrevItem=function(){var t,e,i,n;return t=this.contentGroupModel.get("content_layout"),e=_.filter(t,function(t){return t.type===s.get("post_type")&&parseInt(t.id)===s.id?t:void 0}),i=_.indexOf(t,e[0]),n=t[i-1],n||(n=!1),n},e.prototype._gotoViewModule=function(){return"class_mode"===this.display_mode&&"completed"!==a.get("status")?this._saveQuestionResponse("paused"):this._startViewModuleApp()},e.prototype._saveQuestionResponse=function(t){var e,i;return i=this.timerObject.request("get:elapsed:time"),e={time_taken:i,status:t,end_date:"completed"===t?moment().format("YYYY-MM-DD"):void 0,teacher_name:n.request("get:user:data","display_name")},a.set(e),r.add(a),moment(a.get("start_date")).isValid()||(e.start_date=moment().format("YYYY-MM-DD")),a.save(e,{wait:!0,success:function(t){return function(e){return"paused"===e.get("status")?t._startViewModuleApp():void 0}}(this)})},e.prototype._startViewModuleApp=function(){return $.showHeaderAndLeftNav(),n.execute("show:student:training:module",{region:n.mainContentRegion,model:this.contentGroupModel})},e.prototype._getOrCreateModel=function(t){var e;return a=r.findWhere({content_piece_id:t}),a||(e={collection_id:this.contentGroupModel.get("id"),content_piece_id:t,division:this.division},a=n.request("save:question:response",""),a.set("question_response",[]),a.set(e),"class_mode"===this.display_mode&&a.save()),a},e.prototype._showModuleDescriptionView=function(){return n.execute("when:fetched",this.contentGroupModel,function(t){return function(){return n.execute("show:student:training:module:description",{region:t.layout.moduleDetailsRegion,model:t.contentGroupModel,timerObject:t.timerObject,questionResponseModel:a,questionResponseCollection:r,display_mode:t.display_mode})}}(this))},e.prototype._showQuestionDisplayView=function(t,e){var i;return null==e&&(e="ltr"),s=t instanceof Backbone.Model?t:_.first(l.filter(function(e){var i;return i="quiz"===t.type?"type":"post_type",e.id===parseInt(t.id)&&e.get(i)===t.type?e:void 0})),i=s.get("type"),null!=i&&"quiz"===s.get("type")?void this._showQuiz():(a=this._getOrCreateModel(s.id),a||this._getOrCreateModel(s.ID),n.execute("show:student:top:panel",{region:this.layout.topPanelRegion,model:s,questionResponseModel:a,timerObject:this.timerObject,display_mode:this.display_mode,students:c,classID:this.classID}),n.execute("when:fetched",a,function(t){return function(){var i;return"student_question"===s.get("content_type")&&(i=n.request("create:dummy:quiz:module",s.id)),n.execute("show:content:board",{region:t.layout.contentBoardRegion,model:s,direction:e,answerWreqrObject:t.answerWreqrObject,quizModel:i?i:void 0})}}(this)))},e.prototype._showQuiz=function(){return n.execute("show:single:quiz:app",{region:n.mainContentRegion,quizModel:s,studentTrainingModule:this.contentGroupModel})},e.prototype._getTakeSingleQuestionLayout=function(){return new o({model:s})},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="lesson"> <div id="module-details-region"></div> <div class="" id="top-panel"></div> <div class="container-grey m-b-5  qstnInfo "> <label class="form-label bold small-text muted no-margin inline" id="instructions-label"> </label> <span class="small-text" id="instructions"></span> </div> <div id="content-board"> </div> <div class="container-grey m-b-10 p-l-10 p-r-10 p-t-10 p-b-10 h-center quizActions none"> <button type="button" id="submit-question" class="btn btn-success pull-right"> Submit <i class="fa fa-forward"></i> </button> <div class="text-center"> {{#show_hint}} <button type="button" id="show-hint" class="btn btn-default btn-sm btn-small m-r-10"> <i class="fa fa-lightbulb-o"></i> Hint </button> {{/show_hint}} </div> <div class="clearfix"></div> </div> </div>',e.prototype.regions={moduleDetailsRegion:"#module-details-region",contentBoardRegion:"#content-board",studentsListRegion:"#students-list-region",topPanelRegion:"#top-panel"},e.prototype.events=function(){return{"click #submit-question":function(t){return this.$el.find(".quizActions").addClass("none"),this.trigger("validate:answer")},"click #skip-question":function(){return this.trigger("skip:question")},"click #show-hint":function(){return i.alert(this.model.get("hint")),this.trigger("show:hint:dialog")}}},e.prototype.mixinTemplateHelpers=function(t){return _.trim(t.hint)&&(t.show_hint=!0),t},e.prototype.onShow=function(){return $(".page-content").addClass("condensed expand-page"),this.onChangeContentPiece(this.model)},e.prototype.onChangeContentPiece=function(t){var e;return e="content_piece"===t.get("content_type")?"Procedure Summary":"Instructions","student_question"===t.get("content_type")?this.$el.find(".quizActions").removeClass("none"):this.$el.find(".quizActions").addClass("none"),e&&this.$el.find("#instructions-label").html(e),this.$el.find("#instructions").html(t.get("instructions"))},e}(Marionette.Layout),n.commands.setHandler("start:student:training:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/view-module/single-module-controller",["app","controllers/region-controller","apps/student-training-module/view-module/module-description/description-app","apps/student-training-module/view-module/content-display/content-display-app","apps/student-training-module/take-module/take-module-controller"],function(t,e){return t.module("StudentTrainingApp.View",function(t,i){var n;return t.GroupController=function(t){function e(){return this._getContentGroupViewLayout=bind(this._getContentGroupViewLayout,this),this.showContentGroupViews=bind(this.showContentGroupViews,this),this.gotoTrainingModule=bind(this.gotoTrainingModule,this),this.startTrainingModule=bind(this.startTrainingModule,this),e.__super__.constructor.apply(this,arguments)}var o,s;return extend(e,t),s=null,o=null,e.prototype.initialize=function(t){return $(".navbar .container-fluid").css("visibility","visible"),$(".navbar .go-back").remove(),$.showHeaderAndLeftNav(),s=t.model,this.classID=t.classID,this.mode=t.mode,this.division=t.division,this.questionResponseCollection=t.questionResponseCollection,o=null,this.questionResponseCollection||(this.questionResponseCollection=i.request("get:empty:question:response:collection")),i.vent.unbind("next:item:student:training:module"),i.vent.bind("next:item:student:training:module",function(t){return function(e){var i;return i=t._getNextItem(e),i?t.gotoTrainingModule(i):t.showLayout()}}(this)),i.execute("when:fetched",s,function(t){return function(){var e;return"ERROR"===s.get("code")?(i.execute("show:no:permissions:app",{region:i.mainContentRegion,error_header:"Unauthorized Training Module",error_msg:s.get("error_msg")}),!1):(e=t._getContentItems(s),e.done(function(e){return o=e,t.showLayout()}))}}(this))},e.prototype.showLayout=function(){var t;return this.layout=t=this._getContentGroupViewLayout(),this.show(this.layout,{loading:!0,entities:[s,this.questionResponseCollection,o,this.textbookNames]}),this.listenTo(this.layout,"show",this.showContentGroupViews),this.listenTo(this.layout.collectionDetailsRegion,"start:training:module",this.startTrainingModule),this.listenTo(this.layout.contentDisplayRegion,"goto:item",function(t){return function(e){return t.gotoTrainingModule(e)}}(this))},e.prototype._getNextItem=function(t){var e,i,n,o;return e=s.get("content_layout"),i=_.filter(e,function(e){return e.type===t.type&&parseInt(e.id)===t.id?e:void 0}),o=_.indexOf(e,i[0]),n=e[o+1],n||(n=!1),n},e.prototype._getContentItems=function(t){var e;return this.contentLayoutItems=new Backbone.Collection,this.contentLayoutItems.comparator="order",this.deferContent=$.Deferred(),o?(this.deferContent.resolve(o),this.deferContent.promise()):(this.defer={},e=_.map(t.get("content_layout"),function(t){return function(e,n){var o;return t.defer[n]=$.Deferred(),o="content-piece"===e.type?i.request("get:content:piece:by:id",e.id):i.request("get:quiz:by:id",e.id),i.execute("when:fetched",o,function(){return o.set({order:n+1}),t.contentLayoutItems.add(o),t.defer[n].resolve(o)}),t.defer[n].promise()}}(this)),$.when.apply($,this.defer).done(function(t){return function(){return t.deferContent.resolve(t.contentLayoutItems)}}(this)),this.deferContent.promise())},e.prototype.startTrainingModule=function(){var t,e;return t=s.get("content_layout"),e=_.first(t),this.gotoTrainingModule(e,"class_mode")},e.prototype.gotoTrainingModule=function(t){var e;return e=_.first(o.filter(function(e){var i;return i="quiz"===t.type?"type":"post_type",e.id===parseInt(t.id)&&e.get(i)===t.type?e:void 0})),i.execute("start:student:training:app",{region:i.mainContentRegion,currentItem:e,contentGroupModel:s,questionsCollection:o})},e.prototype.showContentGroupViews=function(){var t;return t=_.flatten(s.get("term_ids")),this.textbookNames=i.request("get:textbook:names:by:ids",t),i.execute("when:fetched",this.textbookNames,function(t){return function(){return i.execute("show:student:training:content:group:detailsapp",{region:t.layout.collectionDetailsRegion,model:s,mode:t.mode,questionResponseCollection:t.questionResponseCollection,textbookNames:t.textbookNames}),_.size(s.get("content_layout"))>0?i.execute("show:student:training:content:displayapp",{region:t.layout.contentDisplayRegion,model:s,mode:t.mode,questionResponseCollection:t.questionResponseCollection,groupContentCollection:o,studentCollection:t.studentCollection}):void 0}}(this))},e.prototype._getContentGroupViewLayout=function(){return new n},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="teacher-app"> <div class="direction text-center"> <div class="icon goto-prev-page"><a href="javascript:" class="btn fab-content"><i class="fa fa-hand-o-left"></i></a></div> <p class="welcome-text">You\'re here to view <span id="lect_name"></span> Lecture</p> </div> <div id="collection-details-region" class="col-lg-10 col-lg-offset-1"></div> </div> <div id="content-display-region"></div>',e.prototype.className="",e.prototype.regions={collectionDetailsRegion:"#collection-details-region",contentDisplayRegion:"#content-display-region"},e}(Marionette.Layout),i.commands.setHandler("show:student:training:module",function(e){return null==e&&(e={}),new t.GroupController(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/student-training-module/app",["app","apps/student-training-module/edit-module/module-edit-controller","apps/student-training-module/view-module/single-module-controller","apps/content-modules/modules-listing/app"],function(t){return t.module("StudentTrainingApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"add-student-training-module":"addStudentModule","view-student-training-module/:id":"viewStudentModule","edit-student-training-module/:id":"editStudentModule","view-student-training-modules":"listStudentModules"},e}(Marionette.AppRouter),i={addStudentModule:function(){return $.allowRoute("add-module")?e.execute("show:student:training:edit:module:controller",{region:e.mainContentRegion}):void 0},editStudentModule:function(t){return $.allowRoute("edit-module")?e.execute("show:student:training:edit:module:controller",{region:e.mainContentRegion,id:t}):void 0},viewStudentModule:function(t){var i;return this.studentTrainingModel=e.request("get:student:training:by:id",t),i={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"View Student Training Module",link:"javascript:;",active:"active"}]},e.execute("update:breadcrumb:model",i),e.execute("show:student:training:module",{region:e.mainContentRegion,model:this.studentTrainingModel})},listStudentModules:function(){return $.allowRoute("module-list")?e.execute("show:module:listing:app",{region:e.mainContentRegion,groupType:"student-training"}):void 0}},t.on("start",function(){return new n({controller:i})})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,slice=[].slice;define("controllers/element-controller",["marionette","app"],function(t,e){var i;return i=function(t){function i(t){null==t&&(t={}),this._instance_id=_.uniqueId("elementcontroller"),e.commands.execute("register:instance",this,this._instance_id),i.__super__.constructor.call(this,t)}return extend(i,t),i.prototype.close=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],delete this.layout,delete this.options,e.commands.execute("unregister:instance",this,this._instance_id),i.__super__.close.call(this,t)},i.prototype.add=function(t,e){var i;return this.listenTo(t,"close",this.close),i=t.model.get("element"),1===e.find("li[data-element='"+i+"']").length?e.find("li[data-element='"+i+"']").replaceWith(t.$el):e.append(t.$el),e.removeClass("empty-column"),t.render(),t.triggerMethod("show"),"Row"===t.model.get("element")&&this.layout.addHiddenFields(),t.model.isNew()&&"Row"!==t.model.get("element")?void 0:(t.triggerMethod("before:render:element"),this.renderElement())},i}(t.Controller)});var Holder=Holder||{};!function(t,e){function i(t,e){var i="complete",n="readystatechange",o=!1,s=o,r=!0,a=t.document,l=a.documentElement,c=a.addEventListener?"addEventListener":"attachEvent",u=a.addEventListener?"removeEventListener":"detachEvent",d=a.addEventListener?"":"on",p=function(r){(r.type!=n||a.readyState==i)&&(("load"==r.type?t:a)[u](d+r.type,p,o),!s&&(s=!0)&&e.call(t,null))},h=function(){try{l.doScroll("left")}catch(t){return void setTimeout(h,50)}p("poll")};if(a.readyState==i)e.call(t,"lazy");else{if(a.createEventObject&&l.doScroll){try{r=!t.frameElement}catch(f){}r&&h()}a[c](d+"DOMContentLoaded",p,o),a[c](d+n,p,o),t[c](d+"load",p,o)}}function n(t){t=t.match(/^(\W)?(.*)/);var e=document["getElement"+(t[1]?"#"==t[1]?"ById":"sByClassName":"sByTagName")](t[2]),i=[];return null!==e&&(i=e.length?e:0===e.length?e:[e]),i}function o(t,e){var i={};for(var n in t)i[n]=t[n];for(var o in e)i[o]=e[o];return i}function s(t,e,i){e=parseInt(e,10),t=parseInt(t,10);var n=Math.max(e,t),o=Math.min(e,t),s=1/12,r=Math.min(.75*o,.75*n*s);return{height:Math.round(Math.max(i.size,r))}}function r(t,e,i,n,o){var r=s(e.width,e.height,i),a=r.height,l=e.width*n,c=e.height*n,u=i.font?i.font:"sans-serif";p.width=l,p.height=c,t.textAlign="center",t.textBaseline="middle",t.fillStyle=i.background,t.fillRect(0,0,l,c),t.fillStyle=i.foreground,t.font="bold "+a+"px "+u;var d=i.text?i.text:Math.floor(e.width)+"x"+Math.floor(e.height);o&&(d=i.literalText);var h=t.measureText(d).width;return h/l>=.75&&(a=Math.floor(.75*a*(l/h))),t.font="bold "+a*n+"px "+u,t.fillText(d,l/2,c/2,l),p.toDataURL("image/png")}function a(t,e,i,n){var s=i.dimensions,a=i.theme,c=i.text?decodeURIComponent(i.text):i.text,u=s.width+"x"+s.height;a=c?o(a,{text:c}):a,a=i.font?o(a,{font:i.font}):a,e.setAttribute("data-src",n),a.literalText=u,i.originalTheme=i.theme,i.theme=a,"image"==t?(e.setAttribute("alt",c?c:a.text?a.text+" ["+u+"]":u),(d||!i.auto)&&(e.style.width=s.width+"px",e.style.height=s.height+"px"),d?e.style.backgroundColor=a.background:e.setAttribute("src",r(h,s,a,g))):"background"==t?d||(e.style.backgroundImage="url("+r(h,s,a,g)+")",e.style.backgroundSize=s.width+"px "+s.height+"px"):"fluid"==t&&(e.setAttribute("alt",c?c:a.text?a.text+" ["+u+"]":u),"%"==s.height.slice(-1)?e.style.height=s.height:e.style.height=s.height+"px","%"==s.width.slice(-1)?e.style.width=s.width:e.style.width=s.width+"px",("inline"==e.style.display||""===e.style.display)&&(e.style.display="block"),d?e.style.backgroundColor=a.background:(e.holderData=i,v.push(e),l(e)))}function l(t){var e;e=null==t.nodeType?v:[t];for(var i in e){var n=e[i];if(n.holderData){var o=n.holderData;n.setAttribute("src",r(h,{height:n.clientHeight,width:n.clientWidth},o.theme,g,!!o.literal))}}}function c(e,i){var n={theme:y.themes.gray},o=!1;for(sl=e.length,j=0;j<sl;j++){var s=e[j];t.flags.dimensions.match(s)?(o=!0,n.dimensions=t.flags.dimensions.output(s)):t.flags.fluid.match(s)?(o=!0,n.dimensions=t.flags.fluid.output(s),n.fluid=!0):t.flags.literal.match(s)?n.literal=!0:t.flags.colors.match(s)?n.theme=t.flags.colors.output(s):i.themes[s]?n.theme=i.themes[s]:t.flags.font.match(s)?n.font=t.flags.font.output(s):t.flags.auto.match(s)?n.auto=!0:t.flags.text.match(s)&&(n.text=t.flags.text.output(s))}return o?n:!1}var u=!1,d=!1,p=document.createElement("canvas");if(p.getContext)if(p.toDataURL("image/png").indexOf("data:image/png")<0)d=!0;else var h=p.getContext("2d");else d=!0;var f=1,m=1;d||(f=window.devicePixelRatio||1,m=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1);var g=f/m;document.getElementsByClassName||(document.getElementsByClassName=function(t){var e,i,n,o=document,s=[];if(o.querySelectorAll)return o.querySelectorAll("."+t);if(o.evaluate)for(i=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]",e=o.evaluate(i,o,null,0,null);n=e.iterateNext();)s.push(n);else for(e=o.getElementsByTagName("*"),i=new RegExp("(^|\\s)"+t+"(\\s|$)"),n=0;n<e.length;n++)i.test(e[n].className)&&s.push(e[n]);return s}),window.getComputedStyle||(window.getComputedStyle=function(t){return this.el=t,this.getPropertyValue=function(e){var i=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),i.test(e)&&(e=e.replace(i,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(t){var e=this.__proto__||this.constructor.prototype;return t in this&&(!(t in e)||e[t]!==this[t])});var v=[],y={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12}},stylesheet:""};t.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(t){var e=this.regex.exec(t);return{width:+e[1],height:+e[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(t){var e=this.regex.exec(t);return{width:e[1],height:e[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(t){var e=this.regex.exec(t);return{size:y.themes.gray.size,foreground:"#"+e[2],background:"#"+e[1]}}},text:{regex:/text\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},font:{regex:/font\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},auto:{regex:/^auto$/},literal:{regex:/^literal$/}};for(var _ in t.flags)t.flags.hasOwnProperty(_)&&(t.flags[_].match=function(t){return t.match(this.regex)});t.add_theme=function(e,i){return null!=e&&null!=i&&(y.themes[e]=i),t},t.add_image=function(e,i){var o=n(i);if(o.length)for(var s=0,r=o.length;r>s;s++){var a=document.createElement("img");a.setAttribute("data-src",e),o[s].appendChild(a)}return t},t.run=function(e){var i=o(y,e),s=[],r=[],l=[];for("string"==typeof i.images?r=n(i.images):window.NodeList&&i.images instanceof window.NodeList?r=i.images:window.Node&&i.images instanceof window.Node&&(r=[i.images]),"string"==typeof i.bgnodes?l=n(i.bgnodes):window.NodeList&&i.elements instanceof window.NodeList?l=i.bgnodes:window.Node&&i.bgnodes instanceof window.Node&&(l=[i.bgnodes]),u=!0,f=0,h=r.length;h>f;f++)s.push(r[f]);var d=document.getElementById("holderjs-style");d||(d=document.createElement("style"),d.setAttribute("id","holderjs-style"),d.type="text/css",document.getElementsByTagName("head")[0].appendChild(d)),i.nocss||(d.styleSheet?d.styleSheet.cssText+=i.stylesheet:d.appendChild(document.createTextNode(i.stylesheet)));for(var p=new RegExp(i.domain+'/(.*?)"?\\)'),h=l.length,f=0;h>f;f++){var m=window.getComputedStyle(l[f],null).getPropertyValue("background-image"),g=m.match(p),v=l[f].getAttribute("data-background-src");if(g){var _=c(g[1].split("/"),i);_&&a("background",l[f],_,m)}else if(null!=v){var _=c(v.substr(v.lastIndexOf(i.domain)+i.domain.length+1).split("/"),i);_&&a("background",l[f],_,m)}}for(h=s.length,f=0;h>f;f++){var b,w;w=b=m=null;try{w=s[f].getAttribute("src"),attr_datasrc=s[f].getAttribute("data-src")}catch(x){}if(null==attr_datasrc&&w&&w.indexOf(i.domain)>=0?m=w:attr_datasrc&&attr_datasrc.indexOf(i.domain)>=0&&(m=attr_datasrc),m){var _=c(m.substr(m.lastIndexOf(i.domain)+i.domain.length+1).split("/"),i);_&&(_.fluid?a("fluid",s[f],_,m):a("image",s[f],_,m))}}return t},i(e,function(){window.addEventListener?(window.addEventListener("resize",l,!1),window.addEventListener("orientationchange",l,!1)):window.attachEvent("onresize",l),u||t.run()}),"function"==typeof define&&define.amd&&define("holder",[],function(){
return t})}(Holder,window),define("text!apps/content-board/element/templates/element.html",[],function(){return'\n<form>\n  <input type="hidden" name="meta_id"/>\n  <input type="hidden" name="element"/>\n</form>\n\n<div class="element-markup"><span></span></div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/element/views",["app","holder","text!apps/content-board/element/templates/element.html"],function(t,e,i){return t.module("ContentPreview.ContentBoard.Element.Views",function(t,e,n,o,s,r){return t.ElementView=function(t){function e(){return this.onShow=bind(this.onShow,this),this.initialize=bind(this.initialize,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.tagName="div",e.prototype.regions={elementRegion:"> .element-markup"},e.prototype.className="element-wrapper",e.prototype.initialize=function(){},e.prototype.onRender=function(){},e.prototype.onShow=function(){},e.prototype.onBeforeRenderElement=function(){var t,e,i,n,o;for(n=["meta_id","style","element"],o=[],e=0,i=n.length;i>e;e++)t=n[e],o.push(this.setHiddenField(t,this.model.get(t)));return o},e.prototype.setMargin=function(t,e){var i;return null==e&&(e=""),i=this.elementRegion.currentView,i.$el.removeClass(e),i.$el.addClass(t)},e.prototype.setStyle=function(t,e){var i;return null==e&&(e=""),i=this.elementRegion.currentView,i.$el.removeClass(e),i.$el.addClass(t)},e.prototype.setHiddenField=function(t,e){return 1===this.$el.children("form").find("input[name='"+t+"']").length?this.$el.children("form").find("input[name='"+t+"']").val(e):void 0},e.prototype.addHiddenFields=function(){var t,e,i,n,o;for(n=["draggable","style"],o=[],e=0,i=n.length;i>e;e++)t=n[e],o.push(this.$el.children("form").append("<input type='hidden' name='"+t+"' value=''/>"));return o},e.prototype.onElementModelCreated=function(){return this.$el.find(".element-markup > span").spin(!1)},e.prototype._getOptions=function(){return{lines:10,length:6,width:2.5,radius:7,corners:1,rotate:9,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"0px",left:"40px"}},e}(o.Layout)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/element/controller",["app","controllers/element-controller","apps/content-board/element/views"],function(t,e){return t.module("ContentPreview.ContentBoard.Element",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n,a,l;return e=t.container,a=t.modelData,l={bottom_margin:"",top_margin:"",left_margin:"",right_margin:""},r.defaults(a,l),n=i.request("create:new:element",a),this.layout=this._getView(n),this.layout.elementRegion.on("show",function(t){return function(e){var i,n,s,r,a,l;for(r=o.getOption(t.layout,"model"),a=["top_margin","left_margin","right_margin","bottom_margin"],l=[],i=0,n=a.length;n>i;i++)s=a[i],l.push(t.layout.setMargin(r.get(s)));return l}}(this)),this.add(this.layout,s(e))},n.prototype._getView=function(e){return new t.Views.ElementView({model:e})},n.prototype.deleteElement=function(t){return t.destroy({wait:!0})},n}(e)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Views",function(t,e,i,n,o,s){return t.ContentBoardView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.id="myCanvas",e.prototype.className="animated fadeIn",e.prototype.template='<h1 id="loading-content-board">Loading ... <span class="fa fa-spin fa-spinner"></span></h1> <div class="vHidden" id="question-area"></div> <div id="feedback-area"> <div id="correct" class="alert alert-success text-center answrMsg"> <h3 class="bold">{{correct_answer_msg}}</h3> <h4 class="semi-bold">You scored: <span class="bold"><span class="marks"></span>/<span class="total-marks"></span></span></h4> </div> <div id="wrong" class="alert alert-error text-center answrMsg"> <h3 class="bold">{{incorrect_answer_msg}}</h3> <h4 class="semi-bold">You scored: <span class="bold"><span class="marks"></span>/<span class="total-marks"></span></span></h4> </div> <div id="partially-correct" class="alert alert-info text-center answrMsg"> <h3 class="bold">{{partial_correct_answers_msg}}</h3> <h4 class="semi-bold">You scored: <span class="bold"><span class="marks"></span>/<span class="total-marks"></span></span></h4> </div> <div id="skipped" class="alert alert-error text-center answrMsg"> <h3 class="bold">{{skipped_msg}}</h3> <h4 class="semi-bold">You scored: <span class="bold">0/<span class="total-marks"></span></span></h4> </div> </div>',e.prototype.mixinTemplateHelpers=function(t){var e;return t.correct_answer_msg="You are correct!",t.incorrect_answer_msg="Sorry, you did not answer correctly",t.partial_correct_answers_msg="You are almost correct",e=n.getOption(this,"quizModel"),e&&(t.correct_answer_msg=e.getMessageContent("correct_answer"),t.incorrect_answer_msg=e.getMessageContent("incorrect_answer"),t.partial_correct_answers_msg=e.getMessageContent("partial_correct_answers"),t.skipped_msg="This question was skipped"),t},e.prototype.onRender=function(){return this.$el.find("#feedback-area div").hide()},e.prototype.onShowResponse=function(t,e){var i,o,r;return t=parseFloat(t),e=parseFloat(e),r=n.getOption(this,"quizModel"),o=0===t&&s.toBool(r.get("negMarksEnable"))?-e*r.get("negMarks")/100:t,this.$el.find(".total-marks").text(e),this.$el.find(".marks").text(o),this.$el.find("#feedback-area div").hide(),i=n.getOption(this,"answerModel"),i&&"skipped"===i.get("status")?this.$el.find("#skipped").show():(0===t&&this.$el.find("#wrong").show(),t===e&&this.$el.find("#correct").show(),t>0&&e>t?this.$el.find("#partially-correct").show():void 0)},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/hotspot/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Hotspot.Views",function(t,e,i,n,o,s){return t.HotspotView=function(t){function e(){return this._iterateThruOptions=bind(this._iterateThruOptions,this),this._onOutsideClick=bind(this._onOutsideClick,this),this._autoPopulateAnswers=bind(this._autoPopulateAnswers,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="stage",e.prototype.initialize=function(t){return null==t&&(t={}),this.answerModel=t.answerModel,this.textCollection=this.model.get("textCollection"),this.optionCollection=this.model.get("optionCollection"),this.imageCollection=this.model.get("imageCollection"),this.stageName=s.uniqueId("stage"),this.imageLayer=new Kinetic.Layer({name:"imageLayer"}),this.optionLayer=new Kinetic.Layer({name:"optionLayer"}),this.textLayer=new Kinetic.Layer({name:"textLayer"}),this.answerLayer=new Kinetic.Layer({name:"answerLayer"}),this.feedbackLayer=new Kinetic.Layer({name:"feedbackLayer"})},e.prototype.onRender=function(){return this.$el.attr("id",this.stageName)},e.prototype.onShow=function(){return this.stage=new Kinetic.Stage({container:this.stageName,width:this.$el.parent().width(),height:this.$el.parent().height()+80}),0!==this.model.get("height")&&this.stage.height(this.model.get("height")),this.stage.add(this.imageLayer),this.stage.add(this.textLayer),this.stage.add(this.optionLayer),this.stage.add(this.answerLayer),this.stage.add(this.feedbackLayer),this._addBorderBox(),this._drawExistingElements(),this._clickHandler(),this.$el.closest(".preview").find("#submit-answer-button").on("click",function(t){return function(){return t.trigger("submit:answer")}}(this)),this._autoPopulateAnswers()},e.prototype._autoPopulateAnswers=function(){var t,e;return e=n.getOption(this,"answerModel"),e&&"not_attempted"!==e.get("status")&&(t=e.get("answer"),s.each(t,function(t){return function(e,i){var n;return s.str.include(e.id,"option")?(n=s.find(t.optionLayer.getChildren(),function(t){return t.attrs.id===e.id?!0:!1}),t.model.get("transparent")?t._setBlinker(null,e):t._setBlinker(n)):t._setBlinker(null,e)}}(this)),n.getOption(this,"displayAnswer"))?this.trigger("submit:answer"):void 0},e.prototype._clickHandler=function(){return s.each(this.optionLayer.getChildren(),this._iterateThruOptions),this.model.get("transparent")?this.stage.on("click touchstart",this._onOutsideClick):void 0},e.prototype._onOutsideClick=function(){var t;return t=this.stage.getPointerPosition(),t.id=s.uniqueId("out"),this.answerModel.get("answer").push(t),this._setBlinker(null,t)},e.prototype._iterateThruOptions=function(t){return t.on("click touchstart",s.bind(this._onOptionClick,this,t))},e.prototype._onOptionClick=function(t,e){var i;return e.cancelBubble=!0,i=this.stage.getPointerPosition(),i.id=t.id(),s.contains(s.pluck(this.answerModel.get("answer"),"id"),t.id())?void 0:(this.answerModel.get("answer").push(i),this.model.get("transparent")?this._setBlinker(null,i):this._setBlinker(t))},e.prototype._setBlinker=function(t,e){var i,n,o;return n=null,t?"Circle"===t.className?n=new Kinetic.Circle({name:t.id(),x:t.x(),y:t.y(),opacity:.5,radius:t.radius(),fill:"blue"}):"Rect"===t.className&&(n=new Kinetic.Rect({name:t.id(),x:t.x()+t.width()/2,y:t.y()+t.height()/2,height:t.height(),width:t.width(),offset:{x:t.width()/2,y:t.height()/2},opacity:.5,fill:"blue",rotation:t.rotation()})):n=new Kinetic.Circle({name:e.id,x:e.x,y:e.y,radius:20,opacity:.5,fill:"blue"}),this.answerLayer.add(n),o=3e3,i=new Kinetic.Animation(function(t){var e;return e=Math.sin(2*t.time*Math.PI/o)+.001,n.scale({x:e/4-.75,y:e/4-.75})},this.answerLayer),i.start(),this.listenTo(this,"show:feedback",function(){return i.stop()}),n.on("click touchstart",function(t){return function(){return e=s.findWhere(t.answerModel.get("answer"),{id:n.name()}),t.answerModel.set("answer",s.without(t.answerModel.get("answer"),e)),n.off("click touchstart"),n.destroy()}}(this))},e.prototype.onShowFeedback=function(){var t,e,i,n,o;return this.answerLayer.remove(),n=this.optionCollection.where({correct:!0}),o=s.pluck(n,"id"),t=s.pluck(this.answerModel.get("answer"),"id"),i=s.difference(t,o),e=s.intersection(t,o),this._loadFeedbackImages({answers:o,correct:e,wrong:i})},e.prototype._loadFeedbackImages=function(t){var e,i;return this._showCorrectAnswers(t.answers),e=new Image,e.onload=function(i){return function(){return i._showMyAnswers(t.correct,e)}}(this),e.src=THEMEURL+"/images/right-ans.gif",i=new Image,i.onload=function(e){return function(){return e._showMyAnswers(t.wrong,i)}}(this),i.src=THEMEURL+"/images/wrong-ans.gif"},e.prototype._showMyAnswers=function(t,e){return s.each(t,function(t){return function(i){var n,o;return n=s.find(t.answerLayer.getChildren(),function(t){return t.name()===i}),console.log(n),o="Circle"===n.className?new Kinetic.Circle({x:n.x(),y:n.y(),radius:n.radius(),fillPatternImage:e,fillPatternRepeat:"no-repeat",fillPatternOffset:{x:20,y:20}}):new Kinetic.Rect({x:n.x()-n.width()/2,y:n.y()-n.height()/2,width:n.width(),height:n.height(),fillPatternImage:e,fillPatternX:n.width()/2-20,fillPatternY:n.height()/2-20,fillPatternRepeat:"no-repeat"}),t.feedbackLayer.add(o)}}(this)),this.feedbackLayer.draw()},e.prototype._showCorrectAnswers=function(t){return s.each(t,function(t){return function(e){var i,n;return i=s.find(t.optionLayer.getChildren(),function(t){return t.id()===e}),n="Circle"===i.className?new Kinetic.Circle({x:i.x(),y:i.y(),radius:i.radius(),stroke:"green",strokeWidth:6}):new Kinetic.Rect({x:i.x(),y:i.y(),width:i.width(),height:i.height(),stroke:"green",strokeWidth:6}),t.feedbackLayer.add(n)}}(this)),this.feedbackLayer.draw()},e.prototype._addBorderBox=function(){var t;return t=new Kinetic.Rect({name:"border",x:0,y:0,width:this.$el.parent().width(),height:this.model.get("height"),stroke:"black",strokeWidth:1}),this.imageLayer.add(t),this.imageLayer.draw()},e.prototype._drawExistingElements=function(){return console.log(this.textCollection),this.textCollection.each(function(t){return function(e,i){return t._addEachElements("Hotspot-Text",e)}}(this)),this.optionCollection.each(function(t){return function(e,i){return"Rect"===e.get("shape")&&t._addEachElements("Hotspot-Rectangle",e),"Circle"===e.get("shape")?t._addEachElements("Hotspot-Circle",e):void 0}}(this)),this.imageCollection.each(function(t){return function(e,i){return t._addEachElements("Hotspot-Image",e)}}(this))},e.prototype._addEachElements=function(t,e){return this.triggerMethod("add:hotspot:element",t,{left:e.get("x"),top:e.get("y")},e)},e.prototype.onAddHotspotElement=function(t,e,i){return"Hotspot-Circle"===t?this._addCircle(e,i):"Hotspot-Rectangle"===t?this._addRectangle(e,i):"Hotspot-Text"===t?this._addTextElement(e,i):"Hotspot-Image"===t?this._addImageElement(e,i.get("url"),i):void 0},e.prototype._addCircle=function(t,e){var i,n,o;return n=e,o=this,i=new Kinetic.Circle({id:n.get("id"),x:n.get("x"),y:n.get("y"),radius:n.get("radius"),strokeWidth:2}),console.log(i.getId()),this.model.get("transparent")||i.stroke(n.get("color")),this.optionLayer.add(i),this.optionLayer.draw()},e.prototype._addRectangle=function(t,e){var i,n;return n=e,i=new Kinetic.Rect({id:n.get("id"),x:n.get("x"),y:n.get("y"),width:n.get("width"),height:n.get("height"),strokeWidth:2,rotation:n.get("angle")}),this.model.get("transparent")||i.stroke(n.get("color")),this.optionLayer.add(i),this.optionLayer.draw()},e.prototype._addTextElement=function(t,e){var i,n;return n=e,i=new Kinetic.Text({x:n.get("x"),y:n.get("y"),text:n.get("text"),opacity:1,fontFamily:n.get("fontFamily"),fontSize:n.get("fontSize"),fill:n.get("fontColor"),fontStyle:n.get("fontBold")+" "+n.get("fontItalics"),padding:5,rotation:n.get("textAngle")}),this.textLayer.add(i),this.textLayer.draw()},e.prototype._addImageElement=function(t,e,i){var n,o;return n=i,o=new Image,o.src=n.get("url"),o.onload=function(t){return function(){var e;return e=new Kinetic.Image({image:o,x:n.get("x"),y:n.get("y"),width:n.get("width"),height:n.get("height"),rotation:n.get("angle")}),t.imageLayer.add(e),t.imageLayer.draw()}}(this)},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};define("apps/content-board/elements/hotspot/controller",["app","apps/content-board/element/controller","apps/content-board/elements/hotspot/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Hotspot",function(t,i,n,o,s,r){return t.Controller=function(e){function o(){return this._submitAnswer=bind(this._submitAnswer,this),this.renderElement=bind(this.renderElement,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){var e;return e=t.answerWreqrObject,this.answerModel=t.answerModel,this.multiplicationFactor=0,this.answerModel||(this.answerModel=i.request("create:new:answer")),e&&(this.displayAnswer=e.displayAnswer,this.multiplicationFactor=e.multiplicationFactor,e.setHandler("get:question:answer",function(t){return function(){var e,i,n;return e=r.compact(t.answerModel.get("answer")),n=r.isEmpty(e)?"empty":r.size(e)<r.size(t.layout.model.get("optionCollection").where({correct:"true"}))?"incomplete":"complete",t.layout.model.setMultiplicationFactor(t.multiplicationFactor),i={emptyOrIncomplete:n,answerModel:t.answerModel,totalMarks:t.layout.model.get("marks")}}}(this)),e.setHandler("submit:answer",function(t){return function(e){return t._submitAnswer(t.displayAnswer)}}(this))),o.__super__.initialize.call(this,t)},o.prototype._getHotspotView=function(){return new t.Views.HotspotView({model:this.layout.model,answerModel:this.answerModel,displayAnswer:this.displayAnswer})},o.prototype.renderElement=function(){var t,e,o;return e=this.layout.model.get("optionCollection"),e instanceof n.Collection&&(e=e.models),o=this.layout.model.get("textCollection"),o instanceof n.Collection&&(o=o.models),t=this.layout.model.get("imageCollection"),t instanceof n.Collection&&(t=t.models),this._parseArray(e,o,t),this.optionCollection=i.request("create:new:hotspot:element:collection",e),this.textCollection=i.request("create:new:hotspot:element:collection",o),this.imageCollection=i.request("create:new:hotspot:element:collection",t),this.layout.model.set("optionCollection",this.optionCollection),this.layout.model.set("textCollection",this.textCollection),this.layout.model.set("imageCollection",this.imageCollection),i.execute("show:total:marks",this.layout.model.get("marks")),this.view=this._getHotspotView(),this.listenTo(this.view,"submit:answer",this._submitAnswer),this.layout.elementRegion.show(this.view,{loading:!0})},o.prototype._parseArray=function(t,e,i){return r.each(t,function(t){return function(e){return t._parseObject(e)}}(this)),r.each(e,function(t){return function(e){return t._parseObject(e)}}(this)),r.each(i,function(t){return function(e){return t._parseObject(e)}}(this))},o.prototype._parseObject=function(t){var e,i,n;return n=["radius","marks","width","height","angle","textAngle","fontSize"],i=["x","y"],e=["toDelete","correct"],r.each(t,function(o,s){return indexOf.call(n,s)>=0&&(t[s]=parseInt(o)),indexOf.call(i,s)>=0&&(t[s]=parseFloat(o)),indexOf.call(e,s)>=0?t[s]=r.toBoolean(o):void 0})},o.prototype._submitAnswer=function(t){var e,n,o,s,a;return null==t&&(t=!0),this.layout.model.setMultiplicationFactor(this.multiplicationFactor),o=this.optionCollection.where({correct:!0}),s=r.pluck(o,"id"),e=r.pluck(this.answerModel.get("answer"),"id"),this.layout.model.get("enableIndividualMarks")?r.difference(e,s).length||(r.difference(s,e).length?(n=r.difference(s,e),a=this.layout.model.get("marks"),r.each(n,function(t){return function(e){return a-=t.optionCollection.findWhere({id:e}).get("marks")*t.layout.model.get("multiplicationFactor")}}(this)),this.answerModel.set("marks",a)):this.answerModel.set("marks",this.layout.model.get("marks"))):r.difference(e,s).length||r.difference(s,e).length||this.answerModel.set("marks",this.layout.model.get("marks")),t&&i.execute("show:response",this.answerModel.get("marks"),this.layout.model.get("marks")),t?this.view.triggerMethod("show:feedback"):void 0},o}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/row/views",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Row.Views",function(t,e,i,n,o,s){var r;return r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="column empty-column",e.prototype.tagName="div",e.prototype.template="",e.prototype.onShow=function(){return this.$el.attr("data-position",this.model.get("position")),this.$el.addClass("col-md-"+this.model.get("className")).attr("data-class",this.model.get("className"))},e.prototype.onClose=function(){return this.$el.hasClass("ui-sortable")?this.$el.sortable("destroy"):void 0},e}(n.ItemView),t.RowView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="row",e.prototype.template="&nbsp;",e.prototype.itemView=r,e.prototype.initialize=function(t){var e,n,o,r,a,l;for(null==t&&(t={}),this.collection=new i.Collection,a=t.model.get("elements"),l=[],o=0,r=a.length;r>o;o++)n=a[o],e=s.clone(n),delete e.elements,l.push(this.collection.add(e));return l},e.prototype.onShow=function(){return this.$el.attr("id",s.uniqueId("row-"))},e.prototype.columnCount=function(){return this.$el.children(".column").length},e.prototype.getColumns=function(){return this.$el.children(".column")},e.prototype.getColumnAt=function(t){var e;return e=this.$el.children(".column"),e[t]},e.prototype.destroySortableColumns=function(){return this.$el.children(".column").sortable("destroy")},e.prototype.onClose=function(){return this.destroySortableColumns()},e.prototype.addNewColumn=function(t,e){return this.collection.add({position:e,element:"Column",className:parseInt(t),elements:[]})},e}(n.CollectionView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/row/controller",["app","apps/content-board/element/controller","apps/content-board/elements/row/views"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Row",function(t,i,n,o,s,r){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t)},i.prototype._getRowView=function(){return new t.Views.RowView({model:this.layout.model})},i.prototype.renderElement=function(){var t;return t=this._getRowView(),this.layout.elementRegion.show(t)},i}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/text/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Text.Views",function(t,e,i,n,o,s){return t.TextView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="text",e.prototype.onShow=function(){return this.$el.append(s.stripslashes(this.model.get("content")))},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/text/controller",["app","apps/content-board/element/controller","apps/content-board/elements/text/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Text",function(t,i,n,o,s,r){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t)},i.prototype._getTextView=function(e){return new t.Views.TextView({model:e})},i.prototype.renderElement=function(){var t;return t=this._getTextView(this.layout.model),this.layout.elementRegion.show(t)},i}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/image/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Image.Views",function(t,e,i,n,o,s){return t.ImageView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="image",e.prototype.template='<img src="{{imageurl}}" alt="{{title}}" class="img-responsive" width="100%" style="position:relative;"/> <div class="clearfix"></div>',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),null!=t.sizes&&(t.imageurl=t.sizes[t.size].url),t},e.prototype.initialize=function(t){return this.imageHeightRatio=n.getOption(this,"imageHeightRatio"),this.positionTopRatio=n.getOption(this,"positionTopRatio")},e.prototype.onShow=function(){return this.$el.css("overflow","hidden"),"auto"!==this.imageHeightRatio&&this.$el.height(parseFloat(this.imageHeightRatio)*this.$el.width()),this.positionTopRatio?this.$el.find("img").css("top",this.positionTopRatio*this.$el.width()+"px"):void 0},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/image/controller",["app","apps/content-board/element/controller","apps/content-board/elements/image/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Image",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this.renderElement=bind(this.renderElement,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return r.defaults(t.modelData,{image_id:0,size:"thumbnail",align:"left",heightRatio:"auto",topRatio:0}),"auto"!==t.modelData.heightRatio&&(t.modelData.heightRatio=parseFloat(t.modelData.heightRatio)),r.isNaN(t.modelData.topRatio)&&(t.modelData.topRatio=0),n.__super__.initialize.call(this,t)},n.prototype._getTemplateHelpers=function(){return{size:this.layout.model.get("size"),alignment:this.layout.model.get("align")}},n.prototype._getImageView=function(e){return new t.Views.ImageView({model:e,imageHeightRatio:this.layout.model.get("heightRatio"),positionTopRatio:parseFloat(this.layout.model.get("topRatio")),templateHelpers:this._getTemplateHelpers()})},n.prototype.renderElement=function(){var t;return t=i.request("get:media:by:id",this.layout.model.get("image_id")),i.execute("when:fetched",t,function(e){return function(){var i;return i=e._getImageView(t),e.layout.elementRegion.show(i)}}(this))},n}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/imagewithtext/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.ImageWithText.Views",function(t,e,i,n,o,s){return t.ImageWithTextView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="imagewithtext",e.prototype.template='<img src="{{imageurl}}" alt="{{title}}" class="{{alignclass}} img-responsive"/> <p class="editor"></p> <div class="clearfix"></div>',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.holder="",t.imageurl=function(){return null!=this.sizes?this.sizes.thumbnail?this.sizes.thumbnail.url:this.sizes.full.url:void 0},t.alignclass=function(){switch(this.align){case"left":return"pull-left";case"right":return"pull-right"}},t},e.prototype.onShow=function(){var t;return t=n.getOption(this,"templateHelpers").content,this.$el.find("p").append(s.stripslashes(t))},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/imagewithtext/controller",["app","apps/content-board/element/controller","apps/content-board/elements/imagewithtext/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.ImageWithText",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this.renderElement=bind(this.renderElement,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return n.__super__.initialize.call(this,t)},n.prototype._getTemplateHelpers=function(){return{size:this.layout.model.get("size"),align:this.layout.model.get("align"),content:this.layout.model.get("content")}},n.prototype._getImageWithTextView=function(e){return new t.Views.ImageWithTextView({model:e,templateHelpers:this._getTemplateHelpers()})},n.prototype.renderElement=function(){var t;return t=i.request("get:media:by:id",this.layout.model.get("image_id")),i.execute("when:fetched",t,function(e){return function(){var i;return i=e._getImageWithTextView(t),e.layout.elementRegion.show(i)}}(this))},n}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/mcq/views",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Mcq.Views",function(t,e,i,n,o,s){return t.McqView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="mcq",e.prototype.onShow=function(){return this.$el.attr("id","mcq-container"),this.trigger("create:row:structure",{container:this.$el}),this.$el.closest(".preview").find("#submit-answer-button").on("click",function(t){return function(){return t.trigger("submit:answer")}}(this)),this._autoPopulateAnswers()},e.prototype._autoPopulateAnswers=function(){var t,e;return e=n.getOption(this,"answerModel"),e&&"not_attempted"!==e.get("status")&&(t=e.get("answer"),s.each(t,function(t){return function(e){return t.$el.find("#option-"+e).screwDefaultButtons("check")}}(this)),n.getOption(this,"displayAnswer"))?this.trigger("submit:answer"):void 0},e.prototype.onAddOptionClasses=function(t){var e,i,n,o;return n=this.model.get("optioncount"),e=this.model.get("correct_answer"),o=s.difference(t,e),i=s.difference(s.range(1,n+1),e,o),s.each(e,function(t){return function(e){return t._addClass(e,"ansRight")}}(this)),s.each(o,function(t){return function(e){return t._addClass(e,"ansWrong")}}(this)),s.each(i,function(t){return function(e){return t._addClass(e,"ansFalse")}}(this))},e.prototype._addClass=function(t,e){return this.$el.find("#mcq-option-"+t).parent().addClass(e)},e}(n.ItemView),t.McqOptionView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="mcq-option",e.prototype.tagName="div",e.prototype.template='<input class="mcq-option-select" id="option-{{optionNo}}" type="checkbox"  value="no">',e.prototype.events={"change input:checkbox":"_onClickOfCheckbox"},e.prototype.onShow=function(){return this.$el.attr("id","mcq-option-"+this.model.get("optionNo")),this.$el.find("input:checkbox").screwDefaultButtons({image:'url("'+SITEURL+'/wp-content/themes/walnut/images/csscheckbox-correct.png")',width:32,height:26})},e.prototype._onClickOfCheckbox=function(t){return o(t.target).prop("checked")?(console.log("checked"),this.trigger("option:checked",this.model)):(console.log("unchecked"),this.trigger("option:unchecked",this.model))},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;
return-1};define("apps/content-board/elements/mcq/controller",["app","apps/content-board/element/controller","apps/content-board/elements/mcq/views"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Mcq",function(t,i,n,o,s,r){return t.Controller=function(e){function o(){return this._optionUnchecked=bind(this._optionUnchecked,this),this._optionChecked=bind(this._optionChecked,this),this.createRowStructure=bind(this.createRowStructure,this),this._submitAnswer=bind(this._submitAnswer,this),this.renderElement=bind(this.renderElement,this),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){var e,n;return n=t.answerWreqrObject,this.answerModel=t.answerModel,this.multiplicationFactor=0,this.answerModel||(this.answerModel=i.request("create:new:answer")),n&&(this.answerModel.get("answer")&&(e=this.answerModel.get("answer"),e=r.map(e,function(t){return parseInt(t)}),this.answerModel.set({answer:e})),this.displayAnswer=n.displayAnswer,this.multiplicationFactor=n.multiplicationFactor,n.setHandler("get:question:answer",function(t){return function(){var i,o;return t.layout.model.set({multiplicationFactor:n.multiplicationFactor}),e=r.compact(t.answerModel.get("answer")),o=r.isEmpty(e)?"empty":r.size(e)<r.size(t.layout.model.get("correct_answer"))?"incomplete":"complete",t.layout.model.setMultiplicationFactor(t.multiplicationFactor),i={emptyOrIncomplete:o,answerModel:t.answerModel,totalMarks:t.layout.model.get("marks")}}}(this)),n.setHandler("submit:answer",function(t){return function(){return t._submitAnswer(t.displayAnswer)}}(this))),o.__super__.initialize.call(this,t),this.layout.model.get("marks_set")?void 0:this.layout.model.set({multiplicationFactor:1})},o.prototype.renderElement=function(){var t,e,o;return e=this.layout.model.get("options"),e instanceof n.Collection&&(e=e.models),this._parseOptions(e),o=!0,r.each(e,function(t){return function(e){return parseInt(e["class"])!==12/t.layout.model.get("columncount")?o=!1:void 0}}(this)),o&&(e=r.shuffle(e)),t=i.request("create:new:option:collection",e),this.layout.model.set("options",t),this.view=this._getMcqView(),this.listenTo(this.view,"create:row:structure",this.createRowStructure),this.listenTo(this.view,"submit:answer",this._submitAnswer),this.layout.elementRegion.show(this.view)},o.prototype._getMcqView=function(){return new t.Views.McqView({model:this.layout.model,answerModel:this.answerModel,displayAnswer:this.displayAnswer})},o.prototype._parseOptions=function(t){return r.each(t,function(t){return null!=t.marks&&(t.marks=parseInt(t.marks)),null!=t.optionNo&&(t.optionNo=parseInt(t.optionNo)),null!=t["class"]?t["class"]=parseInt(t["class"]):void 0}),this.layout.model.set("correct_answer",r.map(this.layout.model.get("correct_answer"),function(t){return parseInt(t)}))},o.prototype._submitAnswer=function(t){var e,n;return null==t&&(t=!0),this.layout.model.setMultiplicationFactor(this.multiplicationFactor),this.answerModel.set("marks",0),this.answerModel.get("answer").length?this.layout.model.get("multiple")?r.difference(this.answerModel.get("answer"),this.layout.model.get("correct_answer")).length||(r.difference(this.layout.model.get("correct_answer"),this.answerModel.get("answer")).length?(e=r.difference(this.layout.model.get("correct_answer"),this.answerModel.get("answer")),n=this.layout.model.get("marks"),r.each(e,function(t){return function(e){return n-=t.layout.model.get("options").get(e).get("marks")*t.layout.model.get("multiplicationFactor")}}(this)),this.answerModel.set("marks",n)):this.answerModel.set("marks",this.layout.model.get("marks"))):(console.log(r.difference(this.answerModel.get("answer"),this.layout.model.get("correct_answer"))),r.difference(this.answerModel.get("answer"),this.layout.model.get("correct_answer")).length||this.answerModel.set("marks",this.layout.model.get("marks"))):console.log("you havent selected any thing"),t&&i.execute("show:response",this.answerModel.get("marks"),this.layout.model.get("marks")),t?this.view.triggerMethod("add:option:classes",this.answerModel.get("answer")):void 0},o.prototype.createRowStructure=function(t){var e,n,o,s,r,a,l,c,u,d,p,h;for(e=parseInt(this.layout.model.get("columncount"))+1,o=function(){var t;for(t=[];e-=1;)n={position:this.layout.model.get("columncount")-e+1,element:"Column",className:12/this.layout.model.get("columncount"),elements:[]},t.push(n);return t}.call(this),d={element:"Row",columncount:this.layout.model.get("columncount"),elements:o},h=this.layout.model.get("optioncount"),p=1,u=[];h>0;){for(l=h>this.layout.model.get("columncount")?this.layout.model.get("columncount"):h,this._setColumnClassForRow(d,p,l),s=i.request("add:new:element",t.container,"Row",d),a=r=1,c=l;c>=1?c>=r:r>=c;a=c>=1?++r:--r)this._iterateThruOptions(s,p,a);h-=this.layout.model.get("columncount"),u.push(p+=1)}return u},o.prototype._setColumnClassForRow=function(t,e,i){var n,o,s;return s=function(){var t,i,n;for(n=[],o=t=1,i=this.layout.model.get("columncount");i>=1?i>=t:t>=i;o=i>=1?++t:--t)n.push((e-1)*this.layout.model.get("columncount")+o);return n}.call(this),n=12,r.each(s,function(e){return function(o,s){return e.layout.model.get("options").at(o-1)?(n-=e.layout.model.get("options").at(o-1).get("class"),t.elements[s].className=e.layout.model.get("options").at(o-1).get("class")):(t.elements[s].className=Math.floor(n/(e.layout.model.get("columncount")-i)),n-=Math.floor(n/(e.layout.model.get("columncount")-i)),i++)}}(this))},o.prototype._iterateThruOptions=function(t,e,n){var o,r,a,l,c,u,d;return o=this.layout.model.get("columncount"),c=(e-1)*this.layout.model.get("columncount")+n,a=n-1,r=t.layout.elementRegion.currentView.$el.children().eq(a),s(r).attr("data-option",c),l={element:"Row",columncount:1,elements:[{position:1,element:"Column",className:12,elements:[]}]},d=i.request("add:new:element",r,"Row",l),u=d.layout.elementRegion.currentView.$el.children().eq(0),this._fillOptionRowWithElements(u,c)},o.prototype._fillOptionRowWithElements=function(t,e){var n;return this._addMcqOption(t,this.layout.model.get("options").at(e-1)),e=this.layout.model.get("options").at(e-1).get("optionNo"),n=this.layout.model.get("elements")[e-1],r.each(n,function(e){return i.request("add:new:element",t,e.element,e)})},o.prototype._addMcqOption=function(t,e){var i;return i=this._getMcqOptionView(e),i.render(),s(t).removeClass("empty-column"),s(t).append(i.$el),this.listenTo(i,"option:checked",this._optionChecked),this.listenTo(i,"option:unchecked",this._optionUnchecked),i.triggerMethod("show"),s(t).on("remove",function(){return i.triggerMethod("close")})},o.prototype._optionChecked=function(t){var e,i;return e=this.answerModel.get("answer"),i=t.get("optionNo"),indexOf.call(e,i)<0&&e.push(t.get("optionNo")),this.view.$el.find("input#option-"+t.get("optionNo")).prop("checked",!0),this.view.$el.find("input#option-"+t.get("optionNo")).parent().css("background-position","0px -26px"),e.sort(),console.log(this.answerModel.get("answer"))},o.prototype._optionUnchecked=function(t){var e,i;return e=this.answerModel.get("answer"),i=s.inArray(t.get("optionNo"),e),e.splice(i,1),console.log(this.answerModel.get("answer"))},o.prototype._getMcqOptionView=function(e){return new t.Views.McqOptionView({model:e})},o}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/fib/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Fib.Views",function(t,e,i,n,o,s){return t.FibView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="div",e.prototype.template='<p class="fib-text"></p> </br> <div class="alert alert-success text-center fibRightAns" style="display: none;"> <h5>The correct answer is:</h5> <h4 class="semi-bold"> </h4> <div class="semi-bold" id="allAnswers"> </div> </div>',e.prototype.className="fib",e.prototype.initialize=function(t){return this.blanksCollection=this.model.get("blanksArray")},e.prototype.onShow=function(){return this.$el.find("p").append(s.stripslashes(this.model.get("text"))),this.$el.closest(".preview").find("#submit-answer-button").on("click",function(t){return function(){return t.trigger("submit:answer")}}(this)),this._autoPopulateAnswers()},e.prototype._autoPopulateAnswers=function(){var t,e,i;return e=n.getOption(this,"answerModel"),e&&"not_attempted"!==e.get("status")&&(t=e.get("answer"),i=this.$el.find(".fib-text input"),s.each(t,function(t){return function(t,e){return o(i[e]).val(t)}}(this)),n.getOption(this,"displayAnswer"))?this.trigger("submit:answer"):void 0},e.prototype.onShowFeedback=function(){var t,e,i;return this.$el.find(".fibRightAns").show(),e=s.stripslashes(this.model.get("text")),t=o.parseHTML(e),this.$el.find("h4").html(t),i=this,this.$el.find("h4").find("input").each(function(t){return function(e,i){var n,r;return n=t.blanksCollection.get(o(i).attr("data-id")),r=n.get("correct_answers"),""===r[0]?o(i).replaceWith("<span class='fibAns'>(no correct)</span>"):(o(i).replaceWith("<span class='fibAns'>"+r[0]+"</span>"),r.length>1?t.$el.find("#allAnswers").append("<span>All correct options for "+s.getOrdinal(n.get("blank_index"))+" blank is : "+s.toSentence(r)+"</span></br>"):void 0)}}(this))},e}(n.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/fib/controller",["app","apps/content-board/element/controller","apps/content-board/elements/fib/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Fib",function(t,i,n,o,s,r){return t.Controller=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.initialize=function(t){var e;return e=t.answerWreqrObject,this.answerModel=t.answerModel,this.answerModel||(this.answerModel=i.request("create:new:answer")),this.multiplicationFactor=0,e&&(this.displayAnswer=e.displayAnswer,this.multiplicationFactor=e.multiplicationFactor,e.setHandler("get:question:answer",function(t){return function(){var i,n,o,a;return n=t.view.$el.find("input"),t.answerModel.set({answer:[]}),r.each(n,function(e,i){return t.answerModel.get("answer").push(s(e).val())}),i=r.compact(t.answerModel.get("answer")),t.layout.model.set({multiplicationFactor:e.multiplicationFactor}),t.layout.model.get("marks_set")||t.layout.model.set({marks:t.layout.model.get("marks")*e.multiplicationFactor}),t.layout.model.set({marks_set:!0}),a=r.isEmpty(i)?"empty":r.size(i)<r.size(n)?"incomplete":"complete",t.layout.model.setMultiplicationFactor(t.multiplicationFactor),o={emptyOrIncomplete:a,answerModel:t.answerModel,totalMarks:t.layout.model.get("marks")}}}(this)),e.setHandler("submit:answer",function(t){return function(e){return t._submitAnswer(t.displayAnswer)}}(this))),o.__super__.initialize.call(this,t),this.layout.model.get("marks_set")?void 0:this.layout.model.set({multiplicationFactor:1})},o.prototype.renderElement=function(){var t;return t=this.layout.model.get("blanksArray"),t instanceof n.Collection&&(t=t.models),this._parseOptions(t),this.blanksCollection=i.request("create:new:question:element:collection",t),i.execute("show:total:marks",this.layout.model.get("marks")),this.layout.model.set("blanksArray",this.blanksCollection),this.view=this._getFibView(this.layout.model),this.listenTo(this.view,"submit:answer",this._submitAnswer),this.layout.elementRegion.show(this.view)},o.prototype._getFibView=function(e){return new t.Views.FibView({model:e,answerModel:this.answerModel,displayAnswer:this.displayAnswer})},o.prototype._parseOptions=function(t){return r.each(t,function(t){return null!=t.blank_index&&(t.blank_index=parseInt(t.blank_index)),null!=t.blank_size&&(t.blank_size=parseInt(t.blank_size)),null!=t.marks?t.marks=parseFloat(t.marks):void 0})},o.prototype._submitAnswer=function(t){var e,n;return null==t&&(t=!0),this.layout.model.setMultiplicationFactor(this.multiplicationFactor),n=this.layout.model.get("enableIndividualMarks"),this.caseSensitive=this.layout.model.get("case_sensitive"),e=this.answerModel.get("answer"),n?(this.answerModel.set("marks",0),r.each(this.view.$el.find("input"),function(t){return function(e,i){var n,o;return t.answerModel.get("answer").push(s(e).val()),n=t.blanksCollection.get(s(e).attr("data-id")),o=n.get("correct_answers"),t._checkAnswer(s(e).val(),o)?(t.answerModel.set("marks",t.answerModel.get("marks")+parseInt(n.get("marks"))*t.layout.model.get("multiplicationFactor")),s(e).addClass("ansRight")):s(e).addClass("ansWrong")}}(this))):(this.answerModel.set("marks",this.layout.model.get("marks")),r.each(this.view.$el.find("input"),function(e){return function(i,n){var o;if(e.answerModel.get("answer").push(s(i).val()),o=e.blanksCollection.get(s(i).attr("data-id")).get("correct_answers"),e._checkAnswer(s(i).val(),o)){if(t)return s(i).addClass("ansRight")}else if(e.answerModel.set("marks",0),t)return s(i).addClass("ansWrong")}}(this))),t&&i.execute("show:response",this.answerModel.get("marks"),this.layout.model.get("marks")),this.answerModel.get("marks")<this.layout.model.get("marks")&&t?this.view.triggerMethod("show:feedback"):void 0},o.prototype._checkAnswer=function(t,e){return this.caseSensitive?r.contains(e,t):r.contains(r.map(e,function(t){return r.slugify(t)}),r.slugify(t))},o}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/biganswer/views",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.BigAnswer.Views",function(t,e,i,n,o,s){return t.BigAnswerView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<textarea class="autogrow" type="text" maxlength="{{maxlength}}" contenteditable="false" style=" font-family: {{font}}; font-size: {{font_size}}px; color: {{color}}; max-width:100%; width :100%; height: 100%; line-height : inherit;" ></textarea>',e.prototype.onShow=function(){return this._setBGColor(),this._autoPopulateAnswers(),this._setBigAnswerStyle(this.model.get("style"))},e.prototype._autoPopulateAnswers=function(){var t;return t=n.getOption(this,"answerModel"),t&&"not_attempted"!==t.get("status")?this.$el.find("textarea").val(t.get("answer")):void 0},e.prototype._setBGColor=function(){return this.$el.find("textarea").css("background-color",s.convertHex(this.model.get("bg_color"),this.model.get("bg_opacity")))},e.prototype._setBigAnswerStyle=function(t){return"uline"===t?this.$el.find("textarea").removeClass("border").addClass("underline"):"box"===t?this.$el.find("textarea").removeClass("underline").addClass("border"):this.$el.find("textarea").removeClass("underline border"),this.$el.find("textarea").css({height:this.$el.find("textarea").prop("scrollHeight")+"px"}),console.log("test")},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/biganswer/controller",["app","apps/content-board/element/controller","apps/content-board/elements/biganswer/views"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.BigAnswer",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getBigAnswerView=bind(this._getBigAnswerView,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e;return e=t.answerWreqrObject,this.answerModel=t.answerModel,this.answerModel||(this.answerModel=i.request("create:new:answer")),this.multiplicationFactor=0,n.__super__.initialize.call(this,t),e?(this.displayAnswer=e.displayAnswer,this.multiplicationFactor=e.multiplicationFactor,e.setHandler("get:question:answer",function(t){return function(){var e,i,n;return t.layout.model.setMultiplicationFactor(t.multiplicationFactor),e=t.view.$el.find("textarea").val(),t.answerModel.set({answer:e}),n=r.isEmpty(e)?"empty":"complete",i={emptyOrIncomplete:n,answerModel:t.answerModel,totalMarks:t.layout.model.get("marks")}}}(this))):void 0},n.prototype.renderElement=function(){var t;return console.log(this.answerModel),t=this.view=this._getBigAnswerView(this.answerModel),this.layout.elementRegion.show(t,{loading:!0})},n.prototype._getBigAnswerView=function(e){return console.log(this.answerModel),new t.Views.BigAnswerView({model:this.layout.model,answerModel:e})},n}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/content-board/elements/sort/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Sort.Views",function(t,e,i,n,o,s){var r;return r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="sort-option",e.prototype.template='<input type="hidden" id="optionNo" value="{{optionNo}}"> <p class="sort-option-text"></p>',e.prototype.onShow=function(){return this.$el.find("p").html(s.stripslashes(this.model.get("text")))},e}(n.ItemView),t.SortView=function(t){function e(){return this._changeHeight=bind(this._changeHeight,this),this._changeBGColor=bind(this._changeBGColor,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="sort"></div> <div class="alert alert-success text-center fibRightAns" style="display: none;"> <div class="btn-group"> <input type="button" class="btn btn-default btn-primary" value=" My Answer" data-sort-value="myAnswer"> <input type="button" class="btn btn-default " value=" Correct Answer" data-sort-value="correctAnswer"> </div> </div>',e.prototype.itemView=r,e.prototype.itemViewContainer="div.sort",e.prototype.initialize=function(t){return this.sort_model=t.sort_model},e.prototype.onShow=function(){var t;return this._changeBGColor(),this._enableSorting(),this._changeHeight(this.sort_model,this.sort_model.get("height")),t=!0,n.getOption(this,"displayAnswer")===!1&&(t=!1),this.$el.closest(".preview").find("#submit-answer-button").on("click",function(e){return function(){return t?e.trigger("submit:answer"):void 0}}(this)),s.delay(function(t){return function(){return t.trigger("show:completed")}}(this),200)},e.prototype._changeBGColor=function(t,e){return this.$el.find(".sort-option").css("background-color",s.convertHex(this.sort_model.get("bg_color"),this.sort_model.get("bg_opacity")))},e.prototype._changeHeight=function(t,e){return this.$el.find(".sort-option").css("min-height",e+"px")},e.prototype._enableSorting=function(){return this.$el.find(".sort").hasClass("ui-sortable")?void 0:this.$el.find(".sort").sortable({cursor:"move"})},e.prototype.onDestroySortable=function(){return this.$el.find(".sort").hasClass("ui-sortable")?this.$el.find(".sort").sortable("destroy"):void 0},e.prototype.onShowFeedback=function(){var t;return this.$el.find(".fibRightAns").show(),this.$el.find("input#optionNo").each(function(t){return function(e,i){return o(i).before("<span class='myAnswer' style='display:none;'>"+(e+1)+"</span>"),o(i).before("<span class='correctAnswer' style='display:none;'>"+t.collection.get(o(i).val()).get("index")+"</span>")}}(this)),this.onDestroySortable(),t=this.$el.find(".sort"),t.isotope({itemSelector:".sort-option",layoutMode:"vertical",getSortData:{correctAnswer:".correctAnswer parseInt",myAnswer:".myAnswer parseInt"}}),this.$el.find(".sort-option").css("min-width","100%"),this.$el.find(".fibRightAns input").on("click",function(t){return function(e){var i;return e.stopPropagation(),t.$el.find(".fibRightAns input").removeClass("btn-primary"),o(e.target).addClass("btn-primary"),i=o(e.target).attr("data-sort-value"),console.log(i),console.log(o(e.target)),t.$el.find(".sort").isotope({sortBy:i})}}(this))},e.prototype.onClose=function(){return this.$el.find(".sort").hasClass("ui-sortable")?this.$el.find(".sort").sortable("destroy"):void 0},e}(n.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/sort/controller",["app","apps/content-board/element/controller","apps/content-board/elements/sort/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Sort",function(t,i,n,o,s,r){return t.Controller=function(e){function a(){return this._submitAnswer=bind(this._submitAnswer,this),a.__super__.constructor.apply(this,arguments)}return extend(a,e),a.prototype.initialize=function(t){var e;return e=t.answerWreqrObject,this.answerModel=t.answerModel,this.answerModel||(this.answerModel=i.request("create:new:answer")),this.displayAnswer=!0,this.multiplicationFactor=0,e&&(this.displayAnswer=e.displayAnswer,this.multiplicationFactor=e.multiplicationFactor,e.setHandler("get:question:answer",function(t){return function(){var e;return t.layout.model.setMultiplicationFactor(t.multiplicationFactor),e={answerModel:t.answerModel,totalMarks:t.layout.model.get("marks"),questionType:"sort"}}}(this)),e.setHandler("submit:answer",function(t){return function(e){return t._submitAnswer(t.displayAnswer)}}(this))),a.__super__.initialize.call(this,t)},a.prototype.renderElement=function(){var t,e,o;return o=this.layout.model.get("elements"),o instanceof n.Collection&&(o=o.models),this._parseOptions(o),"skipped"!==this.answerModel.get("status")&&(o=r.shuffle(o)),this.optionCollection=i.request("create:new:option:collection",o),this.layout.model.set("elements",this.optionCollection),"skipped"===this.answerModel.get("status")?(e=this.optionCollection.sortBy("index"),this.optionCollection=i.request("create:new:option:collection",e)):r.size(this.answerModel.get("answer"))>0&&(t=r.map(this.answerModel.get("answer"),function(t){return function(e){return t.optionCollection.findWhere({index:parseInt(e)})}}(this)),this.optionCollection=i.request("create:new:option:collection",t)),this.view=this._getSortView(this.optionCollection),i.execute("show:total:marks",this.layout.model.get("marks")),this.listenTo(this.view,"submit:answer",this._submitAnswer),this.listenTo(this.view,"show:completed",function(t){return function(){return"not_attempted"!==t.answerModel.get("status")?t._submitAnswer():void 0}}(this)),this.layout.elementRegion.show(this.view)},a.prototype._getSortView=function(e){return new t.Views.SortView({collection:e,sort_model:this.layout.model})},a.prototype._parseOptions=function(t){return r.each(t,function(t){return null!=t.optionNo&&(t.optionNo=parseInt(t.optionNo)),null!=t.marks&&(t.marks=parseInt(t.marks)),null!=t.index?t.index=parseInt(t.index):void 0})},a.prototype._submitAnswer=function(t){return null==t&&(t=!0),this.layout.model.setMultiplicationFactor(this.multiplicationFactor),this.answerModel.set("marks",this.layout.model.get("marks")),t=o.getOption(this,"displayAnswer"),this.answerModel.set({answer:[]}),this.view.$el.find("input#optionNo").each(function(e){return function(i,n){var o;if(o=e.optionCollection.get(s(n).val()).get("index"),e.answerModel.get("answer").push(o),o!==i+1){if(e.answerModel.set("marks",0),t)return s(n).parent().addClass("ansWrong")}else if(t)return s(n).parent().addClass("ansRight")}}(this)),t&&i.execute("show:response",this.answerModel.get("marks"),this.layout.model.get("marks")),console.log(this.answerModel.get("answer").toString()),0!==this.answerModel.get("marks")?this.view.triggerMethod("destroy:sortable"):t?this.view.triggerMethod("show:feedback"):void 0},a}(e.Controller)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/teacherquestion/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.TeacherQuestion.Views",function(t,e,i,n,o,s){var r;return r=function(t){function e(){return this._removeButtonAndShowAnswer=bind(this._removeButtonAndShowAnswer,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="teacher-question-row column",e.prototype.template="<span></span>",e.prototype.onShow=function(){return 1===parseInt(this.model.get("position"))?this.$el.find("span").text("Question"):(this.$el.find("span").text("Answer"),s.delay(function(t){return function(){return t.$el.hide(),t.$el.after('<div class="teacher-question-row column"><span>Answer</span><button type="button" id="show-answer" class="btn btn-default btn-sm btn-small">View Answer</button></div>'),t.$el.next().find("button#show-answer").on("click",t._removeButtonAndShowAnswer)}}(this),0)),this.$el.attr("data-position",this.model.get("position"))},e.prototype._removeButtonAndShowAnswer=function(t){return o(t.target).parent().hide(),this.$el.show()},e.prototype.onClose=function(){return this.$el.hasClass("ui-sortable")?this.$el.sortable("destroy"):void 0},e}(n.ItemView),t.MainView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="teacher-question",e.prototype.template="&nbsp;",e.prototype.itemView=r,e.prototype.initialize=function(t){var e,n,o,r,a,l;for(null==t&&(t={}),this.model=t.model,this.collection=new i.Collection,o=t.model.get("elements"),r=[],e=0,n=o.length;n>e;e++)l=o[e],a=s.clone(l),delete a.elements,r.push(this.collection.add(a));return r},e}(n.CollectionView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/teacherquestion/controller",["app","apps/content-board/element/controller","apps/content-board/elements/teacherquestion/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.TeacherQuestion",function(t,i,n,o,s,r){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return r.defaults(t.modelData,{element:"TeacherQuestion",elements:[],meta_id:0}),i.__super__.initialize.call(this,t)},i.prototype.renderElement=function(){var t;return t=this._getMainView(),this.layout.elementRegion.show(t)},i.prototype._getMainView=function(){return console.log(this.layout),new t.Views.MainView({model:this.layout.model})},i}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/video/view",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Video.Views",function(t,e,i,n,o,s){return t.VideoView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="video",e.prototype.template='    {{#videoUrl}} <div class="videoContainer"></div> {{/videoUrl}} {{^videoUrl}} <video  class="video-js vjs-default-skin" controls preload="none" width="100%" poster="'+SITEURL+'/wp-content/themes/walnut/images/video-unavailable.png" data-setup="{}" controls src="{{videoUrl}}"> </video> {{/videoUrl}} <div class="clearfix"></div>',e.prototype.events={"click .show-playlist":"togglePlaylist","click #prev":"_playPrevVideo","click #next":"_playNextVideo","click .playlist-video":"_playClickedVideo"},e.prototype.onShow=function(){return this.model.get("video_ids").length?(this.model.set({autoplay:s.toBool(this.model.get("autoplay"))}),this.videos=this.model.get("videoUrls"),this.index=0,this.$el.find("video").on("ended",function(t){return function(){return t._playNextVideo()}}(this)),s.size(this.videos)>1&&this._setVideoList(),this.$el.find(".playlist-video[data-index='0']").addClass("currentVid"),this._addVideoElement(this.videos[0],this.model.get("autoplay"))):void 0},e.prototype._setVideoList=function(){return this.$el.append('<div id="playlist-hover" class="playlistHover"> <div class="row m-l-0 m-r-0 p-b-5 m-b-5"> <div class="col-sm-8 nowPlaying"> <span class="small text-muted">Now Playing:</span> <span id="now-playing-tag">'+this.model.get("title")[0]+'</span> </div> <div class="col-sm-4"> <button class="btn btn-white btn-small pull-right show-playlist"> <i class="fa fa-list-ul"></i> Playlist </button> </div> </div> <div class="row m-l-0 m-r-0 playlist-hidden vidList animated fadeInRight" style="display: none;"> <div class="video-list col-sm-8" id="video-list"></div> <div class="col-sm-4 p-t-5 m-b-5"> <button class="btn btn-info btn-small pull-right" id="next"> <i class="fa fa-step-forward"></i> </button> <button class="btn btn-info btn-small pull-right m-r-10" id="prev"> <i class="fa fa-step-backward"></i> </button> </div> </div> </div>'),this.$el.find("#video-list").empty(),s.each(this.model.get("title"),function(t){return function(e,i){return t.$el.find("#video-list").append("<div class='playlist-video' data-index="+i+">"+e+"</div>")}}(this))},e.prototype.togglePlaylist=function(){return this.$el.find(".playlist-hidden").toggle()},e.prototype._playPrevVideo=function(t){return t.stopPropagation(),this.index>0&&this.index--,this._playVideo()},e.prototype._playNextVideo=function(t){return null!=t&&t.stopPropagation(),this.index<this.videos.length-1?(this.index++,this._playVideo()):void 0},e.prototype._playClickedVideo=function(t){var e;return t.stopPropagation(),e=parseInt(o(t.target).attr("data-index")),this.index=e,this._playVideo()},e.prototype._playVideo=function(){return this.$el.find(".playlist-video").removeClass("currentVid"),this.$el.find(".playlist-video[data-index='"+this.index+"']").addClass("currentVid"),this.$el.find("#now-playing-tag").text(this.model.get("title")[this.index]),this.$el.find("video").attr("src",this.videos[this.index]),this.videos[this.index]||this.$el.find("video").attr("poster",SITEURL+"/wp-content/themes/walnut/images/video-unavailable.png"),this._addVideoElement(this.videos[this.index],!0)},e.prototype._addVideoElement=function(t,e){var i,n,o;return null==e&&(e=!1),this.$el.find(".videoContainer").empty(),s.str.contains(t,"youtube.com")?(e=e?1:0,i="&autoplay="+e,n=this.model.get("startTime")?this.model.get("startTime"):0,i+="&start="+n,this.model.get("endTime")&&"0"!==this.model.get("endTime")&&(i+="&end="+this.model.get("endTime")),o=s.str.strRightBack(t,"?v="),this.$el.find(".videoContainer").html('<div class="videoWrapper"> <iframe width="100%" height="349" src="https://www.youtube.com/embed/'+o+"?rel=0&amp;showinfo=0"+i+'" frameborder="0"> </iframe></div>')):(t+="#t=",t+=this.model.get("startTime")?this.model.get("startTime"):0,this.model.get("endTime")&&"0"!==this.model.get("endTime")&&(t+=","+this.model.get("endTime")),this.$el.find(".videoContainer").html('<video class="video-js vjs-default-skin show-video" controls preload="none" height="auto" width="100%" poster="'+SITEURL+'/wp-content/themes/walnut/images/video-poster.jpg" data-setup="{}" controls src="'+t+'"> </video>'),this.$el.find("video")[0].load(),
this.$el.find("video")[0].play())},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/video/controller",["app","apps/content-board/element/controller","apps/content-board/elements/video/view"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Video",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getVideoUrls=bind(this._getVideoUrls,this),this.renderElement=bind(this.renderElement,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return n.__super__.initialize.call(this,t)},n.prototype.bindEvents=function(){return n.__super__.bindEvents.call(this)},n.prototype._getVideoView=function(e){return new t.Views.VideoView({model:this.layout.model})},n.prototype._getVideoCollection=function(){return this.videoCollection||(this.layout.model.get("video_ids")&&this.layout.model.get("video_ids").length?this.videoCollection=i.request("get:media:collection:by:ids",this.layout.model.get("video_ids")):this.videoCollection=i.request("get:empty:media:collection")),this.videoCollection.comparator="order",this.videoCollection},n.prototype._parseInt=function(){var t;return t=new Array,this.layout.model.get("video_ids")||""===this.layout.model.get("video_id")||(this.layout.model.set("video_ids",[this.layout.model.get("video_id")]),this.layout.model.set("videoUrls",[this.layout.model.get("videoUrl")])),r.each(this.layout.model.get("video_ids"),function(e){return t.push(parseInt(e))}),this.layout.model.set("video_ids",t)},n.prototype.renderElement=function(){var t;return this._parseInt(),t=this._getVideoCollection(),i.execute("when:fetched",t,function(e){return function(){var i,n;return i=e._getVideoUrls(t),e.layout.model.set({videoUrl:r.first(i)}),e.layout.model.set({videoUrls:i}),n=e._getVideoView(),e.layout.elementRegion.show(n)}}(this))},n.prototype._getVideoUrls=function(t){var e;return e=t.pluck("url"),e=r.map(e,function(t){return function(e,i){var n;return n=t.layout.model.get("title"),r.str.contains(n[i],"youtube.com")&&!e?n[i]:e}}(this))},n}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/audio/views",["app"],function(t){return t.module("ContentPreview.ContentBoard.Element.Audio.Views",function(t,e,i,n,o,s){return t.AudioView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="audio",e.prototype.template='{{#audio}} <audio title="{{title}}" class="audio1" controls autoplay> <source src="{{audioUrl}}" type="audio/mpeg"> Your browser does not support the audio element. </audio> {{/audio}}',e.prototype.mixinTemplateHelpers=function(t){var i,n;return t=e.__super__.mixinTemplateHelpers.call(this,t),this.model.set({autoplay:s.toBool(this.model.get("autoplay"))}),this.model.get("audio_ids").length&&(i=s.zip(this.model.get("title"),this.model.get("audioUrls")),n=new Array,s.each(i,function(t){return n.push(s.object(["title","audioUrl"],t))}),t.audio=n),t},e.prototype.onShow=function(){return this.$el.find("audio").panzerlist({theme:"light",layout:"big",expanded:!0,showduration:!0,show_prev_next:!0,auto_start:this.model.get("autoplay")})},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/audio/controller",["app","apps/content-board/element/controller","apps/content-board/elements/audio/views"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Audio",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this.renderElement=bind(this.renderElement,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return n.__super__.initialize.call(this,t)},n.prototype.bindEvents=function(){return n.__super__.bindEvents.call(this)},n.prototype._getAudioView=function(){return new t.Views.AudioView({model:this.layout.model})},n.prototype._getAudioCollection=function(){return this.audioCollection||(this.layout.model.get("audio_ids").length?this.audioCollection=i.request("get:media:collection:by:ids",this.layout.model.get("audio_ids")):this.audioCollection=i.request("get:empty:media:collection")),this.audioCollection.comparator="order",this.audioCollection},n.prototype._parseInt=function(){var t;return t=new Array,!this.layout.model.get("audio_ids")&&this.layout.model.get("audio_id")&&(this.layout.model.set("audio_ids",[this.layout.model.get("audio_id")]),this.layout.model.set("audioUrls",[this.layout.model.get("audioUrl")])),r.each(this.layout.model.get("audio_ids"),function(e){return t.push(parseInt(e))}),this.layout.model.set("audio_ids",t)},n.prototype.renderElement=function(){var t;return this._parseInt(),t=this._getAudioCollection(),i.execute("when:fetched",t,function(e){return function(){return e.layout.model.set({audioUrls:r.first(t.pluck("url"))}),e.layout.model.set({audioUrls:t.pluck("url")}),e.view=e._getAudioView(),e.layout.elementRegion.show(e.view)}}(this))},n}(e.Controller)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/table/views",["app","bootbox"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Table.Views",function(t,e,i,n,o,s){return t.TableView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="imp-table",e.prototype.template="",e.prototype.onShow=function(){return this.$el.html(s.stripslashes(this.model.get("content")))},e}(n.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/elements/table/controller",["app","apps/content-board/element/controller","apps/content-board/elements/table/views"],function(t,e){return t.module("ContentPreview.ContentBoard.Element.Table",function(t,i){return t.Controller=function(e){function i(){return this.renderElement=bind(this.renderElement,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t)},i.prototype._getTableView=function(){return new t.Views.TableView({model:this.layout.model})},i.prototype.renderElement=function(){return this.view=this._getTableView(),this.layout.elementRegion.show(this.view)},i}(e.Controller)})}),define("apps/content-board/elements-loader",["apps/content-board/elements/hotspot/controller","apps/content-board/elements/row/controller","apps/content-board/elements/text/controller","apps/content-board/elements/image/controller","apps/content-board/elements/imagewithtext/controller","apps/content-board/elements/mcq/controller","apps/content-board/elements/fib/controller","apps/content-board/elements/biganswer/controller","apps/content-board/elements/sort/controller","apps/content-board/elements/teacherquestion/controller","apps/content-board/elements/video/controller","apps/content-board/elements/audio/controller","apps/content-board/elements/table/controller"],function(){});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-board/controller",["app","controllers/region-controller","apps/content-board/element/controller","apps/content-board/view","apps/content-board/elements-loader"],function(t,e){return t.module("ContentPreview.ContentBoard",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getContentBoardView=bind(this._getContentBoardView,this),n.__super__.constructor.apply(this,arguments)}var o,a,l;return extend(n,e),l=null,a=null,n.prototype.initialize=function(t){return this.model=t.model,l=t.answerWreqrObject,a=t.answerModel,this.quizModel=t.quizModel,this.direction=t.direction,this.view=this._getContentBoardView(),this.listenTo(this.view,"add:new:element",function(t,e){return i.request("add:new:element",t,e)}),this.listenTo(this.view,"close",function(t){return function(){var e;return e=t.view.$el.find(".audio"),r.each(e,function(t,e){return s(t).find(".pause").trigger("click")})}}(this)),this.listenTo(this.view,"dependencies:fetched",function(t){return function(){var e;return e=t.startFillingElements(),t.view.$el.find(".cke_widget_drag_handler_container").remove(),e.done(function(){return setTimeout(function(){return s("#loading-content-board").remove(),s("#question-area").removeClass("vHidden")},500)})}}(this)),i.commands.setHandler("show:response",function(t){return function(e,i){return t.view.triggerMethod("show:response",parseFloat(e).toFixed(1),parseFloat(i).toFixed(1))}}(this)),this.show(this.view,{loading:!0,entities:[this.elements]})},n.prototype._getContentBoardView=function(){return new t.Views.ContentBoardView({model:this.model,quizModel:this.quizModel,answerModel:a})},n.prototype.startFillingElements=function(){var t,e,n;return n=this.view.model.get("layout"),t=s.Deferred(),e=s("#myCanvas #question-area"),r.each(n,function(o){return function(a,l){var c,u;return c=s.Deferred(),"Row"===a.element||"TeacherQuestion"===a.element?(u=o.addNestedElements(e,a),u.done(function(){return c.resolve()})):(i.request("add:new:element",e,a.element,a),c.resolve()),c.promise(),l===r.size(n)-1?t.resolve():void 0}}(this)),t.promise()},n.prototype.addNestedElements=function(t,e){var n,o;return o=s.Deferred(),n=i.request("add:new:element",t,e.element,e),r.each(e.elements,function(a){return function(l,c){var u;return u=s.Deferred(),l.elements?(t=n.layout.elementRegion.currentView.$el.children().eq(c),r.each(l.elements,function(e,n){var o;return"Row"===e.element?(o=a.addNestedElements(s(t),e),o.done(function(){return u.resolve()})):(i.request("add:new:element",t,e.element,e),u.resolve())}),u.promise(),c===r.size(e.elements)-1?u.done(function(){return o.resolve()}):void 0):u.resolve()}}(this)),o.promise()},o={addNewElement:function(e,i,n){return new t.Element[i].Controller({container:e,modelData:n,answerWreqrObject:l,answerModel:a})}},i.commands.setHandler("show:content:board",function(e){return new t.Controller(e)}),i.reqres.setHandler("add:new:element",function(t,e,i){return null==i&&(i={}),o.addNewElement(t,e,i)}),n}(e)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/module-description/module-description-app",["app","controllers/region-controller","text!apps/take-module-item/module-description/templates/module-description-template.html","bootbox"],function(t,e,i,n){return t.module("TeacherTeachingApp.ModuleDescription",function(t,o){var s,r;return s=function(t){function e(){return this._showModuleDescriptionView=bind(this._showModuleDescriptionView,this),this._getNextItemID=bind(this._getNextItemID,this),this._changeQuestion=bind(this._changeQuestion,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.model=t.model,this.questionResponseModel=t.questionResponseModel,this.questionResponseCollection=t.questionResponseCollection,this.timerObject=t.timerObject,this.display_mode=t.display_mode,this.currentItemID=this.questionResponseModel.get("content_piece_id"),this.nextItemID=this._getNextItemID(this.currentItemID),this.view=e=this._showModuleDescriptionView(this.model),this.show(e,{loading:!0,entities:[this.model,this.questionResponseModel]}),this.listenTo(this.view,"goto:previous:route",function(t){return function(){return t.region.trigger("goto:previous:route")}}(this)),this.listenTo(this.region,"top:panel:question:done",function(t){return function(){return t.view.triggerMethod("top:panel:question:done")}}(this)),this.listenTo(this.region,"top:panel:check:last:question",function(t){return function(){return t.view.triggerMethod("top:panel:check:last:question")}}(this)),this.listenTo(e,"question:completed",this._changeQuestion)},e.prototype._changeQuestion=function(){return this.region.trigger("goto:next:question"),this.nextItemID=this._getNextItemID(this.nextItemID),this.view.triggerMethod("question:changed",this.nextItemID)},e.prototype._getNextItemID=function(t){var e,i,n;return e=this.model.get("content_pieces"),e=_.map(e,function(t){return parseInt(t)}),n=_.indexOf(e,t),i=parseInt(e[n+1]),i||(i=!1),i},e.prototype._showModuleDescriptionView=function(t){var e,i,n,o,s;return i=t.get("term_ids"),e=_.size(this.questionResponseCollection.where({status:"completed"})),o=_.size(t.get("content_pieces")),n=this.questionResponseCollection.pluck("time_taken"),s=0,_.size(n)>0&&(s=_.reduce(n,function(t,e){return parseInt(t+parseInt(e))})),new r({model:t,display_mode:this.display_mode,nextItemID:this.nextItemID,templateHelpers:{showPauseButton:function(t){return function(){var e;return e="","class_mode"===t.display_mode&&(e='<button type="button" id="pause-session" class="btn btn-white action h-center block m-t-5"><i class="fa fa-pause"></i> Pause</button>'),e}}(this),getProgressData:function(){return e+"/"+o},getProgressPercentage:function(){return parseInt(e/o*100)},moduleTime:function(){var t;return t=$.timeMinSecs(s)}}})},e}(e),r=function(t){function e(){return this.questionCompleted=bind(this.questionCompleted,this),this.onTopPanelQuestionDone=bind(this.onTopPanelQuestionDone,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="pieceWrapper",e.prototype.template=i,e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.isTraining="training"===this.display_mode?!0:!1,t},e.prototype.initialize=function(){return this.display_mode=Marionette.getOption(this,"display_mode"),this.isLastContentPiece=!1},e.prototype.events={"click #back-to-module, #pause-session":function(){return this.trigger("goto:previous:route")},"click #question-done":"questionCompleted"},e.prototype.onShow=function(){var t;return Marionette.getOption(this,"nextItemID")||(this.isLastContentPiece=!0,this.$el.find("#question-done").html('<i class="fa fa-forward"></i> Finish Module')),"archive"===this.model.get("post_status")&&this.$el.find("#question-done").remove(),t=this.$el.find("#module-details-region").height(),$(window).scroll(function(){$(window).scrollTop()>t?($("#module-details-region").addClass("condensed animated slideInDown"),$("#question-details-region").css("margin-top",t+15)):($("#module-details-region").removeClass("condensed slideInDown"),$("#question-details-region").css("margin-top",0))}),$("#collapseView").on("hidden.bs.collapse",function(){return $("#accordionToggle").text("Expand")}),$("#collapseView").on("shown.bs.collapse",function(){return $("#accordionToggle").text("Collapse")})},e.prototype.onTopPanelQuestionDone=function(){return this.questionCompleted()},e.prototype.questionCompleted=function(){return"class_mode"===Marionette.getOption(this,"display_mode")?n.confirm("This item will be marked as complete. Continue?",function(t){return function(e){return e?t.trigger("question:completed"):void 0}}(this)):this.trigger("question:completed")},e.prototype.onQuestionChanged=function(t){return t?void 0:(this.isLastContentPiece=!0,this.$el.find("#question-done").html('<i class="fa fa-forward"></i> Finish Module'))},e.prototype.onTopPanelCheckLastQuestion=function(){return this.isLastContentPiece?$("#top-panel-question-done").html('<i class="fa fa-forward"></i> Finish Module'):void 0},e}(Marionette.ItemView),o.commands.setHandler("show:teacher:teaching:module:description",function(t){return null==t&&(t={}),new s(t)})})}),define("text!apps/take-module-item/item-description/templates/top-panel.html",[],function(){return'<div class="contentTime">\n    <div class="grid-body no-border">\n        <div class="p-t-10">\n            <label class="form-label bold small-text text-center">Content Piece Timer</label>\n            {{#isTraining}}\n                <p class="small-text muted text-center">Visible in Class room mode</p>\n            {{/isTraining}}\n            {{^isTraining}}\n                <!--<div class="cpTimer" data-timer="{{timeLeftOrElapsed}}"></div>-->\n                <div id="downUpTimer" timerdirection=""></div>\n                {{&getCompletedSummary}}\n            {{/isTraining}}\n        </div>\n    </div>\n</div>\n\n<div class="contentInfo">\n    <div class="modTime next m-b-10">\n        <button type="button" id="top-panel-question-done"  class="btn btn-block btn-success m-t-10">\n            <i class="fa fa-forward"></i> Next\n        </button>\n    </div>\n\n    <div class="grid-body no-border">\n        <div class="b-grey b-b m-b-10 p-b-5" id="question-type-col">\n            <label class="form-label bold small-text muted no-margin">Type</label>\n            <span style="text-transform: capitalize">{{question_type}}</span>\n        </div>\n        <div class="b-grey b-b m-b-10 p-b-5">\n            <label class="form-label bold small-text muted no-margin">Class</label>\n            {{getClass}}\n        </div>\n        <div class="b-grey b-b m-b-10 p-b-5">\n            <label class="form-label bold small-text muted no-margin">Textbook</label>\n            {{getTextbookName}}\n        </div>\n        <div class="b-grey b-b m-b-10 p-b-5">\n            <label class="form-label bold small-text muted no-margin">Chapter</label>\n            {{getChapterName}}\n        </div>\n        <div class="b-grey b-b m-b-10 p-b-5">\n            <label class="form-label bold small-text muted no-margin">Section</label>\n            {{getSectionsNames}}\n        </div>\n        <div class="b-grey b-b m-b-10 p-b-5">\n            <label class="form-label bold small-text muted no-margin">Sub-Section</label>\n            {{getSubSectionsNames}}\n        </div>\n        <div class="b-grey b-b m-b-10 p-b-5" id="total-marks">\n            <label class="form-label bold small-text muted no-margin">Marks</label>\n            <span></span>\n        </div>\n    </div>\n</div>'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/item-description/view",["app","text!apps/take-module-item/item-description/templates/top-panel.html"],function(t,e){return t.module("ContentPreview.TopPanel.Views",function(t,i,n,o,s,r){return t.TopPanelView=function(t){function i(){return this.countUp=bind(this.countUp,this),this.countDown=bind(this.countDown,this),i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.events=function(){return{"click #top-panel-question-done":function(t){return function(){return t.trigger("top:panel:question:done")}}(this)}},i.prototype.mixinTemplateHelpers=function(t){return t=i.__super__.mixinTemplateHelpers.call(this,t),"multiple_eval"===t.question_type&&(t.question_type="multiple Evaluation"),t.isTraining="training"===this.mode?!0:!1,t},i.prototype.initialize=function(){return this.mode=o.getOption(this,"display_mode")},i.prototype.onShow=function(){var t,e;return"multiple_eval"===this.model.get("question_type")&&this.$el.find("#correct-answer-col").hide(),("content_piece"===(t=this.model.get("content_type"))||"student_question"===t)&&this.$el.find("#question-type-col, #correct-answer-col").hide(),"student_question"!==this.model.get("content_type")&&this.$el.find("#total-marks").hide(),e=o.getOption(this,"timeLeftOrElapsed"),"class_mode"===this.mode&&(0>e?this.countUp(e):this.countDown(e)),this.trigger("top:panel:check:last:question")},i.prototype.countDown=function(t){return this.$el.find("#downUpTimer").attr("timerdirection","countDown").countdown("destroy").countdown({until:t,format:"MS",onExpiry:this.countUp})},i.prototype.countUp=function(t){return null==t&&(t=0),this.$el.find("#downUpTimer").attr("timerdirection","countUp").addClass("negative").countdown("destroy").countdown({since:t,format:"MS"})},i.prototype.onShowTotalMarks=function(t){return console.log(t),console.log(this.$el.find("#total-marks span").text(t))},i}(o.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/item-description/controller",["app","controllers/region-controller","apps/take-module-item/item-description/view"],function(t,e){return t.module("ContentPreview.TopPanel",function(t,i,n,o,s,r){return t.Controller=function(e){function n(){return this._getCompletedSummary=bind(this._getCompletedSummary,this),this._timeLeftOrElapsed=bind(this._timeLeftOrElapsed,this),this.getResults=bind(this.getResults,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n;return this.model=t.model,this.questionResponseModel=t.questionResponseModel,this.timerObject=t.timerObject,this.display_mode=t.display_mode,this.classID=t.classID,this.students=t.students,n=r.flatten(this.model.get("term_ids")),this.textbookNames=i.request("get:textbook:names:by:ids",n),this.durationInSeconds=60*this.model.get("duration"),e=this.model.get("term_ids").textbook,this.textbookModel=i.request("get:textbook:by:id",e),this.view=this._showView(),this.listenTo(this.view,"show",function(){return this.view.triggerMethod("show:total:marks",this.marks)}),this.listenTo(this.view,"top:panel:question:done",function(){return this.region.trigger("top:panel:question:done")}),this.listenTo(this.view,"top:panel:check:last:question",function(){return this.region.trigger("top:panel:check:last:question")}),i.execute("when:fetched",[this.textbookNames,this.textbookModel],function(t){return function(){return t.show(t.view,{loading:!0})}}(this)),"class_mode"===this.display_mode?this.timerObject.setHandler("get:elapsed:time",function(t){return function(){var e,i,n,o;return o=s(t.view.el).find("#downUpTimer").countdown("getTimes"),n=s.countdown.periodsToSeconds(o),i=s(t.view.el).find("#downUpTimer").attr("timerdirection"),e="countDown"===i?t.durationInSeconds-n:t.durationInSeconds+n}}(this)):void 0},n.prototype.getResults=function(){var t,e,i,n,o,s,a,l,c,u,d,p;if(i="No One",c=[],u=this.questionResponseModel.get("question_response"),"chorus"===this.model.get("question_type"))u&&(i=CHORUS_OPTIONS[u]);else if("individual"===this.model.get("question_type")){for(n=0,s=u.length;s>n;n++){for(d=u[n],e=this.students.where({ID:d}),o=0,a=e.length;a>o;o++)t=e[o],l=t.get("display_name");c.push(l)}r.size(c)>0&&(p=c.join(", "),i=r.size(c)+" Students ("+p+")")}else i=!1;return i},n.prototype._showView=function(){var e;return e=this.model.get("term_ids"),new t.Views.TopPanelView({model:this.model,display_mode:this.display_mode,timeLeftOrElapsed:this._timeLeftOrElapsed(),templateHelpers:{getClass:function(t){return function(){return CLASS_LABEL[t.classID]}}(this),getTextbookName:function(t){return function(){return t.textbookNames.getTextbookName(e)}}(this),getChapterName:function(t){return function(){return t.textbookNames.getChapterName(e)}}(this),getSectionsNames:function(t){return function(){return t.textbookNames.getSectionsNames(e)}}(this),getSubSectionsNames:function(t){return function(){return t.textbookNames.getSubSectionsNames(e)}}(this),getCompletedSummary:this._getCompletedSummary}})},n.prototype._timeLeftOrElapsed=function(){var t,e,i;return e=0,this.questionResponseModel&&(t=this.questionResponseModel.get("time_taken")),t&&"NaN"!==t&&(e=t),i=this.durationInSeconds-e},n.prototype._getCompletedSummary=function(){var t,e,i,n;return this.questionResponseModel&&"completed"===this.questionResponseModel.get("status")?(e=parseInt(this.questionResponseModel.get("time_taken")/60),i=parseInt(this.questionResponseModel.get("time_taken")%60),n=e+"m "+i+"s",t=this.getResults(),'<div class="p-r-20 p-b-10 p-l-20"> <div class="b-grey b-b m-b-10 p-b-5"> <div class="qstnStatus"><i class="fa fa-check-circle"></i> Completed</div> </div> <div class="b-grey b-b m-b-10 p-b-5"> <label class="form-label bold small-text muted no-margin">Time Alloted:</label>'+this.model.get("duration")+' mins<br> </div> <div class="b-grey b-b m-b-10 p-b-5"> <label class="form-label bold small-text muted no-margin">Time Taken:</label>'+n+'</div> <div id="correct-answer-col"> <div class="b-grey b-b m-b-10 p-b-5"> <label class="form-label bold small-text muted no-margin">Correct Answer:</label>'+t+"</div> </div> </div>"):void 0},n}(e),i.commands.setHandler("show:top:panel",function(e){return new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/take-module-item-controller",["app","controllers/region-controller","apps/take-module-item/student-list/student-list-app","apps/take-module-item/teacher-training-footer/training-footer-controller","apps/take-module-item/module-description/module-description-app","apps/take-module-item/chorus-options/chorus-options-app","apps/take-module-item/item-description/controller","apps/take-module-item/multiple-evaluation/multiple-evaluation-controller"],function(t,e){return t.module("TeacherTeachingApp",function(t,i){var n,o,s,r,a,l,c;return o=null,c=null,l=null,r=null,s=null,a=null,t.TeacherTeachingController=function(t){function e(){return this._showTeacherTrainingFooter=bind(this._showTeacherTrainingFooter,this),this._showStudentsListView=bind(this._showStudentsListView,this),this._showQuestionDisplayView=bind(this._showQuestionDisplayView,this),this._showModuleDescriptionView=bind(this._showModuleDescriptionView,this),this._getOrCreateModel=bind(this._getOrCreateModel,this),this._startViewModuleApp=bind(this._startViewModuleApp,this),this._saveQuestionResponse=bind(this._saveQuestionResponse,this),this._gotoViewModule=bind(this._gotoViewModule,this),this._changeQuestion=bind(this._changeQuestion,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.division=t.division,this.classID=t.classID,this.moduleID=t.moduleID,o=t.contentGroupModel,l=t.questionsCollection,r=t.questionResponseCollection,s=t.contentPiece,this.display_mode=t.display_mode,c=t.studentCollection,i.leftNavRegion.reset(),i.headerRegion.reset(),i.execute("when:fetched",[r,s],function(t){return function(){return t._getOrCreateModel(s.get("ID"))}}(this)),this.layout=e=this._getTakeSingleQuestionLayout(),this.show(this.layout,{loading:!0,entities:[o,c,l,r,a,s]}),this.timerObject=new Backbone.Wreqr.RequestResponse,this.listenTo(this.layout,"show",this._showModuleDescriptionView),this.listenTo(this.layout,"show",function(t){return function(){return"content_piece"===s.get("content_type")?t._showTeacherTrainingFooter():t._showStudentsListView(a)}}(this)),this.listenTo(this.layout,"show",this._showQuestionDisplayView(s)),this.listenTo(this.layout.moduleDetailsRegion,"goto:previous:route",this._gotoViewModule),this.listenTo(this.layout.studentsListRegion,"goto:previous:route",this._gotoViewModule),this.listenTo(this.layout.moduleDetailsRegion,"goto:next:question",this._changeQuestion),this.listenTo(this.layout.studentsListRegion,"goto:next:question",this._changeQuestion),this.listenTo(this.layout.topPanelRegion,"top:panel:question:done",function(t){return function(){return t.layout.moduleDetailsRegion.trigger("top:panel:question:done")}}(this)),this.listenTo(this.layout.topPanelRegion,"top:panel:check:last:question",function(t){return function(){return t.layout.moduleDetailsRegion.trigger("top:panel:check:last:question")}}(this))},e.prototype._changeQuestion=function(){var t;return"class_mode"===this.display_mode&&this._saveQuestionResponse("completed"),t=this._getNextItemID(),t?(s=l.get(t),a=this._getOrCreateModel(t),this._showQuestionDisplayView(s),this.layout.triggerMethod("change:content:piece",s),"training"===this.display_mode||"content_piece"===s.get("content_type")?this._showTeacherTrainingFooter():void 0):this._gotoViewModule()},e.prototype._getNextItemID=function(){var t,e,i;return t=o.get("content_pieces"),t=_.map(t,function(t){return parseInt(t)}),i=_.indexOf(t,s.id),e=parseInt(t[i+1]),e||(e=!1),e},e.prototype._gotoViewModule=function(){return"class_mode"===this.display_mode&&"completed"!==a.get("status")?this._saveQuestionResponse("paused"):this._startViewModuleApp()},e.prototype._saveQuestionResponse=function(t){var e,n;return n=this.timerObject.request("get:elapsed:time"),e={time_taken:n,status:t,end_date:"completed"===t?moment().format("YYYY-MM-DD"):void 0,teacher_name:i.request("get:user:data","display_name")},a.set(e),r.add(a),moment(a.get("start_date")).isValid()||(e.start_date=moment().format("YYYY-MM-DD")),a.save(e,{wait:!0,success:function(t){return function(e){return"paused"===e.get("status")?t._startViewModuleApp():void 0}}(this)})},e.prototype._startViewModuleApp=function(){return $.showHeaderAndLeftNav(),i.execute("show:single:module:app",{region:i.mainContentRegion,model:o,mode:this.display_mode,division:this.division,classID:this.classID,studentCollection:c,questionResponseCollection:r})},e.prototype._getOrCreateModel=function(t){var e;return a=r.findWhere({content_piece_id:t}),a||(e={collection_id:o.get("id"),content_piece_id:t,division:this.division},a=i.request("save:question:response",""),a.set("question_response",[]),a.set(e),"class_mode"===this.display_mode&&a.save()),a},e.prototype._showModuleDescriptionView=function(){return i.execute("when:fetched",o,function(t){return function(){return i.execute("show:teacher:teaching:module:description",{region:t.layout.moduleDetailsRegion,model:o,timerObject:t.timerObject,questionResponseModel:a,questionResponseCollection:r,display_mode:t.display_mode})}}(this))},e.prototype._showQuestionDisplayView=function(t){return a||this._getOrCreateModel(t.ID),i.execute("show:top:panel",{region:this.layout.topPanelRegion,model:s,questionResponseModel:a,timerObject:this.timerObject,display_mode:this.display_mode,students:c,classID:this.classID}),i.execute("when:fetched",a,function(t){return function(){return"multiple_eval"===s.get("question_type")?(i.execute("show:single:question:multiple:evaluation:app",{region:t.layout.contentBoardRegion,questionResponseModel:a,studentCollection:c,display_mode:t.display_mode,timerObject:t.timerObject,evaluationParams:s.get("grading_params")}),t.layout.studentsListRegion.reset()):(i.execute("show:content:board",{region:t.layout.contentBoardRegion,model:s}),t._showStudentsListView(a))};
}(this))},e.prototype._showStudentsListView=function(t){return i.execute("when:fetched",s,function(e){return function(){var n;return n=s.get("question_type"),"individual"===n?i.execute("show:single:question:student:list:app",{region:e.layout.studentsListRegion,questionResponseModel:t,studentCollection:c,display_mode:e.display_mode,timerObject:e.timerObject}):"chorus"===n?i.execute("show:single:question:chorus:options:app",{region:e.layout.studentsListRegion,questionResponseModel:t,display_mode:e.display_mode,timerObject:e.timerObject}):void 0}}(this))},e.prototype._showTeacherTrainingFooter=function(){return i.execute("when:fetched",s,function(t){return function(){var e;return e=s.get("question_type"),i.execute("show:teacher:training:footer:app",{region:t.layout.studentsListRegion,contentPiece:s,nextItemID:t._getNextItemID()})}}(this))},e.prototype._getTakeSingleQuestionLayout=function(){return new n({model:s})},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div id="module-details-region"></div> <div class="" id="top-panel"></div> <div class="container-grey m-b-5  qstnInfo "> <label class="form-label bold small-text muted no-margin inline" id="instructions-label"> </label> <span class="small-text" id="instructions"></span> </div> <div id="content-board" class="m-b-50"></div> <div id="students-list-region"></div>',e.prototype.regions={moduleDetailsRegion:"#module-details-region",contentBoardRegion:"#content-board",studentsListRegion:"#students-list-region",topPanelRegion:"#top-panel"},e.prototype.onShow=function(){return $(".page-content").addClass("condensed expand-page"),this.onChangeContentPiece(this.model)},e.prototype.onChangeContentPiece=function(t){var e;return e="content_piece"===t.get("content_type")?"Procedure Summary":"Instructions",e&&this.$el.find("#instructions-label").html(e),this.$el.find("#instructions").html(t.get("instructions"))},e}(Marionette.Layout)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/take-module-item/take-module-item-app",["app","apps/take-module-item/take-module-item-controller"],function(t){return t.module("TeacherTeachingApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"teachers/take-class/:classID/:div/textbook/:tID/module/:mID/:qID":"teacherTeachingModule"},e}(Marionette.AppRouter),i={teacherTeachingModule:function(i,n,o,s,r){return new t.TeacherTeachingController({region:e.mainContentRegion,textbookID:o,classID:i,division:n,moduleID:s,questionID:r})}},t.on("start",function(){return new n({controller:i})})}),t.commands.setHandler("start:teacher:teaching:app",function(e){return null==e&&(e={}),new t.TeacherTeachingApp.TeacherTeachingController(e)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/no-permissions/app",["app","controllers/region-controller"],function(t,e){return t.module("NoPermissions.Controller",function(t,i){var n;return t.NoPermissionsController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,i;return this.error_msg=t.error_msg,this.error_header=t.error_header,e=t.is404,this.view=i=this._getNoPermissionsView(),this.show(i),e&&(this.error_msg="404",this.error_header="Page not found"),this.view=i=this._getNoPermissionsView(),this.show(i)},e.prototype._getNoPermissionsView=function(){return new n({error_header:this.error_header,error_msg:this.error_msg})},e}(e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="tiles white grid simple vertical green animated slideInRight"> <div class="grid-title no-border"> {{error_header}} </div> <div style="overflow: hidden; display: block;" class="grid-body no-border"> <div class="row "> <div class="col-md-8"> {{error_msg}} </div> </div> </div> </div>',e.prototype.mixinTemplateHelpers=function(t){var e,i;return i=Marionette.getOption(this,"error_msg"),e=Marionette.getOption(this,"error_header"),t.error_header=e?e:"Forbidden Access",t.error_msg=i?i:"You do not have access to this section",t},e}(Marionette.ItemView),i.commands.setHandler("show:no:permissions:app",function(e){return null==e&&(e={}),new t.NoPermissionsController(e)}),i.commands.setHandler("show:404:app",function(e){return null==e&&(e={}),e.is404=!0,new t.NoPermissionsController(e)})})}),define("text!apps/textbooks/templates/textbooks-list.html",[],function(){return'<div class="page-title"> <!--<i class="icon-custom-left"></i>-->\n	<h3>Text<span class="semi-bold">books</span></h3>\n</div>\n<div id="Filters" class="pull-left">\n			<div class="btn-group"> <a href="#" data-toggle="dropdown" class="btn dropdown-toggle btn-demo-space"> <span class="anim150">Class</span> <span class="caret"></span> </a>\n				<ul class="dropdown-menu">\n					<li class="active" data-filter="all" data-dimension="region"><a href="#">All</a></li>\n					{{#classes}}\n					<li class="" data-dimension="region" data-filter="{{slug}}"><a href="javascript://">{{label}}</a></li>\n					{{/classes}}\n				</ul>\n			</div>\n	</div>\n		<div class="clearfix"></div>\n\n		<div class="just list" id="textbooks">\n			<!-- "TABLE" HEADER CONTAINING SORT BUTTONS (HIDDEN IN GRID MODE)-->\n			<div class="list_header">\n				<div id="SortByName" class="meta name active desc"> Name &nbsp; <span data-order="desc" data-sort="data-name" class="sort anim150 asc active"></span> <span data-order="asc" data-sort="data-name" class="sort anim150 desc"></span> </div>\n				<div class="meta class">Class</div>\n				<div class="meta area">Chapters</div>\n				<div class="meta area">Questions</div>\n			</div>\n			<div class="fail_element anim250">Sorry &mdash; we could not find any Textbooks matching matching these criteria</div>\n			<!-- BEGIN LIST OF textbooks (MANY OF THESE ELEMENTS ARE VISIBLE ONLY IN LIST MODE)-->\n			<ul class="textbooks_list">\n			</ul>\n	</div>\n'}),define("text!apps/textbooks/list/templates/list_item.html",[],function(){return'  <div class="meta name">\n    <div class="img_wrapper"> {{&thumbnail}}</div>\n    <div class="titles">\n      <h3 class="normal"><a class="textbook_titles" data-id="{{term_id}}" href="#textbook/{{term_id}}">{{&name}}</a></h3>\n      <p class="small-text">{{author}}</p>\n    </div>\n  </div>\n\n  <div class="meta class">\n    <p>{{class_string}}</p>\n  </div>\n\n  <div class="meta area">\n    {{chapter_count}}\n  </div>\n\n  <div class="meta area">\n    <p>{{questions_count}}</p>\n  </div>\n\n  <div class="clearfix"></div>\n'}),define("text!apps/textbooks/templates/no_textbooks.html",[],function(){return'<div class="fail_element anim250">Sorry &mdash; we could not find any Textbooks matching matching these criteria</div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("apps/textbooks/list/views",["app","text!apps/textbooks/templates/textbooks-list.html","text!apps/textbooks/list/templates/list_item.html","text!apps/textbooks/templates/no_textbooks.html"],function(t,e,i,n){return t.module("TextbooksApp.List.Views",function(t,o){var s,r;return r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="li",e.prototype.className="mix mix_all",e.prototype.template=i,e.prototype.onShow=function(){var t,e,i,n,o,s,r,a;if(this.$el.attr("data-name",this.model.get("name")),e=this.model.get("classes"))for(i=0,o=e.length;o>i;i++)t=e[i],this.$el.addClass(_.slugify(CLASS_LABEL[t]));if(a=this.model.get("subjects"))for(n=0,s=a.length;s>n;n++)r=a[n],this.$el.addClass(r);return $("#textbooks").mixitup({layoutMode:"list",listClass:"list",gridClass:"grid",effects:["fade","blur"],listEffects:["fade","rotateX"]})},e.prototype.serializeData=function(){var t,i,n,o,s,r,a;if(o=e.__super__.serializeData.call(this),i=this.model.get("classes")){for(r=_.sortBy(i,function(t){return t}),n="",s=0,a=r.length;a>s;s++)t=r[s],n+=CLASS_LABEL[t],_.last(r)!==t&&(n+=", ");o.class_string=n}return o},e}(Marionette.ItemView),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e}(Marionette.ItemView),t.ListView=function(t){function i(){return this.filterBooks=bind(this.filterBooks,this),i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="",i.prototype.itemView=r,i.prototype.emptyView=s,i.prototype.itemViewContainer="ul.textbooks_list",i.prototype.serializeData=function(){var t,e,n,o;return n=i.__super__.serializeData.call(this),console.log(this.collection),t=this.collection.pluck("classes"),n.classes=_.chain(t).flatten().union().compact().sortBy(function(t){return parseInt(t)}).map(function(t){var e;return e=[],e.slug=_.slugify(CLASS_LABEL[t]),e.label=CLASS_LABEL[t],e}).value(),e=this.collection.pluck("subjects"),o=_.union(_.flatten(e)),n.subjects=_.compact(_.sortBy(o,function(t){return t})),n},i.prototype.events={"click #Filters li":"filterBooks"},i.prototype.sortTable=function(t){var e,i,n;return i={},e=$(t.target).attr("data-sort"),n=e.split("-"),i.orderby=n[1],i.order=$(t.target).attr("data-order"),this.trigger("sort:textbooks",i)},i.prototype.onShow=function(){return console.log("onShow"),this.dimensions={region:"all",recreation:"all"}},i.prototype.filterBooks=function(t){var e,i,n,o,s;return console.log("@dimensions"),console.log(this.dimensions),e=$(t.target).closest("li"),i=e.attr("data-dimension"),n=e.attr("data-filter"),o=this.dimensions[i],"all"===n?e.hasClass("active")?(e.removeClass("active"),o=""):(e.addClass("active").siblings().removeClass("active"),o="all"):(e.siblings('[data-filter="all"]').removeClass("active"),o=o.replace("all",""),e.hasClass("active")?(e.removeClass("active"),s=new RegExp("(\\s|^)"+n),o=o.replace(s,"")):(e.addClass("active"),o=""===o?n:o+" "+n)),this.dimensions[i]=o,console.info("dimension 1: "+this.dimensions.region),console.info("dimension 2: "+this.dimensions.recreation),$("#textbooks").mixitup("filter",[this.dimensions.region,this.dimensions.recreation])},i}(Marionette.CompositeView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/textbooks/list/listcontroller",["app","controllers/region-controller","apps/textbooks/list/views"],function(t,e){return t.module("TextbooksApp.List",function(t,i){return t.ListController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(){var t,e,n;return e=i.request("get:textbooks",{fetch_all:!0}),t={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript://"},{label:"Textbooks",link:"javascript://",active:"active"}]},i.execute("update:breadcrumb:model",t),this.view=n=this._getTextbooksView(e),this.show(n,{loading:!0})},n.prototype._getTextbooksView=function(e){return new t.Views.ListView({collection:e})},n}(e)})}),define("text!apps/textbooks/textbook-single/templates/textbook-full.html",[],function(){return'<div class="col-md-5">\n	<div id="textbook-description-region"></div>	\n</div>\n<div class="col-md-7">\n	<div id="chapters-list-region" class="listBox"></div>\n</div>'}),define("text!apps/textbooks/textbook-single/templates/textbook-description.html",[],function(){return'<!-- BEGIN PAGE TITLE -->\n<div class="page-title"><!--<i class="icon-custom-left"></i>-->\n	<h3>Textbook<span class="semi-bold"> {{&name}}</span></h3>		\n</div>\n<!-- END PAGE TITLE -->\n<div class="tiles cover-pic-wrapper">						\n	<div class="overlayer bottom-right"></div>\n{{&cover_pic}}\n</div>\n<div class="tiles white">\n\n	<div class="row">\n		<div class="col-md-4 col-sm-4" >\n			<div class="user-mini-description">\n				<h3 class="text-success semi-bold">\n					{{chapter_count}}\n				</h3>\n				<h5>Chapters</h5>\n				<h3 class="text-success semi-bold">\n					{{questions_count}}\n				</h3>\n				<h5>Questions</h5>\n			</div>\n		</div>\n		<div class="col-md-7 user-description-box  col-sm-7">\n			<h4 class="semi-bold no-margin">{{&name}}</h4>\n			<h6 class="no-margin">By {{author}}</h6>\n			<p>{{&description}}</p>\n		</div>\n		<!--<div class="col-md-3  col-sm-3">\n			<h5 class="normal">Chapters ( <span class="text-success">{{chapter_count}}</span> )</h5>\n			<h5 class="normal">Questions ( <span class="text-success">{{count}}</span> )</h5>\n			\n			<div class="clearfix"></div>\n		</div>	-->			\n	</div>\n\n</div>'}),define("text!apps/textbooks/textbook-single/templates/chapters-list.html",[],function(){return'<div class="grid-title">\n  <h4>List of <span class="semi-bold">Chapters</span></h4>\n  <!--<div class="tools">   <a href="javascript:;" class="reload"></a> </div>-->\n</div>\n<div class="grid-body ">\n  <table class="table table-striped" id="example2" >\n	<thead>\n	  <tr>\n		<th>Name</th>\n		<th class="text-center">Sections</th>\n		<th class="text-center">Teaching Modules</th>\n		<th class="text-center">Quizzes</th>\n	  </tr>\n	</thead>\n	\n  <tbody id="list-chapters" aria-relevant="all" aria-live="polite" role="alert" data-link="row" class="rowlink">\n\n\n  </tbody>\n</table>\n<div id="pager" class="pager">\n	<!--<i class="fa fa-chevron-left first"></i>-->\n    <i class="fa fa-chevron-left prev"></i>\n    <span style="padding:0 15px"  class="pagedisplay"></span> <!-- this can be any element, including an input -->\n    <i class="fa fa-chevron-right next"></i>\n    <!--<img src="last.png" class="last"/>-->\n	<select class="pagesize">\n		  <option selected="selected" value="5">5</option>\n		  <option value="10">10</option>\n		  <option value="20">20</option>\n		  <option value="30">30</option>\n		  <option value="40">40</option>\n		</select>\n  </div>'});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/textbooks/textbook-single/single_views",["app","text!apps/textbooks/textbook-single/templates/textbook-full.html","text!apps/textbooks/textbook-single/templates/textbook-description.html","text!apps/textbooks/textbook-single/templates/chapters-list.html"],function(t,e,i,n){return t.module("TextbooksApp.Single.Views",function(t,n){return t.TextbookDescriptionView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.className="",e.prototype.onShow=function(){return console.log("Show Model"),console.log(this.model)},e}(Marionette.ItemView),t.TextbookSingleLayout=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="row",i.prototype.regions={textbookDescriptionRegion:"#textbook-description-region",chaptersRegion:"#chapters-list-region"},i}(Marionette.Layout)})}),define("text!apps/textbooks/textbook-single/templates/chapter-list-item.html",[],function(){return'<td><a href="#section">{{name}}</a></td>\n<td class="text-center">{{chapter_count}}</td>\n<td class="text-center">{{teaching_modules}}</td>\n<td>\n	Class Tests: {{class_test_count}}<br>\n	Practice Quizzes: {{practice_count}}<br>\n	Take at Home Quizzes: {{take_at_home_count}}\n</td>'}),define("text!apps/textbooks/textbook-single/templates/no-chapters.html",[],function(){return"<td colspan=7>Sorry &mdash; no Chapters found</td>"});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/textbooks/textbook-single/chapters-list",["app","text!apps/textbooks/textbook-single/templates/chapters-list.html","text!apps/textbooks/textbook-single/templates/chapter-list-item.html","text!apps/textbooks/textbook-single/templates/no-chapters.html"],function(t,e,i,n){return t.module("TextbooksApp.Single.Views",function(t,o){var s,r;return s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="tr",e.prototype.className="gradeX odd",e.prototype.template=i,e}(Marionette.ItemView),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=n,e.prototype.className="gradeX odd",e}(Marionette.ItemView),t.ChapterListView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="grid simple ",i.prototype.itemView=s,i.prototype.emptyView=r,i.prototype.itemViewContainer="#list-chapters",i.prototype.onShow=function(){return $("#example2").tablesorter(),$("#example2").tablesorterPager({container:$("#pager")}),$("html, body").animate({scrollTop:0},700),console.log("collection"),console.log(this.collection)},i}(Marionette.CompositeView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/textbooks/textbook-single/textbookcontroller",["app","controllers/region-controller","apps/textbooks/textbook-single/single_views","apps/textbooks/textbook-single/chapters-list"],function(t,e){return t.module("TextbooksApp.Single",function(t,i){return t.SingleTextbook=function(e){function n(){return this._showChaptersView=bind(this._showChaptersView,this),this._showTextBookSingle=bind(this._showTextBookSingle,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,n;return n=t.model_id,this.textbook=i.request("get:textbook:by:id",n),this.chapters=i.request("get:chapters",{parent:n}),this.layout=e=this._getTextbookSingleLayout(),this.listenTo(e,"show",this._showTextBookSingle),this.listenTo(e,"show",this._showChaptersView),this.show(e)},n.prototype._showTextBookSingle=function(){return i.execute("when:fetched",this.textbook,function(e){return function(){var n,o;return n={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"Textbooks",link:"#textbooks"},{label:e.textbook.get("name"),link:"javascript:;",active:"active"}]},i.execute("update:breadcrumb:model",n),o=new t.Views.TextbookDescriptionView({model:e.textbook}),e.layout.textbookDescriptionRegion.show(o)}}(this))},n.prototype._getTextbookSingleLayout=function(){return new t.Views.TextbookSingleLayout},n.prototype._showChaptersView=function(){return i.execute("when:fetched",this.chapters,function(e){return function(){var i;return i=new t.Views.ChapterListView({collection:e.chapters}),e.layout.chaptersRegion.show(i)}}(this))},n}(e)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/textbooks/app",["app","apps/textbooks/list/listcontroller","apps/textbooks/textbook-single/textbookcontroller"],function(t){return t.module("TextbooksApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={textbooks:"showTextbooks","textbook/:term_id":"showSingleTextbook"},e}(Marionette.AppRouter),i={showTextbooks:function(){return $.allowRoute("textbooks")?new t.List.ListController({region:e.mainContentRegion}):void 0},showSingleTextbook:function(i){return $.allowRoute("textbooks")?new t.Single.SingleTextbook({region:e.mainContentRegion,model_id:i}):void 0}},t.on("start",function(){return new n({controller:i})})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/module-edit-views",["app"],function(t){return t.module("ContentModulesApp.Edit.Views",function(t,e){var i;return t.ContentGroupEditLayout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="teacher-app" id="teacher-app"> <div id="collection-details-region"></div> <div id="content-selection-region"></div> </div> <div id="content-display-region"></div>',e.prototype.className="",e.prototype.regions={collectionDetailsRegion:"#collection-details-region",contentSelectionRegion:"#content-selection-region",contentDisplayRegion:"#content-display-region"},e}(Marionette.Layout),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="teacher-app"> <div id="collection-details-region"> <div class="tiles white grid simple vertical green animated fadeIn"> <div class="grid-title no-border"> <h3>This module is not editable</h3> <p>Current Status: {{currentStatus}}</p> </div> </div> </div> </div>',e.prototype.mixinTemplateHelpers=function(t){var e;switch(e=Marionette.getOption(this,"status")){case"publish":t.currentStatus="Published";break;case"archive":t.currentStatus="Archived";break;default:t.currentStatus="Not specified!"}return t},e}(Marionette.ItemView)})}),define("text!apps/edit-module/module-description/templates/collection-details.html",[],function(){return'<form name="content-collection-form" id="content-collection-form">\n	<div class="grid-title"><h3 class="m-t-0">{{heading}} <span class="semi-bold">{{type}}</span>\n        {{#isQuiz}}<br>\n        <small>Pick individual or add a set of student questions for students to take in the quiz</small>\n        {{/isQuiz}}\n    </h3>\n	</div>\n\n    {{#isModule}}\n	<div class="grid-body" style="overflow: hidden; display: block;">\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<input id="group_name" class="input-lg" name="name" value="{{name}}" placeholder="Module Name" type="text" required="required" />\n			</div>\n		</div>\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<label class="form-label">Objective<span class="text-error">*</span></label>\n				<textarea id="objective" name="description[objective]" required="required" class="form-control" placeholder="Enter Objective">{{description.objective}}</textarea>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Description</label>\n				<textarea id="description" name="description[description]" rows="4" class="form-control" placeholder="Enter Description">{{description.description}}</textarea>\n			</div>\n		</div>\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<label class="form-label">Physical Requirements</label>\n				<textarea name="description[physical_requirements]" class="form-control" placeholder="Enter Physical Requirements">{{description.physical_requirements}}</textarea>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Electronic Requirements</label>\n				<textarea id="electronic_requirements" name="description[electionic_requirements]" class="form-control" placeholder="Enter Electronic Requirements">{{description.electionic_requirements}}</textarea>\n			</div>										 \n		</div>\n		<div class="row m-b-10">\n			<div class="col-md-6">\n				<label required="required" class="form-label">Textbook<span class="text-error">*</span></label>\n				<select name="term_ids[textbook]" id="textbooks" class="form-control select2" >\n					<option value="">--select textbook--</option>\n	                {{#textbooksFilter}}\n	                	<option value="{{id}}" {{textBookSelected}}>{{name}}</option>\n	                {{/textbooksFilter}}\n	            </select>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Chapter<span class="text-error">*</span> <span class="muted small pull-right"> Select a Textbook first</span></label>\n				<select name="term_ids[chapter]" id="chapters" class="form-control select2" >\n					<option value="">--select chapters--</option>\n	            </select>\n			</div>											 \n		</div>\n		<div class="row m-b-10">\n            <div class="col-md-6">\n                <label class="form-label">Section <span class="muted small pull-right"> Select a Chapter first</span></label>\n                <select name="term_ids[sections][]" id="secs" class="form-control select2" multiple="">\n                </select>\n			</div>\n			<div class="col-md-6">\n				<label class="form-label">Sub-Sections <span class="muted small pull-right"> Select a Chapter first</span></label>\n				<select name="term_ids[subsections][]" id="subsecs" class="form-control select2" multiple="">\n	            </select>\n			</div>											 \n		</div>\n        <div class="row">\n            <div class="col-sm-6">\n                <label class="form-label">Status</label>\n                <select required name="post_status" id="status" class="form-control" >\n                    <option value="underreview">Under Review</option>\n                    <option value="publish">Published</option>\n                    <option value="archive">Archived</option>\n                </select>\n            </div>\n			<div class="col-md-6">\n				<label class="form-label">Duration<span class="text-error">*</span></label>\n		    	<input id="duration" name="duration" value="{{duration}}" class="pull-left" placeholder="Enter Duration" type="text" min="1" /> &nbsp; mins\n		    	<!-- <select style="width:120px; margin-left:10px" name="minshours" id="minshours" class="form-control select2 pull-left">\n		    		<option value="mins" selected="selected">mins</option>\n		    		<option value="hrs">hour(s)</option>\n	            </select> -->\n			</div>\n        </div>\n        {{/isModule}}\n\n\n        {{#isQuiz}}\n        <div class="grid-body" style="overflow: hidden; display: block;">\n        <div class="row m-b-10">\n            <div class="col-md-6">\n                <input name="name" type="text" class="input-lg" placeholder="Quiz Name" required="required">\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-6">\n                <label class="form-label">Quiz Type</label>\n                <select name="quiz_type" id="qType" class="form-control">\n                    <option value="practice">Practice</option>\n                    <option value="test">Take at Home</option>\n                    <option value="class_test">Class Test</option>\n                </select>\n            </div>\n            <div class="col-md-6">\n                <label class="form-label">Status</label>\n                <select name="post_status" id="status" class="form-control">\n                    <option value="underreview">Under Review</option>\n                    <option value="publish">Published</option>\n                    <option value="archive">Archived</option>\n                </select>\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-6">\n                <label required="required" class="form-label">Textbook<span class="text-error">*</span></label>\n                <select name="term_ids[textbook]" id="textbooks" class="form-control select2" >\n                    <option value="">--select textbook--</option>\n                    {{#textbooksFilter}}\n                    <option value="{{id}}" {{textBookSelected}} >{{name}}</option>\n                    {{/textbooksFilter}}\n                </select>\n            </div>\n            <div class="col-md-6">\n                <label class="form-label">Chapter<span class="text-error">*</span> <span class="muted small pull-right"> Select a Textbook first</span></label>\n                <select name="term_ids[chapter]" id="chapters" class="form-control select2" >\n                    <option value="">--select chapters--</option>\n                </select>\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-6">\n                <label class="form-label">Section <span class="muted small pull-right"> Select a Chapter first</span></label>\n                <select name="term_ids[sections][]" id="secs" class="form-control select2" multiple="">\n                </select>\n            </div>\n            <div class="col-md-6">\n                <label class="form-label">Sub-Sections <span class="muted small pull-right"> Select a Chapter first</span></label>\n                <select name="term_ids[subsections][]" id="subsecs" class="form-control select2" multiple="">\n                </select>\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-6">\n                <label class="form-label">Marks</label>\n                <input id="total-marks-final" name="marks" class="pull-left" placeholder="Enter Marks" type="text"  />\n            </div>\n            <div class="col-md-6">\n                <label class="form-label">Total Marks</label>\n                <input id="total-marks" class="disabled" placeholder="0" type="text" disabled="disabled">\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-6">\n                <label class="form-label">Duration</label>\n                <input id="total-time-marks-set" type="hidden" value="0"/>\n                <input id="total-time-final" name="duration" class="pull-left" placeholder="Enter Duration" type="text"/> &nbsp;{{minshours}}\n                <div class="clearfix"></div>\n            </div>\n            <div class="col-md-6">\n                <label class="form-label">Total Time </label>\n                <input id="total-time"  class="disabled" placeholder="0" type="text" disabled="disabled">\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-6">\n                <label class="form-label">Negative Marks</label>\n                <div class="radio radio-info inline">\n                    <input id="yes" type="radio" name="negMarksEnable" value="true" checked="checked">\n                    <label for="yes">Yes</label>\n                    <input id="no" type="radio" name="negMarksEnable" value="false">\n                    <label for="no">No</label>\n                </div>\n                <div id="negPercent" class="input-with-icon right inline">\n                    <input id="" name="negMarks" class="inline" placeholder="Set Negative marks" type="text" /> %\n                </div>\n            </div>\n            \n            <div class="col-md-6">\n                <label class="form-label">Total No. of Questions</label>\n                <input id="total-question-number"  class="disabled" placeholder="0" type="text" disabled="disabled">\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-12">\n                <label class="form-label">Quiz Instructions</label>\n                <input id="" name="description[instruction]" class="w100" placeholder="Enter Quiz instructions here" type="text">\n            </div>\n        </div>\n        <div class="row m-b-10">\n            <div class="col-md-12">\n                <div data-toggle="collapse" id="accordion" class="panel-group">\n                    <div class="panel panel-default">\n                        <div class="panel-heading">\n                            <h4 class="panel-title">\n                                <a href="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="collapsed"> &nbsp;\n                                    Permissions\n                                </a>\n                            </h4>\n                        </div>\n                        <div class="panel-collapse collapse" id="collapseOne">\n                            <div class="panel-body">\n                                <div class="row">\n                                    <div class="col-sm-3"><label>General: </label> </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-sm-3">\n                                        <div class="checkbox check-info checkbox-circle perm">\n                                            <input name="permissions[allow_hint]" id="hint" type="checkbox" value="1">\n                                            <label for="hint">Allow Hint</label>\n                                        </div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="checkbox check-info checkbox-circle perm">\n                                            <input name="permissions[randomize]" id="random" type="checkbox" {{defaultRandomize}} value="1">\n                                            <label for="random">Randomize Order</label>\n                                        </div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="checkbox check-info checkbox-circle perm">\n                                            <input name="permissions[disable_quiz_replay]" id="marks" type="checkbox" value="1">\n                                            <label for="marks">Disable Quiz Replay</label>\n                                        </div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="checkbox check-info checkbox-circle perm">\n                                            <input name="permissions[single_attempt]" id="attempt" type="checkbox" value="1">\n                                            <label for="attempt">Allow Skip</label>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="row">\n                                    <div class="col-sm-3"><label>Show answer: </label> </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-sm-3">\n                                        <div class="checkbox check-info checkbox-circle perm radioCheck">\n                                            <input name="permissions[allow_resubmit]" id="resubmit" type="checkbox" value="1">\n                                            <label for="resubmit">Allow Resubmit</label>\n                                        </div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="checkbox check-info checkbox-circle perm radioCheck">\n                                            <input name="permissions[display_answer]" id="answer" type="checkbox" value="1" checked>\n                                            <label for="answer">Display Answer</label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="panel panel-default" id="customMsg">\n                        <div class="panel-heading">\n                            <h4 class="panel-title">\n                                <a href="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="collapsed"> &nbsp;\n                                    Custom Messages\n                                </a>\n                            </h4>\n                        </div>\n                        <div class="panel-collapse collapse" id="collapseTwo">\n                            <div class="panel-body">\n                                <div class="row">\n                                    <div class="col-sm-3">\n                                        <div class="small-text customMsgLink" data-slug="end_quiz">\n                                            <a  data-toggle="modal">End Quiz Popup</a></div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="small-text customMsgLink" data-slug="correct_answer">\n                                            <a  data-toggle="modal">Correct answer</a></div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="small-text customMsgLink" data-slug="incorrect_answer">\n                                            <a  data-toggle="modal">Incorrect answer</a>\n                                        </div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="small-text customMsgLink" data-slug="partial_correct_answers">\n                                            <a  data-toggle="modal">Partial correct answers</a>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="row m-t-15">\n                                    <div class="col-sm-3">\n                                        <div class="small-text customMsgLink" data-slug="incomplete_answer">\n                                            <a data-toggle="modal">Incomplete answer</a>\n                                        </div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <div class="small-text customMsgLink" data-slug="submit_without_attempting">\n                                            <a href="#msgModal" data-toggle="modal">Submit without attempting</a>\n                                        </div>\n                                    </div>\n                                    <div class="col-sm-3">\n                                    </div>\n                                    <div class="col-sm-3">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        {{/isQuiz}}\n\n\n        <div class="row">\n        	<div class="col-sm-12">\n        		<button type="submit" class="btn btn-success btn-cons2 right pull-right m-t-10" id="save-content-collection"> \n                <i class="fa fa-check"></i> \n                Save</button>\n        	</div>\n        </div>\n	</div>\n</form>';
});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/module-description/module-description-views",["app","text!apps/edit-module/module-description/templates/collection-details.html"],function(t,e){return t.module("EditCollecionDetailsApp.Views",function(t,i){return t.CollectionDetailsView=function(t){function i(){return this.permissionSelected=bind(this.permissionSelected,this),i.__super__.constructor.apply(this,arguments)}return extend(i,t),i.prototype.template=e,i.prototype.className="grid simple vertical green animated fadeIn",i.prototype.events={"change #textbooks":function(t){return this.trigger("fetch:chapters",$(t.target).val())},"change #chapters":function(t){return this.trigger("fetch:sections",$(t.target).val())},"change #secs":function(t){return this.trigger("fetch:subsections",$(t.target).val())},"click #save-content-collection":"save_content","click .customMsgLink":"_openCustomMsgPopup",'change input[name="negMarksEnable"]':function(t){return t.stopPropagation(),this._toggleNegativeMarks($(t.target))},"change #msgs":function(t){return this._showCustomMessages($(t.target))},"click .checkbox.perm":"permissionSelected"},i.prototype.modelEvents={"change:post_status":"statusChanged","change:content_layout":"_changeLayout"},i.prototype.mixinTemplateHelpers=function(t){return t=i.__super__.mixinTemplateHelpers.call(this,t),t.heading=this.model.isNew()?"Create a":"Edit a","teaching-module"===t.type&&(t.isModule=!0),"quiz"===t.type&&(t.isQuiz=!0),t.type=_.titleize(_.humanize(t.type)),t.isQuiz&&t.permissions&&(t.permissions.single_attempt=!t.permissions.single_attempt),t.textBookSelected=function(){return parseInt(this.id)===parseInt(t.term_ids.textbook)?"selected":void 0},t.defaultRandomize=function(e){return function(){return t.isQuiz&&e.model.isNew()?'checked="checked"':void 0}}(this),t},i.prototype.permissionSelected=function(t){var e;switch(e=$(t.target).closest(".checkbox.perm").find("input").attr("id")){case"resubmit":return this.unSelectCheckbox("answer");case"answer":return this.unSelectCheckbox("resubmit")}},i.prototype.unSelectCheckbox=function(t){return this.$el.find("input#"+t).attr("checked",!1)},i.prototype.onShow=function(){return Backbone.Syphon.deserialize(this,this.model.toJSON()),"quiz"===this.model.get("type")&&this.$el.find("#qType").val(this.model.get("quiz_type")),"quiz"===this.model.get("type")&&this._toggleNegativeMarks(this.$el.find('input[name="negMarksEnable"]:checked')),this.$el.find("select:not(#qType,#status)").select2(),this.$el.find("#secs,#subsecs").val([]).select2(),this.model.isNew()&&(this.$el.find('select#status option[value="publish"]').prop("disabled",!0),this.$el.find('select#status option[value="archive"]').prop("disabled",!0)),this.statusChanged(),"quiz"===this.model.get("type")?this._changeLayout():void 0},i.prototype.statusChanged=function(){var t;return"publish"===(t=this.model.get("post_status"))||"archive"===t?(this.$el.find("input, textarea, select").prop("disabled",!0),this.$el.find("select#status").prop("disabled",!1),this.$el.find('select#status option[value="underreview"]').prop("disabled",!0)):void 0},i.prototype.onFetchChaptersComplete=function(t){var e,i,n;return this.$el.find("#chapters, #secs, #subsecs").select2("data",null),this.$el.find("#chapters, #secs, #subsecs").html(""),e=this.$el.find("#chapters"),n=this.model.get("term_ids"),i=n.chapter,$.populateChaptersOrSections(t,e,i)},i.prototype.setChapterValue=function(){return this.model.get("term_ids").chapter?(this.$el.find("#chapters").val(this.model.get("term_ids").chapter),this.$el.find("#chapters").select2(),this.$el.find("#chapters").trigger("change")):void 0},i.prototype.onFetchSectionsComplete=function(t){var e,i,n;return this.$el.find("#secs, #subsecs").select2("data",null),this.$el.find("#secs, #subsecs").html(""),n=this.model.get("term_ids"),null!=n&&(e=n.sections),i=this.$el.find("#secs"),$.populateChaptersOrSections(t,i,e)},i.prototype.onFetchSubsectionsComplete=function(t){var e,i,n;return this.$el.find("#subsecs").select2("data",null),this.$el.find("#subsecs").html(""),n=this.model.get("term_ids"),null!=n&&(e=n.subsections),i=this.$el.find("#subsecs"),$.populateChaptersOrSections(t,i,e)},i.prototype.markSelected=function(t,e){return this.model.isNew()?"":$("#"+t).val(this.model.get("term_ids")[e]).select2()},i.prototype.save_content=function(t){var e,i,n;if(this.$el.find("#saved-success").remove(),t.preventDefault(),$("#s2id_textbooks .select2-choice,#s2id_chapters .select2-choice").removeClass("error"),i=!0,_.isEmpty(this.$el.find("#textbooks").val())&&($("#s2id_textbooks .select2-choice").addClass("error"),i=!1),_.isEmpty(this.$el.find("#chapters").val())&&($("#s2id_chapters .select2-choice").addClass("error"),i=!1),this.$el.find("form").valid()&&i){if(this.$el.find("#save-content-collection i").addClass("fa-spin fa-spinner"),e=Backbone.Syphon.serialize(this),"quiz"===this.model.get("type")&&(n=e.permissions.single_attempt,e.permissions.single_attempt=!n,"true"===e.negMarksEnable&&""===e.negMarks&&"quiz"===this.model.get("type")&&(e.negMarks=0)),"publish"===e.post_status){if("quiz"===this.model.get("type")&&_.isEmpty(this.model.get("content_layout")))return this._cannotPublish(),!1;if("teaching-module"===this.model.get("type")&&_.isEmpty(this.model.get("content_pieces")))return this._cannotPublish(),!1}return this.trigger("save:content:collection:details",e)}},i.prototype._cannotPublish=function(){var t,e;return t="quiz"===this.model.get("type")?"questions":"Content Pieces",e=_.titleize(_.humanize(this.model.get("type"))),this.$el.find(".grid-title").prepend('<div id="saved-success" class="text-error"> Cannot Publish '+e+". No "+t+" Added. </div>"),$("html, body").animate({scrollTop:0},700),this.$el.find("#save-content-collection i").removeClass("fa-spin fa-spinner")},i.prototype._toggleNegativeMarks=function(t){return"true"===$(t).val()?this.$el.find("#negPercent").removeClass("none").addClass("inline"):this.$el.find("#negPercent").addClass("none").removeClass("inline")},i.prototype._openCustomMsgPopup=function(t){return t.stopPropagation(),this.trigger("show:custom:msg:popup",{slug:$(t.target).closest(".customMsgLink").attr("data-slug")})},i.prototype._changeLayout=function(){var t,e,i,n;return t=Marionette.getOption(this,"contentGroupCollection"),n=0,_.each(this.model.get("content_layout"),function(t){return function(t){return"content-piece"===t.type?n+=1:(n+=parseInt(t.data.lvl1),n+=parseInt(t.data.lvl2),n+=parseInt(t.data.lvl3))}}(this)),this.$el.find("#total-question-number").val(n),e=0,i=0,t.each(function(t){if("content_set"===t.get("post_type")){if(t.get("avg_marks")&&(e+=parseInt(t.get("avg_marks"))),t.get("avg_duration"))return i+=parseInt(t.get("avg_duration"))}else if(t.get("marks")&&(e+=parseInt(t.get("marks"))),t.get("duration"))return i+=parseInt(t.get("duration"))}),this.$el.find("#total-marks").val(e),0===$("#total-time-marks-set").val()?$("#total-time-marks-set").val(1):(this.$el.find("#total-marks-final").val(e),this.$el.find("#total-time-final").val(i)),this.$el.find("#total-time").val(i)},i.prototype.onSavedContentGroup=function(t){var e,i,n;return this.$el.find("#saved-success").remove(),this.$el.find("select#status option").prop("disabled",!1),("publish"===(n=this.model.get("post_status"))||"archive"===n)&&this.$el.find('select#status option[value="underreview"]').prop("disabled",!0),this.$el.find("#save-content-collection i").removeClass("fa-spin fa-spinner").addClass("fa-check"),e=t.changedAttributes(),i=e.id?"saved":"updated","teaching-module"===t.get("type")&&this.$el.find(".grid-title").prepend('<div id="saved-success">Training module '+i+'. Click here to <a href="#view-group/'+t.get("id")+'">view module</a><hr></div>'),"quiz"===t.get("type")&&this.$el.find(".grid-title").prepend('<div id="saved-success">Quiz '+i+'. Click here to <a href="#view-quiz/'+t.get("id")+'">view the Quiz</a><hr></div>'),$("html, body").animate({scrollTop:0},700)},i}(Marionette.ItemView)})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/module-description/module-description-controller",["app","controllers/region-controller","apps/edit-module/module-description/module-description-views"],function(t,e){return t.module("EditCollecionDetailsApp",function(t,i){return t.Controller=function(e){function n(){return this._fetchSubsections=bind(this._fetchSubsections,this),this._fetchSections=bind(this._fetchSections,this),this._fetchChapters=bind(this._fetchChapters,this),this.successFn=bind(this.successFn,this),this.showView=bind(this.showView,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.model=t.model,this.contentGroupCollection=t.contentGroupCollection,this.textbooksCollection=i.request("get:textbooks",{fetch_all:!0}),i.execute("when:fetched",[this.textbooksCollection],this.showView)},n.prototype.showView=function(){var t,e;return this.view=e=this._getCollectionDetailsView(this.model),"quiz"===this.model.get("type")&&((null==this.model.get("message")||""===this.model.get("message"))&&this.model.set("message",{}),this.message=this.model.get("message"),this.listenTo(this.view,"show:custom:msg:popup",function(t){return function(e){var n;return n=e.slug,null==t.message[n]&&(t.message[n]=""),i.execute("show:single:edit:popup",{title:n,textArray:t.message})}}(this))),t=this.model.get("term_ids"),this.listenTo(this.view,"show",function(e){return function(){var i,n,o,s;return _.size(t)>0?(s=t.textbook,null!=t.chapter&&(i=t.chapter),null!=t.sections&&(o=_.flatten(t.sections)),n=e._fetchChapters(s,i),n.done(function(){return null!=i&&e._fetchSections(i),null!=o?e._fetchSubsections(o):void 0})):void 0}}(this)),this.listenTo(this.view,"fetch:chapters",this._fetchChapters),this.listenTo(this.view,"fetch:sections",this._fetchSections),this.listenTo(this.view,"fetch:subsections",this._fetchSubsections),this.listenTo(this.view,"save:content:collection:details",function(t){return function(e){return t.model.set({changed:"module_details"}),t.model.save(e,{wait:!0,success:t.successFn,error:t.errorFn}),"underreview"!==e.post_status?t.region.trigger("close:content:selection:app"):void 0}}(this)),this.show(e,{loading:!0,entities:[this.textbooksCollection]})},n.prototype.successFn=function(t){return"teaching-module"===this.model.get("type")&&i.navigate("edit-module/"+t.get("id")),"quiz"===this.model.get("type")&&i.navigate("edit-quiz/"+t.get("id")),this.view.triggerMethod("saved:content:group",t)},n.prototype.errorFn=function(){return console.log("error")},n.prototype._fetchChapters=function(t,e){var n,o;return o=$.Deferred(),n=i.request("get:chapters",{parent:t}),i.execute("when:fetched",n,function(t){return function(){return t.view.triggerMethod("fetch:chapters:complete",n,e),o.resolve()}}(this)),o.promise()},n.prototype._fetchSections=function(t){return this.subSectionsList=null,this.allSectionsCollection=i.request("get:subsections:by:chapter:id",{child_of:t}),i.execute("when:fetched",this.allSectionsCollection,function(e){return function(){var i;return i=e.allSectionsCollection.where({parent:t}),e.subSectionsList=_.difference(e.allSectionsCollection.models,i),e.view.triggerMethod("fetch:sections:complete",i)}}(this))},n.prototype._fetchSubsections=function(t){return i.execute("when:fetched",this.allSectionsCollection,function(e){return function(){var i;return i=null,i=_.filter(e.subSectionsList,function(e){return _.contains(t,e.get("parent"))}),e.view.triggerMethod("fetch:subsections:complete",i)}}(this))},n.prototype._getCollectionDetailsView=function(e){return new t.Views.CollectionDetailsView({model:e,contentGroupCollection:this.contentGroupCollection,templateHelpers:{textbooksFilter:function(t){return function(){var e;return e=[],_.each(t.textbooksCollection.models,function(t,i){return e.push({name:t.get("name"),id:t.get("term_id")})}),e}}(this)}})},n}(e),i.commands.setHandler("show:editgroup:content:group:detailsapp",function(e){return null==e&&(e={}),new t.Controller(e)})})}),define("text!apps/edit-module/content-selection/templates/content-selection.html",[],function(){return'<div class="row" id="data-content-area">\n    <div class="col-lg-12">\n        <table class="table table-hover table-condensed table-fixed-layout table-bordered" id="dataContentTable">\n            <thead>\n            <tr>\n                <th style="width:4%"><div id="check_all_div" class="checkbox check-default" style="margin-right:auto;margin-left:auto;">\n                    <input id="check_all" type="checkbox">\n                    <label for="check_all"></label>\n                </div>\n                </th>\n                <th>Question</th>\n                {{#isModule}}\n                <th>Content Type</th>\n                <th>Present in module</th>\n                {{/isModule}}\n                {{#isQuiz}}\n                <th>Level</th>\n                <th>Marks</th>\n                <th>Time</th>\n                <th>Present in Quiz</th>\n                {{/isQuiz}}\n                <th>Last Modified</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n\n        <div id="pager" class="pager">\n            <i class="fa fa-chevron-left prev"></i>\n            <span style="padding:0 15px"  class="pagedisplay"></span>\n            <i class="fa fa-chevron-right next"></i>\n            <select class="pagesize">\n                <option selected value="10">10</option>\n                <option value="20">20</option>\n                <option value="30">30</option>\n                <option value="40">40</option>\n                <option value="50">50</option>\n            </select>\n        </div>\n    </div>\n    <button type="button" class="btn btn-success btn-cons2 right m-t-20" id="add-content-pieces"> <i class="fa fa-plus"></i> Add</button>\n</div>\n'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/content-selection/all-content-app",["app","controllers/region-controller","text!apps/edit-module/content-selection/templates/content-selection.html"],function(t,e,i){return t.module("ContentSelectionApp.AllContent",function(t,n,o,s,r,a){var l,c,u;return t.Controller=function(t){function e(){return this._getContentSelectionView=bind(this._getContentSelectionView,this),this.contentPieceRemoved=bind(this.contentPieceRemoved,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.contentPiecesCollection=t.contentPiecesCollection,this.contentGroupCollection=t.contentGroupCollection,this.groupType=t.groupType,this.view=e=this._getContentSelectionView(this.contentPiecesCollection),this.show(this.view,{loading:!0}),this.listenTo(this.region,"update:pager",function(t){return function(){return t.view.triggerMethod("update:pager")}}(this)),this.listenTo(this.view,"add:content:pieces",function(t){return function(e){return a.each(e,function(e,i){return t.contentGroupCollection.add(t.contentPiecesCollection.get(e)),t.contentPiecesCollection.remove(e)})}}(this)),this.listenTo(this.contentGroupCollection,"remove",this.contentPieceRemoved)},e.prototype.contentPieceRemoved=function(t){return"content-piece"===t.get("post_type")?(this.contentPiecesCollection.add(t),this.view.triggerMethod("content:piece:removed",t)):void 0},e.prototype._getContentSelectionView=function(t){return new c({collection:t,fullCollection:t.clone(),groupType:this.groupType})},e}(e),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<td class="v-align-middle"><div class="checkbox check-default"> <input class="tab_checkbox" type="checkbox" value="{{ID}}" id="checkbox{{ID}}"> <label for="checkbox{{ID}}"></label> </div> </td> <td class="cpHeight">{{&post_excerpt}}</td> {{#isModule}} <td>{{content_type_str}}</td> {{/isModule}} {{#isQuiz}} <td>{{difficulty_level}}</td> <td>{{marks}}</td> <td>{{duration}} mins</td> {{/isQuiz}} <td class="cpHeight"> {{&present_in_str}} </td> <td><span style="display:none">{{sort_date}} </span> {{modified_date}}</td>',e.prototype.tagName="tr",e.prototype.serializeData=function(){var t,i,n,o;return t=e.__super__.serializeData.call(this),"quiz"===this.groupType&&(t.isQuiz=!0),("teaching-module"===(n=this.groupType)||"student-training"===n)&&(t.isModule=!0),"student-training"===this.groupType&&(t.isStudentTraining=!0),t.modified_date=moment(t.post_modified).format("Do MMM YYYY"),t.sort_date=moment(t.post_modified).format("YYYYMMDD"),t.content_type_str=a(t.content_type).chain().humanize().titleize().value(),i=[],a.each(t.present_in_modules,function(e,n){var o;return o="student_question"===t.content_type?"view-quiz":"view-group",i.push("<a target='_blank' href='#"+o+"/"+e.id+"'>"+e.name+"</a>")}),o="student_question"===t.content_type?"quiz":"teaching-module","student_question"===t.content_type&&(t.marks=this.model.get("marks")),t.present_in_str=a.size(i)>0?a.toSentence(i):"Not added to a "+o+" yet",t},e.prototype.initialize=function(){return this.groupType=s.getOption(this,"groupType")},e}(s.ItemView),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="No Content Available",e.prototype.tagName="td",e.prototype.onShow=function(){return this.$el.attr("colspan",5)},e}(s.ItemView),c=function(t){function e(){return this.onContentPieceRemoved=bind(this.onContentPieceRemoved,this),this.addContentPieces=bind(this.addContentPieces,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.emptyView=u,e.prototype.itemView=l,e.prototype.itemViewContainer="#dataContentTable tbody",e.prototype.itemViewOptions=function(){return{groupType:s.getOption(this,"groupType")}},e.prototype.events={"change #check_all_div":"checkAll","click #add-content-pieces":"addContentPieces"},e.prototype.mixinTemplateHelpers=function(t){var i;return t=e.__super__.mixinTemplateHelpers.call(this,t),"quiz"===this.groupType&&(t.isQuiz=!0),("teaching-module"===(i=this.groupType)||"student-training"===i)&&(t.isModule=!0),t},e.prototype.initialize=function(){return this.groupType=s.getOption(this,"groupType")},e.prototype.onShow=function(){return this.$el.find("#dataContentTable").tablesorter(),this.fullCollection=s.getOption(this,"fullCollection")},e.prototype.checkAll=function(){return this.$el.find("#check_all").is(":checked")?this.$el.find("#dataContentTable .tab_checkbox").trigger("click").prop("checked",!0):this.$el.find("#dataContentTable .tab_checkbox").removeAttr("checked")},e.prototype.addContentPieces=function(){var t,e,i,n;if(t=a.pluck(this.$el.find("#dataContentTable .tab_checkbox:checked"),"value"))for(this.trigger("add:content:pieces",t),e=0,n=t.length;n>e;e++)i=t[e],this.fullCollection.remove(i);return this.onUpdatePager()},e.prototype.onContentPieceRemoved=function(t){return this.fullCollection.add(t),this.onUpdatePager()},e.prototype.onUpdatePager=function(){var t;return this.$el.find("#dataContentTable").trigger("updateCache"),t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("#dataContentTable").tablesorterPager(t)},e}(s.CompositeView),n.commands.setHandler("show:all:content:selection:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/content-selection/search-results-app",["app","controllers/region-controller"],function(t,e){return t.module("ContentSelectionApp.SearchResults",function(t,i,n,o,s,r){var a;return t.Controller=function(t){function e(){return this._searchContent=bind(this._searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.contentGroupCollection=t.contentGroupCollection,this.groupType=t.groupType,this.selectedFilterParamsObject=t.selectedFilterParamsObject,this.layout=e=this._getSearchResultsLayout(),this.searchCollection=i.request("empty:content:pieces:collection"),this.show(e,{loading:!0}),this.listenTo(this.layout,"show",function(t){return function(){return i.execute("show:all:content:selection:app",{region:t.layout.contentSelectionRegion,contentPiecesCollection:t.searchCollection,contentGroupCollection:t.contentGroupCollection,groupType:t.groupType})}}(this)),this.listenTo(this.layout,"search:content",this._searchContent)},e.prototype._searchContent=function(t,e){var n,o;return n=function(){switch(this.groupType){case"teaching-module":return["teacher_question","content_piece"];case"student-training":return["content_piece"];case"quiz":return["student_question"]}}.call(this),o={},e&&(o=this.selectedFilterParamsObject.request("get:parameters:for:search"),o.content_type&&(n=[o.content_type])),this.newCollection=i.request("get:content:pieces",{content_type:n,search_str:t,textbook:null!=o?o.term_id:void 0,post_status:null!=o?o.post_status:void 0,exclude:this.contentGroupCollection.pluck("ID")}),i.execute("when:fetched",this.newCollection,function(t){return function(){return t.searchCollection.reset(t.newCollection.models),t.layout.contentSelectionRegion.trigger("update:pager")}}(this))},e.prototype._getSearchResultsLayout=function(){return new a},e}(e),a=function(t){function e(){return this.searchContent=bind(this.searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='Search: <input type="text" class="search-box" id="search-box"> <input id="use-filters" type="checkbox"> <span class="small"> Search with filters</span> <button class="btn btn-success btn-cons2" id="search-btn">Search</button> <label id="error-div" style="display:none"><span class="small text-error">Please enter the search keyword</span></label> <div id="content-selection-region"></div>',e.prototype.regions={contentSelectionRegion:"#content-selection-region"},e.prototype.events={"click #search-btn":"searchContent","keypress .search-box":function(t){return 13===t.which?this.searchContent():void 0}},e.prototype.searchContent=function(){var t,e;return t=r.trim(this.$el.find("#search-box").val()),e=this.$el.find("#use-filters").is(":checked")?!0:!1,t?(this.$el.find("#error-div").hide(),this.trigger("search:content",t,e)):this.$el.find("#error-div").show()},e}(o.Layout),i.commands.setHandler("show:content:search:results:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/content-selection/add-set-app",["app","controllers/region-controller"],function(t,e){return t.module("ContentSelectionApp.AddSet",function(t,i){var n;return t.Controller=function(t){function e(){return this._addNewSet=bind(this._addNewSet,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){return this.contentPiecesCollection=t.contentPiecesCollection,this.contentGroupCollection=t.contentGroupCollection,this.selectedFilterParamsObject=t.selectedFilterParamsObject,this.view=this._getView(),this.listenTo(this.region,"update:collection",function(t){return function(){var e;return e=t.selectedFilterParamsObject.request("get:selected:parameters"),t.view.triggerMethod("set:level:count")}}(this)),this.listenTo(this.view,"get:textbook:filter",function(){var t;return t=this.selectedFilterParamsObject.request("get:selected:parameters"),this.view.triggerMethod("add:set",t)}),this.listenTo(this.view,"add:new:set",this._addNewSet),this.show(this.view)},e.prototype._getView=function(){return new n({collection:this.contentPiecesCollection})},e.prototype._addNewSet=function(t){var e;return t.id=this._getNewSetId(),e=new Backbone.Model(t),this.contentGroupCollection.add(e)},e.prototype._getNewSetId=function(){var t,e,i;return i=this.contentGroupCollection.where({post_type:"content_set"}),e=_.map(_.pluck(i,"id"),function(t){return parseInt(_.ltrim(t,"set "))}),t=_.isEmpty(e)?1:_.max(e)+1,"set "+t},e}(e),n=function(t){function e(){return this._onSpinEditValueChanged=bind(this._onSpinEditValueChanged,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=' <div class="row"> <div class="col-md-12"> <table class="table table-bordered table-flip-scroll cf"> <thead class="cf"> <tr> <th>Total Questions</th> <th>Level 1</th> <th>Level 2</th> <th>Level 3</th> </tr> </thead> <tbody> <tr> <td> <input type="text" id="total-questions" class="disabled" size="1"  disabled="disabled" value="0"> </td> <td class="level-selection" id="lvl1"><span></span> <input type="text"  /></td> <td class="level-selection" id="lvl2"><span></span> <input type="text"  /></td> <td class="level-selection" id="lvl3"><span></span> <input type="text" /></td> </tr> </tbody> </table> <div class="checkbox check-info"> <input id="selectAll" type="checkbox" value="1"> <label for="selectAll" class="text-grey">Select All</label> </div> <div class="pull-right"> <button type="button" class="btn btn-success btn-cons2" id="add-set-button"><i class="fa fa-plus"></i> Add</button> </div> </div> </div>',e.prototype.events={"change .level-selection input":"_onSpinEditValueChanged","click #add-set-button":function(){var t;return 0!==(t=this.$el.find("#total-questions").val())&&"0"!==t?this.trigger("get:textbook:filter"):void 0},"change #selectAll":"_selectAllForSet"},e.prototype.className="row",e.prototype.onShow=function(){return this.listenTo(this.collection,"add remove",function(t){return function(){return t.onSetLevelCount()}}(this)),this.onSetLevelCount()},e.prototype.onSetLevelCount=function(){var t,e,i,n,o,s;for(n=this.collection.countBy("difficulty_level"),this.$el.find("#selectAll").prop("checked",!1),s=[],e=i=1;3>=i;e=++i)t=null!=(o=n[""+e])?o:0,this.$el.find("#lvl"+e).find(" input, .spinedit").remove(),this.$el.find("#lvl"+e).append("<input type='text'  />"),this.$el.find("#lvl"+e+" input").spinedit({minimum:0,maximum:t,value:0}),s.push(this.$el.find("#lvl"+e+" span").text(t));return s},e.prototype._onSpinEditValueChanged=function(){var t;return t=0,_.each(this.$el.find(".level-selection input.spinedit"),function(e){return t+=parseInt($(e).val())}),this.$el.find("#total-questions").val(t)},e.prototype._selectAllForSet=function(t){var e,i,n,o;return $(t.target).is(":checked")?(e=this.collection.countBy("difficulty_level"),this.$el.find("#lvl1 input").val(null!=(i=e[1])?i:0),this.$el.find("#lvl2 input").val(null!=(n=e[2])?n:0),this.$el.find("#lvl3 input").val(null!=(o=e[3])?o:0),this._onSpinEditValueChanged()):(this.$el.find("#lvl1 input").val(0),this.$el.find("#lvl2 input").val(0),this.$el.find("#lvl3 input").val(0),this._onSpinEditValueChanged())},e.prototype.onAddSet=function(t){var e,i,n;return _.each(t,function(e,i){var n;return null==e||""===e.id?(n={id:"",text:"ALL"},t[i]=n):void 0}),n={textbook:t[0].id,chapter:t[1].id,section:t[2].id,subsection:t[3].id},i=this.getSetAvgs(),e={terms_id:n,textbook:t[0].text,chapter:t[1].text,section:t[2].text,"sub-section":t[2].text,lvl1:this.$el.find("#lvl1 input").val(),lvl2:this.$el.find("#lvl2 input").val(),lvl3:this.$el.find("#lvl3 input").val(),post_type:"content_set",avg_marks:i.marks,avg_duration:i.time},this.trigger("add:new:set",e),this.$el.find("input[type='text']").val(0),this.$el.find("#selectAll").prop("checked",!1)},e.prototype.getSetAvgs=function(){var t,e,i,n,o,s,r,a,l;for(t=e=0,n=i=1;3>=i;n=++i)o=l=0,s=this.collection.where({difficulty_level:n}),_.each(s,function(t,e){return t.get("marks")&&(o+=parseInt(t.get("marks"))),l+=parseInt(t.get("duration"))}),r=parseInt(this.$el.find("#lvl"+n+" input").val()),r&&(t+=r*o/s.length),r&&(e+=r*l/s.length);return a={marks:t,time:e}},e}(Marionette.ItemView),i.commands.setHandler("show:add:set:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/content-selection/add-quiz-app",["app","controllers/region-controller"],function(t,e){return t.module("ContentSelectionApp.AddQuiz",function(t,i){var n,o,s;return t.Controller=function(t){function e(){return this._showView=bind(this._showView,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e,n,o,s;return this.contentGroupCollection=t.contentGroupCollection,this.selectedFilterParamsObject=t.selectedFilterParamsObject,e=t.model,o=e.get("term_ids"),n=i.request("get:quizes",{textbook:this._getTextbookIDParam(o)}),s=i.request("get:textbook:names:by:ids",_.compact(_.flatten(o))),i.execute("when:fetched",[s,n],function(t){return function(){return t._showView(s,n)}}(this))},e.prototype._getTextbookIDParam=function(t){var e;return e=t.textbook,t.chapter&&(e=t.chapter),_.isEmpty(_.compact(t.sections))||(e=_.last(t.sections)),_.isEmpty(_.compact(t.subsections))||(e=_.last(t.subsections)),e},e.prototype._showView=function(t,e){return this.view=this._getView(e,t),this.show(this.view),this.listenTo(this.view,"add:quizzes",function(t){return function(i){return _.each(i,function(i){return t.contentGroupCollection.add(e.get(i)),e.remove(i)})}}(this))},e.prototype._getView=function(t,e){return new s({collection:t,textbookNames:e})},e}(e),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<td class="v-align-middle"><div class="checkbox check-default"> <input class="tab_checkbox" type="checkbox" value="{{id}}" id="checkbox{{id}}"> <label for="checkbox{{id}}"></label> </div> </td> <td>{{name}}</td> <td>{{quiz_type}}</td> <td>{{textbookName}}</td> <td>{{chapterName}}</td> <td>{{duration}} mins</td> <td>{{marks}}</td> <td>{{modified_date}}</td>',e.prototype.tagName="tr",e.prototype.mixinTemplateHelpers=function(t){var e;return e=Marionette.getOption(this,"textbookNames"),t.textbookName=e.findWhere({id:t.term_ids.textbook}).get("name"),t.chapterName=e.findWhere({id:t.term_ids.chapter}).get("name"),t.quiz_type=this.model.getQuizTypeLabel(),t.modified_date=moment(t.last_modified_on).format("Do MMM YYYY"),t},e}(Marionette.ItemView),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="No Content Available",e.prototype.tagName="td",e.prototype.onShow=function(){return this.$el.attr("colspan",8)},e}(Marionette.ItemView),s=function(t){function e(){return this.onQuizRemoved=bind(this.onQuizRemoved,this),this.addQuiz=bind(this.addQuiz,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=' <div class="row"> <div class="col-md-12"> <table class="table table-bordered"> <thead class="cf"> <tr> <th><div id="check_all_div" class="checkbox check-default" style="margin-right:auto;margin-left:auto;"> <input id="check_all" type="checkbox"> <label for="check_all"></label> </div></th> <th>Name</th> <th>Type</th> <th>Textbook</th> <th>Chapter</th> <th>Duration</th> <th>Marks</th> <th>Last Modified</th> </tr> </thead> <tbody></tbody> </table><div id="pager" class="pager"> <i class="cursor fa fa-chevron-left prev"></i> <span style="padding:0 15px"  class="pagedisplay"></span> <i class="cursor fa fa-chevron-right next"></i> <select class="pagesize"> <option selected value="10">10</option> <option value="25">25</option> <option value="50">50</option> <option value="100">100</option> </select> </div> <button type="button" class="btn btn-success btn-cons2" id="add-quiz-button"><i class="fa fa-plus"></i> Add</button> </div> </div>',
e.prototype.itemView=o,e.prototype.emptyView=n,e.prototype.itemViewContainer="table tbody",e.prototype.itemViewOptions=function(){return{textbookNames:Marionette.getOption(this,"textbookNames")}},e.prototype.className="row",e.prototype.events=function(){return{"change #check_all_div":"checkAll","click #add-quiz-button":"addQuiz"}},e.prototype.onShow=function(){var t;return this.$el.find("table").tablesorter(),t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("table").tablesorterPager(t)},e.prototype.checkAll=function(){return this.$el.find("#check_all").is(":checked")?this.$el.find("table .tab_checkbox").trigger("click").prop("checked",!0):this.$el.find("table .tab_checkbox").removeAttr("checked")},e.prototype.addQuiz=function(){var t;return t=_.pluck(this.$el.find("table .tab_checkbox:checked"),"value"),console.log(t),t?(this.trigger("add:quizzes",t),this.onUpdatePager()):void 0},e.prototype.onQuizRemoved=function(t){return this.fullCollection.add(t),this.onUpdatePager()},e.prototype.onUpdatePager=function(){var t;return this.$el.find("table").trigger("updateCache"),t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("table").tablesorterPager(t)},e}(Marionette.CompositeView),i.commands.setHandler("show:add:quiz:app",function(e){return null==e&&(e={}),new t.Controller(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/content-selection/app",["app","controllers/region-controller","apps/edit-module/content-selection/all-content-app","apps/edit-module/content-selection/search-results-app","apps/edit-module/content-selection/add-set-app","apps/edit-module/content-selection/add-quiz-app","apps/textbook-filters/textbook-filters-app"],function(t,e){return t.module("ContentSelectionApp.Controller",function(t,i){return t.ContentSelectionController=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var n;return extend(e,t),e.prototype.initialize=function(t){var e,n;return this.model=t.model,this.contentGroupCollection=t.contentGroupCollection,n=this.model.get("term_ids"),this.contentSelectionType=this.model.get("type"),e=function(){switch(this.contentSelectionType){case"teaching-module":return["teacher_question","content_piece"];case"student-training":return["content_piece","student_question"];default:return["student_question"]}}.call(this),this.contentPiecesCollection=i.request("get:content:pieces",{content_type:e,post_status:"publish",textbook:n.textbook}),this.selectedFilterParamsObject=new Backbone.Wreqr.RequestResponse,i.execute("when:fetched",[this.contentPiecesCollection,this.contentGroupCollection],function(t){return function(){var e,n,o,s;for(s=t.contentGroupCollection.models,e=0,n=s.length;n>e;e++)o=s[e],t.contentPiecesCollection.remove(o);return t.fullCollection=t.contentPiecesCollection.clone(),t.layout=t._getContentSelectionLayout(),t.show(t.layout,{loading:!0}),t.selectedFilterParamsObject=new Backbone.Wreqr.RequestResponse,t.listenTo(t.layout,"show",function(){var e;return e=["textbooks","chapters","sections","subsections","content_type"],"quiz"===t.model.get("type")&&e.pop(),i.execute("show:textbook:filters:app",{region:t.layout.filtersRegion,collection:t.contentPiecesCollection,selectedFilterParamsObject:t.selectedFilterParamsObject,model:t.model,filters:e,dataType:"content-pieces",post_status:"publish",contentSelectionType:t.contentSelectionType}),i.execute("show:all:content:selection:app",{region:t.layout.allContentRegion,contentPiecesCollection:t.contentPiecesCollection,contentGroupCollection:t.contentGroupCollection,groupType:t.model.get("type")}),i.execute("show:content:search:results:app",{region:t.layout.searchResultsRegion,contentGroupCollection:t.contentGroupCollection,selectedFilterParamsObject:t.selectedFilterParamsObject,groupType:t.model.get("type")}),"quiz"===t.model.get("type")&&i.execute("show:add:set:app",{region:t.layout.addSetRegion,contentPiecesCollection:t.contentPiecesCollection,contentGroupCollection:t.contentGroupCollection,selectedFilterParamsObject:t.selectedFilterParamsObject}),"student-training"===t.model.get("type")?i.execute("show:add:quiz:app",{region:t.layout.addQuizRegion,model:t.model,contentGroupCollection:t.contentGroupCollection,selectedFilterParamsObject:t.selectedFilterParamsObject}):void 0}),t.listenTo(t.layout.filtersRegion,"update:pager",function(){return t.layout.allContentRegion.trigger("update:pager"),t.layout.addSetRegion.trigger("update:collection")})}}(this))},e.prototype._getContentSelectionLayout=function(){return new n({model:this.model})},n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="grid-title no-border"> <h4 class="">Content <span class="semi-bold">Selection</span></h4> <div class="tools"> <a href="javascript:;" class="collapse"></a> </div> </div> <div class="grid-body no-border contentSelect" style="overflow: hidden; display: block;"> <div id="filters-region" class="m-b-10"></div> <ul class="nav nav-tabs b-grey b-l b-r b-t" id="addContent"> <li class="active"><a href="#all-content-region"><span class="semi-bold">All</span> Questions</a></li> {{#isQuiz}}<li><a href="#add-set-region"><span class="semi-bold">Add</span> Set</a></li>{{/isQuiz}} {{#isStudentTraining}} <li><a href="#add-quiz-region"><span class="semi-bold">Add</span> Quiz</a></li> {{/isStudentTraining}} <li><a href="#search-results-region"><span class="semi-bold">Search</span> Questions</a></li> </ul> <div id="tab-content" class="tab-content" > <div id="all-content-region" class="tab-pane active"></div> <div id="add-set-region" class="tab-pane"></div> <div id="add-quiz-region" class="tab-pane"></div> <div id="search-results-region" class="tab-pane"></div> </div> </div>',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),"quiz"===t.type&&(t.isQuiz=!0),"student-training"===t.type&&(t.isStudentTraining=!0),t},e.prototype.className="tiles white grid simple vertical green",e.prototype.regions={filtersRegion:"#filters-region",allContentRegion:"#all-content-region",searchResultsRegion:"#search-results-region",addSetRegion:"#add-set-region",addQuizRegion:"#add-quiz-region"},e.prototype.events={"click #addContent a":"changeTab"},e.prototype.changeTab=function(t){return t.preventDefault(),this.$el.find("#addContent a").removeClass("active"),$(t.target).closest("a").addClass("active").tab("show")},e}(Marionette.Layout),e}(e),i.commands.setHandler("show:content:selectionapp",function(e){return null==e&&(e={}),new t.ContentSelectionController(e)})})}),define("text!apps/edit-module/content-display/templates/content-display.html",[],function(){return'{{#isContentPiece}}\n<div class="contentPiece" data-id="{{ID}}">\n    <time class="cbp_tmtime" datetime="">\n        <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n    </time>\n    <div class="cbp_tmicon info animated bounceIn"> <i class="fa fa-question"></i> </div>\n    <div class="cbp_tmlabel">\n        <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n            <div class="tools"> <a href="#content-piece-config" data-toggle="modal" class="config"></a> <a href="javascript:;" class="remove"></a> </div>\n            <h4 class="m-t-5 m-b-5"><span class="text-success semi-bold">{{&post_excerpt}}</span> </h4>\n        </div>\n        <div class="clearfix"></div>\n        <div class="tiles grey p-t-10 p-b-10 p-l-20">           \n            <div class="muted">{{#isModule}}{{post_tags}},{{/isModule}}\n                {{#isQuiz}}\n                    Level {{difficulty_level}},\n                    Marks: {{marks}},\n                {{/isQuiz}}\n                Duration: {{duration}} mins\n            </div> \n            <div class="clearfix"></div>\n        </div>\n    </div>\n</div>\n{{/isContentPiece}}\n{{#isSet}}\n<div class="contentPiece" data-id="{{id}}">\n    <time class="cbp_tmtime" datetime="">\n        <span class="time"><span class="semi-bold">{{id}}</span></span>\n    </time>\n    <div class="cbp_tmicon info animated bounceIn"> <i class="fa fa-folder-open"></i> </div>\n    <div class="cbp_tmlabel">\n        <div class="p-l-10 m-b-10">\n            <div class="tools"> <a href="#content-piece-config" data-toggle="modal" class="config"></a> <a href="javascript:;" class="remove"></a> </div>\n            <h5 class="m-t-5 m-b-5 bold pull-left">\n                <span>\n                    <span class="muted">Textbook:</span>\n                    {{textbook}}\n                </span>\n                <span>\n                    <span class="muted"> | Chapter:</span>\n                    {{chapter}}\n                </span>\n                <span>\n                    <span class="muted"> | Section:</span>\n                    {{section}}\n                </span>\n                <span>\n                    <span class="muted"> | Sub-Section:</span>\n                    {{sub-section}}\n                </span>\n            </h5>\n\n            <div class="clearfix"></div>\n        </div>\n        {{#contentLevels}}\n        <div class="tiles grey m-b-10 p-t-15 p-l-30 p-r-15 p-b-20 b-b b-grey">\n            <h4 class="no-margin"><span class="text-info semi-bold">{{.}}</span> </h4>\n        </div>\n        {{/contentLevels}}\n    </div>\n</div>\n{{/isSet}}\n{{#isStudentTrainingQuiz}}\n<div class="contentPiece" data-id="{{id}}">\n    <time class="cbp_tmtime" datetime="">\n        <span class="time">{{duration}} <span class="semi-bold">mins</span></span>\n    </time>\n    <div class="cbp_tmicon info animated bounceIn"> <i class="fa fa-question"></i> </div>\n    <div class="cbp_tmlabel">\n        <div class="p-t-15 p-l-30 p-r-15 p-b-20 xs-p-r-10 xs-p-l-10 xs-p-t-5">\n            <div class="tools"> <a href="#content-piece-config" data-toggle="modal" class="config"></a> <a href="javascript:;" class="remove"></a> </div>\n            <h4 class="m-t-5 m-b-5"><span class="text-success semi-bold">{{name}}</span> </h4>\n        </div>\n        <div class="clearfix"></div>\n        <div class="tiles grey p-t-10 p-b-10 p-l-20">           \n            <div class="muted">\n                    Marks: {{marks}},\n                    Duration: {{duration}} mins\n            </div> \n            <div class="clearfix"></div>\n        </div>\n    </div>\n</div>\n{{/isStudentTrainingQuiz}}'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/content-display/content-display-app",["app","controllers/region-controller","text!apps/edit-module/content-display/templates/content-display.html"],function(t,e,i){return t.module("CollectionContentDisplayApp.Controller",function(t,n){var o,s;return t.CollectionEditContentDisplayController=function(t){function e(){return this.saveContentPieces=bind(this.saveContentPieces,this),this.contentOrderChanged=bind(this.contentOrderChanged,this),this.contentPiecesChanged=bind(this.contentPiecesChanged,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.model=t.model,this.contentGroupCollection=t.contentGroupCollection,this.view=e=this._getCollectionContentDisplayView(),this.listenTo(this.contentGroupCollection,"add remove",this.contentPiecesChanged),this.listenTo(e,"changed:order",this.contentOrderChanged),this.listenTo(this.view,"remove:model:from:quiz",this.removeModelFromQuiz),this.contentGroupCollection.length>0?n.execute("when:fetched",this.contentGroupCollection.models,function(t){return function(){return t.show(e,{loading:!0})}}(this)):this.show(e,{loading:!0})},e.prototype.contentPiecesChanged=function(){var t;return t="quiz"===this.model.get("type")?this.contentGroupCollection.map(function(t){return"content-piece"===t.get("post_type")?{type:"content-piece",id:t.get("ID")}:{type:"content_set",data:t.toJSON()}}):"student-training"===this.model.get("type")?this.contentGroupCollection.map(function(t){return"content-piece"===t.get("post_type")?{type:"content-piece",id:t.id}:{type:"quiz",id:t.id}}):this.contentGroupCollection.pluck("ID"),this.saveContentPieces(t)},e.prototype.contentOrderChanged=function(t){var e;return"quiz"===this.model.get("type")?(e=new Array,_.each(t,function(t){return function(i){var n;return _.str.include(i,"set")?(n=t.contentGroupCollection.findWhere({id:i}),e.push({type:"content_set",data:n.toJSON()})):e.push({type:"content-piece",id:parseInt(i)})}}(this))):e=t,this.saveContentPieces(e)},e.prototype.saveContentPieces=function(t){var e;return"teaching-module"===this.model.get("type")&&this.model.set("content_pieces",t),("quiz"===(e=this.model.get("type"))||"student-training"===e)&&this.model.set("content_layout",t),this.model.save({changed:"content_pieces"},{wait:!0})},e.prototype._getCollectionContentDisplayView=function(){return new o({model:this.model,collection:this.contentGroupCollection})},e.prototype.removeModelFromQuiz=function(t){var e;return _.str.include(t,"set")?(e=this.contentGroupCollection.findWhere({id:t}),this.contentGroupCollection.remove(e)):this.contentGroupCollection.remove(parseInt(t))},e}(e),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template=i,e.prototype.tagName="li",e.prototype.className="sortable",e.prototype.mixinTemplateHelpers=function(t){var i,n,o;if(t=e.__super__.mixinTemplateHelpers.call(this,t),"content-piece"===t.post_type&&(t.isContentPiece=!0),"content_set"===t.post_type)for(t.isSet=!0,t.contentLevels=new Array,i=n=1;3>=n;i=++n)for(o=parseInt(t["lvl"+i]);o>0;)t.contentLevels.push("Level "+i),o--;return"student-training"===this.groupType&&t.quiz_type&&(t.isStudentTrainingQuiz=!0),"quiz"===this.groupType&&(t.isQuiz=!0),"teaching-module"===this.groupType&&(t.isModule=!0),"quiz"===this.groupType&&"content-piece"===t.post_type&&(t.marks=this.model.get("marks")),t},e.prototype.initialize=function(){return this.groupType=Marionette.getOption(this,"groupType")},e.prototype.onShow=function(){return"content_set"===this.model.get("post_type")?this.$el.attr("id",this.model.get("id")):this.$el.attr("id",this.model.get("ID"))},e}(Marionette.ItemView),o=function(t){function e(){return this.removeItem=bind(this.removeItem,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<ul class="cbp_tmtimeline"></ul>',e.prototype.itemView=s,e.prototype.itemViewContainer="ul.cbp_tmtimeline",e.prototype.className="col-md-10",e.prototype.id="myCanvas-miki",e.prototype.itemViewOptions=function(){return{groupType:this.model.get("type")}},e.prototype.events={"click .remove":"removeItem"},e.prototype.modelEvents={"change:post_status":"statusChanged"},e.prototype.statusChanged=function(t,e){return"publish"===e||"archive"===e?(this.$el.find(".remove").hide(),this.$el.find(".cbp_tmtimeline").sortable("disable")):this.$el.find(".remove").show()},e.prototype.onShow=function(){return this.$el.find(".cbp_tmtimeline").sortable({stop:function(t){return function(e,i){var n;return n=t.$el.find(".cbp_tmtimeline").sortable("toArray"),console.log(n),t.trigger("changed:order",n)}}(this)}),this.statusChanged(this.model,this.model.get("post_status"))},e.prototype.removeItem=function(t){var e;return e=$(t.target).closest(".contentPiece").attr("data-id"),this.trigger("remove:model:from:quiz",e)},e}(Marionette.CompositeView),n.commands.setHandler("show:editgroup:content:displayapp",function(e){return null==e&&(e={}),new t.CollectionEditContentDisplayController(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/edit-module/module-edit-controller",["app","controllers/region-controller","apps/edit-module/module-edit-views","apps/edit-module/module-description/module-description-controller","apps/edit-module/content-selection/app","apps/edit-module/content-display/content-display-app"],function(t,e){return t.module("ContentModulesApp.Edit",function(t,i){return t.GroupController=function(e){function n(){return this._showContentSelectionApp=bind(this._showContentSelectionApp,this),this._getContentGroupEditLayout=bind(this._getContentGroupEditLayout,this),this.showGroupDetailsApp=bind(this.showGroupDetailsApp,this),this._getContentGroupCollection=bind(this._getContentGroupCollection,this),n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){return this.group_id=t.group_id,this.groupType=t.groupType,this.contentGroupCollection=null,this.group_id?("teaching-module"===this.groupType&&(this.contentGroupModel=i.request("get:content:group:by:id",this.group_id)),"quiz"===this.groupType&&(this.contentGroupModel=i.request("get:quiz:by:id",this.group_id))):("teaching-module"===this.groupType&&(this.contentGroupModel=i.request("new:content:group")),"quiz"===this.groupType&&(this.contentGroupModel=i.request("new:quiz"))),i.execute("when:fetched",this.contentGroupModel,function(t){return function(){return t.contentGroupCollection=t._getContentGroupCollection(),i.execute("when:fetched",t.contentGroupCollection,function(){return t.showContentGroupView()})}}(this))},n.prototype._getContentGroupCollection=function(){return"teaching-module"===this.groupType&&(this.contentGroupCollection=i.request("get:content:pieces:of:group",this.contentGroupModel)),"quiz"===this.groupType&&(this.contentGroupCollection=new Backbone.Collection,_.each(this.contentGroupModel.get("content_layout"),function(t){return function(e){var n;return"content-piece"===e.type?n=i.request("get:content:piece:by:id",e.id):(e.data.lvl1=parseInt(e.data.lvl1),e.data.lvl2=parseInt(e.data.lvl2),e.data.lvl3=parseInt(e.data.lvl3),n=new Backbone.Model(e.data)),t.contentGroupCollection.add(n)}}(this))),this.contentGroupCollection},n.prototype.showContentGroupView=function(){var t;return t={items:[{label:"Dashboard",link:"javascript://"},{label:"Content Management",link:"javascript:;"},{label:"Create Content Group",link:"javascript:;",active:"active"}]},i.execute("update:breadcrumb:model",t),this.layout=this._getContentGroupEditLayout(),this.listenTo(this.layout,"show",function(t){return function(){return t.showGroupDetailsApp(),t.group_id?t._showContentSelectionApp(t.contentGroupModel):void 0}}(this)),this.listenTo(this.contentGroupModel,"change:id",this._showContentSelectionApp,this),this.listenTo(this.layout.collectionDetailsRegion,"close:content:selection:app",function(t){return function(){return console.log("close:content:selection:app "),t.layout.contentSelectionRegion.close()}}(this)),this.show(this.layout,{loading:!0})},n.prototype.showGroupDetailsApp=function(){return i.execute("show:editgroup:content:group:detailsapp",{region:this.layout.collectionDetailsRegion,model:this.contentGroupModel,contentGroupCollection:this.contentGroupCollection})},n.prototype._getContentGroupEditLayout=function(){return new t.Views.ContentGroupEditLayout},n.prototype._showContentSelectionApp=function(t){return i.execute("when:fetched",this.contentGroupCollection,function(e){return function(){return"underreview"===t.get("post_status")&&i.execute("show:content:selectionapp",{region:e.layout.contentSelectionRegion,model:t,contentGroupCollection:e.contentGroupCollection}),i.execute("show:editgroup:content:displayapp",{region:e.layout.contentDisplayRegion,model:t,contentGroupCollection:e.contentGroupCollection})}}(this))},n}(e),i.commands.setHandler("show:edit:module:controller",function(e){return new t.GroupController(e)})})}),define("text!apps/content-pieces/list-content-pieces/templates/content-pieces-list-tpl.html",[],function(){return'<div class="col-lg-12">\n    <!-- <h4><span class="semi-bold">All</span> Content Pieces</h4> -->\n    <div class="change-status none small">\n        Change status to:\n        <select id="status_dropdown" class="form-control inline small">\n            <option value="publish">Publish</option>\n            <option value="archive">Archive</option>\n            <option value="move">Move</option>\n        </select>\n        <button class="btn btn-info btn-small"><i class="fa spinner"></i> Change Status</button>\n    </div>\n    <div id="destination_textbook"></div>\n\n    <table class="table table-bordered m-t-15" id="content-pieces-table" >\n        <thead>\n        <tr><th style="width:4%">\n                <div id="check_all_div" class="checkbox check-default" style="margin-right:auto;margin-left:auto;">\n                    <input id="check_all" type="checkbox">\n                    <label for="check_all"></label>\n                </div>\n            </th>\n            <th>Excerpt</th>\n            <th>Present in module</th>\n            <th>Textbook</th>\n            <th>Chapter</th>\n            <th>Type</th>\n            <th>Last Modified</th>\n            <th>Status</th>\n            <th>Actions</th>\n        </tr>\n        </thead>\n\n        <tbody id="list-content-pieces" aria-relevant="all" aria-live="polite" role="alert" data-link="row" class="rowlink">\n\n\n        </tbody>\n    </table>\n    <div class="change-status none small">\n        Change status to:\n        <select class="form-control inline small">\n            <option value="publish">Publish</option>\n            <option value="archive">Archive</option>\n        </select>\n        <button class="btn btn-info btn-small"><i class="fa spinner"></i> Change Status</button>\n    </div>\n    <div id="pager" class="pager">\n        <i class="cursor fa fa-chevron-left prev"></i>\n        <span style="padding:0 15px"  class="pagedisplay"></span>\n        <i class="cursor fa fa-chevron-right next"></i>\n        <select class="pagesize">\n            <option selected value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n        </select>\n    </div>\n</div>\n'});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-pieces/list-content-pieces/views",["app","text!apps/content-pieces/list-content-pieces/templates/content-pieces-list-tpl.html","bootbox"],function(t,e,i){return t.module("ContentPiecesApp.ContentList.Views",function(t,n){var o,s;return s=function(t){function e(){return this.removeSpinner=bind(this.removeSpinner,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.tagName="tr",e.prototype.className="gradeX odd",e.prototype.template='<td class="v-align-middle"><div class="checkbox check-default"> <input class="tab_checkbox" type="checkbox" value="{{ID}}" id="checkbox{{ID}}"> <label for="checkbox{{ID}}"></label> </div> </td> <td class="cpHeight">{{&post_excerpt}}</td> <td class="cpHeight">{{&present_in_str}}</td> <td>{{textbookName}}</td> <td>{{chapterName}}</td> <td>{{contentType}}</td> <td><span style="display:none">{{sort_date}} </span> {{&modified_date}}</td> <td>{{&statusMessage}}</td> <td data-id="{{ID}}" class="text-center"> <a target="_blank" href="{{view_url}}" class="view-content-piece">View</a> {{&edit_link}} {{#is_under_review}} <span class="nonDevice publishModuleSpan">|</span> <a target="_blank" class="nonDevice publishModule">Publish</a> {{/is_under_review}} {{#is_published}} <span class="nonDevice archiveModuleSpan">|</span> <a target="_blank" class="nonDevice archiveModule">Archive</a> {{/is_published}} {{^is_used}} <span class="nonDevice deleteModuleSpan">|</span> <a target="_blank" class="nonDevice deleteModule">Delete</a> {{/is_used}} <span class="nonDevice">|</span> <a target="_blank"  class="nonDevice cloneModule">Clone</a> <i class="fa spinner"></i> </td>',e.prototype.serializeData=function(){var t,i,n;return t=e.__super__.serializeData.call(this),t.modified_date=moment(t.post_modified).format("Do MMM YYYY <br/> h:mm a"),t.sort_date=moment(t.post_modified).format("YYYYMMDD"),"student_question"===t.content_type?t.view_url=SITEURL+"/#dummy-quiz/"+t.ID:t.view_url=SITEURL+"/#dummy-module/"+t.ID,i=SITEURL+"/content-creator/#edit-content/"+t.ID,t.edit_link="","pending"===t.post_status&&(t.edit_link=' <span class="nonDevice editLinkSpan">|</span> <a target="_blank" href="'+i+'" class="nonDevice editLink">Edit</a>'),t.textbookName=function(e){return function(){var i;return t.term_ids.textbook&&(i=_.findWhere(e.textbooks,{id:t.term_ids.textbook}))?i.name:void 0}}(this),t.chapterName=function(e){return function(){var i;return t.term_ids.chapter?i=_.chain(e.chapters.findWhere({id:t.term_ids.chapter})).pluck("name").compact().value():void 0}}(this),t.statusMessage=function(){return"pending"===t.post_status?'<span class="label post-status label-important">Under Review</span>':"publish"===t.post_status?'<span class="label post-status label-info">Published</span>':"archive"===t.post_status?'<span class="label post-status label-success">Archived</span>':void 0},"publish"===t.post_status&&(t.is_published=!0),"pending"===t.post_status&&(t.is_under_review=!0),n=[],_.each(t.present_in_modules,function(t,e){return n.push("<a target='_blank' href='#view-group/"+t.id+"'>"+t.name+"</a>")}),n.length>0&&(t.is_used=!0),t.present_in_str=_.size(n)>0?_.toSentence(n):"Not added to a module yet",t.contentType=_.str.titleize(_.str.humanize(t.content_type)),t},e.prototype.events={"click a.deleteModule":function(){return this.deleteModule("delete")},"click a.cloneModule":function(){return this.model.duplicate()},"click a.archiveModule":function(){return this.changeModuleStatus("archive")},"click a.publishModule":function(){return this.changeModuleStatus("publish")}},e.prototype.initialize=function(t){return this.textbooks=t.textbooksCollection,this.chapters=t.chaptersCollection},e.prototype.addSpinner=function(){return this.$el.find(".spinner").addClass("fa-spin fa-spinner")},e.prototype.removeSpinner=function(){return this.$el.find(".spinner").removeClass("fa-spin fa-spinner")},e.prototype.deleteModule=function(t){return i.confirm("Are you sure you want to delete '"+this.model.get("post_excerpt")+"' ?",function(t){return function(e){var i,n;return e?(t.addSpinner(),n=t.model.id,i={},i.action="delete-content-module",i.id=n,$.post(AJAXURL,i).success(function(e){return t.model.destroy()})):void 0}}(this))},e.prototype.changeModuleStatus=function(t){return i.confirm("Are you sure you want to "+t+" '"+this.model.get("post_excerpt")+"' ?",function(e){return function(i){return i?(e.addSpinner(),e.model.save({post_status:t},{success:function(){return e.changeStatusLabel(t)},error:function(t){return console.log(t)},complete:e.removeSpinner})):void 0}}(this))},e.prototype.changeStatusLabel=function(t){switch(t){case"archive":return this.$el.find(".post-status").removeClass("label-info").addClass("label-success").html("Archived"),this.$el.find(".archiveModule, .archiveModuleSpan").remove();case"publish":return this.$el.find(".post-status").removeClass("label-important").addClass("label-info").html("Published"),this.$el.find(".view-content-piece").after('<span class="nonDevice archiveModuleSpan">|</span> <a target="_blank" class="nonDevice archiveModule">Archive</a>'),this.$el.find(".publishModule, .publishModuleSpan, .editLink, .editLinkSpan").remove()}},e}(Marionette.ItemView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="No Content Available",e.prototype.tagName="td",e.prototype.onShow=function(){return this.$el.attr("colspan",7)},e}(Marionette.ItemView),t.ListView=function(t){function r(){return this.changeStatus=bind(this.changeStatus,this),this.show_destination_subsections=bind(this.show_destination_subsections,this),this.show_destination_sections=bind(this.show_destination_sections,this),this.show_destination_chapters=bind(this.show_destination_chapters,this),this.show_destination_textbooks=bind(this.show_destination_textbooks,this),this.moveContent=bind(this.moveContent,this),r.__super__.constructor.apply(this,arguments)}return extend(r,t),r.prototype.template=e,r.prototype.className="row",r.prototype.itemView=s,r.prototype.emptyView=o,r.prototype.itemViewContainer="#list-content-pieces",r.prototype.itemViewOptions=function(){return{textbooksCollection:this.textbooks,chaptersCollection:Marionette.getOption(this,"chaptersCollection")}},r.prototype.events={"change #content-post-status-filter, #difficulty-level-filter":"setFilteredContent","change .textbook-filter":function(t){return this.trigger("fetch:chapters:or:sections",$(t.target).val(),t.target.id)},"change #check_all_div":function(){return $.toggleCheckAll(this.$el.find("table"))},"change .tab_checkbox,#check_all_div ":"showSubmitButton","click .change-status button":"changeStatus","change #status_dropdown":"show_destination_textbooks","change #destination_textbook #textbooks-filter":"show_destination_chapters","change #destination_textbook #chapters-filter":"show_destination_sections","change #destination_textbook #sections-filter":"show_destination_subsections"},r.prototype.initialize=function(){return this.textbooksCollection=Marionette.getOption(this,"textbooksCollection"),this.textbooks=new Array,this.textbooksCollection.each(function(t){return function(e,i){return t.textbooks.push({name:e.get("name"),id:e.get("term_id")})}}(this))},r.prototype.onShow=function(){var t;return this.textbooksCollection=Marionette.getOption(this,"textbooksCollection"),this.fullCollection=Marionette.getOption(this,"fullCollection"),t=$.showTextbookFilters({textbooks:this.textbooksCollection}),this.$el.find("#textbook-filters").html(t),this.$el.find("#content-pieces-table").tablesorter(),this.$el.find(".select2-filters").select2(),this.onUpdatePager()},r.prototype.onFetchChaptersOrSectionsCompleted=function(t,e){switch(e){case"textbooks-filter":$.populateChapters(t,this.$el);break;case"chapters-filter":$.populateSections(t,this.$el);break;case"sections-filter":$.populateSubSections(t,this.$el)}return this.setFilteredContent()},r.prototype.setFilteredContent=function(){var t;return t=$.filterTableByTextbooks(this),this.collection.set(t),this.onUpdatePager()},r.prototype.onUpdatePager=function(){var t;return this.$el.find("#content-pieces-table").trigger("updateCache"),t={container:this.$el.find(".pager"),output:"{startRow} to {endRow} of {totalRows}"},this.$el.find("#content-pieces-table").tablesorterPager(t)},r.prototype.showSubmitButton=function(){return this.$el.find(".tab_checkbox").is(":checked")?(this.$el.find(".change-status").show(),this.$el.find(".move-content").show()):(this.$el.find(".change-status").hide(),this.$el.find(".move-content").hide())},r.prototype.moveContent=function(t){var e,n,o,s;return e=$("#destination_textbook #chapters-filter option:selected").val(),isNaN(parseInt(e))||!isFinite(e)?(e=0,void i.alert("Please select a chapter")):(s=$("#destination_textbook #sections-filter option:selected").val(),(isNaN(parseInt(s))||!isFinite(s))&&(s=0),n={},n.IDs=$.getCheckedItems(this.$el.find("table")),n.chapter=e,n.sections=s,o="Are you sure you want to move selected content pieces?",0===_.size(n.IDs)?void i.alert("None of the selected items can be moved"):i.confirm(o,function(e){return function(e){return n.action="bulk-move-content-pieces",$.post(AJAXURL,n).success(function(t){var e;for(e=0;e<n.IDs.length;)$("#checkbox"+n.IDs[e]).closest("tr").remove(),e++;return i.alert("Moved Successfully.");
}).fail(function(t){return console.log("some error occurred"),console.log(t)}).done(function(){return $("#destination_textbook").hide(),$(t.target).find(".fa").removeClass("fa-spin fa-spinner").addClass("fa-check")})}}(this)))},r.prototype.show_destination_textbooks=function(t){var e,i;return e=$("#status_dropdown").val(),"move"!==e?(this.$el.find("#destination_textbook").hide(),!1):(i=$.showTextbookFilters({textbooks:this.textbooksCollection}),this.$el.find("#destination_textbook").html(i),this.$el.find("#destination_textbook").show(),this.$el.find("#destination_textbook #textbooks-filter").hide(),this.show_destination_chapters())},r.prototype.show_destination_chapters=function(t){var e,i;return i=$("#textbooks-filter option:selected").val(),e=n.request("get:chapters",{parent:i}),n.execute("when:fetched",e,function(t){return function(){var i;return i="<option>Select</option>",e.each(function(t,e){var n,o;return n=t.get("term_id"),o=t.get("name"),i+="<option value='"+n+"'>"+o+"</option>"}),t.$el.find("#destination_textbook #chapters-filter").html(i)}}(this))},r.prototype.show_destination_sections=function(t){var e,i;return i=$("#destination_textbook #chapters-filter option:selected").val(),e=n.request("get:chapters",{parent:i}),n.execute("when:fetched",e,function(t){return function(){var i;return i="<option>Select</option>",e.each(function(t,e){var n,o;return n=t.get("term_id"),o=t.get("name"),i+="<option value='"+n+"'>"+o+"</option>"}),t.$el.find("#destination_textbook  #sections-filter").html(i)}}(this))},r.prototype.show_destination_subsections=function(t){var e,i;return i=$("#destination_textbook #sections-filter option:selected").val(),e=n.request("get:chapters",{parent:i}),n.execute("when:fetched",e,function(t){return function(){var i;return i="<option>Select</option>",e.each(function(t,e){var n,o;return n=t.get("term_id"),o=t.get("name"),i+="<option value='"+n+"'>"+o+"</option>"}),t.$el.find("#destination_textbook  #subsections-filter").html(i)}}(this))},r.prototype.changeStatus=function(t){var e,n;return"move"===$(t.target).closest(".change-status").find("select").val()?(this.moveContent(),!1):(e={},e.IDs=$.getCheckedItems(this.$el.find("table")),e.status=$(t.target).closest(".change-status").find("select").val(),n="Are you sure you want to "+e.status+" the selected content pieces ?","publish"===e.status&&(e.IDs=_.filter(e.IDs,function(t){return function(e){return"pending"===t.collection.get(e).get("post_status")?e:void 0}}(this)),n+="<div class='small m-t-10'> Note: Only content pieces with status 'Under Review' will be changed to publish </div>",0===_.size(e.IDs))?void i.alert("None of the selected items can be published"):i.confirm(n,function(i){return function(n){return n?($(t.target).find(".fa").addClass("fa-spin fa-spinner"),e.action="update-content-piece-status",$.post(AJAXURL,e).success(function(t){return i.updateStatusValues(e.IDs,e.status)}).fail(function(t){return console.log("some error occurred"),console.log(t)}).done(function(){return $(t.target).find(".fa").removeClass("fa-spin fa-spinner").addClass("fa-check")})):void 0}}(this)))},r.prototype.updateStatusValues=function(t,e){return _.each(t,function(t){return function(i){var n;return n=t.collection.get(parseInt(i)),n.set({post_status:e})}}(this)),this.collection.reset(this.collection.models),this.onUpdatePager()},r}(Marionette.CompositeView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-pieces/list-content-pieces/list-content-pieces-app",["app","controllers/region-controller","apps/content-pieces/list-content-pieces/views"],function(t,e){return t.module("ContentPiecesApp.ContentList",function(t,i){return t.ListContentPiecesController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e;return this.contentPiecesCollection=t.contentPiecesCollection,this.textbooksCollection=t.textbooksCollection,this.allChaptersCollection=null,e=_.chain(this.contentPiecesCollection.pluck("term_ids")).pluck("chapter").unique().compact().value(),this.allChaptersCollection=i.request("get:textbook:names:by:ids",e),this.fullCollection=this.contentPiecesCollection.clone(),i.execute("when:fetched",this.allChaptersCollection,function(t){return function(){var e;return t.view=e=t._getContentPiecesListView(),t.show(e,{loading:!0,entities:[t.contentPiecesCollection,t.fullCollection]}),t.listenTo(t.region,"update:pager",function(){return t.view.triggerMethod("update:pager")})}}(this))},n.prototype._getContentPiecesListView=function(){return console.log(this.contentPiecesCollection),new t.Views.ListView({collection:this.contentPiecesCollection,fullCollection:this.fullCollection,textbooksCollection:this.textbooksCollection,chaptersCollection:this.allChaptersCollection})},n}(e),i.commands.setHandler("show:list:content:pieces:app",function(e){return null==e&&(e={}),new t.ListContentPiecesController(e)})})});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-pieces/list-content-pieces/search-results-app",["app","controllers/region-controller"],function(t,e){return t.module("ContentPiecesApp.ContentList.SearchResults",function(t,i,n,o,s,r){var a;return t.Controller=function(t){function e(){return this._searchContent=bind(this._searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.initialize=function(t){var e;return this.textbooksCollection=t.textbooksCollection,this.selectedFilterParamsObject=t.selectedFilterParamsObject,this.layout=e=this._getSearchResultsLayout(),this.searchCollection=i.request("empty:content:pieces:collection"),this.show(e,{loading:!0}),this.listenTo(this.layout,"show",function(t){return function(){return i.execute("show:list:content:pieces:app",{region:t.layout.contentSelectionRegion,contentPiecesCollection:t.searchCollection,textbooksCollection:t.textbooksCollection})}}(this)),this.listenTo(this.layout,"search:content",this._searchContent)},e.prototype._searchContent=function(t,e){var n;return n={},e&&(n=this.selectedFilterParamsObject.request("get:parameters:for:search")),n.post_status||(n.post_status="any"),this.newCollection=i.request("get:content:pieces",{search_str:t,textbook:n.term_id?n.term_id:void 0,post_status:n.post_status?n.post_status:void 0,content_type:n.content_type?[n.content_type]:void 0}),i.execute("when:fetched",this.newCollection,function(t){return function(){return t.searchCollection.reset(t.newCollection.models),t.layout.contentSelectionRegion.trigger("update:pager"),t.layout.$el.find(".progress-spinner").hide()}}(this))},e.prototype._getSearchResultsLayout=function(){return new a},e}(e),a=function(t){function e(){return this.searchContent=bind(this.searchContent,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='Search: <input type="text" class="search-box" id="search-box"> <input id="use-filters" type="checkbox"> <span class="small"> Search with filters</span> <button class="btn btn-success btn-cons2" id="search-btn"> <i class="none progress-spinner fa fa-spinner fa-spin"></i> Search </button> <label id="error-div" class="none"><span class="small text-error">Please enter the search keyword</span></label> <div id="content-selection-region"></div>',e.prototype.regions={contentSelectionRegion:"#content-selection-region"},e.prototype.events={"click #search-btn":"searchContent","keypress .search-box":function(t){return 13===t.which?this.searchContent():void 0}},e.prototype.searchContent=function(){var t,e;return t=r.trim(this.$el.find("#search-box").val()),e=this.$el.find("#use-filters").is(":checked")?!0:!1,t?(this.$el.find("#error-div").hide(),this.$el.find(".progress-spinner").show(),this.trigger("search:content",t,e)):this.$el.find("#error-div").show()},e}(o.Layout)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-pieces/list-content-pieces/app",["app","controllers/region-controller","apps/content-pieces/list-content-pieces/list-content-pieces-app","apps/content-pieces/list-content-pieces/search-results-app","apps/textbook-filters/textbook-filters-app"],function(t,e){return t.module("ContentPiecesApp.ContentList",function(t,i){return t.ListController=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}var o;return extend(n,e),n.prototype.initialize=function(){return this.textbooksCollection=i.request("get:textbooks",{fetch_all:!0}),i.execute("when:fetched",this.textbooksCollection,function(e){return function(){var n;return n=e.textbooksCollection.first(),e.contentPiecesCollection=i.request("get:content:pieces",{textbook:n.id}),e.selectedFilterParamsObject=new Backbone.Wreqr.RequestResponse,e.layout=e._getContentPiecesLayout(),i.execute("when:fetched",e.contentPiecesCollection,function(){return e.show(e.layout,{loading:!0}),e.listenTo(e.layout,"show",function(){return i.execute("show:textbook:filters:app",{region:e.layout.filtersRegion,collection:e.contentPiecesCollection,textbooksCollection:e.textbooksCollection,post_status:"any",selectedFilterParamsObject:e.selectedFilterParamsObject,dataType:"content-pieces",filters:["textbooks","chapters","sections","subsections","post_status","status","content_type","student_question"]}),i.execute("show:list:content:pieces:app",{region:e.layout.allContentRegion,contentPiecesCollection:e.contentPiecesCollection,textbooksCollection:e.textbooksCollection}),new t.SearchResults.Controller({region:e.layout.searchResultsRegion,textbooksCollection:e.textbooksCollection,selectedFilterParamsObject:e.selectedFilterParamsObject})}),e.listenTo(e.layout.filtersRegion,"update:pager",function(){return e.layout.allContentRegion.trigger("update:pager")})})}}(this))},n.prototype._getContentPiecesLayout=function(){return new o},o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="grid-title no-border"> <h4 class="">List of <span class="semi-bold">Content Pieces</span></h4> <div class="tools"> <a href="javascript:;" class="collapse"></a> </div> </div> <div class="grid-body no-border contentSelect" style="overflow: hidden; display: block;"> <div id="filters-region" class="m-b-10"></div> <ul class="nav nav-tabs b-grey b-l b-r b-t" id="addContent"> <li class="active"><a href="#all-content-region"><span class="semi-bold">All</span> Content Pieces</a></li> <li><a href="#search-results-region"><span class="semi-bold">Search</span> Content Pieces</a></li> </ul> <div id="tab-content" class="tab-content" > <div id="all-content-region" class="tab-pane active"></div> <div id="search-results-region" class="tab-pane"></div> </div> </div>',e.prototype.className="tiles white grid simple vertical green",e.prototype.regions={filtersRegion:"#filters-region",allContentRegion:"#all-content-region",searchResultsRegion:"#search-results-region"},e.prototype.events={"click #addContent a":"changeTab"},e.prototype.changeTab=function(t){return t.preventDefault(),this.$el.find("#addContent a").removeClass("active"),$(t.target).closest("a").addClass("active").tab("show")},e}(Marionette.Layout),n}(e)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/content-pieces/content-pieces-app",["app","apps/content-pieces/list-content-pieces/app"],function(t){return t.module("ContentPiecesApp",function(t,e){var i,n;return i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"content-pieces":"listContentPieces"},e}(Marionette.AppRouter),n={listContentPieces:function(){return $.allowRoute("content-pieces")?new t.ContentList.ListController({region:e.mainContentRegion}):void 0}},t.on("start",function(){return new i({controller:n})})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/popup-dialog/single-edit-popup/single-edit-popup-view",["app"],function(t){return t.module("SingleEditPopup.Views",function(t,e){return t.SingleEditView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template='<div class="row form-row"> <div class="col-md-12"> <input id="hintText" type="text" class="form-control" placeholder="Enter your message for {{title}}"> </div> </div> <div class="clearfix"> <button type="button" class="btn btn-success hint-close">Save changes</button> </div>',e.prototype.mixinTemplateHelpers=function(t){return t=e.__super__.mixinTemplateHelpers.call(this,t),t.title=Marionette.getOption(this,"title"),t},e.prototype.events={"click .hint-close":"_closeHint","blur #hintText":"_saveText"},e.prototype.initialize=function(t){return this.text=t.text,this.dialogOptions={modal_title:Marionette.getOption(this,"title")}},e.prototype.onShow=function(){return this.$el.find("#hintText").val(this.text)},e.prototype._saveText=function(t){return this.text=$(t.target).val(),console.log(this.text)},e.prototype._closeHint=function(){return this.trigger("close:popup",{text:this.text})},e}(Marionette.ItemView)})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/popup-dialog/single-edit-popup/single-edit-popup-controller",["app","controllers/region-controller","apps/popup-dialog/single-edit-popup/single-edit-popup-view"],function(t,e){return t.module("SingleEditPopup",function(t,i){return t.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.initialize=function(t){return this.textArray=t.textArray,this.title=t.title,this.view=this._getHintView(t),this.listenTo(this.view,"close:popup",function(t){return this.textArray[this.title]=t.text,this.region.closeDialog()}),this.show(this.view)},i.prototype._getHintView=function(){return new t.Views.SingleEditView({text:this.textArray[this.title],title:_.humanize(this.title)})},i}(e),i.commands.setHandler("show:single:edit:popup",function(e){return new t.Controller({region:i.dialogRegion,textArray:e.textArray,title:e.title})})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("apps/default-router/default-app",["app"],function(t){return t.module("DefaultApp",function(t,e){var i,n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.appRoutes={"route-not-found":"routeNotFound"},e}(Marionette.AppRouter),i={routeNotFound:function(){return e.execute("show:404:app",{region:e.mainContentRegion})}},t.on("start",function(){return new n({controller:i})})})}),define("apps/walnut-appsloader",["apps/login/loginapp","apps/header/headerapp","apps/left-nav/leftnavapp","apps/teachers-dashboard/teachers-dashboard-app","apps/quiz-reports/app","apps/content-modules/content-modules-app","apps/quiz-modules/quiz-module-app","apps/student-training-module/app","apps/content-board/controller","apps/take-module-item/take-module-item-app","apps/no-permissions/app","apps/textbooks/app","apps/edit-module/module-edit-controller","apps/content-pieces/content-pieces-app","apps/popup-dialog/single-edit-popup/single-edit-popup-controller","apps/default-router/default-app"],function(){}),define("entities/base-entities",["app","backbone"],function(t){return t.module("Entities",function(t,e,i,n,o,s){}),t.Entities});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/user",["app","backbone"],function(t,e){return t.module("Entities.Users",function(t,e,i,n,o,s){var r,a,l;return t.UserModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.name="user",e.prototype.idAttribute="ID",e.prototype.defaults=function(){return{display_name:"",user_email:"",role:[],profile_pic:""}},e}(i.Model),l=new t.UserModel,"undefined"!=typeof USER&&null!==USER&&l.set(USER),a=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.UserModel,i.prototype.comparator="display_name",i.prototype.url=function(){return AJAXURL+"?action=get-users"},i}(i.Collection),r={getUsers:function(t){var e;return null==t&&(t={}),e=new a,e.fetch({data:t}),e},newUser:function(){return new t.UserModel},getUserByID:function(e){var i;return i=new t.UserModel({ID:e}),i.fetch(),i},getStudentsByDivision:function(t){var e,i;return e={role:"student",division:t},i=new a,i.fetch({data:e}),i},getUserData:function(t){var e;return e=l.get("data"),console.log(e[t]),e[t]},current_user_can:function(t){var e;return e=l.get("allcaps"),e[t]?!0:!1},getDummyStudents:function(){var t,e;return e=new a,t=[{ID:2343424,display_name:"Dummy Student 1",user_email:"dummystudent1@mailinator.com"},{ID:2343434,display_name:"Dummy Student 2",user_email:"dummystudent2@mailinator.com"},{ID:23434234,display_name:"Dummy Student 3",user_email:"dummystudent3@mailinator.com"},{ID:2343423432,display_name:"Dummy Student 4",user_email:"dummystudent4@mailinator.com"},{ID:2343432342,display_name:"Dummy Student 5",user_email:"dummystudent5@mailinator.com"}],e.set(t),e}},e.reqres.setHandler("get:user:model",function(){return l}),e.reqres.setHandler("get:loggedin:user:id",function(){return parseInt(l.get("ID"))}),e.reqres.setHandler("get:user:collection",function(t){return r.getUsers(t)}),e.reqres.setHandler("get:students:by:division",function(t){return r.getStudentsByDivision(t)}),e.reqres.setHandler("get:user:data",function(t){return r.getUserData(t)}),e.reqres.setHandler("get:dummy:students",function(){return r.getDummyStudents()}),e.reqres.setHandler("get:user:by:id",function(t){return r.getUserByID(t)}),e.reqres.setHandler("current:user:can",function(t){return r.current_user_can(t)}),e.reqres.setHandler("new:user",function(){return r.newUser()})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/menu",["app","backbone"],function(t,e){return t.module("Entities.Menus",function(t,e,i,n,o,s){var r,a;return t.MenuItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.defaults={post_title:"",menu_item_link:"",menu_item_parent:0,order:0,submenu:[]},e.prototype.name="menu-item",e}(i.Model),t.MenuItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.MenuItemModel,i.prototype.comparator="order",i}(i.Collection),a=new t.MenuItemCollection,r={getMenus:function(t){return null==t&&(t={}),a.isEmpty()?(a.url=AJAXURL+"?action=get-menus",a.fetch({reset:!0,data:t}),a):a}},e.reqres.setHandler("get:site:menus",function(){return r.getMenus()})}),t.Entities.Menus});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/textbooks",["app","backbone"],function(t,e){return t.module("Entities.Textbooks",function(t,e,i,n,o,s){var r;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="term_id",e.prototype.defaults={name:"",slug:"",description:"",parent:0,term_order:0,count:0,chapter_count:0},e.prototype.name="textbook",e.prototype.getClasses=function(){var t,e,i,n,o;if(i=[],e=this.get("classes"),s.isArray(e)){for(n=0,o=e.length;o>n;n++)t=e[n],i.push(CLASS_LABEL[t]);i.join()}return i},e}(i.Model),t.NameModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults={name:""},e.prototype.name="textbookName",e}(i.Model),t.ItemCollection=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,i),n.prototype.model=t.ItemModel,n.prototype.comparator="term_order",n.prototype.url=function(){return AJAXURL+"?action=get-textbooks"},n.prototype.parse=function(t){return this.total=t.count,t.data},n.prototype.fetchChaptersOrSections=function(t){var i;return i=e.request("get:chapters",{parent:t})},n}(i.Collection),t.NamesCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.NameModel,i.prototype.comparator="term_order",i.prototype.url=function(){return AJAXURL+"?action=get-textbook-names"},i.prototype.getTextbookName=function(t){var e,i;return i=this.get(t.textbook),null!=i?e=i.get("name"):void 0},i.prototype.getChapterName=function(t){var e,i;return e=this.get(t.chapter),null!=e?i=e.get("name"):void 0},i.prototype.getSectionsNames=function(t){var e,i,n,o,r,a,l,c;if(l=s.flatten(t.sections),a="",r=[],l){for(e=0,i=l.length;i>e;e++)n=l[e],c=this.get(n),null!=c&&(o=c.get("name")),r.push(o);return a=r.join()}},i.prototype.getSubSectionsNames=function(t){var e,i,n,o,r,a,l;if(l=s.flatten(t.subsections),o="",a=[],l){for(e=0,i=l.length;i>e;e++)n=l[e],r=this.get(n),null!=r&&a.push(r.get("name"));return o=a.join()}},i}(i.Collection),r={getTextbooks:function(e){var i;return null==e&&(e={}),i=new t.ItemCollection,i.fetch({reset:!0,data:e}),i},getTextBookByID:function(e){var i;return"undefined"!=typeof textbookCollection&&null!==textbookCollection&&(i=textbookCollection.get(e)),i||(i=new t.ItemModel({term_id:e}),i.fetch()),i},getTextBookNameByID:function(e){var i,n;return"undefined"!=typeof textbookCollection&&null!==textbookCollection&&(i=textbookCollection.get(e)),i||(i=new t.ItemModel({term_id:e}),i.fetch()),n=i.get("name")},getTextBookNamesByIDs:function(e){var i;return e=s.compact(s.flatten(e)),i=new t.NamesCollection,i.fetch({reset:!0,data:{term_ids:e}}),i}},e.reqres.setHandler("get:textbooks",function(t){return r.getTextbooks(t)}),e.reqres.setHandler("get:textbook:by:id",function(t){return r.getTextBookByID(t)}),e.reqres.setHandler("get:textbook:name:by:id",function(t){return r.getTextBookNameByID(t)}),e.reqres.setHandler("get:textbook:names:by:ids",function(t){return r.getTextBookNamesByIDs(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/chapters",["app","backbone"],function(t,e){return t.module("Entities.Chapters",function(t,e,i,n,o,s){var r;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="chapter_id",e.prototype.defaults={name:"",slug:"",description:"",parent:0,term_order:0},e.prototype.name="chapter",e}(i.Model),t.ItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.comparator="term_order",i.prototype.url=function(){return AJAXURL+"?action=get-chapters"},i.prototype.parse=function(t){return this.total=t.count,t.data},i}(i.Collection),t.SubSectionCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.comparator="term_order",i.prototype.url=function(){return AJAXURL+"?action=get-chapter-subsections"},i.prototype.parse=function(t){return this.total=t.count,t.data},i}(i.Collection),r={getChapters:function(e){var i;return null==e&&(e={}),i=new t.ItemCollection,i.fetch({reset:!0,data:e}),i},getChapterByID:function(e){var i;return i=chapterCollection.get(e),i||(i=new t.ItemModel({term_id:e}),console.log(i),i.fetch()),i},getSubsectionByChapterID:function(e){var i;return null==e&&(e={}),i=new t.SubSectionCollection,i.fetch({reset:!0,data:e}),i}},e.reqres.setHandler("get:chapters",function(t){return r.getChapters(t)}),e.reqres.setHandler("get:chapter:by:id",function(t){return r.getChapterByID(t)}),e.reqres.setHandler("get:subsections:by:chapter:id",function(t){return r.getSubsectionByChapterID(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/schools",["app","backbone"],function(t,e){return t.module("Entities.Schools",function(t,e,i,n,o,s){var r,a,l;return t.SchoolModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.name="schools",e.prototype.defaults=function(){return{school_name:"",school_logo:""}},e}(i.Model),a=new t.SchoolModel,t.SchoolCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.SchoolModel,i.prototype.comparator="id",i.prototype.url=function(){return AJAXURL+"?action=get-schools"},i}(i.Collection),l=new t.SchoolCollection,r={getSchools:function(t){return null==t&&(t={}),l.fetch({reset:!0,data:t}),l},getCurrentSchool:function(){return a=new t.SchoolModel,a.fetch(),a}},e.reqres.setHandler("get:all:schools",function(){return r.getSchools()}),e.reqres.setHandler("get:current:school",function(){return r.getCurrentSchool()}),e.reqres.setHandler("get:school:logo",function(){return r.getCurrentSchool()})}),t.Entities.Schools});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/breadcrumb",["app","backbone"],function(t,e){return t.module("Entities.Breadcrumb",function(t,e,i,n,o,s){var r;return t.BreadcrumbModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.name="breadcrumb",e.prototype.defaults=function(){return{items:[{label:"Dashboard",link:"javascript://"},{label:"Content Creator",link:"javascript://"},{label:"Textbooks",link:"javascript://",active:"active"}]}},e}(i.Model),window.breadcrumb=new t.BreadcrumbModel,r={updateBreadcrumbModel:function(t){return breadcrumb.set(t),e.execute("show:breadcrumbapp",{region:e.breadcrumbRegion})}},e.reqres.setHandler("get:breadcrumb:model",function(){return breadcrumb}),e.commands.setHandler("update:breadcrumb:model",function(t){return r.updateBreadcrumbModel(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,bind=function(t,e){return function(){return t.apply(e,arguments)}};define("entities/content-pieces",["app","backbone","bootbox"],function(t,e,i){return t.module("Entities.ContentPiece",function(t,e,n,o,s,r){var a,l;return t.ItemModel=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.idAttribute="ID",n.prototype.defaults={post_title:"",post_author:"",post_author_name:"",post_modified:"",post_date:"",post_tags:"",order:""},n.prototype.name="content-piece",n.prototype.setMarks=function(t){return this.set({marks:t*this.get("marks")}),this.set({multiplicationFactor:t}),this},n.prototype.duplicate=function(){return i.confirm("Are you sure you want to clone this content piece ?",function(t){return function(i){var n;return i?(t.cloneModel=e.request("new:content:piece"),n=t.toJSON(),t.clonedData=r.omit(n,["ID","guid","last_modified_by","post_author","post_author_name","post_date","post_date_gmt","published_by"]),t.clonedData.post_status="pending",t.clonedData.clone_id=t.id,e.execute("when:fetched",t.cloneModel,function(){return t.cloneModel.save(t.clonedData,{wait:!0,success:function(t){return document.location=SITEURL+("/content-creator/#edit-content/"+t.id)},error:function(t){return console.log(t)}})})):void 0}}(this))},n}(n.Model),t.ItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.comparator="order",i.prototype.url=function(){return AJAXURL+"?action=get-content-pieces"},i}(n.Collection),l=new t.ItemCollection,t.GroupItemCollection=function(e){function i(){return this.addedPieces=bind(this.addedPieces,this),this.removedModel=bind(this.removedModel,this),i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.comparator="order",i.prototype.initialize=function(){return console.log("content piece "),this.on("remove",this.removedModel,this),this.on("add",this.addedPieces,this)},i.prototype.removedModel=function(t){return this.trigger("content:pieces:of:group:removed",t)},i.prototype.addedPieces=function(t){return this.trigger("content:pieces:of:group:added",t)},i}(n.Collection),a={getContentPieces:function(e){var i;return null==e&&(e={}),i=new t.ItemCollection,i.fetch({add:!0,remove:!1,data:e,type:"post",success:function(t){return e.search_str?void 0:l.reset(t.models)}}),i},getContentPiecesOfGroup:function(e){var i,n,o,s,r,a;if(s=new t.GroupItemCollection,n=e.get("content_pieces"))for(r=0,a=n.length;a>r;r++)i=n[r],o=new t.ItemModel({ID:i}),o.fetch(),s.add(o);return s},getContentPieceByID:function(e){var i;return i=l.get(e),i||(i=new t.ItemModel({ID:e}),i.fetch({success:function(t){return l.add(t)}})),i},getContentPiecesByIDs:function(e){var i,n,o,s,a;for(null==e&&(e=[]),i=new t.ItemCollection,n=0,s=e.length;s>n;n++)o=e[n],a=l.get(o),a&&(i.add(a),e=r.without(e,o));return r.size(e)>0&&i.fetch({add:!0,remove:!1,data:{ids:e}}),i},newContentPiece:function(){var e;return e=new t.ItemModel},emptyContentCollection:function(){var e;return e=new t.ItemCollection}},e.reqres.setHandler("get:content:pieces",function(t){return a.getContentPieces(t)}),e.reqres.setHandler("get:content:pieces:of:group",function(t){return a.getContentPiecesOfGroup(t)}),e.reqres.setHandler("get:content:piece:by:id",function(t){return a.getContentPieceByID(t)}),e.reqres.setHandler("get:content:pieces:by:ids",function(t){return a.getContentPiecesByIDs(t)}),e.reqres.setHandler("new:content:piece",function(){return a.newContentPiece()}),e.reqres.setHandler("empty:content:pieces:collection",function(){return a.emptyContentCollection()}),e.reqres.setHandler("get:content:pieces:repository",function(){return l.clone()})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-group",["app","backbone"],function(t,e){return t.module("Entities.ContentGroup",function(t,e,i,n,o,s){var r,a;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.defaults={name:"",description:[],created_on:"",created_by:"",last_modified_on:"",last_modified_by:"",
published_on:"",published_by:"",post_status:"underreview",type:"teaching-module",total_minutes:0,duration:0,minshrs:"mins",term_ids:[],content_pieces:[],training_date:""},e.prototype.name="content-group",e}(i.Model),t.ItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.url=function(){return AJAXURL+"?action=get-content-groups"},i.prototype.parse=function(t){return t.data.reverse()},i}(i.Collection),a=new t.ItemCollection,r={getContentGroups:function(e){var i;return null==e&&(e={}),i=new t.ItemCollection,i.fetch({add:!0,remove:!1,data:e,type:"post",success:function(t){return e.search_str?void 0:a.reset(t.models)}}),i},getContentGroupByID:function(e){var i;return"undefined"!=typeof contentGroupCollection&&null!==contentGroupCollection&&(i=contentGroupCollection.get(e)),i||(i=new t.ItemModel({id:e}),i.fetch()),i},saveContentGroupDetails:function(e){var i;return i=new t.ItemModel(e)},newContentGroup:function(){var e;return e=new t.ItemModel},scheduleContentGroup:function(t){var i;return i=e.request("save:question:response"),i.set(t),i.save()},getEmptyModulesCollection:function(){var e;return e=new t.ItemCollection},getDummyModules:function(e){var i;return i=new t.ItemModel,i.set({id:3423432,name:"Dummy Module",description:"Dummy Module Description",created_on:"",created_by:"",last_modified_on:"",last_modified_by:"",published_on:"",published_by:"",post_status:"",type:"teaching-module",total_minutes:0,duration:40,minshrs:"mins",term_ids:[],content_pieces:[e],training_date:""})}},e.reqres.setHandler("get:content:groups",function(t){return r.getContentGroups(t)}),e.reqres.setHandler("get:content:group:by:id",function(t){return r.getContentGroupByID(t)}),e.reqres.setHandler("save:content:group:details",function(t){return r.saveContentGroupDetails(t)}),e.reqres.setHandler("new:content:group",function(){return r.newContentGroup()}),e.reqres.setHandler("schedule:content:group",function(t){return r.scheduleContentGroup(t)}),e.reqres.setHandler("empty:content:modules:collection",function(){return r.getEmptyModulesCollection()}),e.reqres.setHandler("create:dummy:content:module",function(t){return r.getDummyModules(t)}),e.reqres.setHandler("get:content:modules:repository",function(){return a.clone()})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/divisions",["app","backbone"],function(t,e){return t.module("Entities.Divisions",function(t,e,i,n,o,s){var r,a,l;return l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.defaults={division:"",class_id:0,students_count:0},e.prototype.name="division",e}(i.Model),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.model=l,e.prototype.url=function(){return AJAXURL+"?action=get-divisions"},e.prototype.parse=function(t){return t.data},e}(i.Collection),r={getDivisions:function(t){var e;return null==t&&(t={}),e=new a,!e.length>0&&e.fetch({reset:!0,data:t}),e},getDivisionByID:function(t){var e;return"undefined"!=typeof divisionCollection&&null!==divisionCollection&&(e=divisionCollection.get(t)),e||(e=new l({id:t}),e.fetch(),console.log(e)),e}},e.reqres.setHandler("get:divisions",function(t){return r.getDivisions(t)}),e.reqres.setHandler("get:division:by:id",function(t){return r.getDivisionByID(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/question-response",["app","backbone"],function(t,e){return t.module("Entities.QuestionResponse",function(t,e,i,n,o,s){var r,a,l;return l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="ref_id",e.prototype.defaults={collection_id:0,content_piece_id:0,division:0,question_response:[],time_taken:0,start_date:"",end_date:"",status:""},e.prototype.name="question-response",e}(i.Model),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.model=l,e.prototype.url=function(){return AJAXURL+"?action=get-question-response"},e.prototype.parse=function(t){return this.total=t.count,t.data},e}(i.Collection),r={getAllQuestionResponses:function(t){var e;return null==t&&(t={}),e=new a,e.fetch({reset:!0,data:t}),e},saveQuestionResponse:function(t){var e;return e=new l(t)},getEmptyQuestionResponseCollection:function(){var t;return t=new a}},e.reqres.setHandler("get:question:response:collection",function(t){return r.getAllQuestionResponses(t)}),e.reqres.setHandler("get:empty:question:response:collection",function(){return r.getEmptyQuestionResponseCollection()}),e.reqres.setHandler("save:question:response",function(t){return r.saveQuestionResponse(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/element",["app","backbone"],function(t,e){return t.module("Entities.Elements",function(t,e,i,n,o,s){var r,a;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="meta_id",e.prototype.defaults=function(){return{style:"",draggable:!0}},e.prototype.name="element",e.prototype.setMultiplicationFactor=function(t){return t?this.get("marks_set")?void 0:this.set({multiplicationFactor:t,marks:parseFloat((parseFloat(this.get("marks"))*t).toFixed(1)),marks_set:!0}):this.set({multiplicationFactor:1})},e}(i.Model),t.ElementCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ElementModel,i}(i.Collection),a=new t.ElementCollection,r={createElement:function(e){var i,n,o;return null==e&&(e={}),null!=e.meta_id&&"Row"!==(n=e.element)&&"TeacherQuestion"!==n&&null!=a.get(e.meta_id)?i=a.get(e.meta_id):(i=new t.ElementModel,i.set(e)),"Row"!==(o=i.get("element"))&&"TeacherQuestion"!==o&&"Column"!==i.get("element")&&i.isNew()&&i.save(null,{wait:!0}),a.add(i),i}},e.reqres.setHandler("create:new:element",function(t){return r.createElement(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/media",["app","backbone"],function(t,e){return t.module("Entities.Media",function(t,e,i,n,o,s){var r;return t.MediaModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.name="media",e.prototype.getBestFit=function(t){var e,i,n;return i=this.get("sizes"),e=null,n=99999,s.each(i,function(i,o){var s;return s=i.width-t,s=0>s?-1*s:s,n>=s?(e={url:i.url,size:o},n=s):void 0}),s.isNull(e)&&(e=i.full),console.log(e),e},e}(i.Model),t.MediaCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.filters={order:"DESC",orderby:"date",paged:1,posts_per_page:40,searchStr:""},i.prototype.model=t.MediaModel,i.prototype.parse=function(t){return"OK"===t.code?t.data:t},i}(i.Collection),r={fetchMedia:function(e,i){var n;return null==e&&(e={}),n=new t.MediaCollection,n.url=AJAXURL+"?action=query_attachments",s.defaults(e,n.filters),n.filters=e,n.fetch({reset:i,data:e}),n},getMediaById:function(e){var i;return 0===parseInt(e)?r.getPlaceHolderMedia():(i=new t.MediaModel({id:e}),i.fetch(),i)},getEmptyMediaCollection:function(){var e;return e=new t.MediaCollection},getMediaCollectionById:function(e){var i;return null==e&&(e=[]),i=new t.MediaCollection,i.url=AJAXURL+"?action=get_media_by_ids",s.size(e)>0&&i.fetch({data:{ids:e,mediaType:"video"}}),i},getPlaceHolderMedia:function(){var e;return e=new t.MediaModel},createNewMedia:function(e){var i;return i=new t.MediaModel(e)}},e.reqres.setHandler("get:empty:media:collection",function(){return r.getEmptyMediaCollection()}),e.reqres.setHandler("fetch:media",function(t,e){return null==t&&(t={}),null==e&&(e=!1),r.fetchMedia(t,e)}),e.reqres.setHandler("get:media:by:id",function(t){return r.getMediaById(t)}),e.reqres.setHandler("get:media:collection:by:ids",function(t){return r.getMediaCollectionById(t)}),e.reqres.setHandler("new:media:added",function(t){return r.createNewMedia(t)}),e.commands.setHandler("new:media:added",function(t){return r.createNewMedia(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/hotspotelement",["app","backbone"],function(t,e){return t.module("Entities.HotspotElement",function(t,e,i){var n;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults=function(){return{family:"hotspot",toDelete:!1}},e}(i.Model),t.ElementCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ElementModel,i}(i.Collection),n={createHotspotElement:function(e){var i;return i=new t.ElementModel,i.set(e),i},createHotspotElementCollection:function(e){var i;return null==e&&(e={}),i=new t.ElementCollection,i.set(e),i}},e.reqres.setHandler("create:new:hotspot:element",function(t){return n.createHotspotElement(t)}),e.reqres.setHandler("create:new:hotspot:element:collection",function(t){var e;return e=void 0!==t?t:"",n.createHotspotElementCollection(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/questionelement",["app","backbone"],function(t,e){return t.module("Entities.QuestionElement",function(t,e,i){var n;return t.ElementModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e}(i.Model),t.ElementCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ElementModel,i}(i.Collection),n={createQuestionElement:function(e){var i;return i=new t.ElementModel,i.set(e),i},createQuestionElementCollection:function(e){var i;return null==e&&(e={}),i=new t.ElementCollection,i.set(e),i}},e.reqres.setHandler("create:new:question:element",function(t){return n.createQuestionElement(t)}),e.reqres.setHandler("create:new:question:element:collection",function(t){var e;return null==t&&(t={}),e=t,n.createQuestionElementCollection(e)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/option",["app","backbone"],function(t,e){return t.module("Entities.Option",function(t,e,i,n,o,s){var r;return t.OptionModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="optionNo",e.prototype.defaults=function(){return{marks:0,text:""}},e.prototype.name="option-model",e}(i.Model),t.OptionCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.OptionModel,i}(i.Collection),r={createOption:function(e){var i;return i=new t.OptionModel,i.set(e),i},createOptionCollection:function(e){var i;return null==e&&(e={}),i=new t.OptionCollection,i.set(e),i}},e.reqres.setHandler("create:new:option",function(t){return r.createOption(t)}),e.reqres.setHandler("create:new:option:collection",function(t){return r.createOptionCollection(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/content-creator/json",["app","backbone"],function(t,e){return t.module("Entities.BuilderJSON",function(t,e,i,n,o,s){var r,a;return a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="ID",e.prototype.defaults={post_status:"pending"},e.prototype.name="content-piece",e.prototype.layout="",e}(i.Model),r={getPageJSON:function(t){var e;return null==t&&(t=""),t?(e=new a({ID:parseInt(t)}),e.fetch()):e=new a,e}},e.reqres.setHandler("get:page:json",function(t){return r.getPageJSON(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/answer",["app","backbone"],function(t,e){return t.module("Entities.Answer",function(t,e,i,n,o,s){var r;return t.AnswerModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults=function(){return{answer:[],marks:0,status:"not_attempted"}},e.prototype.name="answer",e}(i.Model),r={createAnswer:function(e){var i;return null==e&&(e={}),i=new t.AnswerModel,null!=e&&i.set(e),i}},e.reqres.setHandler("create:new:answer",function(t){return r.createAnswer(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/quiz-response-summary",["app","backbone"],function(t,e){return t.module("Entities.QuizQuestionResponse",function(t,e,i,n,o,s){var r;return t.SummaryModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="summary_id",e.prototype.defaults={collection_id:0,student_id:0,taken_on:"",num_skipped:0,total_time_taken:0,total_marks_scored:0,status:""},e.prototype.name="quiz-response-summary",e}(i.Model),t.SummaryCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.SummaryModel,i.prototype.url=function(){return AJAXURL+"?action=get-quiz-response-summary"},i.prototype.parse=function(t){return t.data},i}(i.Collection),r={createQuizResponseSummary:function(e){var i;return null==e&&(e={}),!e.collection_id&&e.student_id?!1:(i=new t.SummaryModel,i.set(e),i)},getQuizResponseSummary:function(e){var i;return null==e&&(e={}),i=new t.SummaryCollection,i.fetch({reset:!0,data:e}),i},getQuizResponseSummaryByID:function(e){var i;return i=new t.SummaryModel({summary_id:e}),i.fetch(),i},createQuizResponseSummaryCollection:function(e){var i;return i=new t.SummaryCollection,i.set(e),i}},e.reqres.setHandler("create:quiz:response:summary",function(t){return r.createQuizResponseSummary(t)}),e.reqres.setHandler("get:quiz:response:summary:by:id",function(t){return r.getQuizResponseSummaryByID(t)}),e.reqres.setHandler("get:quiz:response:summary",function(t){return r.getQuizResponseSummary(t)}),e.reqres.setHandler("create:quiz:response:summary:collection",function(t){return r.createQuizResponseSummaryCollection(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/quiz-question-response",["app","backbone"],function(t,e){return t.module("Entities.QuizQuestionResponse",function(t,e,i,n,o,s){var r;return t.ResponseModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="qr_id",e.prototype.defaults={summary_id:"",content_piece_id:0,question_response:[],time_taken:0,marks_scored:0,status:""},e.prototype.name="quiz-question-response",e}(i.Model),t.ResponseCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ResponseModel,i.prototype.url=function(){return AJAXURL+"?action=get-all-quiz-question-responses"},i.prototype.parse=function(t){return this.total=t.count,t.data},i.prototype.getTotalScored=function(){var t;return t=s.reduce(this.pluck("marks_scored"),function(t,e){return s.toNumber(t+e,1)})},i.prototype.getMarksScored=function(){var t,e;return e=0,t=this.pluck("marks_scored"),s.each(t,function(t){return t>0?e+=t:void 0}),e.toFixed(1)},i.prototype.getNegativeScored=function(){var t,e;return e=0,t=this.pluck("marks_scored"),s.each(t,function(t){return 0>t?e+=t:void 0}),e.toFixed(1)},i}(i.Collection),r={createQuizQuestionResponseModel:function(e){var i;return null==e&&(e={}),i=new t.ResponseModel,i.set(e),i},createEmptyQuizQuestionResponseCollection:function(e){var i;return null==e&&(e={}),i=new t.ResponseCollection},getAllQuizQuestionResponses:function(e){var i;return null==e&&(e={}),i=new t.ResponseCollection,i.fetch({reset:!0,data:e}),i}},e.reqres.setHandler("create:quiz:question:response:model",function(t){return r.createQuizQuestionResponseModel(t)}),e.reqres.setHandler("create:empty:question:response:collection",function(t){return r.createEmptyQuizQuestionResponseCollection(t)}),e.reqres.setHandler("get:quiz:question:response:collection",function(t){return r.getAllQuizQuestionResponses(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/grading-parameter",["app","backbone"],function(t,e){return t.module("Entities.GradingParameter",function(t,e,i,n,o,s){var r;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults={parameter:"",attributes:[]},e}(i.Model),t.ItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i}(i.Collection),r={getGradingParameterCollections:function(e){var i;return i=new t.ItemCollection,i.set(e),i},getGradingParameter:function(e){var i;return i=new t.ItemModel(e)}},e.reqres.setHandler("get:grading:parameter:collection",function(t){return r.getGradingParameterCollections(t)}),e.reqres.setHandler("get:grading:parameter",function(t){return r.getGradingParameter(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/communications",["app","backbone"],function(t,e){return t.module("Entities.Communications",function(t,e,i,n,o,s){var r;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.defaults={component:"",communication_type:"",recipients:[],status:"",date:"",priority:0,communication_mode:"",additional_data:[]},e.prototype.name="communications",e.prototype.getRecipients=function(){var t,e,i;return i=AJAXURL+"?action=get-communication-recipients",t=this.toJSON(),e=o.Deferred(),o.post(i,t,function(t){return function(t){return e.resolve(t)}}(this),"json"),e.promise()},e.prototype.getPreview=function(t){var e,i,n;return console.log(t),n=AJAXURL+"?action=get-communication-preview",e=this.toJSON(),e.additional_data.preview_recipient=t.toJSON(),i=o.Deferred(),o.post(n,e,function(t){return function(t){return i.resolve(t)}}(this),"json"),i.promise()},e}(i.Model),t.ItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.url=function(){return AJAXURL+"?action=get-communications"},i.prototype.parse=function(t){return t.data},i}(i.Collection),r={createCommunication:function(e){var i;return i=new t.ItemModel,i.set(e),i}},e.reqres.setHandler("create:communication",function(t){return r.createCommunication(t)})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/quiz",["app","backbone"],function(t,e){return t.module("Entities.Quiz",function(t,e,i,n,o,s){var r,a;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.defaults=function(){return{name:"",description:[],created_on:"",created_by:"",last_modified_on:"",last_modified_by:"",published_on:"",published_by:"",post_status:"underreview",type:"quiz",quiz_type:"practice",marks:0,total_minutes:0,duration:0,minshours:"mins",negMarksEnable:"false",negMarks:"",term_ids:[],content_pieces:[],message:{},content_layout:[]}},e.prototype.name="quiz",e.prototype.hasPermission=function(t){var e;return e=this.get("permissions"),e[t]?!0:!1},e.prototype.getMessageContent=function(t){var e,i,n;return i={end_quiz:"You really want to end the quiz?",submit_without_attempting:"You havent answered the question. Are you sure you want to continue?",incomplete_answer:"You havent completed the question. Are you sure you want to continue?",correct_answer:"You are correct!",incorrect_answer:"Sorry, you did not answer correctly",partial_correct_answers:"You are almost correct",quiz_time_up:"Sorry, your time is up"},n=i[t],s.isEmpty(this.get("message"))||(e=this.get("message"),e[t]&&(n=e[t])),n},e.prototype.getQuizTypeLabel=function(){var t;return t=function(){switch(this.get("quiz_type")){case"practice":return"Practice";case"test":return"Take at Home";case"class_test":return"Class Test"}}.call(this)},e}(i.Model),t.ItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.url=function(){return AJAXURL+"?action=get-quizes"},i.prototype.parse=function(t){return t.data.reverse()},i}(i.Collection),a=new t.ItemCollection,r={getQuizes:function(e){var i;return null==e&&(e={}),i=new t.ItemCollection,i.fetch({reset:!0,data:e,success:function(t){return e.search_str?void 0:a.reset(t.models)}}),i},getQuizByID:function(e){var i;return"undefined"!=typeof quizCollection&&null!==quizCollection&&(i=quizCollection.get(e)),i||(i=new t.ItemModel({id:e}),i.fetch()),i},saveQuizDetails:function(e){var i;return i=new t.ItemModel(e)},newQuiz:function(){return new t.ItemModel},getDummyQuiz:function(e){var i;return i=new t.ItemModel,i.set({id:3423432,name:"Dummy Module",description:"Dummy Module Description",type:"quiz",quiz_type:"test",duration:40,content_pieces:[e],permissions:{allow_skip:!0,display_answer:!0,allow_hint:!0}}),i},saveQuizSchedule:function(t){var e,i;return i=o.Deferred(),this.result=0,e=o.middle_layer(AJAXURL+"?action=save-quiz-schedule",t,function(t){return function(t){return i.resolve(t)}}(this)),i.promise()},clearQuizSchedule:function(t,e){var i,n,s;return s=o.Deferred(),n={quiz_id:t,division:e},i=o.middle_layer(AJAXURL+"?action=clear-quiz-schedule",n,function(t){return function(t){return s.resolve(t)}}(this)),s.promise()}},e.reqres.setHandler("get:quizes",function(t){return r.getQuizes(t)}),e.reqres.setHandler("get:quiz:by:id",function(t){return r.getQuizByID(t)}),e.reqres.setHandler("save:quiz:details",function(t){return r.saveQuizDetails(t)}),e.reqres.setHandler("new:quiz",function(){return r.newQuiz()}),e.reqres.setHandler("save:quiz:schedule",function(t){return r.saveQuizSchedule(t)}),e.reqres.setHandler("clear:quiz:schedule",function(t,e){return r.clearQuizSchedule(t,e)}),e.reqres.setHandler("create:dummy:quiz:module",function(t){return r.getDummyQuiz(t)}),e.reqres.setHandler("get:quiz:repository",function(){return a.clone()})})});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("entities/student-training",["app","backbone"],function(t,e){return t.module("Entities.StudentTraining",function(t,e,i,n,o,s){var r,a;return t.ItemModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.idAttribute="id",e.prototype.defaults={name:"",description:[],created_on:"",created_by:"",last_modified_on:"",last_modified_by:"",published_on:"",published_by:"",post_status:"underreview",type:"student-training",total_minutes:0,duration:0,minshrs:"mins",term_ids:[],content_pieces:[],training_date:""},e.prototype.name="student-training-module",e}(i.Model),t.ItemCollection=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.model=t.ItemModel,i.prototype.url=function(){return AJAXURL+"?action=get-student-training-modules"},i.prototype.parse=function(t){return t.data.reverse()},i}(i.Collection),a=new t.ItemCollection,r={getStudentTrainingModules:function(e){var i;return null==e&&(e={}),i=new t.ItemCollection,i.fetch({add:!0,remove:!1,data:e,type:"post",success:function(t){return e.search_str?void 0:a.reset(t.models)}}),i},getStudentTrainingByID:function(e){var i;return"undefined"!=typeof studentTrainingCollection&&null!==studentTrainingCollection&&(i=studentTrainingCollection.get(e)),i||(i=new t.ItemModel({id:e}),i.fetch()),i},saveStudentTrainingDetails:function(e){var i;return i=new t.ItemModel(e)},newStudentTrainingModule:function(){var e;return e=new t.ItemModel},scheduleStudentTraining:function(t){var i;return i=e.request("save:question:response"),i.set(t),i.save()}},e.reqres.setHandler("get:student:training:modules",function(t){return r.getStudentTrainingModules(t)}),e.reqres.setHandler("get:student:training:by:id",function(t){return r.getStudentTrainingByID(t)}),e.reqres.setHandler("save:student:training:details",function(t){return r.saveStudentTrainingDetails(t)}),e.reqres.setHandler("new:student:training:module",function(){return r.newStudentTrainingModule()}),e.reqres.setHandler("schedule:student:training",function(t){return r.scheduleStudentTraining(t)}),e.reqres.setHandler("get:student:training:modules:repository",function(){return a.clone()})})}),define("entities/walnut-entities-loader",["entities/base-entities","entities/user","entities/menu","entities/textbooks","entities/chapters","entities/schools","entities/breadcrumb","entities/content-pieces","entities/content-group","entities/divisions","entities/question-response","entities/content-creator/element","entities/content-creator/media","entities/content-creator/hotspotelement","entities/content-creator/questionelement","entities/content-creator/option","entities/content-creator/json","entities/answer","entities/quiz-response-summary","entities/quiz-question-response","entities/grading-parameter","entities/communications","entities/quiz","entities/student-training"],function(){});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("components/loading/view",["marionette"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.template="<i></i>",e.prototype.className="loading-container",e.prototype.onShow=function(){var t;return t=this._getOptions(),this.$el.spin(t)},e.prototype.onClose=function(){return this.$el.spin(!1)},e.prototype._getOptions=function(){return{lines:10,length:6,width:2.5,radius:7,corners:1,rotate:9,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},e}(t.ItemView)});var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("components/loading/controller",["app","controllers/region-controller","components/loading/view"],function(t,e,i){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,e),n.prototype.initialize=function(t){var e,i,n;switch(n=t.view,e=t.config,e=_.isBoolean(e)?{}:e,_.defaults(e,{loadingType:"spinner",entities:this.getEntities(n),debug:!1}),e.loadingType){case"opacity":this.region.currentView.$el.css("opacity",.5);break;case"spinner":i=this.getLoadingView(),this.show(i);break;default:throw new Error("Invalid loadingType")}return this.showRealView(n,i,e)},n.prototype.showRealView=function(e,i,n){var o;return o=_.debounce(function(t){return function(){switch(n.loadingType){case"opacity":t.region.currentView.$el.removeAttr("style");break;case"spinner":if(t.region&&t.region.currentView!==i)return e.close()}return n.debug?void 0:(t.show(e),e.triggerMethod("dependencies:fetched"))}}(this),10),t.commands.execute("when:fetched",n.entities,o)},n.prototype.getEntities=function(t){return _.chain(t).pick("model","collection").toArray().compact().value()},n.prototype.getLoadingView=function(){return new i},n}(e),t.commands.setHandler("show:loading",function(t,e){return new n({view:t,region:e.region,config:e.loading})})}),define("componentloader",["components/loading/controller"],function(){}),require.config({urlArgs:"ver="+(new Date).getTime(),baseUrl:"./wp-content/themes/walnut/walnut/dev/js",paths:{jquery:"plugins/jquery",jqueryui:"plugins/jquery.ui",jqueryvalidate:"plugins/jquery.validate.min",bootstrap:"plugins/bootstrap.min",underscore:"plugins/underscore",underscorestring:"plugins/underscorestring",backbone:"plugins/backbone",marionette:"plugins/backbone.marionette",text:"plugins/text",app:"walnut-app",syphon:"plugins/backbone.syphon",sidr:"plugins/jquery.sidr.min",slimroll:"plugins/jquery.slimscroll.min",breakpoints:"plugins/breakpoints",mustache:"plugins/mustache",componentloader:"components/component-loader",mixitup:"plugins/jquery.mixitup.min",spin:"plugins/spin",jqueryspin:"plugins/jquery.spin",tablesorter:"plugins/jquery.tablesorter",tablesorter_pager:"plugins/jquery.tablesorter.pager",detect:"plugins/detect",moment:"plugins/moment.min",select2:"plugins/select2",datepicker:"plugins/bootstrap-datepicker",jquery_listnav:"plugins/jquery-listnav",screwbuttons:"plugins/jquery.screwdefaultbuttonsV2",bridget:"plugins/jquery.bridget",isotope:"plugins/isotope.pkgd.min",kinetic:"plugins/kinetic",kineticresize:"plugins/kinetic.plugin.resize",checkbox:"plugins/flatui-checkbox",holder:"plugins/holder",panzer:"plugins/panzer",panzerlist:"plugins/panzerlist",timerplugin:"plugins/jquery.countdown_plugin.min",countdowntimer:"plugins/jquery.countdown.min",spinedit:"plugins/bootstrap-spinedit",resizablecolumns:"plugins/jquery.resizableColumns.min",bootbox:"plugins/bootbox.min",jPages:"plugins/jPages.min",modenizr:"plugins/bookBlock/modernizr.custom",jquerypp:"plugins/bookBlock/jquerypp.custom",bookblock:"plugins/bookBlock/jquery.bookblock",new_moment:"plugins/new_moment",datetimepicker:"plugins/datetimepicker.min"},shim:{underscore:{exports:"_"},jquery:["underscore"],jqueryui:["jquery"],bootstrap:["jquery"],underscorestring:["jquery","underscore"],backbone:{deps:["jquery","underscore"],exports:"Backbone"},marionette:{deps:["backbone"],exports:"Marionette"},sidr:["jquery"],tablesorter:["jquery"],tablesorter_pager:["jquery","tablesorter"],slimroll:["jquery"],breakpoints:["jquery"],mixitup:["jquery"],jqueryspin:["spin"],jqueryvalidate:["jquery"],syphon:["backbone"],moment:["jquery"],select2:["jquery","bootstrap"],datepicker:["jquery","bootstrap"],
jquery_listnav:["jquery"],screwbuttons:["jquery"],checkbox:["bootstrap"],kineticresize:["kinetic"],bridget:["jquery"],isotope:["jquery","bridget"],panzer:["jquery"],panzerlist:["jquery"],timerplugin:["jquery"],countdowntimer:["jquery","timerplugin"],spinedit:["jquery","bootstrap"],resizablecolumns:["jquery"],bootbox:["jquery","bootstrap"],jPages:["jquery"],jquerypp:["jquery"],bookblock:["jquery"],new_moment:["jquery"],datetimepicker:["jquery","new_moment","bootstrap"],app:["plugins/walnut-pluginloader","config/walnut-configloader"]}}),require(["plugins/walnut-pluginloader","config/walnut-configloader","app","apps/walnut-appsloader","entities/walnut-entities-loader","componentloader"],function(t,e,i){return i.start()}),define("walnut-main",function(){});